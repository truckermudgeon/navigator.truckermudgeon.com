var x5=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var zQ=x5(Hr=>{function bE(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const h=Object.getOwnPropertyDescriptor(a,c);h&&Object.defineProperty(e,c,h.get?h:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function i(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(c){if(c.ep)return;c.ep=!0;const h=i(c);fetch(c.href,h)}})();function Lv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hb={exports:{}},Ly={},db={exports:{}},hn={};var nT;function b5(){if(nT)return hn;nT=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),f=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),P=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),R=Symbol.iterator;function D(ve){return ve===null||typeof ve!="object"?null:(ve=R&&ve[R]||ve["@@iterator"],typeof ve=="function"?ve:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,j={};function V(ve,Fe,pt){this.props=ve,this.context=Fe,this.refs=j,this.updater=pt||$}V.prototype.isReactComponent={},V.prototype.setState=function(ve,Fe){if(typeof ve!="object"&&typeof ve!="function"&&ve!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ve,Fe,"setState")},V.prototype.forceUpdate=function(ve){this.updater.enqueueForceUpdate(this,ve,"forceUpdate")};function se(){}se.prototype=V.prototype;function ue(ve,Fe,pt){this.props=ve,this.context=Fe,this.refs=j,this.updater=pt||$}var Q=ue.prototype=new se;Q.constructor=ue,G(Q,V.prototype),Q.isPureReactComponent=!0;var de=Array.isArray,oe=Object.prototype.hasOwnProperty,be={current:null},we={key:!0,ref:!0,__self:!0,__source:!0};function Ie(ve,Fe,pt){var Tt,Ct={},_t=null,bt=null;if(Fe!=null)for(Tt in Fe.ref!==void 0&&(bt=Fe.ref),Fe.key!==void 0&&(_t=""+Fe.key),Fe)oe.call(Fe,Tt)&&!we.hasOwnProperty(Tt)&&(Ct[Tt]=Fe[Tt]);var nt=arguments.length-2;if(nt===1)Ct.children=pt;else if(1<nt){for(var kt=Array(nt),At=0;At<nt;At++)kt[At]=arguments[At+2];Ct.children=kt}if(ve&&ve.defaultProps)for(Tt in nt=ve.defaultProps,nt)Ct[Tt]===void 0&&(Ct[Tt]=nt[Tt]);return{$$typeof:e,type:ve,key:_t,ref:bt,props:Ct,_owner:be.current}}function ke(ve,Fe){return{$$typeof:e,type:ve.type,key:Fe,ref:ve.ref,props:ve.props,_owner:ve._owner}}function ae(ve){return typeof ve=="object"&&ve!==null&&ve.$$typeof===e}function Ee(ve){var Fe={"=":"=0",":":"=2"};return"$"+ve.replace(/[=:]/g,function(pt){return Fe[pt]})}var Ze=/\/+/g;function Qe(ve,Fe){return typeof ve=="object"&&ve!==null&&ve.key!=null?Ee(""+ve.key):Fe.toString(36)}function vt(ve,Fe,pt,Tt,Ct){var _t=typeof ve;(_t==="undefined"||_t==="boolean")&&(ve=null);var bt=!1;if(ve===null)bt=!0;else switch(_t){case"string":case"number":bt=!0;break;case"object":switch(ve.$$typeof){case e:case t:bt=!0}}if(bt)return bt=ve,Ct=Ct(bt),ve=Tt===""?"."+Qe(bt,0):Tt,de(Ct)?(pt="",ve!=null&&(pt=ve.replace(Ze,"$&/")+"/"),vt(Ct,Fe,pt,"",function(At){return At})):Ct!=null&&(ae(Ct)&&(Ct=ke(Ct,pt+(!Ct.key||bt&&bt.key===Ct.key?"":(""+Ct.key).replace(Ze,"$&/")+"/")+ve)),Fe.push(Ct)),1;if(bt=0,Tt=Tt===""?".":Tt+":",de(ve))for(var nt=0;nt<ve.length;nt++){_t=ve[nt];var kt=Tt+Qe(_t,nt);bt+=vt(_t,Fe,pt,kt,Ct)}else if(kt=D(ve),typeof kt=="function")for(ve=kt.call(ve),nt=0;!(_t=ve.next()).done;)_t=_t.value,kt=Tt+Qe(_t,nt++),bt+=vt(_t,Fe,pt,kt,Ct);else if(_t==="object")throw Fe=String(ve),Error("Objects are not valid as a React child (found: "+(Fe==="[object Object]"?"object with keys {"+Object.keys(ve).join(", ")+"}":Fe)+"). If you meant to render a collection of children, use an array instead.");return bt}function st(ve,Fe,pt){if(ve==null)return ve;var Tt=[],Ct=0;return vt(ve,Tt,"","",function(_t){return Fe.call(pt,_t,Ct++)}),Tt}function He(ve){if(ve._status===-1){var Fe=ve._result;Fe=Fe(),Fe.then(function(pt){(ve._status===0||ve._status===-1)&&(ve._status=1,ve._result=pt)},function(pt){(ve._status===0||ve._status===-1)&&(ve._status=2,ve._result=pt)}),ve._status===-1&&(ve._status=0,ve._result=Fe)}if(ve._status===1)return ve._result.default;throw ve._result}var rt={current:null},Ge={transition:null},Ve={ReactCurrentDispatcher:rt,ReactCurrentBatchConfig:Ge,ReactCurrentOwner:be};function ut(){throw Error("act(...) is not supported in production builds of React.")}return hn.Children={map:st,forEach:function(ve,Fe,pt){st(ve,function(){Fe.apply(this,arguments)},pt)},count:function(ve){var Fe=0;return st(ve,function(){Fe++}),Fe},toArray:function(ve){return st(ve,function(Fe){return Fe})||[]},only:function(ve){if(!ae(ve))throw Error("React.Children.only expected to receive a single React element child.");return ve}},hn.Component=V,hn.Fragment=i,hn.Profiler=c,hn.PureComponent=ue,hn.StrictMode=a,hn.Suspense=x,hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ve,hn.act=ut,hn.cloneElement=function(ve,Fe,pt){if(ve==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ve+".");var Tt=G({},ve.props),Ct=ve.key,_t=ve.ref,bt=ve._owner;if(Fe!=null){if(Fe.ref!==void 0&&(_t=Fe.ref,bt=be.current),Fe.key!==void 0&&(Ct=""+Fe.key),ve.type&&ve.type.defaultProps)var nt=ve.type.defaultProps;for(kt in Fe)oe.call(Fe,kt)&&!we.hasOwnProperty(kt)&&(Tt[kt]=Fe[kt]===void 0&&nt!==void 0?nt[kt]:Fe[kt])}var kt=arguments.length-2;if(kt===1)Tt.children=pt;else if(1<kt){nt=Array(kt);for(var At=0;At<kt;At++)nt[At]=arguments[At+2];Tt.children=nt}return{$$typeof:e,type:ve.type,key:Ct,ref:_t,props:Tt,_owner:bt}},hn.createContext=function(ve){return ve={$$typeof:f,_currentValue:ve,_currentValue2:ve,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ve.Provider={$$typeof:h,_context:ve},ve.Consumer=ve},hn.createElement=Ie,hn.createFactory=function(ve){var Fe=Ie.bind(null,ve);return Fe.type=ve,Fe},hn.createRef=function(){return{current:null}},hn.forwardRef=function(ve){return{$$typeof:o,render:ve}},hn.isValidElement=ae,hn.lazy=function(ve){return{$$typeof:I,_payload:{_status:-1,_result:ve},_init:He}},hn.memo=function(ve,Fe){return{$$typeof:P,type:ve,compare:Fe===void 0?null:Fe}},hn.startTransition=function(ve){var Fe=Ge.transition;Ge.transition={};try{ve()}finally{Ge.transition=Fe}},hn.unstable_act=ut,hn.useCallback=function(ve,Fe){return rt.current.useCallback(ve,Fe)},hn.useContext=function(ve){return rt.current.useContext(ve)},hn.useDebugValue=function(){},hn.useDeferredValue=function(ve){return rt.current.useDeferredValue(ve)},hn.useEffect=function(ve,Fe){return rt.current.useEffect(ve,Fe)},hn.useId=function(){return rt.current.useId()},hn.useImperativeHandle=function(ve,Fe,pt){return rt.current.useImperativeHandle(ve,Fe,pt)},hn.useInsertionEffect=function(ve,Fe){return rt.current.useInsertionEffect(ve,Fe)},hn.useLayoutEffect=function(ve,Fe){return rt.current.useLayoutEffect(ve,Fe)},hn.useMemo=function(ve,Fe){return rt.current.useMemo(ve,Fe)},hn.useReducer=function(ve,Fe,pt){return rt.current.useReducer(ve,Fe,pt)},hn.useRef=function(ve){return rt.current.useRef(ve)},hn.useState=function(ve){return rt.current.useState(ve)},hn.useSyncExternalStore=function(ve,Fe,pt){return rt.current.useSyncExternalStore(ve,Fe,pt)},hn.useTransition=function(){return rt.current.useTransition()},hn.version="18.3.1",hn}var iT;function Px(){return iT||(iT=1,db.exports=b5()),db.exports}var oT;function w5(){if(oT)return Ly;oT=1;var e=Px(),t=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,c=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function f(o,x,P){var I,R={},D=null,$=null;P!==void 0&&(D=""+P),x.key!==void 0&&(D=""+x.key),x.ref!==void 0&&($=x.ref);for(I in x)a.call(x,I)&&!h.hasOwnProperty(I)&&(R[I]=x[I]);if(o&&o.defaultProps)for(I in x=o.defaultProps,x)R[I]===void 0&&(R[I]=x[I]);return{$$typeof:t,type:o,key:D,ref:$,props:R,_owner:c.current}}return Ly.Fragment=i,Ly.jsx=f,Ly.jsxs=f,Ly}var sT;function S5(){return sT||(sT=1,hb.exports=w5()),hb.exports}var q=S5();const Fy={grey:{50:"#FBFCFE",100:"#F0F4F8",200:"#DDE7EE",300:"#CDD7E1",400:"#9FA6AD",500:"#636B74",600:"#555E68",700:"#32383E",800:"#171A1C",900:"#0B0D0E"},blue:{50:"#EDF5FD",100:"#E3EFFB",200:"#C7DFF7",300:"#97C3F0",400:"#4393E4",500:"#0B6BCB",600:"#185EA5",700:"#12467B",800:"#0A2744",900:"#051423"},yellow:{50:"#FEFAF6",100:"#FDF0E1",200:"#FCE1C2",300:"#F3C896",400:"#EA9A3E",500:"#9A5B13",600:"#72430D",700:"#492B08",800:"#2E1B05",900:"#1D1002"},red:{50:"#FEF6F6",100:"#FCE4E4",200:"#F7C5C5",300:"#F09898",400:"#E47474",500:"#C41C1C",600:"#A51818",700:"#7D1212",800:"#430A0A",900:"#240505"},green:{50:"#F6FEF6",100:"#E3FBE3",200:"#C7F7C7",300:"#A1E8A1",400:"#51BC51",500:"#1F7A1F",600:"#136C13",700:"#0A470A",800:"#042F04",900:"#021D02"}},Fv="$$joy";function gv(e){let t="https://mui.com/production-error/?code="+e;for(let i=1;i<arguments.length;i+=1)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Se.apply(null,arguments)}var Y=Px();const dn=Lv(Y),yv=bE({__proto__:null,default:dn},[Y]);function C5(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function T5(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var M5=function(){function e(i){var a=this;this._insertTag=function(c){var h;a.tags.length===0?a.insertionPoint?h=a.insertionPoint.nextSibling:a.prepend?h=a.container.firstChild:h=a.before:h=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(c,h),a.tags.push(c)},this.isSpeedy=i.speedy===void 0?!0:i.speedy,this.tags=[],this.ctr=0,this.nonce=i.nonce,this.key=i.key,this.container=i.container,this.prepend=i.prepend,this.insertionPoint=i.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(a){a.forEach(this._insertTag)},t.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(T5(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var h=C5(c);try{h.insertRule(a,h.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(a));this.ctr++},t.flush=function(){this.tags.forEach(function(a){var c;return(c=a.parentNode)==null?void 0:c.removeChild(a)}),this.tags=[],this.ctr=0},e}(),Rs="-ms-",q_="-moz-",jn="-webkit-",wE="comm",n2="rule",i2="decl",P5="@import",SE="@keyframes",E5="@layer",I5=Math.abs,Ex=String.fromCharCode,k5=Object.assign;function A5(e,t){return ps(e,0)^45?(((t<<2^ps(e,0))<<2^ps(e,1))<<2^ps(e,2))<<2^ps(e,3):0}function CE(e){return e.trim()}function R5(e,t){return(e=t.exec(e))?e[0]:e}function Nn(e,t,i){return e.replace(t,i)}function yw(e,t){return e.indexOf(t)}function ps(e,t){return e.charCodeAt(t)|0}function vv(e,t,i){return e.slice(t,i)}function Zu(e){return e.length}function o2(e){return e.length}function i_(e,t){return t.push(e),e}function D5(e,t){return e.map(t).join("")}var Ix=1,Dg=1,TE=0,Aa=0,Eo=0,Xg="";function kx(e,t,i,a,c,h,f){return{value:e,root:t,parent:i,type:a,props:c,children:h,line:Ix,column:Dg,length:f,return:""}}function By(e,t){return k5(kx("",null,null,"",null,null,0),e,{length:-e.length},t)}function z5(){return Eo}function O5(){return Eo=Aa>0?ps(Xg,--Aa):0,Dg--,Eo===10&&(Dg=1,Ix--),Eo}function dl(){return Eo=Aa<TE?ps(Xg,Aa++):0,Dg++,Eo===10&&(Dg=1,Ix++),Eo}function rh(){return ps(Xg,Aa)}function T_(){return Aa}function Bv(e,t){return vv(Xg,e,t)}function _v(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ME(e){return Ix=Dg=1,TE=Zu(Xg=e),Aa=0,[]}function PE(e){return Xg="",e}function M_(e){return CE(Bv(Aa-1,vw(e===91?e+2:e===40?e+1:e)))}function L5(e){for(;(Eo=rh())&&Eo<33;)dl();return _v(e)>2||_v(Eo)>3?"":" "}function F5(e,t){for(;--t&&dl()&&!(Eo<48||Eo>102||Eo>57&&Eo<65||Eo>70&&Eo<97););return Bv(e,T_()+(t<6&&rh()==32&&dl()==32))}function vw(e){for(;dl();)switch(Eo){case e:return Aa;case 34:case 39:e!==34&&e!==39&&vw(Eo);break;case 40:e===41&&vw(e);break;case 92:dl();break}return Aa}function B5(e,t){for(;dl()&&e+Eo!==57;)if(e+Eo===84&&rh()===47)break;return"/*"+Bv(t,Aa-1)+"*"+Ex(e===47?e:dl())}function $5(e){for(;!_v(rh());)dl();return Bv(e,Aa)}function j5(e){return PE(P_("",null,null,null,[""],e=ME(e),0,[0],e))}function P_(e,t,i,a,c,h,f,o,x){for(var P=0,I=0,R=f,D=0,$=0,G=0,j=1,V=1,se=1,ue=0,Q="",de=c,oe=h,be=a,we=Q;V;)switch(G=ue,ue=dl()){case 40:if(G!=108&&ps(we,R-1)==58){yw(we+=Nn(M_(ue),"&","&\f"),"&\f")!=-1&&(se=-1);break}case 34:case 39:case 91:we+=M_(ue);break;case 9:case 10:case 13:case 32:we+=L5(G);break;case 92:we+=F5(T_()-1,7);continue;case 47:switch(rh()){case 42:case 47:i_(N5(B5(dl(),T_()),t,i),x);break;default:we+="/"}break;case 123*j:o[P++]=Zu(we)*se;case 125*j:case 59:case 0:switch(ue){case 0:case 125:V=0;case 59+I:se==-1&&(we=Nn(we,/\f/g,"")),$>0&&Zu(we)-R&&i_($>32?lT(we+";",a,i,R-1):lT(Nn(we," ","")+";",a,i,R-2),x);break;case 59:we+=";";default:if(i_(be=aT(we,t,i,P,I,c,o,Q,de=[],oe=[],R),h),ue===123)if(I===0)P_(we,t,be,be,de,h,R,o,oe);else switch(D===99&&ps(we,3)===110?100:D){case 100:case 108:case 109:case 115:P_(e,be,be,a&&i_(aT(e,be,be,0,0,c,o,Q,c,de=[],R),oe),c,oe,R,o,a?de:oe);break;default:P_(we,be,be,be,[""],oe,0,o,oe)}}P=I=$=0,j=se=1,Q=we="",R=f;break;case 58:R=1+Zu(we),$=G;default:if(j<1){if(ue==123)--j;else if(ue==125&&j++==0&&O5()==125)continue}switch(we+=Ex(ue),ue*j){case 38:se=I>0?1:(we+="\f",-1);break;case 44:o[P++]=(Zu(we)-1)*se,se=1;break;case 64:rh()===45&&(we+=M_(dl())),D=rh(),I=R=Zu(Q=we+=$5(T_())),ue++;break;case 45:G===45&&Zu(we)==2&&(j=0)}}return h}function aT(e,t,i,a,c,h,f,o,x,P,I){for(var R=c-1,D=c===0?h:[""],$=o2(D),G=0,j=0,V=0;G<a;++G)for(var se=0,ue=vv(e,R+1,R=I5(j=f[G])),Q=e;se<$;++se)(Q=CE(j>0?D[se]+" "+ue:Nn(ue,/&\f/g,D[se])))&&(x[V++]=Q);return kx(e,t,i,c===0?n2:o,x,P,I)}function N5(e,t,i){return kx(e,t,i,wE,Ex(z5()),vv(e,2,-2),0)}function lT(e,t,i,a){return kx(e,t,i,i2,vv(e,0,a),vv(e,a+1,-1),a)}function Cg(e,t){for(var i="",a=o2(e),c=0;c<a;c++)i+=t(e[c],c,e,t)||"";return i}function V5(e,t,i,a){switch(e.type){case E5:if(e.children.length)break;case P5:case i2:return e.return=e.return||e.value;case wE:return"";case SE:return e.return=e.value+"{"+Cg(e.children,a)+"}";case n2:e.value=e.props.join(",")}return Zu(i=Cg(e.children,a))?e.return=e.value+"{"+i+"}":""}function U5(e){var t=o2(e);return function(i,a,c,h){for(var f="",o=0;o<t;o++)f+=e[o](i,a,c,h)||"";return f}}function G5(e){return function(t){t.root||(t=t.return)&&e(t)}}function EE(e){var t=Object.create(null);return function(i){return t[i]===void 0&&(t[i]=e(i)),t[i]}}var q5=function(t,i,a){for(var c=0,h=0;c=h,h=rh(),c===38&&h===12&&(i[a]=1),!_v(h);)dl();return Bv(t,Aa)},H5=function(t,i){var a=-1,c=44;do switch(_v(c)){case 0:c===38&&rh()===12&&(i[a]=1),t[a]+=q5(Aa-1,i,a);break;case 2:t[a]+=M_(c);break;case 4:if(c===44){t[++a]=rh()===58?"&\f":"",i[a]=t[a].length;break}default:t[a]+=Ex(c)}while(c=dl());return t},W5=function(t,i){return PE(H5(ME(t),i))},cT=new WeakMap,Z5=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var i=t.value,a=t.parent,c=t.column===a.column&&t.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(t.props.length===1&&i.charCodeAt(0)!==58&&!cT.get(a))&&!c){cT.set(t,!0);for(var h=[],f=W5(i,h),o=a.props,x=0,P=0;x<f.length;x++)for(var I=0;I<o.length;I++,P++)t.props[P]=h[x]?f[x].replace(/&\f/g,o[I]):o[I]+" "+f[x]}}},X5=function(t){if(t.type==="decl"){var i=t.value;i.charCodeAt(0)===108&&i.charCodeAt(2)===98&&(t.return="",t.value="")}};function IE(e,t){switch(A5(e,t)){case 5103:return jn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return jn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return jn+e+q_+e+Rs+e+e;case 6828:case 4268:return jn+e+Rs+e+e;case 6165:return jn+e+Rs+"flex-"+e+e;case 5187:return jn+e+Nn(e,/(\w+).+(:[^]+)/,jn+"box-$1$2"+Rs+"flex-$1$2")+e;case 5443:return jn+e+Rs+"flex-item-"+Nn(e,/flex-|-self/,"")+e;case 4675:return jn+e+Rs+"flex-line-pack"+Nn(e,/align-content|flex-|-self/,"")+e;case 5548:return jn+e+Rs+Nn(e,"shrink","negative")+e;case 5292:return jn+e+Rs+Nn(e,"basis","preferred-size")+e;case 6060:return jn+"box-"+Nn(e,"-grow","")+jn+e+Rs+Nn(e,"grow","positive")+e;case 4554:return jn+Nn(e,/([^-])(transform)/g,"$1"+jn+"$2")+e;case 6187:return Nn(Nn(Nn(e,/(zoom-|grab)/,jn+"$1"),/(image-set)/,jn+"$1"),e,"")+e;case 5495:case 3959:return Nn(e,/(image-set\([^]*)/,jn+"$1$`$1");case 4968:return Nn(Nn(e,/(.+:)(flex-)?(.*)/,jn+"box-pack:$3"+Rs+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+jn+e+e;case 4095:case 3583:case 4068:case 2532:return Nn(e,/(.+)-inline(.+)/,jn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Zu(e)-1-t>6)switch(ps(e,t+1)){case 109:if(ps(e,t+4)!==45)break;case 102:return Nn(e,/(.+:)(.+)-([^]+)/,"$1"+jn+"$2-$3$1"+q_+(ps(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~yw(e,"stretch")?IE(Nn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ps(e,t+1)!==115)break;case 6444:switch(ps(e,Zu(e)-3-(~yw(e,"!important")&&10))){case 107:return Nn(e,":",":"+jn)+e;case 101:return Nn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+jn+(ps(e,14)===45?"inline-":"")+"box$3$1"+jn+"$2$3$1"+Rs+"$2box$3")+e}break;case 5936:switch(ps(e,t+11)){case 114:return jn+e+Rs+Nn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return jn+e+Rs+Nn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return jn+e+Rs+Nn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return jn+e+Rs+e+e}return e}var K5=function(t,i,a,c){if(t.length>-1&&!t.return)switch(t.type){case i2:t.return=IE(t.value,t.length);break;case SE:return Cg([By(t,{value:Nn(t.value,"@","@"+jn)})],c);case n2:if(t.length)return D5(t.props,function(h){switch(R5(h,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Cg([By(t,{props:[Nn(h,/:(read-\w+)/,":"+q_+"$1")]})],c);case"::placeholder":return Cg([By(t,{props:[Nn(h,/:(plac\w+)/,":"+jn+"input-$1")]}),By(t,{props:[Nn(h,/:(plac\w+)/,":"+q_+"$1")]}),By(t,{props:[Nn(h,/:(plac\w+)/,Rs+"input-$1")]})],c)}return""})}},Y5=[K5],J5=function(t){var i=t.key;if(i==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(j){var V=j.getAttribute("data-emotion");V.indexOf(" ")!==-1&&(document.head.appendChild(j),j.setAttribute("data-s",""))})}var c=t.stylisPlugins||Y5,h={},f,o=[];f=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+i+' "]'),function(j){for(var V=j.getAttribute("data-emotion").split(" "),se=1;se<V.length;se++)h[V[se]]=!0;o.push(j)});var x,P=[Z5,X5];{var I,R=[V5,G5(function(j){I.insert(j)})],D=U5(P.concat(c,R)),$=function(V){return Cg(j5(V),D)};x=function(V,se,ue,Q){I=ue,$(V?V+"{"+se.styles+"}":se.styles),Q&&(G.inserted[se.name]=!0)}}var G={key:i,sheet:new M5({key:i,container:f,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:h,registered:{},insert:x};return G.sheet.hydrate(o),G},fb={exports:{}},Kn={};var uT;function Q5(){if(uT)return Kn;uT=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,i=e?Symbol.for("react.portal"):60106,a=e?Symbol.for("react.fragment"):60107,c=e?Symbol.for("react.strict_mode"):60108,h=e?Symbol.for("react.profiler"):60114,f=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,x=e?Symbol.for("react.async_mode"):60111,P=e?Symbol.for("react.concurrent_mode"):60111,I=e?Symbol.for("react.forward_ref"):60112,R=e?Symbol.for("react.suspense"):60113,D=e?Symbol.for("react.suspense_list"):60120,$=e?Symbol.for("react.memo"):60115,G=e?Symbol.for("react.lazy"):60116,j=e?Symbol.for("react.block"):60121,V=e?Symbol.for("react.fundamental"):60117,se=e?Symbol.for("react.responder"):60118,ue=e?Symbol.for("react.scope"):60119;function Q(oe){if(typeof oe=="object"&&oe!==null){var be=oe.$$typeof;switch(be){case t:switch(oe=oe.type,oe){case x:case P:case a:case h:case c:case R:return oe;default:switch(oe=oe&&oe.$$typeof,oe){case o:case I:case G:case $:case f:return oe;default:return be}}case i:return be}}}function de(oe){return Q(oe)===P}return Kn.AsyncMode=x,Kn.ConcurrentMode=P,Kn.ContextConsumer=o,Kn.ContextProvider=f,Kn.Element=t,Kn.ForwardRef=I,Kn.Fragment=a,Kn.Lazy=G,Kn.Memo=$,Kn.Portal=i,Kn.Profiler=h,Kn.StrictMode=c,Kn.Suspense=R,Kn.isAsyncMode=function(oe){return de(oe)||Q(oe)===x},Kn.isConcurrentMode=de,Kn.isContextConsumer=function(oe){return Q(oe)===o},Kn.isContextProvider=function(oe){return Q(oe)===f},Kn.isElement=function(oe){return typeof oe=="object"&&oe!==null&&oe.$$typeof===t},Kn.isForwardRef=function(oe){return Q(oe)===I},Kn.isFragment=function(oe){return Q(oe)===a},Kn.isLazy=function(oe){return Q(oe)===G},Kn.isMemo=function(oe){return Q(oe)===$},Kn.isPortal=function(oe){return Q(oe)===i},Kn.isProfiler=function(oe){return Q(oe)===h},Kn.isStrictMode=function(oe){return Q(oe)===c},Kn.isSuspense=function(oe){return Q(oe)===R},Kn.isValidElementType=function(oe){return typeof oe=="string"||typeof oe=="function"||oe===a||oe===P||oe===h||oe===c||oe===R||oe===D||typeof oe=="object"&&oe!==null&&(oe.$$typeof===G||oe.$$typeof===$||oe.$$typeof===f||oe.$$typeof===o||oe.$$typeof===I||oe.$$typeof===V||oe.$$typeof===se||oe.$$typeof===ue||oe.$$typeof===j)},Kn.typeOf=Q,Kn}var hT;function e3(){return hT||(hT=1,fb.exports=Q5()),fb.exports}var pb,dT;function t3(){if(dT)return pb;dT=1;var e=e3(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},c={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},h={};h[e.ForwardRef]=a,h[e.Memo]=c;function f(G){return e.isMemo(G)?c:h[G.$$typeof]||t}var o=Object.defineProperty,x=Object.getOwnPropertyNames,P=Object.getOwnPropertySymbols,I=Object.getOwnPropertyDescriptor,R=Object.getPrototypeOf,D=Object.prototype;function $(G,j,V){if(typeof j!="string"){if(D){var se=R(j);se&&se!==D&&$(G,se,V)}var ue=x(j);P&&(ue=ue.concat(P(j)));for(var Q=f(G),de=f(j),oe=0;oe<ue.length;++oe){var be=ue[oe];if(!i[be]&&!(V&&V[be])&&!(de&&de[be])&&!(Q&&Q[be])){var we=I(j,be);try{o(G,be,we)}catch{}}}}return G}return pb=$,pb}t3();var r3=!0;function kE(e,t,i){var a="";return i.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):c&&(a+=c+" ")}),a}var s2=function(t,i,a){var c=t.key+"-"+i.name;(a===!1||r3===!1)&&t.registered[c]===void 0&&(t.registered[c]=i.styles)},a2=function(t,i,a){s2(t,i,a);var c=t.key+"-"+i.name;if(t.inserted[i.name]===void 0){var h=i;do t.insert(i===h?"."+c:"",h,t.sheet,!0),h=h.next;while(h!==void 0)}};function n3(e){for(var t=0,i,a=0,c=e.length;c>=4;++a,c-=4)i=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var i3={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},o3=/[A-Z]|^ms/g,s3=/_EMO_([^_]+?)_([^]*?)_EMO_/g,AE=function(t){return t.charCodeAt(1)===45},fT=function(t){return t!=null&&typeof t!="boolean"},mb=EE(function(e){return AE(e)?e:e.replace(o3,"-$&").toLowerCase()}),pT=function(t,i){switch(t){case"animation":case"animationName":if(typeof i=="string")return i.replace(s3,function(a,c,h){return Xu={name:c,styles:h,next:Xu},c})}return i3[t]!==1&&!AE(t)&&typeof i=="number"&&i!==0?i+"px":i};function xv(e,t,i){if(i==null)return"";var a=i;if(a.__emotion_styles!==void 0)return a;switch(typeof i){case"boolean":return"";case"object":{var c=i;if(c.anim===1)return Xu={name:c.name,styles:c.styles,next:Xu},c.name;var h=i;if(h.styles!==void 0){var f=h.next;if(f!==void 0)for(;f!==void 0;)Xu={name:f.name,styles:f.styles,next:Xu},f=f.next;var o=h.styles+";";return o}return a3(e,t,i)}case"function":{if(e!==void 0){var x=Xu,P=i(e);return Xu=x,xv(e,t,P)}break}}var I=i;if(t==null)return I;var R=t[I];return R!==void 0?R:I}function a3(e,t,i){var a="";if(Array.isArray(i))for(var c=0;c<i.length;c++)a+=xv(e,t,i[c])+";";else for(var h in i){var f=i[h];if(typeof f!="object"){var o=f;t!=null&&t[o]!==void 0?a+=h+"{"+t[o]+"}":fT(o)&&(a+=mb(h)+":"+pT(h,o)+";")}else if(Array.isArray(f)&&typeof f[0]=="string"&&(t==null||t[f[0]]===void 0))for(var x=0;x<f.length;x++)fT(f[x])&&(a+=mb(h)+":"+pT(h,f[x])+";");else{var P=xv(e,t,f);switch(h){case"animation":case"animationName":{a+=mb(h)+":"+P+";";break}default:a+=h+"{"+P+"}"}}}return a}var mT=/label:\s*([^\s;{]+)\s*(;|$)/g,Xu;function $v(e,t,i){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var a=!0,c="";Xu=void 0;var h=e[0];if(h==null||h.raw===void 0)a=!1,c+=xv(i,t,h);else{var f=h;c+=f[0]}for(var o=1;o<e.length;o++)if(c+=xv(i,t,e[o]),a){var x=h;c+=x[o]}mT.lastIndex=0;for(var P="",I;(I=mT.exec(c))!==null;)P+="-"+I[1];var R=n3(c)+P;return{name:R,styles:c,next:Xu}}var l3=function(t){return t()},RE=yv.useInsertionEffect?yv.useInsertionEffect:!1,DE=RE||l3,gT=RE||Y.useLayoutEffect,zE=Y.createContext(typeof HTMLElement<"u"?J5({key:"css"}):null);zE.Provider;var l2=function(t){return Y.forwardRef(function(i,a){var c=Y.useContext(zE);return t(i,c,a)})},tm=Y.createContext({}),c2={}.hasOwnProperty,_w="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",c3=function(t,i){var a={};for(var c in i)c2.call(i,c)&&(a[c]=i[c]);return a[_w]=t,a},u3=function(t){var i=t.cache,a=t.serialized,c=t.isStringTag;return s2(i,a,c),DE(function(){return a2(i,a,c)}),null},h3=l2(function(e,t,i){var a=e.css;typeof a=="string"&&t.registered[a]!==void 0&&(a=t.registered[a]);var c=e[_w],h=[a],f="";typeof e.className=="string"?f=kE(t.registered,h,e.className):e.className!=null&&(f=e.className+" ");var o=$v(h,void 0,Y.useContext(tm));f+=t.key+"-"+o.name;var x={};for(var P in e)c2.call(e,P)&&P!=="css"&&P!==_w&&(x[P]=e[P]);return x.className=f,i&&(x.ref=i),Y.createElement(Y.Fragment,null,Y.createElement(u3,{cache:t,serialized:o,isStringTag:typeof c=="string"}),Y.createElement(c,x))}),d3=h3,yT=function(t,i){var a=arguments;if(i==null||!c2.call(i,"css"))return Y.createElement.apply(void 0,a);var c=a.length,h=new Array(c);h[0]=d3,h[1]=c3(t,i);for(var f=2;f<c;f++)h[f]=a[f];return Y.createElement.apply(null,h)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(yT||(yT={}));var OE=l2(function(e,t){var i=e.styles,a=$v([i],void 0,Y.useContext(tm)),c=Y.useRef();return gT(function(){var h=t.key+"-global",f=new t.sheet.constructor({key:h,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),o=!1,x=document.querySelector('style[data-emotion="'+h+" "+a.name+'"]');return t.sheet.tags.length&&(f.before=t.sheet.tags[0]),x!==null&&(o=!0,x.setAttribute("data-emotion",h),f.hydrate([x])),c.current=[f,o],function(){f.flush()}},[t]),gT(function(){var h=c.current,f=h[0],o=h[1];if(o){h[1]=!1;return}if(a.next!==void 0&&a2(t,a.next,!0),f.tags.length){var x=f.tags[f.tags.length-1].nextElementSibling;f.before=x,f.flush()}t.insert("",a,f,!1)},[t,a.name]),null});function LE(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return $v(t)}function u2(){var e=LE.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var f3=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,p3=EE(function(e){return f3.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),m3=p3,g3=function(t){return t!=="theme"},vT=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?m3:g3},_T=function(t,i,a){var c;if(i){var h=i.shouldForwardProp;c=t.__emotion_forwardProp&&h?function(f){return t.__emotion_forwardProp(f)&&h(f)}:h}return typeof c!="function"&&a&&(c=t.__emotion_forwardProp),c},y3=function(t){var i=t.cache,a=t.serialized,c=t.isStringTag;return s2(i,a,c),DE(function(){return a2(i,a,c)}),null},v3=function e(t,i){var a=t.__emotion_real===t,c=a&&t.__emotion_base||t,h,f;i!==void 0&&(h=i.label,f=i.target);var o=_T(t,i,a),x=o||vT(c),P=!x("as");return function(){var I=arguments,R=a&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(h!==void 0&&R.push("label:"+h+";"),I[0]==null||I[0].raw===void 0)R.push.apply(R,I);else{var D=I[0];R.push(D[0]);for(var $=I.length,G=1;G<$;G++)R.push(I[G],D[G])}var j=l2(function(V,se,ue){var Q=P&&V.as||c,de="",oe=[],be=V;if(V.theme==null){be={};for(var we in V)be[we]=V[we];be.theme=Y.useContext(tm)}typeof V.className=="string"?de=kE(se.registered,oe,V.className):V.className!=null&&(de=V.className+" ");var Ie=$v(R.concat(oe),se.registered,be);de+=se.key+"-"+Ie.name,f!==void 0&&(de+=" "+f);var ke=P&&o===void 0?vT(Q):x,ae={};for(var Ee in V)P&&Ee==="as"||ke(Ee)&&(ae[Ee]=V[Ee]);return ae.className=de,ue&&(ae.ref=ue),Y.createElement(Y.Fragment,null,Y.createElement(y3,{cache:se,serialized:Ie,isStringTag:typeof Q=="string"}),Y.createElement(Q,ae))});return j.displayName=h!==void 0?h:"Styled("+(typeof c=="string"?c:c.displayName||c.name||"Component")+")",j.defaultProps=t.defaultProps,j.__emotion_real=j,j.__emotion_base=c,j.__emotion_styles=R,j.__emotion_forwardProp=o,Object.defineProperty(j,"toString",{value:function(){return"."+f}}),j.withComponent=function(V,se){var ue=e(V,Se({},i,se,{shouldForwardProp:_T(j,se,!0)}));return ue.apply(void 0,R)},j}},_3=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],H_=v3.bind(null);_3.forEach(function(e){H_[e]=H_(e)});function x3(e){return e==null||Object.keys(e).length===0}function E_(e){const{styles:t,defaultTheme:i={}}=e,a=typeof t=="function"?c=>t(x3(c)?i:c):t;return q.jsx(OE,{styles:a})}function FE(e,t){return H_(e,t)}const b3=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function Er(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function vf(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function BE(e){if(Y.isValidElement(e)||!vf(e))return e;const t={};return Object.keys(e).forEach(i=>{t[i]=BE(e[i])}),t}function fl(e,t,i={clone:!0}){const a=i.clone?Se({},e):e;return vf(e)&&vf(t)&&Object.keys(t).forEach(c=>{Y.isValidElement(t[c])?a[c]=t[c]:vf(t[c])&&Object.prototype.hasOwnProperty.call(e,c)&&vf(e[c])?a[c]=fl(e[c],t[c],i):i.clone?a[c]=vf(t[c])?BE(t[c]):t[c]:a[c]=t[c]}),a}const w3=["values","unit","step"],S3=e=>{const t=Object.keys(e).map(i=>({key:i,val:e[i]}))||[];return t.sort((i,a)=>i.val-a.val),t.reduce((i,a)=>Se({},i,{[a.key]:a.val}),{})};function $E(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:i="px",step:a=5}=e,c=Er(e,w3),h=S3(t),f=Object.keys(h);function o(D){return`@media (min-width:${typeof t[D]=="number"?t[D]:D}${i})`}function x(D){return`@media (max-width:${(typeof t[D]=="number"?t[D]:D)-a/100}${i})`}function P(D,$){const G=f.indexOf($);return`@media (min-width:${typeof t[D]=="number"?t[D]:D}${i}) and (max-width:${(G!==-1&&typeof t[f[G]]=="number"?t[f[G]]:$)-a/100}${i})`}function I(D){return f.indexOf(D)+1<f.length?P(D,f[f.indexOf(D)+1]):o(D)}function R(D){const $=f.indexOf(D);return $===0?o(f[1]):$===f.length-1?x(f[$]):P(D,f[f.indexOf(D)+1]).replace("@media","@media not all and")}return Se({keys:f,values:h,up:o,down:x,between:P,only:I,not:R,unit:i},c)}const C3={borderRadius:4};function Qy(e,t){return t?fl(e,t,{clone:!1}):e}const h2={xs:0,sm:600,md:900,lg:1200,xl:1536},xT={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${h2[e]}px)`};function ru(e,t,i){const a=e.theme||{};if(Array.isArray(t)){const h=a.breakpoints||xT;return t.reduce((f,o,x)=>(f[h.up(h.keys[x])]=i(t[x]),f),{})}if(typeof t=="object"){const h=a.breakpoints||xT;return Object.keys(t).reduce((f,o)=>{if(Object.keys(h.values||h2).indexOf(o)!==-1){const x=h.up(o);f[x]=i(t[o],o)}else{const x=o;f[x]=t[x]}return f},{})}return i(t)}function jE(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((a,c)=>{const h=e.up(c);return a[h]={},a},{}))||{}}function NE(e,t){return e.reduce((i,a)=>{const c=i[a];return(!c||Object.keys(c).length===0)&&delete i[a],i},t)}function T3(e,...t){const i=jE(e),a=[i,...t].reduce((c,h)=>fl(c,h),{});return NE(Object.keys(i),a)}function M3(e,t){if(typeof e!="object")return{};const i={},a=Object.keys(t);return Array.isArray(e)?a.forEach((c,h)=>{h<e.length&&(i[c]=!0)}):a.forEach(c=>{e[c]!=null&&(i[c]=!0)}),i}function gb({values:e,breakpoints:t,base:i}){const a=i||M3(e,t),c=Object.keys(a);if(c.length===0)return e;let h;return c.reduce((f,o,x)=>(Array.isArray(e)?(f[o]=e[x]!=null?e[x]:e[h],h=x):typeof e=="object"?(f[o]=e[o]!=null?e[o]:e[h],h=o):f[o]=e,f),{})}function wr(e){if(typeof e!="string")throw new Error(gv(7));return e.charAt(0).toUpperCase()+e.slice(1)}function zg(e,t,i=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&i){const a=`vars.${t}`.split(".").reduce((c,h)=>c&&c[h]?c[h]:null,e);if(a!=null)return a}return t.split(".").reduce((a,c)=>a&&a[c]!=null?a[c]:null,e)}function W_(e,t,i,a=i){let c;return typeof e=="function"?c=e(i):Array.isArray(e)?c=e[i]||a:c=zg(e,i)||a,t&&(c=t(c,a,e)),c}function go(e){const{prop:t,cssProperty:i=e.prop,themeKey:a,transform:c}=e,h=f=>{if(f[t]==null)return null;const o=f[t],x=f.theme,P=zg(x,a)||{};return ru(f,o,R=>{let D=W_(P,c,R);return R===D&&typeof R=="string"&&(D=W_(P,c,`${t}${R==="default"?"":wr(R)}`,R)),i===!1?D:{[i]:D}})};return h.propTypes={},h.filterProps=[t],h}function P3(e){const t={};return i=>(t[i]===void 0&&(t[i]=e(i)),t[i])}const E3={m:"margin",p:"padding"},I3={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},bT={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},k3=P3(e=>{if(e.length>2)if(bT[e])e=bT[e];else return[e];const[t,i]=e.split(""),a=E3[t],c=I3[i]||"";return Array.isArray(c)?c.map(h=>a+h):[a+c]}),d2=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],f2=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...d2,...f2];function jv(e,t,i,a){var c;const h=(c=zg(e,t,!1))!=null?c:i;return typeof h=="number"?f=>typeof f=="string"?f:h*f:Array.isArray(h)?f=>typeof f=="string"?f:h[f]:typeof h=="function"?h:()=>{}}function p2(e){return jv(e,"spacing",8)}function qp(e,t){if(typeof t=="string"||t==null)return t;const i=Math.abs(t),a=e(i);return t>=0?a:typeof a=="number"?-a:`-${a}`}function A3(e,t){return i=>e.reduce((a,c)=>(a[c]=qp(t,i),a),{})}function R3(e,t,i,a){if(t.indexOf(i)===-1)return null;const c=k3(i),h=A3(c,a),f=e[i];return ru(e,f,h)}function VE(e,t){const i=p2(e.theme);return Object.keys(e).map(a=>R3(e,t,a,i)).reduce(Qy,{})}function oo(e){return VE(e,d2)}oo.propTypes={};oo.filterProps=d2;function so(e){return VE(e,f2)}so.propTypes={};so.filterProps=f2;function UE(e=8){if(e.mui)return e;const t=p2({spacing:e}),i=(...a)=>(a.length===0?[1]:a).map(h=>{const f=t(h);return typeof f=="number"?`${f}px`:f}).join(" ");return i.mui=!0,i}function Ax(...e){const t=e.reduce((a,c)=>(c.filterProps.forEach(h=>{a[h]=c}),a),{}),i=a=>Object.keys(a).reduce((c,h)=>t[h]?Qy(c,t[h](a)):c,{});return i.propTypes={},i.filterProps=e.reduce((a,c)=>a.concat(c.filterProps),[]),i}function Kl(e){return typeof e!="number"?e:`${e}px solid`}function sc(e,t){return go({prop:e,themeKey:"borders",transform:t})}const D3=sc("border",Kl),z3=sc("borderTop",Kl),O3=sc("borderRight",Kl),L3=sc("borderBottom",Kl),F3=sc("borderLeft",Kl),B3=sc("borderColor"),$3=sc("borderTopColor"),j3=sc("borderRightColor"),N3=sc("borderBottomColor"),V3=sc("borderLeftColor"),U3=sc("outline",Kl),G3=sc("outlineColor"),Rx=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=jv(e.theme,"shape.borderRadius",4),i=a=>({borderRadius:qp(t,a)});return ru(e,e.borderRadius,i)}return null};Rx.propTypes={};Rx.filterProps=["borderRadius"];Ax(D3,z3,O3,L3,F3,B3,$3,j3,N3,V3,Rx,U3,G3);const Dx=e=>{if(e.gap!==void 0&&e.gap!==null){const t=jv(e.theme,"spacing",8),i=a=>({gap:qp(t,a)});return ru(e,e.gap,i)}return null};Dx.propTypes={};Dx.filterProps=["gap"];const zx=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=jv(e.theme,"spacing",8),i=a=>({columnGap:qp(t,a)});return ru(e,e.columnGap,i)}return null};zx.propTypes={};zx.filterProps=["columnGap"];const Ox=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=jv(e.theme,"spacing",8),i=a=>({rowGap:qp(t,a)});return ru(e,e.rowGap,i)}return null};Ox.propTypes={};Ox.filterProps=["rowGap"];const q3=go({prop:"gridColumn"}),H3=go({prop:"gridRow"}),W3=go({prop:"gridAutoFlow"}),Z3=go({prop:"gridAutoColumns"}),X3=go({prop:"gridAutoRows"}),K3=go({prop:"gridTemplateColumns"}),Y3=go({prop:"gridTemplateRows"}),J3=go({prop:"gridTemplateAreas"}),Q3=go({prop:"gridArea"});Ax(Dx,zx,Ox,q3,H3,W3,Z3,X3,K3,Y3,J3,Q3);function Tg(e,t){return t==="grey"?t:e}const ez=go({prop:"color",themeKey:"palette",transform:Tg}),tz=go({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Tg}),rz=go({prop:"backgroundColor",themeKey:"palette",transform:Tg});Ax(ez,tz,rz);function sl(e){return e<=1&&e!==0?`${e*100}%`:e}const nz=go({prop:"width",transform:sl}),m2=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=i=>{var a,c;const h=((a=e.theme)==null||(a=a.breakpoints)==null||(a=a.values)==null?void 0:a[i])||h2[i];return h?((c=e.theme)==null||(c=c.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${h}${e.theme.breakpoints.unit}`}:{maxWidth:h}:{maxWidth:sl(i)}};return ru(e,e.maxWidth,t)}return null};m2.filterProps=["maxWidth"];const iz=go({prop:"minWidth",transform:sl}),oz=go({prop:"height",transform:sl}),sz=go({prop:"maxHeight",transform:sl}),az=go({prop:"minHeight",transform:sl});go({prop:"size",cssProperty:"width",transform:sl});go({prop:"size",cssProperty:"height",transform:sl});const lz=go({prop:"boxSizing"});Ax(nz,m2,iz,oz,sz,az,lz);const Lx={border:{themeKey:"borders",transform:Kl},borderTop:{themeKey:"borders",transform:Kl},borderRight:{themeKey:"borders",transform:Kl},borderBottom:{themeKey:"borders",transform:Kl},borderLeft:{themeKey:"borders",transform:Kl},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Kl},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Rx},color:{themeKey:"palette",transform:Tg},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Tg},backgroundColor:{themeKey:"palette",transform:Tg},p:{style:so},pt:{style:so},pr:{style:so},pb:{style:so},pl:{style:so},px:{style:so},py:{style:so},padding:{style:so},paddingTop:{style:so},paddingRight:{style:so},paddingBottom:{style:so},paddingLeft:{style:so},paddingX:{style:so},paddingY:{style:so},paddingInline:{style:so},paddingInlineStart:{style:so},paddingInlineEnd:{style:so},paddingBlock:{style:so},paddingBlockStart:{style:so},paddingBlockEnd:{style:so},m:{style:oo},mt:{style:oo},mr:{style:oo},mb:{style:oo},ml:{style:oo},mx:{style:oo},my:{style:oo},margin:{style:oo},marginTop:{style:oo},marginRight:{style:oo},marginBottom:{style:oo},marginLeft:{style:oo},marginX:{style:oo},marginY:{style:oo},marginInline:{style:oo},marginInlineStart:{style:oo},marginInlineEnd:{style:oo},marginBlock:{style:oo},marginBlockStart:{style:oo},marginBlockEnd:{style:oo},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Dx},rowGap:{style:Ox},columnGap:{style:zx},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sl},maxWidth:{style:m2},minWidth:{transform:sl},height:{transform:sl},maxHeight:{transform:sl},minHeight:{transform:sl},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function cz(...e){const t=e.reduce((a,c)=>a.concat(Object.keys(c)),[]),i=new Set(t);return e.every(a=>i.size===Object.keys(a).length)}function uz(e,t){return typeof e=="function"?e(t):e}function hz(){function e(i,a,c,h){const f={[i]:a,theme:c},o=h[i];if(!o)return{[i]:a};const{cssProperty:x=i,themeKey:P,transform:I,style:R}=o;if(a==null)return null;if(P==="typography"&&a==="inherit")return{[i]:a};const D=zg(c,P)||{};return R?R(f):ru(f,a,G=>{let j=W_(D,I,G);return G===j&&typeof G=="string"&&(j=W_(D,I,`${i}${G==="default"?"":wr(G)}`,G)),x===!1?j:{[x]:j}})}function t(i){var a;const{sx:c,theme:h={}}=i||{};if(!c)return null;const f=(a=h.unstable_sxConfig)!=null?a:Lx;function o(x){let P=x;if(typeof x=="function")P=x(h);else if(typeof x!="object")return x;if(!P)return null;const I=jE(h.breakpoints),R=Object.keys(I);let D=I;return Object.keys(P).forEach($=>{const G=uz(P[$],h);if(G!=null)if(typeof G=="object")if(f[$])D=Qy(D,e($,G,h,f));else{const j=ru({theme:h},G,V=>({[$]:V}));cz(j,G)?D[$]=t({sx:G,theme:h}):D=Qy(D,j)}else D=Qy(D,e($,G,h,f))}),NE(R,D)}return Array.isArray(c)?c.map(o):o(c)}return t}const Nv=hz();Nv.filterProps=["sx"];function GE(e,t){const i=this;return i.vars&&typeof i.getColorSchemeSelector=="function"?{[i.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:i.palette.mode===e?t:{}}const dz=["breakpoints","palette","spacing","shape"];function g2(e={},...t){const{breakpoints:i={},palette:a={},spacing:c,shape:h={}}=e,f=Er(e,dz),o=$E(i),x=UE(c);let P=fl({breakpoints:o,direction:"ltr",components:{},palette:Se({mode:"light"},a),spacing:x,shape:Se({},C3,h)},f);return P.applyStyles=GE,P=t.reduce((I,R)=>fl(I,R),P),P.unstable_sxConfig=Se({},Lx,f?.unstable_sxConfig),P.unstable_sx=function(R){return Nv({sx:R,theme:this})},P}function fz(e){return Object.keys(e).length===0}function qE(e=null){const t=Y.useContext(tm);return!t||fz(t)?e:t}const pz=g2();function y2(e=pz){return qE(e)}function mz({styles:e,themeId:t,defaultTheme:i={}}){const a=y2(i),c=typeof e=="function"?e(t&&a[t]||a):e;return q.jsx(E_,{styles:c})}const gz=["sx"],yz=e=>{var t,i;const a={systemProps:{},otherProps:{}},c=(t=e==null||(i=e.theme)==null?void 0:i.unstable_sxConfig)!=null?t:Lx;return Object.keys(e).forEach(h=>{c[h]?a.systemProps[h]=e[h]:a.otherProps[h]=e[h]}),a};function Fx(e){const{sx:t}=e,i=Er(e,gz),{systemProps:a,otherProps:c}=yz(i);let h;return Array.isArray(t)?h=[a,...t]:typeof t=="function"?h=(...f)=>{const o=t(...f);return vf(o)?Se({},a,o):a}:h=Se({},a,t),Se({},c,{sx:h})}const wT=e=>e,vz=()=>{let e=wT;return{configure(t){e=t},generate(t){return e(t)},reset(){e=wT}}},HE=vz();function WE(e){var t,i,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(i=WE(e[t]))&&(a&&(a+=" "),a+=i)}else for(i in e)e[i]&&(a&&(a+=" "),a+=i);return a}function ci(){for(var e,t,i=0,a="",c=arguments.length;i<c;i++)(e=arguments[i])&&(t=WE(e))&&(a&&(a+=" "),a+=t);return a}const _z=["className","component"];function xz(e={}){const{themeId:t,defaultTheme:i,defaultClassName:a="MuiBox-root",generateClassName:c}=e,h=FE("div",{shouldForwardProp:o=>o!=="theme"&&o!=="sx"&&o!=="as"})(Nv);return Y.forwardRef(function(x,P){const I=y2(i),R=Fx(x),{className:D,component:$="div"}=R,G=Er(R,_z);return q.jsx(h,Se({as:$,ref:P,className:ci(D,c?c(a):a),theme:t&&I[t]||I},G))})}const ZE={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function v2(e,t,i="Mui"){const a=ZE[t];return a?`${i}-${a}`:`${HE.generate(e)}-${t}`}function XE(e,t,i="Mui"){const a={};return t.forEach(c=>{a[c]=v2(e,c,i)}),a}const bz=["ownerState"],wz=["variants"],Sz=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Cz(e){return Object.keys(e).length===0}function Tz(e){return typeof e=="string"&&e.charCodeAt(0)>96}function yb(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Mz=g2(),Pz=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function o_({defaultTheme:e,theme:t,themeId:i}){return Cz(t)?e:t[i]||t}function Ez(e){return e?(t,i)=>i[e]:null}function I_(e,t){let{ownerState:i}=t,a=Er(t,bz);const c=typeof e=="function"?e(Se({ownerState:i},a)):e;if(Array.isArray(c))return c.flatMap(h=>I_(h,Se({ownerState:i},a)));if(c&&typeof c=="object"&&Array.isArray(c.variants)){const{variants:h=[]}=c;let o=Er(c,wz);return h.forEach(x=>{let P=!0;typeof x.props=="function"?P=x.props(Se({ownerState:i},a,i)):Object.keys(x.props).forEach(I=>{i?.[I]!==x.props[I]&&a[I]!==x.props[I]&&(P=!1)}),P&&(Array.isArray(o)||(o=[o]),o.push(typeof x.style=="function"?x.style(Se({ownerState:i},a,i)):x.style))}),o}return c}function KE(e={}){const{themeId:t,defaultTheme:i=Mz,rootShouldForwardProp:a=yb,slotShouldForwardProp:c=yb}=e,h=f=>Nv(Se({},f,{theme:o_(Se({},f,{defaultTheme:i,themeId:t}))}));return h.__mui_systemSx=!0,(f,o={})=>{b3(f,oe=>oe.filter(be=>!(be!=null&&be.__mui_systemSx)));const{name:x,slot:P,skipVariantsResolver:I,skipSx:R,overridesResolver:D=Ez(Pz(P))}=o,$=Er(o,Sz),G=I!==void 0?I:P&&P!=="Root"&&P!=="root"||!1,j=R||!1;let V,se=yb;P==="Root"||P==="root"?se=a:P?se=c:Tz(f)&&(se=void 0);const ue=FE(f,Se({shouldForwardProp:se,label:V},$)),Q=oe=>typeof oe=="function"&&oe.__emotion_real!==oe||vf(oe)?be=>I_(oe,Se({},be,{theme:o_({theme:be.theme,defaultTheme:i,themeId:t})})):oe,de=(oe,...be)=>{let we=Q(oe);const Ie=be?be.map(Q):[];x&&D&&Ie.push(Ee=>{const Ze=o_(Se({},Ee,{defaultTheme:i,themeId:t}));if(!Ze.components||!Ze.components[x]||!Ze.components[x].styleOverrides)return null;const Qe=Ze.components[x].styleOverrides,vt={};return Object.entries(Qe).forEach(([st,He])=>{vt[st]=I_(He,Se({},Ee,{theme:Ze}))}),D(Ee,vt)}),x&&!G&&Ie.push(Ee=>{var Ze;const Qe=o_(Se({},Ee,{defaultTheme:i,themeId:t})),vt=Qe==null||(Ze=Qe.components)==null||(Ze=Ze[x])==null?void 0:Ze.variants;return I_({variants:vt},Se({},Ee,{theme:Qe}))}),j||Ie.push(h);const ke=Ie.length-be.length;if(Array.isArray(oe)&&ke>0){const Ee=new Array(ke).fill("");we=[...oe,...Ee],we.raw=[...oe.raw,...Ee]}const ae=ue(we,...Ie);return f.muiName&&(ae.muiName=f.muiName),ae};return ue.withConfig&&(de.withConfig=ue.withConfig),de}}const Iz=KE();function YE(e,t){const i=Se({},t);return Object.keys(e).forEach(a=>{if(a.toString().match(/^(components|slots)$/))i[a]=Se({},e[a],i[a]);else if(a.toString().match(/^(componentsProps|slotProps)$/)){const c=e[a]||{},h=t[a];i[a]={},!h||!Object.keys(h)?i[a]=c:!c||!Object.keys(c)?i[a]=h:(i[a]=Se({},h),Object.keys(c).forEach(f=>{i[a][f]=YE(c[f],h[f])}))}else i[a]===void 0&&(i[a]=e[a])}),i}function kz(e){const{theme:t,name:i,props:a}=e;return!t||!t.components||!t.components[i]||!t.components[i].defaultProps?a:YE(t.components[i].defaultProps,a)}function JE({props:e,name:t,defaultTheme:i,themeId:a}){let c=y2(i);return a&&(c=c[a]||c),kz({theme:c,name:t,props:e})}const bv=typeof window<"u"?Y.useLayoutEffect:Y.useEffect;function Az(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let i=e.match(t);return i&&i[0].length===1&&(i=i.map(a=>a+a)),i?`rgb${i.length===4?"a":""}(${i.map((a,c)=>c<3?parseInt(a,16):Math.round(parseInt(a,16)/255*1e3)/1e3).join(", ")})`:""}function QE(e){if(e.type)return e;if(e.charAt(0)==="#")return QE(Az(e));const t=e.indexOf("("),i=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(i)===-1)throw new Error(gv(9,e));let a=e.substring(t+1,e.length-1),c;if(i==="color"){if(a=a.split(" "),c=a.shift(),a.length===4&&a[3].charAt(0)==="/"&&(a[3]=a[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(c)===-1)throw new Error(gv(10,c))}else a=a.split(",");return a=a.map(h=>parseFloat(h)),{type:i,values:a,colorSpace:c}}const kp=e=>{const t=QE(e);return t.values.slice(0,3).map((i,a)=>t.type.indexOf("hsl")!==-1&&a!==0?`${i}%`:i).join(" ")};function Vv(e,t){var i,a;return Y.isValidElement(e)&&t.indexOf((i=e.type.muiName)!=null?i:(a=e.type)==null||(a=a._payload)==null||(a=a.value)==null?void 0:a.muiName)!==-1}function ev(e){return e&&e.ownerDocument||document}function Z_(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let ST=0;function Rz(e){const[t,i]=Y.useState(e),a=e||t;return Y.useEffect(()=>{t==null&&(ST+=1,i(`mui-${ST}`))},[t]),a}const CT=yv.useId;function _2(e){if(CT!==void 0){const t=CT();return e??t}return Rz(e)}function vb({controlled:e,default:t,name:i,state:a="value"}){const{current:c}=Y.useRef(e!==void 0),[h,f]=Y.useState(t),o=c?e:h,x=Y.useCallback(P=>{c||f(P)},[]);return[o,x]}function Bp(e){const t=Y.useRef(e);return bv(()=>{t.current=e}),Y.useRef((...i)=>(0,t.current)(...i)).current}function Ra(...e){return Y.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(i=>{Z_(i,t)})},e)}const TT={};function Dz(e,t){const i=Y.useRef(TT);return i.current===TT&&(i.current=e(t)),i}const zz=[];function Oz(e){Y.useEffect(e,zz)}let eI=class tI{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new tI}start(t,i){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,i()},t)}};function Lz(){const e=Dz(eI.create).current;return Oz(e.disposeEffect),e}let Bx=!0,xw=!1;const Fz=new eI,Bz={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function $z(e){const{type:t,tagName:i}=e;return!!(i==="INPUT"&&Bz[t]&&!e.readOnly||i==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function jz(e){e.metaKey||e.altKey||e.ctrlKey||(Bx=!0)}function _b(){Bx=!1}function Nz(){this.visibilityState==="hidden"&&xw&&(Bx=!0)}function Vz(e){e.addEventListener("keydown",jz,!0),e.addEventListener("mousedown",_b,!0),e.addEventListener("pointerdown",_b,!0),e.addEventListener("touchstart",_b,!0),e.addEventListener("visibilitychange",Nz,!0)}function Uz(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return Bx||$z(t)}function rI(){const e=Y.useCallback(c=>{c!=null&&Vz(c.ownerDocument)},[]),t=Y.useRef(!1);function i(){return t.current?(xw=!0,Fz.start(100,()=>{xw=!1}),t.current=!1,!0):!1}function a(c){return Uz(c)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:a,onBlur:i,ref:e}}const Gz=e=>{const t=Y.useRef({});return Y.useEffect(()=>{t.current=e}),t.current};function ui(e,t,i=void 0){const a={};return Object.keys(e).forEach(c=>{a[c]=e[c].reduce((h,f)=>{if(f){const o=t(f);o!==""&&h.push(o),i&&i[f]&&h.push(i[f])}return h},[]).join(" ")}),a}function qz(e){return typeof e=="string"}function nI(e,t,i){return e===void 0||qz(e)?t:Se({},t,{ownerState:Se({},t.ownerState,i)})}function Sf(e,t=[]){if(e===void 0)return{};const i={};return Object.keys(e).filter(a=>a.match(/^on[A-Z]/)&&typeof e[a]=="function"&&!t.includes(a)).forEach(a=>{i[a]=e[a]}),i}function MT(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(i=>!(i.match(/^on[A-Z]/)&&typeof e[i]=="function")).forEach(i=>{t[i]=e[i]}),t}function iI(e){const{getSlotProps:t,additionalProps:i,externalSlotProps:a,externalForwardedProps:c,className:h}=e;if(!t){const $=ci(i?.className,h,c?.className,a?.className),G=Se({},i?.style,c?.style,a?.style),j=Se({},i,c,a);return $.length>0&&(j.className=$),Object.keys(G).length>0&&(j.style=G),{props:j,internalRef:void 0}}const f=Sf(Se({},c,a)),o=MT(a),x=MT(c),P=t(f),I=ci(P?.className,i?.className,h,c?.className,a?.className),R=Se({},P?.style,i?.style,c?.style,a?.style),D=Se({},P,i,x,o);return I.length>0&&(D.className=I),Object.keys(R).length>0&&(D.style=R),{props:D,internalRef:P.ref}}function oI(e,t,i){return typeof e=="function"?e(t,i):e}const Hz=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function Wz(e){var t;const{elementType:i,externalSlotProps:a,ownerState:c,skipResolvingSlotProps:h=!1}=e,f=Er(e,Hz),o=h?{}:oI(a,c),{props:x,internalRef:P}=iI(Se({},f,{externalSlotProps:o})),I=Ra(P,o?.ref,(t=e.additionalProps)==null?void 0:t.ref);return nI(i,Se({},x,{ref:I}),c)}function sI(e){if(parseInt(Y.version,10)>=19){var t;return(e==null||(t=e.props)==null?void 0:t.ref)||null}return e?.ref||null}const aI=Y.createContext(null);function x2(){return Y.useContext(aI)}const Zz=typeof Symbol=="function"&&Symbol.for,Xz=Zz?Symbol.for("mui.nested"):"__THEME_NESTED__";function Kz(e,t){return typeof t=="function"?t(e):Se({},e,t)}function Yz(e){const{children:t,theme:i}=e,a=x2(),c=Y.useMemo(()=>{const h=a===null?i:Kz(a,i);return h!=null&&(h[Xz]=a!==null),h},[i,a]);return q.jsx(aI.Provider,{value:c,children:t})}const Jz=["value"],Qz=Y.createContext();function eO(e){let{value:t}=e,i=Er(e,Jz);return q.jsx(Qz.Provider,Se({value:t??!0},i))}const tO=Y.createContext(void 0);function rO({value:e,children:t}){return q.jsx(tO.Provider,{value:e,children:t})}const PT={};function ET(e,t,i,a=!1){return Y.useMemo(()=>{const c=e&&t[e]||t;if(typeof i=="function"){const h=i(c),f=e?Se({},t,{[e]:h}):h;return a?()=>f:f}return e?Se({},t,{[e]:i}):Se({},t,i)},[e,t,i,a])}function nO(e){const{children:t,theme:i,themeId:a}=e,c=qE(PT),h=x2()||PT,f=ET(a,c,i),o=ET(a,h,i,!0),x=f.direction==="rtl";return q.jsx(Yz,{theme:o,children:q.jsx(tm.Provider,{value:f,children:q.jsx(eO,{value:x,children:q.jsx(rO,{value:f?.components,children:t})})})})}const b2="mode",w2="color-scheme",lI="data-color-scheme";function iO(e){const{defaultMode:t="light",defaultLightColorScheme:i="light",defaultDarkColorScheme:a="dark",modeStorageKey:c=b2,colorSchemeStorageKey:h=w2,attribute:f=lI,colorSchemeNode:o="document.documentElement",nonce:x}=e||{};return q.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?x:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  var mode = localStorage.getItem('${c}') || '${t}';
  var colorScheme = '';
  if (mode === 'system') {
    // handle system mode
    var mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = localStorage.getItem('${h}-dark') || '${a}';
    } else {
      colorScheme = localStorage.getItem('${h}-light') || '${i}';
    }
  }
  if (mode === 'light') {
    colorScheme = localStorage.getItem('${h}-light') || '${i}';
  }
  if (mode === 'dark') {
    colorScheme = localStorage.getItem('${h}-dark') || '${a}';
  }
  if (colorScheme) {
    ${o}.setAttribute('${f}', colorScheme);
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function IT(e){if(typeof window<"u"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function cI(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function oO(e){return cI(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function xb(e,t){if(typeof window>"u")return;let i;try{i=localStorage.getItem(e)||void 0,i||localStorage.setItem(e,t)}catch{}return i||t}function sO(e){const{defaultMode:t="light",defaultLightColorScheme:i,defaultDarkColorScheme:a,supportedColorSchemes:c=[],modeStorageKey:h=b2,colorSchemeStorageKey:f=w2,storageWindow:o=typeof window>"u"?void 0:window}=e,x=c.join(","),[P,I]=Y.useState(()=>{const V=xb(h,t),se=xb(`${f}-light`,i),ue=xb(`${f}-dark`,a);return{mode:V,systemMode:IT(V),lightColorScheme:se,darkColorScheme:ue}}),R=oO(P),D=Y.useCallback(V=>{I(se=>{if(V===se.mode)return se;const ue=V??t;try{localStorage.setItem(h,ue)}catch{}return Se({},se,{mode:ue,systemMode:IT(ue)})})},[h,t]),$=Y.useCallback(V=>{V?typeof V=="string"?V&&!x.includes(V)?console.error(`\`${V}\` does not exist in \`theme.colorSchemes\`.`):I(se=>{const ue=Se({},se);return cI(se,Q=>{try{localStorage.setItem(`${f}-${Q}`,V)}catch{}Q==="light"&&(ue.lightColorScheme=V),Q==="dark"&&(ue.darkColorScheme=V)}),ue}):I(se=>{const ue=Se({},se),Q=V.light===null?i:V.light,de=V.dark===null?a:V.dark;if(Q)if(!x.includes(Q))console.error(`\`${Q}\` does not exist in \`theme.colorSchemes\`.`);else{ue.lightColorScheme=Q;try{localStorage.setItem(`${f}-light`,Q)}catch{}}if(de)if(!x.includes(de))console.error(`\`${de}\` does not exist in \`theme.colorSchemes\`.`);else{ue.darkColorScheme=de;try{localStorage.setItem(`${f}-dark`,de)}catch{}}return ue}):I(se=>{try{localStorage.setItem(`${f}-light`,i),localStorage.setItem(`${f}-dark`,a)}catch{}return Se({},se,{lightColorScheme:i,darkColorScheme:a})})},[x,f,i,a]),G=Y.useCallback(V=>{P.mode==="system"&&I(se=>{const ue=V!=null&&V.matches?"dark":"light";return se.systemMode===ue?se:Se({},se,{systemMode:ue})})},[P.mode]),j=Y.useRef(G);return j.current=G,Y.useEffect(()=>{const V=(...ue)=>j.current(...ue),se=window.matchMedia("(prefers-color-scheme: dark)");return se.addListener(V),V(se),()=>{se.removeListener(V)}},[]),Y.useEffect(()=>{if(o){const V=se=>{const ue=se.newValue;typeof se.key=="string"&&se.key.startsWith(f)&&(!ue||x.match(ue))&&(se.key.endsWith("light")&&$({light:ue}),se.key.endsWith("dark")&&$({dark:ue})),se.key===h&&(!ue||["light","dark","system"].includes(ue))&&D(ue||t)};return o.addEventListener("storage",V),()=>{o.removeEventListener("storage",V)}}},[$,D,h,f,x,t,o]),Se({},P,{colorScheme:R,setMode:D,setColorScheme:$})}const aO=["colorSchemes","components","generateCssVars","cssVarPrefix"],lO="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function cO(e){const{themeId:t,theme:i={},attribute:a=lI,modeStorageKey:c=b2,colorSchemeStorageKey:h=w2,defaultMode:f="light",defaultColorScheme:o,disableTransitionOnChange:x=!1,resolveTheme:P,excludeVariablesFromRoot:I}=e;(!i.colorSchemes||typeof o=="string"&&!i.colorSchemes[o]||typeof o=="object"&&!i.colorSchemes[o?.light]||typeof o=="object"&&!i.colorSchemes[o?.dark])&&console.error(`MUI: \`${o}\` does not exist in \`theme.colorSchemes\`.`);const R=Y.createContext(void 0),D=()=>{const se=Y.useContext(R);if(!se)throw new Error(gv(19));return se};function $(se){const{children:ue,theme:Q=i,modeStorageKey:de=c,colorSchemeStorageKey:oe=h,attribute:be=a,defaultMode:we=f,defaultColorScheme:Ie=o,disableTransitionOnChange:ke=x,storageWindow:ae=typeof window>"u"?void 0:window,documentNode:Ee=typeof document>"u"?void 0:document,colorSchemeNode:Ze=typeof document>"u"?void 0:document.documentElement,colorSchemeSelector:Qe=":root",disableNestedContext:vt=!1,disableStyleSheetGeneration:st=!1}=se,He=Y.useRef(!1),rt=x2(),Ge=Y.useContext(R),Ve=!!Ge&&!vt,ut=Q[t],ve=ut||Q,{colorSchemes:Fe={},components:pt={},generateCssVars:Tt=()=>({vars:{},css:{}}),cssVarPrefix:Ct}=ve,_t=Er(ve,aO),bt=Object.keys(Fe),nt=typeof Ie=="string"?Ie:Ie.light,kt=typeof Ie=="string"?Ie:Ie.dark,{mode:At,setMode:dr,systemMode:ir,lightColorScheme:Gr,darkColorScheme:Tr,colorScheme:or,setColorScheme:qt}=sO({supportedColorSchemes:bt,defaultLightColorScheme:nt,defaultDarkColorScheme:kt,modeStorageKey:de,colorSchemeStorageKey:oe,defaultMode:we,storageWindow:ae});let pr=At,Xt=or;Ve&&(pr=Ge.mode,Xt=Ge.colorScheme);const Ir=pr||(we==="system"?f:we),Rr=Xt||(Ir==="dark"?kt:nt),{css:Br,vars:Wr}=Tt(),sn=Se({},_t,{components:pt,colorSchemes:Fe,cssVarPrefix:Ct,vars:Wr,getColorSchemeSelector:ur=>`[${be}="${ur}"] &`}),On={},Tn={};Object.entries(Fe).forEach(([ur,Zr])=>{const{css:Ne,vars:ee}=Tt(ur);sn.vars=fl(sn.vars,ee),ur===Rr&&(Object.keys(Zr).forEach(ce=>{Zr[ce]&&typeof Zr[ce]=="object"?sn[ce]=Se({},sn[ce],Zr[ce]):sn[ce]=Zr[ce]}),sn.palette&&(sn.palette.colorScheme=ur));const ie=typeof Ie=="string"?Ie:we==="dark"?Ie.dark:Ie.light;if(ur===ie){if(I){const ce={};I(Ct).forEach(Ce=>{ce[Ce]=Ne[Ce],delete Ne[Ce]}),On[`[${be}="${ur}"]`]=ce}On[`${Qe}, [${be}="${ur}"]`]=Ne}else Tn[`${Qe===":root"?"":Qe}[${be}="${ur}"]`]=Ne}),sn.vars=fl(sn.vars,Wr),Y.useEffect(()=>{Xt&&Ze&&Ze.setAttribute(be,Xt)},[Xt,be,Ze]),Y.useEffect(()=>{let ur;if(ke&&He.current&&Ee){const Zr=Ee.createElement("style");Zr.appendChild(Ee.createTextNode(lO)),Ee.head.appendChild(Zr),window.getComputedStyle(Ee.body),ur=setTimeout(()=>{Ee.head.removeChild(Zr)},1)}return()=>{clearTimeout(ur)}},[Xt,ke,Ee]),Y.useEffect(()=>(He.current=!0,()=>{He.current=!1}),[]);const vn=Y.useMemo(()=>({allColorSchemes:bt,colorScheme:Xt,darkColorScheme:Tr,lightColorScheme:Gr,mode:pr,setColorScheme:qt,setMode:dr,systemMode:ir}),[bt,Xt,Tr,Gr,pr,qt,dr,ir]);let Sr=!0;(st||Ve&&rt?.cssVarPrefix===Ct)&&(Sr=!1);const Dr=q.jsxs(Y.Fragment,{children:[Sr&&q.jsxs(Y.Fragment,{children:[q.jsx(E_,{styles:{[Qe]:Br}}),q.jsx(E_,{styles:On}),q.jsx(E_,{styles:Tn})]}),q.jsx(nO,{themeId:ut?t:void 0,theme:P?P(sn):sn,children:ue})]});return Ve?Dr:q.jsx(R.Provider,{value:vn,children:Dr})}const G=typeof o=="string"?o:o.light,j=typeof o=="string"?o:o.dark;return{CssVarsProvider:$,useColorScheme:D,getInitColorSchemeScript:se=>iO(Se({attribute:a,colorSchemeStorageKey:h,defaultMode:f,defaultLightColorScheme:G,defaultDarkColorScheme:j,modeStorageKey:c},se))}}function S2(e=""){function t(...a){if(!a.length)return"";const c=a[0];return typeof c=="string"&&!c.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${c}${t(...a.slice(1))})`:`, ${c}`}return(a,...c)=>`var(--${e?`${e}-`:""}${a}${t(...c)})`}const kT=(e,t,i,a=[])=>{let c=e;t.forEach((h,f)=>{f===t.length-1?Array.isArray(c)?c[Number(h)]=i:c&&typeof c=="object"&&(c[h]=i):c&&typeof c=="object"&&(c[h]||(c[h]=a.includes(h)?[]:{}),c=c[h])})},uO=(e,t,i)=>{function a(c,h=[],f=[]){Object.entries(c).forEach(([o,x])=>{(!i||i&&!i([...h,o]))&&x!=null&&(typeof x=="object"&&Object.keys(x).length>0?a(x,[...h,o],Array.isArray(x)?[...f,o]:f):t([...h,o],x,f))})}a(e)},hO=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(a=>e.includes(a))||e[e.length-1].toLowerCase().indexOf("opacity")>=0?t:`${t}px`:t;function bb(e,t){const{prefix:i,shouldSkipGeneratingVar:a}=t||{},c={},h={},f={};return uO(e,(o,x,P)=>{if((typeof x=="string"||typeof x=="number")&&(!a||!a(o,x))){const I=`--${i?`${i}-`:""}${o.join("-")}`;Object.assign(c,{[I]:hO(o,x)}),kT(h,o,`var(${I})`,P),kT(f,o,`var(${I}, ${x})`,P)}},o=>o[0]==="vars"),{css:c,vars:h,varsWithDefaults:f}}function wv(e){"@babel/helpers - typeof";return wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wv(e)}function dO(e,t){if(wv(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(wv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function fO(e){var t=dO(e,"string");return wv(t)=="symbol"?t:t+""}const pO=["colorSchemes","components","defaultColorScheme"];function mO(e,t){const{colorSchemes:i={},defaultColorScheme:a="light"}=e,c=Er(e,pO),{vars:h,css:f,varsWithDefaults:o}=bb(c,t);let x=o;const P={},{[a]:I}=i,R=Er(i,[a].map(fO));if(Object.entries(R||{}).forEach(([$,G])=>{const{vars:j,css:V,varsWithDefaults:se}=bb(G,t);x=fl(x,se),P[$]={css:V,vars:j}}),I){const{css:$,vars:G,varsWithDefaults:j}=bb(I,t);x=fl(x,j),P[a]={css:$,vars:G}}return{vars:x,generateCssVars:$=>{var G;if(!$){var j;const se=Se({},f);return{css:se,vars:h,selector:(t==null||(j=t.getSelector)==null?void 0:j.call(t,$,se))||":root"}}const V=Se({},P[$].css);return{css:V,vars:P[$].vars,selector:(t==null||(G=t.getSelector)==null?void 0:G.call(t,$,V))||":root"}}}}const gO=(e,t)=>e.filter(i=>t.includes(i)),yO=(e,t,i)=>{const a=e.keys[0];Array.isArray(t)?t.forEach((c,h)=>{i((f,o)=>{h<=e.keys.length-1&&(h===0?Object.assign(f,o):f[e.up(e.keys[h])]=o)},c)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:gO(e.keys,Object.keys(t))).forEach(h=>{if(e.keys.indexOf(h)!==-1){const f=t[h];f!==void 0&&i((o,x)=>{a===h?Object.assign(o,x):o[e.up(h)]=x},f)}}):(typeof t=="number"||typeof t=="string")&&i((c,h)=>{Object.assign(c,h)},t)},vO=["component","direction","spacing","divider","children","className","useFlexGap"],_O=g2(),xO=Iz("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function bO(e){return JE({props:e,name:"MuiStack",defaultTheme:_O})}function wO(e,t){const i=Y.Children.toArray(e).filter(Boolean);return i.reduce((a,c,h)=>(a.push(c),h<i.length-1&&a.push(Y.cloneElement(t,{key:`separator-${h}`})),a),[])}const SO=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],CO=({ownerState:e,theme:t})=>{let i=Se({display:"flex",flexDirection:"column"},ru({theme:t},gb({values:e.direction,breakpoints:t.breakpoints.values}),a=>({flexDirection:a})));if(e.spacing){const a=p2(t),c=Object.keys(t.breakpoints.values).reduce((x,P)=>((typeof e.spacing=="object"&&e.spacing[P]!=null||typeof e.direction=="object"&&e.direction[P]!=null)&&(x[P]=!0),x),{}),h=gb({values:e.direction,base:c}),f=gb({values:e.spacing,base:c});typeof h=="object"&&Object.keys(h).forEach((x,P,I)=>{if(!h[x]){const D=P>0?h[I[P-1]]:"column";h[x]=D}}),i=fl(i,ru({theme:t},f,(x,P)=>e.useFlexGap?{gap:qp(a,x)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${SO(P?h[P]:e.direction)}`]:qp(a,x)}}))}return i=T3(t.breakpoints,i),i};function TO(e={}){const{createStyledComponent:t=xO,useThemeProps:i=bO,componentName:a="MuiStack"}=e,c=()=>ui({root:["root"]},x=>v2(a,x),{}),h=t(CO);return Y.forwardRef(function(x,P){const I=i(x),R=Fx(I),{component:D="div",direction:$="column",spacing:G=0,divider:j,children:V,className:se,useFlexGap:ue=!1}=R,Q=Er(R,vO),de={direction:$,spacing:G,useFlexGap:ue},oe=c();return q.jsx(h,Se({as:D,ownerState:de,ref:P,className:ci(oe.root,se)},Q,{children:j?wO(V,j):V}))})}const MO=Se({},Lx,{borderRadius:{themeKey:"radius"},boxShadow:{themeKey:"shadow"},fontFamily:{themeKey:"fontFamily"},fontSize:{themeKey:"fontSize"},fontWeight:{themeKey:"fontWeight"},letterSpacing:{themeKey:"letterSpacing"},lineHeight:{themeKey:"lineHeight"}});function PO(e){var t;return!!e[0].match(/^(typography|variants|breakpoints)$/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/^(mode)$/))||e[0]==="focus"&&e[1]!=="thickness"}const _i=(e,t)=>v2(e,t,"Mui"),xi=(e,t)=>XE(e,t,"Mui"),EO=e=>e&&typeof e=="object"&&Object.keys(e).some(t=>{var i;return(i=t.match)==null?void 0:i.call(t,/^(plain(Hover|Active|Disabled)?(Color|Bg)|outlined(Hover|Active|Disabled)?(Color|Border|Bg)|soft(Hover|Active|Disabled)?(Color|Bg)|solid(Hover|Active|Disabled)?(Color|Bg))$/)}),AT=(e,t,i)=>{t.includes("Color")&&(e.color=i),t.includes("Bg")&&(e.backgroundColor=i),t.includes("Border")&&(e.borderColor=i)},RT=(e,t,i)=>{const a={};return Object.entries(t||{}).forEach(([c,h])=>{if(c.match(new RegExp(`${e}(color|bg|border)`,"i"))&&h){const f=i?i(c):h;c.includes("Disabled")&&(a.pointerEvents="none",a.cursor="default",a["--Icon-color"]="currentColor"),c.match(/(Hover|Active|Disabled)/)||(a["--variant-borderWidth"]||(a["--variant-borderWidth"]="0px"),c.includes("Border")&&(a["--variant-borderWidth"]="1px",a.border="var(--variant-borderWidth) solid")),AT(a,c,f)}}),a},As=(e,t)=>{let i={};if(t){const{getCssVar:a,palette:c}=t;Object.entries(c).forEach(h=>{const[f,o]=h;EO(o)&&typeof o=="object"&&(i=Se({},i,{[f]:RT(e,o,x=>`var(--variant-${x}, ${a(`palette-${f}-${x}`,c[f][x])})`)}))})}return i.context=RT(e,{plainColor:"var(--variant-plainColor)",plainHoverColor:"var(--variant-plainHoverColor)",plainHoverBg:"var(--variant-plainHoverBg)",plainActiveBg:"var(--variant-plainActiveBg)",plainDisabledColor:"var(--variant-plainDisabledColor)",outlinedColor:"var(--variant-outlinedColor)",outlinedBorder:"var(--variant-outlinedBorder)",outlinedHoverColor:"var(--variant-outlinedHoverColor)",outlinedHoverBorder:"var(--variant-outlinedHoverBorder)",outlinedHoverBg:"var(--variant-outlinedHoverBg)",outlinedActiveBg:"var(--variant-outlinedActiveBg)",outlinedDisabledColor:"var(--variant-outlinedDisabledColor)",outlinedDisabledBorder:"var(--variant-outlinedDisabledBorder)",softColor:"var(--variant-softColor)",softBg:"var(--variant-softBg)",softHoverColor:"var(--variant-softHoverColor)",softHoverBg:"var(--variant-softHoverBg)",softActiveBg:"var(--variant-softActiveBg)",softDisabledColor:"var(--variant-softDisabledColor)",softDisabledBg:"var(--variant-softDisabledBg)",solidColor:"var(--variant-solidColor)",solidBg:"var(--variant-solidBg)",solidHoverBg:"var(--variant-solidHoverBg)",solidActiveBg:"var(--variant-solidActiveBg)",solidDisabledColor:"var(--variant-solidDisabledColor)",solidDisabledBg:"var(--variant-solidDisabledBg)"}),i},IO=["cssVarPrefix","breakpoints","spacing","components","variants","shouldSkipGeneratingVar"],kO=["colorSchemes"],AO=(e="joy")=>S2(e);function RO(e){var t,i,a,c,h,f,o,x,P,I;const R={},{cssVarPrefix:D="joy",breakpoints:$,spacing:G,components:j,variants:V,shouldSkipGeneratingVar:se=PO}=R,ue=Er(R,IO),Q=AO(D),de={primary:Fy.blue,neutral:Fy.grey,danger:Fy.red,success:Fy.green,warning:Fy.yellow,common:{white:"#FFF",black:"#000"}},oe=nt=>{var kt;const At=nt.split("-"),dr=At[1],ir=At[2];return Q(nt,(kt=de[dr])==null?void 0:kt[ir])},be=nt=>({plainColor:oe(`palette-${nt}-500`),plainHoverBg:oe(`palette-${nt}-100`),plainActiveBg:oe(`palette-${nt}-200`),plainDisabledColor:oe("palette-neutral-400"),outlinedColor:oe(`palette-${nt}-500`),outlinedBorder:oe(`palette-${nt}-300`),outlinedHoverBg:oe(`palette-${nt}-100`),outlinedActiveBg:oe(`palette-${nt}-200`),outlinedDisabledColor:oe("palette-neutral-400"),outlinedDisabledBorder:oe("palette-neutral-200"),softColor:oe(`palette-${nt}-700`),softBg:oe(`palette-${nt}-100`),softHoverBg:oe(`palette-${nt}-200`),softActiveColor:oe(`palette-${nt}-800`),softActiveBg:oe(`palette-${nt}-300`),softDisabledColor:oe("palette-neutral-400"),softDisabledBg:oe("palette-neutral-50"),solidColor:oe("palette-common-white"),solidBg:oe(`palette-${nt}-500`),solidHoverBg:oe(`palette-${nt}-600`),solidActiveBg:oe(`palette-${nt}-700`),solidDisabledColor:oe("palette-neutral-400"),solidDisabledBg:oe("palette-neutral-100")}),we=nt=>({plainColor:oe(`palette-${nt}-300`),plainHoverBg:oe(`palette-${nt}-800`),plainActiveBg:oe(`palette-${nt}-700`),plainDisabledColor:oe("palette-neutral-500"),outlinedColor:oe(`palette-${nt}-200`),outlinedBorder:oe(`palette-${nt}-700`),outlinedHoverBg:oe(`palette-${nt}-800`),outlinedActiveBg:oe(`palette-${nt}-700`),outlinedDisabledColor:oe("palette-neutral-500"),outlinedDisabledBorder:oe("palette-neutral-800"),softColor:oe(`palette-${nt}-200`),softBg:oe(`palette-${nt}-800`),softHoverBg:oe(`palette-${nt}-700`),softActiveColor:oe(`palette-${nt}-100`),softActiveBg:oe(`palette-${nt}-600`),softDisabledColor:oe("palette-neutral-500"),softDisabledBg:oe("palette-neutral-800"),solidColor:oe("palette-common-white"),solidBg:oe(`palette-${nt}-500`),solidHoverBg:oe(`palette-${nt}-600`),solidActiveBg:oe(`palette-${nt}-700`),solidDisabledColor:oe("palette-neutral-500"),solidDisabledBg:oe("palette-neutral-800")}),Ie={palette:{mode:"light",primary:Se({},de.primary,be("primary")),neutral:Se({},de.neutral,be("neutral"),{plainColor:oe("palette-neutral-700"),plainHoverColor:oe("palette-neutral-900"),outlinedColor:oe("palette-neutral-700")}),danger:Se({},de.danger,be("danger")),success:Se({},de.success,be("success")),warning:Se({},de.warning,be("warning")),common:{white:"#FFF",black:"#000"},text:{primary:oe("palette-neutral-800"),secondary:oe("palette-neutral-700"),tertiary:oe("palette-neutral-600"),icon:oe("palette-neutral-500")},background:{body:oe("palette-common-white"),surface:oe("palette-neutral-50"),popup:oe("palette-common-white"),level1:oe("palette-neutral-100"),level2:oe("palette-neutral-200"),level3:oe("palette-neutral-300"),tooltip:oe("palette-neutral-500"),backdrop:`rgba(${Q("palette-neutral-darkChannel",kp(de.neutral[900]))} / 0.25)`},divider:`rgba(${Q("palette-neutral-mainChannel",kp(de.neutral[500]))} / 0.2)`,focusVisible:oe("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"21 21 21",shadowOpacity:"0.08"},ke={palette:{mode:"dark",primary:Se({},de.primary,we("primary")),neutral:Se({},de.neutral,we("neutral"),{plainColor:oe("palette-neutral-300"),plainHoverColor:oe("palette-neutral-300")}),danger:Se({},de.danger,we("danger")),success:Se({},de.success,we("success")),warning:Se({},de.warning,we("warning")),common:{white:"#FFF",black:"#000"},text:{primary:oe("palette-neutral-100"),secondary:oe("palette-neutral-300"),tertiary:oe("palette-neutral-400"),icon:oe("palette-neutral-400")},background:{body:oe("palette-common-black"),surface:oe("palette-neutral-900"),popup:oe("palette-common-black"),level1:oe("palette-neutral-800"),level2:oe("palette-neutral-700"),level3:oe("palette-neutral-600"),tooltip:oe("palette-neutral-600"),backdrop:`rgba(${Q("palette-neutral-darkChannel",kp(de.neutral[50]))} / 0.25)`},divider:`rgba(${Q("palette-neutral-mainChannel",kp(de.neutral[500]))} / 0.16)`,focusVisible:oe("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"0 0 0",shadowOpacity:"0.6"},ae='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',Ee=Se({body:`"Inter", ${Q(`fontFamily-fallback, ${ae}`)}`,display:`"Inter", ${Q(`fontFamily-fallback, ${ae}`)}`,code:"Source Code Pro,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace",fallback:ae},ue.fontFamily),Ze=Se({sm:300,md:500,lg:600,xl:700},ue.fontWeight),Qe=Se({xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem",xl2:"1.5rem",xl3:"1.875rem",xl4:"2.25rem"},ue.fontSize),vt=Se({xs:"1.33334",sm:"1.42858",md:"1.5",lg:"1.55556",xl:"1.66667"},ue.lineHeight),st=(t=(i=ue.colorSchemes)==null||(i=i.light)==null?void 0:i.shadowRing)!=null?t:Ie.shadowRing,He=(a=(c=ue.colorSchemes)==null||(c=c.light)==null?void 0:c.shadowChannel)!=null?a:Ie.shadowChannel,rt=(h=(f=ue.colorSchemes)==null||(f=f.light)==null?void 0:f.shadowOpacity)!=null?h:Ie.shadowOpacity,Ge={colorSchemes:{light:Ie,dark:ke},fontSize:Qe,fontFamily:Ee,fontWeight:Ze,focus:{thickness:"2px",selector:`&.${_i("","focusVisible")}, &:focus-visible`,default:{outlineOffset:`var(--focus-outline-offset, ${Q("focus-thickness",(o=(x=ue.focus)==null?void 0:x.thickness)!=null?o:"2px")})`,outline:`${Q("focus-thickness",(P=(I=ue.focus)==null?void 0:I.thickness)!=null?P:"2px")} solid ${Q("palette-focusVisible",de.primary[500])}`}},lineHeight:vt,radius:{xs:"2px",sm:"6px",md:"8px",lg:"12px",xl:"16px"},shadow:{xs:`${Q("shadowRing",st)}, 0px 1px 2px 0px rgba(${Q("shadowChannel",He)} / ${Q("shadowOpacity",rt)})`,sm:`${Q("shadowRing",st)}, 0px 1px 2px 0px rgba(${Q("shadowChannel",He)} / ${Q("shadowOpacity",rt)}), 0px 2px 4px 0px rgba(${Q("shadowChannel",He)} / ${Q("shadowOpacity",rt)})`,md:`${Q("shadowRing",st)}, 0px 2px 8px -2px rgba(${Q("shadowChannel",He)} / ${Q("shadowOpacity",rt)}), 0px 6px 12px -2px rgba(${Q("shadowChannel",He)} / ${Q("shadowOpacity",rt)})`,lg:`${Q("shadowRing",st)}, 0px 2px 8px -2px rgba(${Q("shadowChannel",He)} / ${Q("shadowOpacity",rt)}), 0px 12px 16px -4px rgba(${Q("shadowChannel",He)} / ${Q("shadowOpacity",rt)})`,xl:`${Q("shadowRing",st)}, 0px 2px 8px -2px rgba(${Q("shadowChannel",He)} / ${Q("shadowOpacity",rt)}), 0px 20px 24px -4px rgba(${Q("shadowChannel",He)} / ${Q("shadowOpacity",rt)})`},zIndex:{badge:1,table:10,popup:1e3,modal:1300,snackbar:1400,tooltip:1500},typography:{h1:{fontFamily:Q(`fontFamily-display, ${Ee.display}`),fontWeight:Q(`fontWeight-xl, ${Ze.xl}`),fontSize:Q(`fontSize-xl4, ${Qe.xl4}`),lineHeight:Q(`lineHeight-xs, ${vt.xs}`),letterSpacing:"-0.025em",color:Q(`palette-text-primary, ${Ie.palette.text.primary}`)},h2:{fontFamily:Q(`fontFamily-display, ${Ee.display}`),fontWeight:Q(`fontWeight-xl, ${Ze.xl}`),fontSize:Q(`fontSize-xl3, ${Qe.xl3}`),lineHeight:Q(`lineHeight-xs, ${vt.xs}`),letterSpacing:"-0.025em",color:Q(`palette-text-primary, ${Ie.palette.text.primary}`)},h3:{fontFamily:Q(`fontFamily-display, ${Ee.display}`),fontWeight:Q(`fontWeight-lg, ${Ze.lg}`),fontSize:Q(`fontSize-xl2, ${Qe.xl2}`),lineHeight:Q(`lineHeight-xs, ${vt.xs}`),letterSpacing:"-0.025em",color:Q(`palette-text-primary, ${Ie.palette.text.primary}`)},h4:{fontFamily:Q(`fontFamily-display, ${Ee.display}`),fontWeight:Q(`fontWeight-lg, ${Ze.lg}`),fontSize:Q(`fontSize-xl, ${Qe.xl}`),lineHeight:Q(`lineHeight-md, ${vt.md}`),letterSpacing:"-0.025em",color:Q(`palette-text-primary, ${Ie.palette.text.primary}`)},"title-lg":{fontFamily:Q(`fontFamily-body, ${Ee.body}`),fontWeight:Q(`fontWeight-lg, ${Ze.lg}`),fontSize:Q(`fontSize-lg, ${Qe.lg}`),lineHeight:Q(`lineHeight-xs, ${vt.xs}`),color:Q(`palette-text-primary, ${Ie.palette.text.primary}`)},"title-md":{fontFamily:Q(`fontFamily-body, ${Ee.body}`),fontWeight:Q(`fontWeight-md, ${Ze.md}`),fontSize:Q(`fontSize-md, ${Qe.md}`),lineHeight:Q(`lineHeight-md, ${vt.md}`),color:Q(`palette-text-primary, ${Ie.palette.text.primary}`)},"title-sm":{fontFamily:Q(`fontFamily-body, ${Ee.body}`),fontWeight:Q(`fontWeight-md, ${Ze.md}`),fontSize:Q(`fontSize-sm, ${Qe.sm}`),lineHeight:Q(`lineHeight-sm, ${vt.sm}`),color:Q(`palette-text-primary, ${Ie.palette.text.primary}`)},"body-lg":{fontFamily:Q(`fontFamily-body, ${Ee.body}`),fontSize:Q(`fontSize-lg, ${Qe.lg}`),lineHeight:Q(`lineHeight-md, ${vt.md}`),color:Q(`palette-text-secondary, ${Ie.palette.text.secondary}`)},"body-md":{fontFamily:Q(`fontFamily-body, ${Ee.body}`),fontSize:Q(`fontSize-md, ${Qe.md}`),lineHeight:Q(`lineHeight-md, ${vt.md}`),color:Q(`palette-text-secondary, ${Ie.palette.text.secondary}`)},"body-sm":{fontFamily:Q(`fontFamily-body, ${Ee.body}`),fontSize:Q(`fontSize-sm, ${Qe.sm}`),lineHeight:Q(`lineHeight-md, ${vt.md}`),color:Q(`palette-text-tertiary, ${Ie.palette.text.tertiary}`)},"body-xs":{fontFamily:Q(`fontFamily-body, ${Ee.body}`),fontWeight:Q(`fontWeight-md, ${Ze.md}`),fontSize:Q(`fontSize-xs, ${Qe.xs}`),lineHeight:Q(`lineHeight-md, ${vt.md}`),color:Q(`palette-text-tertiary, ${Ie.palette.text.tertiary}`)}}},Ve=ue?fl(Ge,ue):Ge,{colorSchemes:ut}=Ve,ve=Er(Ve,kO),Fe=Se({colorSchemes:ut},ve,{breakpoints:$E($??{}),components:fl({MuiSvgIcon:{defaultProps:{fontSize:"xl2"},styleOverrides:{root:({ownerState:nt,theme:kt})=>{var At;const dr=nt.instanceFontSize;return Se({margin:"var(--Icon-margin)"},nt.fontSize&&nt.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${kt.vars.fontSize[nt.fontSize]})`},!nt.htmlColor&&Se({color:`var(--Icon-color, ${Fe.vars.palette.text.icon})`},nt.color&&nt.color!=="inherit"&&kt.vars.palette[nt.color]&&{color:`rgba(${(At=kt.vars.palette[nt.color])==null?void 0:At.mainChannel} / 1)`}),dr&&dr!=="inherit"&&{"--Icon-fontSize":kt.vars.fontSize[dr]})}}}},j),cssVarPrefix:D,getCssVar:Q,spacing:UE(G)});function pt(nt,kt){Object.keys(kt).forEach(At=>{const dr={main:"500",light:"200",dark:"700"};nt==="dark"&&(dr.main=400),!kt[At].mainChannel&&kt[At][dr.main]&&(kt[At].mainChannel=kp(kt[At][dr.main])),!kt[At].lightChannel&&kt[At][dr.light]&&(kt[At].lightChannel=kp(kt[At][dr.light])),!kt[At].darkChannel&&kt[At][dr.dark]&&(kt[At].darkChannel=kp(kt[At][dr.dark]))})}Object.entries(Fe.colorSchemes).forEach(([nt,kt])=>{pt(nt,kt.palette)});const Tt={prefix:D,shouldSkipGeneratingVar:se},{vars:Ct,generateCssVars:_t}=mO(Se({colorSchemes:ut},ve),Tt);Fe.vars=Ct,Fe.generateCssVars=_t,Fe.unstable_sxConfig=Se({},MO,void 0),Fe.unstable_sx=function(kt){return Nv({sx:kt,theme:this})},Fe.getColorSchemeSelector=nt=>nt==="light"?"&":`&[data-joy-color-scheme="${nt}"], [data-joy-color-scheme="${nt}"] &`;const bt={getCssVar:Q,palette:Fe.colorSchemes.light.palette};return Fe.variants=fl({plain:As("plain",bt),plainHover:As("plainHover",bt),plainActive:As("plainActive",bt),plainDisabled:As("plainDisabled",bt),outlined:As("outlined",bt),outlinedHover:As("outlinedHover",bt),outlinedActive:As("outlinedActive",bt),outlinedDisabled:As("outlinedDisabled",bt),soft:As("soft",bt),softHover:As("softHover",bt),softActive:As("softActive",bt),softDisabled:As("softDisabled",bt),solid:As("solid",bt),solidHover:As("solidHover",bt),solidActive:As("solidActive",bt),solidDisabled:As("solidDisabled",bt)},V),Fe.palette=Se({},Fe.colorSchemes.light.palette,{colorScheme:"light"}),Fe.shouldSkipGeneratingVar=se,Fe.applyStyles=GE,Fe}const Kg=RO(),$y={attribute:"data-joy-color-scheme",colorSchemeStorageKey:"joy-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"joy-mode"},{CssVarsProvider:DO,useColorScheme:zO}=cO({themeId:Fv,theme:Kg,attribute:$y.attribute,modeStorageKey:$y.modeStorageKey,colorSchemeStorageKey:$y.colorSchemeStorageKey,defaultColorScheme:{light:$y.defaultLightColorScheme,dark:$y.defaultDarkColorScheme}}),Qt=KE({defaultTheme:Kg,themeId:Fv});function bi({props:e,name:t}){return JE({props:e,name:t,defaultTheme:Se({},Kg,{components:{}}),themeId:Fv})}function OO(e){return q.jsx(mz,Se({},e,{defaultTheme:Kg,themeId:Fv}))}const LO={disableDefaultClasses:!1},FO=Y.createContext(LO);function BO(e){const{disableDefaultClasses:t}=Y.useContext(FO);return i=>t?"":e(i)}function $O(e){const{rootElementName:t=""}=e,[i,a]=Y.useState(t.toUpperCase()),c=Y.useCallback(h=>{var f;a((f=h?.tagName)!=null?f:"")},[]);return[i,c]}const uI="base";function jO(e){return`${uI}--${e}`}function NO(e,t){return`${uI}-${e}-${t}`}function VO(e,t){const i=ZE[t];return i?jO(i):NO(e,t)}function Uv(e={}){const{disabled:t=!1,focusableWhenDisabled:i,href:a,rootRef:c,tabIndex:h,to:f,type:o,rootElementName:x}=e,P=Y.useRef(null),[I,R]=Y.useState(!1),{isFocusVisibleRef:D,onFocus:$,onBlur:G,ref:j}=rI(),[V,se]=Y.useState(!1);t&&!i&&V&&se(!1),Y.useEffect(()=>{D.current=V},[V,D]);const[ue,Q]=$O({rootElementName:x??(a||f?"a":void 0)}),de=st=>He=>{var rt;V&&He.preventDefault(),(rt=st.onMouseLeave)==null||rt.call(st,He)},oe=st=>He=>{var rt;G(He),D.current===!1&&se(!1),(rt=st.onBlur)==null||rt.call(st,He)},be=st=>He=>{var rt;if(P.current||(P.current=He.currentTarget),$(He),D.current===!0){var Ge;se(!0),(Ge=st.onFocusVisible)==null||Ge.call(st,He)}(rt=st.onFocus)==null||rt.call(st,He)},we=()=>{const st=P.current;return ue==="BUTTON"||ue==="INPUT"&&["button","submit","reset"].includes(st?.type)||ue==="A"&&st?.href},Ie=st=>He=>{if(!t){var rt;(rt=st.onClick)==null||rt.call(st,He)}},ke=st=>He=>{var rt;t||(R(!0),document.addEventListener("mouseup",()=>{R(!1)},{once:!0})),(rt=st.onMouseDown)==null||rt.call(st,He)},ae=st=>He=>{var rt;if((rt=st.onKeyDown)==null||rt.call(st,He),!He.defaultMuiPrevented&&(He.target===He.currentTarget&&!we()&&He.key===" "&&He.preventDefault(),He.target===He.currentTarget&&He.key===" "&&!t&&R(!0),He.target===He.currentTarget&&!we()&&He.key==="Enter"&&!t)){var Ge;(Ge=st.onClick)==null||Ge.call(st,He),He.preventDefault()}},Ee=st=>He=>{var rt;if(He.target===He.currentTarget&&R(!1),(rt=st.onKeyUp)==null||rt.call(st,He),He.target===He.currentTarget&&!we()&&!t&&He.key===" "&&!He.defaultMuiPrevented){var Ge;(Ge=st.onClick)==null||Ge.call(st,He)}},Ze=Ra(Q,c,j,P),Qe={};return h!==void 0&&(Qe.tabIndex=h),ue==="BUTTON"?(Qe.type=o??"button",i?Qe["aria-disabled"]=t:Qe.disabled=t):ue==="INPUT"?o&&["button","submit","reset"].includes(o)&&(i?Qe["aria-disabled"]=t:Qe.disabled=t):ue!==""&&(!a&&!f&&(Qe.role="button",Qe.tabIndex=h??0),t&&(Qe["aria-disabled"]=t,Qe.tabIndex=i?h??0:-1)),{getRootProps:(st={})=>{const He=Se({},Sf(e),Sf(st)),rt=Se({type:o},He,Qe,st,{onBlur:oe(He),onClick:Ie(He),onFocus:be(He),onKeyDown:ae(He),onKeyUp:Ee(He),onMouseDown:ke(He),onMouseLeave:de(He),ref:Ze});return delete rt.onFocusVisible,rt},focusVisible:V,setFocusVisible:se,active:I,rootRef:Ze}}function DT(e){return e.substring(2).toLowerCase()}function UO(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function GO(e){const{children:t,disableReactTree:i=!1,mouseEvent:a="onClick",onClickAway:c,touchEvent:h="onTouchEnd"}=e,f=Y.useRef(!1),o=Y.useRef(null),x=Y.useRef(!1),P=Y.useRef(!1);Y.useEffect(()=>(setTimeout(()=>{x.current=!0},0),()=>{x.current=!1}),[]);const I=Ra(sI(t),o),R=Bp(G=>{const j=P.current;P.current=!1;const V=ev(o.current);if(!x.current||!o.current||"clientX"in G&&UO(G,V))return;if(f.current){f.current=!1;return}let se;G.composedPath?se=G.composedPath().indexOf(o.current)>-1:se=!V.documentElement.contains(G.target)||o.current.contains(G.target),!se&&(i||!j)&&c(G)}),D=G=>j=>{P.current=!0;const V=t.props[G];V&&V(j)},$={ref:I};return h!==!1&&($[h]=D(h)),Y.useEffect(()=>{if(h!==!1){const G=DT(h),j=ev(o.current),V=()=>{f.current=!0};return j.addEventListener(G,R),j.addEventListener("touchmove",V),()=>{j.removeEventListener(G,R),j.removeEventListener("touchmove",V)}}},[R,h]),a!==!1&&($[a]=D(a)),Y.useEffect(()=>{if(a!==!1){const G=DT(a),j=ev(o.current);return j.addEventListener(G,R),()=>{j.removeEventListener(G,R)}}},[R,a]),q.jsx(Y.Fragment,{children:Y.cloneElement(t,$)})}const qO=Y.createContext(void 0);function HO(){return Y.useContext(qO)}function WO(e={}){const{defaultValue:t,disabled:i=!1,error:a=!1,onBlur:c,onChange:h,onFocus:f,required:o=!1,value:x,inputRef:P}=e,I=HO();let R,D,$,G,j;if(I){var V,se,ue;R=void 0,D=(V=I.disabled)!=null?V:!1,$=(se=I.error)!=null?se:!1,G=(ue=I.required)!=null?ue:!1,j=I.value}else R=t,D=i,$=a,G=o,j=x;const{current:Q}=Y.useRef(j!=null),de=Y.useCallback(st=>{},[]),oe=Y.useRef(null),be=Ra(oe,P,de),[we,Ie]=Y.useState(!1);Y.useEffect(()=>{!I&&D&&we&&(Ie(!1),c?.())},[I,D,we,c]);const ke=st=>He=>{var rt;if(I!=null&&I.disabled){He.stopPropagation();return}if((rt=st.onFocus)==null||rt.call(st,He),I&&I.onFocus){var Ge;I==null||(Ge=I.onFocus)==null||Ge.call(I)}else Ie(!0)},ae=st=>He=>{var rt;(rt=st.onBlur)==null||rt.call(st,He),I&&I.onBlur?I.onBlur():Ie(!1)},Ee=st=>(He,...rt)=>{var Ge,Ve;if(!Q&&(He.target||oe.current)==null)throw new Error(gv(17));I==null||(Ge=I.onChange)==null||Ge.call(I,He),(Ve=st.onChange)==null||Ve.call(st,He,...rt)},Ze=st=>He=>{var rt;oe.current&&He.currentTarget===He.target&&oe.current.focus(),(rt=st.onClick)==null||rt.call(st,He)};return{disabled:D,error:$,focused:we,formControlContext:I,getInputProps:(st={})=>{const rt=Se({},{onBlur:c,onChange:h,onFocus:f},Sf(st)),Ge=Se({},rt,{onBlur:ae(rt),onChange:Ee(rt),onFocus:ke(rt)});return Se({},Ge,{"aria-invalid":$||void 0,defaultValue:R,value:j,required:G,disabled:D},st,{ref:be},Ge)},getRootProps:(st={})=>{const He=Sf(e,["onBlur","onChange","onFocus"]),rt=Se({},He,Sf(st));return Se({},st,rt,{onClick:Ze(rt)})},inputRef:be,required:G,value:j}}var wb={exports:{}},Ta={},Sb={exports:{}},Cb={};var zT;function ZO(){return zT||(zT=1,function(e){function t(Ge,Ve){var ut=Ge.length;Ge.push(Ve);e:for(;0<ut;){var ve=ut-1>>>1,Fe=Ge[ve];if(0<c(Fe,Ve))Ge[ve]=Ve,Ge[ut]=Fe,ut=ve;else break e}}function i(Ge){return Ge.length===0?null:Ge[0]}function a(Ge){if(Ge.length===0)return null;var Ve=Ge[0],ut=Ge.pop();if(ut!==Ve){Ge[0]=ut;e:for(var ve=0,Fe=Ge.length,pt=Fe>>>1;ve<pt;){var Tt=2*(ve+1)-1,Ct=Ge[Tt],_t=Tt+1,bt=Ge[_t];if(0>c(Ct,ut))_t<Fe&&0>c(bt,Ct)?(Ge[ve]=bt,Ge[_t]=ut,ve=_t):(Ge[ve]=Ct,Ge[Tt]=ut,ve=Tt);else if(_t<Fe&&0>c(bt,ut))Ge[ve]=bt,Ge[_t]=ut,ve=_t;else break e}}return Ve}function c(Ge,Ve){var ut=Ge.sortIndex-Ve.sortIndex;return ut!==0?ut:Ge.id-Ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var f=Date,o=f.now();e.unstable_now=function(){return f.now()-o}}var x=[],P=[],I=1,R=null,D=3,$=!1,G=!1,j=!1,V=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(Ge){for(var Ve=i(P);Ve!==null;){if(Ve.callback===null)a(P);else if(Ve.startTime<=Ge)a(P),Ve.sortIndex=Ve.expirationTime,t(x,Ve);else break;Ve=i(P)}}function de(Ge){if(j=!1,Q(Ge),!G)if(i(x)!==null)G=!0,He(oe);else{var Ve=i(P);Ve!==null&&rt(de,Ve.startTime-Ge)}}function oe(Ge,Ve){G=!1,j&&(j=!1,se(Ie),Ie=-1),$=!0;var ut=D;try{for(Q(Ve),R=i(x);R!==null&&(!(R.expirationTime>Ve)||Ge&&!Ee());){var ve=R.callback;if(typeof ve=="function"){R.callback=null,D=R.priorityLevel;var Fe=ve(R.expirationTime<=Ve);Ve=e.unstable_now(),typeof Fe=="function"?R.callback=Fe:R===i(x)&&a(x),Q(Ve)}else a(x);R=i(x)}if(R!==null)var pt=!0;else{var Tt=i(P);Tt!==null&&rt(de,Tt.startTime-Ve),pt=!1}return pt}finally{R=null,D=ut,$=!1}}var be=!1,we=null,Ie=-1,ke=5,ae=-1;function Ee(){return!(e.unstable_now()-ae<ke)}function Ze(){if(we!==null){var Ge=e.unstable_now();ae=Ge;var Ve=!0;try{Ve=we(!0,Ge)}finally{Ve?Qe():(be=!1,we=null)}}else be=!1}var Qe;if(typeof ue=="function")Qe=function(){ue(Ze)};else if(typeof MessageChannel<"u"){var vt=new MessageChannel,st=vt.port2;vt.port1.onmessage=Ze,Qe=function(){st.postMessage(null)}}else Qe=function(){V(Ze,0)};function He(Ge){we=Ge,be||(be=!0,Qe())}function rt(Ge,Ve){Ie=V(function(){Ge(e.unstable_now())},Ve)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ge){Ge.callback=null},e.unstable_continueExecution=function(){G||$||(G=!0,He(oe))},e.unstable_forceFrameRate=function(Ge){0>Ge||125<Ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ke=0<Ge?Math.floor(1e3/Ge):5},e.unstable_getCurrentPriorityLevel=function(){return D},e.unstable_getFirstCallbackNode=function(){return i(x)},e.unstable_next=function(Ge){switch(D){case 1:case 2:case 3:var Ve=3;break;default:Ve=D}var ut=D;D=Ve;try{return Ge()}finally{D=ut}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ge,Ve){switch(Ge){case 1:case 2:case 3:case 4:case 5:break;default:Ge=3}var ut=D;D=Ge;try{return Ve()}finally{D=ut}},e.unstable_scheduleCallback=function(Ge,Ve,ut){var ve=e.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?ve+ut:ve):ut=ve,Ge){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=ut+Fe,Ge={id:I++,callback:Ve,priorityLevel:Ge,startTime:ut,expirationTime:Fe,sortIndex:-1},ut>ve?(Ge.sortIndex=ut,t(P,Ge),i(x)===null&&Ge===i(P)&&(j?(se(Ie),Ie=-1):j=!0,rt(de,ut-ve))):(Ge.sortIndex=Fe,t(x,Ge),G||$||(G=!0,He(oe))),Ge},e.unstable_shouldYield=Ee,e.unstable_wrapCallback=function(Ge){var Ve=D;return function(){var ut=D;D=Ve;try{return Ge.apply(this,arguments)}finally{D=ut}}}}(Cb)),Cb}var OT;function XO(){return OT||(OT=1,Sb.exports=ZO()),Sb.exports}var LT;function KO(){if(LT)return Ta;LT=1;var e=Px(),t=XO();function i(p){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+p,T=1;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T]);return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,c={};function h(p,y){f(p,y),f(p+"Capture",y)}function f(p,y){for(c[p]=y,p=0;p<y.length;p++)a.add(y[p])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),x=Object.prototype.hasOwnProperty,P=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I={},R={};function D(p){return x.call(R,p)?!0:x.call(I,p)?!1:P.test(p)?R[p]=!0:(I[p]=!0,!1)}function $(p,y,T,A){if(T!==null&&T.type===0)return!1;switch(typeof y){case"function":case"symbol":return!0;case"boolean":return A?!1:T!==null?!T.acceptsBooleans:(p=p.toLowerCase().slice(0,5),p!=="data-"&&p!=="aria-");default:return!1}}function G(p,y,T,A){if(y===null||typeof y>"u"||$(p,y,T,A))return!0;if(A)return!1;if(T!==null)switch(T.type){case 3:return!y;case 4:return y===!1;case 5:return isNaN(y);case 6:return isNaN(y)||1>y}return!1}function j(p,y,T,A,U,Z,fe){this.acceptsBooleans=y===2||y===3||y===4,this.attributeName=A,this.attributeNamespace=U,this.mustUseProperty=T,this.propertyName=p,this.type=y,this.sanitizeURL=Z,this.removeEmptyString=fe}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(p){V[p]=new j(p,0,!1,p,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(p){var y=p[0];V[y]=new j(y,1,!1,p[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(p){V[p]=new j(p,2,!1,p.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(p){V[p]=new j(p,2,!1,p,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(p){V[p]=new j(p,3,!1,p.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(p){V[p]=new j(p,3,!0,p,null,!1,!1)}),["capture","download"].forEach(function(p){V[p]=new j(p,4,!1,p,null,!1,!1)}),["cols","rows","size","span"].forEach(function(p){V[p]=new j(p,6,!1,p,null,!1,!1)}),["rowSpan","start"].forEach(function(p){V[p]=new j(p,5,!1,p.toLowerCase(),null,!1,!1)});var se=/[\-:]([a-z])/g;function ue(p){return p[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(p){var y=p.replace(se,ue);V[y]=new j(y,1,!1,p,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(p){var y=p.replace(se,ue);V[y]=new j(y,1,!1,p,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(p){var y=p.replace(se,ue);V[y]=new j(y,1,!1,p,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(p){V[p]=new j(p,1,!1,p.toLowerCase(),null,!1,!1)}),V.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(p){V[p]=new j(p,1,!1,p.toLowerCase(),null,!0,!0)});function Q(p,y,T,A){var U=V.hasOwnProperty(y)?V[y]:null;(U!==null?U.type!==0:A||!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(G(y,T,U,A)&&(T=null),A||U===null?D(y)&&(T===null?p.removeAttribute(y):p.setAttribute(y,""+T)):U.mustUseProperty?p[U.propertyName]=T===null?U.type===3?!1:"":T:(y=U.attributeName,A=U.attributeNamespace,T===null?p.removeAttribute(y):(U=U.type,T=U===3||U===4&&T===!0?"":""+T,A?p.setAttributeNS(A,y,T):p.setAttribute(y,T))))}var de=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oe=Symbol.for("react.element"),be=Symbol.for("react.portal"),we=Symbol.for("react.fragment"),Ie=Symbol.for("react.strict_mode"),ke=Symbol.for("react.profiler"),ae=Symbol.for("react.provider"),Ee=Symbol.for("react.context"),Ze=Symbol.for("react.forward_ref"),Qe=Symbol.for("react.suspense"),vt=Symbol.for("react.suspense_list"),st=Symbol.for("react.memo"),He=Symbol.for("react.lazy"),rt=Symbol.for("react.offscreen"),Ge=Symbol.iterator;function Ve(p){return p===null||typeof p!="object"?null:(p=Ge&&p[Ge]||p["@@iterator"],typeof p=="function"?p:null)}var ut=Object.assign,ve;function Fe(p){if(ve===void 0)try{throw Error()}catch(T){var y=T.stack.trim().match(/\n( *(at )?)/);ve=y&&y[1]||""}return`
`+ve+p}var pt=!1;function Tt(p,y){if(!p||pt)return"";pt=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(y)if(y=function(){throw Error()},Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(y,[])}catch(yt){var A=yt}Reflect.construct(p,[],y)}else{try{y.call()}catch(yt){A=yt}p.call(y.prototype)}else{try{throw Error()}catch(yt){A=yt}p()}}catch(yt){if(yt&&A&&typeof yt.stack=="string"){for(var U=yt.stack.split(`
`),Z=A.stack.split(`
`),fe=U.length-1,Le=Z.length-1;1<=fe&&0<=Le&&U[fe]!==Z[Le];)Le--;for(;1<=fe&&0<=Le;fe--,Le--)if(U[fe]!==Z[Le]){if(fe!==1||Le!==1)do if(fe--,Le--,0>Le||U[fe]!==Z[Le]){var qe=`
`+U[fe].replace(" at new "," at ");return p.displayName&&qe.includes("<anonymous>")&&(qe=qe.replace("<anonymous>",p.displayName)),qe}while(1<=fe&&0<=Le);break}}}finally{pt=!1,Error.prepareStackTrace=T}return(p=p?p.displayName||p.name:"")?Fe(p):""}function Ct(p){switch(p.tag){case 5:return Fe(p.type);case 16:return Fe("Lazy");case 13:return Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 2:case 15:return p=Tt(p.type,!1),p;case 11:return p=Tt(p.type.render,!1),p;case 1:return p=Tt(p.type,!0),p;default:return""}}function _t(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case we:return"Fragment";case be:return"Portal";case ke:return"Profiler";case Ie:return"StrictMode";case Qe:return"Suspense";case vt:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case Ee:return(p.displayName||"Context")+".Consumer";case ae:return(p._context.displayName||"Context")+".Provider";case Ze:var y=p.render;return p=p.displayName,p||(p=y.displayName||y.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case st:return y=p.displayName||null,y!==null?y:_t(p.type)||"Memo";case He:y=p._payload,p=p._init;try{return _t(p(y))}catch{}}return null}function bt(p){var y=p.type;switch(p.tag){case 24:return"Cache";case 9:return(y.displayName||"Context")+".Consumer";case 10:return(y._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=y.render,p=p.displayName||p.name||"",y.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return y;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _t(y);case 8:return y===Ie?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y}return null}function nt(p){switch(typeof p){case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function kt(p){var y=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(y==="checkbox"||y==="radio")}function At(p){var y=kt(p)?"checked":"value",T=Object.getOwnPropertyDescriptor(p.constructor.prototype,y),A=""+p[y];if(!p.hasOwnProperty(y)&&typeof T<"u"&&typeof T.get=="function"&&typeof T.set=="function"){var U=T.get,Z=T.set;return Object.defineProperty(p,y,{configurable:!0,get:function(){return U.call(this)},set:function(fe){A=""+fe,Z.call(this,fe)}}),Object.defineProperty(p,y,{enumerable:T.enumerable}),{getValue:function(){return A},setValue:function(fe){A=""+fe},stopTracking:function(){p._valueTracker=null,delete p[y]}}}}function dr(p){p._valueTracker||(p._valueTracker=At(p))}function ir(p){if(!p)return!1;var y=p._valueTracker;if(!y)return!0;var T=y.getValue(),A="";return p&&(A=kt(p)?p.checked?"true":"false":p.value),p=A,p!==T?(y.setValue(p),!0):!1}function Gr(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}function Tr(p,y){var T=y.checked;return ut({},y,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:T??p._wrapperState.initialChecked})}function or(p,y){var T=y.defaultValue==null?"":y.defaultValue,A=y.checked!=null?y.checked:y.defaultChecked;T=nt(y.value!=null?y.value:T),p._wrapperState={initialChecked:A,initialValue:T,controlled:y.type==="checkbox"||y.type==="radio"?y.checked!=null:y.value!=null}}function qt(p,y){y=y.checked,y!=null&&Q(p,"checked",y,!1)}function pr(p,y){qt(p,y);var T=nt(y.value),A=y.type;if(T!=null)A==="number"?(T===0&&p.value===""||p.value!=T)&&(p.value=""+T):p.value!==""+T&&(p.value=""+T);else if(A==="submit"||A==="reset"){p.removeAttribute("value");return}y.hasOwnProperty("value")?Ir(p,y.type,T):y.hasOwnProperty("defaultValue")&&Ir(p,y.type,nt(y.defaultValue)),y.checked==null&&y.defaultChecked!=null&&(p.defaultChecked=!!y.defaultChecked)}function Xt(p,y,T){if(y.hasOwnProperty("value")||y.hasOwnProperty("defaultValue")){var A=y.type;if(!(A!=="submit"&&A!=="reset"||y.value!==void 0&&y.value!==null))return;y=""+p._wrapperState.initialValue,T||y===p.value||(p.value=y),p.defaultValue=y}T=p.name,T!==""&&(p.name=""),p.defaultChecked=!!p._wrapperState.initialChecked,T!==""&&(p.name=T)}function Ir(p,y,T){(y!=="number"||Gr(p.ownerDocument)!==p)&&(T==null?p.defaultValue=""+p._wrapperState.initialValue:p.defaultValue!==""+T&&(p.defaultValue=""+T))}var Rr=Array.isArray;function Br(p,y,T,A){if(p=p.options,y){y={};for(var U=0;U<T.length;U++)y["$"+T[U]]=!0;for(T=0;T<p.length;T++)U=y.hasOwnProperty("$"+p[T].value),p[T].selected!==U&&(p[T].selected=U),U&&A&&(p[T].defaultSelected=!0)}else{for(T=""+nt(T),y=null,U=0;U<p.length;U++){if(p[U].value===T){p[U].selected=!0,A&&(p[U].defaultSelected=!0);return}y!==null||p[U].disabled||(y=p[U])}y!==null&&(y.selected=!0)}}function Wr(p,y){if(y.dangerouslySetInnerHTML!=null)throw Error(i(91));return ut({},y,{value:void 0,defaultValue:void 0,children:""+p._wrapperState.initialValue})}function sn(p,y){var T=y.value;if(T==null){if(T=y.children,y=y.defaultValue,T!=null){if(y!=null)throw Error(i(92));if(Rr(T)){if(1<T.length)throw Error(i(93));T=T[0]}y=T}y==null&&(y=""),T=y}p._wrapperState={initialValue:nt(T)}}function On(p,y){var T=nt(y.value),A=nt(y.defaultValue);T!=null&&(T=""+T,T!==p.value&&(p.value=T),y.defaultValue==null&&p.defaultValue!==T&&(p.defaultValue=T)),A!=null&&(p.defaultValue=""+A)}function Tn(p){var y=p.textContent;y===p._wrapperState.initialValue&&y!==""&&y!==null&&(p.value=y)}function vn(p){switch(p){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sr(p,y){return p==null||p==="http://www.w3.org/1999/xhtml"?vn(y):p==="http://www.w3.org/2000/svg"&&y==="foreignObject"?"http://www.w3.org/1999/xhtml":p}var Dr,ur=function(p){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(y,T,A,U){MSApp.execUnsafeLocalFunction(function(){return p(y,T,A,U)})}:p}(function(p,y){if(p.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in p)p.innerHTML=y;else{for(Dr=Dr||document.createElement("div"),Dr.innerHTML="<svg>"+y.valueOf().toString()+"</svg>",y=Dr.firstChild;p.firstChild;)p.removeChild(p.firstChild);for(;y.firstChild;)p.appendChild(y.firstChild)}});function Zr(p,y){if(y){var T=p.firstChild;if(T&&T===p.lastChild&&T.nodeType===3){T.nodeValue=y;return}}p.textContent=y}var Ne={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ee=["Webkit","ms","Moz","O"];Object.keys(Ne).forEach(function(p){ee.forEach(function(y){y=y+p.charAt(0).toUpperCase()+p.substring(1),Ne[y]=Ne[p]})});function ie(p,y,T){return y==null||typeof y=="boolean"||y===""?"":T||typeof y!="number"||y===0||Ne.hasOwnProperty(p)&&Ne[p]?(""+y).trim():y+"px"}function ce(p,y){p=p.style;for(var T in y)if(y.hasOwnProperty(T)){var A=T.indexOf("--")===0,U=ie(T,y[T],A);T==="float"&&(T="cssFloat"),A?p.setProperty(T,U):p[T]=U}}var Ce=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Be(p,y){if(y){if(Ce[p]&&(y.children!=null||y.dangerouslySetInnerHTML!=null))throw Error(i(137,p));if(y.dangerouslySetInnerHTML!=null){if(y.children!=null)throw Error(i(60));if(typeof y.dangerouslySetInnerHTML!="object"||!("__html"in y.dangerouslySetInnerHTML))throw Error(i(61))}if(y.style!=null&&typeof y.style!="object")throw Error(i(62))}}function Je(p,y){if(p.indexOf("-")===-1)return typeof y.is=="string";switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ye=null;function Ue(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var Ke=null,gt=null,et=null;function Ae(p){if(p=Vs(p)){if(typeof Ke!="function")throw Error(i(280));var y=p.stateNode;y&&(y=Oh(y),Ke(p.stateNode,p.type,y))}}function Ut(p){gt?et?et.push(p):et=[p]:gt=p}function mr(){if(gt){var p=gt,y=et;if(et=gt=null,Ae(p),y)for(p=0;p<y.length;p++)Ae(y[p])}}function Zt(p,y){return p(y)}function Yt(){}var rr=!1;function vr(p,y,T){if(rr)return p(y,T);rr=!0;try{return Zt(p,y,T)}finally{rr=!1,(gt!==null||et!==null)&&(Yt(),mr())}}function kr(p,y){var T=p.stateNode;if(T===null)return null;var A=Oh(T);if(A===null)return null;T=A[y];e:switch(y){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(A=!A.disabled)||(p=p.type,A=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!A;break e;default:p=!1}if(p)return null;if(T&&typeof T!="function")throw Error(i(231,y,typeof T));return T}var nn=!1;if(o)try{var Xr={};Object.defineProperty(Xr,"passive",{get:function(){nn=!0}}),window.addEventListener("test",Xr,Xr),window.removeEventListener("test",Xr,Xr)}catch{nn=!1}function wn(p,y,T,A,U,Z,fe,Le,qe){var yt=Array.prototype.slice.call(arguments,3);try{y.apply(T,yt)}catch(Ft){this.onError(Ft)}}var on=!1,Mt=null,Fr=!1,en=null,Io={onError:function(p){on=!0,Mt=p}};function Ti(p,y,T,A,U,Z,fe,Le,qe){on=!1,Mt=null,wn.apply(Io,arguments)}function Ot(p,y,T,A,U,Z,fe,Le,qe){if(Ti.apply(this,arguments),on){if(on){var yt=Mt;on=!1,Mt=null}else throw Error(i(198));Fr||(Fr=!0,en=yt)}}function it(p){var y=p,T=p;if(p.alternate)for(;y.return;)y=y.return;else{p=y;do y=p,(y.flags&4098)!==0&&(T=y.return),p=y.return;while(p)}return y.tag===3?T:null}function tt(p){if(p.tag===13){var y=p.memoizedState;if(y===null&&(p=p.alternate,p!==null&&(y=p.memoizedState)),y!==null)return y.dehydrated}return null}function Ht(p){if(it(p)!==p)throw Error(i(188))}function Mr(p){var y=p.alternate;if(!y){if(y=it(p),y===null)throw Error(i(188));return y!==p?null:p}for(var T=p,A=y;;){var U=T.return;if(U===null)break;var Z=U.alternate;if(Z===null){if(A=U.return,A!==null){T=A;continue}break}if(U.child===Z.child){for(Z=U.child;Z;){if(Z===T)return Ht(U),p;if(Z===A)return Ht(U),y;Z=Z.sibling}throw Error(i(188))}if(T.return!==A.return)T=U,A=Z;else{for(var fe=!1,Le=U.child;Le;){if(Le===T){fe=!0,T=U,A=Z;break}if(Le===A){fe=!0,A=U,T=Z;break}Le=Le.sibling}if(!fe){for(Le=Z.child;Le;){if(Le===T){fe=!0,T=Z,A=U;break}if(Le===A){fe=!0,A=Z,T=U;break}Le=Le.sibling}if(!fe)throw Error(i(189))}}if(T.alternate!==A)throw Error(i(190))}if(T.tag!==3)throw Error(i(188));return T.stateNode.current===T?p:y}function Ur(p){return p=Mr(p),p!==null?sr(p):null}function sr(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var y=sr(p);if(y!==null)return y;p=p.sibling}return null}var An=t.unstable_scheduleCallback,Vi=t.unstable_cancelCallback,La=t.unstable_shouldYield,yl=t.unstable_requestPaint,Un=t.unstable_now,vl=t.unstable_getCurrentPriorityLevel,na=t.unstable_ImmediatePriority,Zi=t.unstable_UserBlockingPriority,an=t.unstable_NormalPriority,lc=t.unstable_LowPriority,Pr=t.unstable_IdlePriority,Mi=null,ln=null;function hi(p){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(Mi,p,void 0,(p.current.flags&128)===128)}catch{}}var Pi=Math.clz32?Math.clz32:gn,zs=Math.log,os=Math.LN2;function gn(p){return p>>>=0,p===0?32:31-(zs(p)/os|0)|0}var dh=64,fh=4194304;function Fa(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function ph(p,y){var T=p.pendingLanes;if(T===0)return 0;var A=0,U=p.suspendedLanes,Z=p.pingedLanes,fe=T&268435455;if(fe!==0){var Le=fe&~U;Le!==0?A=Fa(Le):(Z&=fe,Z!==0&&(A=Fa(Z)))}else fe=T&~U,fe!==0?A=Fa(fe):Z!==0&&(A=Fa(Z));if(A===0)return 0;if(y!==0&&y!==A&&(y&U)===0&&(U=A&-A,Z=y&-y,U>=Z||U===16&&(Z&4194240)!==0))return y;if((A&4)!==0&&(A|=T&16),y=p.entangledLanes,y!==0)for(p=p.entanglements,y&=A;0<y;)T=31-Pi(y),U=1<<T,A|=p[T],y&=~U;return A}function dm(p,y){switch(p){case 1:case 2:case 4:return y+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fm(p,y){for(var T=p.suspendedLanes,A=p.pingedLanes,U=p.expirationTimes,Z=p.pendingLanes;0<Z;){var fe=31-Pi(Z),Le=1<<fe,qe=U[fe];qe===-1?((Le&T)===0||(Le&A)!==0)&&(U[fe]=dm(Le,y)):qe<=y&&(p.expiredLanes|=Le),Z&=~Le}}function uu(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function dd(){var p=dh;return dh<<=1,(dh&4194240)===0&&(dh=64),p}function mh(p){for(var y=[],T=0;31>T;T++)y.push(p);return y}function cc(p,y,T){p.pendingLanes|=y,y!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,y=31-Pi(y),p[y]=T}function Bf(p,y){var T=p.pendingLanes&~y;p.pendingLanes=y,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=y,p.mutableReadLanes&=y,p.entangledLanes&=y,y=p.entanglements;var A=p.eventTimes;for(p=p.expirationTimes;0<T;){var U=31-Pi(T),Z=1<<U;y[U]=0,A[U]=-1,p[U]=-1,T&=~Z}}function $f(p,y){var T=p.entangledLanes|=y;for(p=p.entanglements;T;){var A=31-Pi(T),U=1<<A;U&y|p[A]&y&&(p[A]|=y),T&=~U}}var pn=0;function gh(p){return p&=-p,1<p?4<p?(p&268435455)!==0?16:536870912:4:1}var jf,_l,fd,hu,Ba,xl=!1,$r=[],ia=null,bl=null,oa=null,Xi=new Map,zi=new Map,_n=[],Cr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mn(p,y){switch(p){case"focusin":case"focusout":ia=null;break;case"dragenter":case"dragleave":bl=null;break;case"mouseover":case"mouseout":oa=null;break;case"pointerover":case"pointerout":Xi.delete(y.pointerId);break;case"gotpointercapture":case"lostpointercapture":zi.delete(y.pointerId)}}function ms(p,y,T,A,U,Z){return p===null||p.nativeEvent!==Z?(p={blockedOn:y,domEventName:T,eventSystemFlags:A,nativeEvent:Z,targetContainers:[U]},y!==null&&(y=Vs(y),y!==null&&_l(y)),p):(p.eventSystemFlags|=A,y=p.targetContainers,U!==null&&y.indexOf(U)===-1&&y.push(U),p)}function ko(p,y,T,A,U){switch(y){case"focusin":return ia=ms(ia,p,y,T,A,U),!0;case"dragenter":return bl=ms(bl,p,y,T,A,U),!0;case"mouseover":return oa=ms(oa,p,y,T,A,U),!0;case"pointerover":var Z=U.pointerId;return Xi.set(Z,ms(Xi.get(Z)||null,p,y,T,A,U)),!0;case"gotpointercapture":return Z=U.pointerId,zi.set(Z,ms(zi.get(Z)||null,p,y,T,A,U)),!0}return!1}function Vo(p){var y=Ns(p.target);if(y!==null){var T=it(y);if(T!==null){if(y=T.tag,y===13){if(y=tt(T),y!==null){p.blockedOn=y,Ba(p.priority,function(){fd(T)});return}}else if(y===3&&T.stateNode.current.memoizedState.isDehydrated){p.blockedOn=T.tag===3?T.stateNode.containerInfo:null;return}}}p.blockedOn=null}function Ki(p){if(p.blockedOn!==null)return!1;for(var y=p.targetContainers;0<y.length;){var T=vh(p.domEventName,p.eventSystemFlags,y[0],p.nativeEvent);if(T===null){T=p.nativeEvent;var A=new T.constructor(T.type,T);Ye=A,T.target.dispatchEvent(A),Ye=null}else return y=Vs(T),y!==null&&_l(y),p.blockedOn=T,!1;y.shift()}return!0}function uc(p,y,T){Ki(p)&&T.delete(y)}function wl(){xl=!1,ia!==null&&Ki(ia)&&(ia=null),bl!==null&&Ki(bl)&&(bl=null),oa!==null&&Ki(oa)&&(oa=null),Xi.forEach(uc),zi.forEach(uc)}function Gn(p,y){p.blockedOn===y&&(p.blockedOn=null,xl||(xl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,wl)))}function Os(p){function y(U){return Gn(U,p)}if(0<$r.length){Gn($r[0],p);for(var T=1;T<$r.length;T++){var A=$r[T];A.blockedOn===p&&(A.blockedOn=null)}}for(ia!==null&&Gn(ia,p),bl!==null&&Gn(bl,p),oa!==null&&Gn(oa,p),Xi.forEach(y),zi.forEach(y),T=0;T<_n.length;T++)A=_n[T],A.blockedOn===p&&(A.blockedOn=null);for(;0<_n.length&&(T=_n[0],T.blockedOn===null);)Vo(T),T.blockedOn===null&&_n.shift()}var Ao=de.ReactCurrentBatchConfig,hc=!0;function Uo(p,y,T,A){var U=pn,Z=Ao.transition;Ao.transition=null;try{pn=1,Ls(p,y,T,A)}finally{pn=U,Ao.transition=Z}}function dc(p,y,T,A){var U=pn,Z=Ao.transition;Ao.transition=null;try{pn=4,Ls(p,y,T,A)}finally{pn=U,Ao.transition=Z}}function Ls(p,y,T,A){if(hc){var U=vh(p,y,T,A);if(U===null)Tc(p,y,A,yh,T),Mn(p,A);else if(ko(U,p,y,T,A))A.stopPropagation();else if(Mn(p,A),y&4&&-1<Cr.indexOf(p)){for(;U!==null;){var Z=Vs(U);if(Z!==null&&jf(Z),Z=vh(p,y,T,A),Z===null&&Tc(p,y,A,yh,T),Z===U)break;U=Z}U!==null&&A.stopPropagation()}else Tc(p,y,A,null,T)}}var yh=null;function vh(p,y,T,A){if(yh=null,p=Ue(A),p=Ns(p),p!==null)if(y=it(p),y===null)p=null;else if(T=y.tag,T===13){if(p=tt(y),p!==null)return p;p=null}else if(T===3){if(y.stateNode.current.memoizedState.isDehydrated)return y.tag===3?y.stateNode.containerInfo:null;p=null}else y!==p&&(p=null);return yh=p,null}function Sl(p){switch(p){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vl()){case na:return 1;case Zi:return 4;case an:case lc:return 16;case Pr:return 536870912;default:return 16}default:return 16}}var cn=null,Cl=null,Jr=null;function jr(){if(Jr)return Jr;var p,y=Cl,T=y.length,A,U="value"in cn?cn.value:cn.textContent,Z=U.length;for(p=0;p<T&&y[p]===U[p];p++);var fe=T-p;for(A=1;A<=fe&&y[T-A]===U[Z-A];A++);return Jr=U.slice(p,1<A?1-A:void 0)}function $a(p){var y=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&y===13&&(p=13)):p=y,p===10&&(p=13),32<=p||p===13?p:0}function Qr(){return!0}function du(){return!1}function si(p){function y(T,A,U,Z,fe){this._reactName=T,this._targetInst=U,this.type=A,this.nativeEvent=Z,this.target=fe,this.currentTarget=null;for(var Le in p)p.hasOwnProperty(Le)&&(T=p[Le],this[Le]=T?T(Z):Z[Le]);return this.isDefaultPrevented=(Z.defaultPrevented!=null?Z.defaultPrevented:Z.returnValue===!1)?Qr:du,this.isPropagationStopped=du,this}return ut(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var T=this.nativeEvent;T&&(T.preventDefault?T.preventDefault():typeof T.returnValue!="unknown"&&(T.returnValue=!1),this.isDefaultPrevented=Qr)},stopPropagation:function(){var T=this.nativeEvent;T&&(T.stopPropagation?T.stopPropagation():typeof T.cancelBubble!="unknown"&&(T.cancelBubble=!0),this.isPropagationStopped=Qr)},persist:function(){},isPersistent:Qr}),y}var Fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sa=si(Fs),fu=ut({},Fs,{view:0,detail:0}),_h=si(fu),xh,Nf,pu,Yi=ut({},fu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tl,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==pu&&(pu&&p.type==="mousemove"?(xh=p.screenX-pu.screenX,Nf=p.screenY-pu.screenY):Nf=xh=0,pu=p),xh)},movementY:function(p){return"movementY"in p?p.movementY:Nf}}),Bs=si(Yi),Qn=ut({},Yi,{dataTransfer:0}),fc=si(Qn),Vf=ut({},fu,{relatedTarget:0}),pc=si(Vf),di=ut({},Fs,{animationName:0,elapsedTime:0,pseudoElement:0}),pm=si(di),Uf=ut({},Fs,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),mm=si(Uf),oy=ut({},Fs,{data:0}),mc=si(oy),pd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bh(p){var y=this.nativeEvent;return y.getModifierState?y.getModifierState(p):(p=Gf[p])?!!y[p]:!1}function Tl(){return bh}var gu=ut({},fu,{key:function(p){if(p.key){var y=pd[p.key]||p.key;if(y!=="Unidentified")return y}return p.type==="keypress"?(p=$a(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?mu[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tl,charCode:function(p){return p.type==="keypress"?$a(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?$a(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),Oi=si(gu),gm=ut({},Yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gc=si(gm),wh=ut({},fu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tl}),yc=si(wh),sy=ut({},Fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),md=si(sy),ay=ut({},Yi,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),yu=si(ay),gd=[9,13,27,32],yd=o&&"CompositionEvent"in window,vu=null;o&&"documentMode"in document&&(vu=document.documentMode);var qf=o&&"TextEvent"in window&&!vu,vd=o&&(!yd||vu&&8<vu&&11>=vu),_d=" ",Hf=!1;function Wf(p,y){switch(p){case"keyup":return gd.indexOf(y.keyCode)!==-1;case"keydown":return y.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zf(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var gs=!1;function ym(p,y){switch(p){case"compositionend":return Zf(y);case"keypress":return y.which!==32?null:(Hf=!0,_d);case"textInput":return p=y.data,p===_d&&Hf?null:p;default:return null}}function Xf(p,y){if(gs)return p==="compositionend"||!yd&&Wf(p,y)?(p=jr(),Jr=Cl=cn=null,gs=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(y.ctrlKey||y.altKey||y.metaKey)||y.ctrlKey&&y.altKey){if(y.char&&1<y.char.length)return y.char;if(y.which)return String.fromCharCode(y.which)}return null;case"compositionend":return vd&&y.locale!=="ko"?null:y.data;default:return null}}var _u={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kf(p){var y=p&&p.nodeName&&p.nodeName.toLowerCase();return y==="input"?!!_u[p.type]:y==="textarea"}function Sh(p,y,T,A){Ut(A),y=Cu(y,"onChange"),0<y.length&&(T=new sa("onChange","change",null,T,A),p.push({event:T,listeners:y}))}var Ch=null,Th=null;function vm(p){Cm(p,0)}function Ml(p){var y=Us(p);if(ir(y))return p}function _m(p,y){if(p==="change")return y}var xd=!1;if(o){var bd;if(o){var xu="oninput"in document;if(!xu){var ys=document.createElement("div");ys.setAttribute("oninput","return;"),xu=typeof ys.oninput=="function"}bd=xu}else bd=!1;xd=bd&&(!document.documentMode||9<document.documentMode)}function Mh(){Ch&&(Ch.detachEvent("onpropertychange",wd),Th=Ch=null)}function wd(p){if(p.propertyName==="value"&&Ml(Th)){var y=[];Sh(y,Th,p,Ue(p)),vr(vm,y)}}function Yf(p,y,T){p==="focusin"?(Mh(),Ch=y,Th=T,Ch.attachEvent("onpropertychange",wd)):p==="focusout"&&Mh()}function Jf(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return Ml(Th)}function Sd(p,y){if(p==="click")return Ml(y)}function vc(p,y){if(p==="input"||p==="change")return Ml(y)}function Qf(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var $s=typeof Object.is=="function"?Object.is:Qf;function bu(p,y){if($s(p,y))return!0;if(typeof p!="object"||p===null||typeof y!="object"||y===null)return!1;var T=Object.keys(p),A=Object.keys(y);if(T.length!==A.length)return!1;for(A=0;A<T.length;A++){var U=T[A];if(!x.call(y,U)||!$s(p[U],y[U]))return!1}return!0}function xm(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function bm(p,y){var T=xm(p);p=0;for(var A;T;){if(T.nodeType===3){if(A=p+T.textContent.length,p<=y&&A>=y)return{node:T,offset:y-p};p=A}e:{for(;T;){if(T.nextSibling){T=T.nextSibling;break e}T=T.parentNode}T=void 0}T=xm(T)}}function ep(p,y){return p&&y?p===y?!0:p&&p.nodeType===3?!1:y&&y.nodeType===3?ep(p,y.parentNode):"contains"in p?p.contains(y):p.compareDocumentPosition?!!(p.compareDocumentPosition(y)&16):!1:!1}function wm(){for(var p=window,y=Gr();y instanceof p.HTMLIFrameElement;){try{var T=typeof y.contentWindow.location.href=="string"}catch{T=!1}if(T)p=y.contentWindow;else break;y=Gr(p.document)}return y}function un(p){var y=p&&p.nodeName&&p.nodeName.toLowerCase();return y&&(y==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||y==="textarea"||p.contentEditable==="true")}function Cd(p){var y=wm(),T=p.focusedElem,A=p.selectionRange;if(y!==T&&T&&T.ownerDocument&&ep(T.ownerDocument.documentElement,T)){if(A!==null&&un(T)){if(y=A.start,p=A.end,p===void 0&&(p=y),"selectionStart"in T)T.selectionStart=y,T.selectionEnd=Math.min(p,T.value.length);else if(p=(y=T.ownerDocument||document)&&y.defaultView||window,p.getSelection){p=p.getSelection();var U=T.textContent.length,Z=Math.min(A.start,U);A=A.end===void 0?Z:Math.min(A.end,U),!p.extend&&Z>A&&(U=A,A=Z,Z=U),U=bm(T,Z);var fe=bm(T,A);U&&fe&&(p.rangeCount!==1||p.anchorNode!==U.node||p.anchorOffset!==U.offset||p.focusNode!==fe.node||p.focusOffset!==fe.offset)&&(y=y.createRange(),y.setStart(U.node,U.offset),p.removeAllRanges(),Z>A?(p.addRange(y),p.extend(fe.node,fe.offset)):(y.setEnd(fe.node,fe.offset),p.addRange(y)))}}for(y=[],p=T;p=p.parentNode;)p.nodeType===1&&y.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<y.length;T++)p=y[T],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}}var Td=o&&"documentMode"in document&&11>=document.documentMode,ja=null,Ph=null,js=null,_c=!1;function xc(p,y,T){var A=T.window===T?T.document:T.nodeType===9?T:T.ownerDocument;_c||ja==null||ja!==Gr(A)||(A=ja,"selectionStart"in A&&un(A)?A={start:A.selectionStart,end:A.selectionEnd}:(A=(A.ownerDocument&&A.ownerDocument.defaultView||window).getSelection(),A={anchorNode:A.anchorNode,anchorOffset:A.anchorOffset,focusNode:A.focusNode,focusOffset:A.focusOffset}),js&&bu(js,A)||(js=A,A=Cu(Ph,"onSelect"),0<A.length&&(y=new sa("onSelect","select",null,y,T),p.push({event:y,listeners:A}),y.target=ja)))}function Ro(p,y){var T={};return T[p.toLowerCase()]=y.toLowerCase(),T["Webkit"+p]="webkit"+y,T["Moz"+p]="moz"+y,T}var bc={animationend:Ro("Animation","AnimationEnd"),animationiteration:Ro("Animation","AnimationIteration"),animationstart:Ro("Animation","AnimationStart"),transitionend:Ro("Transition","TransitionEnd")},Md={},Pd={};o&&(Pd=document.createElement("div").style,"AnimationEvent"in window||(delete bc.animationend.animation,delete bc.animationiteration.animation,delete bc.animationstart.animation),"TransitionEvent"in window||delete bc.transitionend.transition);function aa(p){if(Md[p])return Md[p];if(!bc[p])return p;var y=bc[p],T;for(T in y)if(y.hasOwnProperty(T)&&T in Pd)return Md[p]=y[T];return p}var Eh=aa("animationend"),Ih=aa("animationiteration"),wu=aa("animationstart"),kh=aa("transitionend"),tp=new Map,wc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ss(p,y){tp.set(p,y),h(y,[p])}for(var Ed=0;Ed<wc.length;Ed++){var Ah=wc[Ed],Kr=Ah.toLowerCase(),Id=Ah[0].toUpperCase()+Ah.slice(1);ss(Kr,"on"+Id)}ss(Eh,"onAnimationEnd"),ss(Ih,"onAnimationIteration"),ss(wu,"onAnimationStart"),ss("dblclick","onDoubleClick"),ss("focusin","onFocus"),ss("focusout","onBlur"),ss(kh,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),h("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),h("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),h("onBeforeInput",["compositionend","keypress","textInput","paste"]),h("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rh));function Su(p,y,T){var A=p.type||"unknown-event";p.currentTarget=T,Ot(A,y,void 0,p),p.currentTarget=null}function Cm(p,y){y=(y&4)!==0;for(var T=0;T<p.length;T++){var A=p[T],U=A.event;A=A.listeners;e:{var Z=void 0;if(y)for(var fe=A.length-1;0<=fe;fe--){var Le=A[fe],qe=Le.instance,yt=Le.currentTarget;if(Le=Le.listener,qe!==Z&&U.isPropagationStopped())break e;Su(U,Le,yt),Z=qe}else for(fe=0;fe<A.length;fe++){if(Le=A[fe],qe=Le.instance,yt=Le.currentTarget,Le=Le.listener,qe!==Z&&U.isPropagationStopped())break e;Su(U,Le,yt),Z=qe}}}if(Fr)throw p=en,Fr=!1,en=null,p}function ei(p,y){var T=y[Ec];T===void 0&&(T=y[Ec]=new Set);var A=p+"__bubble";T.has(A)||(Cc(y,p,2,!1),T.add(A))}function kd(p,y,T){var A=0;y&&(A|=4),Cc(T,p,A,y)}var Ad="_reactListening"+Math.random().toString(36).slice(2);function Sc(p){if(!p[Ad]){p[Ad]=!0,a.forEach(function(T){T!=="selectionchange"&&(Sm.has(T)||kd(T,!1,p),kd(T,!0,p))});var y=p.nodeType===9?p:p.ownerDocument;y===null||y[Ad]||(y[Ad]=!0,kd("selectionchange",!1,y))}}function Cc(p,y,T,A){switch(Sl(y)){case 1:var U=Uo;break;case 4:U=dc;break;default:U=Ls}T=U.bind(null,y,T,p),U=void 0,!nn||y!=="touchstart"&&y!=="touchmove"&&y!=="wheel"||(U=!0),A?U!==void 0?p.addEventListener(y,T,{capture:!0,passive:U}):p.addEventListener(y,T,!0):U!==void 0?p.addEventListener(y,T,{passive:U}):p.addEventListener(y,T,!1)}function Tc(p,y,T,A,U){var Z=A;if((y&1)===0&&(y&2)===0&&A!==null)e:for(;;){if(A===null)return;var fe=A.tag;if(fe===3||fe===4){var Le=A.stateNode.containerInfo;if(Le===U||Le.nodeType===8&&Le.parentNode===U)break;if(fe===4)for(fe=A.return;fe!==null;){var qe=fe.tag;if((qe===3||qe===4)&&(qe=fe.stateNode.containerInfo,qe===U||qe.nodeType===8&&qe.parentNode===U))return;fe=fe.return}for(;Le!==null;){if(fe=Ns(Le),fe===null)return;if(qe=fe.tag,qe===5||qe===6){A=Z=fe;continue e}Le=Le.parentNode}}A=A.return}vr(function(){var yt=Z,Ft=Ue(T),$t=[];e:{var Lt=tp.get(p);if(Lt!==void 0){var lr=sa,gr=p;switch(p){case"keypress":if($a(T)===0)break e;case"keydown":case"keyup":lr=Oi;break;case"focusin":gr="focus",lr=pc;break;case"focusout":gr="blur",lr=pc;break;case"beforeblur":case"afterblur":lr=pc;break;case"click":if(T.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lr=Bs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lr=fc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lr=yc;break;case Eh:case Ih:case wu:lr=pm;break;case kh:lr=md;break;case"scroll":lr=_h;break;case"wheel":lr=yu;break;case"copy":case"cut":case"paste":lr=mm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lr=gc}var yr=(y&4)!==0,ki=!yr&&p==="scroll",ht=yr?Lt!==null?Lt+"Capture":null:Lt;yr=[];for(var Xe=yt,ft;Xe!==null;){ft=Xe;var Vt=ft.stateNode;if(ft.tag===5&&Vt!==null&&(ft=Vt,ht!==null&&(Vt=kr(Xe,ht),Vt!=null&&yr.push(Pl(Xe,Vt,ft)))),ki)break;Xe=Xe.return}0<yr.length&&(Lt=new lr(Lt,gr,null,T,Ft),$t.push({event:Lt,listeners:yr}))}}if((y&7)===0){e:{if(Lt=p==="mouseover"||p==="pointerover",lr=p==="mouseout"||p==="pointerout",Lt&&T!==Ye&&(gr=T.relatedTarget||T.fromElement)&&(Ns(gr)||gr[vs]))break e;if((lr||Lt)&&(Lt=Ft.window===Ft?Ft:(Lt=Ft.ownerDocument)?Lt.defaultView||Lt.parentWindow:window,lr?(gr=T.relatedTarget||T.toElement,lr=yt,gr=gr?Ns(gr):null,gr!==null&&(ki=it(gr),gr!==ki||gr.tag!==5&&gr.tag!==6)&&(gr=null)):(lr=null,gr=yt),lr!==gr)){if(yr=Bs,Vt="onMouseLeave",ht="onMouseEnter",Xe="mouse",(p==="pointerout"||p==="pointerover")&&(yr=gc,Vt="onPointerLeave",ht="onPointerEnter",Xe="pointer"),ki=lr==null?Lt:Us(lr),ft=gr==null?Lt:Us(gr),Lt=new yr(Vt,Xe+"leave",lr,T,Ft),Lt.target=ki,Lt.relatedTarget=ft,Vt=null,Ns(Ft)===yt&&(yr=new yr(ht,Xe+"enter",gr,T,Ft),yr.target=ft,yr.relatedTarget=ki,Vt=yr),ki=Vt,lr&&gr)t:{for(yr=lr,ht=gr,Xe=0,ft=yr;ft;ft=El(ft))Xe++;for(ft=0,Vt=ht;Vt;Vt=El(Vt))ft++;for(;0<Xe-ft;)yr=El(yr),Xe--;for(;0<ft-Xe;)ht=El(ht),ft--;for(;Xe--;){if(yr===ht||ht!==null&&yr===ht.alternate)break t;yr=El(yr),ht=El(ht)}yr=null}else yr=null;lr!==null&&Dh($t,Lt,lr,yr,!1),gr!==null&&ki!==null&&Dh($t,ki,gr,yr,!0)}}e:{if(Lt=yt?Us(yt):window,lr=Lt.nodeName&&Lt.nodeName.toLowerCase(),lr==="select"||lr==="input"&&Lt.type==="file")var xr=_m;else if(Kf(Lt))if(xd)xr=vc;else{xr=Jf;var Ar=Yf}else(lr=Lt.nodeName)&&lr.toLowerCase()==="input"&&(Lt.type==="checkbox"||Lt.type==="radio")&&(xr=Sd);if(xr&&(xr=xr(p,yt))){Sh($t,xr,T,Ft);break e}Ar&&Ar(p,Lt,yt),p==="focusout"&&(Ar=Lt._wrapperState)&&Ar.controlled&&Lt.type==="number"&&Ir(Lt,"number",Lt.value)}switch(Ar=yt?Us(yt):window,p){case"focusin":(Kf(Ar)||Ar.contentEditable==="true")&&(ja=Ar,Ph=yt,js=null);break;case"focusout":js=Ph=ja=null;break;case"mousedown":_c=!0;break;case"contextmenu":case"mouseup":case"dragend":_c=!1,xc($t,T,Ft);break;case"selectionchange":if(Td)break;case"keydown":case"keyup":xc($t,T,Ft)}var Or;if(yd)e:{switch(p){case"compositionstart":var Nr="onCompositionStart";break e;case"compositionend":Nr="onCompositionEnd";break e;case"compositionupdate":Nr="onCompositionUpdate";break e}Nr=void 0}else gs?Wf(p,T)&&(Nr="onCompositionEnd"):p==="keydown"&&T.keyCode===229&&(Nr="onCompositionStart");Nr&&(vd&&T.locale!=="ko"&&(gs||Nr!=="onCompositionStart"?Nr==="onCompositionEnd"&&gs&&(Or=jr()):(cn=Ft,Cl="value"in cn?cn.value:cn.textContent,gs=!0)),Ar=Cu(yt,Nr),0<Ar.length&&(Nr=new mc(Nr,p,null,T,Ft),$t.push({event:Nr,listeners:Ar}),Or?Nr.data=Or:(Or=Zf(T),Or!==null&&(Nr.data=Or)))),(Or=qf?ym(p,T):Xf(p,T))&&(yt=Cu(yt,"onBeforeInput"),0<yt.length&&(Ft=new mc("onBeforeInput","beforeinput",null,T,Ft),$t.push({event:Ft,listeners:yt}),Ft.data=Or))}Cm($t,y)})}function Pl(p,y,T){return{instance:p,listener:y,currentTarget:T}}function Cu(p,y){for(var T=y+"Capture",A=[];p!==null;){var U=p,Z=U.stateNode;U.tag===5&&Z!==null&&(U=Z,Z=kr(p,T),Z!=null&&A.unshift(Pl(p,Z,U)),Z=kr(p,y),Z!=null&&A.push(Pl(p,Z,U))),p=p.return}return A}function El(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5);return p||null}function Dh(p,y,T,A,U){for(var Z=y._reactName,fe=[];T!==null&&T!==A;){var Le=T,qe=Le.alternate,yt=Le.stateNode;if(qe!==null&&qe===A)break;Le.tag===5&&yt!==null&&(Le=yt,U?(qe=kr(T,Z),qe!=null&&fe.unshift(Pl(T,qe,Le))):U||(qe=kr(T,Z),qe!=null&&fe.push(Pl(T,qe,Le)))),T=T.return}fe.length!==0&&p.push({event:y,listeners:fe})}var Rd=/\r\n?/g,Il=/\u0000|\uFFFD/g;function kl(p){return(typeof p=="string"?p:""+p).replace(Rd,`
`).replace(Il,"")}function Tu(p,y,T){if(y=kl(y),kl(p)!==y&&T)throw Error(i(425))}function Dd(){}var Mc=null,rp=null;function zd(p,y){return p==="textarea"||p==="noscript"||typeof y.children=="string"||typeof y.children=="number"||typeof y.dangerouslySetInnerHTML=="object"&&y.dangerouslySetInnerHTML!==null&&y.dangerouslySetInnerHTML.__html!=null}var Pc=typeof setTimeout=="function"?setTimeout:void 0,Od=typeof clearTimeout=="function"?clearTimeout:void 0,np=typeof Promise=="function"?Promise:void 0,Tm=typeof queueMicrotask=="function"?queueMicrotask:typeof np<"u"?function(p){return np.resolve(null).then(p).catch(zh)}:Pc;function zh(p){setTimeout(function(){throw p})}function Mu(p,y){var T=y,A=0;do{var U=T.nextSibling;if(p.removeChild(T),U&&U.nodeType===8)if(T=U.data,T==="/$"){if(A===0){p.removeChild(U),Os(y);return}A--}else T!=="$"&&T!=="$?"&&T!=="$!"||A++;T=U}while(T);Os(y)}function Na(p){for(;p!=null;p=p.nextSibling){var y=p.nodeType;if(y===1||y===3)break;if(y===8){if(y=p.data,y==="$"||y==="$!"||y==="$?")break;if(y==="/$")return null}}return p}function ip(p){p=p.previousSibling;for(var y=0;p;){if(p.nodeType===8){var T=p.data;if(T==="$"||T==="$!"||T==="$?"){if(y===0)return p;y--}else T==="/$"&&y++}p=p.previousSibling}return null}var Ln=Math.random().toString(36).slice(2),_o="__reactFiber$"+Ln,uo="__reactProps$"+Ln,vs="__reactContainer$"+Ln,Ec="__reactEvents$"+Ln,Ld="__reactListeners$"+Ln,Al="__reactHandles$"+Ln;function Ns(p){var y=p[_o];if(y)return y;for(var T=p.parentNode;T;){if(y=T[vs]||T[_o]){if(T=y.alternate,y.child!==null||T!==null&&T.child!==null)for(p=ip(p);p!==null;){if(T=p[_o])return T;p=ip(p)}return y}p=T,T=p.parentNode}return null}function Vs(p){return p=p[_o]||p[vs],!p||p.tag!==5&&p.tag!==6&&p.tag!==13&&p.tag!==3?null:p}function Us(p){if(p.tag===5||p.tag===6)return p.stateNode;throw Error(i(33))}function Oh(p){return p[uo]||null}var Fd=[],Ic=-1;function Va(p){return{current:p}}function qn(p){0>Ic||(p.current=Fd[Ic],Fd[Ic]=null,Ic--)}function mn(p,y){Ic++,Fd[Ic]=p.current,p.current=y}var la={},Ji=Va(la),Qi=Va(!1),Rl=la;function Dl(p,y){var T=p.type.contextTypes;if(!T)return la;var A=p.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===y)return A.__reactInternalMemoizedMaskedChildContext;var U={},Z;for(Z in T)U[Z]=y[Z];return A&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=y,p.__reactInternalMemoizedMaskedChildContext=U),U}function xo(p){return p=p.childContextTypes,p!=null}function Lh(){qn(Qi),qn(Ji)}function Bd(p,y,T){if(Ji.current!==la)throw Error(i(168));mn(Ji,y),mn(Qi,T)}function $d(p,y,T){var A=p.stateNode;if(y=y.childContextTypes,typeof A.getChildContext!="function")return T;A=A.getChildContext();for(var U in A)if(!(U in y))throw Error(i(108,bt(p)||"Unknown",U));return ut({},T,A)}function Gs(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||la,Rl=Ji.current,mn(Ji,p),mn(Qi,Qi.current),!0}function op(p,y,T){var A=p.stateNode;if(!A)throw Error(i(169));T?(p=$d(p,y,Rl),A.__reactInternalMemoizedMergedChildContext=p,qn(Qi),qn(Ji),mn(Ji,p)):qn(Qi),mn(Qi,T)}var Li=null,Go=!1,jd=!1;function _s(p){Li===null?Li=[p]:Li.push(p)}function ly(p){Go=!0,_s(p)}function xs(){if(!jd&&Li!==null){jd=!0;var p=0,y=pn;try{var T=Li;for(pn=1;p<T.length;p++){var A=T[p];do A=A(!0);while(A!==null)}Li=null,Go=!1}catch(U){throw Li!==null&&(Li=Li.slice(p+1)),An(na,xs),U}finally{pn=y,jd=!1}}return null}var ca=[],fi=0,zl=null,Fh=0,bs=[],ws=0,Ss=null,qo=1,Ui="";function Gt(p,y){ca[fi++]=Fh,ca[fi++]=zl,zl=p,Fh=y}function Bh(p,y,T){bs[ws++]=qo,bs[ws++]=Ui,bs[ws++]=Ss,Ss=p;var A=qo;p=Ui;var U=32-Pi(A)-1;A&=~(1<<U),T+=1;var Z=32-Pi(y)+U;if(30<Z){var fe=U-U%5;Z=(A&(1<<fe)-1).toString(32),A>>=fe,U-=fe,qo=1<<32-Pi(y)+U|T<<U|A,Ui=Z+p}else qo=1<<Z|T<<U|A,Ui=p}function $h(p){p.return!==null&&(Gt(p,1),Bh(p,1,0))}function Ol(p){for(;p===zl;)zl=ca[--fi],ca[fi]=null,Fh=ca[--fi],ca[fi]=null;for(;p===Ss;)Ss=bs[--ws],bs[ws]=null,Ui=bs[--ws],bs[ws]=null,qo=bs[--ws],bs[ws]=null}var ho=null,fo=null,Hn=!1,Do=null;function Nd(p,y){var T=ba(5,null,null,0);T.elementType="DELETED",T.stateNode=y,T.return=p,y=p.deletions,y===null?(p.deletions=[T],p.flags|=16):y.push(T)}function sp(p,y){switch(p.tag){case 5:var T=p.type;return y=y.nodeType!==1||T.toLowerCase()!==y.nodeName.toLowerCase()?null:y,y!==null?(p.stateNode=y,ho=p,fo=Na(y.firstChild),!0):!1;case 6:return y=p.pendingProps===""||y.nodeType!==3?null:y,y!==null?(p.stateNode=y,ho=p,fo=null,!0):!1;case 13:return y=y.nodeType!==8?null:y,y!==null?(T=Ss!==null?{id:qo,overflow:Ui}:null,p.memoizedState={dehydrated:y,treeContext:T,retryLane:1073741824},T=ba(18,null,null,0),T.stateNode=y,T.return=p,p.child=T,ho=p,fo=null,!0):!1;default:return!1}}function Ll(p){return(p.mode&1)!==0&&(p.flags&128)===0}function ap(p){if(Hn){var y=fo;if(y){var T=y;if(!sp(p,y)){if(Ll(p))throw Error(i(418));y=Na(T.nextSibling);var A=ho;y&&sp(p,y)?Nd(A,T):(p.flags=p.flags&-4097|2,Hn=!1,ho=p)}}else{if(Ll(p))throw Error(i(418));p.flags=p.flags&-4097|2,Hn=!1,ho=p}}}function jh(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;ho=p}function kc(p){if(p!==ho)return!1;if(!Hn)return jh(p),Hn=!0,!1;var y;if((y=p.tag!==3)&&!(y=p.tag!==5)&&(y=p.type,y=y!=="head"&&y!=="body"&&!zd(p.type,p.memoizedProps)),y&&(y=fo)){if(Ll(p))throw lp(),Error(i(418));for(;y;)Nd(p,y),y=Na(y.nextSibling)}if(jh(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));e:{for(p=p.nextSibling,y=0;p;){if(p.nodeType===8){var T=p.data;if(T==="/$"){if(y===0){fo=Na(p.nextSibling);break e}y--}else T!=="$"&&T!=="$!"&&T!=="$?"||y++}p=p.nextSibling}fo=null}}else fo=ho?Na(p.stateNode.nextSibling):null;return!0}function lp(){for(var p=fo;p;)p=Na(p.nextSibling)}function Fl(){fo=ho=null,Hn=!1}function Vd(p){Do===null?Do=[p]:Do.push(p)}var cp=de.ReactCurrentBatchConfig;function Ac(p,y,T){if(p=T.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(T._owner){if(T=T._owner,T){if(T.tag!==1)throw Error(i(309));var A=T.stateNode}if(!A)throw Error(i(147,p));var U=A,Z=""+p;return y!==null&&y.ref!==null&&typeof y.ref=="function"&&y.ref._stringRef===Z?y.ref:(y=function(fe){var Le=U.refs;fe===null?delete Le[Z]:Le[Z]=fe},y._stringRef=Z,y)}if(typeof p!="string")throw Error(i(284));if(!T._owner)throw Error(i(290,p))}return p}function Nh(p,y){throw p=Object.prototype.toString.call(y),Error(i(31,p==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":p))}function Ua(p){var y=p._init;return y(p._payload)}function Sn(p){function y(ht,Xe){if(p){var ft=ht.deletions;ft===null?(ht.deletions=[Xe],ht.flags|=16):ft.push(Xe)}}function T(ht,Xe){if(!p)return null;for(;Xe!==null;)y(ht,Xe),Xe=Xe.sibling;return null}function A(ht,Xe){for(ht=new Map;Xe!==null;)Xe.key!==null?ht.set(Xe.key,Xe):ht.set(Xe.index,Xe),Xe=Xe.sibling;return ht}function U(ht,Xe){return ht=qc(ht,Xe),ht.index=0,ht.sibling=null,ht}function Z(ht,Xe,ft){return ht.index=ft,p?(ft=ht.alternate,ft!==null?(ft=ft.index,ft<Xe?(ht.flags|=2,Xe):ft):(ht.flags|=2,Xe)):(ht.flags|=1048576,Xe)}function fe(ht){return p&&ht.alternate===null&&(ht.flags|=2),ht}function Le(ht,Xe,ft,Vt){return Xe===null||Xe.tag!==6?(Xe=Fm(ft,ht.mode,Vt),Xe.return=ht,Xe):(Xe=U(Xe,ft),Xe.return=ht,Xe)}function qe(ht,Xe,ft,Vt){var xr=ft.type;return xr===we?Ft(ht,Xe,ft.props.children,Vt,ft.key):Xe!==null&&(Xe.elementType===xr||typeof xr=="object"&&xr!==null&&xr.$$typeof===He&&Ua(xr)===Xe.type)?(Vt=U(Xe,ft.props),Vt.ref=Ac(ht,Xe,ft),Vt.return=ht,Vt):(Vt=af(ft.type,ft.key,ft.props,null,ht.mode,Vt),Vt.ref=Ac(ht,Xe,ft),Vt.return=ht,Vt)}function yt(ht,Xe,ft,Vt){return Xe===null||Xe.tag!==4||Xe.stateNode.containerInfo!==ft.containerInfo||Xe.stateNode.implementation!==ft.implementation?(Xe=Ty(ft,ht.mode,Vt),Xe.return=ht,Xe):(Xe=U(Xe,ft.children||[]),Xe.return=ht,Xe)}function Ft(ht,Xe,ft,Vt,xr){return Xe===null||Xe.tag!==7?(Xe=Nu(ft,ht.mode,Vt,xr),Xe.return=ht,Xe):(Xe=U(Xe,ft),Xe.return=ht,Xe)}function $t(ht,Xe,ft){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return Xe=Fm(""+Xe,ht.mode,ft),Xe.return=ht,Xe;if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case oe:return ft=af(Xe.type,Xe.key,Xe.props,null,ht.mode,ft),ft.ref=Ac(ht,null,Xe),ft.return=ht,ft;case be:return Xe=Ty(Xe,ht.mode,ft),Xe.return=ht,Xe;case He:var Vt=Xe._init;return $t(ht,Vt(Xe._payload),ft)}if(Rr(Xe)||Ve(Xe))return Xe=Nu(Xe,ht.mode,ft,null),Xe.return=ht,Xe;Nh(ht,Xe)}return null}function Lt(ht,Xe,ft,Vt){var xr=Xe!==null?Xe.key:null;if(typeof ft=="string"&&ft!==""||typeof ft=="number")return xr!==null?null:Le(ht,Xe,""+ft,Vt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case oe:return ft.key===xr?qe(ht,Xe,ft,Vt):null;case be:return ft.key===xr?yt(ht,Xe,ft,Vt):null;case He:return xr=ft._init,Lt(ht,Xe,xr(ft._payload),Vt)}if(Rr(ft)||Ve(ft))return xr!==null?null:Ft(ht,Xe,ft,Vt,null);Nh(ht,ft)}return null}function lr(ht,Xe,ft,Vt,xr){if(typeof Vt=="string"&&Vt!==""||typeof Vt=="number")return ht=ht.get(ft)||null,Le(Xe,ht,""+Vt,xr);if(typeof Vt=="object"&&Vt!==null){switch(Vt.$$typeof){case oe:return ht=ht.get(Vt.key===null?ft:Vt.key)||null,qe(Xe,ht,Vt,xr);case be:return ht=ht.get(Vt.key===null?ft:Vt.key)||null,yt(Xe,ht,Vt,xr);case He:var Ar=Vt._init;return lr(ht,Xe,ft,Ar(Vt._payload),xr)}if(Rr(Vt)||Ve(Vt))return ht=ht.get(ft)||null,Ft(Xe,ht,Vt,xr,null);Nh(Xe,Vt)}return null}function gr(ht,Xe,ft,Vt){for(var xr=null,Ar=null,Or=Xe,Nr=Xe=0,Co=null;Or!==null&&Nr<ft.length;Nr++){Or.index>Nr?(Co=Or,Or=null):Co=Or.sibling;var Cn=Lt(ht,Or,ft[Nr],Vt);if(Cn===null){Or===null&&(Or=Co);break}p&&Or&&Cn.alternate===null&&y(ht,Or),Xe=Z(Cn,Xe,Nr),Ar===null?xr=Cn:Ar.sibling=Cn,Ar=Cn,Or=Co}if(Nr===ft.length)return T(ht,Or),Hn&&Gt(ht,Nr),xr;if(Or===null){for(;Nr<ft.length;Nr++)Or=$t(ht,ft[Nr],Vt),Or!==null&&(Xe=Z(Or,Xe,Nr),Ar===null?xr=Or:Ar.sibling=Or,Ar=Or);return Hn&&Gt(ht,Nr),xr}for(Or=A(ht,Or);Nr<ft.length;Nr++)Co=lr(Or,ht,Nr,ft[Nr],Vt),Co!==null&&(p&&Co.alternate!==null&&Or.delete(Co.key===null?Nr:Co.key),Xe=Z(Co,Xe,Nr),Ar===null?xr=Co:Ar.sibling=Co,Ar=Co);return p&&Or.forEach(function(Vu){return y(ht,Vu)}),Hn&&Gt(ht,Nr),xr}function yr(ht,Xe,ft,Vt){var xr=Ve(ft);if(typeof xr!="function")throw Error(i(150));if(ft=xr.call(ft),ft==null)throw Error(i(151));for(var Ar=xr=null,Or=Xe,Nr=Xe=0,Co=null,Cn=ft.next();Or!==null&&!Cn.done;Nr++,Cn=ft.next()){Or.index>Nr?(Co=Or,Or=null):Co=Or.sibling;var Vu=Lt(ht,Or,Cn.value,Vt);if(Vu===null){Or===null&&(Or=Co);break}p&&Or&&Vu.alternate===null&&y(ht,Or),Xe=Z(Vu,Xe,Nr),Ar===null?xr=Vu:Ar.sibling=Vu,Ar=Vu,Or=Co}if(Cn.done)return T(ht,Or),Hn&&Gt(ht,Nr),xr;if(Or===null){for(;!Cn.done;Nr++,Cn=ft.next())Cn=$t(ht,Cn.value,Vt),Cn!==null&&(Xe=Z(Cn,Xe,Nr),Ar===null?xr=Cn:Ar.sibling=Cn,Ar=Cn);return Hn&&Gt(ht,Nr),xr}for(Or=A(ht,Or);!Cn.done;Nr++,Cn=ft.next())Cn=lr(Or,ht,Nr,Cn.value,Vt),Cn!==null&&(p&&Cn.alternate!==null&&Or.delete(Cn.key===null?Nr:Cn.key),Xe=Z(Cn,Xe,Nr),Ar===null?xr=Cn:Ar.sibling=Cn,Ar=Cn);return p&&Or.forEach(function(N0){return y(ht,N0)}),Hn&&Gt(ht,Nr),xr}function ki(ht,Xe,ft,Vt){if(typeof ft=="object"&&ft!==null&&ft.type===we&&ft.key===null&&(ft=ft.props.children),typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case oe:e:{for(var xr=ft.key,Ar=Xe;Ar!==null;){if(Ar.key===xr){if(xr=ft.type,xr===we){if(Ar.tag===7){T(ht,Ar.sibling),Xe=U(Ar,ft.props.children),Xe.return=ht,ht=Xe;break e}}else if(Ar.elementType===xr||typeof xr=="object"&&xr!==null&&xr.$$typeof===He&&Ua(xr)===Ar.type){T(ht,Ar.sibling),Xe=U(Ar,ft.props),Xe.ref=Ac(ht,Ar,ft),Xe.return=ht,ht=Xe;break e}T(ht,Ar);break}else y(ht,Ar);Ar=Ar.sibling}ft.type===we?(Xe=Nu(ft.props.children,ht.mode,Vt,ft.key),Xe.return=ht,ht=Xe):(Vt=af(ft.type,ft.key,ft.props,null,ht.mode,Vt),Vt.ref=Ac(ht,Xe,ft),Vt.return=ht,ht=Vt)}return fe(ht);case be:e:{for(Ar=ft.key;Xe!==null;){if(Xe.key===Ar)if(Xe.tag===4&&Xe.stateNode.containerInfo===ft.containerInfo&&Xe.stateNode.implementation===ft.implementation){T(ht,Xe.sibling),Xe=U(Xe,ft.children||[]),Xe.return=ht,ht=Xe;break e}else{T(ht,Xe);break}else y(ht,Xe);Xe=Xe.sibling}Xe=Ty(ft,ht.mode,Vt),Xe.return=ht,ht=Xe}return fe(ht);case He:return Ar=ft._init,ki(ht,Xe,Ar(ft._payload),Vt)}if(Rr(ft))return gr(ht,Xe,ft,Vt);if(Ve(ft))return yr(ht,Xe,ft,Vt);Nh(ht,ft)}return typeof ft=="string"&&ft!==""||typeof ft=="number"?(ft=""+ft,Xe!==null&&Xe.tag===6?(T(ht,Xe.sibling),Xe=U(Xe,ft),Xe.return=ht,ht=Xe):(T(ht,Xe),Xe=Fm(ft,ht.mode,Vt),Xe.return=ht,ht=Xe),fe(ht)):T(ht,Xe)}return ki}var Pu=Sn(!0),Eu=Sn(!1),Rc=Va(null),Dc=null,Bl=null,Ud=null;function Gd(){Ud=Bl=Dc=null}function qd(p){var y=Rc.current;qn(Rc),p._currentValue=y}function as(p,y,T){for(;p!==null;){var A=p.alternate;if((p.childLanes&y)!==y?(p.childLanes|=y,A!==null&&(A.childLanes|=y)):A!==null&&(A.childLanes&y)!==y&&(A.childLanes|=y),p===T)break;p=p.return}}function ua(p,y){Dc=p,Ud=Bl=null,p=p.dependencies,p!==null&&p.firstContext!==null&&((p.lanes&y)!==0&&(Oo=!0),p.firstContext=null)}function Wt(p){var y=p._currentValue;if(Ud!==p)if(p={context:p,memoizedValue:y,next:null},Bl===null){if(Dc===null)throw Error(i(308));Bl=p,Dc.dependencies={lanes:0,firstContext:p}}else Bl=Bl.next=p;return y}var cr=null;function zc(p){cr===null?cr=[p]:cr.push(p)}function Vh(p,y,T,A){var U=y.interleaved;return U===null?(T.next=T,zc(y)):(T.next=U.next,U.next=T),y.interleaved=T,Cs(p,A)}function Cs(p,y){p.lanes|=y;var T=p.alternate;for(T!==null&&(T.lanes|=y),T=p,p=p.return;p!==null;)p.childLanes|=y,T=p.alternate,T!==null&&(T.childLanes|=y),T=p,p=p.return;return T.tag===3?T.stateNode:null}var wi=!1;function Ho(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hd(p,y){p=p.updateQueue,y.updateQueue===p&&(y.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function ha(p,y){return{eventTime:p,lane:y,tag:0,payload:null,callback:null,next:null}}function $l(p,y,T){var A=p.updateQueue;if(A===null)return null;if(A=A.shared,(bn&2)!==0){var U=A.pending;return U===null?y.next=y:(y.next=U.next,U.next=y),A.pending=y,Cs(p,T)}return U=A.interleaved,U===null?(y.next=y,zc(A)):(y.next=U.next,U.next=y),A.interleaved=y,Cs(p,T)}function Wd(p,y,T){if(y=y.updateQueue,y!==null&&(y=y.shared,(T&4194240)!==0)){var A=y.lanes;A&=p.pendingLanes,T|=A,y.lanes=T,$f(p,T)}}function Iu(p,y){var T=p.updateQueue,A=p.alternate;if(A!==null&&(A=A.updateQueue,T===A)){var U=null,Z=null;if(T=T.firstBaseUpdate,T!==null){do{var fe={eventTime:T.eventTime,lane:T.lane,tag:T.tag,payload:T.payload,callback:T.callback,next:null};Z===null?U=Z=fe:Z=Z.next=fe,T=T.next}while(T!==null);Z===null?U=Z=y:Z=Z.next=y}else U=Z=y;T={baseState:A.baseState,firstBaseUpdate:U,lastBaseUpdate:Z,shared:A.shared,effects:A.effects},p.updateQueue=T;return}p=T.lastBaseUpdate,p===null?T.firstBaseUpdate=y:p.next=y,T.lastBaseUpdate=y}function Fn(p,y,T,A){var U=p.updateQueue;wi=!1;var Z=U.firstBaseUpdate,fe=U.lastBaseUpdate,Le=U.shared.pending;if(Le!==null){U.shared.pending=null;var qe=Le,yt=qe.next;qe.next=null,fe===null?Z=yt:fe.next=yt,fe=qe;var Ft=p.alternate;Ft!==null&&(Ft=Ft.updateQueue,Le=Ft.lastBaseUpdate,Le!==fe&&(Le===null?Ft.firstBaseUpdate=yt:Le.next=yt,Ft.lastBaseUpdate=qe))}if(Z!==null){var $t=U.baseState;fe=0,Ft=yt=qe=null,Le=Z;do{var Lt=Le.lane,lr=Le.eventTime;if((A&Lt)===Lt){Ft!==null&&(Ft=Ft.next={eventTime:lr,lane:0,tag:Le.tag,payload:Le.payload,callback:Le.callback,next:null});e:{var gr=p,yr=Le;switch(Lt=y,lr=T,yr.tag){case 1:if(gr=yr.payload,typeof gr=="function"){$t=gr.call(lr,$t,Lt);break e}$t=gr;break e;case 3:gr.flags=gr.flags&-65537|128;case 0:if(gr=yr.payload,Lt=typeof gr=="function"?gr.call(lr,$t,Lt):gr,Lt==null)break e;$t=ut({},$t,Lt);break e;case 2:wi=!0}}Le.callback!==null&&Le.lane!==0&&(p.flags|=64,Lt=U.effects,Lt===null?U.effects=[Le]:Lt.push(Le))}else lr={eventTime:lr,lane:Lt,tag:Le.tag,payload:Le.payload,callback:Le.callback,next:null},Ft===null?(yt=Ft=lr,qe=$t):Ft=Ft.next=lr,fe|=Lt;if(Le=Le.next,Le===null){if(Le=U.shared.pending,Le===null)break;Lt=Le,Le=Lt.next,Lt.next=null,U.lastBaseUpdate=Lt,U.shared.pending=null}}while(!0);if(Ft===null&&(qe=$t),U.baseState=qe,U.firstBaseUpdate=yt,U.lastBaseUpdate=Ft,y=U.shared.interleaved,y!==null){U=y;do fe|=U.lane,U=U.next;while(U!==y)}else Z===null&&(U.shared.lanes=0);Du|=fe,p.lanes=fe,p.memoizedState=$t}}function pi(p,y,T){if(p=y.effects,y.effects=null,p!==null)for(y=0;y<p.length;y++){var A=p[y],U=A.callback;if(U!==null){if(A.callback=null,A=T,typeof U!="function")throw Error(i(191,U));U.call(A)}}}var qs={},Wo=Va(qs),jl=Va(qs),Oc=Va(qs);function da(p){if(p===qs)throw Error(i(174));return p}function Uh(p,y){switch(mn(Oc,y),mn(jl,p),mn(Wo,qs),p=y.nodeType,p){case 9:case 11:y=(y=y.documentElement)?y.namespaceURI:Sr(null,"");break;default:p=p===8?y.parentNode:y,y=p.namespaceURI||null,p=p.tagName,y=Sr(y,p)}qn(Wo),mn(Wo,y)}function fa(){qn(Wo),qn(jl),qn(Oc)}function pa(p){da(Oc.current);var y=da(Wo.current),T=Sr(y,p.type);y!==T&&(mn(jl,p),mn(Wo,T))}function ku(p){jl.current===p&&(qn(Wo),qn(jl))}var Bn=Va(0);function Lc(p){for(var y=p;y!==null;){if(y.tag===13){var T=y.memoizedState;if(T!==null&&(T=T.dehydrated,T===null||T.data==="$?"||T.data==="$!"))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if((y.flags&128)!==0)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var Fc=[];function Gh(){for(var p=0;p<Fc.length;p++)Fc[p]._workInProgressVersionPrimary=null;Fc.length=0}var Ga=de.ReactCurrentDispatcher,qa=de.ReactCurrentBatchConfig,Ha=0,$n=null,ti=null,Fi=null,Bc=!1,Nl=!1,$c=0,w=0;function n(){throw Error(i(321))}function u(p,y){if(y===null)return!1;for(var T=0;T<y.length&&T<p.length;T++)if(!$s(p[T],y[T]))return!1;return!0}function m(p,y,T,A,U,Z){if(Ha=Z,$n=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,Ga.current=p===null||p.memoizedState===null?ri:eo,p=T(A,U),Nl){Z=0;do{if(Nl=!1,$c=0,25<=Z)throw Error(i(301));Z+=1,Fi=ti=null,y.updateQueue=null,Ga.current=Ei,p=T(A,U)}while(Nl)}if(Ga.current=Xn,y=ti!==null&&ti.next!==null,Ha=0,Fi=ti=$n=null,Bc=!1,y)throw Error(i(300));return p}function v(){var p=$c!==0;return $c=0,p}function S(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fi===null?$n.memoizedState=Fi=p:Fi=Fi.next=p,Fi}function M(){if(ti===null){var p=$n.alternate;p=p!==null?p.memoizedState:null}else p=ti.next;var y=Fi===null?$n.memoizedState:Fi.next;if(y!==null)Fi=y,ti=p;else{if(p===null)throw Error(i(310));ti=p,p={memoizedState:ti.memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},Fi===null?$n.memoizedState=Fi=p:Fi=Fi.next=p}return Fi}function k(p,y){return typeof y=="function"?y(p):y}function O(p){var y=M(),T=y.queue;if(T===null)throw Error(i(311));T.lastRenderedReducer=p;var A=ti,U=A.baseQueue,Z=T.pending;if(Z!==null){if(U!==null){var fe=U.next;U.next=Z.next,Z.next=fe}A.baseQueue=U=Z,T.pending=null}if(U!==null){Z=U.next,A=A.baseState;var Le=fe=null,qe=null,yt=Z;do{var Ft=yt.lane;if((Ha&Ft)===Ft)qe!==null&&(qe=qe.next={lane:0,action:yt.action,hasEagerState:yt.hasEagerState,eagerState:yt.eagerState,next:null}),A=yt.hasEagerState?yt.eagerState:p(A,yt.action);else{var $t={lane:Ft,action:yt.action,hasEagerState:yt.hasEagerState,eagerState:yt.eagerState,next:null};qe===null?(Le=qe=$t,fe=A):qe=qe.next=$t,$n.lanes|=Ft,Du|=Ft}yt=yt.next}while(yt!==null&&yt!==Z);qe===null?fe=A:qe.next=Le,$s(A,y.memoizedState)||(Oo=!0),y.memoizedState=A,y.baseState=fe,y.baseQueue=qe,T.lastRenderedState=A}if(p=T.interleaved,p!==null){U=p;do Z=U.lane,$n.lanes|=Z,Du|=Z,U=U.next;while(U!==p)}else U===null&&(T.lanes=0);return[y.memoizedState,T.dispatch]}function N(p){var y=M(),T=y.queue;if(T===null)throw Error(i(311));T.lastRenderedReducer=p;var A=T.dispatch,U=T.pending,Z=y.memoizedState;if(U!==null){T.pending=null;var fe=U=U.next;do Z=p(Z,fe.action),fe=fe.next;while(fe!==U);$s(Z,y.memoizedState)||(Oo=!0),y.memoizedState=Z,y.baseQueue===null&&(y.baseState=Z),T.lastRenderedState=Z}return[Z,A]}function H(){}function J(p,y){var T=$n,A=M(),U=y(),Z=!$s(A.memoizedState,U);if(Z&&(A.memoizedState=U,Oo=!0),A=A.queue,Re(he.bind(null,T,A,p),[p]),A.getSnapshot!==y||Z||Fi!==null&&Fi.memoizedState.tag&1){if(T.flags|=2048,Me(9,ne.bind(null,T,A,U,y),void 0,null),So===null)throw Error(i(349));(Ha&30)!==0||K(T,y,U)}return U}function K(p,y,T){p.flags|=16384,p={getSnapshot:y,value:T},y=$n.updateQueue,y===null?(y={lastEffect:null,stores:null},$n.updateQueue=y,y.stores=[p]):(T=y.stores,T===null?y.stores=[p]:T.push(p))}function ne(p,y,T,A){y.value=T,y.getSnapshot=A,ge(y)&&xe(p)}function he(p,y,T){return T(function(){ge(y)&&xe(p)})}function ge(p){var y=p.getSnapshot;p=p.value;try{var T=y();return!$s(p,T)}catch{return!0}}function xe(p){var y=Cs(p,1);y!==null&&Qa(y,p,1,-1)}function _e(p){var y=S();return typeof p=="function"&&(p=p()),y.memoizedState=y.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:k,lastRenderedState:p},y.queue=p,p=p.dispatch=Wn.bind(null,$n,p),[y.memoizedState,p]}function Me(p,y,T,A){return p={tag:p,create:y,destroy:T,deps:A,next:null},y=$n.updateQueue,y===null?(y={lastEffect:null,stores:null},$n.updateQueue=y,y.lastEffect=p.next=p):(T=y.lastEffect,T===null?y.lastEffect=p.next=p:(A=T.next,T.next=p,p.next=A,y.lastEffect=p)),p}function Oe(){return M().memoizedState}function Pe(p,y,T,A){var U=S();$n.flags|=p,U.memoizedState=Me(1|y,T,void 0,A===void 0?null:A)}function ze(p,y,T,A){var U=M();A=A===void 0?null:A;var Z=void 0;if(ti!==null){var fe=ti.memoizedState;if(Z=fe.destroy,A!==null&&u(A,fe.deps)){U.memoizedState=Me(y,T,Z,A);return}}$n.flags|=p,U.memoizedState=Me(1|y,T,Z,A)}function $e(p,y){return Pe(8390656,8,p,y)}function Re(p,y){return ze(2048,8,p,y)}function We(p,y){return ze(4,2,p,y)}function dt(p,y){return ze(4,4,p,y)}function at(p,y){if(typeof y=="function")return p=p(),y(p),function(){y(null)};if(y!=null)return p=p(),y.current=p,function(){y.current=null}}function lt(p,y,T){return T=T!=null?T.concat([p]):null,ze(4,4,at.bind(null,y,p),T)}function ct(){}function Dt(p,y){var T=M();y=y===void 0?null:y;var A=T.memoizedState;return A!==null&&y!==null&&u(y,A[1])?A[0]:(T.memoizedState=[p,y],p)}function zt(p,y){var T=M();y=y===void 0?null:y;var A=T.memoizedState;return A!==null&&y!==null&&u(y,A[1])?A[0]:(p=p(),T.memoizedState=[p,y],p)}function Pt(p,y,T){return(Ha&21)===0?(p.baseState&&(p.baseState=!1,Oo=!0),p.memoizedState=T):($s(T,y)||(T=dd(),$n.lanes|=T,Du|=T,p.baseState=!0),y)}function Nt(p,y){var T=pn;pn=T!==0&&4>T?T:4,p(!0);var A=qa.transition;qa.transition={};try{p(!1),y()}finally{pn=T,qa.transition=A}}function zr(){return M().memoizedState}function xn(p,y,T){var A=Ps(p);if(T={lane:A,action:T,hasEagerState:!1,eagerState:null,next:null},Pn(p))Zn(y,T);else if(T=Vh(p,y,T,A),T!==null){var U=Yo();Qa(T,p,A,U),En(T,y,A)}}function Wn(p,y,T){var A=Ps(p),U={lane:A,action:T,hasEagerState:!1,eagerState:null,next:null};if(Pn(p))Zn(y,U);else{var Z=p.alternate;if(p.lanes===0&&(Z===null||Z.lanes===0)&&(Z=y.lastRenderedReducer,Z!==null))try{var fe=y.lastRenderedState,Le=Z(fe,T);if(U.hasEagerState=!0,U.eagerState=Le,$s(Le,fe)){var qe=y.interleaved;qe===null?(U.next=U,zc(y)):(U.next=qe.next,qe.next=U),y.interleaved=U;return}}catch{}finally{}T=Vh(p,y,U,A),T!==null&&(U=Yo(),Qa(T,p,A,U),En(T,y,A))}}function Pn(p){var y=p.alternate;return p===$n||y!==null&&y===$n}function Zn(p,y){Nl=Bc=!0;var T=p.pending;T===null?y.next=y:(y.next=T.next,T.next=y),p.pending=y}function En(p,y,T){if((T&4194240)!==0){var A=y.lanes;A&=p.pendingLanes,T|=A,y.lanes=T,$f(p,T)}}var Xn={readContext:Wt,useCallback:n,useContext:n,useEffect:n,useImperativeHandle:n,useInsertionEffect:n,useLayoutEffect:n,useMemo:n,useReducer:n,useRef:n,useState:n,useDebugValue:n,useDeferredValue:n,useTransition:n,useMutableSource:n,useSyncExternalStore:n,useId:n,unstable_isNewReconciler:!1},ri={readContext:Wt,useCallback:function(p,y){return S().memoizedState=[p,y===void 0?null:y],p},useContext:Wt,useEffect:$e,useImperativeHandle:function(p,y,T){return T=T!=null?T.concat([p]):null,Pe(4194308,4,at.bind(null,y,p),T)},useLayoutEffect:function(p,y){return Pe(4194308,4,p,y)},useInsertionEffect:function(p,y){return Pe(4,2,p,y)},useMemo:function(p,y){var T=S();return y=y===void 0?null:y,p=p(),T.memoizedState=[p,y],p},useReducer:function(p,y,T){var A=S();return y=T!==void 0?T(y):y,A.memoizedState=A.baseState=y,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:y},A.queue=p,p=p.dispatch=xn.bind(null,$n,p),[A.memoizedState,p]},useRef:function(p){var y=S();return p={current:p},y.memoizedState=p},useState:_e,useDebugValue:ct,useDeferredValue:function(p){return S().memoizedState=p},useTransition:function(){var p=_e(!1),y=p[0];return p=Nt.bind(null,p[1]),S().memoizedState=p,[y,p]},useMutableSource:function(){},useSyncExternalStore:function(p,y,T){var A=$n,U=S();if(Hn){if(T===void 0)throw Error(i(407));T=T()}else{if(T=y(),So===null)throw Error(i(349));(Ha&30)!==0||K(A,y,T)}U.memoizedState=T;var Z={value:T,getSnapshot:y};return U.queue=Z,$e(he.bind(null,A,Z,p),[p]),A.flags|=2048,Me(9,ne.bind(null,A,Z,T,y),void 0,null),T},useId:function(){var p=S(),y=So.identifierPrefix;if(Hn){var T=Ui,A=qo;T=(A&~(1<<32-Pi(A)-1)).toString(32)+T,y=":"+y+"R"+T,T=$c++,0<T&&(y+="H"+T.toString(32)),y+=":"}else T=w++,y=":"+y+"r"+T.toString(32)+":";return p.memoizedState=y},unstable_isNewReconciler:!1},eo={readContext:Wt,useCallback:Dt,useContext:Wt,useEffect:Re,useImperativeHandle:lt,useInsertionEffect:We,useLayoutEffect:dt,useMemo:zt,useReducer:O,useRef:Oe,useState:function(){return O(k)},useDebugValue:ct,useDeferredValue:function(p){var y=M();return Pt(y,ti.memoizedState,p)},useTransition:function(){var p=O(k)[0],y=M().memoizedState;return[p,y]},useMutableSource:H,useSyncExternalStore:J,useId:zr,unstable_isNewReconciler:!1},Ei={readContext:Wt,useCallback:Dt,useContext:Wt,useEffect:Re,useImperativeHandle:lt,useInsertionEffect:We,useLayoutEffect:dt,useMemo:zt,useReducer:N,useRef:Oe,useState:function(){return N(k)},useDebugValue:ct,useDeferredValue:function(p){var y=M();return ti===null?y.memoizedState=p:Pt(y,ti.memoizedState,p)},useTransition:function(){var p=N(k)[0],y=M().memoizedState;return[p,y]},useMutableSource:H,useSyncExternalStore:J,useId:zr,unstable_isNewReconciler:!1};function yn(p,y){if(p&&p.defaultProps){y=ut({},y),p=p.defaultProps;for(var T in p)y[T]===void 0&&(y[T]=p[T]);return y}return y}function Gi(p,y,T,A){y=p.memoizedState,T=T(A,y),T=T==null?y:ut({},y,T),p.memoizedState=T,p.lanes===0&&(p.updateQueue.baseState=T)}var Hs={isMounted:function(p){return(p=p._reactInternals)?it(p)===p:!1},enqueueSetState:function(p,y,T){p=p._reactInternals;var A=Yo(),U=Ps(p),Z=ha(A,U);Z.payload=y,T!=null&&(Z.callback=T),y=$l(p,Z,U),y!==null&&(Qa(y,p,U,A),Wd(y,p,U))},enqueueReplaceState:function(p,y,T){p=p._reactInternals;var A=Yo(),U=Ps(p),Z=ha(A,U);Z.tag=1,Z.payload=y,T!=null&&(Z.callback=T),y=$l(p,Z,U),y!==null&&(Qa(y,p,U,A),Wd(y,p,U))},enqueueForceUpdate:function(p,y){p=p._reactInternals;var T=Yo(),A=Ps(p),U=ha(T,A);U.tag=2,y!=null&&(U.callback=y),y=$l(p,U,A),y!==null&&(Qa(y,p,A,T),Wd(y,p,A))}};function ma(p,y,T,A,U,Z,fe){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(A,Z,fe):y.prototype&&y.prototype.isPureReactComponent?!bu(T,A)||!bu(U,Z):!0}function Ws(p,y,T){var A=!1,U=la,Z=y.contextType;return typeof Z=="object"&&Z!==null?Z=Wt(Z):(U=xo(y)?Rl:Ji.current,A=y.contextTypes,Z=(A=A!=null)?Dl(p,U):la),y=new y(T,Z),p.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Hs,p.stateNode=y,y._reactInternals=p,A&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=U,p.__reactInternalMemoizedMaskedChildContext=Z),y}function zo(p,y,T,A){p=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(T,A),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(T,A),y.state!==p&&Hs.enqueueReplaceState(y,y.state,null)}function Wa(p,y,T,A){var U=p.stateNode;U.props=T,U.state=p.memoizedState,U.refs={},Ho(p);var Z=y.contextType;typeof Z=="object"&&Z!==null?U.context=Wt(Z):(Z=xo(y)?Rl:Ji.current,U.context=Dl(p,Z)),U.state=p.memoizedState,Z=y.getDerivedStateFromProps,typeof Z=="function"&&(Gi(p,y,Z,T),U.state=p.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(y=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),y!==U.state&&Hs.enqueueReplaceState(U,U.state,null),Fn(p,T,U,A),U.state=p.memoizedState),typeof U.componentDidMount=="function"&&(p.flags|=4194308)}function ga(p,y){try{var T="",A=y;do T+=Ct(A),A=A.return;while(A);var U=T}catch(Z){U=`
Error generating stack: `+Z.message+`
`+Z.stack}return{value:p,source:y,stack:U,digest:null}}function Za(p,y,T){return{value:p,source:null,stack:T??null,digest:y??null}}function Zo(p,y){try{console.error(y.value)}catch(T){setTimeout(function(){throw T})}}var ya=typeof WeakMap=="function"?WeakMap:Map;function Ts(p,y,T){T=ha(-1,T),T.tag=3,T.payload={element:null};var A=y.value;return T.callback=function(){Ou||(Ou=!0,Rm=A),Zo(p,y)},T}function Ms(p,y,T){T=ha(-1,T),T.tag=3;var A=p.type.getDerivedStateFromError;if(typeof A=="function"){var U=y.value;T.payload=function(){return A(U)},T.callback=function(){Zo(p,y)}}var Z=p.stateNode;return Z!==null&&typeof Z.componentDidCatch=="function"&&(T.callback=function(){Zo(p,y),typeof A!="function"&&(Uc===null?Uc=new Set([this]):Uc.add(this));var fe=y.stack;this.componentDidCatch(y.value,{componentStack:fe!==null?fe:""})}),T}function Rn(p,y,T){var A=p.pingCache;if(A===null){A=p.pingCache=new ya;var U=new Set;A.set(y,U)}else U=A.get(y),U===void 0&&(U=new Set,A.set(y,U));U.has(T)||(U.add(T),p=A0.bind(null,p,y,T),y.then(p,p))}function In(p){do{var y;if((y=p.tag===13)&&(y=p.memoizedState,y=y!==null?y.dehydrated!==null:!0),y)return p;p=p.return}while(p!==null);return null}function Bi(p,y,T,A,U){return(p.mode&1)===0?(p===y?p.flags|=65536:(p.flags|=128,T.flags|=131072,T.flags&=-52805,T.tag===1&&(T.alternate===null?T.tag=17:(y=ha(-1,1),y.tag=2,$l(T,y,1))),T.lanes|=1),p):(p.flags|=65536,p.lanes=U,p)}var qi=de.ReactCurrentOwner,Oo=!1;function bo(p,y,T,A){y.child=p===null?Eu(y,null,T,A):Pu(y,p.child,T,A)}function Vl(p,y,T,A,U){T=T.render;var Z=y.ref;return ua(y,U),A=m(p,y,T,A,Z,U),T=v(),p!==null&&!Oo?(y.updateQueue=p.updateQueue,y.flags&=-2053,p.lanes&=~U,Nc(p,y,U)):(Hn&&T&&$h(y),y.flags|=1,bo(p,y,A,U),y.child)}function Mm(p,y,T,A,U){if(p===null){var Z=T.type;return typeof Z=="function"&&!Cy(Z)&&Z.defaultProps===void 0&&T.compare===null&&T.defaultProps===void 0?(y.tag=15,y.type=Z,up(p,y,Z,A,U)):(p=af(T.type,null,A,y,y.mode,U),p.ref=y.ref,p.return=y,y.child=p)}if(Z=p.child,(p.lanes&U)===0){var fe=Z.memoizedProps;if(T=T.compare,T=T!==null?T:bu,T(fe,A)&&p.ref===y.ref)return Nc(p,y,U)}return y.flags|=1,p=qc(Z,A),p.ref=y.ref,p.return=y,y.child=p}function up(p,y,T,A,U){if(p!==null){var Z=p.memoizedProps;if(bu(Z,A)&&p.ref===y.ref)if(Oo=!1,y.pendingProps=A=Z,(p.lanes&U)!==0)(p.flags&131072)!==0&&(Oo=!0);else return y.lanes=p.lanes,Nc(p,y,U)}return va(p,y,T,A,U)}function Zd(p,y,T){var A=y.pendingProps,U=A.children,Z=p!==null?p.memoizedState:null;if(A.mode==="hidden")if((y.mode&1)===0)y.memoizedState={baseLanes:0,cachePool:null,transitions:null},mn(nf,Xs),Xs|=T;else{if((T&1073741824)===0)return p=Z!==null?Z.baseLanes|T:T,y.lanes=y.childLanes=1073741824,y.memoizedState={baseLanes:p,cachePool:null,transitions:null},y.updateQueue=null,mn(nf,Xs),Xs|=p,null;y.memoizedState={baseLanes:0,cachePool:null,transitions:null},A=Z!==null?Z.baseLanes:T,mn(nf,Xs),Xs|=A}else Z!==null?(A=Z.baseLanes|T,y.memoizedState=null):A=T,mn(nf,Xs),Xs|=A;return bo(p,y,U,T),y.child}function Xa(p,y){var T=y.ref;(p===null&&T!==null||p!==null&&p.ref!==T)&&(y.flags|=512,y.flags|=2097152)}function va(p,y,T,A,U){var Z=xo(T)?Rl:Ji.current;return Z=Dl(y,Z),ua(y,U),T=m(p,y,T,A,Z,U),A=v(),p!==null&&!Oo?(y.updateQueue=p.updateQueue,y.flags&=-2053,p.lanes&=~U,Nc(p,y,U)):(Hn&&A&&$h(y),y.flags|=1,bo(p,y,T,U),y.child)}function Ka(p,y,T,A,U){if(xo(T)){var Z=!0;Gs(y)}else Z=!1;if(ua(y,U),y.stateNode===null)jc(p,y),Ws(y,T,A),Wa(y,T,A,U),A=!0;else if(p===null){var fe=y.stateNode,Le=y.memoizedProps;fe.props=Le;var qe=fe.context,yt=T.contextType;typeof yt=="object"&&yt!==null?yt=Wt(yt):(yt=xo(T)?Rl:Ji.current,yt=Dl(y,yt));var Ft=T.getDerivedStateFromProps,$t=typeof Ft=="function"||typeof fe.getSnapshotBeforeUpdate=="function";$t||typeof fe.UNSAFE_componentWillReceiveProps!="function"&&typeof fe.componentWillReceiveProps!="function"||(Le!==A||qe!==yt)&&zo(y,fe,A,yt),wi=!1;var Lt=y.memoizedState;fe.state=Lt,Fn(y,A,fe,U),qe=y.memoizedState,Le!==A||Lt!==qe||Qi.current||wi?(typeof Ft=="function"&&(Gi(y,T,Ft,A),qe=y.memoizedState),(Le=wi||ma(y,T,Le,A,Lt,qe,yt))?($t||typeof fe.UNSAFE_componentWillMount!="function"&&typeof fe.componentWillMount!="function"||(typeof fe.componentWillMount=="function"&&fe.componentWillMount(),typeof fe.UNSAFE_componentWillMount=="function"&&fe.UNSAFE_componentWillMount()),typeof fe.componentDidMount=="function"&&(y.flags|=4194308)):(typeof fe.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=A,y.memoizedState=qe),fe.props=A,fe.state=qe,fe.context=yt,A=Le):(typeof fe.componentDidMount=="function"&&(y.flags|=4194308),A=!1)}else{fe=y.stateNode,Hd(p,y),Le=y.memoizedProps,yt=y.type===y.elementType?Le:yn(y.type,Le),fe.props=yt,$t=y.pendingProps,Lt=fe.context,qe=T.contextType,typeof qe=="object"&&qe!==null?qe=Wt(qe):(qe=xo(T)?Rl:Ji.current,qe=Dl(y,qe));var lr=T.getDerivedStateFromProps;(Ft=typeof lr=="function"||typeof fe.getSnapshotBeforeUpdate=="function")||typeof fe.UNSAFE_componentWillReceiveProps!="function"&&typeof fe.componentWillReceiveProps!="function"||(Le!==$t||Lt!==qe)&&zo(y,fe,A,qe),wi=!1,Lt=y.memoizedState,fe.state=Lt,Fn(y,A,fe,U);var gr=y.memoizedState;Le!==$t||Lt!==gr||Qi.current||wi?(typeof lr=="function"&&(Gi(y,T,lr,A),gr=y.memoizedState),(yt=wi||ma(y,T,yt,A,Lt,gr,qe)||!1)?(Ft||typeof fe.UNSAFE_componentWillUpdate!="function"&&typeof fe.componentWillUpdate!="function"||(typeof fe.componentWillUpdate=="function"&&fe.componentWillUpdate(A,gr,qe),typeof fe.UNSAFE_componentWillUpdate=="function"&&fe.UNSAFE_componentWillUpdate(A,gr,qe)),typeof fe.componentDidUpdate=="function"&&(y.flags|=4),typeof fe.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof fe.componentDidUpdate!="function"||Le===p.memoizedProps&&Lt===p.memoizedState||(y.flags|=4),typeof fe.getSnapshotBeforeUpdate!="function"||Le===p.memoizedProps&&Lt===p.memoizedState||(y.flags|=1024),y.memoizedProps=A,y.memoizedState=gr),fe.props=A,fe.state=gr,fe.context=qe,A=yt):(typeof fe.componentDidUpdate!="function"||Le===p.memoizedProps&&Lt===p.memoizedState||(y.flags|=4),typeof fe.getSnapshotBeforeUpdate!="function"||Le===p.memoizedProps&&Lt===p.memoizedState||(y.flags|=1024),A=!1)}return qh(p,y,T,A,Z,U)}function qh(p,y,T,A,U,Z){Xa(p,y);var fe=(y.flags&128)!==0;if(!A&&!fe)return U&&op(y,T,!1),Nc(p,y,Z);A=y.stateNode,qi.current=y;var Le=fe&&typeof T.getDerivedStateFromError!="function"?null:A.render();return y.flags|=1,p!==null&&fe?(y.child=Pu(y,p.child,null,Z),y.child=Pu(y,null,Le,Z)):bo(p,y,Le,Z),y.memoizedState=A.state,U&&op(y,T,!0),y.child}function Xd(p){var y=p.stateNode;y.pendingContext?Bd(p,y.pendingContext,y.pendingContext!==y.context):y.context&&Bd(p,y.context,!1),Uh(p,y.containerInfo)}function Hh(p,y,T,A,U){return Fl(),Vd(U),y.flags|=256,bo(p,y,T,A),y.child}var Au={dehydrated:null,treeContext:null,retryLane:0};function Kd(p){return{baseLanes:p,cachePool:null,transitions:null}}function cy(p,y,T){var A=y.pendingProps,U=Bn.current,Z=!1,fe=(y.flags&128)!==0,Le;if((Le=fe)||(Le=p!==null&&p.memoizedState===null?!1:(U&2)!==0),Le?(Z=!0,y.flags&=-129):(p===null||p.memoizedState!==null)&&(U|=1),mn(Bn,U&1),p===null)return ap(y),p=y.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?((y.mode&1)===0?y.lanes=1:p.data==="$!"?y.lanes=8:y.lanes=1073741824,null):(fe=A.children,p=A.fallback,Z?(A=y.mode,Z=y.child,fe={mode:"hidden",children:fe},(A&1)===0&&Z!==null?(Z.childLanes=0,Z.pendingProps=fe):Z=xp(fe,A,0,null),p=Nu(p,A,T,null),Z.return=y,p.return=y,Z.sibling=p,y.child=Z,y.child.memoizedState=Kd(T),y.memoizedState=Au,p):uy(y,fe));if(U=p.memoizedState,U!==null&&(Le=U.dehydrated,Le!==null))return w1(p,y,fe,A,Le,U,T);if(Z){Z=A.fallback,fe=y.mode,U=p.child,Le=U.sibling;var qe={mode:"hidden",children:A.children};return(fe&1)===0&&y.child!==U?(A=y.child,A.childLanes=0,A.pendingProps=qe,y.deletions=null):(A=qc(U,qe),A.subtreeFlags=U.subtreeFlags&14680064),Le!==null?Z=qc(Le,Z):(Z=Nu(Z,fe,T,null),Z.flags|=2),Z.return=y,A.return=y,A.sibling=Z,y.child=A,A=Z,Z=y.child,fe=p.child.memoizedState,fe=fe===null?Kd(T):{baseLanes:fe.baseLanes|T,cachePool:null,transitions:fe.transitions},Z.memoizedState=fe,Z.childLanes=p.childLanes&~T,y.memoizedState=Au,A}return Z=p.child,p=Z.sibling,A=qc(Z,{mode:"visible",children:A.children}),(y.mode&1)===0&&(A.lanes=T),A.return=y,A.sibling=null,p!==null&&(T=y.deletions,T===null?(y.deletions=[p],y.flags|=16):T.push(p)),y.child=A,y.memoizedState=null,A}function uy(p,y){return y=xp({mode:"visible",children:y},p.mode,0,null),y.return=p,p.child=y}function Yd(p,y,T,A){return A!==null&&Vd(A),Pu(y,p.child,null,T),p=uy(y,y.pendingProps.children),p.flags|=2,y.memoizedState=null,p}function w1(p,y,T,A,U,Z,fe){if(T)return y.flags&256?(y.flags&=-257,A=Za(Error(i(422))),Yd(p,y,fe,A)):y.memoizedState!==null?(y.child=p.child,y.flags|=128,null):(Z=A.fallback,U=y.mode,A=xp({mode:"visible",children:A.children},U,0,null),Z=Nu(Z,U,fe,null),Z.flags|=2,A.return=y,Z.return=y,A.sibling=Z,y.child=A,(y.mode&1)!==0&&Pu(y,p.child,null,fe),y.child.memoizedState=Kd(fe),y.memoizedState=Au,Z);if((y.mode&1)===0)return Yd(p,y,fe,null);if(U.data==="$!"){if(A=U.nextSibling&&U.nextSibling.dataset,A)var Le=A.dgst;return A=Le,Z=Error(i(419)),A=Za(Z,A,void 0),Yd(p,y,fe,A)}if(Le=(fe&p.childLanes)!==0,Oo||Le){if(A=So,A!==null){switch(fe&-fe){case 4:U=2;break;case 16:U=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:U=32;break;case 536870912:U=268435456;break;default:U=0}U=(U&(A.suspendedLanes|fe))!==0?0:U,U!==0&&U!==Z.retryLane&&(Z.retryLane=U,Cs(p,U),Qa(A,p,U,-1))}return by(),A=Za(Error(i(421))),Yd(p,y,fe,A)}return U.data==="$?"?(y.flags|=128,y.child=p.child,y=P1.bind(null,p),U._reactRetry=y,null):(p=Z.treeContext,fo=Na(U.nextSibling),ho=y,Hn=!0,Do=null,p!==null&&(bs[ws++]=qo,bs[ws++]=Ui,bs[ws++]=Ss,qo=p.id,Ui=p.overflow,Ss=y),y=uy(y,A.children),y.flags|=4096,y)}function Pm(p,y,T){p.lanes|=y;var A=p.alternate;A!==null&&(A.lanes|=y),as(p.return,y,T)}function Em(p,y,T,A,U){var Z=p.memoizedState;Z===null?p.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:A,tail:T,tailMode:U}:(Z.isBackwards=y,Z.rendering=null,Z.renderingStartTime=0,Z.last=A,Z.tail=T,Z.tailMode=U)}function hy(p,y,T){var A=y.pendingProps,U=A.revealOrder,Z=A.tail;if(bo(p,y,A.children,T),A=Bn.current,(A&2)!==0)A=A&1|2,y.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=y.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&Pm(p,T,y);else if(p.tag===19)Pm(p,T,y);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===y)break e;for(;p.sibling===null;){if(p.return===null||p.return===y)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}A&=1}if(mn(Bn,A),(y.mode&1)===0)y.memoizedState=null;else switch(U){case"forwards":for(T=y.child,U=null;T!==null;)p=T.alternate,p!==null&&Lc(p)===null&&(U=T),T=T.sibling;T=U,T===null?(U=y.child,y.child=null):(U=T.sibling,T.sibling=null),Em(y,!1,U,T,Z);break;case"backwards":for(T=null,U=y.child,y.child=null;U!==null;){if(p=U.alternate,p!==null&&Lc(p)===null){y.child=U;break}p=U.sibling,U.sibling=T,T=U,U=p}Em(y,!0,T,null,Z);break;case"together":Em(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function jc(p,y){(y.mode&1)===0&&p!==null&&(p.alternate=null,y.alternate=null,y.flags|=2)}function Nc(p,y,T){if(p!==null&&(y.dependencies=p.dependencies),Du|=y.lanes,(T&y.childLanes)===0)return null;if(p!==null&&y.child!==p.child)throw Error(i(153));if(y.child!==null){for(p=y.child,T=qc(p,p.pendingProps),y.child=T,T.return=y;p.sibling!==null;)p=p.sibling,T=T.sibling=qc(p,p.pendingProps),T.return=y;T.sibling=null}return y.child}function Jd(p,y,T){switch(y.tag){case 3:Xd(y),Fl();break;case 5:pa(y);break;case 1:xo(y.type)&&Gs(y);break;case 4:Uh(y,y.stateNode.containerInfo);break;case 10:var A=y.type._context,U=y.memoizedProps.value;mn(Rc,A._currentValue),A._currentValue=U;break;case 13:if(A=y.memoizedState,A!==null)return A.dehydrated!==null?(mn(Bn,Bn.current&1),y.flags|=128,null):(T&y.child.childLanes)!==0?cy(p,y,T):(mn(Bn,Bn.current&1),p=Nc(p,y,T),p!==null?p.sibling:null);mn(Bn,Bn.current&1);break;case 19:if(A=(T&y.childLanes)!==0,(p.flags&128)!==0){if(A)return hy(p,y,T);y.flags|=128}if(U=y.memoizedState,U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),mn(Bn,Bn.current),A)break;return null;case 22:case 23:return y.lanes=0,Zd(p,y,T)}return Nc(p,y,T)}var hp,Qd,y0,v0;hp=function(p,y){for(var T=y.child;T!==null;){if(T.tag===5||T.tag===6)p.appendChild(T.stateNode);else if(T.tag!==4&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===y)break;for(;T.sibling===null;){if(T.return===null||T.return===y)return;T=T.return}T.sibling.return=T.return,T=T.sibling}},Qd=function(){},y0=function(p,y,T,A){var U=p.memoizedProps;if(U!==A){p=y.stateNode,da(Wo.current);var Z=null;switch(T){case"input":U=Tr(p,U),A=Tr(p,A),Z=[];break;case"select":U=ut({},U,{value:void 0}),A=ut({},A,{value:void 0}),Z=[];break;case"textarea":U=Wr(p,U),A=Wr(p,A),Z=[];break;default:typeof U.onClick!="function"&&typeof A.onClick=="function"&&(p.onclick=Dd)}Be(T,A);var fe;T=null;for(yt in U)if(!A.hasOwnProperty(yt)&&U.hasOwnProperty(yt)&&U[yt]!=null)if(yt==="style"){var Le=U[yt];for(fe in Le)Le.hasOwnProperty(fe)&&(T||(T={}),T[fe]="")}else yt!=="dangerouslySetInnerHTML"&&yt!=="children"&&yt!=="suppressContentEditableWarning"&&yt!=="suppressHydrationWarning"&&yt!=="autoFocus"&&(c.hasOwnProperty(yt)?Z||(Z=[]):(Z=Z||[]).push(yt,null));for(yt in A){var qe=A[yt];if(Le=U?.[yt],A.hasOwnProperty(yt)&&qe!==Le&&(qe!=null||Le!=null))if(yt==="style")if(Le){for(fe in Le)!Le.hasOwnProperty(fe)||qe&&qe.hasOwnProperty(fe)||(T||(T={}),T[fe]="");for(fe in qe)qe.hasOwnProperty(fe)&&Le[fe]!==qe[fe]&&(T||(T={}),T[fe]=qe[fe])}else T||(Z||(Z=[]),Z.push(yt,T)),T=qe;else yt==="dangerouslySetInnerHTML"?(qe=qe?qe.__html:void 0,Le=Le?Le.__html:void 0,qe!=null&&Le!==qe&&(Z=Z||[]).push(yt,qe)):yt==="children"?typeof qe!="string"&&typeof qe!="number"||(Z=Z||[]).push(yt,""+qe):yt!=="suppressContentEditableWarning"&&yt!=="suppressHydrationWarning"&&(c.hasOwnProperty(yt)?(qe!=null&&yt==="onScroll"&&ei("scroll",p),Z||Le===qe||(Z=[])):(Z=Z||[]).push(yt,qe))}T&&(Z=Z||[]).push("style",T);var yt=Z;(y.updateQueue=yt)&&(y.flags|=4)}},v0=function(p,y,T,A){T!==A&&(y.flags|=4)};function dp(p,y){if(!Hn)switch(p.tailMode){case"hidden":y=p.tail;for(var T=null;y!==null;)y.alternate!==null&&(T=y),y=y.sibling;T===null?p.tail=null:T.sibling=null;break;case"collapsed":T=p.tail;for(var A=null;T!==null;)T.alternate!==null&&(A=T),T=T.sibling;A===null?y||p.tail===null?p.tail=null:p.tail.sibling=null:A.sibling=null}}function Xo(p){var y=p.alternate!==null&&p.alternate.child===p.child,T=0,A=0;if(y)for(var U=p.child;U!==null;)T|=U.lanes|U.childLanes,A|=U.subtreeFlags&14680064,A|=U.flags&14680064,U.return=p,U=U.sibling;else for(U=p.child;U!==null;)T|=U.lanes|U.childLanes,A|=U.subtreeFlags,A|=U.flags,U.return=p,U=U.sibling;return p.subtreeFlags|=A,p.childLanes=T,y}function S1(p,y,T){var A=y.pendingProps;switch(Ol(y),y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xo(y),null;case 1:return xo(y.type)&&Lh(),Xo(y),null;case 3:return A=y.stateNode,fa(),qn(Qi),qn(Ji),Gh(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(p===null||p.child===null)&&(kc(y)?y.flags|=4:p===null||p.memoizedState.isDehydrated&&(y.flags&256)===0||(y.flags|=1024,Do!==null&&(zm(Do),Do=null))),Qd(p,y),Xo(y),null;case 5:ku(y);var U=da(Oc.current);if(T=y.type,p!==null&&y.stateNode!=null)y0(p,y,T,A,U),p.ref!==y.ref&&(y.flags|=512,y.flags|=2097152);else{if(!A){if(y.stateNode===null)throw Error(i(166));return Xo(y),null}if(p=da(Wo.current),kc(y)){A=y.stateNode,T=y.type;var Z=y.memoizedProps;switch(A[_o]=y,A[uo]=Z,p=(y.mode&1)!==0,T){case"dialog":ei("cancel",A),ei("close",A);break;case"iframe":case"object":case"embed":ei("load",A);break;case"video":case"audio":for(U=0;U<Rh.length;U++)ei(Rh[U],A);break;case"source":ei("error",A);break;case"img":case"image":case"link":ei("error",A),ei("load",A);break;case"details":ei("toggle",A);break;case"input":or(A,Z),ei("invalid",A);break;case"select":A._wrapperState={wasMultiple:!!Z.multiple},ei("invalid",A);break;case"textarea":sn(A,Z),ei("invalid",A)}Be(T,Z),U=null;for(var fe in Z)if(Z.hasOwnProperty(fe)){var Le=Z[fe];fe==="children"?typeof Le=="string"?A.textContent!==Le&&(Z.suppressHydrationWarning!==!0&&Tu(A.textContent,Le,p),U=["children",Le]):typeof Le=="number"&&A.textContent!==""+Le&&(Z.suppressHydrationWarning!==!0&&Tu(A.textContent,Le,p),U=["children",""+Le]):c.hasOwnProperty(fe)&&Le!=null&&fe==="onScroll"&&ei("scroll",A)}switch(T){case"input":dr(A),Xt(A,Z,!0);break;case"textarea":dr(A),Tn(A);break;case"select":case"option":break;default:typeof Z.onClick=="function"&&(A.onclick=Dd)}A=U,y.updateQueue=A,A!==null&&(y.flags|=4)}else{fe=U.nodeType===9?U:U.ownerDocument,p==="http://www.w3.org/1999/xhtml"&&(p=vn(T)),p==="http://www.w3.org/1999/xhtml"?T==="script"?(p=fe.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild)):typeof A.is=="string"?p=fe.createElement(T,{is:A.is}):(p=fe.createElement(T),T==="select"&&(fe=p,A.multiple?fe.multiple=!0:A.size&&(fe.size=A.size))):p=fe.createElementNS(p,T),p[_o]=y,p[uo]=A,hp(p,y,!1,!1),y.stateNode=p;e:{switch(fe=Je(T,A),T){case"dialog":ei("cancel",p),ei("close",p),U=A;break;case"iframe":case"object":case"embed":ei("load",p),U=A;break;case"video":case"audio":for(U=0;U<Rh.length;U++)ei(Rh[U],p);U=A;break;case"source":ei("error",p),U=A;break;case"img":case"image":case"link":ei("error",p),ei("load",p),U=A;break;case"details":ei("toggle",p),U=A;break;case"input":or(p,A),U=Tr(p,A),ei("invalid",p);break;case"option":U=A;break;case"select":p._wrapperState={wasMultiple:!!A.multiple},U=ut({},A,{value:void 0}),ei("invalid",p);break;case"textarea":sn(p,A),U=Wr(p,A),ei("invalid",p);break;default:U=A}Be(T,U),Le=U;for(Z in Le)if(Le.hasOwnProperty(Z)){var qe=Le[Z];Z==="style"?ce(p,qe):Z==="dangerouslySetInnerHTML"?(qe=qe?qe.__html:void 0,qe!=null&&ur(p,qe)):Z==="children"?typeof qe=="string"?(T!=="textarea"||qe!=="")&&Zr(p,qe):typeof qe=="number"&&Zr(p,""+qe):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(c.hasOwnProperty(Z)?qe!=null&&Z==="onScroll"&&ei("scroll",p):qe!=null&&Q(p,Z,qe,fe))}switch(T){case"input":dr(p),Xt(p,A,!1);break;case"textarea":dr(p),Tn(p);break;case"option":A.value!=null&&p.setAttribute("value",""+nt(A.value));break;case"select":p.multiple=!!A.multiple,Z=A.value,Z!=null?Br(p,!!A.multiple,Z,!1):A.defaultValue!=null&&Br(p,!!A.multiple,A.defaultValue,!0);break;default:typeof U.onClick=="function"&&(p.onclick=Dd)}switch(T){case"button":case"input":case"select":case"textarea":A=!!A.autoFocus;break e;case"img":A=!0;break e;default:A=!1}}A&&(y.flags|=4)}y.ref!==null&&(y.flags|=512,y.flags|=2097152)}return Xo(y),null;case 6:if(p&&y.stateNode!=null)v0(p,y,p.memoizedProps,A);else{if(typeof A!="string"&&y.stateNode===null)throw Error(i(166));if(T=da(Oc.current),da(Wo.current),kc(y)){if(A=y.stateNode,T=y.memoizedProps,A[_o]=y,(Z=A.nodeValue!==T)&&(p=ho,p!==null))switch(p.tag){case 3:Tu(A.nodeValue,T,(p.mode&1)!==0);break;case 5:p.memoizedProps.suppressHydrationWarning!==!0&&Tu(A.nodeValue,T,(p.mode&1)!==0)}Z&&(y.flags|=4)}else A=(T.nodeType===9?T:T.ownerDocument).createTextNode(A),A[_o]=y,y.stateNode=A}return Xo(y),null;case 13:if(qn(Bn),A=y.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(Hn&&fo!==null&&(y.mode&1)!==0&&(y.flags&128)===0)lp(),Fl(),y.flags|=98560,Z=!1;else if(Z=kc(y),A!==null&&A.dehydrated!==null){if(p===null){if(!Z)throw Error(i(318));if(Z=y.memoizedState,Z=Z!==null?Z.dehydrated:null,!Z)throw Error(i(317));Z[_o]=y}else Fl(),(y.flags&128)===0&&(y.memoizedState=null),y.flags|=4;Xo(y),Z=!1}else Do!==null&&(zm(Do),Do=null),Z=!0;if(!Z)return y.flags&65536?y:null}return(y.flags&128)!==0?(y.lanes=T,y):(A=A!==null,A!==(p!==null&&p.memoizedState!==null)&&A&&(y.child.flags|=8192,(y.mode&1)!==0&&(p===null||(Bn.current&1)!==0?Hi===0&&(Hi=3):by())),y.updateQueue!==null&&(y.flags|=4),Xo(y),null);case 4:return fa(),Qd(p,y),p===null&&Sc(y.stateNode.containerInfo),Xo(y),null;case 10:return qd(y.type._context),Xo(y),null;case 17:return xo(y.type)&&Lh(),Xo(y),null;case 19:if(qn(Bn),Z=y.memoizedState,Z===null)return Xo(y),null;if(A=(y.flags&128)!==0,fe=Z.rendering,fe===null)if(A)dp(Z,!1);else{if(Hi!==0||p!==null&&(p.flags&128)!==0)for(p=y.child;p!==null;){if(fe=Lc(p),fe!==null){for(y.flags|=128,dp(Z,!1),A=fe.updateQueue,A!==null&&(y.updateQueue=A,y.flags|=4),y.subtreeFlags=0,A=T,T=y.child;T!==null;)Z=T,p=A,Z.flags&=14680066,fe=Z.alternate,fe===null?(Z.childLanes=0,Z.lanes=p,Z.child=null,Z.subtreeFlags=0,Z.memoizedProps=null,Z.memoizedState=null,Z.updateQueue=null,Z.dependencies=null,Z.stateNode=null):(Z.childLanes=fe.childLanes,Z.lanes=fe.lanes,Z.child=fe.child,Z.subtreeFlags=0,Z.deletions=null,Z.memoizedProps=fe.memoizedProps,Z.memoizedState=fe.memoizedState,Z.updateQueue=fe.updateQueue,Z.type=fe.type,p=fe.dependencies,Z.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),T=T.sibling;return mn(Bn,Bn.current&1|2),y.child}p=p.sibling}Z.tail!==null&&Un()>Vc&&(y.flags|=128,A=!0,dp(Z,!1),y.lanes=4194304)}else{if(!A)if(p=Lc(fe),p!==null){if(y.flags|=128,A=!0,T=p.updateQueue,T!==null&&(y.updateQueue=T,y.flags|=4),dp(Z,!0),Z.tail===null&&Z.tailMode==="hidden"&&!fe.alternate&&!Hn)return Xo(y),null}else 2*Un()-Z.renderingStartTime>Vc&&T!==1073741824&&(y.flags|=128,A=!0,dp(Z,!1),y.lanes=4194304);Z.isBackwards?(fe.sibling=y.child,y.child=fe):(T=Z.last,T!==null?T.sibling=fe:y.child=fe,Z.last=fe)}return Z.tail!==null?(y=Z.tail,Z.rendering=y,Z.tail=y.sibling,Z.renderingStartTime=Un(),y.sibling=null,T=Bn.current,mn(Bn,A?T&1|2:T&1),y):(Xo(y),null);case 22:case 23:return _y(),A=y.memoizedState!==null,p!==null&&p.memoizedState!==null!==A&&(y.flags|=8192),A&&(y.mode&1)!==0?(Xs&1073741824)!==0&&(Xo(y),y.subtreeFlags&6&&(y.flags|=8192)):Xo(y),null;case 24:return null;case 25:return null}throw Error(i(156,y.tag))}function _0(p,y){switch(Ol(y),y.tag){case 1:return xo(y.type)&&Lh(),p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 3:return fa(),qn(Qi),qn(Ji),Gh(),p=y.flags,(p&65536)!==0&&(p&128)===0?(y.flags=p&-65537|128,y):null;case 5:return ku(y),null;case 13:if(qn(Bn),p=y.memoizedState,p!==null&&p.dehydrated!==null){if(y.alternate===null)throw Error(i(340));Fl()}return p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 19:return qn(Bn),null;case 4:return fa(),null;case 10:return qd(y.type._context),null;case 22:case 23:return _y(),null;case 24:return null;default:return null}}var ef=!1,Lo=!1,x0=typeof WeakSet=="function"?WeakSet:Set,hr=null;function tf(p,y){var T=p.ref;if(T!==null)if(typeof T=="function")try{T(null)}catch(A){Ii(p,y,A)}else T.current=null}function Im(p,y,T){try{T()}catch(A){Ii(p,y,A)}}var dy=!1;function C1(p,y){if(Mc=hc,p=wm(),un(p)){if("selectionStart"in p)var T={start:p.selectionStart,end:p.selectionEnd};else e:{T=(T=p.ownerDocument)&&T.defaultView||window;var A=T.getSelection&&T.getSelection();if(A&&A.rangeCount!==0){T=A.anchorNode;var U=A.anchorOffset,Z=A.focusNode;A=A.focusOffset;try{T.nodeType,Z.nodeType}catch{T=null;break e}var fe=0,Le=-1,qe=-1,yt=0,Ft=0,$t=p,Lt=null;t:for(;;){for(var lr;$t!==T||U!==0&&$t.nodeType!==3||(Le=fe+U),$t!==Z||A!==0&&$t.nodeType!==3||(qe=fe+A),$t.nodeType===3&&(fe+=$t.nodeValue.length),(lr=$t.firstChild)!==null;)Lt=$t,$t=lr;for(;;){if($t===p)break t;if(Lt===T&&++yt===U&&(Le=fe),Lt===Z&&++Ft===A&&(qe=fe),(lr=$t.nextSibling)!==null)break;$t=Lt,Lt=$t.parentNode}$t=lr}T=Le===-1||qe===-1?null:{start:Le,end:qe}}else T=null}T=T||{start:0,end:0}}else T=null;for(rp={focusedElem:p,selectionRange:T},hc=!1,hr=y;hr!==null;)if(y=hr,p=y.child,(y.subtreeFlags&1028)!==0&&p!==null)p.return=y,hr=p;else for(;hr!==null;){y=hr;try{var gr=y.alternate;if((y.flags&1024)!==0)switch(y.tag){case 0:case 11:case 15:break;case 1:if(gr!==null){var yr=gr.memoizedProps,ki=gr.memoizedState,ht=y.stateNode,Xe=ht.getSnapshotBeforeUpdate(y.elementType===y.type?yr:yn(y.type,yr),ki);ht.__reactInternalSnapshotBeforeUpdate=Xe}break;case 3:var ft=y.stateNode.containerInfo;ft.nodeType===1?ft.textContent="":ft.nodeType===9&&ft.documentElement&&ft.removeChild(ft.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(Vt){Ii(y,y.return,Vt)}if(p=y.sibling,p!==null){p.return=y.return,hr=p;break}hr=y.return}return gr=dy,dy=!1,gr}function Wh(p,y,T){var A=y.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var U=A=A.next;do{if((U.tag&p)===p){var Z=U.destroy;U.destroy=void 0,Z!==void 0&&Im(y,T,Z)}U=U.next}while(U!==A)}}function fp(p,y){if(y=y.updateQueue,y=y!==null?y.lastEffect:null,y!==null){var T=y=y.next;do{if((T.tag&p)===p){var A=T.create;T.destroy=A()}T=T.next}while(T!==y)}}function pp(p){var y=p.ref;if(y!==null){var T=p.stateNode;switch(p.tag){case 5:p=T;break;default:p=T}typeof y=="function"?y(p):y.current=p}}function rf(p){var y=p.alternate;y!==null&&(p.alternate=null,rf(y)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(y=p.stateNode,y!==null&&(delete y[_o],delete y[uo],delete y[Ec],delete y[Ld],delete y[Al])),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function Ko(p){return p.tag===5||p.tag===3||p.tag===4}function fy(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||Ko(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function mp(p,y,T){var A=p.tag;if(A===5||A===6)p=p.stateNode,y?T.nodeType===8?T.parentNode.insertBefore(p,y):T.insertBefore(p,y):(T.nodeType===8?(y=T.parentNode,y.insertBefore(p,T)):(y=T,y.appendChild(p)),T=T._reactRootContainer,T!=null||y.onclick!==null||(y.onclick=Dd));else if(A!==4&&(p=p.child,p!==null))for(mp(p,y,T),p=p.sibling;p!==null;)mp(p,y,T),p=p.sibling}function py(p,y,T){var A=p.tag;if(A===5||A===6)p=p.stateNode,y?T.insertBefore(p,y):T.appendChild(p);else if(A!==4&&(p=p.child,p!==null))for(py(p,y,T),p=p.sibling;p!==null;)py(p,y,T),p=p.sibling}var wo=null,Ya=!1;function Ru(p,y,T){for(T=T.child;T!==null;)my(p,y,T),T=T.sibling}function my(p,y,T){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(Mi,T)}catch{}switch(T.tag){case 5:Lo||tf(T,y);case 6:var A=wo,U=Ya;wo=null,Ru(p,y,T),wo=A,Ya=U,wo!==null&&(Ya?(p=wo,T=T.stateNode,p.nodeType===8?p.parentNode.removeChild(T):p.removeChild(T)):wo.removeChild(T.stateNode));break;case 18:wo!==null&&(Ya?(p=wo,T=T.stateNode,p.nodeType===8?Mu(p.parentNode,T):p.nodeType===1&&Mu(p,T),Os(p)):Mu(wo,T.stateNode));break;case 4:A=wo,U=Ya,wo=T.stateNode.containerInfo,Ya=!0,Ru(p,y,T),wo=A,Ya=U;break;case 0:case 11:case 14:case 15:if(!Lo&&(A=T.updateQueue,A!==null&&(A=A.lastEffect,A!==null))){U=A=A.next;do{var Z=U,fe=Z.destroy;Z=Z.tag,fe!==void 0&&((Z&2)!==0||(Z&4)!==0)&&Im(T,y,fe),U=U.next}while(U!==A)}Ru(p,y,T);break;case 1:if(!Lo&&(tf(T,y),A=T.stateNode,typeof A.componentWillUnmount=="function"))try{A.props=T.memoizedProps,A.state=T.memoizedState,A.componentWillUnmount()}catch(Le){Ii(T,y,Le)}Ru(p,y,T);break;case 21:Ru(p,y,T);break;case 22:T.mode&1?(Lo=(A=Lo)||T.memoizedState!==null,Ru(p,y,T),Lo=A):Ru(p,y,T);break;default:Ru(p,y,T)}}function b0(p){var y=p.updateQueue;if(y!==null){p.updateQueue=null;var T=p.stateNode;T===null&&(T=p.stateNode=new x0),y.forEach(function(A){var U=_p.bind(null,p,A);T.has(A)||(T.add(A),A.then(U,U))})}}function Zs(p,y){var T=y.deletions;if(T!==null)for(var A=0;A<T.length;A++){var U=T[A];try{var Z=p,fe=y,Le=fe;e:for(;Le!==null;){switch(Le.tag){case 5:wo=Le.stateNode,Ya=!1;break e;case 3:wo=Le.stateNode.containerInfo,Ya=!0;break e;case 4:wo=Le.stateNode.containerInfo,Ya=!0;break e}Le=Le.return}if(wo===null)throw Error(i(160));my(Z,fe,U),wo=null,Ya=!1;var qe=U.alternate;qe!==null&&(qe.return=null),U.return=null}catch(yt){Ii(U,y,yt)}}if(y.subtreeFlags&12854)for(y=y.child;y!==null;)gy(y,p),y=y.sibling}function gy(p,y){var T=p.alternate,A=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(Zs(y,p),Ja(p),A&4){try{Wh(3,p,p.return),fp(3,p)}catch(yr){Ii(p,p.return,yr)}try{Wh(5,p,p.return)}catch(yr){Ii(p,p.return,yr)}}break;case 1:Zs(y,p),Ja(p),A&512&&T!==null&&tf(T,T.return);break;case 5:if(Zs(y,p),Ja(p),A&512&&T!==null&&tf(T,T.return),p.flags&32){var U=p.stateNode;try{Zr(U,"")}catch(yr){Ii(p,p.return,yr)}}if(A&4&&(U=p.stateNode,U!=null)){var Z=p.memoizedProps,fe=T!==null?T.memoizedProps:Z,Le=p.type,qe=p.updateQueue;if(p.updateQueue=null,qe!==null)try{Le==="input"&&Z.type==="radio"&&Z.name!=null&&qt(U,Z),Je(Le,fe);var yt=Je(Le,Z);for(fe=0;fe<qe.length;fe+=2){var Ft=qe[fe],$t=qe[fe+1];Ft==="style"?ce(U,$t):Ft==="dangerouslySetInnerHTML"?ur(U,$t):Ft==="children"?Zr(U,$t):Q(U,Ft,$t,yt)}switch(Le){case"input":pr(U,Z);break;case"textarea":On(U,Z);break;case"select":var Lt=U._wrapperState.wasMultiple;U._wrapperState.wasMultiple=!!Z.multiple;var lr=Z.value;lr!=null?Br(U,!!Z.multiple,lr,!1):Lt!==!!Z.multiple&&(Z.defaultValue!=null?Br(U,!!Z.multiple,Z.defaultValue,!0):Br(U,!!Z.multiple,Z.multiple?[]:"",!1))}U[uo]=Z}catch(yr){Ii(p,p.return,yr)}}break;case 6:if(Zs(y,p),Ja(p),A&4){if(p.stateNode===null)throw Error(i(162));U=p.stateNode,Z=p.memoizedProps;try{U.nodeValue=Z}catch(yr){Ii(p,p.return,yr)}}break;case 3:if(Zs(y,p),Ja(p),A&4&&T!==null&&T.memoizedState.isDehydrated)try{Os(y.containerInfo)}catch(yr){Ii(p,p.return,yr)}break;case 4:Zs(y,p),Ja(p);break;case 13:Zs(y,p),Ja(p),U=p.child,U.flags&8192&&(Z=U.memoizedState!==null,U.stateNode.isHidden=Z,!Z||U.alternate!==null&&U.alternate.memoizedState!==null||(Am=Un())),A&4&&b0(p);break;case 22:if(Ft=T!==null&&T.memoizedState!==null,p.mode&1?(Lo=(yt=Lo)||Ft,Zs(y,p),Lo=yt):Zs(y,p),Ja(p),A&8192){if(yt=p.memoizedState!==null,(p.stateNode.isHidden=yt)&&!Ft&&(p.mode&1)!==0)for(hr=p,Ft=p.child;Ft!==null;){for($t=hr=Ft;hr!==null;){switch(Lt=hr,lr=Lt.child,Lt.tag){case 0:case 11:case 14:case 15:Wh(4,Lt,Lt.return);break;case 1:tf(Lt,Lt.return);var gr=Lt.stateNode;if(typeof gr.componentWillUnmount=="function"){A=Lt,T=Lt.return;try{y=A,gr.props=y.memoizedProps,gr.state=y.memoizedState,gr.componentWillUnmount()}catch(yr){Ii(A,T,yr)}}break;case 5:tf(Lt,Lt.return);break;case 22:if(Lt.memoizedState!==null){gp($t);continue}}lr!==null?(lr.return=Lt,hr=lr):gp($t)}Ft=Ft.sibling}e:for(Ft=null,$t=p;;){if($t.tag===5){if(Ft===null){Ft=$t;try{U=$t.stateNode,yt?(Z=U.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none"):(Le=$t.stateNode,qe=$t.memoizedProps.style,fe=qe!=null&&qe.hasOwnProperty("display")?qe.display:null,Le.style.display=ie("display",fe))}catch(yr){Ii(p,p.return,yr)}}}else if($t.tag===6){if(Ft===null)try{$t.stateNode.nodeValue=yt?"":$t.memoizedProps}catch(yr){Ii(p,p.return,yr)}}else if(($t.tag!==22&&$t.tag!==23||$t.memoizedState===null||$t===p)&&$t.child!==null){$t.child.return=$t,$t=$t.child;continue}if($t===p)break e;for(;$t.sibling===null;){if($t.return===null||$t.return===p)break e;Ft===$t&&(Ft=null),$t=$t.return}Ft===$t&&(Ft=null),$t.sibling.return=$t.return,$t=$t.sibling}}break;case 19:Zs(y,p),Ja(p),A&4&&b0(p);break;case 21:break;default:Zs(y,p),Ja(p)}}function Ja(p){var y=p.flags;if(y&2){try{e:{for(var T=p.return;T!==null;){if(Ko(T)){var A=T;break e}T=T.return}throw Error(i(160))}switch(A.tag){case 5:var U=A.stateNode;A.flags&32&&(Zr(U,""),A.flags&=-33);var Z=fy(p);py(p,Z,U);break;case 3:case 4:var fe=A.stateNode.containerInfo,Le=fy(p);mp(p,Le,fe);break;default:throw Error(i(161))}}catch(qe){Ii(p,p.return,qe)}p.flags&=-3}y&4096&&(p.flags&=-4097)}function T1(p,y,T){hr=p,w0(p)}function w0(p,y,T){for(var A=(p.mode&1)!==0;hr!==null;){var U=hr,Z=U.child;if(U.tag===22&&A){var fe=U.memoizedState!==null||ef;if(!fe){var Le=U.alternate,qe=Le!==null&&Le.memoizedState!==null||Lo;Le=ef;var yt=Lo;if(ef=fe,(Lo=qe)&&!yt)for(hr=U;hr!==null;)fe=hr,qe=fe.child,fe.tag===22&&fe.memoizedState!==null?km(U):qe!==null?(qe.return=fe,hr=qe):km(U);for(;Z!==null;)hr=Z,w0(Z),Z=Z.sibling;hr=U,ef=Le,Lo=yt}S0(p)}else(U.subtreeFlags&8772)!==0&&Z!==null?(Z.return=U,hr=Z):S0(p)}}function S0(p){for(;hr!==null;){var y=hr;if((y.flags&8772)!==0){var T=y.alternate;try{if((y.flags&8772)!==0)switch(y.tag){case 0:case 11:case 15:Lo||fp(5,y);break;case 1:var A=y.stateNode;if(y.flags&4&&!Lo)if(T===null)A.componentDidMount();else{var U=y.elementType===y.type?T.memoizedProps:yn(y.type,T.memoizedProps);A.componentDidUpdate(U,T.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var Z=y.updateQueue;Z!==null&&pi(y,Z,A);break;case 3:var fe=y.updateQueue;if(fe!==null){if(T=null,y.child!==null)switch(y.child.tag){case 5:T=y.child.stateNode;break;case 1:T=y.child.stateNode}pi(y,fe,T)}break;case 5:var Le=y.stateNode;if(T===null&&y.flags&4){T=Le;var qe=y.memoizedProps;switch(y.type){case"button":case"input":case"select":case"textarea":qe.autoFocus&&T.focus();break;case"img":qe.src&&(T.src=qe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(y.memoizedState===null){var yt=y.alternate;if(yt!==null){var Ft=yt.memoizedState;if(Ft!==null){var $t=Ft.dehydrated;$t!==null&&Os($t)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Lo||y.flags&512&&pp(y)}catch(Lt){Ii(y,y.return,Lt)}}if(y===p){hr=null;break}if(T=y.sibling,T!==null){T.return=y.return,hr=T;break}hr=y.return}}function gp(p){for(;hr!==null;){var y=hr;if(y===p){hr=null;break}var T=y.sibling;if(T!==null){T.return=y.return,hr=T;break}hr=y.return}}function km(p){for(;hr!==null;){var y=hr;try{switch(y.tag){case 0:case 11:case 15:var T=y.return;try{fp(4,y)}catch(qe){Ii(y,T,qe)}break;case 1:var A=y.stateNode;if(typeof A.componentDidMount=="function"){var U=y.return;try{A.componentDidMount()}catch(qe){Ii(y,U,qe)}}var Z=y.return;try{pp(y)}catch(qe){Ii(y,Z,qe)}break;case 5:var fe=y.return;try{pp(y)}catch(qe){Ii(y,fe,qe)}}}catch(qe){Ii(y,y.return,qe)}if(y===p){hr=null;break}var Le=y.sibling;if(Le!==null){Le.return=y.return,hr=Le;break}hr=y.return}}var C0=Math.ceil,Ul=de.ReactCurrentDispatcher,Zh=de.ReactCurrentOwner,_a=de.ReactCurrentBatchConfig,bn=0,So=null,to=null,Fo=0,Xs=0,nf=Va(0),Hi=0,yp=null,Du=0,zu=0,yy=0,ni=null,po=null,Am=0,Vc=1/0,xa=null,Ou=!1,Rm=null,Uc=null,Lu=!1,Gl=null,Gc=0,Fu=0,Bu=null,$u=-1,Dm=0;function Yo(){return(bn&6)!==0?Un():$u!==-1?$u:$u=Un()}function Ps(p){return(p.mode&1)===0?1:(bn&2)!==0&&Fo!==0?Fo&-Fo:cp.transition!==null?(Dm===0&&(Dm=dd()),Dm):(p=pn,p!==0||(p=window.event,p=p===void 0?16:Sl(p.type)),p)}function Qa(p,y,T,A){if(50<Fu)throw Fu=0,Bu=null,Error(i(185));cc(p,T,A),((bn&2)===0||p!==So)&&(p===So&&((bn&2)===0&&(zu|=T),Hi===4&&ju(p,Fo)),ls(p,A),T===1&&bn===0&&(y.mode&1)===0&&(Vc=Un()+500,Go&&xs()))}function ls(p,y){var T=p.callbackNode;fm(p,y);var A=ph(p,p===So?Fo:0);if(A===0)T!==null&&Vi(T),p.callbackNode=null,p.callbackPriority=0;else if(y=A&-A,p.callbackPriority!==y){if(T!=null&&Vi(T),y===1)p.tag===0?ly(M0.bind(null,p)):_s(M0.bind(null,p)),Tm(function(){(bn&6)===0&&xs()}),T=null;else{switch(gh(A)){case 1:T=na;break;case 4:T=Zi;break;case 16:T=an;break;case 536870912:T=Pr;break;default:T=an}T=D0(T,of.bind(null,p))}p.callbackPriority=y,p.callbackNode=T}}function of(p,y){if($u=-1,Dm=0,(bn&6)!==0)throw Error(i(327));var T=p.callbackNode;if(sf()&&p.callbackNode!==T)return null;var A=ph(p,p===So?Fo:0);if(A===0)return null;if((A&30)!==0||(A&p.expiredLanes)!==0||y)y=Om(p,A);else{y=A;var U=bn;bn|=2;var Z=xy();(So!==p||Fo!==y)&&(xa=null,Vc=Un()+500,el(p,y));do try{E0();break}catch(Le){P0(p,Le)}while(!0);Gd(),Ul.current=Z,bn=U,to!==null?y=0:(So=null,Fo=0,y=Hi)}if(y!==0){if(y===2&&(U=uu(p),U!==0&&(A=U,y=vp(p,U))),y===1)throw T=yp,el(p,0),ju(p,A),ls(p,Un()),T;if(y===6)ju(p,A);else{if(U=p.current.alternate,(A&30)===0&&!T0(U)&&(y=Om(p,A),y===2&&(Z=uu(p),Z!==0&&(A=Z,y=vp(p,Z))),y===1))throw T=yp,el(p,0),ju(p,A),ls(p,Un()),T;switch(p.finishedWork=U,p.finishedLanes=A,y){case 0:case 1:throw Error(i(345));case 2:tl(p,po,xa);break;case 3:if(ju(p,A),(A&130023424)===A&&(y=Am+500-Un(),10<y)){if(ph(p,0)!==0)break;if(U=p.suspendedLanes,(U&A)!==A){Yo(),p.pingedLanes|=p.suspendedLanes&U;break}p.timeoutHandle=Pc(tl.bind(null,p,po,xa),y);break}tl(p,po,xa);break;case 4:if(ju(p,A),(A&4194240)===A)break;for(y=p.eventTimes,U=-1;0<A;){var fe=31-Pi(A);Z=1<<fe,fe=y[fe],fe>U&&(U=fe),A&=~Z}if(A=U,A=Un()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*C0(A/1960))-A,10<A){p.timeoutHandle=Pc(tl.bind(null,p,po,xa),A);break}tl(p,po,xa);break;case 5:tl(p,po,xa);break;default:throw Error(i(329))}}}return ls(p,Un()),p.callbackNode===T?of.bind(null,p):null}function vp(p,y){var T=ni;return p.current.memoizedState.isDehydrated&&(el(p,y).flags|=256),p=Om(p,y),p!==2&&(y=po,po=T,y!==null&&zm(y)),p}function zm(p){po===null?po=p:po.push.apply(po,p)}function T0(p){for(var y=p;;){if(y.flags&16384){var T=y.updateQueue;if(T!==null&&(T=T.stores,T!==null))for(var A=0;A<T.length;A++){var U=T[A],Z=U.getSnapshot;U=U.value;try{if(!$s(Z(),U))return!1}catch{return!1}}}if(T=y.child,y.subtreeFlags&16384&&T!==null)T.return=y,y=T;else{if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function ju(p,y){for(y&=~yy,y&=~zu,p.suspendedLanes|=y,p.pingedLanes&=~y,p=p.expirationTimes;0<y;){var T=31-Pi(y),A=1<<T;p[T]=-1,y&=~A}}function M0(p){if((bn&6)!==0)throw Error(i(327));sf();var y=ph(p,0);if((y&1)===0)return ls(p,Un()),null;var T=Om(p,y);if(p.tag!==0&&T===2){var A=uu(p);A!==0&&(y=A,T=vp(p,A))}if(T===1)throw T=yp,el(p,0),ju(p,y),ls(p,Un()),T;if(T===6)throw Error(i(345));return p.finishedWork=p.current.alternate,p.finishedLanes=y,tl(p,po,xa),ls(p,Un()),null}function vy(p,y){var T=bn;bn|=1;try{return p(y)}finally{bn=T,bn===0&&(Vc=Un()+500,Go&&xs())}}function Xh(p){Gl!==null&&Gl.tag===0&&(bn&6)===0&&sf();var y=bn;bn|=1;var T=_a.transition,A=pn;try{if(_a.transition=null,pn=1,p)return p()}finally{pn=A,_a.transition=T,bn=y,(bn&6)===0&&xs()}}function _y(){Xs=nf.current,qn(nf)}function el(p,y){p.finishedWork=null,p.finishedLanes=0;var T=p.timeoutHandle;if(T!==-1&&(p.timeoutHandle=-1,Od(T)),to!==null)for(T=to.return;T!==null;){var A=T;switch(Ol(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&Lh();break;case 3:fa(),qn(Qi),qn(Ji),Gh();break;case 5:ku(A);break;case 4:fa();break;case 13:qn(Bn);break;case 19:qn(Bn);break;case 10:qd(A.type._context);break;case 22:case 23:_y()}T=T.return}if(So=p,to=p=qc(p.current,null),Fo=Xs=y,Hi=0,yp=null,yy=zu=Du=0,po=ni=null,cr!==null){for(y=0;y<cr.length;y++)if(T=cr[y],A=T.interleaved,A!==null){T.interleaved=null;var U=A.next,Z=T.pending;if(Z!==null){var fe=Z.next;Z.next=U,A.next=fe}T.pending=A}cr=null}return p}function P0(p,y){do{var T=to;try{if(Gd(),Ga.current=Xn,Bc){for(var A=$n.memoizedState;A!==null;){var U=A.queue;U!==null&&(U.pending=null),A=A.next}Bc=!1}if(Ha=0,Fi=ti=$n=null,Nl=!1,$c=0,Zh.current=null,T===null||T.return===null){Hi=1,yp=y,to=null;break}e:{var Z=p,fe=T.return,Le=T,qe=y;if(y=Fo,Le.flags|=32768,qe!==null&&typeof qe=="object"&&typeof qe.then=="function"){var yt=qe,Ft=Le,$t=Ft.tag;if((Ft.mode&1)===0&&($t===0||$t===11||$t===15)){var Lt=Ft.alternate;Lt?(Ft.updateQueue=Lt.updateQueue,Ft.memoizedState=Lt.memoizedState,Ft.lanes=Lt.lanes):(Ft.updateQueue=null,Ft.memoizedState=null)}var lr=In(fe);if(lr!==null){lr.flags&=-257,Bi(lr,fe,Le,Z,y),lr.mode&1&&Rn(Z,yt,y),y=lr,qe=yt;var gr=y.updateQueue;if(gr===null){var yr=new Set;yr.add(qe),y.updateQueue=yr}else gr.add(qe);break e}else{if((y&1)===0){Rn(Z,yt,y),by();break e}qe=Error(i(426))}}else if(Hn&&Le.mode&1){var ki=In(fe);if(ki!==null){(ki.flags&65536)===0&&(ki.flags|=256),Bi(ki,fe,Le,Z,y),Vd(ga(qe,Le));break e}}Z=qe=ga(qe,Le),Hi!==4&&(Hi=2),ni===null?ni=[Z]:ni.push(Z),Z=fe;do{switch(Z.tag){case 3:Z.flags|=65536,y&=-y,Z.lanes|=y;var ht=Ts(Z,qe,y);Iu(Z,ht);break e;case 1:Le=qe;var Xe=Z.type,ft=Z.stateNode;if((Z.flags&128)===0&&(typeof Xe.getDerivedStateFromError=="function"||ft!==null&&typeof ft.componentDidCatch=="function"&&(Uc===null||!Uc.has(ft)))){Z.flags|=65536,y&=-y,Z.lanes|=y;var Vt=Ms(Z,Le,y);Iu(Z,Vt);break e}}Z=Z.return}while(Z!==null)}Lm(T)}catch(xr){y=xr,to===T&&T!==null&&(to=T=T.return);continue}break}while(!0)}function xy(){var p=Ul.current;return Ul.current=Xn,p===null?Xn:p}function by(){(Hi===0||Hi===3||Hi===2)&&(Hi=4),So===null||(Du&268435455)===0&&(zu&268435455)===0||ju(So,Fo)}function Om(p,y){var T=bn;bn|=2;var A=xy();(So!==p||Fo!==y)&&(xa=null,el(p,y));do try{M1();break}catch(U){P0(p,U)}while(!0);if(Gd(),bn=T,Ul.current=A,to!==null)throw Error(i(261));return So=null,Fo=0,Hi}function M1(){for(;to!==null;)I0(to)}function E0(){for(;to!==null&&!La();)I0(to)}function I0(p){var y=Sy(p.alternate,p,Xs);p.memoizedProps=p.pendingProps,y===null?Lm(p):to=y,Zh.current=null}function Lm(p){var y=p;do{var T=y.alternate;if(p=y.return,(y.flags&32768)===0){if(T=S1(T,y,Xs),T!==null){to=T;return}}else{if(T=_0(T,y),T!==null){T.flags&=32767,to=T;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{Hi=6,to=null;return}}if(y=y.sibling,y!==null){to=y;return}to=y=p}while(y!==null);Hi===0&&(Hi=5)}function tl(p,y,T){var A=pn,U=_a.transition;try{_a.transition=null,pn=1,wy(p,y,T,A)}finally{_a.transition=U,pn=A}return null}function wy(p,y,T,A){do sf();while(Gl!==null);if((bn&6)!==0)throw Error(i(327));T=p.finishedWork;var U=p.finishedLanes;if(T===null)return null;if(p.finishedWork=null,p.finishedLanes=0,T===p.current)throw Error(i(177));p.callbackNode=null,p.callbackPriority=0;var Z=T.lanes|T.childLanes;if(Bf(p,Z),p===So&&(to=So=null,Fo=0),(T.subtreeFlags&2064)===0&&(T.flags&2064)===0||Lu||(Lu=!0,D0(an,function(){return sf(),null})),Z=(T.flags&15990)!==0,(T.subtreeFlags&15990)!==0||Z){Z=_a.transition,_a.transition=null;var fe=pn;pn=1;var Le=bn;bn|=4,Zh.current=null,C1(p,T),gy(T,p),Cd(rp),hc=!!Mc,rp=Mc=null,p.current=T,T1(T),yl(),bn=Le,pn=fe,_a.transition=Z}else p.current=T;if(Lu&&(Lu=!1,Gl=p,Gc=U),Z=p.pendingLanes,Z===0&&(Uc=null),hi(T.stateNode),ls(p,Un()),y!==null)for(A=p.onRecoverableError,T=0;T<y.length;T++)U=y[T],A(U.value,{componentStack:U.stack,digest:U.digest});if(Ou)throw Ou=!1,p=Rm,Rm=null,p;return(Gc&1)!==0&&p.tag!==0&&sf(),Z=p.pendingLanes,(Z&1)!==0?p===Bu?Fu++:(Fu=0,Bu=p):Fu=0,xs(),null}function sf(){if(Gl!==null){var p=gh(Gc),y=_a.transition,T=pn;try{if(_a.transition=null,pn=16>p?16:p,Gl===null)var A=!1;else{if(p=Gl,Gl=null,Gc=0,(bn&6)!==0)throw Error(i(331));var U=bn;for(bn|=4,hr=p.current;hr!==null;){var Z=hr,fe=Z.child;if((hr.flags&16)!==0){var Le=Z.deletions;if(Le!==null){for(var qe=0;qe<Le.length;qe++){var yt=Le[qe];for(hr=yt;hr!==null;){var Ft=hr;switch(Ft.tag){case 0:case 11:case 15:Wh(8,Ft,Z)}var $t=Ft.child;if($t!==null)$t.return=Ft,hr=$t;else for(;hr!==null;){Ft=hr;var Lt=Ft.sibling,lr=Ft.return;if(rf(Ft),Ft===yt){hr=null;break}if(Lt!==null){Lt.return=lr,hr=Lt;break}hr=lr}}}var gr=Z.alternate;if(gr!==null){var yr=gr.child;if(yr!==null){gr.child=null;do{var ki=yr.sibling;yr.sibling=null,yr=ki}while(yr!==null)}}hr=Z}}if((Z.subtreeFlags&2064)!==0&&fe!==null)fe.return=Z,hr=fe;else e:for(;hr!==null;){if(Z=hr,(Z.flags&2048)!==0)switch(Z.tag){case 0:case 11:case 15:Wh(9,Z,Z.return)}var ht=Z.sibling;if(ht!==null){ht.return=Z.return,hr=ht;break e}hr=Z.return}}var Xe=p.current;for(hr=Xe;hr!==null;){fe=hr;var ft=fe.child;if((fe.subtreeFlags&2064)!==0&&ft!==null)ft.return=fe,hr=ft;else e:for(fe=Xe;hr!==null;){if(Le=hr,(Le.flags&2048)!==0)try{switch(Le.tag){case 0:case 11:case 15:fp(9,Le)}}catch(xr){Ii(Le,Le.return,xr)}if(Le===fe){hr=null;break e}var Vt=Le.sibling;if(Vt!==null){Vt.return=Le.return,hr=Vt;break e}hr=Le.return}}if(bn=U,xs(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(Mi,p)}catch{}A=!0}return A}finally{pn=T,_a.transition=y}}return!1}function k0(p,y,T){y=ga(T,y),y=Ts(p,y,1),p=$l(p,y,1),y=Yo(),p!==null&&(cc(p,1,y),ls(p,y))}function Ii(p,y,T){if(p.tag===3)k0(p,p,T);else for(;y!==null;){if(y.tag===3){k0(y,p,T);break}else if(y.tag===1){var A=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(Uc===null||!Uc.has(A))){p=ga(T,p),p=Ms(y,p,1),y=$l(y,p,1),p=Yo(),y!==null&&(cc(y,1,p),ls(y,p));break}}y=y.return}}function A0(p,y,T){var A=p.pingCache;A!==null&&A.delete(y),y=Yo(),p.pingedLanes|=p.suspendedLanes&T,So===p&&(Fo&T)===T&&(Hi===4||Hi===3&&(Fo&130023424)===Fo&&500>Un()-Am?el(p,0):yy|=T),ls(p,y)}function R0(p,y){y===0&&((p.mode&1)===0?y=1:(y=fh,fh<<=1,(fh&130023424)===0&&(fh=4194304)));var T=Yo();p=Cs(p,y),p!==null&&(cc(p,y,T),ls(p,T))}function P1(p){var y=p.memoizedState,T=0;y!==null&&(T=y.retryLane),R0(p,T)}function _p(p,y){var T=0;switch(p.tag){case 13:var A=p.stateNode,U=p.memoizedState;U!==null&&(T=U.retryLane);break;case 19:A=p.stateNode;break;default:throw Error(i(314))}A!==null&&A.delete(y),R0(p,T)}var Sy;Sy=function(p,y,T){if(p!==null)if(p.memoizedProps!==y.pendingProps||Qi.current)Oo=!0;else{if((p.lanes&T)===0&&(y.flags&128)===0)return Oo=!1,Jd(p,y,T);Oo=(p.flags&131072)!==0}else Oo=!1,Hn&&(y.flags&1048576)!==0&&Bh(y,Fh,y.index);switch(y.lanes=0,y.tag){case 2:var A=y.type;jc(p,y),p=y.pendingProps;var U=Dl(y,Ji.current);ua(y,T),U=m(null,y,A,p,U,T);var Z=v();return y.flags|=1,typeof U=="object"&&U!==null&&typeof U.render=="function"&&U.$$typeof===void 0?(y.tag=1,y.memoizedState=null,y.updateQueue=null,xo(A)?(Z=!0,Gs(y)):Z=!1,y.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,Ho(y),U.updater=Hs,y.stateNode=U,U._reactInternals=y,Wa(y,A,p,T),y=qh(null,y,A,!0,Z,T)):(y.tag=0,Hn&&Z&&$h(y),bo(null,y,U,T),y=y.child),y;case 16:A=y.elementType;e:{switch(jc(p,y),p=y.pendingProps,U=A._init,A=U(A._payload),y.type=A,U=y.tag=I1(A),p=yn(A,p),U){case 0:y=va(null,y,A,p,T);break e;case 1:y=Ka(null,y,A,p,T);break e;case 11:y=Vl(null,y,A,p,T);break e;case 14:y=Mm(null,y,A,yn(A.type,p),T);break e}throw Error(i(306,A,""))}return y;case 0:return A=y.type,U=y.pendingProps,U=y.elementType===A?U:yn(A,U),va(p,y,A,U,T);case 1:return A=y.type,U=y.pendingProps,U=y.elementType===A?U:yn(A,U),Ka(p,y,A,U,T);case 3:e:{if(Xd(y),p===null)throw Error(i(387));A=y.pendingProps,Z=y.memoizedState,U=Z.element,Hd(p,y),Fn(y,A,null,T);var fe=y.memoizedState;if(A=fe.element,Z.isDehydrated)if(Z={element:A,isDehydrated:!1,cache:fe.cache,pendingSuspenseBoundaries:fe.pendingSuspenseBoundaries,transitions:fe.transitions},y.updateQueue.baseState=Z,y.memoizedState=Z,y.flags&256){U=ga(Error(i(423)),y),y=Hh(p,y,A,T,U);break e}else if(A!==U){U=ga(Error(i(424)),y),y=Hh(p,y,A,T,U);break e}else for(fo=Na(y.stateNode.containerInfo.firstChild),ho=y,Hn=!0,Do=null,T=Eu(y,null,A,T),y.child=T;T;)T.flags=T.flags&-3|4096,T=T.sibling;else{if(Fl(),A===U){y=Nc(p,y,T);break e}bo(p,y,A,T)}y=y.child}return y;case 5:return pa(y),p===null&&ap(y),A=y.type,U=y.pendingProps,Z=p!==null?p.memoizedProps:null,fe=U.children,zd(A,U)?fe=null:Z!==null&&zd(A,Z)&&(y.flags|=32),Xa(p,y),bo(p,y,fe,T),y.child;case 6:return p===null&&ap(y),null;case 13:return cy(p,y,T);case 4:return Uh(y,y.stateNode.containerInfo),A=y.pendingProps,p===null?y.child=Pu(y,null,A,T):bo(p,y,A,T),y.child;case 11:return A=y.type,U=y.pendingProps,U=y.elementType===A?U:yn(A,U),Vl(p,y,A,U,T);case 7:return bo(p,y,y.pendingProps,T),y.child;case 8:return bo(p,y,y.pendingProps.children,T),y.child;case 12:return bo(p,y,y.pendingProps.children,T),y.child;case 10:e:{if(A=y.type._context,U=y.pendingProps,Z=y.memoizedProps,fe=U.value,mn(Rc,A._currentValue),A._currentValue=fe,Z!==null)if($s(Z.value,fe)){if(Z.children===U.children&&!Qi.current){y=Nc(p,y,T);break e}}else for(Z=y.child,Z!==null&&(Z.return=y);Z!==null;){var Le=Z.dependencies;if(Le!==null){fe=Z.child;for(var qe=Le.firstContext;qe!==null;){if(qe.context===A){if(Z.tag===1){qe=ha(-1,T&-T),qe.tag=2;var yt=Z.updateQueue;if(yt!==null){yt=yt.shared;var Ft=yt.pending;Ft===null?qe.next=qe:(qe.next=Ft.next,Ft.next=qe),yt.pending=qe}}Z.lanes|=T,qe=Z.alternate,qe!==null&&(qe.lanes|=T),as(Z.return,T,y),Le.lanes|=T;break}qe=qe.next}}else if(Z.tag===10)fe=Z.type===y.type?null:Z.child;else if(Z.tag===18){if(fe=Z.return,fe===null)throw Error(i(341));fe.lanes|=T,Le=fe.alternate,Le!==null&&(Le.lanes|=T),as(fe,T,y),fe=Z.sibling}else fe=Z.child;if(fe!==null)fe.return=Z;else for(fe=Z;fe!==null;){if(fe===y){fe=null;break}if(Z=fe.sibling,Z!==null){Z.return=fe.return,fe=Z;break}fe=fe.return}Z=fe}bo(p,y,U.children,T),y=y.child}return y;case 9:return U=y.type,A=y.pendingProps.children,ua(y,T),U=Wt(U),A=A(U),y.flags|=1,bo(p,y,A,T),y.child;case 14:return A=y.type,U=yn(A,y.pendingProps),U=yn(A.type,U),Mm(p,y,A,U,T);case 15:return up(p,y,y.type,y.pendingProps,T);case 17:return A=y.type,U=y.pendingProps,U=y.elementType===A?U:yn(A,U),jc(p,y),y.tag=1,xo(A)?(p=!0,Gs(y)):p=!1,ua(y,T),Ws(y,A,U),Wa(y,A,U,T),qh(null,y,A,!0,p,T);case 19:return hy(p,y,T);case 22:return Zd(p,y,T)}throw Error(i(156,y.tag))};function D0(p,y){return An(p,y)}function E1(p,y,T,A){this.tag=p,this.key=T,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ba(p,y,T,A){return new E1(p,y,T,A)}function Cy(p){return p=p.prototype,!(!p||!p.isReactComponent)}function I1(p){if(typeof p=="function")return Cy(p)?1:0;if(p!=null){if(p=p.$$typeof,p===Ze)return 11;if(p===st)return 14}return 2}function qc(p,y){var T=p.alternate;return T===null?(T=ba(p.tag,y,p.key,p.mode),T.elementType=p.elementType,T.type=p.type,T.stateNode=p.stateNode,T.alternate=p,p.alternate=T):(T.pendingProps=y,T.type=p.type,T.flags=0,T.subtreeFlags=0,T.deletions=null),T.flags=p.flags&14680064,T.childLanes=p.childLanes,T.lanes=p.lanes,T.child=p.child,T.memoizedProps=p.memoizedProps,T.memoizedState=p.memoizedState,T.updateQueue=p.updateQueue,y=p.dependencies,T.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},T.sibling=p.sibling,T.index=p.index,T.ref=p.ref,T}function af(p,y,T,A,U,Z){var fe=2;if(A=p,typeof p=="function")Cy(p)&&(fe=1);else if(typeof p=="string")fe=5;else e:switch(p){case we:return Nu(T.children,U,Z,y);case Ie:fe=8,U|=8;break;case ke:return p=ba(12,T,y,U|2),p.elementType=ke,p.lanes=Z,p;case Qe:return p=ba(13,T,y,U),p.elementType=Qe,p.lanes=Z,p;case vt:return p=ba(19,T,y,U),p.elementType=vt,p.lanes=Z,p;case rt:return xp(T,U,Z,y);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case ae:fe=10;break e;case Ee:fe=9;break e;case Ze:fe=11;break e;case st:fe=14;break e;case He:fe=16,A=null;break e}throw Error(i(130,p==null?p:typeof p,""))}return y=ba(fe,T,y,U),y.elementType=p,y.type=A,y.lanes=Z,y}function Nu(p,y,T,A){return p=ba(7,p,A,y),p.lanes=T,p}function xp(p,y,T,A){return p=ba(22,p,A,y),p.elementType=rt,p.lanes=T,p.stateNode={isHidden:!1},p}function Fm(p,y,T){return p=ba(6,p,null,y),p.lanes=T,p}function Ty(p,y,T){return y=ba(4,p.children!==null?p.children:[],p.key,y),y.lanes=T,y.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},y}function Bm(p,y,T,A,U){this.tag=y,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mh(0),this.expirationTimes=mh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mh(0),this.identifierPrefix=A,this.onRecoverableError=U,this.mutableSourceEagerHydrationData=null}function My(p,y,T,A,U,Z,fe,Le,qe){return p=new Bm(p,y,T,Le,qe),y===1?(y=1,Z===!0&&(y|=8)):y=0,Z=ba(3,null,null,y),p.current=Z,Z.stateNode=p,Z.memoizedState={element:A,isDehydrated:T,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ho(Z),p}function z0(p,y,T){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:be,key:A==null?null:""+A,children:p,containerInfo:y,implementation:T}}function O0(p){if(!p)return la;p=p._reactInternals;e:{if(it(p)!==p||p.tag!==1)throw Error(i(170));var y=p;do{switch(y.tag){case 3:y=y.stateNode.context;break e;case 1:if(xo(y.type)){y=y.stateNode.__reactInternalMemoizedMergedChildContext;break e}}y=y.return}while(y!==null);throw Error(i(171))}if(p.tag===1){var T=p.type;if(xo(T))return $d(p,T,y)}return y}function L0(p,y,T,A,U,Z,fe,Le,qe){return p=My(T,A,!0,p,U,Z,fe,Le,qe),p.context=O0(null),T=p.current,A=Yo(),U=Ps(T),Z=ha(A,U),Z.callback=y??null,$l(T,Z,U),p.current.lanes=U,cc(p,U,A),ls(p,A),p}function $m(p,y,T,A){var U=y.current,Z=Yo(),fe=Ps(U);return T=O0(T),y.context===null?y.context=T:y.pendingContext=T,y=ha(Z,fe),y.payload={element:p},A=A===void 0?null:A,A!==null&&(y.callback=A),p=$l(U,y,fe),p!==null&&(Qa(p,U,fe,Z),Wd(p,U,fe)),fe}function bp(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return p.child.stateNode;default:return p.child.stateNode}}function F0(p,y){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var T=p.retryLane;p.retryLane=T!==0&&T<y?T:y}}function Py(p,y){F0(p,y),(p=p.alternate)&&F0(p,y)}function ro(){return null}var lf=typeof reportError=="function"?reportError:function(p){console.error(p)};function Ey(p){this._internalRoot=p}jm.prototype.render=Ey.prototype.render=function(p){var y=this._internalRoot;if(y===null)throw Error(i(409));$m(p,y,null,null)},jm.prototype.unmount=Ey.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var y=p.containerInfo;Xh(function(){$m(null,p,null,null)}),y[vs]=null}};function jm(p){this._internalRoot=p}jm.prototype.unstable_scheduleHydration=function(p){if(p){var y=hu();p={blockedOn:null,target:p,priority:y};for(var T=0;T<_n.length&&y!==0&&y<_n[T].priority;T++);_n.splice(T,0,p),T===0&&Vo(p)}};function Nm(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function wp(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11&&(p.nodeType!==8||p.nodeValue!==" react-mount-point-unstable "))}function B0(){}function $0(p,y,T,A,U){if(U){if(typeof A=="function"){var Z=A;A=function(){var yt=bp(fe);Z.call(yt)}}var fe=L0(y,A,p,0,null,!1,!1,"",B0);return p._reactRootContainer=fe,p[vs]=fe.current,Sc(p.nodeType===8?p.parentNode:p),Xh(),fe}for(;U=p.lastChild;)p.removeChild(U);if(typeof A=="function"){var Le=A;A=function(){var yt=bp(qe);Le.call(yt)}}var qe=My(p,0,!1,null,null,!1,!1,"",B0);return p._reactRootContainer=qe,p[vs]=qe.current,Sc(p.nodeType===8?p.parentNode:p),Xh(function(){$m(y,qe,T,A)}),qe}function Sp(p,y,T,A,U){var Z=T._reactRootContainer;if(Z){var fe=Z;if(typeof U=="function"){var Le=U;U=function(){var qe=bp(fe);Le.call(qe)}}$m(y,fe,p,U)}else fe=$0(T,y,p,U,A);return bp(fe)}jf=function(p){switch(p.tag){case 3:var y=p.stateNode;if(y.current.memoizedState.isDehydrated){var T=Fa(y.pendingLanes);T!==0&&($f(y,T|1),ls(y,Un()),(bn&6)===0&&(Vc=Un()+500,xs()))}break;case 13:Xh(function(){var A=Cs(p,1);if(A!==null){var U=Yo();Qa(A,p,1,U)}}),Py(p,1)}},_l=function(p){if(p.tag===13){var y=Cs(p,134217728);if(y!==null){var T=Yo();Qa(y,p,134217728,T)}Py(p,134217728)}},fd=function(p){if(p.tag===13){var y=Ps(p),T=Cs(p,y);if(T!==null){var A=Yo();Qa(T,p,y,A)}Py(p,y)}},hu=function(){return pn},Ba=function(p,y){var T=pn;try{return pn=p,y()}finally{pn=T}},Ke=function(p,y,T){switch(y){case"input":if(pr(p,T),y=T.name,T.type==="radio"&&y!=null){for(T=p;T.parentNode;)T=T.parentNode;for(T=T.querySelectorAll("input[name="+JSON.stringify(""+y)+'][type="radio"]'),y=0;y<T.length;y++){var A=T[y];if(A!==p&&A.form===p.form){var U=Oh(A);if(!U)throw Error(i(90));ir(A),pr(A,U)}}}break;case"textarea":On(p,T);break;case"select":y=T.value,y!=null&&Br(p,!!T.multiple,y,!1)}},Zt=vy,Yt=Xh;var cf={usingClientEntryPoint:!1,Events:[Vs,Us,Oh,Ut,mr,vy]},Kh={findFiberByHostInstance:Ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},j0={bundleType:Kh.bundleType,version:Kh.version,rendererPackageName:Kh.rendererPackageName,rendererConfig:Kh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:de.ReactCurrentDispatcher,findHostInstanceByFiber:function(p){return p=Ur(p),p===null?null:p.stateNode},findFiberByHostInstance:Kh.findFiberByHostInstance||ro,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cp.isDisabled&&Cp.supportsFiber)try{Mi=Cp.inject(j0),ln=Cp}catch{}}return Ta.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cf,Ta.createPortal=function(p,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nm(y))throw Error(i(200));return z0(p,y,null,T)},Ta.createRoot=function(p,y){if(!Nm(p))throw Error(i(299));var T=!1,A="",U=lf;return y!=null&&(y.unstable_strictMode===!0&&(T=!0),y.identifierPrefix!==void 0&&(A=y.identifierPrefix),y.onRecoverableError!==void 0&&(U=y.onRecoverableError)),y=My(p,1,!1,null,null,T,!1,A,U),p[vs]=y.current,Sc(p.nodeType===8?p.parentNode:p),new Ey(y)},Ta.findDOMNode=function(p){if(p==null)return null;if(p.nodeType===1)return p;var y=p._reactInternals;if(y===void 0)throw typeof p.render=="function"?Error(i(188)):(p=Object.keys(p).join(","),Error(i(268,p)));return p=Ur(y),p=p===null?null:p.stateNode,p},Ta.flushSync=function(p){return Xh(p)},Ta.hydrate=function(p,y,T){if(!wp(y))throw Error(i(200));return Sp(null,p,y,!0,T)},Ta.hydrateRoot=function(p,y,T){if(!Nm(p))throw Error(i(405));var A=T!=null&&T.hydratedSources||null,U=!1,Z="",fe=lf;if(T!=null&&(T.unstable_strictMode===!0&&(U=!0),T.identifierPrefix!==void 0&&(Z=T.identifierPrefix),T.onRecoverableError!==void 0&&(fe=T.onRecoverableError)),y=L0(y,null,p,1,T??null,U,!1,Z,fe),p[vs]=y.current,Sc(p),A)for(p=0;p<A.length;p++)T=A[p],U=T._getVersion,U=U(T._source),y.mutableSourceEagerHydrationData==null?y.mutableSourceEagerHydrationData=[T,U]:y.mutableSourceEagerHydrationData.push(T,U);return new jm(y)},Ta.render=function(p,y,T){if(!wp(y))throw Error(i(200));return Sp(null,p,y,!1,T)},Ta.unmountComponentAtNode=function(p){if(!wp(p))throw Error(i(40));return p._reactRootContainer?(Xh(function(){Sp(null,null,p,!1,function(){p._reactRootContainer=null,p[vs]=null})}),!0):!1},Ta.unstable_batchedUpdates=vy,Ta.unstable_renderSubtreeIntoContainer=function(p,y,T,A){if(!wp(T))throw Error(i(200));if(p==null||p._reactInternals===void 0)throw Error(i(38));return Sp(p,y,T,!1,A)},Ta.version="18.3.1-next-f1338f8080-20240426",Ta}var FT;function hI(){if(FT)return wb.exports;FT=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),wb.exports=KO(),wb.exports}var Ju=hI();const s_=Lv(Ju);function YO(e){return typeof e=="function"?e():e}const JO=Y.forwardRef(function(t,i){const{children:a,container:c,disablePortal:h=!1}=t,[f,o]=Y.useState(null),x=Ra(Y.isValidElement(a)?sI(a):null,i);if(bv(()=>{h||o(YO(c)||document.body)},[c,h]),bv(()=>{if(f&&!h)return Z_(i,f),()=>{Z_(i,null)}},[i,f,h]),h){if(Y.isValidElement(a)){const P={ref:x};return Y.cloneElement(a,P)}return q.jsx(Y.Fragment,{children:a})}return q.jsx(Y.Fragment,{children:f&&Ju.createPortal(a,f)})});var Ia="top",ic="bottom",oc="right",ka="left",C2="auto",Gv=[Ia,ic,oc,ka],Og="start",Sv="end",QO="clippingParents",dI="viewport",jy="popper",eL="reference",BT=Gv.reduce(function(e,t){return e.concat([t+"-"+Og,t+"-"+Sv])},[]),fI=[].concat(Gv,[C2]).reduce(function(e,t){return e.concat([t,t+"-"+Og,t+"-"+Sv])},[]),tL="beforeRead",rL="read",nL="afterRead",iL="beforeMain",oL="main",sL="afterMain",aL="beforeWrite",lL="write",cL="afterWrite",uL=[tL,rL,nL,iL,oL,sL,aL,lL,cL];function lh(e){return e?(e.nodeName||"").toLowerCase():null}function ml(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Hp(e){var t=ml(e).Element;return e instanceof t||e instanceof Element}function nc(e){var t=ml(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function T2(e){if(typeof ShadowRoot>"u")return!1;var t=ml(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function hL(e){var t=e.state;Object.keys(t.elements).forEach(function(i){var a=t.styles[i]||{},c=t.attributes[i]||{},h=t.elements[i];!nc(h)||!lh(h)||(Object.assign(h.style,a),Object.keys(c).forEach(function(f){var o=c[f];o===!1?h.removeAttribute(f):h.setAttribute(f,o===!0?"":o)}))})}function dL(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(a){var c=t.elements[a],h=t.attributes[a]||{},f=Object.keys(t.styles.hasOwnProperty(a)?t.styles[a]:i[a]),o=f.reduce(function(x,P){return x[P]="",x},{});!nc(c)||!lh(c)||(Object.assign(c.style,o),Object.keys(h).forEach(function(x){c.removeAttribute(x)}))})}}const fL={name:"applyStyles",enabled:!0,phase:"write",fn:hL,effect:dL,requires:["computeStyles"]};function nh(e){return e.split("-")[0]}var Vp=Math.max,X_=Math.min,Lg=Math.round;function bw(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function pI(){return!/^((?!chrome|android).)*safari/i.test(bw())}function Fg(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var a=e.getBoundingClientRect(),c=1,h=1;t&&nc(e)&&(c=e.offsetWidth>0&&Lg(a.width)/e.offsetWidth||1,h=e.offsetHeight>0&&Lg(a.height)/e.offsetHeight||1);var f=Hp(e)?ml(e):window,o=f.visualViewport,x=!pI()&&i,P=(a.left+(x&&o?o.offsetLeft:0))/c,I=(a.top+(x&&o?o.offsetTop:0))/h,R=a.width/c,D=a.height/h;return{width:R,height:D,top:I,right:P+R,bottom:I+D,left:P,x:P,y:I}}function M2(e){var t=Fg(e),i=e.offsetWidth,a=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-a)<=1&&(a=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:a}}function mI(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&T2(i)){var a=t;do{if(a&&e.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function sd(e){return ml(e).getComputedStyle(e)}function pL(e){return["table","td","th"].indexOf(lh(e))>=0}function zf(e){return((Hp(e)?e.ownerDocument:e.document)||window.document).documentElement}function $x(e){return lh(e)==="html"?e:e.assignedSlot||e.parentNode||(T2(e)?e.host:null)||zf(e)}function $T(e){return!nc(e)||sd(e).position==="fixed"?null:e.offsetParent}function mL(e){var t=/firefox/i.test(bw()),i=/Trident/i.test(bw());if(i&&nc(e)){var a=sd(e);if(a.position==="fixed")return null}var c=$x(e);for(T2(c)&&(c=c.host);nc(c)&&["html","body"].indexOf(lh(c))<0;){var h=sd(c);if(h.transform!=="none"||h.perspective!=="none"||h.contain==="paint"||["transform","perspective"].indexOf(h.willChange)!==-1||t&&h.willChange==="filter"||t&&h.filter&&h.filter!=="none")return c;c=c.parentNode}return null}function qv(e){for(var t=ml(e),i=$T(e);i&&pL(i)&&sd(i).position==="static";)i=$T(i);return i&&(lh(i)==="html"||lh(i)==="body"&&sd(i).position==="static")?t:i||mL(e)||t}function P2(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function tv(e,t,i){return Vp(e,X_(t,i))}function gL(e,t,i){var a=tv(e,t,i);return a>i?i:a}function gI(){return{top:0,right:0,bottom:0,left:0}}function yI(e){return Object.assign({},gI(),e)}function vI(e,t){return t.reduce(function(i,a){return i[a]=e,i},{})}var yL=function(t,i){return t=typeof t=="function"?t(Object.assign({},i.rects,{placement:i.placement})):t,yI(typeof t!="number"?t:vI(t,Gv))};function vL(e){var t,i=e.state,a=e.name,c=e.options,h=i.elements.arrow,f=i.modifiersData.popperOffsets,o=nh(i.placement),x=P2(o),P=[ka,oc].indexOf(o)>=0,I=P?"height":"width";if(!(!h||!f)){var R=yL(c.padding,i),D=M2(h),$=x==="y"?Ia:ka,G=x==="y"?ic:oc,j=i.rects.reference[I]+i.rects.reference[x]-f[x]-i.rects.popper[I],V=f[x]-i.rects.reference[x],se=qv(h),ue=se?x==="y"?se.clientHeight||0:se.clientWidth||0:0,Q=j/2-V/2,de=R[$],oe=ue-D[I]-R[G],be=ue/2-D[I]/2+Q,we=tv(de,be,oe),Ie=x;i.modifiersData[a]=(t={},t[Ie]=we,t.centerOffset=we-be,t)}}function _L(e){var t=e.state,i=e.options,a=i.element,c=a===void 0?"[data-popper-arrow]":a;c!=null&&(typeof c=="string"&&(c=t.elements.popper.querySelector(c),!c)||mI(t.elements.popper,c)&&(t.elements.arrow=c))}const xL={name:"arrow",enabled:!0,phase:"main",fn:vL,effect:_L,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Bg(e){return e.split("-")[1]}var bL={top:"auto",right:"auto",bottom:"auto",left:"auto"};function wL(e,t){var i=e.x,a=e.y,c=t.devicePixelRatio||1;return{x:Lg(i*c)/c||0,y:Lg(a*c)/c||0}}function jT(e){var t,i=e.popper,a=e.popperRect,c=e.placement,h=e.variation,f=e.offsets,o=e.position,x=e.gpuAcceleration,P=e.adaptive,I=e.roundOffsets,R=e.isFixed,D=f.x,$=D===void 0?0:D,G=f.y,j=G===void 0?0:G,V=typeof I=="function"?I({x:$,y:j}):{x:$,y:j};$=V.x,j=V.y;var se=f.hasOwnProperty("x"),ue=f.hasOwnProperty("y"),Q=ka,de=Ia,oe=window;if(P){var be=qv(i),we="clientHeight",Ie="clientWidth";if(be===ml(i)&&(be=zf(i),sd(be).position!=="static"&&o==="absolute"&&(we="scrollHeight",Ie="scrollWidth")),be=be,c===Ia||(c===ka||c===oc)&&h===Sv){de=ic;var ke=R&&be===oe&&oe.visualViewport?oe.visualViewport.height:be[we];j-=ke-a.height,j*=x?1:-1}if(c===ka||(c===Ia||c===ic)&&h===Sv){Q=oc;var ae=R&&be===oe&&oe.visualViewport?oe.visualViewport.width:be[Ie];$-=ae-a.width,$*=x?1:-1}}var Ee=Object.assign({position:o},P&&bL),Ze=I===!0?wL({x:$,y:j},ml(i)):{x:$,y:j};if($=Ze.x,j=Ze.y,x){var Qe;return Object.assign({},Ee,(Qe={},Qe[de]=ue?"0":"",Qe[Q]=se?"0":"",Qe.transform=(oe.devicePixelRatio||1)<=1?"translate("+$+"px, "+j+"px)":"translate3d("+$+"px, "+j+"px, 0)",Qe))}return Object.assign({},Ee,(t={},t[de]=ue?j+"px":"",t[Q]=se?$+"px":"",t.transform="",t))}function SL(e){var t=e.state,i=e.options,a=i.gpuAcceleration,c=a===void 0?!0:a,h=i.adaptive,f=h===void 0?!0:h,o=i.roundOffsets,x=o===void 0?!0:o,P={placement:nh(t.placement),variation:Bg(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:c,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,jT(Object.assign({},P,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:f,roundOffsets:x})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,jT(Object.assign({},P,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:x})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const CL={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:SL,data:{}};var a_={passive:!0};function TL(e){var t=e.state,i=e.instance,a=e.options,c=a.scroll,h=c===void 0?!0:c,f=a.resize,o=f===void 0?!0:f,x=ml(t.elements.popper),P=[].concat(t.scrollParents.reference,t.scrollParents.popper);return h&&P.forEach(function(I){I.addEventListener("scroll",i.update,a_)}),o&&x.addEventListener("resize",i.update,a_),function(){h&&P.forEach(function(I){I.removeEventListener("scroll",i.update,a_)}),o&&x.removeEventListener("resize",i.update,a_)}}const ML={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:TL,data:{}};var PL={left:"right",right:"left",bottom:"top",top:"bottom"};function k_(e){return e.replace(/left|right|bottom|top/g,function(t){return PL[t]})}var EL={start:"end",end:"start"};function NT(e){return e.replace(/start|end/g,function(t){return EL[t]})}function E2(e){var t=ml(e),i=t.pageXOffset,a=t.pageYOffset;return{scrollLeft:i,scrollTop:a}}function I2(e){return Fg(zf(e)).left+E2(e).scrollLeft}function IL(e,t){var i=ml(e),a=zf(e),c=i.visualViewport,h=a.clientWidth,f=a.clientHeight,o=0,x=0;if(c){h=c.width,f=c.height;var P=pI();(P||!P&&t==="fixed")&&(o=c.offsetLeft,x=c.offsetTop)}return{width:h,height:f,x:o+I2(e),y:x}}function kL(e){var t,i=zf(e),a=E2(e),c=(t=e.ownerDocument)==null?void 0:t.body,h=Vp(i.scrollWidth,i.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),f=Vp(i.scrollHeight,i.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0),o=-a.scrollLeft+I2(e),x=-a.scrollTop;return sd(c||i).direction==="rtl"&&(o+=Vp(i.clientWidth,c?c.clientWidth:0)-h),{width:h,height:f,x:o,y:x}}function k2(e){var t=sd(e),i=t.overflow,a=t.overflowX,c=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+c+a)}function _I(e){return["html","body","#document"].indexOf(lh(e))>=0?e.ownerDocument.body:nc(e)&&k2(e)?e:_I($x(e))}function rv(e,t){var i;t===void 0&&(t=[]);var a=_I(e),c=a===((i=e.ownerDocument)==null?void 0:i.body),h=ml(a),f=c?[h].concat(h.visualViewport||[],k2(a)?a:[]):a,o=t.concat(f);return c?o:o.concat(rv($x(f)))}function ww(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function AL(e,t){var i=Fg(e,!1,t==="fixed");return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}function VT(e,t,i){return t===dI?ww(IL(e,i)):Hp(t)?AL(t,i):ww(kL(zf(e)))}function RL(e){var t=rv($x(e)),i=["absolute","fixed"].indexOf(sd(e).position)>=0,a=i&&nc(e)?qv(e):e;return Hp(a)?t.filter(function(c){return Hp(c)&&mI(c,a)&&lh(c)!=="body"}):[]}function DL(e,t,i,a){var c=t==="clippingParents"?RL(e):[].concat(t),h=[].concat(c,[i]),f=h[0],o=h.reduce(function(x,P){var I=VT(e,P,a);return x.top=Vp(I.top,x.top),x.right=X_(I.right,x.right),x.bottom=X_(I.bottom,x.bottom),x.left=Vp(I.left,x.left),x},VT(e,f,a));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function xI(e){var t=e.reference,i=e.element,a=e.placement,c=a?nh(a):null,h=a?Bg(a):null,f=t.x+t.width/2-i.width/2,o=t.y+t.height/2-i.height/2,x;switch(c){case Ia:x={x:f,y:t.y-i.height};break;case ic:x={x:f,y:t.y+t.height};break;case oc:x={x:t.x+t.width,y:o};break;case ka:x={x:t.x-i.width,y:o};break;default:x={x:t.x,y:t.y}}var P=c?P2(c):null;if(P!=null){var I=P==="y"?"height":"width";switch(h){case Og:x[P]=x[P]-(t[I]/2-i[I]/2);break;case Sv:x[P]=x[P]+(t[I]/2-i[I]/2);break}}return x}function Cv(e,t){t===void 0&&(t={});var i=t,a=i.placement,c=a===void 0?e.placement:a,h=i.strategy,f=h===void 0?e.strategy:h,o=i.boundary,x=o===void 0?QO:o,P=i.rootBoundary,I=P===void 0?dI:P,R=i.elementContext,D=R===void 0?jy:R,$=i.altBoundary,G=$===void 0?!1:$,j=i.padding,V=j===void 0?0:j,se=yI(typeof V!="number"?V:vI(V,Gv)),ue=D===jy?eL:jy,Q=e.rects.popper,de=e.elements[G?ue:D],oe=DL(Hp(de)?de:de.contextElement||zf(e.elements.popper),x,I,f),be=Fg(e.elements.reference),we=xI({reference:be,element:Q,placement:c}),Ie=ww(Object.assign({},Q,we)),ke=D===jy?Ie:be,ae={top:oe.top-ke.top+se.top,bottom:ke.bottom-oe.bottom+se.bottom,left:oe.left-ke.left+se.left,right:ke.right-oe.right+se.right},Ee=e.modifiersData.offset;if(D===jy&&Ee){var Ze=Ee[c];Object.keys(ae).forEach(function(Qe){var vt=[oc,ic].indexOf(Qe)>=0?1:-1,st=[Ia,ic].indexOf(Qe)>=0?"y":"x";ae[Qe]+=Ze[st]*vt})}return ae}function zL(e,t){t===void 0&&(t={});var i=t,a=i.placement,c=i.boundary,h=i.rootBoundary,f=i.padding,o=i.flipVariations,x=i.allowedAutoPlacements,P=x===void 0?fI:x,I=Bg(a),R=I?o?BT:BT.filter(function(G){return Bg(G)===I}):Gv,D=R.filter(function(G){return P.indexOf(G)>=0});D.length===0&&(D=R);var $=D.reduce(function(G,j){return G[j]=Cv(e,{placement:j,boundary:c,rootBoundary:h,padding:f})[nh(j)],G},{});return Object.keys($).sort(function(G,j){return $[G]-$[j]})}function OL(e){if(nh(e)===C2)return[];var t=k_(e);return[NT(e),t,NT(t)]}function LL(e){var t=e.state,i=e.options,a=e.name;if(!t.modifiersData[a]._skip){for(var c=i.mainAxis,h=c===void 0?!0:c,f=i.altAxis,o=f===void 0?!0:f,x=i.fallbackPlacements,P=i.padding,I=i.boundary,R=i.rootBoundary,D=i.altBoundary,$=i.flipVariations,G=$===void 0?!0:$,j=i.allowedAutoPlacements,V=t.options.placement,se=nh(V),ue=se===V,Q=x||(ue||!G?[k_(V)]:OL(V)),de=[V].concat(Q).reduce(function(Tt,Ct){return Tt.concat(nh(Ct)===C2?zL(t,{placement:Ct,boundary:I,rootBoundary:R,padding:P,flipVariations:G,allowedAutoPlacements:j}):Ct)},[]),oe=t.rects.reference,be=t.rects.popper,we=new Map,Ie=!0,ke=de[0],ae=0;ae<de.length;ae++){var Ee=de[ae],Ze=nh(Ee),Qe=Bg(Ee)===Og,vt=[Ia,ic].indexOf(Ze)>=0,st=vt?"width":"height",He=Cv(t,{placement:Ee,boundary:I,rootBoundary:R,altBoundary:D,padding:P}),rt=vt?Qe?oc:ka:Qe?ic:Ia;oe[st]>be[st]&&(rt=k_(rt));var Ge=k_(rt),Ve=[];if(h&&Ve.push(He[Ze]<=0),o&&Ve.push(He[rt]<=0,He[Ge]<=0),Ve.every(function(Tt){return Tt})){ke=Ee,Ie=!1;break}we.set(Ee,Ve)}if(Ie)for(var ut=G?3:1,ve=function(Ct){var _t=de.find(function(bt){var nt=we.get(bt);if(nt)return nt.slice(0,Ct).every(function(kt){return kt})});if(_t)return ke=_t,"break"},Fe=ut;Fe>0;Fe--){var pt=ve(Fe);if(pt==="break")break}t.placement!==ke&&(t.modifiersData[a]._skip=!0,t.placement=ke,t.reset=!0)}}const FL={name:"flip",enabled:!0,phase:"main",fn:LL,requiresIfExists:["offset"],data:{_skip:!1}};function UT(e,t,i){return i===void 0&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function GT(e){return[Ia,oc,ic,ka].some(function(t){return e[t]>=0})}function BL(e){var t=e.state,i=e.name,a=t.rects.reference,c=t.rects.popper,h=t.modifiersData.preventOverflow,f=Cv(t,{elementContext:"reference"}),o=Cv(t,{altBoundary:!0}),x=UT(f,a),P=UT(o,c,h),I=GT(x),R=GT(P);t.modifiersData[i]={referenceClippingOffsets:x,popperEscapeOffsets:P,isReferenceHidden:I,hasPopperEscaped:R},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":I,"data-popper-escaped":R})}const $L={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:BL};function jL(e,t,i){var a=nh(e),c=[ka,Ia].indexOf(a)>=0?-1:1,h=typeof i=="function"?i(Object.assign({},t,{placement:e})):i,f=h[0],o=h[1];return f=f||0,o=(o||0)*c,[ka,oc].indexOf(a)>=0?{x:o,y:f}:{x:f,y:o}}function NL(e){var t=e.state,i=e.options,a=e.name,c=i.offset,h=c===void 0?[0,0]:c,f=fI.reduce(function(I,R){return I[R]=jL(R,t.rects,h),I},{}),o=f[t.placement],x=o.x,P=o.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=x,t.modifiersData.popperOffsets.y+=P),t.modifiersData[a]=f}const VL={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:NL};function UL(e){var t=e.state,i=e.name;t.modifiersData[i]=xI({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const GL={name:"popperOffsets",enabled:!0,phase:"read",fn:UL,data:{}};function qL(e){return e==="x"?"y":"x"}function HL(e){var t=e.state,i=e.options,a=e.name,c=i.mainAxis,h=c===void 0?!0:c,f=i.altAxis,o=f===void 0?!1:f,x=i.boundary,P=i.rootBoundary,I=i.altBoundary,R=i.padding,D=i.tether,$=D===void 0?!0:D,G=i.tetherOffset,j=G===void 0?0:G,V=Cv(t,{boundary:x,rootBoundary:P,padding:R,altBoundary:I}),se=nh(t.placement),ue=Bg(t.placement),Q=!ue,de=P2(se),oe=qL(de),be=t.modifiersData.popperOffsets,we=t.rects.reference,Ie=t.rects.popper,ke=typeof j=="function"?j(Object.assign({},t.rects,{placement:t.placement})):j,ae=typeof ke=="number"?{mainAxis:ke,altAxis:ke}:Object.assign({mainAxis:0,altAxis:0},ke),Ee=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Ze={x:0,y:0};if(be){if(h){var Qe,vt=de==="y"?Ia:ka,st=de==="y"?ic:oc,He=de==="y"?"height":"width",rt=be[de],Ge=rt+V[vt],Ve=rt-V[st],ut=$?-Ie[He]/2:0,ve=ue===Og?we[He]:Ie[He],Fe=ue===Og?-Ie[He]:-we[He],pt=t.elements.arrow,Tt=$&&pt?M2(pt):{width:0,height:0},Ct=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:gI(),_t=Ct[vt],bt=Ct[st],nt=tv(0,we[He],Tt[He]),kt=Q?we[He]/2-ut-nt-_t-ae.mainAxis:ve-nt-_t-ae.mainAxis,At=Q?-we[He]/2+ut+nt+bt+ae.mainAxis:Fe+nt+bt+ae.mainAxis,dr=t.elements.arrow&&qv(t.elements.arrow),ir=dr?de==="y"?dr.clientTop||0:dr.clientLeft||0:0,Gr=(Qe=Ee?.[de])!=null?Qe:0,Tr=rt+kt-Gr-ir,or=rt+At-Gr,qt=tv($?X_(Ge,Tr):Ge,rt,$?Vp(Ve,or):Ve);be[de]=qt,Ze[de]=qt-rt}if(o){var pr,Xt=de==="x"?Ia:ka,Ir=de==="x"?ic:oc,Rr=be[oe],Br=oe==="y"?"height":"width",Wr=Rr+V[Xt],sn=Rr-V[Ir],On=[Ia,ka].indexOf(se)!==-1,Tn=(pr=Ee?.[oe])!=null?pr:0,vn=On?Wr:Rr-we[Br]-Ie[Br]-Tn+ae.altAxis,Sr=On?Rr+we[Br]+Ie[Br]-Tn-ae.altAxis:sn,Dr=$&&On?gL(vn,Rr,Sr):tv($?vn:Wr,Rr,$?Sr:sn);be[oe]=Dr,Ze[oe]=Dr-Rr}t.modifiersData[a]=Ze}}const WL={name:"preventOverflow",enabled:!0,phase:"main",fn:HL,requiresIfExists:["offset"]};function ZL(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function XL(e){return e===ml(e)||!nc(e)?E2(e):ZL(e)}function KL(e){var t=e.getBoundingClientRect(),i=Lg(t.width)/e.offsetWidth||1,a=Lg(t.height)/e.offsetHeight||1;return i!==1||a!==1}function YL(e,t,i){i===void 0&&(i=!1);var a=nc(t),c=nc(t)&&KL(t),h=zf(t),f=Fg(e,c,i),o={scrollLeft:0,scrollTop:0},x={x:0,y:0};return(a||!a&&!i)&&((lh(t)!=="body"||k2(h))&&(o=XL(t)),nc(t)?(x=Fg(t,!0),x.x+=t.clientLeft,x.y+=t.clientTop):h&&(x.x=I2(h))),{x:f.left+o.scrollLeft-x.x,y:f.top+o.scrollTop-x.y,width:f.width,height:f.height}}function JL(e){var t=new Map,i=new Set,a=[];e.forEach(function(h){t.set(h.name,h)});function c(h){i.add(h.name);var f=[].concat(h.requires||[],h.requiresIfExists||[]);f.forEach(function(o){if(!i.has(o)){var x=t.get(o);x&&c(x)}}),a.push(h)}return e.forEach(function(h){i.has(h.name)||c(h)}),a}function QL(e){var t=JL(e);return uL.reduce(function(i,a){return i.concat(t.filter(function(c){return c.phase===a}))},[])}function e4(e){var t;return function(){return t||(t=new Promise(function(i){Promise.resolve().then(function(){t=void 0,i(e())})})),t}}function t4(e){var t=e.reduce(function(i,a){var c=i[a.name];return i[a.name]=c?Object.assign({},c,a,{options:Object.assign({},c.options,a.options),data:Object.assign({},c.data,a.data)}):a,i},{});return Object.keys(t).map(function(i){return t[i]})}var qT={placement:"bottom",modifiers:[],strategy:"absolute"};function HT(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(a){return!(a&&typeof a.getBoundingClientRect=="function")})}function r4(e){e===void 0&&(e={});var t=e,i=t.defaultModifiers,a=i===void 0?[]:i,c=t.defaultOptions,h=c===void 0?qT:c;return function(o,x,P){P===void 0&&(P=h);var I={placement:"bottom",orderedModifiers:[],options:Object.assign({},qT,h),modifiersData:{},elements:{reference:o,popper:x},attributes:{},styles:{}},R=[],D=!1,$={state:I,setOptions:function(se){var ue=typeof se=="function"?se(I.options):se;j(),I.options=Object.assign({},h,I.options,ue),I.scrollParents={reference:Hp(o)?rv(o):o.contextElement?rv(o.contextElement):[],popper:rv(x)};var Q=QL(t4([].concat(a,I.options.modifiers)));return I.orderedModifiers=Q.filter(function(de){return de.enabled}),G(),$.update()},forceUpdate:function(){if(!D){var se=I.elements,ue=se.reference,Q=se.popper;if(HT(ue,Q)){I.rects={reference:YL(ue,qv(Q),I.options.strategy==="fixed"),popper:M2(Q)},I.reset=!1,I.placement=I.options.placement,I.orderedModifiers.forEach(function(ae){return I.modifiersData[ae.name]=Object.assign({},ae.data)});for(var de=0;de<I.orderedModifiers.length;de++){if(I.reset===!0){I.reset=!1,de=-1;continue}var oe=I.orderedModifiers[de],be=oe.fn,we=oe.options,Ie=we===void 0?{}:we,ke=oe.name;typeof be=="function"&&(I=be({state:I,options:Ie,name:ke,instance:$})||I)}}}},update:e4(function(){return new Promise(function(V){$.forceUpdate(),V(I)})}),destroy:function(){j(),D=!0}};if(!HT(o,x))return $;$.setOptions(P).then(function(V){!D&&P.onFirstUpdate&&P.onFirstUpdate(V)});function G(){I.orderedModifiers.forEach(function(V){var se=V.name,ue=V.options,Q=ue===void 0?{}:ue,de=V.effect;if(typeof de=="function"){var oe=de({state:I,name:se,instance:$,options:Q}),be=function(){};R.push(oe||be)}})}function j(){R.forEach(function(V){return V()}),R=[]}return $}}var n4=[ML,GL,CL,fL,VL,FL,WL,xL,$L],i4=r4({defaultModifiers:n4});const o4="Popper";function s4(e){return VO(o4,e)}const a4=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],l4=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function c4(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function Sw(e){return typeof e=="function"?e():e}function u4(e){return e.nodeType!==void 0}const h4=()=>ui({root:["root"]},BO(s4)),d4={},f4=Y.forwardRef(function(t,i){var a;const{anchorEl:c,children:h,direction:f,disablePortal:o,modifiers:x,open:P,placement:I,popperOptions:R,popperRef:D,slotProps:$={},slots:G={},TransitionProps:j}=t,V=Er(t,a4),se=Y.useRef(null),ue=Ra(se,i),Q=Y.useRef(null),de=Ra(Q,D),oe=Y.useRef(de);bv(()=>{oe.current=de},[de]),Y.useImperativeHandle(D,()=>Q.current,[]);const be=c4(I,f),[we,Ie]=Y.useState(be),[ke,ae]=Y.useState(Sw(c));Y.useEffect(()=>{Q.current&&Q.current.forceUpdate()}),Y.useEffect(()=>{c&&ae(Sw(c))},[c]),bv(()=>{if(!ke||!P)return;const st=Ge=>{Ie(Ge.placement)};let He=[{name:"preventOverflow",options:{altBoundary:o}},{name:"flip",options:{altBoundary:o}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Ge})=>{st(Ge)}}];x!=null&&(He=He.concat(x)),R&&R.modifiers!=null&&(He=He.concat(R.modifiers));const rt=i4(ke,se.current,Se({placement:be},R,{modifiers:He}));return oe.current(rt),()=>{rt.destroy(),oe.current(null)}},[ke,o,x,P,R,be]);const Ee={placement:we};j!==null&&(Ee.TransitionProps=j);const Ze=h4(),Qe=(a=G.root)!=null?a:"div",vt=Wz({elementType:Qe,externalSlotProps:$.root,externalForwardedProps:V,additionalProps:{role:"tooltip",ref:ue},ownerState:t,className:Ze.root});return q.jsx(Qe,Se({},vt,{children:typeof h=="function"?h(Ee):h}))}),p4=Y.forwardRef(function(t,i){const{anchorEl:a,children:c,container:h,direction:f="ltr",disablePortal:o=!1,keepMounted:x=!1,modifiers:P,open:I,placement:R="bottom",popperOptions:D=d4,popperRef:$,style:G,transition:j=!1,slotProps:V={},slots:se={}}=t,ue=Er(t,l4),[Q,de]=Y.useState(!0),oe=()=>{de(!1)},be=()=>{de(!0)};if(!x&&!I&&(!j||Q))return null;let we;if(h)we=h;else if(a){const ae=Sw(a);we=ae&&u4(ae)?ev(ae).body:ev(null).body}const Ie=!I&&x&&(!j||Q)?"none":void 0,ke=j?{in:I,onEnter:oe,onExited:be}:void 0;return q.jsx(JO,{disablePortal:o,container:we,children:q.jsx(f4,Se({anchorEl:a,direction:f,disablePortal:o,modifiers:P,ref:i,open:j?!Q:I,placement:R,popperOptions:D,popperRef:$,slotProps:V,slots:se},ue,{style:Se({position:"fixed",top:0,left:0,display:Ie},G),TransitionProps:ke,children:c}))})});function m4(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:i=!1,onClose:a,open:c,resumeHideDuration:h}=e,f=Lz();Y.useEffect(()=>{if(!c)return;function se(ue){ue.defaultPrevented||(ue.key==="Escape"||ue.key==="Esc")&&a?.(ue,"escapeKeyDown")}return document.addEventListener("keydown",se),()=>{document.removeEventListener("keydown",se)}},[c,a]);const o=Bp((se,ue)=>{a?.(se,ue)}),x=Bp(se=>{!a||se==null||f.start(se,()=>{o(null,"timeout")})});Y.useEffect(()=>(c&&x(t),f.clear),[c,t,x,f]);const P=se=>{a?.(se,"clickaway")},I=f.clear,R=Y.useCallback(()=>{t!=null&&x(h??t*.5)},[t,h,x]),D=se=>ue=>{const Q=se.onBlur;Q?.(ue),R()},$=se=>ue=>{const Q=se.onFocus;Q?.(ue),I()},G=se=>ue=>{const Q=se.onMouseEnter;Q?.(ue),I()},j=se=>ue=>{const Q=se.onMouseLeave;Q?.(ue),R()};return Y.useEffect(()=>{if(!i&&c)return window.addEventListener("focus",R),window.addEventListener("blur",I),()=>{window.removeEventListener("focus",R),window.removeEventListener("blur",I)}},[i,c,R,I]),{getRootProps:(se={})=>{const ue=Se({},Sf(e),Sf(se));return Se({role:"presentation"},se,ue,{onBlur:D(ue),onFocus:$(ue),onMouseEnter:G(ue),onMouseLeave:j(ue)})},onClickAway:P}}function WT(e){return typeof e.normalize<"u"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function g4(e={}){const{ignoreAccents:t=!0,ignoreCase:i=!0,limit:a,matchFrom:c="any",stringify:h,trim:f=!1}=e;return(o,{inputValue:x,getOptionLabel:P})=>{let I=f?x.trim():x;i&&(I=I.toLowerCase()),t&&(I=WT(I));const R=I?o.filter(D=>{let $=(h||P)(D);return i&&($=$.toLowerCase()),t&&($=WT($)),c==="start"?$.indexOf(I)===0:$.indexOf(I)>-1}):o;return typeof a=="number"?R.slice(0,a):R}}function l_(e,t){for(let i=0;i<e.length;i+=1)if(t(e[i]))return i;return-1}const y4=g4(),ZT=5,v4=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))},_4=[];function x4(e){const{unstable_isActiveElementInListbox:t=v4,unstable_classNamePrefix:i="Mui",autoComplete:a=!1,autoHighlight:c=!1,autoSelect:h=!1,blurOnSelect:f=!1,clearOnBlur:o=!e.freeSolo,clearOnEscape:x=!1,componentName:P="useAutocomplete",defaultValue:I=e.multiple?_4:null,disableClearable:R=!1,disableCloseOnSelect:D=!1,disabled:$,disabledItemsFocusable:G=!1,disableListWrap:j=!1,filterOptions:V=y4,filterSelectedOptions:se=!1,freeSolo:ue=!1,getOptionDisabled:Q,getOptionKey:de,getOptionLabel:oe=it=>{var tt;return(tt=it.label)!=null?tt:it},groupBy:be,handleHomeEndKeys:we=!e.freeSolo,id:Ie,includeInputInList:ke=!1,inputValue:ae,isOptionEqualToValue:Ee=(it,tt)=>it===tt,multiple:Ze=!1,onChange:Qe,onClose:vt,onHighlightChange:st,onInputChange:He,onOpen:rt,open:Ge,openOnFocus:Ve=!1,options:ut,readOnly:ve=!1,selectOnFocus:Fe=!e.freeSolo,value:pt}=e,Tt=_2(Ie);let Ct=oe;Ct=it=>{const tt=oe(it);return typeof tt!="string"?String(tt):tt};const _t=Y.useRef(!1),bt=Y.useRef(!0),nt=Y.useRef(null),kt=Y.useRef(null),[At,dr]=Y.useState(null),[ir,Gr]=Y.useState(-1),Tr=c?0:-1,or=Y.useRef(Tr),[qt,pr]=vb({controlled:pt,default:I,name:P}),[Xt,Ir]=vb({controlled:ae,default:"",name:P,state:"inputValue"}),[Rr,Br]=Y.useState(!1),Wr=Y.useCallback((it,tt)=>{if(!(Ze?qt.length<tt.length:tt!==null)&&!o)return;let Mr;if(Ze)Mr="";else if(tt==null)Mr="";else{const Ur=Ct(tt);Mr=typeof Ur=="string"?Ur:""}Xt!==Mr&&(Ir(Mr),He&&He(it,Mr,"reset"))},[Ct,Xt,Ze,He,Ir,o,qt]),[sn,On]=vb({controlled:Ge,default:!1,name:P,state:"open"}),[Tn,vn]=Y.useState(!0),Sr=!Ze&&qt!=null&&Xt===Ct(qt),Dr=sn&&!ve,ur=Dr?V(ut.filter(it=>!(se&&(Ze?qt:[qt]).some(tt=>tt!==null&&Ee(it,tt)))),{inputValue:Sr&&Tn?"":Xt,getOptionLabel:Ct}):[],Zr=Gz({filteredOptions:ur,value:qt,inputValue:Xt});Y.useEffect(()=>{const it=qt!==Zr.value;Rr&&!it||ue&&!it||Wr(null,qt)},[qt,Wr,Rr,Zr.value,ue]);const Ne=sn&&ur.length>0&&!ve,ee=Bp(it=>{it===-1?nt.current.focus():At.querySelector(`[data-tag-index="${it}"]`).focus()});Y.useEffect(()=>{Ze&&ir>qt.length-1&&(Gr(-1),ee(-1))},[qt,Ze,ir,ee]);function ie(it,tt){if(!kt.current||it<0||it>=ur.length)return-1;let Ht=it;for(;;){const Mr=kt.current.querySelector(`[data-option-index="${Ht}"]`),Ur=G?!1:!Mr||Mr.disabled||Mr.getAttribute("aria-disabled")==="true";if(Mr&&Mr.hasAttribute("tabindex")&&!Ur)return Ht;if(tt==="next"?Ht=(Ht+1)%ur.length:Ht=(Ht-1+ur.length)%ur.length,Ht===it)return-1}}const ce=Bp(({event:it,index:tt,reason:Ht="auto"})=>{if(or.current=tt,tt===-1?nt.current.removeAttribute("aria-activedescendant"):nt.current.setAttribute("aria-activedescendant",`${Tt}-option-${tt}`),st&&st(it,tt===-1?null:ur[tt],Ht),!kt.current)return;const Mr=kt.current.querySelector(`[role="option"].${i}-focused`);Mr&&(Mr.classList.remove(`${i}-focused`),Mr.classList.remove(`${i}-focusVisible`));let Ur=kt.current;if(kt.current.getAttribute("role")!=="listbox"&&(Ur=kt.current.parentElement.querySelector('[role="listbox"]')),!Ur)return;if(tt===-1){Ur.scrollTop=0;return}const sr=kt.current.querySelector(`[data-option-index="${tt}"]`);if(sr&&(sr.classList.add(`${i}-focused`),Ht==="keyboard"&&sr.classList.add(`${i}-focusVisible`),Ur.scrollHeight>Ur.clientHeight&&Ht!=="mouse"&&Ht!=="touch")){const An=sr,Vi=Ur.clientHeight+Ur.scrollTop,La=An.offsetTop+An.offsetHeight;La>Vi?Ur.scrollTop=La-Ur.clientHeight:An.offsetTop-An.offsetHeight*(be?1.3:0)<Ur.scrollTop&&(Ur.scrollTop=An.offsetTop-An.offsetHeight*(be?1.3:0))}}),Ce=Bp(({event:it,diff:tt,direction:Ht="next",reason:Mr="auto"})=>{if(!Dr)return;const sr=ie((()=>{const An=ur.length-1;if(tt==="reset")return Tr;if(tt==="start")return 0;if(tt==="end")return An;const Vi=or.current+tt;return Vi<0?Vi===-1&&ke?-1:j&&or.current!==-1||Math.abs(tt)>1?0:An:Vi>An?Vi===An+1&&ke?-1:j||Math.abs(tt)>1?An:0:Vi})(),Ht);if(ce({index:sr,reason:Mr,event:it}),a&&tt!=="reset")if(sr===-1)nt.current.value=Xt;else{const An=Ct(ur[sr]);nt.current.value=An,An.toLowerCase().indexOf(Xt.toLowerCase())===0&&Xt.length>0&&nt.current.setSelectionRange(Xt.length,An.length)}}),Be=()=>{const it=(tt,Ht)=>{const Mr=tt?Ct(tt):"",Ur=Ht?Ct(Ht):"";return Mr===Ur};if(or.current!==-1&&Zr.filteredOptions&&Zr.filteredOptions.length!==ur.length&&Zr.inputValue===Xt&&(Ze?qt.length===Zr.value.length&&Zr.value.every((tt,Ht)=>Ct(qt[Ht])===Ct(tt)):it(Zr.value,qt))){const tt=Zr.filteredOptions[or.current];if(tt)return l_(ur,Ht=>Ct(Ht)===Ct(tt))}return-1},Je=Y.useCallback(()=>{if(!Dr)return;const it=Be();if(it!==-1){or.current=it;return}const tt=Ze?qt[0]:qt;if(ur.length===0||tt==null){Ce({diff:"reset"});return}if(kt.current){if(tt!=null){const Ht=ur[or.current];if(Ze&&Ht&&l_(qt,Ur=>Ee(Ht,Ur))!==-1)return;const Mr=l_(ur,Ur=>Ee(Ur,tt));Mr===-1?Ce({diff:"reset"}):ce({index:Mr});return}if(or.current>=ur.length-1){ce({index:ur.length-1});return}ce({index:or.current})}},[ur.length,Ze?!1:qt,se,Ce,ce,Dr,Xt,Ze]),Ye=Bp(it=>{Z_(kt,it),it&&Je()});Y.useEffect(()=>{Je()},[Je]);const Ue=it=>{sn||(On(!0),vn(!0),rt&&rt(it))},Ke=(it,tt)=>{sn&&(On(!1),vt&&vt(it,tt))},gt=(it,tt,Ht,Mr)=>{if(Ze){if(qt.length===tt.length&&qt.every((Ur,sr)=>Ur===tt[sr]))return}else if(qt===tt)return;Qe&&Qe(it,tt,Ht,Mr),pr(tt)},et=Y.useRef(!1),Ae=(it,tt,Ht="selectOption",Mr="options")=>{let Ur=Ht,sr=tt;if(Ze){sr=Array.isArray(qt)?qt.slice():[];const An=l_(sr,Vi=>Ee(tt,Vi));An===-1?sr.push(tt):Mr!=="freeSolo"&&(sr.splice(An,1),Ur="removeOption")}Wr(it,sr),gt(it,sr,Ur,{option:tt}),!D&&(!it||!it.ctrlKey&&!it.metaKey)&&Ke(it,Ur),(f===!0||f==="touch"&&et.current||f==="mouse"&&!et.current)&&nt.current.blur()};function Ut(it,tt){if(it===-1)return-1;let Ht=it;for(;;){if(tt==="next"&&Ht===qt.length||tt==="previous"&&Ht===-1)return-1;const Mr=At.querySelector(`[data-tag-index="${Ht}"]`);if(!Mr||!Mr.hasAttribute("tabindex")||Mr.disabled||Mr.getAttribute("aria-disabled")==="true")Ht+=tt==="next"?1:-1;else return Ht}}const mr=(it,tt)=>{if(!Ze)return;Xt===""&&Ke(it,"toggleInput");let Ht=ir;ir===-1?Xt===""&&tt==="previous"&&(Ht=qt.length-1):(Ht+=tt==="next"?1:-1,Ht<0&&(Ht=0),Ht===qt.length&&(Ht=-1)),Ht=Ut(Ht,tt),Gr(Ht),ee(Ht)},Zt=it=>{_t.current=!0,Ir(""),He&&He(it,"","clear"),gt(it,Ze?[]:null,"clear")},Yt=it=>tt=>{if(it.onKeyDown&&it.onKeyDown(tt),!tt.defaultMuiPrevented&&(ir!==-1&&["ArrowLeft","ArrowRight"].indexOf(tt.key)===-1&&(Gr(-1),ee(-1)),tt.which!==229))switch(tt.key){case"Home":Dr&&we&&(tt.preventDefault(),Ce({diff:"start",direction:"next",reason:"keyboard",event:tt}));break;case"End":Dr&&we&&(tt.preventDefault(),Ce({diff:"end",direction:"previous",reason:"keyboard",event:tt}));break;case"PageUp":tt.preventDefault(),Ce({diff:-ZT,direction:"previous",reason:"keyboard",event:tt}),Ue(tt);break;case"PageDown":tt.preventDefault(),Ce({diff:ZT,direction:"next",reason:"keyboard",event:tt}),Ue(tt);break;case"ArrowDown":tt.preventDefault(),Ce({diff:1,direction:"next",reason:"keyboard",event:tt}),Ue(tt);break;case"ArrowUp":tt.preventDefault(),Ce({diff:-1,direction:"previous",reason:"keyboard",event:tt}),Ue(tt);break;case"ArrowLeft":mr(tt,"previous");break;case"ArrowRight":mr(tt,"next");break;case"Enter":if(or.current!==-1&&Dr){const Ht=ur[or.current],Mr=Q?Q(Ht):!1;if(tt.preventDefault(),Mr)return;Ae(tt,Ht,"selectOption"),a&&nt.current.setSelectionRange(nt.current.value.length,nt.current.value.length)}else ue&&Xt!==""&&Sr===!1&&(Ze&&tt.preventDefault(),Ae(tt,Xt,"createOption","freeSolo"));break;case"Escape":Dr?(tt.preventDefault(),tt.stopPropagation(),Ke(tt,"escape")):x&&(Xt!==""||Ze&&qt.length>0)&&(tt.preventDefault(),tt.stopPropagation(),Zt(tt));break;case"Backspace":if(Ze&&!ve&&Xt===""&&qt.length>0){const Ht=ir===-1?qt.length-1:ir,Mr=qt.slice();Mr.splice(Ht,1),gt(tt,Mr,"removeOption",{option:qt[Ht]})}break;case"Delete":if(Ze&&!ve&&Xt===""&&qt.length>0&&ir!==-1){const Ht=ir,Mr=qt.slice();Mr.splice(Ht,1),gt(tt,Mr,"removeOption",{option:qt[Ht]})}break}},rr=it=>{Br(!0),Ve&&!_t.current&&Ue(it)},vr=it=>{if(t(kt)){nt.current.focus();return}Br(!1),bt.current=!0,_t.current=!1,h&&or.current!==-1&&Dr?Ae(it,ur[or.current],"blur"):h&&ue&&Xt!==""?Ae(it,Xt,"blur","freeSolo"):o&&Wr(it,qt),Ke(it,"blur")},kr=it=>{const tt=it.target.value;Xt!==tt&&(Ir(tt),vn(!1),He&&He(it,tt,"input")),tt===""?!R&&!Ze&&gt(it,null,"clear"):Ue(it)},nn=it=>{const tt=Number(it.currentTarget.getAttribute("data-option-index"));or.current!==tt&&ce({event:it,index:tt,reason:"mouse"})},Xr=it=>{ce({event:it,index:Number(it.currentTarget.getAttribute("data-option-index")),reason:"touch"}),et.current=!0},wn=it=>{const tt=Number(it.currentTarget.getAttribute("data-option-index"));Ae(it,ur[tt],"selectOption"),et.current=!1},on=it=>tt=>{const Ht=qt.slice();Ht.splice(it,1),gt(tt,Ht,"removeOption",{option:qt[it]})},Mt=it=>{sn?Ke(it,"toggleInput"):Ue(it)},Fr=it=>{it.currentTarget.contains(it.target)&&it.target.getAttribute("id")!==Tt&&it.preventDefault()},en=it=>{it.currentTarget.contains(it.target)&&(nt.current.focus(),Fe&&bt.current&&nt.current.selectionEnd-nt.current.selectionStart===0&&nt.current.select(),bt.current=!1)},Io=it=>{!$&&(Xt===""||!sn)&&Mt(it)};let Ti=ue&&Xt.length>0;Ti=Ti||(Ze?qt.length>0:qt!==null);let Ot=ur;return be&&(Ot=ur.reduce((it,tt,Ht)=>{const Mr=be(tt);return it.length>0&&it[it.length-1].group===Mr?it[it.length-1].options.push(tt):it.push({key:Ht,index:Ht,group:Mr,options:[tt]}),it},[])),$&&Rr&&vr(),{getRootProps:(it={})=>Se({"aria-owns":Ne?`${Tt}-listbox`:null},it,{onKeyDown:Yt(it),onMouseDown:Fr,onClick:en}),getInputLabelProps:()=>({id:`${Tt}-label`,htmlFor:Tt}),getInputProps:()=>({id:Tt,value:Xt,onBlur:vr,onFocus:rr,onChange:kr,onMouseDown:Io,"aria-activedescendant":Dr?"":null,"aria-autocomplete":a?"both":"list","aria-controls":Ne?`${Tt}-listbox`:void 0,"aria-expanded":Ne,autoComplete:"off",ref:nt,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:$}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:Zt}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Mt}),getTagProps:({index:it})=>Se({key:it,"data-tag-index":it,tabIndex:-1},!ve&&{onDelete:on(it)}),getListboxProps:()=>({role:"listbox",id:`${Tt}-listbox`,"aria-labelledby":`${Tt}-label`,ref:Ye,onMouseDown:it=>{it.preventDefault()}}),getOptionProps:({index:it,option:tt})=>{var Ht;const Mr=(Ze?qt:[qt]).some(sr=>sr!=null&&Ee(tt,sr)),Ur=Q?Q(tt):!1;return{key:(Ht=de?.(tt))!=null?Ht:Ct(tt),tabIndex:-1,role:"option",id:`${Tt}-option-${it}`,onMouseMove:nn,onClick:wn,onTouchStart:Xr,"data-option-index":it,"aria-disabled":Ur,"aria-selected":Mr}},id:Tt,inputValue:Xt,value:qt,dirty:Ti,expanded:Dr&&At,popupOpen:Dr,focused:Rr||ir!==-1,anchorEl:At,setAnchorEl:dr,focusedTag:ir,groupedOptions:Ot}}const b4=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],w4=["component","slots","slotProps"],S4=["component"];function br(e,t){const{className:i,elementType:a,ownerState:c,externalForwardedProps:h,getSlotOwnerState:f,internalForwardedProps:o}=t,x=Er(t,b4),{component:P,slots:I={[e]:void 0},slotProps:R={[e]:void 0}}=h,D=Er(h,w4),$=I[e]||a,G=oI(R[e],c),j=iI(Se({className:i},x,{externalForwardedProps:e==="root"?D:void 0,externalSlotProps:G})),{props:{component:V},internalRef:se}=j,ue=Er(j.props,S4),Q=Ra(se,G?.ref,t.ref),de=f?f(ue):{},oe=Se({},c,de),be=e==="root"?V||P:V,we=nI($,Se({},e==="root"&&!P&&!I[e]&&o,e!=="root"&&!I[e]&&o,ue,be&&{as:be},{ref:Q}),oe);return Object.keys(de).forEach(Ie=>{delete we[Ie]}),[$,we]}function C4(e){return _i("MuiListItem",e)}const K_=xi("MuiListItem",["root","startAction","endAction","nested","nesting","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]),Y_=Y.createContext(!1),jx=Y.createContext(!1),bI=Y.createContext(!1),A2=Y.createContext(void 0),wI=Y.createContext(void 0),SI=Y.createContext(void 0),T4=["component","className","children","nested","sticky","variant","color","startAction","endAction","role","slots","slotProps"],M4=e=>{const{sticky:t,nested:i,nesting:a,variant:c,color:h}=e,f={root:["root",i&&"nested",a&&"nesting",t&&"sticky",h&&`color${wr(h)}`,c&&`variant${wr(c)}`],startAction:["startAction"],endAction:["endAction"]};return ui(f,C4,{})},P4=Qt("li")(({theme:e,ownerState:t})=>{var i;return[!t.nested&&{"--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItemButton-marginBlock":"calc(-1 * var(--ListItem-paddingY))",alignItems:"center",gap:"var(--ListItem-gap)",marginInline:"var(--ListItem-marginInline)"},t.nested&&{"--NestedList-marginRight":"calc(-1 * var(--ListItem-paddingRight))","--NestedList-marginLeft":"calc(-1 * var(--ListItem-paddingLeft))","--NestedListItem-paddingLeft":"calc(var(--ListItem-paddingLeft) + var(--List-nestedInsetStart))","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItem-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))",flexDirection:"column"},Se({"--unstable_actionRadius":"calc(var(--ListItem-radius) - var(--variant-borderWidth, 0px))"},t.startAction&&{"--unstable_startActionWidth":"2rem"},t.endAction&&{"--unstable_endActionWidth":"2.5rem"},{boxSizing:"border-box",borderRadius:"var(--ListItem-radius)",display:"var(--_ListItem-display)","&:not([hidden])":{"--_ListItem-display":"var(--_List-markerDisplay, flex)"},flex:"none",listStyleType:"var(--_List-markerType, disc)",position:"relative",paddingBlockStart:t.nested?0:"var(--ListItem-paddingY)",paddingBlockEnd:t.nested?0:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)"},t["data-first-child"]===void 0&&Se({},t.row?{marginInlineStart:"var(--List-gap)"}:{marginBlockStart:"var(--List-gap)"}),t.row&&t.wrap&&{marginInlineStart:"var(--List-gap)",marginBlockStart:"var(--List-gap)"},{minBlockSize:"var(--ListItem-minHeight)"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:`var(--ListItem-stickyBackground, ${e.vars.palette.background.body})`},{[`.${K_.nested} > &`]:{"--_ListItem-display":"flex"}}),(i=e.variants[t.variant])==null?void 0:i[t.color]]}),E4=Qt(P4,{name:"JoyListItem",slot:"Root",overridesResolver:(e,t)=>t.root})({}),I4=Qt("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",left:0,transform:"translate(var(--ListItem-startActionTranslateX), -50%)",zIndex:1})),k4=Qt("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",right:0,transform:"translate(var(--ListItem-endActionTranslateX), -50%)"})),hl=Y.forwardRef(function(t,i){const a=bi({props:t,name:"JoyListItem"}),c=Y.useContext(SI),h=Y.useContext(A2),f=Y.useContext(jx),o=Y.useContext(bI),x=Y.useContext(Y_),{component:P,className:I,children:R,nested:D=!1,sticky:$=!1,variant:G="plain",color:j="neutral",startAction:V,endAction:se,role:ue,slots:Q={},slotProps:de={}}=a,oe=Er(a,T4),[be,we]=Y.useState(""),[Ie,ke]=h?.split(":")||["",""],ae=P||(Ie&&!Ie.match(/^(ul|ol|menu)$/)?"div":void 0);let Ee=c==="menu"?"none":void 0;h&&(Ee={menu:"none",menubar:"none",group:"presentation"}[ke]),ue&&(Ee=ue);const Ze=Se({},a,{sticky:$,startAction:V,endAction:se,row:f,wrap:o,variant:G,color:j,nesting:x,nested:D,component:ae,role:Ee}),Qe=M4(Ze),vt=Se({},oe,{component:ae,slots:Q,slotProps:de}),[st,He]=br("root",{additionalProps:{role:Ee},ref:i,className:ci(Qe.root,I),elementType:E4,externalForwardedProps:vt,ownerState:Ze}),[rt,Ge]=br("startAction",{className:Qe.startAction,elementType:I4,externalForwardedProps:vt,ownerState:Ze}),[Ve,ut]=br("endAction",{className:Qe.endAction,elementType:k4,externalForwardedProps:vt,ownerState:Ze});return q.jsx(wI.Provider,{value:we,children:q.jsx(Y_.Provider,{value:D?be||!0:!1,children:q.jsxs(st,Se({},He,{children:[V&&q.jsx(rt,Se({},Ge,{children:V})),Y.Children.map(R,(ve,Fe)=>{var pt;return Y.isValidElement(ve)?Y.cloneElement(ve,Se({},Fe===0&&{"data-first-child":""},Vv(ve,["ListItem"])&&{component:((pt=ve.props)==null?void 0:pt.component)||"div"})):ve}),se&&q.jsx(Ve,Se({},ut,{children:se}))]}))})})});hl.muiName="ListItem";const A4={"--NestedList-marginRight":"0px","--NestedList-marginLeft":"0px","--NestedListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px"};function CI(e){const{children:t,nested:i,row:a=!1,wrap:c=!1}=e,h=q.jsx(jx.Provider,{value:a,children:q.jsx(bI.Provider,{value:c,children:Y.Children.map(t,(f,o)=>Y.isValidElement(f)?Y.cloneElement(f,Se({},o===0&&{"data-first-child":""},o===Y.Children.count(t)-1&&{"data-last-child":""})):f)})});return i===void 0?h:q.jsx(Y_.Provider,{value:i,children:h})}const rm=({theme:e,ownerState:t},i)=>{let a={};function c(h){if(typeof h=="function"){const f=h(e);c(f)}else Array.isArray(h)?h.forEach(f=>{typeof f!="boolean"&&c(f)}):typeof h=="object"&&(a=Se({},a,h))}return t.sx&&(c(t.sx),i.forEach(h=>{const f=a[h];if(typeof f=="string"||typeof f=="number")if(h==="borderRadius")if(typeof f=="number")a[h]=`${f}px`;else{var o;a[h]=((o=e.vars)==null?void 0:o.radius[f])||f}else["p","padding","m","margin"].indexOf(h)!==-1&&typeof f=="number"?a[h]=e.spacing(f):a[h]=f;else typeof f=="function"?a[h]=f(e):a[h]=void 0})),a};function R4(e){return _i("MuiList",e)}const D4=xi("MuiList",["root","nesting","scoped","sizeSm","sizeMd","sizeLg","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","horizontal","vertical"]),z4=Y.createContext(void 0),O4=["component","className","children","size","orientation","wrap","variant","color","role","slots","slotProps"],L4=e=>{const{variant:t,color:i,size:a,nesting:c,orientation:h,instanceSize:f}=e,o={root:["root",h,t&&`variant${wr(t)}`,i&&`color${wr(i)}`,!f&&!c&&a&&`size${wr(a)}`,f&&`size${wr(f)}`,c&&"nesting"]};return ui(o,R4,{})},TI=Qt("ul")(({theme:e,ownerState:t})=>{var i;const{p:a,padding:c,borderRadius:h}=rm({theme:e,ownerState:t},["p","padding","borderRadius"]);function f(o){return o==="sm"?{"--ListDivider-gap":"0.25rem","--ListItem-minHeight":"2rem","--ListItem-paddingY":"3px","--ListItem-paddingX":t.marker?"3px":"0.5rem","--ListItem-gap":"0.5rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.5rem":"2rem","--Icon-fontSize":e.vars.fontSize.lg}:o==="md"?{"--ListDivider-gap":"0.375rem","--ListItem-minHeight":"2.25rem","--ListItem-paddingY":"0.25rem","--ListItem-paddingX":t.marker?"0.25rem":"0.75rem","--ListItem-gap":"0.625rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.75rem":"2.5rem","--Icon-fontSize":e.vars.fontSize.xl}:o==="lg"?{"--ListDivider-gap":"0.5rem","--ListItem-minHeight":"2.75rem","--ListItem-paddingY":"0.375rem","--ListItem-paddingX":t.marker?"0.5rem":"1rem","--ListItem-gap":"0.75rem","--ListItemDecorator-size":t.orientation==="horizontal"?"2.25rem":"3rem","--Icon-fontSize":e.vars.fontSize.xl2}:{}}return[t.nesting&&Se({},f(t.instanceSize),{"--ListItem-paddingRight":"var(--ListItem-paddingX)","--ListItem-paddingLeft":"var(--NestedListItem-paddingLeft)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px",padding:0},t.marker&&{paddingInlineStart:"calc(3ch - var(--_List-markerDeduct, 0px))"},{marginInlineStart:"var(--NestedList-marginLeft)",marginInlineEnd:"var(--NestedList-marginRight)",marginBlockStart:"var(--List-gap)",marginBlockEnd:"initial"}),!t.nesting&&Se({},f(t.size),{"--List-gap":"0px","--List-nestedInsetStart":"0px","--ListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItem-paddingRight":"var(--ListItem-paddingX)"},t.marker&&{"--_List-markerDeduct":"1ch"},{"--unstable_List-childRadius":"calc(max(var(--List-radius) - var(--List-padding), min(var(--List-padding) / 2, var(--List-radius) / 2)) - var(--variant-borderWidth, 0px))","--ListItem-radius":"var(--unstable_List-childRadius)","--ListItem-startActionTranslateX":"calc(0.5 * var(--ListItem-paddingLeft))","--ListItem-endActionTranslateX":"calc(-0.5 * var(--ListItem-paddingRight))",margin:"initial"},e.typography[`body-${t.size}`],t.orientation==="horizontal"?Se({},t.wrap?{padding:"var(--List-padding)",marginInlineStart:"calc(-1 * var(--List-gap))",marginBlockStart:"calc(-1 * var(--List-gap))"}:{paddingInline:"var(--List-padding, var(--ListDivider-gap))",paddingBlock:"var(--List-padding)"}):{paddingBlock:"var(--List-padding, var(--ListDivider-gap))",paddingInline:"var(--List-padding)"},t.marker&&{paddingInlineStart:"3ch"}),Se({boxSizing:"border-box",borderRadius:"var(--List-radius)",listStyle:"none",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},t.wrap&&{flexWrap:"wrap"},t.marker&&{"--_List-markerDisplay":"list-item","--_List-markerType":t.marker,lineHeight:"calc(var(--ListItem-minHeight) - 2 * var(--ListItem-paddingY))"},{flexGrow:1,position:"relative"},(i=e.variants[t.variant])==null?void 0:i[t.color],{"--unstable_List-borderWidth":"var(--variant-borderWidth, 0px)"},h!==void 0&&{"--List-radius":h},a!==void 0&&{"--List-padding":a},c!==void 0&&{"--List-padding":c})]}),F4=Qt(TI,{name:"JoyList",slot:"Root",overridesResolver:(e,t)=>t.root})({}),nm=Y.forwardRef(function(t,i){var a;const c=Y.useContext(Y_),h=Y.useContext(SI),f=Y.useContext(z4),o=bi({props:t,name:"JoyList"}),{component:x,className:P,children:I,size:R,orientation:D="vertical",wrap:$=!1,variant:G="plain",color:j="neutral",role:V,slots:se={},slotProps:ue={}}=o,Q=Er(o,O4),de=R||((a=t.size)!=null?a:"md");let oe;h&&(oe="group"),f&&(oe="presentation"),V&&(oe=V);const be=Se({},o,{instanceSize:t.size,size:de,nesting:c,orientation:D,wrap:$,variant:G,color:j,role:oe}),we=L4(be),Ie=Se({},Q,{component:x,slots:se,slotProps:ue}),[ke,ae]=br("root",{ref:i,className:ci(we.root,P),elementType:F4,externalForwardedProps:Ie,ownerState:be,additionalProps:{as:x,role:oe,"aria-labelledby":typeof c=="string"?c:void 0}});return q.jsx(ke,Se({},ae,{children:q.jsx(A2.Provider,{value:`${typeof x=="string"?x:""}:${oe||""}`,children:q.jsx(CI,{row:D==="horizontal",wrap:$,children:I})})}))});function B4(e){return _i("MuiListItemButton",e)}const A_=xi("MuiListItemButton",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","variantPlain","variantSoft","variantOutlined","variantSolid"]),MI=Y.createContext("horizontal"),$4=["children","className","action","component","orientation","role","selected","color","variant","slots","slotProps"],j4=e=>{const{color:t,disabled:i,focusVisible:a,focusVisibleClassName:c,selected:h,variant:f}=e,o={root:["root",i&&"disabled",a&&"focusVisible",t&&`color${wr(t)}`,h&&"selected",f&&`variant${wr(f)}`]},x=ui(o,B4,{});return a&&c&&(x.root+=` ${c}`),x},PI=Qt("div")(({theme:e,ownerState:t})=>{var i,a,c,h,f,o;return Se({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,WebkitTapHighlightColor:"transparent",boxSizing:"border-box",position:"relative",font:"inherit",display:"flex",flexDirection:"row",alignItems:"center",alignSelf:"stretch",gap:"var(--ListItem-gap)"},t.orientation==="vertical"&&{flexDirection:"column",justifyContent:"center"},{textAlign:"initial",textDecoration:"initial",backgroundColor:"initial",cursor:"pointer",marginInline:"var(--ListItemButton-marginInline)",marginBlock:"var(--ListItemButton-marginBlock)"},t["data-first-child"]===void 0&&{marginInlineStart:t.row?"var(--List-gap)":void 0,marginBlockStart:t.row?void 0:"var(--List-gap)"},{paddingBlock:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px))",paddingInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItem-startActionWidth, var(--unstable_startActionWidth, 0px)))",paddingInlineEnd:"calc(var(--ListItem-paddingRight) + var(--ListItem-endActionWidth, var(--unstable_endActionWidth, 0px)))",minBlockSize:"var(--ListItem-minHeight)",border:"1px solid transparent",borderRadius:"var(--ListItem-radius)",flex:"var(--unstable_ListItem-flex, none)",fontSize:"inherit",lineHeight:"inherit",minInlineSize:0,[e.focus.selector]:Se({},e.focus.default,{zIndex:1})},(i=e.variants[t.variant])==null?void 0:i[t.color],{"&:active":(a=e.variants[`${t.variant}Active`])==null?void 0:a[t.color],[`.${K_.root} > &`]:{"--unstable_ListItem-flex":"1 0 0%"},[`&.${A_.selected}`]:Se({},(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color],{"--Icon-color":"currentColor"}),[`&:not(.${A_.selected}, [aria-selected="true"])`]:{"&:hover":(h=e.variants[`${t.variant}Hover`])==null?void 0:h[t.color],"&:active":(f=e.variants[`${t.variant}Active`])==null?void 0:f[t.color]},[`&.${A_.disabled}`]:Se({},(o=e.variants[`${t.variant}Disabled`])==null?void 0:o[t.color])})}),N4=Qt(PI,{name:"JoyListItemButton",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>Se({},!e.row&&{[`&.${A_.selected}`]:{fontWeight:t.vars.fontWeight.md}})),$p=Y.forwardRef(function(t,i){const a=bi({props:t,name:"JoyListItemButton"}),c=Y.useContext(jx),{children:h,className:f,action:o,component:x="div",orientation:P="horizontal",role:I,selected:R=!1,color:D="neutral",variant:$="plain",slots:G={},slotProps:j={}}=a,V=Er(a,$4),se=Y.useRef(null),ue=Ra(se,i),{focusVisible:Q,setFocusVisible:de,getRootProps:oe}=Uv(Se({},a,{rootRef:ue}));Y.useImperativeHandle(o,()=>({focusVisible:()=>{var Ee;de(!0),(Ee=se.current)==null||Ee.focus()}}),[de]);const be=Se({},a,{component:x,color:D,focusVisible:Q,orientation:P,row:c,selected:R,variant:$}),we=j4(be),Ie=Se({},V,{component:x,slots:G,slotProps:j}),[ke,ae]=br("root",{ref:i,className:ci(we.root,f),elementType:N4,externalForwardedProps:Ie,ownerState:be,getSlotProps:oe});return q.jsx(MI.Provider,{value:P,children:q.jsx(ke,Se({},ae,{role:I??ae.role,children:h}))})});function V4(e){return _i("MuiSvgIcon",e)}xi("MuiSvgIcon",["root","colorInherit","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","fontSizeInherit","fontSizeXs","fontSizeSm","fontSizeMd","fontSizeLg","fontSizeXl","fontSizeXl2","fontSizeXl3","fontSizeXl4","sizeSm","sizeMd","sizeLg"]);const U4=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox","size","slots","slotProps"],G4=e=>{const{color:t,size:i,fontSize:a}=e,c={root:["root",t&&t!=="inherit"&&`color${wr(t)}`,i&&`size${wr(i)}`,a&&`fontSize${wr(a)}`]};return ui(c,V4,{})},XT={sm:"xl",md:"xl2",lg:"xl3"},q4=Qt("svg",{name:"JoySvgIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var i;return Se({},t.instanceSize&&{"--Icon-fontSize":e.vars.fontSize[XT[t.instanceSize]]},t.instanceFontSize&&t.instanceFontSize!=="inherit"&&{"--Icon-fontSize":e.vars.fontSize[t.instanceFontSize]},{userSelect:"none",margin:"var(--Icon-margin)",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,fontSize:`var(--Icon-fontSize, ${e.vars.fontSize[XT[t.size]]||"unset"})`},t.fontSize&&t.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${e.fontSize[t.fontSize]})`},!t.htmlColor&&Se({color:`var(--Icon-color, ${e.vars.palette.text.icon})`},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&e.vars.palette[t.color]&&{color:`rgba(${(i=e.vars.palette[t.color])==null?void 0:i.mainChannel} / 1)`}))}),KT=Y.forwardRef(function(t,i){const a=bi({props:t,name:"JoySvgIcon"}),{children:c,className:h,color:f,component:o="svg",fontSize:x,htmlColor:P,inheritViewBox:I=!1,titleAccess:R,viewBox:D="0 0 24 24",size:$="md",slots:G={},slotProps:j={}}=a,V=Er(a,U4),se=Y.isValidElement(c)&&c.type==="svg",ue=Se({},a,{color:f,component:o,size:$,instanceSize:t.size,fontSize:x,instanceFontSize:t.fontSize,inheritViewBox:I,viewBox:D,hasSvgAsChild:se}),Q=G4(ue),de=Se({},V,{component:o,slots:G,slotProps:j}),[oe,be]=br("root",{ref:i,className:ci(Q.root,h),elementType:q4,externalForwardedProps:de,ownerState:ue,additionalProps:Se({color:P,focusable:!1},R&&{role:"img"},!R&&{"aria-hidden":!0},!I&&{viewBox:D},se&&c.props)});return q.jsxs(oe,Se({},be,{children:[se?c.props.children:c,R?q.jsx("title",{children:R}):null]}))});function R2(e,t){function i(a,c){return q.jsx(KT,Se({"data-testid":`${t}Icon`,ref:c},a,{children:e}))}return i.muiName=KT.muiName,Y.memo(Y.forwardRef(i))}const D2=e=>t=>`--${e?`${e}-`:""}${t.replace(/^--/,"")}`,$g="data-skip-inverted-colors",EI=`& :not([${$g}], [${$g}] *)`,II=e=>{var t,i,a,c,h,f,o,x,P,I,R,D,$,G,j,V,se,ue,Q,de,oe,be;const we=D2(e.cssVarPrefix);return{"--variant-plainColor":"var(--variant-plainColor) !important","--variant-plainHoverColor":"var(--variant-plainHoverColor) !important","--variant-plainHoverBg":"var(--variant-plainHoverBg) !important","--variant-plainActiveBg":"var(--variant-plainActiveBg) !important","--variant-plainDisabledColor":"var(--variant-plainDisabledColor) !important","--variant-outlinedColor":"var(--variant-outlinedColor) !important","--variant-outlinedBorder":"var(--variant-outlinedBorder) !important","--variant-outlinedHoverColor":"var(--variant-outlinedHoverColor) !important","--variant-outlinedHoverBorder":"var(--variant-outlinedHoverBorder) !important","--variant-outlinedHoverBg":"var(--variant-outlinedHoverBg) !important","--variant-outlinedActiveBg":"var(--variant-outlinedActiveBg) !important","--variant-outlinedDisabledColor":"var(--variant-outlinedDisabledColor) !important","--variant-outlinedDisabledBorder":"var(--variant-outlinedDisabledBorder) !important","--variant-softColor":"var(--variant-softColor) !important","--variant-softHoverColor":"var(--variant-softHoverColor) !important","--variant-softBg":"var(--variant-softBg) !important","--variant-softHoverBg":"var(--variant-softHoverBg) !important","--variant-softActiveBg":"var(--variant-softActiveBg) !important","--variant-softActiveColor":"var(--variant-softActiveColor) !important","--variant-softDisabledColor":"var(--variant-softDisabledColor) !important","--variant-softDisabledBg":"var(--variant-softDisabledBg) !important","--variant-solidColor":"var(--variant-solidColor) !important","--variant-solidBg":"var(--variant-solidBg) !important","--variant-solidHoverBg":"var(--variant-solidHoverBg) !important","--variant-solidActiveBg":"var(--variant-solidActiveBg) !important","--variant-solidDisabledColor":"var(--variant-solidDisabledColor) !important","--variant-solidDisabledBg":"var(--variant-solidDisabledBg) !important","--Badge-ringColor":"var(--Badge-ringColor) !important",colorScheme:"unset",[e.getColorSchemeSelector("light")]:{[we("--palette-focusVisible")]:`${(t=e.colorSchemes.light)==null?void 0:t.palette.focusVisible} !important`,[we("--palette-background-body")]:`${(i=e.colorSchemes.light)==null?void 0:i.palette.background.body} !important`,[we("--palette-background-surface")]:`${(a=e.colorSchemes.light)==null?void 0:a.palette.background.surface} !important`,[we("--palette-background-popup")]:`${(c=e.colorSchemes.light)==null?void 0:c.palette.background.popup} !important`,[we("--palette-background-level1")]:`${(h=e.colorSchemes.light)==null?void 0:h.palette.background.level1} !important`,[we("--palette-background-level2")]:`${(f=e.colorSchemes.light)==null?void 0:f.palette.background.level2} !important`,[we("--palette-background-level3")]:`${(o=e.colorSchemes.light)==null?void 0:o.palette.background.level3} !important`,[we("--palette-text-primary")]:`${(x=e.colorSchemes.light)==null?void 0:x.palette.text.primary} !important`,[we("--palette-text-secondary")]:`${(P=e.colorSchemes.light)==null?void 0:P.palette.text.secondary} !important`,[we("--palette-text-tertiary")]:`${(I=e.colorSchemes.light)==null?void 0:I.palette.text.tertiary} !important`,[we("--palette-divider")]:`${(R=e.colorSchemes.light)==null?void 0:R.palette.divider} !important`},[e.getColorSchemeSelector("dark")]:{[we("--palette-focusVisible")]:`${(D=e.colorSchemes.dark)==null?void 0:D.palette.focusVisible} !important`,[we("--palette-background-body")]:`${($=e.colorSchemes.dark)==null?void 0:$.palette.background.body} !important`,[we("--palette-background-surface")]:`${(G=e.colorSchemes.dark)==null?void 0:G.palette.background.surface} !important`,[we("--palette-background-popup")]:`${(j=e.colorSchemes.dark)==null?void 0:j.palette.background.popup} !important`,[we("--palette-background-level1")]:`${(V=e.colorSchemes.dark)==null?void 0:V.palette.background.level1} !important`,[we("--palette-background-level2")]:`${(se=e.colorSchemes.dark)==null?void 0:se.palette.background.level2} !important`,[we("--palette-background-level3")]:`${(ue=e.colorSchemes.dark)==null?void 0:ue.palette.background.level3} !important`,[we("--palette-text-primary")]:`${(Q=e.colorSchemes.dark)==null?void 0:Q.palette.text.primary} !important`,[we("--palette-text-secondary")]:`${(de=e.colorSchemes.dark)==null?void 0:de.palette.text.secondary} !important`,[we("--palette-text-tertiary")]:`${(oe=e.colorSchemes.dark)==null?void 0:oe.palette.text.tertiary} !important`,[we("--palette-divider")]:`${(be=e.colorSchemes.dark)==null?void 0:be.palette.divider} !important`}}};function H4(e){return e.theme!==void 0}const Nx=e=>t=>{const i=H4(t)?t.theme:t,a=S2(i.cssVarPrefix),c=D2(i.cssVarPrefix),h=f=>{const o=f.split("-");return a(f,i.palette[o[1]][o[2]])};return{[EI]:{"--Badge-ringColor":h(`palette-${e}-solidBg`),"--Icon-color":"currentColor",[`${i.getColorSchemeSelector("light")}, ${i.getColorSchemeSelector("dark")}`]:{colorScheme:"dark",[c("--palette-focusVisible")]:h(`palette-${e}-200`),[c("--palette-background-body")]:"rgba(0 0 0 / 0.1)",[c("--palette-background-surface")]:"rgba(0 0 0 / 0.06)",[c("--palette-background-popup")]:h(`palette-${e}-700`),[c("--palette-background-level1")]:`rgba(${h(`palette-${e}-darkChannel`)} / 0.2)`,[c("--palette-background-level2")]:`rgba(${h(`palette-${e}-darkChannel`)} / 0.36)`,[c("--palette-background-level3")]:`rgba(${h(`palette-${e}-darkChannel`)} / 0.6)`,[c("--palette-text-primary")]:h("palette-common-white"),[c("--palette-text-secondary")]:h(`palette-${e}-200`),[c("--palette-text-tertiary")]:h(`palette-${e}-300`),[c("--palette-text-icon")]:h(`palette-${e}-200`),[c("--palette-divider")]:`rgba(${h(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainColor":h(`palette-${e}-50`),"--variant-plainHoverColor":"#fff","--variant-plainHoverBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${h(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedColor":h(`palette-${e}-50`),"--variant-outlinedBorder":`rgba(${h(`palette-${e}-lightChannel`)} / 0.5)`,"--variant-outlinedHoverColor":"#fff","--variant-outlinedHoverBorder":h(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${h(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":"rgba(255 255 255 / 0.2)","--variant-softColor":h("palette-common-white"),"--variant-softHoverColor":h("palette-common-white"),"--variant-softBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.24)`,"--variant-softHoverBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.36)`,"--variant-softActiveBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.16)`,"--variant-softActiveColor":"#fff","--variant-softDisabledColor":`rgba(${h(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.1)`,"--variant-solidColor":h(`palette-${e}-${e==="neutral"?"600":"500"}`),"--variant-solidBg":h("palette-common-white"),"--variant-solidHoverBg":h("palette-common-white"),"--variant-solidActiveBg":h(`palette-${e}-100`),"--variant-solidDisabledColor":`rgba(${h(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.1)`}},[`&, & [${$g}]`]:II(i)}},Vx=e=>t=>{const{theme:i=t}=t,a=S2(i.cssVarPrefix),c=D2(i.cssVarPrefix),h=f=>{const o=f.split("-");return a(f,i.palette[o[1]][o[2]])};return{[EI]:{"--Badge-ringColor":h(`palette-${e}-softBg`),"--Icon-color":"currentColor",[i.getColorSchemeSelector("dark")]:{[c("--palette-focusVisible")]:h(`palette-${e}-300`),[c("--palette-background-body")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.1)`,[c("--palette-background-surface")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.08)`,[c("--palette-background-level1")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.2)`,[c("--palette-background-level2")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.4)`,[c("--palette-background-level3")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.6)`,[c("--palette-text-primary")]:h(`palette-${e}-100`),[c("--palette-text-secondary")]:`rgba(${h(`palette-${e}-lightChannel`)} / 0.72)`,[c("--palette-text-tertiary")]:`rgba(${h(`palette-${e}-lightChannel`)} / 0.6)`,[c("--palette-text-icon")]:`rgba(${h(`palette-${e}-lightChannel`)} / 0.6)`,[c("--palette-divider")]:`rgba(${h(`palette-${e}-lightChannel`)} / 0.2)`,"--variant-plainColor":`rgba(${h(`palette-${e}-lightChannel`)} / 1)`,"--variant-plainHoverColor":h(`palette-${e}-50`),"--variant-plainHoverBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-plainActiveBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedColor":`rgba(${h(`palette-${e}-lightChannel`)} / 1)`,"--variant-outlinedHoverColor":h(`palette-${e}-50`),"--variant-outlinedBg":"initial","--variant-outlinedBorder":`rgba(${h(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverBorder":h(`palette-${e}-600`),"--variant-outlinedHoverBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-outlinedActiveBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":`rgba(${h(`palette-${e}-mainChannel`)} / 0.2)`,"--variant-softColor":h(`palette-${e}-200`),"--variant-softBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-softHoverColor":"#fff","--variant-softHoverBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-softActiveBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.48)`,"--variant-softDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-solidColor":"#fff","--variant-solidBg":h(`palette-${e}-500`),"--variant-solidHoverColor":"#fff","--variant-solidHoverBg":h(`palette-${e}-600`),"--variant-solidActiveBg":h(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.12)`},[i.getColorSchemeSelector("light")]:{[c("--palette-focusVisible")]:h(`palette-${e}-500`),[c("--palette-background-body")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.1)`,[c("--palette-background-surface")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.08)`,[c("--palette-background-level1")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.2)`,[c("--palette-background-level2")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.32)`,[c("--palette-background-level3")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.48)`,[c("--palette-text-primary")]:h(`palette-${e}-700`),[c("--palette-text-secondary")]:`rgba(${h(`palette-${e}-darkChannel`)} / 0.8)`,[c("--palette-text-tertiary")]:`rgba(${h(`palette-${e}-darkChannel`)} / 0.68)`,[c("--palette-text-icon")]:h(`palette-${e}-500`),[c("--palette-divider")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainColor":`rgba(${h(`palette-${e}-darkChannel`)} / 0.8)`,"--variant-plainHoverColor":`rgba(${h(`palette-${e}-darkChannel`)} / 1)`,"--variant-plainHoverBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-plainDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedColor":`rgba(${h(`palette-${e}-mainChannel`)} / 1)`,"--variant-outlinedBorder":`rgba(${h(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverColor":h(`palette-${e}-600`),"--variant-outlinedHoverBorder":h(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-outlinedDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedDisabledBorder":`rgba(${h(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-softColor":h(`palette-${e}-600`),"--variant-softBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.8)`,"--variant-softHoverColor":h(`palette-${e}-700`),"--variant-softHoverBg":h(`palette-${e}-200`),"--variant-softActiveBg":h(`palette-${e}-300`),"--variant-softDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-softDisabledBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.08)`,"--variant-solidColor":h("palette-common-white"),"--variant-solidBg":h(`palette-${e}-${e==="neutral"?"700":"500"}`),"--variant-solidHoverColor":h("palette-common-white"),"--variant-solidHoverBg":h(`palette-${e}-600`),"--variant-solidActiveBg":h(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-solidDisabledBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.08)`}},[`&, & [${$g}]`]:II(i)}};function W4(e){return _i("MuiAlert",e)}xi("MuiAlert",["root","startDecorator","endDecorator","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);const Z4=["children","className","color","invertedColors","role","variant","size","startDecorator","endDecorator","component","slots","slotProps"],X4=e=>{const{variant:t,color:i,size:a}=e,c={root:["root",a&&`size${wr(a)}`,i&&`color${wr(i)}`,t&&`variant${wr(t)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return ui(c,W4,{})},K4=Qt("div",{name:"JoyAlert",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var i;const{p:a,padding:c,borderRadius:h}=rm({theme:e,ownerState:t},["p","padding","borderRadius"]);return[Se({"--Alert-radius":e.vars.radius.sm,"--Alert-decoratorChildRadius":"max((var(--Alert-radius) - var(--variant-borderWidth, 0px)) - var(--Alert-padding), min(var(--Alert-padding) + var(--variant-borderWidth, 0px), var(--Alert-radius) / 2))","--Button-minHeight":"var(--Alert-decoratorChildHeight)","--IconButton-size":"var(--Alert-decoratorChildHeight)","--Button-radius":"var(--Alert-decoratorChildRadius)","--IconButton-radius":"var(--Alert-decoratorChildRadius)","--Icon-color":"currentColor"},t.size==="sm"&&{"--Alert-padding":"0.5rem","--Alert-decoratorChildHeight":"1.5rem","--Icon-fontSize":e.vars.fontSize.xl,gap:"0.5rem"},t.size==="md"&&{"--Alert-padding":"0.75rem","--Alert-decoratorChildHeight":"2rem","--Icon-fontSize":e.vars.fontSize.xl,gap:"0.625rem"},t.size==="lg"&&{"--Alert-padding":"1rem","--Alert-decoratorChildHeight":"2.375rem","--Icon-fontSize":e.vars.fontSize.xl2,gap:"0.875rem"},{backgroundColor:e.vars.palette.background.surface,display:"flex",position:"relative",alignItems:"center",padding:"var(--Alert-padding)",borderRadius:"var(--Alert-radius)"},e.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[t.size]}`],{fontWeight:e.vars.fontWeight.md},t.variant==="solid"&&t.color&&t.invertedColors&&Nx(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&Vx(t.color)(e),(i=e.variants[t.variant])==null?void 0:i[t.color]),a!==void 0&&{"--Alert-padding":a},c!==void 0&&{"--Alert-padding":c},h!==void 0&&{"--Alert-radius":h}]}),Y4=Qt("span",{name:"JoyAlert",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({display:"inherit",flex:"none"}),J4=Qt("span",{name:"JoyAlert",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({display:"inherit",flex:"none",marginLeft:"auto"}),Q4=Y.forwardRef(function(t,i){const a=bi({props:t,name:"JoyAlert"}),{children:c,className:h,color:f="neutral",invertedColors:o=!1,role:x="alert",variant:P="soft",size:I="md",startDecorator:R,endDecorator:D,component:$,slots:G={},slotProps:j={}}=a,V=Er(a,Z4),se=Se({},a,{color:f,invertedColors:o,variant:P,size:I}),ue=X4(se),Q=Se({},V,{component:$,slots:G,slotProps:j}),[de,oe]=br("root",{ref:i,className:ci(ue.root,h),elementType:K4,externalForwardedProps:Q,ownerState:se,additionalProps:{role:x}}),[be,we]=br("startDecorator",{className:ue.startDecorator,elementType:Y4,externalForwardedProps:Q,ownerState:se}),[Ie,ke]=br("endDecorator",{className:ue.endDecorator,elementType:J4,externalForwardedProps:Q,ownerState:se});return q.jsxs(de,Se({},oe,{children:[R&&q.jsx(be,Se({},we,{children:R})),c,D&&q.jsx(Ie,Se({},ke,{children:D}))]}))}),eF=R2(q.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),tF=R2(q.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),kI=Y.createContext(void 0);function Rp(e,t){let i=t,a=e;return e==="outlined"&&(i="neutral",a="plain"),e==="plain"&&(i="neutral"),{variant:a,color:i}}function AI(e,t,i=!1){const a=Y.useContext(kI),[c,h]=typeof a=="string"?a.split(":"):[],f=Rp(c||void 0,h||void 0);return f.variant=e||f.variant,f.color=t||(i?h:f.color),f}function RI({children:e,color:t,variant:i}){return q.jsx(kI.Provider,{value:`${i||""}:${t||""}`,children:e})}function rF(e){return _i("MuiIconButton",e)}const Cw=xi("MuiIconButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","loading","loadingIndicator"]),z2=Y.createContext({}),DI=Y.createContext(void 0);function nF(e){return _i("MuiCircularProgress",e)}xi("MuiCircularProgress",["root","determinate","svg","track","progress","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);let iF=e=>e,YT;const oF=["color","backgroundColor"],sF=["children","className","color","size","variant","thickness","determinate","value","component","slots","slotProps"],aF=u2({"0%":{transform:"rotate(-90deg)"},"100%":{transform:"rotate(270deg)"}}),lF=e=>{const{determinate:t,color:i,variant:a,size:c}=e,h={root:["root",t&&"determinate",i&&`color${wr(i)}`,a&&`variant${wr(a)}`,c&&`size${wr(c)}`],svg:["svg"],track:["track"],progress:["progress"]};return ui(h,nF,{})};function Jm(e,t){return`var(--CircularProgress-${e}Thickness, var(--CircularProgress-thickness, ${t}))`}const cF=Qt("span",{name:"JoyCircularProgress",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var i,a,c,h;const f=((i=t.variants[e.variant])==null?void 0:i[e.color])||{},{color:o,backgroundColor:x}=f,P=Er(f,oF);return Se({"--Icon-fontSize":"calc(0.4 * var(--_root-size))","--CircularProgress-trackColor":x,"--CircularProgress-progressColor":o,"--CircularProgress-percent":e.value,"--CircularProgress-linecap":"round"},e.size==="sm"&&{"--_root-size":"var(--CircularProgress-size, 24px)","--_track-thickness":Jm("track","3px"),"--_progress-thickness":Jm("progress","3px")},e.instanceSize==="sm"&&{"--CircularProgress-size":"24px"},e.size==="md"&&{"--_track-thickness":Jm("track","6px"),"--_progress-thickness":Jm("progress","6px"),"--_root-size":"var(--CircularProgress-size, 40px)"},e.instanceSize==="md"&&{"--CircularProgress-size":"40px"},e.size==="lg"&&{"--_track-thickness":Jm("track","8px"),"--_progress-thickness":Jm("progress","8px"),"--_root-size":"var(--CircularProgress-size, 64px)"},e.instanceSize==="lg"&&{"--CircularProgress-size":"64px"},e.thickness&&{"--_track-thickness":`${e.thickness}px`,"--_progress-thickness":`${e.thickness}px`},{"--_thickness-diff":"calc(var(--_track-thickness) - var(--_progress-thickness))","--_inner-size":"calc(var(--_root-size) - 2 * var(--variant-borderWidth, 0px))","--_outlined-inset":"max(var(--_track-thickness), var(--_progress-thickness))",width:"var(--_root-size)",height:"var(--_root-size)",borderRadius:"var(--_root-size)",margin:"var(--CircularProgress-margin)",boxSizing:"border-box",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0,position:"relative",color:o},e.children&&{fontFamily:t.vars.fontFamily.body,fontWeight:t.vars.fontWeight.md,fontSize:"calc(0.2 * var(--_root-size))"},P,e.variant==="outlined"&&{"&::before":Se({content:'""',display:"block",position:"absolute",borderRadius:"inherit",top:"var(--_outlined-inset)",left:"var(--_outlined-inset)",right:"var(--_outlined-inset)",bottom:"var(--_outlined-inset)"},P)},e.variant==="soft"&&{"--CircularProgress-trackColor":t.variants.soft.neutral.backgroundColor,"--CircularProgress-progressColor":(a=t.variants.solid)==null?void 0:a[e.color].backgroundColor},e.variant==="solid"&&{"--CircularProgress-trackColor":(c=t.variants.softHover)==null?void 0:c[e.color].backgroundColor,"--CircularProgress-progressColor":(h=t.variants.solid)==null?void 0:h[e.color].backgroundColor})}),uF=Qt("svg",{name:"JoyCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({width:"inherit",height:"inherit",display:"inherit",boxSizing:"inherit",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))"}),hF=Qt("circle",{name:"JoyCircularProgress",slot:"track",overridesResolver:(e,t)=>t.track})({cx:"50%",cy:"50%",r:"calc(var(--_inner-size) / 2 - var(--_track-thickness) / 2 + min(0px, var(--_thickness-diff) / 2))",fill:"transparent",strokeWidth:"var(--_track-thickness)",stroke:"var(--CircularProgress-trackColor)"}),dF=Qt("circle",{name:"JoyCircularProgress",slot:"progress",overridesResolver:(e,t)=>t.progress})({"--_progress-radius":"calc(var(--_inner-size) / 2 - var(--_progress-thickness) / 2 - max(0px, var(--_thickness-diff) / 2))","--_progress-length":"calc(2 * 3.1415926535 * var(--_progress-radius))",cx:"50%",cy:"50%",r:"var(--_progress-radius)",fill:"transparent",strokeWidth:"var(--_progress-thickness)",stroke:"var(--CircularProgress-progressColor)",strokeLinecap:"var(--CircularProgress-linecap, round)",strokeDasharray:"var(--_progress-length)",strokeDashoffset:"calc(var(--_progress-length) - var(--CircularProgress-percent) * var(--_progress-length) / 100)",transformOrigin:"center",transform:"rotate(-90deg)"},({ownerState:e})=>!e.determinate&&LE(YT||(YT=iF`
      animation: var(--CircularProgress-circulation, 0.8s linear 0s infinite normal none running)
        ${0};
    `),aF)),im=Y.forwardRef(function(t,i){const a=bi({props:t,name:"JoyCircularProgress"}),{children:c,className:h,color:f="primary",size:o="md",variant:x="soft",thickness:P,determinate:I=!1,value:R=I?0:25,component:D,slots:$={},slotProps:G={}}=a,j=Er(a,sF),V=Se({},a,{color:f,size:o,variant:x,thickness:P,value:R,determinate:I,instanceSize:t.size}),se=lF(V),ue=Se({},j,{component:D,slots:$,slotProps:G}),[Q,de]=br("root",{ref:i,className:ci(se.root,h),elementType:cF,externalForwardedProps:ue,ownerState:V,additionalProps:Se({role:"progressbar",style:{"--CircularProgress-percent":R}},R&&I&&{"aria-valuenow":Math.round(typeof R=="number"?R:Number(R||0))})}),[oe,be]=br("svg",{className:se.svg,elementType:uF,externalForwardedProps:ue,ownerState:V}),[we,Ie]=br("track",{className:se.track,elementType:hF,externalForwardedProps:ue,ownerState:V}),[ke,ae]=br("progress",{className:se.progress,elementType:dF,externalForwardedProps:ue,ownerState:V});return q.jsxs(Q,Se({},de,{children:[q.jsxs(oe,Se({},be,{children:[q.jsx(we,Se({},Ie)),q.jsx(ke,Se({},ae))]})),c]}))}),fF=["children","action","component","color","disabled","variant","loading","loadingIndicator","size","slots","slotProps"],pF=e=>{const{color:t,disabled:i,focusVisible:a,focusVisibleClassName:c,size:h,variant:f,loading:o}=e,x={root:["root",i&&"disabled",a&&"focusVisible",f&&`variant${wr(f)}`,t&&`color${wr(t)}`,h&&`size${wr(h)}`,o&&"loading"],loadingIndicator:["loadingIndicator"]},P=ui(x,rF,{});return a&&c&&(P.root+=` ${c}`),P},Ux=Qt("button")(({theme:e,ownerState:t})=>{var i,a,c,h;return[Se({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.instanceSize&&{"--IconButton-size":{sm:"2rem",md:"2.25rem",lg:"2.75rem"}[t.instanceSize]},t.size==="sm"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.6)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px"},t.size==="md"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.25rem) / 1.5)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2.25rem)",minHeight:"var(--IconButton-size, 2.25rem)",fontSize:e.vars.fontSize.md,paddingInline:"0.25rem"},t.size==="lg"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.75rem) / 1.571)","--CircularProgress-size":"28px","--CircularProgress-thickness":"4px",minWidth:"var(--IconButton-size, 2.75rem)",minHeight:"var(--IconButton-size, 2.75rem)",fontSize:e.vars.fontSize.lg,paddingInline:"0.375rem"},{WebkitTapHighlightColor:"transparent",paddingBlock:0,fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.md,margin:"var(--IconButton-margin)",borderRadius:`var(--IconButton-radius, ${e.vars.radius.sm})`,border:"none",boxSizing:"border-box",backgroundColor:"transparent",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",[e.focus.selector]:Se({"--Icon-color":"currentColor"},e.focus.default)}),Se({},(i=e.variants[t.variant])==null?void 0:i[t.color],{"&:hover":{"@media (hover: hover)":Se({"--Icon-color":"currentColor"},(a=e.variants[`${t.variant}Hover`])==null?void 0:a[t.color])},'&:active, &[aria-pressed="true"]':Se({"--Icon-color":"currentColor"},(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color]),"&:disabled":(h=e.variants[`${t.variant}Disabled`])==null?void 0:h[t.color]})]}),mF=Qt(Ux,{name:"JoyIconButton",slot:"Root",overridesResolver:(e,t)=>t.root})({}),gF=Qt("span",{name:"JoyIconButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})(({theme:e,ownerState:t})=>{var i,a;return Se({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(i=e.variants[t.variant])==null||(i=i[t.color])==null?void 0:i.color},t.disabled&&{color:(a=e.variants[`${t.variant}Disabled`])==null||(a=a[t.color])==null?void 0:a.color})}),ad=Y.forwardRef(function(t,i){var a;const c=bi({props:t,name:"JoyIconButton"}),{children:h,action:f,component:o="button",color:x="neutral",disabled:P,variant:I="plain",loading:R=!1,loadingIndicator:D,size:$="md",slots:G={},slotProps:j={}}=c,V=Er(c,fF),se=Y.useContext(z2),ue=Y.useContext(DI),Q=t.variant||se.variant||I,de=t.size||se.size||$,oe=t.color||se.color||x,be=(a=t.loading||t.disabled)!=null?a:se.disabled||R||P,we=Y.useRef(null),Ie=Ra(we,i),{focusVisible:ke,setFocusVisible:ae,getRootProps:Ee}=Uv(Se({},c,{disabled:be,rootRef:Ie})),Ze=D??q.jsx(im,{color:oe,thickness:{sm:2,md:3,lg:4}[de]||3});Y.useImperativeHandle(f,()=>({focusVisible:()=>{var Fe;ae(!0),(Fe=we.current)==null||Fe.focus()}}),[ae]);const Qe=Se({},c,{component:o,color:oe,disabled:be,variant:Q,loading:R,size:de,focusVisible:ke,instanceSize:t.size}),vt=pF(Qe),st=Fe=>{var pt;let Tt=c.onClick;if(typeof j.root=="function"?Tt=j.root(Qe).onClick:j.root&&(Tt=j.root.onClick),(pt=Tt)==null||pt(Fe),ue){var Ct;(Ct=ue.onClick)==null||Ct.call(ue,Fe,c.value)}};let He=c["aria-pressed"];typeof j.root=="function"?He=j.root(Qe)["aria-pressed"]:j.root&&(He=j.root["aria-pressed"]),ue!=null&&ue.value&&(Array.isArray(ue.value)?He=ue.value.indexOf(c.value)!==-1:He=ue.value===c.value);const rt=Se({},V,{component:o,slots:G,slotProps:j}),[Ge,Ve]=br("root",{ref:i,className:vt.root,elementType:mF,getSlotProps:Ee,externalForwardedProps:rt,ownerState:Qe,additionalProps:{onClick:st,"aria-pressed":He}}),[ut,ve]=br("loadingIndicator",{className:vt.loadingIndicator,elementType:gF,externalForwardedProps:rt,ownerState:Qe});return q.jsx(Ge,Se({},Ve,{children:R?q.jsx(ut,Se({},ve,{children:Ze})):h}))});ad.muiName="IconButton";function yF(e){return _i("MuiChip",e)}const Tw=xi("MuiChip",["root","clickable","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","disabled","endDecorator","focusVisible","label","labelSm","labelMd","labelLg","sizeSm","sizeMd","sizeLg","startDecorator","variantPlain","variantSolid","variantSoft","variantOutlined"]),zI=Y.createContext({disabled:void 0,variant:void 0,color:void 0}),vF=["children","className","color","onClick","disabled","size","variant","startDecorator","endDecorator","component","slots","slotProps"],_F=e=>{const{disabled:t,size:i,color:a,clickable:c,variant:h,focusVisible:f}=e,o={root:["root",t&&"disabled",a&&`color${wr(a)}`,i&&`size${wr(i)}`,h&&`variant${wr(h)}`,c&&"clickable"],action:["action",t&&"disabled",f&&"focusVisible"],label:["label",i&&`label${wr(i)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return ui(o,yF,{})},xF=Qt("div",{name:"JoyChip",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var i,a,c;const h=(i=e.variants[t.variant])==null?void 0:i[t.color],{borderRadius:f}=rm({theme:e,ownerState:t},["borderRadius"]);return[Se({"--Chip-decoratorChildOffset":"min(calc(var(--Chip-paddingInline) - (var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2), var(--Chip-paddingInline))","--Chip-decoratorChildRadius":"max(var(--_Chip-radius) - var(--variant-borderWidth, 0px) - var(--_Chip-paddingBlock), min(var(--_Chip-paddingBlock) + var(--variant-borderWidth, 0px), var(--_Chip-radius) / 2))","--Chip-deleteRadius":"var(--Chip-decoratorChildRadius)","--Chip-deleteSize":"var(--Chip-decoratorChildHeight)","--Avatar-radius":"var(--Chip-decoratorChildRadius)","--Avatar-size":"var(--Chip-decoratorChildHeight)","--Icon-margin":"initial","--Icon-color":"currentColor","--unstable_actionRadius":"var(--_Chip-radius)"},t.size==="sm"&&{"--Chip-paddingInline":"0.375rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.sm,"--_Chip-minHeight":"var(--Chip-minHeight, 1.25rem)",gap:"3px"},t.size==="md"&&{"--Chip-paddingInline":"0.5rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.25rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.md,"--_Chip-minHeight":"var(--Chip-minHeight, 1.5rem)",gap:"0.25rem"},t.size==="lg"&&{"--Chip-paddingInline":"0.75rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.375rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.lg,"--_Chip-minHeight":"var(--Chip-minHeight, 1.75rem)",gap:"0.375rem"},{"--_Chip-radius":"var(--Chip-radius, 1.5rem)","--_Chip-paddingBlock":"max((var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2, 0px)",minHeight:"var(--_Chip-minHeight)",maxWidth:"max-content",paddingInline:"var(--Chip-paddingInline)",borderRadius:"var(--_Chip-radius)",position:"relative",display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",textDecoration:"none",verticalAlign:"middle",boxSizing:"border-box"},e.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[t.size]}`],{fontWeight:e.vars.fontWeight.md,[`&.${Tw.disabled}`]:{color:(a=e.variants[`${t.variant}Disabled`])==null||(a=a[t.color])==null?void 0:a.color}}),...t.clickable?[{"--variant-borderWidth":"0px",color:h?.color}]:[Se({backgroundColor:e.vars.palette.background.surface},h,{[`&.${Tw.disabled}`]:(c=e.variants[`${t.variant}Disabled`])==null?void 0:c[t.color]})],f!==void 0&&{"--_Chip-radius":f}]}),bF=Qt("span",{name:"JoyChip",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>Se({display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",order:1,minInlineSize:0,flexGrow:1},e.clickable&&{zIndex:1,pointerEvents:"none"})),wF=Qt("button",{name:"JoyChip",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var i,a,c,h;return[{"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,position:"absolute",zIndex:0,top:0,left:0,bottom:0,right:0,width:"100%",border:"none",cursor:"pointer",padding:"initial",margin:"initial",backgroundColor:"initial",textDecoration:"none",borderRadius:"inherit",[e.focus.selector]:e.focus.default},Se({backgroundColor:e.vars.palette.background.surface},(i=e.variants[t.variant])==null?void 0:i[t.color]),{"&:hover":{"@media (hover: hover)":(a=e.variants[`${t.variant}Hover`])==null?void 0:a[t.color]}},{"&:active":(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color]},{[`&.${Tw.disabled}`]:(h=e.variants[`${t.variant}Disabled`])==null?void 0:h[t.color]}]}),SF=Qt("span",{name:"JoyChip",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Avatar-marginInlineStart":"calc(var(--Chip-decoratorChildOffset) * -1)","--IconButton-margin":"0 calc(-1 * var(--Chip-paddingInline) / 3) 0 calc(var(--Chip-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Chip-paddingInline) / -4)",display:"inherit",order:0,zIndex:1,pointerEvents:"none"}),CF=Qt("span",{name:"JoyChip",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--IconButton-margin":"0 calc(var(--Chip-decoratorChildOffset) * -1) 0 calc(-1 * var(--Chip-paddingInline) / 3)","--Icon-margin":"0 calc(var(--Chip-paddingInline) / -4) 0 0",display:"inherit",order:2,zIndex:1,pointerEvents:"none"}),TF=Y.forwardRef(function(t,i){const a=bi({props:t,name:"JoyChip"}),{children:c,className:h,color:f="neutral",onClick:o,disabled:x=!1,size:P="md",variant:I="soft",startDecorator:R,endDecorator:D,component:$,slots:G={},slotProps:j={}}=a,V=Er(a,vF),se=!!o||!!j.action,ue=Se({},a,{disabled:x,size:P,color:f,variant:I,clickable:se,focusVisible:!1}),Q=typeof j.action=="function"?j.action(ue):j.action,de=Y.useRef(null),{focusVisible:oe,getRootProps:be}=Uv(Se({},Q,{disabled:x,rootRef:de}));ue.focusVisible=oe;const we=_F(ue),Ie=Se({},V,{component:$,slots:G,slotProps:j}),[ke,ae]=br("root",{ref:i,className:ci(we.root,h),elementType:xF,externalForwardedProps:Ie,ownerState:ue}),[Ee,Ze]=br("label",{className:we.label,elementType:bF,externalForwardedProps:Ie,ownerState:ue}),Qe=_2(Ze.id),[vt,st]=br("action",{className:we.action,elementType:wF,externalForwardedProps:Ie,ownerState:ue,getSlotProps:be,additionalProps:{"aria-labelledby":Qe,as:Q?.component,onClick:o}}),[He,rt]=br("startDecorator",{className:we.startDecorator,elementType:SF,externalForwardedProps:Ie,ownerState:ue}),[Ge,Ve]=br("endDecorator",{className:we.endDecorator,elementType:CF,externalForwardedProps:Ie,ownerState:ue}),ut=Y.useMemo(()=>({disabled:x}),[x]);return q.jsx(zI.Provider,{value:ut,children:q.jsx(RI,{variant:I,color:f,children:q.jsxs(ke,Se({},ae,{children:[se&&q.jsx(vt,Se({},st)),q.jsx(Ee,Se({},Ze,{id:Qe,children:c})),R&&q.jsx(He,Se({},rt,{children:R})),D&&q.jsx(Ge,Se({},Ve,{children:D}))]}))})})}),MF=R2(q.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Cancel");function PF(e){return _i("MuiChipDelete",e)}xi("MuiChipDelete",["root","disabled","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSolid","variantSoft","variantOutlined"]);var JT;const EF=["children","variant","color","disabled","onKeyDown","onDelete","onClick","component","slots","slotProps"],IF=["onDelete"],kF=e=>{const{focusVisible:t,variant:i,color:a,disabled:c}=e,h={root:["root",c&&"disabled",t&&"focusVisible",i&&`variant${wr(i)}`,a&&`color${wr(a)}`]};return ui(h,PF,{})},AF=Qt(Ux,{name:"JoyChipDelete",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({"--IconButton-size":"var(--Chip-deleteSize, 2rem)","--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.3)",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px",pointerEvents:"visible",borderRadius:"var(--Chip-deleteRadius, 50%)",zIndex:1,padding:0})),RF=Y.forwardRef(function(t,i){const a=bi({props:t,name:"JoyChipDelete"}),{children:c,variant:h="plain",color:f="neutral",disabled:o,onKeyDown:x,onDelete:P,onClick:I,component:R,slots:D={},slotProps:$={}}=a,G=Er(a,EF),j=Y.useContext(zI),{variant:V=h,color:se=f}=AI(t.variant,t.color,!0),ue=t.color||se,Q=o??j.disabled,de=Y.useRef(null),oe=Ra(de,i),{focusVisible:be,getRootProps:we}=Uv(Se({},a,{disabled:Q,rootRef:oe})),Ie=Se({},a,{disabled:Q,variant:V,color:ue,focusVisible:be}),ke=kF(Ie),ae=Se({},G,{component:R,slots:D,slotProps:$}),Ee=He=>{!Q&&P&&P(He),I&&I(He)},Ze=He=>{["Backspace","Enter","Delete"].includes(He.key)&&(He.preventDefault(),!Q&&P&&P(He)),x&&x(He)},[Qe,vt]=br("root",{ref:i,elementType:AF,getSlotProps:we,externalForwardedProps:ae,ownerState:Ie,additionalProps:{as:R,onKeyDown:Ze,onClick:Ee},className:ke.root}),st=Er(vt,IF);return q.jsx(Qe,Se({},st,{children:c??(JT||(JT=q.jsx(MF,{})))}))});function DF(e){return _i("MuiInput",e)}const OI=xi("MuiInput",["root","input","formControl","focused","disabled","error","adornedStart","adornedEnd","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid","fullWidth","startDecorator","endDecorator"]),LI=Y.createContext(void 0),zF=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoFocus","className","defaultValue","disabled","disabledInProp","error","id","name","onClick","onChange","onKeyDown","onKeyUp","onFocus","onBlur","placeholder","readOnly","required","type","value"];function OF(e,t){var i;const a=Y.useContext(LI),{"aria-describedby":c,"aria-label":h,"aria-labelledby":f,autoComplete:o,autoFocus:x,className:P,defaultValue:I,disabled:R,disabledInProp:D,error:$,id:G,name:j,onClick:V,onChange:se,onKeyDown:ue,onKeyUp:Q,onFocus:de,onBlur:oe,placeholder:be,readOnly:we,required:Ie,type:ke,value:ae}=e,Ee=Er(e,zF),{getRootProps:Ze,getInputProps:Qe,focused:vt,error:st,disabled:He}=WO({disabled:(i=D??a?.disabled)!=null?i:R,defaultValue:I,error:$,onBlur:oe,onClick:V,onChange:se,onFocus:de,required:Ie??a?.required,value:ae}),rt={[t.disabled]:He,[t.error]:st,[t.focused]:vt,[t.formControl]:!!a,[P]:P},Ge={[t.disabled]:He};return Se({formControl:a,propsToForward:{"aria-describedby":c,"aria-label":h,"aria-labelledby":f,autoComplete:o,autoFocus:x,disabled:He,id:G,onKeyDown:ue,onKeyUp:Q,name:j,placeholder:be,readOnly:we,type:ke},rootStateClasses:rt,inputStateClasses:Ge,getRootProps:Ze,getInputProps:Qe,focused:vt,error:st,disabled:He},Ee)}const LF=["propsToForward","rootStateClasses","inputStateClasses","getRootProps","getInputProps","formControl","focused","error","disabled","fullWidth","size","color","variant","startDecorator","endDecorator","component","slots","slotProps"],FF=e=>{const{disabled:t,fullWidth:i,variant:a,color:c,size:h}=e,f={root:["root",t&&"disabled",i&&"fullWidth",a&&`variant${wr(a)}`,c&&`color${wr(c)}`,h&&`size${wr(h)}`],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return ui(f,DF,{})},FI=Qt("div")(({theme:e,ownerState:t})=>{var i,a,c,h,f,o;const x=(i=e.variants[`${t.variant}`])==null?void 0:i[t.color];return[Se({"--Input-radius":e.vars.radius.sm,"--Input-gap":"0.5rem","--Input-placeholderColor":"inherit","--Input-placeholderOpacity":.64,"--Input-decoratorColor":e.vars.palette.text.icon,"--Input-focused":"0","--Input-focusedThickness":e.vars.focus.thickness,"--Input-focusedHighlight":(a=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:a[500],[`&:not([${$g}])`]:Se({},t.instanceColor&&{"--_Input-focusedHighlight":(c=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:c[500]},{"--Input-focusedHighlight":`var(--_Input-focusedHighlight, ${e.vars.palette.focusVisible})`})},t.size==="sm"&&{"--Input-minHeight":"2rem","--Input-paddingInline":"0.5rem","--Input-decoratorChildHeight":"min(1.5rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Input-minHeight":"2.25rem","--Input-paddingInline":"0.75rem","--Input-decoratorChildHeight":"min(1.75rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Input-minHeight":"2.75rem","--Input-paddingInline":"1rem","--Input-gap":"0.75rem","--Input-decoratorChildHeight":"min(2.25rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Input-decoratorChildOffset":"min(calc(var(--Input-paddingInline) - (var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2), var(--Input-paddingInline))","--_Input-paddingBlock":"max((var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2, 0px)","--Input-decoratorChildRadius":"max(var(--Input-radius) - var(--variant-borderWidth, 0px) - var(--_Input-paddingBlock), min(var(--_Input-paddingBlock) + var(--variant-borderWidth, 0px), var(--Input-radius) / 2))","--Button-minHeight":"var(--Input-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Input-decoratorChildHeight)","--Button-radius":"var(--Input-decoratorChildRadius)","--IconButton-radius":"var(--Input-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Input-minHeight)"},t.fullWidth&&{width:"100%"},{cursor:"text",position:"relative",display:"flex",paddingInline:"var(--Input-paddingInline)",borderRadius:"var(--Input-radius)"},e.typography[`body-${t.size}`],x,{backgroundColor:(h=x?.backgroundColor)!=null?h:e.vars.palette.background.surface,"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)",boxShadow:"var(--Input-focusedInset, inset) 0 0 0 calc(var(--Input-focused) * var(--Input-focusedThickness)) var(--Input-focusedHighlight)"}}),{"&:hover":Se({},(f=e.variants[`${t.variant}Hover`])==null?void 0:f[t.color],{backgroundColor:null}),[`&.${OI.disabled}`]:(o=e.variants[`${t.variant}Disabled`])==null?void 0:o[t.color],"&:focus-within::before":{"--Input-focused":"1"}}]}),BI=Qt("input")(({ownerState:e})=>({border:"none",minWidth:0,outline:0,padding:0,flex:1,color:"inherit",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",textOverflow:"ellipsis","&:-webkit-autofill":Se({paddingInline:"var(--Input-paddingInline)"},!e.startDecorator&&{marginInlineStart:"calc(-1 * var(--Input-paddingInline))",paddingInlineStart:"var(--Input-paddingInline)",borderTopLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"},!e.endDecorator&&{marginInlineEnd:"calc(-1 * var(--Input-paddingInline))",paddingInlineEnd:"var(--Input-paddingInline)",borderTopRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"}),"&::-webkit-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-moz-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&:-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"}})),$I=Qt("div")({"--Button-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Input-paddingInline) / -4)",display:"inherit",alignItems:"center",paddingBlock:"var(--unstable_InputPaddingBlock)",flexWrap:"wrap",marginInlineEnd:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),jI=Qt("div")({"--Button-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Input-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",marginInlineStart:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),BF=Qt(FI,{name:"JoyInput",slot:"Root",overridesResolver:(e,t)=>t.root})({}),$F=Qt(BI,{name:"JoyInput",slot:"Input",overridesResolver:(e,t)=>t.input})({}),jF=Qt($I,{name:"JoyInput",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),NF=Qt(jI,{name:"JoyInput",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({}),VF=Y.forwardRef(function(t,i){var a,c,h,f,o,x;const P=bi({props:t,name:"JoyInput"}),I=OF(Se({},P,{disabledInProp:t.disabled}),OI),{propsToForward:R,rootStateClasses:D,inputStateClasses:$,getRootProps:G,getInputProps:j,formControl:V,focused:se,error:ue=!1,disabled:Q,fullWidth:de=!1,size:oe="md",color:be="neutral",variant:we="outlined",startDecorator:Ie,endDecorator:ke,component:ae,slots:Ee={},slotProps:Ze={}}=I,Qe=Er(I,LF),vt=(a=(c=t.error)!=null?c:V?.error)!=null?a:ue,st=(h=(f=t.size)!=null?f:V?.size)!=null?h:oe,He=(o=t.color)!=null?o:vt?"danger":(x=V?.color)!=null?x:be,rt=Se({instanceColor:vt?"danger":t.color},P,{fullWidth:de,color:He,disabled:Q,error:vt,focused:se,size:st,variant:we}),Ge=FF(rt),Ve=Se({},Qe,{component:ae,slots:Ee,slotProps:Ze}),[ut,ve]=br("root",{ref:i,className:[Ge.root,D],elementType:BF,getSlotProps:G,externalForwardedProps:Ve,ownerState:rt}),[Fe,pt]=br("input",Se({},V&&{additionalProps:{id:V.htmlFor,"aria-describedby":V["aria-describedby"]}},{className:[Ge.input,$],elementType:$F,getSlotProps:j,internalForwardedProps:R,externalForwardedProps:Ve,ownerState:rt})),[Tt,Ct]=br("startDecorator",{className:Ge.startDecorator,elementType:jF,externalForwardedProps:Ve,ownerState:rt}),[_t,bt]=br("endDecorator",{className:Ge.endDecorator,elementType:NF,externalForwardedProps:Ve,ownerState:rt});return q.jsxs(ut,Se({},ve,{children:[Ie&&q.jsx(Tt,Se({},Ct,{children:Ie})),q.jsx(Fe,Se({},pt)),ke&&q.jsx(_t,Se({},bt,{children:ke}))]}))});function UF(e){return _i("MuiListSubheader",e)}xi("MuiListSubheader",["root","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const GF=["component","className","children","id","sticky","variant","color","slots","slotProps"],qF=e=>{const{variant:t,color:i,sticky:a}=e,c={root:["root",a&&"sticky",i&&`color${wr(i)}`,t&&`variant${wr(t)}`]};return ui(c,UF,{})},HF=Qt("div",{name:"JoyListSubheader",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var i,a;return Se({boxSizing:"border-box",display:"flex",alignItems:"center",marginInline:"var(--ListItem-marginInline)",paddingBlock:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)",minBlockSize:"var(--ListItem-minHeight)"},e.typography["body-xs"],{fontSize:"max(0.75em, 0.625rem)",textTransform:"uppercase",letterSpacing:"0.1em"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:"var(--ListItem-stickyBackground)"},{color:t.color?`var(--_Link-color, rgba(${(i=e.vars.palette[t.color])==null?void 0:i.mainChannel} / 1))`:e.vars.palette.text.tertiary},t.instanceColor&&{[`&:not([${$g}])`]:{"--_Link-color":e.vars.palette.text.secondary}},(a=e.variants[t.variant])==null?void 0:a[t.color])}),WF=Y.forwardRef(function(t,i){const a=bi({props:t,name:"JoyListSubheader"}),{component:c,className:h,children:f,id:o,sticky:x=!1,variant:P,color:I,slots:R={},slotProps:D={}}=a,$=Er(a,GF),G=_2(o),j=Y.useContext(wI);Y.useEffect(()=>{j&&j(G||"")},[j,G]);const V=Se({instanceColor:t.color},a,{id:G,sticky:x,variant:P,color:P?I??"neutral":I}),se=qF(V),ue=Se({},$,{component:c,slots:R,slotProps:D}),[Q,de]=br("root",{ref:i,className:ci(se.root,h),elementType:HF,externalForwardedProps:ue,ownerState:V,additionalProps:{as:c,id:G}});return q.jsx(Q,Se({},de,{children:f}))});function ZF(e){return _i("MuiAutocomplete",e)}const _f=xi("MuiAutocomplete",["root","wrapper","input","startDecorator","endDecorator","formControl","focused","disabled","error","multiple","limitTag","hasPopupIcon","hasClearIcon","clearIndicator","popupIndicator","popupIndicatorOpen","listbox","option","loading","noOptions","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]),NI=Qt(TI)(({theme:e,ownerState:t})=>{var i;const a=(i=e.variants[t.variant])==null?void 0:i[t.color];return Se({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":a?.backgroundColor||a?.background||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},A4,{boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`},!(a!=null&&a.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup},{zIndex:e.vars.zIndex.popup,overflow:"auto",maxHeight:"40vh",position:"relative","&:empty":{visibility:"hidden"},[`& .${K_.nested}, & .${K_.nested} .${D4.root}`]:{position:"initial"}})});Qt(NI,{name:"JoyAutocompleteListbox",slot:"Root",overridesResolver:(e,t)=>t.root})({});function XF(e){return _i("MuiAutocompleteOption",e)}xi("MuiAutocompleteOption",["root","focused","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const KF=["children","component","color","variant","className","slots","slotProps"],YF=e=>{const{color:t,variant:i}=e,a={root:["root",t&&`color${wr(t)}`,i&&`variant${wr(i)}`]};return ui(a,XF,{})},VI=Qt(PI)(({theme:e,ownerState:t})=>{var i,a;return{'&[aria-disabled="true"]':(i=e.variants[`${t.variant}Disabled`])==null?void 0:i[t.color],'&[aria-selected="true"]':Se({},(a=e.variants[`${t.variant}Active`])==null?void 0:a[t.color],{fontWeight:e.vars.fontWeight.md})}}),JF=Qt(VI,{name:"JoyAutocompleteOption",slot:"Root",overridesResolver:(e,t)=>t.root})({}),QF=Y.forwardRef(function(t,i){const a=bi({props:t,name:"JoyAutocompleteOption"}),{children:c,component:h="li",color:f="neutral",variant:o="plain",className:x,slots:P={},slotProps:I={}}=a,R=Er(a,KF),{variant:D=o,color:$=f}=AI(t.variant,t.color),G=Se({},a,{component:h,color:$,variant:D}),j=YF(G),V=Se({},R,{component:h,slots:P,slotProps:I}),[se,ue]=br("root",{ref:i,className:ci(j.root,x),elementType:JF,externalForwardedProps:V,ownerState:G,additionalProps:{as:h,role:"option"}});return q.jsx(se,Se({},ue,{children:c}))});var QT,eM;const e6=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoHighlight","autoSelect","autoFocus","blurOnSelect","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","defaultValue","disableCloseOnSelect","disabledItemsFocusable","disableListWrap","disableClearable","disabled","endDecorator","error","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","handleHomeEndKeys","includeInputInList","isOptionEqualToValue","groupBy","id","inputValue","limitTags","loading","loadingText","multiple","name","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","placeholder","popupIcon","readOnly","renderGroup","renderOption","renderTags","required","type","startDecorator","size","color","variant","value","component","selectOnFocus","slots","slotProps"],t6=["onDelete"],r6=["key"],n6=["onBlur","onFocus","onMouseDown"],i6=["key"],o6=e=>e.current!==null&&e.current.contains(document.activeElement),s6=e=>{var t;return(t=e.label)!=null?t:e},a6=e=>`+${e}`,l6=e=>q.jsxs(hl,{nested:!0,children:[q.jsx(WF,{sticky:!0,children:e.group}),q.jsx(nm,{children:e.children})]},e.key),c6=e=>{const{disabled:t,focused:i,hasClearIcon:a,hasPopupIcon:c,popupOpen:h,variant:f,color:o,size:x,multiple:P}=e,I={root:["root",i&&"focused",a&&"hasClearIcon",c&&"hasPopupIcon",f&&`variant${wr(f)}`,o&&`color${wr(o)}`,x&&`size${wr(x)}`],wrapper:["wrapper",P&&"multiple"],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",h&&"popupIndicatorOpen",t&&"disabled"],listbox:["listbox"],option:["option"],loading:["loading"],noOptions:["noOptions"],limitTag:["limitTag"]};return ui(I,ZF,{})},u6=Qt(FI,{name:"JoyAutocomplete",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>Se({},e.size==="sm"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="md"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="lg"&&{"--Autocomplete-wrapperGap":"4px"},{"@media (pointer: fine)":{[`&:hover .${_f.clearIndicator}`]:{visibility:"visible"}}},e.multiple&&!e.startDecorator&&{paddingInlineStart:0})),h6=Qt("div",{name:"JoyAutocomplete",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>({flex:1,minWidth:0,display:"flex",alignItems:"center",flexWrap:"wrap",gap:"var(--Autocomplete-wrapperGap)",[`&.${_f.multiple}`]:Se({paddingBlock:"var(--Autocomplete-wrapperGap)"},!e.startDecorator&&{paddingInlineStart:"var(--Autocomplete-wrapperGap)"},!e.endDecorator&&{paddingInlineEnd:"var(--Autocomplete-wrapperGap)"})})),d6=Qt(BI,{name:"JoyAutocomplete",slot:"Input",overridesResolver:(e,t)=>t.input})(({ownerState:e})=>Se({minWidth:30,minHeight:"var(--Chip-minHeight)"},e.multiple&&{marginInlineStart:"calc(var(--Autocomplete-wrapperGap) * 2.5)"})),f6=Qt($I,{name:"JoyAutocomplete",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),p6=Qt(jI,{name:"JoyAutocomplete",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})(({ownerState:e})=>Se({},(e.hasClearIcon||e.hasPopupIcon)&&{"--Button-margin":"0px","--IconButton-margin":"0px","--Icon-margin":"0px"})),m6=Qt(Ux,{name:"JoyAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})(({ownerState:e})=>Se({alignSelf:"center"},!e.hasPopupIcon&&{marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)"},{marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",visibility:e.focused?"visible":"hidden"})),g6=Qt(Ux,{name:"JoyAutocomplete",slot:"PopupIndicator",overridesResolver:(e,t)=>t.popupIndicator})({alignSelf:"center",marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)",[`&.${_f.popupIndicatorOpen}`]:{transform:"rotate(180deg)","--Icon-color":"currentColor"}}),y6=Qt(NI,{name:"JoyAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`})),v6=Qt(VI,{name:"JoyAutocomplete",slot:"Option",overridesResolver:(e,t)=>t.option})({}),_6=Qt(hl,{name:"JoyAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),x6=Qt(hl,{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),b6=Qt("div",{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})({marginInlineStart:"calc(var(--Input-paddingInline) / 2)",marginBlockStart:"var(--_Input-paddingBlock)"}),w6=Y.forwardRef(function(t,i){var a,c,h,f,o,x,P;const I=bi({props:t,name:"JoyAutocomplete"}),{"aria-describedby":R,"aria-label":D,"aria-labelledby":$,autoFocus:G,clearIcon:j=QT||(QT=q.jsx(eF,{fontSize:"md"})),clearText:V="Clear",closeText:se="Close",disableClearable:ue=!1,disabled:Q,endDecorator:de,error:oe=!1,forcePopupIcon:be="auto",freeSolo:we=!1,getLimitTagsText:Ie=a6,getOptionLabel:ke=s6,groupBy:ae,id:Ee,limitTags:Ze=-1,loading:Qe=!1,loadingText:vt="Loading",multiple:st=!1,name:He,noOptionsText:rt="No options",openText:Ge="Open",placeholder:Ve,popupIcon:ut=eM||(eM=q.jsx(tF,{})),readOnly:ve=!1,renderGroup:Fe=l6,renderOption:pt,renderTags:Tt,required:Ct,type:_t,startDecorator:bt,size:nt="md",color:kt="neutral",variant:At="outlined",component:dr,slots:ir={},slotProps:Gr={}}=I,Tr=Er(I,e6),or=Y.useContext(LI),qt=(a=(c=t.error)!=null?c:or?.error)!=null?a:oe,pr=(h=(f=t.size)!=null?f:or?.size)!=null?h:nt,Xt=(o=t.color)!=null?o:qt?"danger":(x=or?.color)!=null?x:kt,Ir=(P=Q??or?.disabled)!=null?P:!1,{getRootProps:Rr,getInputProps:Br,getPopupIndicatorProps:Wr,getClearProps:sn,getTagProps:On,getListboxProps:Tn,getOptionProps:vn,value:Sr,dirty:Dr,popupOpen:ur,focused:Zr,focusedTag:Ne,anchorEl:ee,setAnchorEl:ie,inputValue:ce,groupedOptions:Ce}=x4(Se({},I,{id:Ee??or?.htmlFor,componentName:"Autocomplete",unstable_classNamePrefix:"Mui",unstable_isActiveElementInListbox:o6})),{onMouseDown:Be}=Br(),{onClick:Je}=Rr(),Ye=!ue&&!Ir&&Dr&&!ve,Ue=(!we||be===!0)&&be!==!1,Ke=Se({instanceColor:t.color},I,{value:Sr,disabled:Ir,focused:Zr,getOptionLabel:ke,hasOptions:!!Ce.length,hasClearIcon:Ye,hasPopupIcon:Ue,inputFocused:Ne===-1,popupOpen:ur,size:pr,color:Xt,variant:At}),gt=c6(Ke),et=Se({},Tr,{component:dr,slots:ir,slotProps:Gr});let Ae;if(st&&Sr.length>0){const Pr=Mi=>{const ln=On(Mi),{onDelete:hi}=ln,Pi=Er(ln,t6);return Se({disabled:Ir,size:pr,onClick:hi},Pi)};Tt?Ae=Tt(Sr,Pr,Ke):Ae=Sr.map((Mi,ln)=>{const hi=Pr({index:ln}),{key:Pi}=hi,zs=Er(hi,r6);return q.jsx(TF,{size:pr,variant:"soft",color:"neutral",endDecorator:q.jsx(RF,Se({},zs),Pi),sx:{minWidth:0},children:ke(Mi)},ln)})}const Ut=Ra(i,ie),mr={[_f.disabled]:Ir,[_f.error]:qt,[_f.focused]:Zr,[_f.formControl]:!!or},[Zt,Yt]=br("root",{ref:Ut,className:[gt.root,mr],elementType:u6,externalForwardedProps:et,ownerState:Ke,getSlotProps:Rr,additionalProps:{onClick:Pr=>{Je&&Je(Pr),Pr.currentTarget===Pr.target&&Be&&Be(Pr)}}}),[rr,vr]=br("wrapper",{className:gt.wrapper,elementType:h6,externalForwardedProps:et,ownerState:Ke}),kr={[_f.disabled]:Ir},[nn,Xr]=br("input",{className:[gt.input,kr],elementType:d6,getSlotProps:Pr=>{const Mi=Br(),{onBlur:ln,onFocus:hi,onMouseDown:Pi}=Mi,zs=Er(Mi,n6);return Se({},zs,{onBlur:os=>{var gn;ln?.(os),(gn=Pr.onBlur)==null||gn.call(Pr,os)},onFocus:os=>{var gn;hi?.(os),(gn=Pr.onFocus)==null||gn.call(Pr,os)},onMouseDown:os=>{var gn;Pi?.(os),(gn=Pr.onMouseDown)==null||gn.call(Pr,os)}})},externalForwardedProps:et,ownerState:Ke,additionalProps:{autoFocus:G,placeholder:Ve,name:He,readOnly:ve,disabled:Ir,required:Ct??or?.required,type:_t,"aria-invalid":qt||void 0,"aria-label":D,"aria-labelledby":$,"aria-describedby":R??or?.["aria-describedby"]}}),[wn,on]=br("startDecorator",{className:gt.startDecorator,elementType:f6,externalForwardedProps:et,ownerState:Ke}),[Mt,Fr]=br("endDecorator",{className:gt.endDecorator,elementType:p6,externalForwardedProps:et,ownerState:Ke}),[en,Io]=br("clearIndicator",{className:gt.clearIndicator,elementType:m6,getSlotProps:sn,externalForwardedProps:et,ownerState:Ke,getSlotOwnerState:Pr=>({size:Pr.size||pr,variant:Pr.variant||Rp(At,Xt).variant||"plain",color:Pr.color||Rp(At,Xt).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{"aria-label":V,title:V}}),[Ti,Ot]=br("popupIndicator",{className:gt.popupIndicator,elementType:g6,getSlotProps:Wr,externalForwardedProps:et,ownerState:Ke,getSlotOwnerState:Pr=>({size:Pr.size||pr,variant:Pr.variant||Rp(At,Xt).variant||"plain",color:Pr.color||Rp(At,Xt).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{disabled:Ir,"aria-label":ur?se:Ge,title:ur?se:Ge,type:"button"}}),[it,tt]=br("listbox",{className:gt.listbox,elementType:y6,getSlotProps:Tn,externalForwardedProps:et,ownerState:Ke,getSlotOwnerState:Pr=>({size:Pr.size||pr,variant:Pr.variant||At,color:Pr.color||Xt,disableColorInversion:!Pr.disablePortal}),additionalProps:{anchorEl:ee,open:ur,style:ee?{width:ee.clientWidth}:{}}}),[Ht,Mr]=br("loading",{className:gt.loading,elementType:_6,externalForwardedProps:et,ownerState:Ke}),[Ur,sr]=br("noOptions",{className:gt.noOptions,elementType:x6,externalForwardedProps:et,ownerState:Ke,additionalProps:{role:"presentation",onMouseDown:Pr=>{Pr.preventDefault()}}}),[An,Vi]=br("limitTag",{className:gt.limitTag,elementType:b6,externalForwardedProps:et,ownerState:Ke});if(Ze>-1&&Array.isArray(Ae)){const Pr=Ae.length-Ze;!Zr&&Pr>0&&(Ae=Ae.splice(0,Ze),Ae.push(q.jsx(An,Se({},Vi,{children:Ie(Pr)}),Ae.length)))}const[La,yl]=br("option",{className:gt.option,elementType:v6,externalForwardedProps:et,ownerState:Ke,getSlotOwnerState:Pr=>({variant:Pr.variant||Rp(At,Xt).variant||"plain",color:Pr.color||Rp(At,Xt).color||"neutral",disableColorInversion:!tt.disablePortal}),additionalProps:{as:"li"}}),vl=pt||((Pr,Mi)=>{const{key:ln}=Pr,hi=Er(Pr,i6);return q.jsx(La,Se({},hi,{children:ke(Mi)}),ln)}),na=(Pr,Mi)=>{const ln=vn({option:Pr,index:Mi});return vl(Se({},yl,ln),Pr,{selected:!!ln["aria-selected"],inputValue:ce,ownerState:Ke})},Zi=Y.useMemo(()=>[{name:"offset",options:{offset:[0,4]}},...tt.modifiers||[]],[tt.modifiers]);let an=null;if(ee){var lc;an=q.jsx(RI,{variant:At,color:Xt,children:q.jsx(CI,{nested:!0,children:q.jsxs(it,Se({},tt,{className:ci(tt.className),modifiers:Zi},!((lc=I.slots)!=null&&lc.listbox)&&{as:p4,slots:{root:tt.as||"ul"}},{children:[Ce.map((Pr,Mi)=>{if(ae){const ln=Pr;return Fe({key:String(ln.key),group:ln.group,children:ln.options.map((hi,Pi)=>na(hi,ln.index+Pi))})}return na(Pr,Mi)}),Qe&&Ce.length===0?q.jsx(Ht,Se({},Mr,{children:vt})):null,Ce.length===0&&!we&&!Qe?q.jsx(Ur,Se({},sr,{children:rt})):null]}))})})}return q.jsxs(Y.Fragment,{children:[q.jsxs(Zt,Se({},Yt,{children:[bt&&q.jsx(wn,Se({},on,{children:bt})),q.jsxs(rr,Se({},vr,{children:[Ae,q.jsx(nn,Se({},Xr))]})),de&&q.jsx(Mt,Se({},Fr,{children:de})),Ye?q.jsx(en,Se({},Io,{children:j})):null,Ue?q.jsx(Ti,Se({},Ot,{children:ut})):null]})),an]})}),S6=XE("MuiBox",["root"]),ii=xz({themeId:Fv,defaultTheme:Kg,defaultClassName:S6.root,generateClassName:HE.generate});function C6(e){return _i("MuiTypography",e)}xi("MuiTypography",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","noWrap","gutterBottom","startDecorator","endDecorator","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const T6=["color","textColor"],M6=["component","gutterBottom","noWrap","level","levelMapping","children","endDecorator","startDecorator","variant","slots","slotProps"],J_=Y.createContext(!1),UI=Y.createContext(!1),P6=e=>{const{gutterBottom:t,noWrap:i,level:a,color:c,variant:h}=e,f={root:["root",a,t&&"gutterBottom",i&&"noWrap",c&&`color${wr(c)}`,h&&`variant${wr(h)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return ui(f,C6,{})},E6=Qt("span",{name:"JoyTypography",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({display:"inline-flex",marginInlineEnd:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),I6=Qt("span",{name:"JoyTypography",slot:"endDecorator",overridesResolver:(e,t)=>t.endDecorator})({display:"inline-flex",marginInlineStart:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),k6=Qt("span",{name:"JoyTypography",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var i,a,c,h,f;const o=t.level!=="inherit"?(i=e.typography[t.level])==null?void 0:i.lineHeight:"1";return Se({"--Icon-fontSize":`calc(1em * ${o})`},t.color&&{"--Icon-color":"currentColor"},{margin:"var(--Typography-margin, 0px)"},t.nesting?{display:"inline"}:Se({display:"block"},t.unstable_hasSkeleton&&{position:"relative"}),(t.startDecorator||t.endDecorator)&&Se({display:"flex",alignItems:"center"},t.nesting&&Se({display:"inline-flex"},t.startDecorator&&{verticalAlign:"bottom"})),t.level&&t.level!=="inherit"&&e.typography[t.level],{fontSize:`var(--Typography-fontSize, ${t.level&&t.level!=="inherit"&&(a=(c=e.typography[t.level])==null?void 0:c.fontSize)!=null?a:"inherit"})`},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.color&&{color:`var(--variant-plainColor, rgba(${(h=e.vars.palette[t.color])==null?void 0:h.mainChannel} / 1))`},t.variant&&Se({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},!t.nesting&&{marginInline:"-0.25em"},(f=e.variants[t.variant])==null?void 0:f[t.color]))}),tM={h1:"h1",h2:"h2",h3:"h3",h4:"h4","title-lg":"p","title-md":"p","title-sm":"p","body-lg":"p","body-md":"p","body-sm":"p","body-xs":"span",inherit:"p"},Yr=Y.forwardRef(function(t,i){var a;const c=bi({props:t,name:"JoyTypography"}),{color:h,textColor:f}=c,o=Er(c,T6),x=Y.useContext(J_),P=Y.useContext(UI),I=Fx(Se({},o,{color:f})),{component:R,gutterBottom:D=!1,noWrap:$=!1,level:G="body-md",levelMapping:j=tM,children:V,endDecorator:se,startDecorator:ue,variant:Q,slots:de={},slotProps:oe={}}=I,be=Er(I,M6),we=(a=t.color)!=null?a:Q?h??"neutral":h,Ie=x||P?t.level||"inherit":G,ke=Vv(V,["Skeleton"]),ae=R||(x?"span":j[Ie]||tM[Ie]||"span"),Ee=Se({},I,{level:Ie,component:ae,color:we,gutterBottom:D,noWrap:$,nesting:x,variant:Q,unstable_hasSkeleton:ke}),Ze=P6(Ee),Qe=Se({},be,{component:ae,slots:de,slotProps:oe}),[vt,st]=br("root",{ref:i,className:Ze.root,elementType:k6,externalForwardedProps:Qe,ownerState:Ee}),[He,rt]=br("startDecorator",{className:Ze.startDecorator,elementType:E6,externalForwardedProps:Qe,ownerState:Ee}),[Ge,Ve]=br("endDecorator",{className:Ze.endDecorator,elementType:I6,externalForwardedProps:Qe,ownerState:Ee});return q.jsx(J_.Provider,{value:!0,children:q.jsxs(vt,Se({},st,{children:[ue&&q.jsx(He,Se({},rt,{children:ue})),ke?Y.cloneElement(V,{variant:V.props.variant||"inline"}):V,se&&q.jsx(Ge,Se({},Ve,{children:se}))]}))})});Yr.muiName="Typography";function A6(e){return _i("MuiButton",e)}const jg=xi("MuiButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","fullWidth","startDecorator","endDecorator","loading","loadingIndicatorCenter"]),R6=["children","action","color","variant","size","fullWidth","startDecorator","endDecorator","loading","loadingPosition","loadingIndicator","disabled","component","slots","slotProps"],D6=e=>{const{color:t,disabled:i,focusVisible:a,focusVisibleClassName:c,fullWidth:h,size:f,variant:o,loading:x}=e,P={root:["root",i&&"disabled",a&&"focusVisible",h&&"fullWidth",o&&`variant${wr(o)}`,t&&`color${wr(t)}`,f&&`size${wr(f)}`,x&&"loading"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],loadingIndicatorCenter:["loadingIndicatorCenter"]},I=ui(P,A6,{});return a&&c&&(I.root+=` ${c}`),I},z6=Qt("span",{name:"JoyButton",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Icon-margin":"0 0 0 calc(var(--Button-gap) / -2)","--CircularProgress-margin":"0 0 0 calc(var(--Button-gap) / -2)",display:"inherit",marginRight:"var(--Button-gap)"}),O6=Qt("span",{name:"JoyButton",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Icon-margin":"0 calc(var(--Button-gap) / -2) 0 0","--CircularProgress-margin":"0 calc(var(--Button-gap) / -2) 0 0",display:"inherit",marginLeft:"var(--Button-gap)"}),L6=Qt("span",{name:"JoyButton",slot:"LoadingCenter",overridesResolver:(e,t)=>t.loadingIndicatorCenter})(({theme:e,ownerState:t})=>{var i,a;return Se({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(i=e.variants[t.variant])==null||(i=i[t.color])==null?void 0:i.color},t.disabled&&{color:(a=e.variants[`${t.variant}Disabled`])==null||(a=a[t.color])==null?void 0:a.color})}),F6=({theme:e,ownerState:t})=>{var i,a,c,h;return[Se({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.size==="sm"&&{"--Icon-fontSize":e.vars.fontSize.lg,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.375rem",minHeight:"var(--Button-minHeight, 2rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.25rem)",paddingInline:"0.75rem"},t.size==="md"&&{"--Icon-fontSize":e.vars.fontSize.xl,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.5rem",minHeight:"var(--Button-minHeight, 2.25rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.375rem)",paddingInline:"1rem"},t.size==="lg"&&{"--Icon-fontSize":e.vars.fontSize.xl2,"--CircularProgress-size":"28px","--CircularProgress-thickness":"4px","--Button-gap":"0.75rem",minHeight:"var(--Button-minHeight, 2.75rem)",fontSize:e.vars.fontSize.md,paddingBlock:"var(--Button-paddingBlock, 0.5rem)",paddingInline:"1.5rem"},{WebkitTapHighlightColor:"transparent",boxSizing:"border-box",borderRadius:`var(--Button-radius, ${e.vars.radius.sm})`,margin:"var(--Button-margin)",border:"none",backgroundColor:"transparent",cursor:"pointer",userSelect:"none",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",textDecoration:"none",fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.lg,lineHeight:e.vars.lineHeight.md},t.fullWidth&&{width:"100%"},{[e.focus.selector]:e.focus.default}),Se({},(i=e.variants[t.variant])==null?void 0:i[t.color],{"&:hover":{"@media (hover: hover)":(a=e.variants[`${t.variant}Hover`])==null?void 0:a[t.color]},'&:active, &[aria-pressed="true"]':(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color],[`&.${jg.disabled}`]:(h=e.variants[`${t.variant}Disabled`])==null?void 0:h[t.color]},t.loadingPosition==="center"&&{[`&.${jg.loading}`]:{color:"transparent"}})]},B6=Qt("button",{name:"JoyButton",slot:"Root",overridesResolver:(e,t)=>t.root})(F6),Da=Y.forwardRef(function(t,i){var a;const c=bi({props:t,name:"JoyButton"}),{children:h,action:f,color:o="primary",variant:x="solid",size:P="md",fullWidth:I=!1,startDecorator:R,endDecorator:D,loading:$=!1,loadingPosition:G="center",loadingIndicator:j,disabled:V,component:se,slots:ue={},slotProps:Q={}}=c,de=Er(c,R6),oe=Y.useContext(z2),be=Y.useContext(DI),we=t.variant||oe.variant||x,Ie=t.size||oe.size||P,ke=t.color||oe.color||o,ae=(a=t.loading||t.disabled)!=null?a:oe.disabled||$||V,Ee=Y.useRef(null),Ze=Ra(Ee,i),{focusVisible:Qe,setFocusVisible:vt,getRootProps:st}=Uv(Se({},c,{disabled:ae,rootRef:Ze})),He=j??q.jsx(im,{color:ke,thickness:{sm:2,md:3,lg:4}[Ie]||3});Y.useImperativeHandle(f,()=>({focusVisible:()=>{var At;vt(!0),(At=Ee.current)==null||At.focus()}}),[vt]);const rt=Se({},c,{color:ke,fullWidth:I,variant:we,size:Ie,focusVisible:Qe,loading:$,loadingPosition:G,disabled:ae}),Ge=D6(rt),Ve=At=>{var dr;let ir=c.onClick;if(typeof Q.root=="function"?ir=Q.root(rt).onClick:Q.root&&(ir=Q.root.onClick),(dr=ir)==null||dr(At),be){var Gr;(Gr=be.onClick)==null||Gr.call(be,At,c.value)}};let ut=c["aria-pressed"];typeof Q.root=="function"?ut=Q.root(rt)["aria-pressed"]:Q.root&&(ut=Q.root["aria-pressed"]),be!=null&&be.value&&(Array.isArray(be.value)?ut=be.value.indexOf(c.value)!==-1:ut=be.value===c.value);const ve=Se({},de,{component:se,slots:ue,slotProps:Q}),[Fe,pt]=br("root",{ref:i,className:Ge.root,elementType:B6,externalForwardedProps:ve,getSlotProps:st,ownerState:rt,additionalProps:{onClick:Ve,"aria-pressed":ut}}),[Tt,Ct]=br("startDecorator",{className:Ge.startDecorator,elementType:z6,externalForwardedProps:ve,ownerState:rt}),[_t,bt]=br("endDecorator",{className:Ge.endDecorator,elementType:O6,externalForwardedProps:ve,ownerState:rt}),[nt,kt]=br("loadingIndicatorCenter",{className:Ge.loadingIndicatorCenter,elementType:L6,externalForwardedProps:ve,ownerState:rt});return q.jsxs(Fe,Se({},pt,{children:[(R||$&&G==="start")&&q.jsx(Tt,Se({},Ct,{children:$&&G==="start"?He:R})),h,$&&G==="center"&&q.jsx(nt,Se({},kt,{children:He})),(D||$&&G==="end")&&q.jsx(_t,Se({},bt,{children:$&&G==="end"?He:D}))]}))});Da.muiName="Button";function $6(e){return _i("MuiButtonGroup",e)}xi("MuiButtonGroup",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","horizontal","vertical"]);const j6=["buttonFlex","className","component","disabled","size","color","variant","children","orientation","slots","slotProps","spacing"],N6=e=>{const{size:t,variant:i,color:a,orientation:c}=e,h={root:["root",c,i&&`variant${wr(i)}`,a&&`color${wr(a)}`,t&&`size${wr(t)}`]};return ui(h,$6,{})},V6=Qt("div")(({theme:e,ownerState:t})=>{var i,a,c;const{borderRadius:h}=rm({theme:e,ownerState:t},["borderRadius"]),f=t.orientation==="vertical"?"var(--ButtonGroup-radius) var(--ButtonGroup-radius) var(--unstable_childRadius) var(--unstable_childRadius)":"var(--ButtonGroup-radius) var(--unstable_childRadius) var(--unstable_childRadius) var(--ButtonGroup-radius)",o=t.orientation==="vertical"?"var(--unstable_childRadius) var(--unstable_childRadius) var(--ButtonGroup-radius) var(--ButtonGroup-radius)":"var(--unstable_childRadius) var(--ButtonGroup-radius) var(--ButtonGroup-radius) var(--unstable_childRadius)",x=t.orientation==="vertical"?"calc(var(--ButtonGroup-separatorSize) * -1) 0 0 0":"0 0 0 calc(var(--ButtonGroup-separatorSize) * -1)",P={};yO(e.breakpoints,t.spacing,($,G)=>{if(G!==null){var j;$(P,{"--ButtonGroup-connected":G.toString().match(/^0(?!\.)/)?"1":"0",gap:typeof G=="string"?G:(j=e.spacing)==null?void 0:j.call(e,G)})}});const I=(i=e.variants.outlined)==null?void 0:i[t.color],R=(a=e.variants.outlinedDisabled)==null?void 0:a[t.color],D=(c=e.variants.outlinedHover)==null?void 0:c[t.color];return[Se({"--ButtonGroup-separatorSize":t.variant==="outlined"?"1px":"calc(var(--ButtonGroup-connected) * 1px)","--ButtonGroup-separatorColor":I?.borderColor,"--ButtonGroup-radius":e.vars.radius.sm,"--Divider-inset":"0.5rem","--unstable_childRadius":"calc((1 - var(--ButtonGroup-connected)) * var(--ButtonGroup-radius) - var(--variant-borderWidth, 0px))"},P,{display:"flex",borderRadius:"var(--ButtonGroup-radius)",flexDirection:t.orientation==="vertical"?"column":"row","& > [data-first-child]":Se({"--Button-radius":f,"--IconButton-radius":f},t.orientation==="horizontal"&&{borderRight:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"},t.orientation==="vertical"&&{borderBottom:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"}),"& > :not([data-first-child]):not([data-last-child]):not(:only-child)":Se({"--Button-radius":"var(--unstable_childRadius)","--IconButton-radius":"var(--unstable_childRadius)",borderRadius:"var(--unstable_childRadius)"},t.orientation==="horizontal"&&{borderLeft:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)",borderRight:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"},t.orientation==="vertical"&&{borderTop:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)",borderBottom:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"}),"& > [data-last-child]":Se({"--Button-radius":o,"--IconButton-radius":o},t.orientation==="horizontal"&&{borderLeft:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"},t.orientation==="vertical"&&{borderTop:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"}),"& > :only-child":{"--Button-radius":"var(--ButtonGroup-radius)","--IconButton-radius":"var(--ButtonGroup-radius)"},"& > :not([data-first-child]):not(:only-child)":{"--Button-margin":x,"--IconButton-margin":x},[`& .${jg.root}, & .${Cw.root}`]:Se({"&:not(:disabled)":{zIndex:1},"&:disabled":{"--ButtonGroup-separatorColor":R?.borderColor}},t.variant==="outlined"&&{"&:hover":{"--ButtonGroup-separatorColor":D?.borderColor}},{[`&:hover, ${e.focus.selector}`]:{zIndex:2}})},t.buttonFlex&&{[`& > *:not(.${Cw.root})`]:{flex:t.buttonFlex},[`& > :not(button) > .${jg.root}`]:{width:"100%"}}),h!==void 0&&{"--ButtonGroup-radius":h}]}),U6=Qt(V6,{name:"JoyButtonGroup",slot:"Root",overridesResolver:(e,t)=>t.root})({}),G6=Y.forwardRef(function(t,i){const a=bi({props:t,name:"JoyButtonGroup"}),{buttonFlex:c,className:h,component:f="div",disabled:o=!1,size:x="md",color:P="neutral",variant:I="outlined",children:R,orientation:D="horizontal",slots:$={},slotProps:G={},spacing:j=0}=a,V=Er(a,j6),se=Se({},a,{buttonFlex:c,color:P,component:f,orientation:D,spacing:j,size:x,variant:I}),ue=N6(se),Q=Se({},V,{component:f,slots:$,slotProps:G}),[de,oe]=br("root",{ref:i,className:ci(ue.root,h),elementType:U6,externalForwardedProps:Q,additionalProps:{role:"group"},ownerState:se}),be=Y.useMemo(()=>({variant:I,color:P,size:x,disabled:o}),[I,P,x,o]);return q.jsx(de,Se({},oe,{children:q.jsx(z2.Provider,{value:be,children:Y.Children.map(R,(we,Ie)=>{if(!Y.isValidElement(we))return we;const ke={};if(Vv(we,["Divider"])){var ae,Ee;const Ze=we.props;ke.inset=(ae=Ze?.inset)!=null?ae:"context";const Qe=D==="vertical"?"horizontal":"vertical";ke.orientation=(Ee=Ze?.orientation)!=null?Ee:Qe,ke.role="presentation",ke.component="span"}return Y.Children.count(R)>1&&(Ie===0&&(ke["data-first-child"]=""),Ie===Y.Children.count(R)-1&&(ke["data-last-child"]="")),Y.cloneElement(we,ke)})})}))});function q6(e){return _i("MuiCard",e)}const H6=xi("MuiCard",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","horizontal","vertical"]),W6=["className","color","component","invertedColors","size","variant","children","orientation","slots","slotProps"],Z6=e=>{const{size:t,variant:i,color:a,orientation:c}=e,h={root:["root",c,i&&`variant${wr(i)}`,a&&`color${wr(a)}`,t&&`size${wr(t)}`]};return ui(h,q6,{})},X6=Qt("div")(({theme:e,ownerState:t})=>{var i;const{p:a,padding:c,borderRadius:h}=rm({theme:e,ownerState:t},["p","padding","borderRadius"]);return[Se({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--Card-childRadius":"max((var(--Card-radius) - var(--variant-borderWidth, 0px)) - var(--Card-padding), min(var(--Card-padding) / 2, (var(--Card-radius) - var(--variant-borderWidth, 0px)) / 2))","--AspectRatio-radius":"var(--Card-childRadius)","--unstable_actionMargin":"calc(-1 * var(--variant-borderWidth, 0px))","--unstable_actionRadius":"var(--Card-radius)","--CardCover-radius":"calc(var(--Card-radius) - var(--variant-borderWidth, 0px))","--CardOverflow-offset":"calc(-1 * var(--Card-padding))","--CardOverflow-radius":"calc(var(--Card-radius) - var(--variant-borderWidth, 0px))","--Divider-inset":"calc(-1 * var(--Card-padding))"},t.size==="sm"&&{"--Card-radius":e.vars.radius.sm,"--Card-padding":"0.625rem",gap:"0.5rem"},t.size==="md"&&{"--Card-radius":e.vars.radius.md,"--Card-padding":"1rem",gap:"0.75rem 1rem"},t.size==="lg"&&{"--Card-radius":e.vars.radius.lg,"--Card-padding":"1.5rem",gap:"1rem 1.5rem"},{padding:"var(--Card-padding)",borderRadius:"var(--Card-radius)",backgroundColor:e.vars.palette.background.surface,position:"relative",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},e.typography[`body-${t.size}`],t.variant==="solid"&&t.color&&t.invertedColors&&Nx(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&Vx(t.color)(e),(i=e.variants[t.variant])==null?void 0:i[t.color]),a!==void 0&&{"--Card-padding":a},c!==void 0&&{"--Card-padding":c},h!==void 0&&{"--Card-radius":h}]}),K6=Qt(X6,{name:"JoyCard",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Hv=Y.forwardRef(function(t,i){const a=bi({props:t,name:"JoyCard"}),{className:c,color:h="neutral",component:f="div",invertedColors:o=!1,size:x="md",variant:P="outlined",children:I,orientation:R="vertical",slots:D={},slotProps:$={}}=a,G=Er(a,W6),j=Se({},a,{color:h,component:f,orientation:R,size:x,variant:P,invertedColors:o}),V=Z6(j),se=Se({},G,{component:f,slots:D,slotProps:$}),[ue,Q]=br("root",{ref:i,className:ci(V.root,c),elementType:K6,externalForwardedProps:se,ownerState:j});return q.jsx(ue,Se({},Q,{children:Y.Children.map(I,(de,oe)=>{if(!Y.isValidElement(de))return de;const be={};if(Vv(de,["Divider"])){var we,Ie;const ke=de.props;be.inset=(we=ke?.inset)!=null?we:"context";const ae=R==="vertical"?"horizontal":"vertical";be.orientation=(Ie=ke?.orientation)!=null?Ie:ae}return oe===0&&(be["data-first-child"]=""),oe===Y.Children.count(I)-1&&(be["data-last-child"]=""),Y.cloneElement(de,be)})}))});function Y6(e){return _i("MuiCardActions",e)}xi("MuiCardActions",["root"]);const GI=xi("MuiCardOverflow",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);function J6(e){return _i("MuiDivider",e)}const Q6=xi("MuiDivider",["root","horizontal","vertical","insetContext","insetNone"]),eB=["className","component","children","buttonFlex","orientation","slots","slotProps"],tB=()=>ui({root:["root"]},Y6,{}),rB=Qt("div")(({ownerState:e})=>{var t;return Se({"--Button-radius":"var(--Card-childRadius)","--IconButton-radius":"var(--Card-childRadius)",display:"flex"},((t=e.orientation)==null?void 0:t.startsWith("horizontal"))&&{alignItems:"center"},{flexDirection:e.orientation==="horizontal"?"row":"column"},e.orientation==="horizontal-reverse"&&{flexDirection:"row-reverse"},{zIndex:1,gap:"calc(0.625 * var(--Card-padding))",padding:"var(--unstable_padding)","--unstable_padding":"calc(0.75 * var(--Card-padding)) 0 0 0",[`.${GI.root} > &`]:{"--unstable_padding":"calc(0.75 * var(--Card-padding)) 0 var(--Card-padding)"},[`.${H6.root} > .${Q6.root} + &`]:{"--unstable_padding":"0"}},e.buttonFlex?{[`& > :not(.${Cw.root})`]:{flex:e.buttonFlex},[`& > :not(button) > .${jg.root}`]:{width:"100%"}}:{[`& > .${jg.root}:only-child`]:{flex:"auto"}})}),nB=Qt(rB,{name:"JoyCardActions",slot:"Root",overridesResolver:(e,t)=>t.root})({}),iB=Y.forwardRef(function(t,i){const a=bi({props:t,name:"JoyCardActions"}),{className:c,component:h="div",children:f,buttonFlex:o,orientation:x="horizontal",slots:P={},slotProps:I={}}=a,R=Er(a,eB),D=Se({},R,{component:h,slots:P,slotProps:I}),$=Se({},a,{component:h,buttonFlex:o,orientation:x}),G=tB(),[j,V]=br("root",{ref:i,className:ci(G.root,c),elementType:nB,externalForwardedProps:D,ownerState:$});return q.jsx(j,Se({},V,{children:f}))});function oB(e){return _i("MuiCardContent",e)}xi("MuiCardContent",["root"]);const sB=["className","component","children","orientation","slots","slotProps"],aB=()=>ui({root:["root"]},oB,{}),lB=Qt("div")(({ownerState:e})=>({display:"flex",flexDirection:e.orientation==="horizontal"?"row":"column",flex:9999,zIndex:1,columnGap:"var(--Card-padding)",rowGap:"max(2px, calc(0.1875 * var(--Card-padding)))",padding:"var(--unstable_padding)",[`.${GI.root} > &`]:{"--unstable_padding":"calc(var(--Card-padding) * 0.75) 0px"}})),cB=Qt(lB,{name:"JoyCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({}),uB=Y.forwardRef(function(t,i){const a=bi({props:t,name:"JoyCardContent"}),{className:c,component:h="div",children:f,orientation:o="vertical",slots:x={},slotProps:P={}}=a,I=Er(a,sB),R=Se({},I,{component:h,slots:x,slotProps:P}),D=Se({},a,{component:h,orientation:o}),$=aB(),[G,j]=br("root",{ref:i,className:ci($.root,c),elementType:cB,externalForwardedProps:R,ownerState:D});return q.jsx(G,Se({},j,{children:f}))});function hB(e){const{children:t,disableColorScheme:i=!1}=e;return q.jsxs(Y.Fragment,{children:[q.jsx(OO,{styles:a=>{var c,h;const f={};i||Object.entries(a.colorSchemes).forEach(([x,P])=>{var I;f[a.getColorSchemeSelector(x).replace(/\s*&/,"")]={colorScheme:(I=P.palette)==null?void 0:I.mode}});const o=(c=(h=a.components)==null||(h=h.JoyTypography)==null||(h=h.defaultProps)==null?void 0:h.level)!=null?c:"body-md";return Se({html:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:a.vars.fontWeight.lg},body:Se({margin:0,color:a.vars.palette.text.primary,fontFamily:a.vars.fontFamily.body},a.typography[o],{backgroundColor:a.vars.palette.background.body,"@media print":{backgroundColor:a.vars.palette.common.white},"&::backdrop":{backgroundColor:a.vars.palette.background.backdrop}})},f)},defaultTheme:Kg}),t]})}const dB=["className","children","component","inset","orientation","role","slots","slotProps"],fB=e=>{const{orientation:t,inset:i}=e,a={root:["root",t,i&&`inset${wr(i)}`]};return ui(a,J6,{})},qI=Qt("hr",{name:"JoyDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>Se({"--Divider-thickness":"1px","--Divider-lineColor":e.vars.palette.divider},t.inset==="none"&&{"--_Divider-inset":"0px"},t.inset==="context"&&{"--_Divider-inset":"var(--Divider-inset, 0px)"},{margin:"initial",marginInline:t.orientation==="vertical"?"initial":"var(--_Divider-inset)",marginBlock:t.orientation==="vertical"?"var(--_Divider-inset)":"initial",position:"relative",alignSelf:"stretch",flexShrink:0},t.children?Se({"--Divider-gap":e.spacing(1),"--Divider-childPosition":"50%",display:"flex",flexDirection:t.orientation==="vertical"?"column":"row",alignItems:"center",whiteSpace:"nowrap",textAlign:"center",border:0},e.typography["body-sm"],{"&::before, &::after":{position:"relative",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)",backgroundColor:"var(--Divider-lineColor)",content:'""'},"&::before":{marginInlineEnd:t.orientation==="vertical"?"initial":"min(var(--Divider-childPosition) * 999, var(--Divider-gap))",marginBlockEnd:t.orientation==="vertical"?"min(var(--Divider-childPosition) * 999, var(--Divider-gap))":"initial",flexBasis:"var(--Divider-childPosition)"},"&::after":{marginInlineStart:t.orientation==="vertical"?"initial":"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))",marginBlockStart:t.orientation==="vertical"?"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))":"initial",flexBasis:"calc(100% - var(--Divider-childPosition))"}}):{border:"none",listStyle:"none",backgroundColor:"var(--Divider-lineColor)",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)"})),Yg=Y.forwardRef(function(t,i){const a=bi({props:t,name:"JoyDivider"}),{className:c,children:h,component:f=h!=null?"div":"hr",inset:o,orientation:x="horizontal",role:P=f!=="hr"?"separator":void 0,slots:I={},slotProps:R={}}=a,D=Er(a,dB),$=Se({},a,{inset:o,role:P,orientation:x,component:f}),G=fB($),j=Se({},D,{component:f,slots:I,slotProps:R}),[V,se]=br("root",{ref:i,className:ci(G.root,c),elementType:qI,externalForwardedProps:j,ownerState:$,additionalProps:Se({as:f,role:P},P==="separator"&&x==="vertical"&&{"aria-orientation":"vertical"})});return q.jsx(V,Se({},se,{children:h}))});Yg.muiName="Divider";function pB(e){return _i("MuiLink",e)}const rM=xi("MuiLink",["root","disabled","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","variantPlain","variantOutlined","variantSoft","variantSolid","underlineNone","underlineHover","underlineAlways","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","startDecorator","endDecorator"]),mB=["color","textColor","variant"],gB=["children","disabled","onBlur","onFocus","level","overlay","underline","endDecorator","startDecorator","component","slots","slotProps"],yB=e=>{const{level:t,color:i,variant:a,underline:c,focusVisible:h,disabled:f}=e,o={root:["root",i&&`color${wr(i)}`,f&&"disabled",h&&"focusVisible",t,c&&`underline${wr(c)}`,a&&`variant${wr(a)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return ui(o,pB,{})},vB=Qt("span",{name:"JoyLink",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})(({ownerState:e})=>{var t;return Se({display:"inline-flex",marginInlineEnd:"clamp(4px, var(--Link-gap, 0.375em), 0.75rem)"},typeof e.startDecorator!="string"&&(e.alignItems==="flex-start"||((t=e.sx)==null?void 0:t.alignItems)==="flex-start")&&{marginTop:"2px"})}),_B=Qt("span",{name:"JoyLink",slot:"endDecorator",overridesResolver:(e,t)=>t.endDecorator})(({ownerState:e})=>{var t;return Se({display:"inline-flex",marginInlineStart:"clamp(4px, var(--Link-gap, 0.25em), 0.5rem)"},typeof e.startDecorator!="string"&&(e.alignItems==="flex-start"||((t=e.sx)==null?void 0:t.alignItems)==="flex-start")&&{marginTop:"2px"})}),xB=Qt("a",{name:"JoyLink",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var i,a,c,h,f,o,x;return[Se({"--Icon-fontSize":"1.25em","--Icon-color":"currentColor","--CircularProgress-size":"1.25em","--CircularProgress-thickness":"3px"},t.level&&t.level!=="inherit"&&e.typography[t.level],t.level==="inherit"&&{font:"inherit"},t.underline==="none"&&{textDecoration:"none"},t.underline==="hover"&&{textDecoration:"none","&:hover":{"@media (hover: hover)":{textDecorationLine:"underline"}}},t.underline==="always"&&{textDecoration:"underline"},t.startDecorator&&{verticalAlign:"bottom"},{textDecorationThickness:"max(0.08em, 1px)",textUnderlineOffset:"0.15em",display:"inline-flex",alignItems:"center",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:e.vars.radius.xs,padding:0,cursor:"pointer",textDecorationColor:`var(--variant-outlinedBorder, rgba(${(i=e.vars.palette[t.color])==null?void 0:i.mainChannel} / var(--Link-underlineOpacity, 0.72)))`},t.variant?Se({paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},!t.nesting&&{marginInline:"-0.25em"}):{color:`var(--variant-plainColor, rgba(${(a=e.vars.palette[t.color])==null?void 0:a.mainChannel} / 1))`,[`&.${rM.disabled}`]:{pointerEvents:"none",color:`var(--variant-plainDisabledColor, rgba(${(c=e.vars.palette[t.color])==null?void 0:c.mainChannel} / 0.6))`}},{userSelect:t.component==="button"?"none":void 0,MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"}},t.overlay?{position:"initial","&::after":{content:'""',display:"block",position:"absolute",top:0,left:0,bottom:0,right:0,borderRadius:"var(--unstable_actionRadius, inherit)",margin:"var(--unstable_actionMargin)"},[`${e.focus.selector}`]:{"&::after":e.focus.default}}:{position:"relative",[e.focus.selector]:e.focus.default}),t.variant&&Se({},(h=e.variants[t.variant])==null?void 0:h[t.color],{"&:hover":{"@media (hover: hover)":(f=e.variants[`${t.variant}Hover`])==null?void 0:f[t.color]},"&:active":(o=e.variants[`${t.variant}Active`])==null?void 0:o[t.color],[`&.${rM.disabled}`]:(x=e.variants[`${t.variant}Disabled`])==null?void 0:x[t.color]})]}),bB=Y.forwardRef(function(t,i){const a=bi({props:t,name:"JoyLink"}),{color:c="primary",textColor:h,variant:f}=a,o=Er(a,mB),x=Y.useContext(J_),P=Y.useContext(UI),I=Fx(Se({},o,{color:h})),{children:R,disabled:D=!1,onBlur:$,onFocus:G,level:j="body-md",overlay:V=!1,underline:se="hover",endDecorator:ue,startDecorator:Q,component:de,slots:oe={},slotProps:be={}}=I,we=Er(I,gB),Ie=x||P?t.level||"inherit":j,{isFocusVisibleRef:ke,onBlur:ae,onFocus:Ee,ref:Ze}=rI(),[Qe,vt]=Y.useState(!1),st=Ra(i,Ze),He=bt=>{ae(bt),ke.current===!1&&vt(!1),$&&$(bt)},rt=bt=>{Ee(bt),ke.current===!0&&vt(!0),G&&G(bt)},Ge=Se({},I,{color:c,disabled:D,focusVisible:Qe,underline:se,variant:f,level:Ie,overlay:V,nesting:x}),Ve=yB(Ge),ut=Se({},we,{component:de,slots:oe,slotProps:be}),[ve,Fe]=br("root",{additionalProps:{onBlur:He,onFocus:rt},ref:st,className:Ve.root,elementType:xB,externalForwardedProps:ut,ownerState:Ge}),[pt,Tt]=br("startDecorator",{className:Ve.startDecorator,elementType:vB,externalForwardedProps:ut,ownerState:Ge}),[Ct,_t]=br("endDecorator",{className:Ve.endDecorator,elementType:_B,externalForwardedProps:ut,ownerState:Ge});return q.jsx(J_.Provider,{value:!0,children:q.jsxs(ve,Se({},Fe,{children:[Q&&q.jsx(pt,Se({},Tt,{children:Q})),Vv(R,["Skeleton"])?Y.cloneElement(R,{variant:R.props.variant||"inline"}):R,ue&&q.jsx(Ct,Se({},_t,{children:ue}))]}))})});function wB(e){return _i("MuiListDivider",e)}xi("MuiListDivider",["root","insetGutter","insetStartDecorator","insetStartContent","horizontal","vertical"]);const SB=["component","role","className","children","inset","orientation","slots","slotProps"],CB=e=>{const{orientation:t,inset:i}=e,a={root:["root",t,i&&i!=="context"&&`inset${wr(i)}`]};return ui(a,wB,{})},TB=Qt(qI,{name:"JoyListDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>Se({},e.inset==="context"&&{"--Divider-inset":"calc(-1 * var(--List-padding))"},e.row&&Se({marginInline:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginBlock:"var(--ListItem-paddingY)"},e["data-first-child"]===void 0&&{marginInlineStart:"calc(var(--List-gap) + var(--ListDivider-gap))"}),!e.row&&Se({},e["data-first-child"]===void 0&&{marginBlockStart:"calc(var(--List-gap) + var(--ListDivider-gap))"},{marginBlockEnd:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginInlineStart:"var(--ListItem-paddingLeft)",marginInlineEnd:"var(--ListItem-paddingRight)"},e.inset==="startDecorator"&&{marginInlineStart:"var(--ListItem-paddingLeft)"},e.inset==="startContent"&&{marginInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItemDecorator-size))"}))),xf=Y.forwardRef(function(t,i){const a=bi({props:t,name:"JoyListDivider"}),c=Y.useContext(jx),h=Y.useContext(A2),{component:f,role:o,className:x,children:P,inset:I="context",orientation:R,slots:D={},slotProps:$={}}=a,G=Er(a,SB),[j]=h?.split(":")||["",""],V=f||(j&&!j.match(/^(ul|ol|menu)$/)?"div":"li"),se=o||(V==="li"?"separator":void 0),ue=R||(c?"vertical":"horizontal"),Q=Se({},a,{inset:I,row:c,orientation:ue,component:V,role:se}),de=CB(Q),oe=Se({},G,{component:V,slots:D,slotProps:$}),[be,we]=br("root",{ref:i,className:ci(de.root,x),elementType:TB,externalForwardedProps:oe,ownerState:Q,additionalProps:Se({as:V,role:se},se==="separator"&&ue==="vertical"&&{"aria-orientation":"vertical"})});return q.jsx(be,Se({},we,{children:P}))});function MB(e){return _i("MuiListItemContent",e)}xi("MuiListItemContent",["root"]);const PB=["component","className","children","slots","slotProps"],EB=()=>ui({root:["root"]},MB,{}),IB=Qt("div",{name:"JoyListItemContent",slot:"Root",overridesResolver:(e,t)=>t.root})({flex:"1 1 auto",minWidth:0}),Q_=Y.forwardRef(function(t,i){const a=bi({props:t,name:"JoyListItemContent"}),{component:c,className:h,children:f,slots:o={},slotProps:x={}}=a,P=Er(a,PB),I=Se({},a),R=EB(),D=Se({},P,{component:c,slots:o,slotProps:x}),[$,G]=br("root",{ref:i,className:ci(R.root,h),elementType:IB,externalForwardedProps:D,ownerState:I});return q.jsx($,Se({},G,{children:f}))});function kB(e){return _i("MuiListItemDecorator",e)}xi("MuiListItemDecorator",["root"]);const AB=["component","className","children","slots","slotProps"],RB=()=>ui({root:["root"]},kB,{}),DB=Qt("span",{name:"JoyListItemDecorator",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>Se({boxSizing:"border-box",display:"inline-flex",alignItems:`var(--unstable_ListItemDecorator-alignItems, ${e.parentOrientation==="horizontal"?"center":"initial"})`},e.parentOrientation==="horizontal"?{minInlineSize:"var(--ListItemDecorator-size)",marginInlineEnd:"calc(-1 * var(--ListItem-gap))"}:{minBlockSize:"var(--ListItemDecorator-size)",justifyContent:"center",marginBlockEnd:"calc(-1 * var(--ListItem-gap))"})),Jc=Y.forwardRef(function(t,i){const a=bi({props:t,name:"JoyListItemDecorator"}),{component:c,className:h,children:f,slots:o={},slotProps:x={}}=a,P=Er(a,AB),I=Y.useContext(MI),R=Se({parentOrientation:I},a),D=RB(),$=Se({},P,{component:c,slots:o,slotProps:x}),[G,j]=br("root",{ref:i,className:ci(D.root,h),elementType:DB,externalForwardedProps:$,ownerState:R});return q.jsx(G,Se({},j,{children:f}))});function zB(e){return _i("MuiSheet",e)}xi("MuiSheet",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const OB=["className","color","component","variant","invertedColors","slots","slotProps"],LB=e=>{const{variant:t,color:i}=e,a={root:["root",t&&`variant${wr(t)}`,i&&`color${wr(i)}`]};return ui(a,zB,{})},FB=Qt("div",{name:"JoySheet",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var i,a;const c=(i=e.variants[t.variant])==null?void 0:i[t.color],{borderRadius:h,bgcolor:f,backgroundColor:o,background:x}=rm({theme:e,ownerState:t},["borderRadius","bgcolor","backgroundColor","background"]),P=zg(e,`palette.${f}`)||f||zg(e,`palette.${o}`)||o||x||c?.backgroundColor||c?.background||e.vars.palette.background.surface;return[Se({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--ListItem-stickyBackground":P==="transparent"?"initial":P,"--Sheet-background":P==="transparent"?"initial":P},h!==void 0&&{"--List-radius":`calc(${h} - var(--variant-borderWidth, 0px))`,"--unstable_actionRadius":`calc(${h} - var(--variant-borderWidth, 0px))`},{backgroundColor:e.vars.palette.background.surface,position:"relative"}),Se({},e.typography["body-md"],t.variant==="solid"&&t.color&&t.invertedColors&&Nx(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&Vx(t.color)(e),(a=e.variants[t.variant])==null?void 0:a[t.color],c)]}),HI=Y.forwardRef(function(t,i){const a=bi({props:t,name:"JoySheet"}),{className:c,color:h="neutral",component:f="div",variant:o="plain",invertedColors:x=!1,slots:P={},slotProps:I={}}=a,R=Er(a,OB),D=Se({},a,{color:h,component:f,invertedColors:x,variant:o}),$=LB(D),G=Se({},R,{component:f,slots:P,slotProps:I}),[j,V]=br("root",{ref:i,className:ci($.root,c),elementType:FB,externalForwardedProps:G,ownerState:D});return q.jsx(j,Se({},V))});function BB(e){return _i("MuiSnackbar",e)}xi("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","endDecorator","sizeSm","sizeMd","sizeLg","startDecorator","variantPlain","variantOutlined","variantSoft","variantSolid"]);const $B=["anchorOrigin","animationDuration","autoHideDuration","color","children","className","component","disableWindowBlurListener","endDecorator","invertedColors","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","onUnmount","open","resumeHideDuration","size","slots","slotProps","startDecorator","variant"];let WI=e=>e,nM,iM;const jB=e=>{const{variant:t,color:i,size:a,anchorOrigin:c}=e,h={root:["root",a&&`size${wr(a)}`,i&&`color${wr(i)}`,t&&`variant${wr(t)}`,`anchorOrigin${wr(c.vertical)}${wr(c.horizontal)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return ui(h,BB,{})},NB=u2(nM||(nM=WI`
  0% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(calc(var(--_Snackbar-anchorBottom, 1) * 100%));
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  100% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(0);
  }
`)),VB=u2(iM||(iM=WI`
  0% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(0);
    opacity: 1;
  }
  100% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(calc(var(--_Snackbar-anchorBottom, 1) * 100%));
    opacity: 0;
  }
`)),UB=Qt("div",{name:"JoySnackbar",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var i,a,c,h,f,o,x;const{p:P,padding:I,borderRadius:R}=rm({theme:e,ownerState:t},["p","padding","borderRadius"]);return[Se({"--Snackbar-radius":e.vars.radius.sm,"--Snackbar-decoratorChildRadius":"max((var(--Snackbar-radius) - var(--variant-borderWidth, 0px)) - var(--Snackbar-padding), min(var(--Snackbar-padding) + var(--variant-borderWidth, 0px), var(--Snackbar-radius) / 2))","--Button-minHeight":"var(--Snackbar-decoratorChildHeight)","--IconButton-size":"var(--Snackbar-decoratorChildHeight)","--Button-radius":"var(--Snackbar-decoratorChildRadius)","--IconButton-radius":"var(--Snackbar-decoratorChildRadius)","--Icon-color":"currentColor"},t.size==="sm"&&{"--Snackbar-padding":"0.75rem","--Snackbar-inset":"0.5rem","--Snackbar-decoratorChildHeight":"1.5rem","--Icon-fontSize":e.vars.fontSize.xl,gap:"0.5rem"},t.size==="md"&&{"--Snackbar-padding":"1rem","--Snackbar-inset":"0.75rem","--Snackbar-decoratorChildHeight":"2rem","--Icon-fontSize":e.vars.fontSize.xl,gap:"0.625rem"},t.size==="lg"&&{"--Snackbar-padding":"1.25rem","--Snackbar-inset":"1rem","--Snackbar-decoratorChildHeight":"2.375rem","--Icon-fontSize":e.vars.fontSize.xl2,gap:"0.875rem"},{zIndex:e.vars.zIndex.snackbar,position:"fixed",display:"flex",alignItems:"center",minWidth:300,top:((i=t.anchorOrigin)==null?void 0:i.vertical)==="top"?"var(--Snackbar-inset)":void 0,left:((a=t.anchorOrigin)==null?void 0:a.horizontal)==="left"?"var(--Snackbar-inset)":void 0,bottom:((c=t.anchorOrigin)==null?void 0:c.vertical)==="bottom"?"var(--Snackbar-inset)":void 0,right:((h=t.anchorOrigin)==null?void 0:h.horizontal)==="right"?"var(--Snackbar-inset)":void 0},((f=t.anchorOrigin)==null?void 0:f.horizontal)==="center"&&{"--Snackbar-translateX":"-50%",left:"50%",transform:"translateX(var(--Snackbar-translateX))"},((o=t.anchorOrigin)==null?void 0:o.vertical)==="top"&&{"--_Snackbar-anchorBottom":"-1"},{animation:`${NB} ${t.animationDuration}ms forwards`},!t.open&&{animationName:VB},{boxShadow:e.vars.shadow.lg,backgroundColor:e.vars.palette.background.surface,padding:"var(--Snackbar-padding)",borderRadius:"var(--Snackbar-radius)"},e.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[t.size]}`],t.variant==="solid"&&t.color&&t.invertedColors&&Nx(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&Vx(t.color)(e),(x=e.variants[t.variant])==null?void 0:x[t.color]),P!==void 0&&{"--Snackbar-padding":P},I!==void 0&&{"--Snackbar-padding":I},R!==void 0&&{"--Snackbar-radius":R}]}),GB=Qt("span",{name:"JoySnackbar",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({display:"inherit",flex:"none"}),qB=Qt("span",{name:"JoySnackbar",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({display:"inherit",flex:"none",marginLeft:"auto"}),HB={vertical:"bottom",horizontal:"right"},WB=Y.forwardRef(function(t,i){const a=bi({props:t,name:"JoySnackbar"}),{anchorOrigin:c=HB,animationDuration:h=300,autoHideDuration:f=null,color:o="neutral",children:x,className:P,component:I,disableWindowBlurListener:R=!1,endDecorator:D,invertedColors:$=!1,onUnmount:G,open:j,size:V="md",slots:se={},slotProps:ue,startDecorator:Q,variant:de="outlined"}=a,oe=Er(a,$B),[be,we]=Y.useState(!0),[Ie,ke]=Y.useState(!1),ae=Y.useRef(G);ae.current=G,Y.useEffect(()=>{if(j)ke(!1),we(!1);else{ke(!0);const Tt=setTimeout(()=>{var Ct;we(!0),ke(!1),(Ct=ae.current)==null||Ct.call(ae)},h);return()=>{clearTimeout(Tt)}}},[j,h]);const Ee=Se({},a,{anchorOrigin:c,autoHideDuration:f,color:o,animationDuration:h,disableWindowBlurListener:R,invertedColors:$,size:V,variant:de});delete Ee.onUnmount;const Ze=jB(Ee),{getRootProps:Qe,onClickAway:vt}=m4(Ee),st=Tt=>{Ie||vt(Tt)},He=Se({},oe,{component:I,slots:se,slotProps:ue}),[rt,Ge]=br("root",{ref:i,className:ci(Ze.root,P),elementType:UB,externalForwardedProps:He,getSlotProps:Qe,ownerState:Ee}),[Ve,ut]=br("startDecorator",{className:Ze.startDecorator,elementType:GB,externalForwardedProps:He,ownerState:Ee}),[ve,Fe]=br("endDecorator",{className:Ze.endDecorator,elementType:qB,externalForwardedProps:He,ownerState:Ee}),pt=se.clickAway||GO;return!j&&be?null:q.jsx(pt,Se({onClickAway:st},typeof ue?.clickAway=="function"?ue.clickAway(Ee):ue?.clickAway,{children:q.jsxs(rt,Se({},Ge,{children:[Q&&q.jsx(Ve,Se({},ut,{children:Q})),x,D&&q.jsx(ve,Se({},Fe,{children:D}))]}))}))}),fn=TO({createStyledComponent:Qt("div",{name:"JoyStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>bi({props:e,name:"JoyStack"})});function Wp(e,...t){const i=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(a=>i.searchParams.append("args[]",a)),`Minified MUI error #${e}; visit ${i} for the full message.`}const Wv="$$material";function ZB(e){return e==null||Object.keys(e).length===0}function ZI(e){const{styles:t,defaultTheme:i={}}=e,a=typeof t=="function"?c=>t(ZB(c)?i:c):t;return q.jsx(OE,{styles:a})}function XB(e,t){return H_(e,t)}function KB(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const oM=[];function Cf(e){return oM[0]=e,$v(oM)}var Tb={exports:{}},ai={};var sM;function YB(){if(sM)return ai;sM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),f=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),D=Symbol.for("react.view_transition"),$=Symbol.for("react.client.reference");function G(j){if(typeof j=="object"&&j!==null){var V=j.$$typeof;switch(V){case e:switch(j=j.type,j){case i:case c:case a:case x:case P:case D:return j;default:switch(j=j&&j.$$typeof,j){case f:case o:case R:case I:return j;case h:return j;default:return V}}case t:return V}}}return ai.ContextConsumer=h,ai.ContextProvider=f,ai.Element=e,ai.ForwardRef=o,ai.Fragment=i,ai.Lazy=R,ai.Memo=I,ai.Portal=t,ai.Profiler=c,ai.StrictMode=a,ai.Suspense=x,ai.SuspenseList=P,ai.isContextConsumer=function(j){return G(j)===h},ai.isContextProvider=function(j){return G(j)===f},ai.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},ai.isForwardRef=function(j){return G(j)===o},ai.isFragment=function(j){return G(j)===i},ai.isLazy=function(j){return G(j)===R},ai.isMemo=function(j){return G(j)===I},ai.isPortal=function(j){return G(j)===t},ai.isProfiler=function(j){return G(j)===c},ai.isStrictMode=function(j){return G(j)===a},ai.isSuspense=function(j){return G(j)===x},ai.isSuspenseList=function(j){return G(j)===P},ai.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===i||j===c||j===a||j===x||j===P||typeof j=="object"&&j!==null&&(j.$$typeof===R||j.$$typeof===I||j.$$typeof===f||j.$$typeof===h||j.$$typeof===o||j.$$typeof===$||j.getModuleId!==void 0)},ai.typeOf=G,ai}var aM;function JB(){return aM||(aM=1,Tb.exports=YB()),Tb.exports}var XI=JB();function Ku(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function KI(e){if(Y.isValidElement(e)||XI.isValidElementType(e)||!Ku(e))return e;const t={};return Object.keys(e).forEach(i=>{t[i]=KI(e[i])}),t}function pl(e,t,i={clone:!0}){const a=i.clone?{...e}:e;return Ku(e)&&Ku(t)&&Object.keys(t).forEach(c=>{Y.isValidElement(t[c])||XI.isValidElementType(t[c])?a[c]=t[c]:Ku(t[c])&&Object.prototype.hasOwnProperty.call(e,c)&&Ku(e[c])?a[c]=pl(e[c],t[c],i):i.clone?a[c]=Ku(t[c])?KI(t[c]):t[c]:a[c]=t[c]}),a}const QB=e=>{const t=Object.keys(e).map(i=>({key:i,val:e[i]}))||[];return t.sort((i,a)=>i.val-a.val),t.reduce((i,a)=>({...i,[a.key]:a.val}),{})};function e$(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:i="px",step:a=5,...c}=e,h=QB(t),f=Object.keys(h);function o(D){return`@media (min-width:${typeof t[D]=="number"?t[D]:D}${i})`}function x(D){return`@media (max-width:${(typeof t[D]=="number"?t[D]:D)-a/100}${i})`}function P(D,$){const G=f.indexOf($);return`@media (min-width:${typeof t[D]=="number"?t[D]:D}${i}) and (max-width:${(G!==-1&&typeof t[f[G]]=="number"?t[f[G]]:$)-a/100}${i})`}function I(D){return f.indexOf(D)+1<f.length?P(D,f[f.indexOf(D)+1]):o(D)}function R(D){const $=f.indexOf(D);return $===0?o(f[1]):$===f.length-1?x(f[$]):P(D,f[f.indexOf(D)+1]).replace("@media","@media not all and")}return{keys:f,values:h,up:o,down:x,between:P,only:I,not:R,unit:i,...c}}function lM(e,t){if(!e.containerQueries)return t;const i=Object.keys(t).filter(a=>a.startsWith("@container")).sort((a,c)=>{const h=/min-width:\s*([0-9.]+)/;return+(a.match(h)?.[1]||0)-+(c.match(h)?.[1]||0)});return i.length?i.reduce((a,c)=>{const h=t[c];return delete a[c],a[c]=h,a},{...t}):t}function t$(e,t){return t==="@"||t.startsWith("@")&&(e.some(i=>t.startsWith(`@${i}`))||!!t.match(/^@\d/))}function r$(e,t){const i=t.match(/^@([^/]+)?\/?(.+)?$/);if(!i)return null;const[,a,c]=i,h=Number.isNaN(+a)?a||0:+a;return e.containerQueries(c).up(h)}function n$(e){const t=(h,f)=>h.replace("@media",f?`@container ${f}`:"@container");function i(h,f){h.up=(...o)=>t(e.breakpoints.up(...o),f),h.down=(...o)=>t(e.breakpoints.down(...o),f),h.between=(...o)=>t(e.breakpoints.between(...o),f),h.only=(...o)=>t(e.breakpoints.only(...o),f),h.not=(...o)=>{const x=t(e.breakpoints.not(...o),f);return x.includes("not all and")?x.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):x}}const a={},c=h=>(i(a,h),a);return i(c),{...e,containerQueries:c}}const i$={borderRadius:4};function nv(e,t){return t?pl(e,t,{clone:!1}):e}const Gx={xs:0,sm:600,md:900,lg:1200,xl:1536},cM={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Gx[e]}px)`},o$={containerQueries:e=>({up:t=>{let i=typeof t=="number"?t:Gx[t]||t;return typeof i=="number"&&(i=`${i}px`),e?`@container ${e} (min-width:${i})`:`@container (min-width:${i})`}})};function ld(e,t,i){const a=e.theme||{};if(Array.isArray(t)){const h=a.breakpoints||cM;return t.reduce((f,o,x)=>(f[h.up(h.keys[x])]=i(t[x]),f),{})}if(typeof t=="object"){const h=a.breakpoints||cM;return Object.keys(t).reduce((f,o)=>{if(t$(h.keys,o)){const x=r$(a.containerQueries?a:o$,o);x&&(f[x]=i(t[o],o))}else if(Object.keys(h.values||Gx).includes(o)){const x=h.up(o);f[x]=i(t[o],o)}else{const x=o;f[x]=t[x]}return f},{})}return i(t)}function s$(e={}){return e.keys?.reduce((i,a)=>{const c=e.up(a);return i[c]={},i},{})||{}}function uM(e,t){return e.reduce((i,a)=>{const c=i[a];return(!c||Object.keys(c).length===0)&&delete i[a],i},t)}function Ng(e){if(typeof e!="string")throw new Error(Wp(7));return e.charAt(0).toUpperCase()+e.slice(1)}function qx(e,t,i=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&i){const a=`vars.${t}`.split(".").reduce((c,h)=>c&&c[h]?c[h]:null,e);if(a!=null)return a}return t.split(".").reduce((a,c)=>a&&a[c]!=null?a[c]:null,e)}function ex(e,t,i,a=i){let c;return typeof e=="function"?c=e(i):Array.isArray(e)?c=e[i]||a:c=qx(e,i)||a,t&&(c=t(c,a,e)),c}function yo(e){const{prop:t,cssProperty:i=e.prop,themeKey:a,transform:c}=e,h=f=>{if(f[t]==null)return null;const o=f[t],x=f.theme,P=qx(x,a)||{};return ld(f,o,R=>{let D=ex(P,c,R);return R===D&&typeof R=="string"&&(D=ex(P,c,`${t}${R==="default"?"":Ng(R)}`,R)),i===!1?D:{[i]:D}})};return h.propTypes={},h.filterProps=[t],h}function a$(e){const t={};return i=>(t[i]===void 0&&(t[i]=e(i)),t[i])}const l$={m:"margin",p:"padding"},c$={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},hM={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},u$=a$(e=>{if(e.length>2)if(hM[e])e=hM[e];else return[e];const[t,i]=e.split(""),a=l$[t],c=c$[i]||"";return Array.isArray(c)?c.map(h=>a+h):[a+c]}),O2=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],L2=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...O2,...L2];function Zv(e,t,i,a){const c=qx(e,t,!0)??i;return typeof c=="number"||typeof c=="string"?h=>typeof h=="string"?h:typeof c=="string"?c.startsWith("var(")&&h===0?0:c.startsWith("var(")&&h===1?c:`calc(${h} * ${c})`:c*h:Array.isArray(c)?h=>{if(typeof h=="string")return h;const f=Math.abs(h),o=c[f];return h>=0?o:typeof o=="number"?-o:typeof o=="string"&&o.startsWith("var(")?`calc(-1 * ${o})`:`-${o}`}:typeof c=="function"?c:()=>{}}function F2(e){return Zv(e,"spacing",8)}function Xv(e,t){return typeof t=="string"||t==null?t:e(t)}function h$(e,t){return i=>e.reduce((a,c)=>(a[c]=Xv(t,i),a),{})}function d$(e,t,i,a){if(!t.includes(i))return null;const c=u$(i),h=h$(c,a),f=e[i];return ld(e,f,h)}function YI(e,t){const i=F2(e.theme);return Object.keys(e).map(a=>d$(e,t,a,i)).reduce(nv,{})}function ao(e){return YI(e,O2)}ao.propTypes={};ao.filterProps=O2;function lo(e){return YI(e,L2)}lo.propTypes={};lo.filterProps=L2;function JI(e=8,t=F2({spacing:e})){if(e.mui)return e;const i=(...a)=>(a.length===0?[1]:a).map(h=>{const f=t(h);return typeof f=="number"?`${f}px`:f}).join(" ");return i.mui=!0,i}function Hx(...e){const t=e.reduce((a,c)=>(c.filterProps.forEach(h=>{a[h]=c}),a),{}),i=a=>Object.keys(a).reduce((c,h)=>t[h]?nv(c,t[h](a)):c,{});return i.propTypes={},i.filterProps=e.reduce((a,c)=>a.concat(c.filterProps),[]),i}function Yl(e){return typeof e!="number"?e:`${e}px solid`}function ac(e,t){return yo({prop:e,themeKey:"borders",transform:t})}const f$=ac("border",Yl),p$=ac("borderTop",Yl),m$=ac("borderRight",Yl),g$=ac("borderBottom",Yl),y$=ac("borderLeft",Yl),v$=ac("borderColor"),_$=ac("borderTopColor"),x$=ac("borderRightColor"),b$=ac("borderBottomColor"),w$=ac("borderLeftColor"),S$=ac("outline",Yl),C$=ac("outlineColor"),Wx=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Zv(e.theme,"shape.borderRadius",4),i=a=>({borderRadius:Xv(t,a)});return ld(e,e.borderRadius,i)}return null};Wx.propTypes={};Wx.filterProps=["borderRadius"];Hx(f$,p$,m$,g$,y$,v$,_$,x$,b$,w$,Wx,S$,C$);const Zx=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Zv(e.theme,"spacing",8),i=a=>({gap:Xv(t,a)});return ld(e,e.gap,i)}return null};Zx.propTypes={};Zx.filterProps=["gap"];const Xx=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Zv(e.theme,"spacing",8),i=a=>({columnGap:Xv(t,a)});return ld(e,e.columnGap,i)}return null};Xx.propTypes={};Xx.filterProps=["columnGap"];const Kx=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Zv(e.theme,"spacing",8),i=a=>({rowGap:Xv(t,a)});return ld(e,e.rowGap,i)}return null};Kx.propTypes={};Kx.filterProps=["rowGap"];const T$=yo({prop:"gridColumn"}),M$=yo({prop:"gridRow"}),P$=yo({prop:"gridAutoFlow"}),E$=yo({prop:"gridAutoColumns"}),I$=yo({prop:"gridAutoRows"}),k$=yo({prop:"gridTemplateColumns"}),A$=yo({prop:"gridTemplateRows"}),R$=yo({prop:"gridTemplateAreas"}),D$=yo({prop:"gridArea"});Hx(Zx,Xx,Kx,T$,M$,P$,E$,I$,k$,A$,R$,D$);function Mg(e,t){return t==="grey"?t:e}const z$=yo({prop:"color",themeKey:"palette",transform:Mg}),O$=yo({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Mg}),L$=yo({prop:"backgroundColor",themeKey:"palette",transform:Mg});Hx(z$,O$,L$);function al(e){return e<=1&&e!==0?`${e*100}%`:e}const F$=yo({prop:"width",transform:al}),B2=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=i=>{const a=e.theme?.breakpoints?.values?.[i]||Gx[i];return a?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${a}${e.theme.breakpoints.unit}`}:{maxWidth:a}:{maxWidth:al(i)}};return ld(e,e.maxWidth,t)}return null};B2.filterProps=["maxWidth"];const B$=yo({prop:"minWidth",transform:al}),$$=yo({prop:"height",transform:al}),j$=yo({prop:"maxHeight",transform:al}),N$=yo({prop:"minHeight",transform:al});yo({prop:"size",cssProperty:"width",transform:al});yo({prop:"size",cssProperty:"height",transform:al});const V$=yo({prop:"boxSizing"});Hx(F$,B2,B$,$$,j$,N$,V$);const Kv={border:{themeKey:"borders",transform:Yl},borderTop:{themeKey:"borders",transform:Yl},borderRight:{themeKey:"borders",transform:Yl},borderBottom:{themeKey:"borders",transform:Yl},borderLeft:{themeKey:"borders",transform:Yl},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Yl},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Wx},color:{themeKey:"palette",transform:Mg},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Mg},backgroundColor:{themeKey:"palette",transform:Mg},p:{style:lo},pt:{style:lo},pr:{style:lo},pb:{style:lo},pl:{style:lo},px:{style:lo},py:{style:lo},padding:{style:lo},paddingTop:{style:lo},paddingRight:{style:lo},paddingBottom:{style:lo},paddingLeft:{style:lo},paddingX:{style:lo},paddingY:{style:lo},paddingInline:{style:lo},paddingInlineStart:{style:lo},paddingInlineEnd:{style:lo},paddingBlock:{style:lo},paddingBlockStart:{style:lo},paddingBlockEnd:{style:lo},m:{style:ao},mt:{style:ao},mr:{style:ao},mb:{style:ao},ml:{style:ao},mx:{style:ao},my:{style:ao},margin:{style:ao},marginTop:{style:ao},marginRight:{style:ao},marginBottom:{style:ao},marginLeft:{style:ao},marginX:{style:ao},marginY:{style:ao},marginInline:{style:ao},marginInlineStart:{style:ao},marginInlineEnd:{style:ao},marginBlock:{style:ao},marginBlockStart:{style:ao},marginBlockEnd:{style:ao},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Zx},rowGap:{style:Kx},columnGap:{style:Xx},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:al},maxWidth:{style:B2},minWidth:{transform:al},height:{transform:al},maxHeight:{transform:al},minHeight:{transform:al},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function U$(...e){const t=e.reduce((a,c)=>a.concat(Object.keys(c)),[]),i=new Set(t);return e.every(a=>i.size===Object.keys(a).length)}function G$(e,t){return typeof e=="function"?e(t):e}function q$(){function e(i,a,c,h){const f={[i]:a,theme:c},o=h[i];if(!o)return{[i]:a};const{cssProperty:x=i,themeKey:P,transform:I,style:R}=o;if(a==null)return null;if(P==="typography"&&a==="inherit")return{[i]:a};const D=qx(c,P)||{};return R?R(f):ld(f,a,G=>{let j=ex(D,I,G);return G===j&&typeof G=="string"&&(j=ex(D,I,`${i}${G==="default"?"":Ng(G)}`,G)),x===!1?j:{[x]:j}})}function t(i){const{sx:a,theme:c={},nested:h}=i||{};if(!a)return null;const f=c.unstable_sxConfig??Kv;function o(x){let P=x;if(typeof x=="function")P=x(c);else if(typeof x!="object")return x;if(!P)return null;const I=s$(c.breakpoints),R=Object.keys(I);let D=I;return Object.keys(P).forEach($=>{const G=G$(P[$],c);if(G!=null)if(typeof G=="object")if(f[$])D=nv(D,e($,G,c,f));else{const j=ld({theme:c},G,V=>({[$]:V}));U$(j,G)?D[$]=t({sx:G,theme:c,nested:!0}):D=nv(D,j)}else D=nv(D,e($,G,c,f))}),!h&&c.modularCssLayers?{"@layer sx":lM(c,uM(R,D))}:lM(c,uM(R,D))}return Array.isArray(a)?a.map(o):o(a)}return t}const Zp=q$();Zp.filterProps=["sx"];function H$(e,t){const i=this;if(i.vars){if(!i.colorSchemes?.[e]||typeof i.getColorSchemeSelector!="function")return{};let a=i.getColorSchemeSelector(e);return a==="&"?t:((a.includes("data-")||a.includes("."))&&(a=`*:where(${a.replace(/\s*&$/,"")}) &`),{[a]:t})}return i.palette.mode===e?t:{}}function Yx(e={},...t){const{breakpoints:i={},palette:a={},spacing:c,shape:h={},...f}=e,o=e$(i),x=JI(c);let P=pl({breakpoints:o,direction:"ltr",components:{},palette:{mode:"light",...a},spacing:x,shape:{...i$,...h}},f);return P=n$(P),P.applyStyles=H$,P=t.reduce((I,R)=>pl(I,R),P),P.unstable_sxConfig={...Kv,...f?.unstable_sxConfig},P.unstable_sx=function(R){return Zp({sx:R,theme:this})},P}function W$(e){return Object.keys(e).length===0}function Jx(e=null){const t=Y.useContext(tm);return!t||W$(t)?e:t}const Z$=Yx();function Qx(e=Z$){return Jx(e)}function Mb(e){const t=Cf(e);return e!==t&&t.styles?(t.styles.match(/^@layer\s+[^{]*$/)||(t.styles=`@layer global{${t.styles}}`),t):e}function X$({styles:e,themeId:t,defaultTheme:i={}}){const a=Qx(i),c=t&&a[t]||a;let h=typeof e=="function"?e(c):e;return c.modularCssLayers&&(Array.isArray(h)?h=h.map(f=>Mb(typeof f=="function"?f(c):f)):h=Mb(h)),q.jsx(ZI,{styles:h})}const K$=e=>{const t={systemProps:{},otherProps:{}},i=e?.theme?.unstable_sxConfig??Kv;return Object.keys(e).forEach(a=>{i[a]?t.systemProps[a]=e[a]:t.otherProps[a]=e[a]}),t};function Y$(e){const{sx:t,...i}=e,{systemProps:a,otherProps:c}=K$(i);let h;return Array.isArray(t)?h=[a,...t]:typeof t=="function"?h=(...f)=>{const o=t(...f);return Ku(o)?{...a,...o}:a}:h={...a,...t},{...c,sx:h}}const dM=e=>e,J$=()=>{let e=dM;return{configure(t){e=t},generate(t){return e(t)},reset(){e=dM}}},Q$=J$(),ej={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function e1(e,t,i="Mui"){const a=ej[t];return a?`${i}-${a}`:`${Q$.generate(e)}-${t}`}function QI(e,t,i="Mui"){const a={};return t.forEach(c=>{a[c]=e1(e,c,i)}),a}function ek(e){const{variants:t,...i}=e,a={variants:t,style:Cf(i),isProcessed:!0};return a.style===i||t&&t.forEach(c=>{typeof c.style!="function"&&(c.style=Cf(c.style))}),a}const tj=Yx();function Pb(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function jp(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function rj(e){return e?(t,i)=>i[e]:null}function nj(e,t,i){e.theme=oj(e.theme)?i:e.theme[t]||e.theme}function R_(e,t,i){const a=typeof t=="function"?t(e):t;if(Array.isArray(a))return a.flatMap(c=>R_(e,c,i));if(Array.isArray(a?.variants)){let c;if(a.isProcessed)c=i?jp(a.style,i):a.style;else{const{variants:h,...f}=a;c=i?jp(Cf(f),i):f}return tk(e,a.variants,[c],i)}return a?.isProcessed?i?jp(Cf(a.style),i):a.style:i?jp(Cf(a),i):a}function tk(e,t,i=[],a=void 0){let c;e:for(let h=0;h<t.length;h+=1){const f=t[h];if(typeof f.props=="function"){if(c??={...e,...e.ownerState,ownerState:e.ownerState},!f.props(c))continue}else for(const o in f.props)if(e[o]!==f.props[o]&&e.ownerState?.[o]!==f.props[o])continue e;typeof f.style=="function"?(c??={...e,...e.ownerState,ownerState:e.ownerState},i.push(a?jp(Cf(f.style(c)),a):f.style(c))):i.push(a?jp(Cf(f.style),a):f.style)}return i}function rk(e={}){const{themeId:t,defaultTheme:i=tj,rootShouldForwardProp:a=Pb,slotShouldForwardProp:c=Pb}=e;function h(o){nj(o,t,i)}return(o,x={})=>{KB(o,be=>be.filter(we=>we!==Zp));const{name:P,slot:I,skipVariantsResolver:R,skipSx:D,overridesResolver:$=rj(aj(I)),...G}=x,j=P&&P.startsWith("Mui")||I?"components":"custom",V=R!==void 0?R:I&&I!=="Root"&&I!=="root"||!1,se=D||!1;let ue=Pb;I==="Root"||I==="root"?ue=a:I?ue=c:sj(o)&&(ue=void 0);const Q=XB(o,{shouldForwardProp:ue,label:ij(),...G}),de=be=>{if(be.__emotion_real===be)return be;if(typeof be=="function")return function(Ie){return R_(Ie,be,Ie.theme.modularCssLayers?j:void 0)};if(Ku(be)){const we=ek(be);return function(ke){return we.variants?R_(ke,we,ke.theme.modularCssLayers?j:void 0):ke.theme.modularCssLayers?jp(we.style,j):we.style}}return be},oe=(...be)=>{const we=[],Ie=be.map(de),ke=[];if(we.push(h),P&&$&&ke.push(function(Qe){const st=Qe.theme.components?.[P]?.styleOverrides;if(!st)return null;const He={};for(const rt in st)He[rt]=R_(Qe,st[rt],Qe.theme.modularCssLayers?"theme":void 0);return $(Qe,He)}),P&&!V&&ke.push(function(Qe){const st=Qe.theme?.components?.[P]?.variants;return st?tk(Qe,st,[],Qe.theme.modularCssLayers?"theme":void 0):null}),se||ke.push(Zp),Array.isArray(Ie[0])){const Ze=Ie.shift(),Qe=new Array(we.length).fill(""),vt=new Array(ke.length).fill("");let st;st=[...Qe,...Ze,...vt],st.raw=[...Qe,...Ze.raw,...vt],we.unshift(st)}const ae=[...we,...Ie,...ke],Ee=Q(...ae);return o.muiName&&(Ee.muiName=o.muiName),Ee};return Q.withConfig&&(oe.withConfig=Q.withConfig),oe}}function ij(e,t){return void 0}function oj(e){for(const t in e)return!1;return!0}function sj(e){return typeof e=="string"&&e.charCodeAt(0)>96}function aj(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const lj=rk();function tx(e,t,i=!1){const a={...t};for(const c in e)if(Object.prototype.hasOwnProperty.call(e,c)){const h=c;if(h==="components"||h==="slots")a[h]={...e[h],...a[h]};else if(h==="componentsProps"||h==="slotProps"){const f=e[h],o=t[h];if(!o)a[h]=f||{};else if(!f)a[h]=o;else{a[h]={...o};for(const x in f)if(Object.prototype.hasOwnProperty.call(f,x)){const P=x;a[h][P]=tx(f[P],o[P],i)}}}else h==="className"&&i&&t.className?a.className=ci(e?.className,t?.className):h==="style"&&i&&t.style?a.style={...e?.style,...t?.style}:a[h]===void 0&&(a[h]=e[h])}return a}function nk(e){const{theme:t,name:i,props:a}=e;return!t||!t.components||!t.components[i]||!t.components[i].defaultProps?a:tx(t.components[i].defaultProps,a)}function cj({props:e,name:t,defaultTheme:i,themeId:a}){let c=Qx(i);return a&&(c=c[a]||c),nk({theme:c,name:t,props:e})}const $2=typeof window<"u"?Y.useLayoutEffect:Y.useEffect;function uj(e,t,i,a,c){const[h,f]=Y.useState(()=>c&&i?i(e).matches:a?a(e).matches:t);return $2(()=>{if(!i)return;const o=i(e),x=()=>{f(o.matches)};return x(),o.addEventListener("change",x),()=>{o.removeEventListener("change",x)}},[e,i]),h}const hj={...yv},ik=hj.useSyncExternalStore;function dj(e,t,i,a,c){const h=Y.useCallback(()=>t,[t]),f=Y.useMemo(()=>{if(c&&i)return()=>i(e).matches;if(a!==null){const{matches:I}=a(e);return()=>I}return h},[h,e,a,c,i]),[o,x]=Y.useMemo(()=>{if(i===null)return[h,()=>()=>{}];const I=i(e);return[()=>I.matches,R=>(I.addEventListener("change",R),()=>{I.removeEventListener("change",R)})]},[h,i,e]);return ik(x,o,f)}function ok(e={}){const{themeId:t}=e;return function(a,c={}){let h=Jx();h&&t&&(h=h[t]||h);const f=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:o=!1,matchMedia:x=f?window.matchMedia:null,ssrMatchMedia:P=null,noSsr:I=!1}=nk({name:"MuiUseMediaQuery",props:c,theme:h});let R=typeof a=="function"?a(h):a;return R=R.replace(/^@media( ?)/m,""),R.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(ik!==void 0?dj:uj)(R,o,x,P,I)}}ok();function fj(e,t=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,i))}function j2(e,t=0,i=1){return fj(e,t,i)}function pj(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let i=e.match(t);return i&&i[0].length===1&&(i=i.map(a=>a+a)),i?`rgb${i.length===4?"a":""}(${i.map((a,c)=>c<3?parseInt(a,16):Math.round(parseInt(a,16)/255*1e3)/1e3).join(", ")})`:""}function Pf(e){if(e.type)return e;if(e.charAt(0)==="#")return Pf(pj(e));const t=e.indexOf("("),i=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(i))throw new Error(Wp(9,e));let a=e.substring(t+1,e.length-1),c;if(i==="color"){if(a=a.split(" "),c=a.shift(),a.length===4&&a[3].charAt(0)==="/"&&(a[3]=a[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(c))throw new Error(Wp(10,c))}else a=a.split(",");return a=a.map(h=>parseFloat(h)),{type:i,values:a,colorSpace:c}}const mj=e=>{const t=Pf(e);return t.values.slice(0,3).map((i,a)=>t.type.includes("hsl")&&a!==0?`${i}%`:i).join(" ")},qy=(e,t)=>{try{return mj(e)}catch{return e}};function t1(e){const{type:t,colorSpace:i}=e;let{values:a}=e;return t.includes("rgb")?a=a.map((c,h)=>h<3?parseInt(c,10):c):t.includes("hsl")&&(a[1]=`${a[1]}%`,a[2]=`${a[2]}%`),t.includes("color")?a=`${i} ${a.join(" ")}`:a=`${a.join(", ")}`,`${t}(${a})`}function sk(e){e=Pf(e);const{values:t}=e,i=t[0],a=t[1]/100,c=t[2]/100,h=a*Math.min(c,1-c),f=(P,I=(P+i/30)%12)=>c-h*Math.max(Math.min(I-3,9-I,1),-1);let o="rgb";const x=[Math.round(f(0)*255),Math.round(f(8)*255),Math.round(f(4)*255)];return e.type==="hsla"&&(o+="a",x.push(t[3])),t1({type:o,values:x})}function Mw(e){e=Pf(e);let t=e.type==="hsl"||e.type==="hsla"?Pf(sk(e)).values:e.values;return t=t.map(i=>(e.type!=="color"&&(i/=255),i<=.03928?i/12.92:((i+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function gj(e,t){const i=Mw(e),a=Mw(t);return(Math.max(i,a)+.05)/(Math.min(i,a)+.05)}function yj(e,t){return e=Pf(e),t=j2(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,t1(e)}function c_(e,t,i){try{return yj(e,t)}catch{return e}}function N2(e,t){if(e=Pf(e),t=j2(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let i=0;i<3;i+=1)e.values[i]*=1-t;return t1(e)}function gi(e,t,i){try{return N2(e,t)}catch{return e}}function V2(e,t){if(e=Pf(e),t=j2(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let i=0;i<3;i+=1)e.values[i]+=(255-e.values[i])*t;else if(e.type.includes("color"))for(let i=0;i<3;i+=1)e.values[i]+=(1-e.values[i])*t;return t1(e)}function yi(e,t,i){try{return V2(e,t)}catch{return e}}function vj(e,t=.15){return Mw(e)>.5?N2(e,t):V2(e,t)}function u_(e,t,i){try{return vj(e,t)}catch{return e}}const ak=Y.createContext(null);function U2(){return Y.useContext(ak)}const _j=typeof Symbol=="function"&&Symbol.for,xj=_j?Symbol.for("mui.nested"):"__THEME_NESTED__";function bj(e,t){return typeof t=="function"?t(e):{...e,...t}}function wj(e){const{children:t,theme:i}=e,a=U2(),c=Y.useMemo(()=>{const h=a===null?{...i}:bj(a,i);return h!=null&&(h[xj]=a!==null),h},[i,a]);return q.jsx(ak.Provider,{value:c,children:t})}const Sj=Y.createContext();function Cj({value:e,...t}){return q.jsx(Sj.Provider,{value:e??!0,...t})}const lk=Y.createContext(void 0);function Tj({value:e,children:t}){return q.jsx(lk.Provider,{value:e,children:t})}function Mj(e){const{theme:t,name:i,props:a}=e;if(!t||!t.components||!t.components[i])return a;const c=t.components[i];return c.defaultProps?tx(c.defaultProps,a,t.components.mergeClassNameAndStyle):!c.styleOverrides&&!c.variants?tx(c,a,t.components.mergeClassNameAndStyle):a}function Pj({props:e,name:t}){const i=Y.useContext(lk);return Mj({props:e,name:t,theme:{components:i}})}let fM=0;function Ej(e){const[t,i]=Y.useState(e),a=e||t;return Y.useEffect(()=>{t==null&&(fM+=1,i(`mui-${fM}`))},[t]),a}const Ij={...yv},pM=Ij.useId;function kj(e){return pM!==void 0?pM():Ej(e)}function Aj(e){const t=Jx(),i=kj()||"",{modularCssLayers:a}=e;let c="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!a||t!==null?c="":typeof a=="string"?c=a.replace(/mui(?!\.)/g,c):c=`@layer ${c};`,$2(()=>{const h=document.querySelector("head");if(!h)return;const f=h.firstChild;if(c){if(f&&f.hasAttribute?.("data-mui-layer-order")&&f.getAttribute("data-mui-layer-order")===i)return;const o=document.createElement("style");o.setAttribute("data-mui-layer-order",i),o.textContent=c,h.prepend(o)}else h.querySelector(`style[data-mui-layer-order="${i}"]`)?.remove()},[c,i]),c?q.jsx(X$,{styles:c}):null}const mM={};function gM(e,t,i,a=!1){return Y.useMemo(()=>{const c=e&&t[e]||t;if(typeof i=="function"){const h=i(c),f=e?{...t,[e]:h}:h;return a?()=>f:f}return e?{...t,[e]:i}:{...t,...i}},[e,t,i,a])}function Rj(e){const{children:t,theme:i,themeId:a}=e,c=Jx(mM),h=U2()||mM,f=gM(a,c,i),o=gM(a,h,i,!0),x=(a?f[a]:f).direction==="rtl",P=Aj(f);return q.jsx(wj,{theme:o,children:q.jsx(tm.Provider,{value:f,children:q.jsx(Cj,{value:x,children:q.jsxs(Tj,{value:a?f[a].components:f.components,children:[P,t]})})})})}const yM={theme:void 0};function Dj(e){let t,i;return function(c){let h=t;return(h===void 0||c.theme!==i)&&(yM.theme=c.theme,h=ek(e(yM)),t=h,i=c.theme),h}}const G2="mode",q2="color-scheme",zj="data-color-scheme";function Oj(e){const{defaultMode:t="system",defaultLightColorScheme:i="light",defaultDarkColorScheme:a="dark",modeStorageKey:c=G2,colorSchemeStorageKey:h=q2,attribute:f=zj,colorSchemeNode:o="document.documentElement",nonce:x}=e||{};let P="",I=f;if(f==="class"&&(I=".%s"),f==="data"&&(I="[data-%s]"),I.startsWith(".")){const D=I.substring(1);P+=`${o}.classList.remove('${D}'.replace('%s', light), '${D}'.replace('%s', dark));
      ${o}.classList.add('${D}'.replace('%s', colorScheme));`}const R=I.match(/\[([^\]]+)\]/);if(R){const[D,$]=R[1].split("=");$||(P+=`${o}.removeAttribute('${D}'.replace('%s', light));
      ${o}.removeAttribute('${D}'.replace('%s', dark));`),P+=`
      ${o}.setAttribute('${D}'.replace('%s', colorScheme), ${$?`${$}.replace('%s', colorScheme)`:'""'});`}else P+=`${o}.setAttribute('${I}', colorScheme);`;return q.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?x:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${c}') || '${t}';
  const dark = localStorage.getItem('${h}-dark') || '${a}';
  const light = localStorage.getItem('${h}-light') || '${i}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${P}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function Lj(){}const Fj=({key:e,storageWindow:t})=>(!t&&typeof window<"u"&&(t=window),{get(i){if(typeof window>"u")return;if(!t)return i;let a;try{a=t.localStorage.getItem(e)}catch{}return a||i},set:i=>{if(t)try{t.localStorage.setItem(e,i)}catch{}},subscribe:i=>{if(!t)return Lj;const a=c=>{const h=c.newValue;c.key===e&&i(h)};return t.addEventListener("storage",a),()=>{t.removeEventListener("storage",a)}}});function Eb(){}function vM(e){if(typeof window<"u"&&typeof window.matchMedia=="function"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function ck(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function Bj(e){return ck(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function $j(e){const{defaultMode:t="light",defaultLightColorScheme:i,defaultDarkColorScheme:a,supportedColorSchemes:c=[],modeStorageKey:h=G2,colorSchemeStorageKey:f=q2,storageWindow:o=typeof window>"u"?void 0:window,storageManager:x=Fj,noSsr:P=!1}=e,I=c.join(","),R=c.length>1,D=Y.useMemo(()=>x?.({key:h,storageWindow:o}),[x,h,o]),$=Y.useMemo(()=>x?.({key:`${f}-light`,storageWindow:o}),[x,f,o]),G=Y.useMemo(()=>x?.({key:`${f}-dark`,storageWindow:o}),[x,f,o]),[j,V]=Y.useState(()=>{const Ie=D?.get(t)||t,ke=$?.get(i)||i,ae=G?.get(a)||a;return{mode:Ie,systemMode:vM(Ie),lightColorScheme:ke,darkColorScheme:ae}}),[se,ue]=Y.useState(P||!R);Y.useEffect(()=>{ue(!0)},[]);const Q=Bj(j),de=Y.useCallback(Ie=>{V(ke=>{if(Ie===ke.mode)return ke;const ae=Ie??t;return D?.set(ae),{...ke,mode:ae,systemMode:vM(ae)}})},[D,t]),oe=Y.useCallback(Ie=>{Ie?typeof Ie=="string"?Ie&&!I.includes(Ie)?console.error(`\`${Ie}\` does not exist in \`theme.colorSchemes\`.`):V(ke=>{const ae={...ke};return ck(ke,Ee=>{Ee==="light"&&($?.set(Ie),ae.lightColorScheme=Ie),Ee==="dark"&&(G?.set(Ie),ae.darkColorScheme=Ie)}),ae}):V(ke=>{const ae={...ke},Ee=Ie.light===null?i:Ie.light,Ze=Ie.dark===null?a:Ie.dark;return Ee&&(I.includes(Ee)?(ae.lightColorScheme=Ee,$?.set(Ee)):console.error(`\`${Ee}\` does not exist in \`theme.colorSchemes\`.`)),Ze&&(I.includes(Ze)?(ae.darkColorScheme=Ze,G?.set(Ze)):console.error(`\`${Ze}\` does not exist in \`theme.colorSchemes\`.`)),ae}):V(ke=>($?.set(i),G?.set(a),{...ke,lightColorScheme:i,darkColorScheme:a}))},[I,$,G,i,a]),be=Y.useCallback(Ie=>{j.mode==="system"&&V(ke=>{const ae=Ie?.matches?"dark":"light";return ke.systemMode===ae?ke:{...ke,systemMode:ae}})},[j.mode]),we=Y.useRef(be);return we.current=be,Y.useEffect(()=>{if(typeof window.matchMedia!="function"||!R)return;const Ie=(...ae)=>we.current(...ae),ke=window.matchMedia("(prefers-color-scheme: dark)");return ke.addListener(Ie),Ie(ke),()=>{ke.removeListener(Ie)}},[R]),Y.useEffect(()=>{if(R){const Ie=D?.subscribe(Ee=>{(!Ee||["light","dark","system"].includes(Ee))&&de(Ee||t)})||Eb,ke=$?.subscribe(Ee=>{(!Ee||I.match(Ee))&&oe({light:Ee})})||Eb,ae=G?.subscribe(Ee=>{(!Ee||I.match(Ee))&&oe({dark:Ee})})||Eb;return()=>{Ie(),ke(),ae()}}},[oe,de,I,t,o,R,D,$,G]),{...j,mode:se?j.mode:void 0,systemMode:se?j.systemMode:void 0,colorScheme:se?Q:void 0,setMode:de,setColorScheme:oe}}const jj="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function Nj(e){const{themeId:t,theme:i={},modeStorageKey:a=G2,colorSchemeStorageKey:c=q2,disableTransitionOnChange:h=!1,defaultColorScheme:f,resolveTheme:o}=e,x={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},P=Y.createContext(void 0),I=()=>Y.useContext(P)||x,R={},D={};function $(se){const{children:ue,theme:Q,modeStorageKey:de=a,colorSchemeStorageKey:oe=c,disableTransitionOnChange:be=h,storageManager:we,storageWindow:Ie=typeof window>"u"?void 0:window,documentNode:ke=typeof document>"u"?void 0:document,colorSchemeNode:ae=typeof document>"u"?void 0:document.documentElement,disableNestedContext:Ee=!1,disableStyleSheetGeneration:Ze=!1,defaultMode:Qe="system",forceThemeRerender:vt=!1,noSsr:st}=se,He=Y.useRef(!1),rt=U2(),Ge=Y.useContext(P),Ve=!!Ge&&!Ee,ut=Y.useMemo(()=>Q||(typeof i=="function"?i():i),[Q]),ve=ut[t],Fe=ve||ut,{colorSchemes:pt=R,components:Tt=D,cssVarPrefix:Ct}=Fe,_t=Object.keys(pt).filter(vn=>!!pt[vn]).join(","),bt=Y.useMemo(()=>_t.split(","),[_t]),nt=typeof f=="string"?f:f.light,kt=typeof f=="string"?f:f.dark,At=pt[nt]&&pt[kt]?Qe:pt[Fe.defaultColorScheme]?.palette?.mode||Fe.palette?.mode,{mode:dr,setMode:ir,systemMode:Gr,lightColorScheme:Tr,darkColorScheme:or,colorScheme:qt,setColorScheme:pr}=$j({supportedColorSchemes:bt,defaultLightColorScheme:nt,defaultDarkColorScheme:kt,modeStorageKey:de,colorSchemeStorageKey:oe,defaultMode:At,storageManager:we,storageWindow:Ie,noSsr:st});let Xt=dr,Ir=qt;Ve&&(Xt=Ge.mode,Ir=Ge.colorScheme);let Rr=Ir||Fe.defaultColorScheme;Fe.vars&&!vt&&(Rr=Fe.defaultColorScheme);const Br=Y.useMemo(()=>{const vn=Fe.generateThemeVars?.()||Fe.vars,Sr={...Fe,components:Tt,colorSchemes:pt,cssVarPrefix:Ct,vars:vn};if(typeof Sr.generateSpacing=="function"&&(Sr.spacing=Sr.generateSpacing()),Rr){const Dr=pt[Rr];Dr&&typeof Dr=="object"&&Object.keys(Dr).forEach(ur=>{Dr[ur]&&typeof Dr[ur]=="object"?Sr[ur]={...Sr[ur],...Dr[ur]}:Sr[ur]=Dr[ur]})}return o?o(Sr):Sr},[Fe,Rr,Tt,pt,Ct]),Wr=Fe.colorSchemeSelector;$2(()=>{if(Ir&&ae&&Wr&&Wr!=="media"){const vn=Wr;let Sr=Wr;if(vn==="class"&&(Sr=".%s"),vn==="data"&&(Sr="[data-%s]"),vn?.startsWith("data-")&&!vn.includes("%s")&&(Sr=`[${vn}="%s"]`),Sr.startsWith("."))ae.classList.remove(...bt.map(Dr=>Sr.substring(1).replace("%s",Dr))),ae.classList.add(Sr.substring(1).replace("%s",Ir));else{const Dr=Sr.replace("%s",Ir).match(/\[([^\]]+)\]/);if(Dr){const[ur,Zr]=Dr[1].split("=");Zr||bt.forEach(Ne=>{ae.removeAttribute(ur.replace(Ir,Ne))}),ae.setAttribute(ur,Zr?Zr.replace(/"|'/g,""):"")}else ae.setAttribute(Sr,Ir)}}},[Ir,Wr,ae,bt]),Y.useEffect(()=>{let vn;if(be&&He.current&&ke){const Sr=ke.createElement("style");Sr.appendChild(ke.createTextNode(jj)),ke.head.appendChild(Sr),window.getComputedStyle(ke.body),vn=setTimeout(()=>{ke.head.removeChild(Sr)},1)}return()=>{clearTimeout(vn)}},[Ir,be,ke]),Y.useEffect(()=>(He.current=!0,()=>{He.current=!1}),[]);const sn=Y.useMemo(()=>({allColorSchemes:bt,colorScheme:Ir,darkColorScheme:or,lightColorScheme:Tr,mode:Xt,setColorScheme:pr,setMode:ir,systemMode:Gr}),[bt,Ir,or,Tr,Xt,pr,ir,Gr,Br.colorSchemeSelector]);let On=!0;(Ze||Fe.cssVariables===!1||Ve&&rt?.cssVarPrefix===Ct)&&(On=!1);const Tn=q.jsxs(Y.Fragment,{children:[q.jsx(Rj,{themeId:ve?t:void 0,theme:Br,children:ue}),On&&q.jsx(ZI,{styles:Br.generateStyleSheets?.()||[]})]});return Ve?Tn:q.jsx(P.Provider,{value:sn,children:Tn})}const G=typeof f=="string"?f:f.light,j=typeof f=="string"?f:f.dark;return{CssVarsProvider:$,useColorScheme:I,getInitColorSchemeScript:se=>Oj({colorSchemeStorageKey:c,defaultLightColorScheme:G,defaultDarkColorScheme:j,modeStorageKey:a,...se})}}function Vj(e=""){function t(...a){if(!a.length)return"";const c=a[0];return typeof c=="string"&&!c.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${c}${t(...a.slice(1))})`:`, ${c}`}return(a,...c)=>`var(--${e?`${e}-`:""}${a}${t(...c)})`}const _M=(e,t,i,a=[])=>{let c=e;t.forEach((h,f)=>{f===t.length-1?Array.isArray(c)?c[Number(h)]=i:c&&typeof c=="object"&&(c[h]=i):c&&typeof c=="object"&&(c[h]||(c[h]=a.includes(h)?[]:{}),c=c[h])})},Uj=(e,t,i)=>{function a(c,h=[],f=[]){Object.entries(c).forEach(([o,x])=>{(!i||i&&!i([...h,o]))&&x!=null&&(typeof x=="object"&&Object.keys(x).length>0?a(x,[...h,o],Array.isArray(x)?[...f,o]:f):t([...h,o],x,f))})}a(e)},Gj=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(a=>e.includes(a))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function Ib(e,t){const{prefix:i,shouldSkipGeneratingVar:a}=t||{},c={},h={},f={};return Uj(e,(o,x,P)=>{if((typeof x=="string"||typeof x=="number")&&(!a||!a(o,x))){const I=`--${i?`${i}-`:""}${o.join("-")}`,R=Gj(o,x);Object.assign(c,{[I]:R}),_M(h,o,`var(${I})`,P),_M(f,o,`var(${I}, ${R})`,P)}},o=>o[0]==="vars"),{css:c,vars:h,varsWithDefaults:f}}function qj(e,t={}){const{getSelector:i=V,disableCssColorScheme:a,colorSchemeSelector:c}=t,{colorSchemes:h={},components:f,defaultColorScheme:o="light",...x}=e,{vars:P,css:I,varsWithDefaults:R}=Ib(x,t);let D=R;const $={},{[o]:G,...j}=h;if(Object.entries(j||{}).forEach(([Q,de])=>{const{vars:oe,css:be,varsWithDefaults:we}=Ib(de,t);D=pl(D,we),$[Q]={css:be,vars:oe}}),G){const{css:Q,vars:de,varsWithDefaults:oe}=Ib(G,t);D=pl(D,oe),$[o]={css:Q,vars:de}}function V(Q,de){let oe=c;if(c==="class"&&(oe=".%s"),c==="data"&&(oe="[data-%s]"),c?.startsWith("data-")&&!c.includes("%s")&&(oe=`[${c}="%s"]`),Q){if(oe==="media")return e.defaultColorScheme===Q?":root":{[`@media (prefers-color-scheme: ${h[Q]?.palette?.mode||Q})`]:{":root":de}};if(oe)return e.defaultColorScheme===Q?`:root, ${oe.replace("%s",String(Q))}`:oe.replace("%s",String(Q))}return":root"}return{vars:D,generateThemeVars:()=>{let Q={...P};return Object.entries($).forEach(([,{vars:de}])=>{Q=pl(Q,de)}),Q},generateStyleSheets:()=>{const Q=[],de=e.defaultColorScheme||"light";function oe(Ie,ke){Object.keys(ke).length&&Q.push(typeof Ie=="string"?{[Ie]:{...ke}}:Ie)}oe(i(void 0,{...I}),I);const{[de]:be,...we}=$;if(be){const{css:Ie}=be,ke=h[de]?.palette?.mode,ae=!a&&ke?{colorScheme:ke,...Ie}:{...Ie};oe(i(de,{...ae}),ae)}return Object.entries(we).forEach(([Ie,{css:ke}])=>{const ae=h[Ie]?.palette?.mode,Ee=!a&&ae?{colorScheme:ae,...ke}:{...ke};oe(i(Ie,{...Ee}),Ee)}),Q}}}function Hj(e){return function(i){return e==="media"?`@media (prefers-color-scheme: ${i})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${i}"] &`:e==="class"?`.${i} &`:e==="data"?`[data-${i}] &`:`${e.replace("%s",i)} &`:"&"}}function H2(e,t,i=void 0){const a={};for(const c in e){const h=e[c];let f="",o=!0;for(let x=0;x<h.length;x+=1){const P=h[x];P&&(f+=(o===!0?"":" ")+t(P),o=!1,i&&i[P]&&(f+=" "+i[P]))}a[c]=f}return a}function Wj(e,t){return Y.isValidElement(e)&&t.indexOf(e.type.muiName??e.type?._payload?.value?.muiName)!==-1}const Zj=(e,t)=>e.filter(i=>t.includes(i)),Jg=(e,t,i)=>{const a=e.keys[0];Array.isArray(t)?t.forEach((c,h)=>{i((f,o)=>{h<=e.keys.length-1&&(h===0?Object.assign(f,o):f[e.up(e.keys[h])]=o)},c)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:Zj(e.keys,Object.keys(t))).forEach(h=>{if(e.keys.includes(h)){const f=t[h];f!==void 0&&i((o,x)=>{a===h?Object.assign(o,x):o[e.up(h)]=x},f)}}):(typeof t=="number"||typeof t=="string")&&i((c,h)=>{Object.assign(c,h)},t)};function rx(e){return`--Grid-${e}Spacing`}function r1(e){return`--Grid-parent-${e}Spacing`}const xM="--Grid-columns",Pg="--Grid-parent-columns",Xj=({theme:e,ownerState:t})=>{const i={};return Jg(e.breakpoints,t.size,(a,c)=>{let h={};c==="grow"&&(h={flexBasis:0,flexGrow:1,maxWidth:"100%"}),c==="auto"&&(h={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof c=="number"&&(h={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${c} / var(${Pg}) - (var(${Pg}) - ${c}) * (var(${r1("column")}) / var(${Pg})))`}),a(i,h)}),i},Kj=({theme:e,ownerState:t})=>{const i={};return Jg(e.breakpoints,t.offset,(a,c)=>{let h={};c==="auto"&&(h={marginLeft:"auto"}),typeof c=="number"&&(h={marginLeft:c===0?"0px":`calc(100% * ${c} / var(${Pg}) + var(${r1("column")}) * ${c} / var(${Pg}))`}),a(i,h)}),i},Yj=({theme:e,ownerState:t})=>{if(!t.container)return{};const i={[xM]:12};return Jg(e.breakpoints,t.columns,(a,c)=>{const h=c??12;a(i,{[xM]:h,"> *":{[Pg]:h}})}),i},Jj=({theme:e,ownerState:t})=>{if(!t.container)return{};const i={};return Jg(e.breakpoints,t.rowSpacing,(a,c)=>{const h=typeof c=="string"?c:e.spacing?.(c);a(i,{[rx("row")]:h,"> *":{[r1("row")]:h}})}),i},Qj=({theme:e,ownerState:t})=>{if(!t.container)return{};const i={};return Jg(e.breakpoints,t.columnSpacing,(a,c)=>{const h=typeof c=="string"?c:e.spacing?.(c);a(i,{[rx("column")]:h,"> *":{[r1("column")]:h}})}),i},eN=({theme:e,ownerState:t})=>{if(!t.container)return{};const i={};return Jg(e.breakpoints,t.direction,(a,c)=>{a(i,{flexDirection:c})}),i},tN=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},gap:`var(${rx("row")}) var(${rx("column")})`}}),rN=e=>{const t=[];return Object.entries(e).forEach(([i,a])=>{a!==!1&&a!==void 0&&t.push(`grid-${i}-${String(a)}`)}),t},nN=(e,t="xs")=>{function i(a){return a===void 0?!1:typeof a=="string"&&!Number.isNaN(Number(a))||typeof a=="number"&&a>0}if(i(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const a=[];return Object.entries(e).forEach(([c,h])=>{i(h)&&a.push(`spacing-${c}-${String(h)}`)}),a}return[]},iN=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,i])=>`direction-${t}-${i}`):[`direction-xs-${String(e)}`];function oN(e,t){e.item!==void 0&&delete e.item,e.zeroMinWidth!==void 0&&delete e.zeroMinWidth,t.keys.forEach(i=>{e[i]!==void 0&&delete e[i]})}const sN=Yx(),aN=lj("div",{name:"MuiGrid",slot:"Root"});function lN(e){return cj({props:e,name:"MuiGrid",defaultTheme:sN})}function cN(e={}){const{createStyledComponent:t=aN,useThemeProps:i=lN,useTheme:a=Qx,componentName:c="MuiGrid"}=e,h=(P,I)=>{const{container:R,direction:D,spacing:$,wrap:G,size:j}=P,V={root:["root",R&&"container",G!=="wrap"&&`wrap-xs-${String(G)}`,...iN(D),...rN(j),...R?nN($,I.breakpoints.keys[0]):[]]};return H2(V,se=>e1(c,se),{})};function f(P,I,R=()=>!0){const D={};return P===null||(Array.isArray(P)?P.forEach(($,G)=>{$!==null&&R($)&&I.keys[G]&&(D[I.keys[G]]=$)}):typeof P=="object"?Object.keys(P).forEach($=>{const G=P[$];G!=null&&R(G)&&(D[$]=G)}):D[I.keys[0]]=P),D}const o=t(Yj,Qj,Jj,Xj,eN,tN,Kj),x=Y.forwardRef(function(I,R){const D=a(),$=i(I),G=Y$($);oN(G,D.breakpoints);const{className:j,children:V,columns:se=12,container:ue=!1,component:Q="div",direction:de="row",wrap:oe="wrap",size:be={},offset:we={},spacing:Ie=0,rowSpacing:ke=Ie,columnSpacing:ae=Ie,unstable_level:Ee=0,...Ze}=G,Qe=f(be,D.breakpoints,ve=>ve!==!1),vt=f(we,D.breakpoints),st=I.columns??(Ee?void 0:se),He=I.spacing??(Ee?void 0:Ie),rt=I.rowSpacing??I.spacing??(Ee?void 0:ke),Ge=I.columnSpacing??I.spacing??(Ee?void 0:ae),Ve={...G,level:Ee,columns:st,container:ue,direction:de,wrap:oe,spacing:He,rowSpacing:rt,columnSpacing:Ge,size:Qe,offset:vt},ut=h(Ve,D);return q.jsx(o,{ref:R,as:Q,ownerState:Ve,className:ci(ut.root,j),...Ze,children:Y.Children.map(V,ve=>Y.isValidElement(ve)&&Wj(ve,["Grid"])&&ue&&ve.props.container?Y.cloneElement(ve,{unstable_level:ve.props?.unstable_level??Ee+1}):ve)})});return x.muiName="Grid",x}const Tv={black:"#000",white:"#fff"},uN={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Qm={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},eg={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Ny={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},tg={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},rg={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},ng={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function uk(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Tv.white,default:Tv.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const hN=uk();function hk(){return{text:{primary:Tv.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Tv.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const bM=hk();function wM(e,t,i,a){const c=a.light||a,h=a.dark||a*1.5;e[t]||(e.hasOwnProperty(i)?e[t]=e[i]:t==="light"?e.light=V2(e.main,c):t==="dark"&&(e.dark=N2(e.main,h)))}function dN(e="light"){return e==="dark"?{main:tg[200],light:tg[50],dark:tg[400]}:{main:tg[700],light:tg[400],dark:tg[800]}}function fN(e="light"){return e==="dark"?{main:Qm[200],light:Qm[50],dark:Qm[400]}:{main:Qm[500],light:Qm[300],dark:Qm[700]}}function pN(e="light"){return e==="dark"?{main:eg[500],light:eg[300],dark:eg[700]}:{main:eg[700],light:eg[400],dark:eg[800]}}function mN(e="light"){return e==="dark"?{main:rg[400],light:rg[300],dark:rg[700]}:{main:rg[700],light:rg[500],dark:rg[900]}}function gN(e="light"){return e==="dark"?{main:ng[400],light:ng[300],dark:ng[700]}:{main:ng[800],light:ng[500],dark:ng[900]}}function yN(e="light"){return e==="dark"?{main:Ny[400],light:Ny[300],dark:Ny[700]}:{main:"#ed6c02",light:Ny[500],dark:Ny[900]}}function W2(e){const{mode:t="light",contrastThreshold:i=3,tonalOffset:a=.2,...c}=e,h=e.primary||dN(t),f=e.secondary||fN(t),o=e.error||pN(t),x=e.info||mN(t),P=e.success||gN(t),I=e.warning||yN(t);function R(j){return gj(j,bM.text.primary)>=i?bM.text.primary:hN.text.primary}const D=({color:j,name:V,mainShade:se=500,lightShade:ue=300,darkShade:Q=700})=>{if(j={...j},!j.main&&j[se]&&(j.main=j[se]),!j.hasOwnProperty("main"))throw new Error(Wp(11,V?` (${V})`:"",se));if(typeof j.main!="string")throw new Error(Wp(12,V?` (${V})`:"",JSON.stringify(j.main)));return wM(j,"light",ue,a),wM(j,"dark",Q,a),j.contrastText||(j.contrastText=R(j.main)),j};let $;return t==="light"?$=uk():t==="dark"&&($=hk()),pl({common:{...Tv},mode:t,primary:D({color:h,name:"primary"}),secondary:D({color:f,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:D({color:o,name:"error"}),warning:D({color:I,name:"warning"}),info:D({color:x,name:"info"}),success:D({color:P,name:"success"}),grey:uN,contrastThreshold:i,getContrastText:R,augmentColor:D,tonalOffset:a,...$},c)}function vN(e){const t={};return Object.entries(e).forEach(a=>{const[c,h]=a;typeof h=="object"&&(t[c]=`${h.fontStyle?`${h.fontStyle} `:""}${h.fontVariant?`${h.fontVariant} `:""}${h.fontWeight?`${h.fontWeight} `:""}${h.fontStretch?`${h.fontStretch} `:""}${h.fontSize||""}${h.lineHeight?`/${h.lineHeight} `:""}${h.fontFamily||""}`)}),t}function _N(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function xN(e){return Math.round(e*1e5)/1e5}const SM={textTransform:"uppercase"},CM='"Roboto", "Helvetica", "Arial", sans-serif';function dk(e,t){const{fontFamily:i=CM,fontSize:a=14,fontWeightLight:c=300,fontWeightRegular:h=400,fontWeightMedium:f=500,fontWeightBold:o=700,htmlFontSize:x=16,allVariants:P,pxToRem:I,...R}=typeof t=="function"?t(e):t,D=a/14,$=I||(V=>`${V/x*D}rem`),G=(V,se,ue,Q,de)=>({fontFamily:i,fontWeight:V,fontSize:$(se),lineHeight:ue,...i===CM?{letterSpacing:`${xN(Q/se)}em`}:{},...de,...P}),j={h1:G(c,96,1.167,-1.5),h2:G(c,60,1.2,-.5),h3:G(h,48,1.167,0),h4:G(h,34,1.235,.25),h5:G(h,24,1.334,0),h6:G(f,20,1.6,.15),subtitle1:G(h,16,1.75,.15),subtitle2:G(f,14,1.57,.1),body1:G(h,16,1.5,.15),body2:G(h,14,1.43,.15),button:G(f,14,1.75,.4,SM),caption:G(h,12,1.66,.4),overline:G(h,12,2.66,1,SM),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return pl({htmlFontSize:x,pxToRem:$,fontFamily:i,fontSize:a,fontWeightLight:c,fontWeightRegular:h,fontWeightMedium:f,fontWeightBold:o,...j},R,{clone:!1})}const bN=.2,wN=.14,SN=.12;function Ni(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${bN})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${wN})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${SN})`].join(",")}const CN=["none",Ni(0,2,1,-1,0,1,1,0,0,1,3,0),Ni(0,3,1,-2,0,2,2,0,0,1,5,0),Ni(0,3,3,-2,0,3,4,0,0,1,8,0),Ni(0,2,4,-1,0,4,5,0,0,1,10,0),Ni(0,3,5,-1,0,5,8,0,0,1,14,0),Ni(0,3,5,-1,0,6,10,0,0,1,18,0),Ni(0,4,5,-2,0,7,10,1,0,2,16,1),Ni(0,5,5,-3,0,8,10,1,0,3,14,2),Ni(0,5,6,-3,0,9,12,1,0,3,16,2),Ni(0,6,6,-3,0,10,14,1,0,4,18,3),Ni(0,6,7,-4,0,11,15,1,0,4,20,3),Ni(0,7,8,-4,0,12,17,2,0,5,22,4),Ni(0,7,8,-4,0,13,19,2,0,5,24,4),Ni(0,7,9,-4,0,14,21,2,0,5,26,4),Ni(0,8,9,-5,0,15,22,2,0,6,28,5),Ni(0,8,10,-5,0,16,24,2,0,6,30,5),Ni(0,8,11,-5,0,17,26,2,0,6,32,5),Ni(0,9,11,-5,0,18,28,2,0,7,34,6),Ni(0,9,12,-6,0,19,29,2,0,7,36,6),Ni(0,10,13,-6,0,20,31,3,0,8,38,7),Ni(0,10,13,-6,0,21,33,3,0,8,40,7),Ni(0,10,14,-6,0,22,35,3,0,8,42,7),Ni(0,11,14,-7,0,23,36,3,0,9,44,8),Ni(0,11,15,-7,0,24,38,3,0,9,46,8)],TN={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},fk={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function TM(e){return`${Math.round(e)}ms`}function MN(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function PN(e){const t={...TN,...e.easing},i={...fk,...e.duration};return{getAutoHeightDuration:MN,create:(c=["all"],h={})=>{const{duration:f=i.standard,easing:o=t.easeInOut,delay:x=0,...P}=h;return(Array.isArray(c)?c:[c]).map(I=>`${I} ${typeof f=="string"?f:TM(f)} ${o} ${typeof x=="string"?x:TM(x)}`).join(",")},...e,easing:t,duration:i}}const EN={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function IN(e){return Ku(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function pk(e={}){const t={...e};function i(a){const c=Object.entries(a);for(let h=0;h<c.length;h++){const[f,o]=c[h];!IN(o)||f.startsWith("unstable_")?delete a[f]:Ku(o)&&(a[f]={...o},i(a[f]))}}return i(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function Pw(e={},...t){const{breakpoints:i,mixins:a={},spacing:c,palette:h={},transitions:f={},typography:o={},shape:x,...P}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(Wp(20));const I=W2(h),R=Yx(e);let D=pl(R,{mixins:_N(R.breakpoints,a),palette:I,shadows:CN.slice(),typography:dk(I,o),transitions:PN(f),zIndex:{...EN}});return D=pl(D,P),D=t.reduce(($,G)=>pl($,G),D),D.unstable_sxConfig={...Kv,...P?.unstable_sxConfig},D.unstable_sx=function(G){return Zp({sx:G,theme:this})},D.toRuntimeSource=pk,D}function kN(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const AN=[...Array(25)].map((e,t)=>{if(t===0)return"none";const i=kN(t);return`linear-gradient(rgba(255 255 255 / ${i}), rgba(255 255 255 / ${i}))`});function mk(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function gk(e){return e==="dark"?AN:[]}function RN(e){const{palette:t={mode:"light"},opacity:i,overlays:a,...c}=e,h=W2(t);return{palette:h,opacity:{...mk(h.mode),...i},overlays:a||gk(h.mode),...c}}function DN(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const zN=e=>[...[...Array(25)].map((t,i)=>`--${e?`${e}-`:""}overlays-${i}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],ON=e=>(t,i)=>{const a=e.rootSelector||":root",c=e.colorSchemeSelector;let h=c;if(c==="class"&&(h=".%s"),c==="data"&&(h="[data-%s]"),c?.startsWith("data-")&&!c.includes("%s")&&(h=`[${c}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const f={};return zN(e.cssVarPrefix).forEach(o=>{f[o]=i[o],delete i[o]}),h==="media"?{[a]:i,"@media (prefers-color-scheme: dark)":{[a]:f}}:h?{[h.replace("%s",t)]:f,[`${a}, ${h.replace("%s",t)}`]:i}:{[a]:{...i,...f}}}if(h&&h!=="media")return`${a}, ${h.replace("%s",String(t))}`}else if(t){if(h==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[a]:i}};if(h)return h.replace("%s",String(t))}return a};function LN(e,t){t.forEach(i=>{e[i]||(e[i]={})})}function Et(e,t,i){!e[t]&&i&&(e[t]=i)}function Hy(e){return typeof e!="string"||!e.startsWith("hsl")?e:sk(e)}function ed(e,t){`${t}Channel`in e||(e[`${t}Channel`]=qy(Hy(e[t])))}function FN(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Gu=e=>{try{return e()}catch{}},BN=(e="mui")=>Vj(e);function kb(e,t,i,a){if(!t)return;t=t===!0?{}:t;const c=a==="dark"?"dark":"light";if(!i){e[a]=RN({...t,palette:{mode:c,...t?.palette}});return}const{palette:h,...f}=Pw({...i,palette:{mode:c,...t?.palette}});return e[a]={...t,palette:h,opacity:{...mk(c),...t?.opacity},overlays:t?.overlays||gk(c)},f}function yk(e={},...t){const{colorSchemes:i={light:!0},defaultColorScheme:a,disableCssColorScheme:c=!1,cssVarPrefix:h="mui",shouldSkipGeneratingVar:f=DN,colorSchemeSelector:o=i.light&&i.dark?"media":void 0,rootSelector:x=":root",...P}=e,I=Object.keys(i)[0],R=a||(i.light&&I!=="light"?"light":I),D=BN(h),{[R]:$,light:G,dark:j,...V}=i,se={...V};let ue=$;if((R==="dark"&&!("dark"in i)||R==="light"&&!("light"in i))&&(ue=!0),!ue)throw new Error(Wp(21,R));const Q=kb(se,ue,P,R);G&&!se.light&&kb(se,G,void 0,"light"),j&&!se.dark&&kb(se,j,void 0,"dark");let de={defaultColorScheme:R,...Q,cssVarPrefix:h,colorSchemeSelector:o,rootSelector:x,getCssVar:D,colorSchemes:se,font:{...vN(Q.typography),...Q.font},spacing:FN(P.spacing)};Object.keys(de.colorSchemes).forEach(ke=>{const ae=de.colorSchemes[ke].palette,Ee=Ze=>{const Qe=Ze.split("-"),vt=Qe[1],st=Qe[2];return D(Ze,ae[vt][st])};if(ae.mode==="light"&&(Et(ae.common,"background","#fff"),Et(ae.common,"onBackground","#000")),ae.mode==="dark"&&(Et(ae.common,"background","#000"),Et(ae.common,"onBackground","#fff")),LN(ae,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),ae.mode==="light"){Et(ae.Alert,"errorColor",gi(ae.error.light,.6)),Et(ae.Alert,"infoColor",gi(ae.info.light,.6)),Et(ae.Alert,"successColor",gi(ae.success.light,.6)),Et(ae.Alert,"warningColor",gi(ae.warning.light,.6)),Et(ae.Alert,"errorFilledBg",Ee("palette-error-main")),Et(ae.Alert,"infoFilledBg",Ee("palette-info-main")),Et(ae.Alert,"successFilledBg",Ee("palette-success-main")),Et(ae.Alert,"warningFilledBg",Ee("palette-warning-main")),Et(ae.Alert,"errorFilledColor",Gu(()=>ae.getContrastText(ae.error.main))),Et(ae.Alert,"infoFilledColor",Gu(()=>ae.getContrastText(ae.info.main))),Et(ae.Alert,"successFilledColor",Gu(()=>ae.getContrastText(ae.success.main))),Et(ae.Alert,"warningFilledColor",Gu(()=>ae.getContrastText(ae.warning.main))),Et(ae.Alert,"errorStandardBg",yi(ae.error.light,.9)),Et(ae.Alert,"infoStandardBg",yi(ae.info.light,.9)),Et(ae.Alert,"successStandardBg",yi(ae.success.light,.9)),Et(ae.Alert,"warningStandardBg",yi(ae.warning.light,.9)),Et(ae.Alert,"errorIconColor",Ee("palette-error-main")),Et(ae.Alert,"infoIconColor",Ee("palette-info-main")),Et(ae.Alert,"successIconColor",Ee("palette-success-main")),Et(ae.Alert,"warningIconColor",Ee("palette-warning-main")),Et(ae.AppBar,"defaultBg",Ee("palette-grey-100")),Et(ae.Avatar,"defaultBg",Ee("palette-grey-400")),Et(ae.Button,"inheritContainedBg",Ee("palette-grey-300")),Et(ae.Button,"inheritContainedHoverBg",Ee("palette-grey-A100")),Et(ae.Chip,"defaultBorder",Ee("palette-grey-400")),Et(ae.Chip,"defaultAvatarColor",Ee("palette-grey-700")),Et(ae.Chip,"defaultIconColor",Ee("palette-grey-700")),Et(ae.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Et(ae.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Et(ae.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Et(ae.LinearProgress,"primaryBg",yi(ae.primary.main,.62)),Et(ae.LinearProgress,"secondaryBg",yi(ae.secondary.main,.62)),Et(ae.LinearProgress,"errorBg",yi(ae.error.main,.62)),Et(ae.LinearProgress,"infoBg",yi(ae.info.main,.62)),Et(ae.LinearProgress,"successBg",yi(ae.success.main,.62)),Et(ae.LinearProgress,"warningBg",yi(ae.warning.main,.62)),Et(ae.Skeleton,"bg",`rgba(${Ee("palette-text-primaryChannel")} / 0.11)`),Et(ae.Slider,"primaryTrack",yi(ae.primary.main,.62)),Et(ae.Slider,"secondaryTrack",yi(ae.secondary.main,.62)),Et(ae.Slider,"errorTrack",yi(ae.error.main,.62)),Et(ae.Slider,"infoTrack",yi(ae.info.main,.62)),Et(ae.Slider,"successTrack",yi(ae.success.main,.62)),Et(ae.Slider,"warningTrack",yi(ae.warning.main,.62));const Ze=u_(ae.background.default,.8);Et(ae.SnackbarContent,"bg",Ze),Et(ae.SnackbarContent,"color",Gu(()=>ae.getContrastText(Ze))),Et(ae.SpeedDialAction,"fabHoverBg",u_(ae.background.paper,.15)),Et(ae.StepConnector,"border",Ee("palette-grey-400")),Et(ae.StepContent,"border",Ee("palette-grey-400")),Et(ae.Switch,"defaultColor",Ee("palette-common-white")),Et(ae.Switch,"defaultDisabledColor",Ee("palette-grey-100")),Et(ae.Switch,"primaryDisabledColor",yi(ae.primary.main,.62)),Et(ae.Switch,"secondaryDisabledColor",yi(ae.secondary.main,.62)),Et(ae.Switch,"errorDisabledColor",yi(ae.error.main,.62)),Et(ae.Switch,"infoDisabledColor",yi(ae.info.main,.62)),Et(ae.Switch,"successDisabledColor",yi(ae.success.main,.62)),Et(ae.Switch,"warningDisabledColor",yi(ae.warning.main,.62)),Et(ae.TableCell,"border",yi(c_(ae.divider,1),.88)),Et(ae.Tooltip,"bg",c_(ae.grey[700],.92))}if(ae.mode==="dark"){Et(ae.Alert,"errorColor",yi(ae.error.light,.6)),Et(ae.Alert,"infoColor",yi(ae.info.light,.6)),Et(ae.Alert,"successColor",yi(ae.success.light,.6)),Et(ae.Alert,"warningColor",yi(ae.warning.light,.6)),Et(ae.Alert,"errorFilledBg",Ee("palette-error-dark")),Et(ae.Alert,"infoFilledBg",Ee("palette-info-dark")),Et(ae.Alert,"successFilledBg",Ee("palette-success-dark")),Et(ae.Alert,"warningFilledBg",Ee("palette-warning-dark")),Et(ae.Alert,"errorFilledColor",Gu(()=>ae.getContrastText(ae.error.dark))),Et(ae.Alert,"infoFilledColor",Gu(()=>ae.getContrastText(ae.info.dark))),Et(ae.Alert,"successFilledColor",Gu(()=>ae.getContrastText(ae.success.dark))),Et(ae.Alert,"warningFilledColor",Gu(()=>ae.getContrastText(ae.warning.dark))),Et(ae.Alert,"errorStandardBg",gi(ae.error.light,.9)),Et(ae.Alert,"infoStandardBg",gi(ae.info.light,.9)),Et(ae.Alert,"successStandardBg",gi(ae.success.light,.9)),Et(ae.Alert,"warningStandardBg",gi(ae.warning.light,.9)),Et(ae.Alert,"errorIconColor",Ee("palette-error-main")),Et(ae.Alert,"infoIconColor",Ee("palette-info-main")),Et(ae.Alert,"successIconColor",Ee("palette-success-main")),Et(ae.Alert,"warningIconColor",Ee("palette-warning-main")),Et(ae.AppBar,"defaultBg",Ee("palette-grey-900")),Et(ae.AppBar,"darkBg",Ee("palette-background-paper")),Et(ae.AppBar,"darkColor",Ee("palette-text-primary")),Et(ae.Avatar,"defaultBg",Ee("palette-grey-600")),Et(ae.Button,"inheritContainedBg",Ee("palette-grey-800")),Et(ae.Button,"inheritContainedHoverBg",Ee("palette-grey-700")),Et(ae.Chip,"defaultBorder",Ee("palette-grey-700")),Et(ae.Chip,"defaultAvatarColor",Ee("palette-grey-300")),Et(ae.Chip,"defaultIconColor",Ee("palette-grey-300")),Et(ae.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Et(ae.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Et(ae.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Et(ae.LinearProgress,"primaryBg",gi(ae.primary.main,.5)),Et(ae.LinearProgress,"secondaryBg",gi(ae.secondary.main,.5)),Et(ae.LinearProgress,"errorBg",gi(ae.error.main,.5)),Et(ae.LinearProgress,"infoBg",gi(ae.info.main,.5)),Et(ae.LinearProgress,"successBg",gi(ae.success.main,.5)),Et(ae.LinearProgress,"warningBg",gi(ae.warning.main,.5)),Et(ae.Skeleton,"bg",`rgba(${Ee("palette-text-primaryChannel")} / 0.13)`),Et(ae.Slider,"primaryTrack",gi(ae.primary.main,.5)),Et(ae.Slider,"secondaryTrack",gi(ae.secondary.main,.5)),Et(ae.Slider,"errorTrack",gi(ae.error.main,.5)),Et(ae.Slider,"infoTrack",gi(ae.info.main,.5)),Et(ae.Slider,"successTrack",gi(ae.success.main,.5)),Et(ae.Slider,"warningTrack",gi(ae.warning.main,.5));const Ze=u_(ae.background.default,.98);Et(ae.SnackbarContent,"bg",Ze),Et(ae.SnackbarContent,"color",Gu(()=>ae.getContrastText(Ze))),Et(ae.SpeedDialAction,"fabHoverBg",u_(ae.background.paper,.15)),Et(ae.StepConnector,"border",Ee("palette-grey-600")),Et(ae.StepContent,"border",Ee("palette-grey-600")),Et(ae.Switch,"defaultColor",Ee("palette-grey-300")),Et(ae.Switch,"defaultDisabledColor",Ee("palette-grey-600")),Et(ae.Switch,"primaryDisabledColor",gi(ae.primary.main,.55)),Et(ae.Switch,"secondaryDisabledColor",gi(ae.secondary.main,.55)),Et(ae.Switch,"errorDisabledColor",gi(ae.error.main,.55)),Et(ae.Switch,"infoDisabledColor",gi(ae.info.main,.55)),Et(ae.Switch,"successDisabledColor",gi(ae.success.main,.55)),Et(ae.Switch,"warningDisabledColor",gi(ae.warning.main,.55)),Et(ae.TableCell,"border",gi(c_(ae.divider,1),.68)),Et(ae.Tooltip,"bg",c_(ae.grey[700],.92))}ed(ae.background,"default"),ed(ae.background,"paper"),ed(ae.common,"background"),ed(ae.common,"onBackground"),ed(ae,"divider"),Object.keys(ae).forEach(Ze=>{const Qe=ae[Ze];Ze!=="tonalOffset"&&Qe&&typeof Qe=="object"&&(Qe.main&&Et(ae[Ze],"mainChannel",qy(Hy(Qe.main))),Qe.light&&Et(ae[Ze],"lightChannel",qy(Hy(Qe.light))),Qe.dark&&Et(ae[Ze],"darkChannel",qy(Hy(Qe.dark))),Qe.contrastText&&Et(ae[Ze],"contrastTextChannel",qy(Hy(Qe.contrastText))),Ze==="text"&&(ed(ae[Ze],"primary"),ed(ae[Ze],"secondary")),Ze==="action"&&(Qe.active&&ed(ae[Ze],"active"),Qe.selected&&ed(ae[Ze],"selected")))})}),de=t.reduce((ke,ae)=>pl(ke,ae),de);const oe={prefix:h,disableCssColorScheme:c,shouldSkipGeneratingVar:f,getSelector:ON(de)},{vars:be,generateThemeVars:we,generateStyleSheets:Ie}=qj(de,oe);return de.vars=be,Object.entries(de.colorSchemes[de.defaultColorScheme]).forEach(([ke,ae])=>{de[ke]=ae}),de.generateThemeVars=we,de.generateStyleSheets=Ie,de.generateSpacing=function(){return JI(P.spacing,F2(this))},de.getColorSchemeSelector=Hj(o),de.spacing=de.generateSpacing(),de.shouldSkipGeneratingVar=f,de.unstable_sxConfig={...Kv,...P?.unstable_sxConfig},de.unstable_sx=function(ae){return Zp({sx:ae,theme:this})},de.toRuntimeSource=pk,de}function MM(e,t,i){e.colorSchemes&&i&&(e.colorSchemes[t]={...i!==!0&&i,palette:W2({...i===!0?{}:i.palette,mode:t})})}function vk(e={},...t){const{palette:i,cssVariables:a=!1,colorSchemes:c=i?void 0:{light:!0},defaultColorScheme:h=i?.mode,...f}=e,o=h||"light",x=c?.[o],P={...c,...i?{[o]:{...typeof x!="boolean"&&x,palette:i}}:void 0};if(a===!1){if(!("colorSchemes"in e))return Pw(e,...t);let I=i;"palette"in e||P[o]&&(P[o]!==!0?I=P[o].palette:o==="dark"&&(I={mode:"dark"}));const R=Pw({...e,palette:I},...t);return R.defaultColorScheme=o,R.colorSchemes=P,R.palette.mode==="light"&&(R.colorSchemes.light={...P.light!==!0&&P.light,palette:R.palette},MM(R,"dark",P.dark)),R.palette.mode==="dark"&&(R.colorSchemes.dark={...P.dark!==!0&&P.dark,palette:R.palette},MM(R,"light",P.light)),R}return!i&&!("light"in P)&&o==="light"&&(P.light=!0),yk({...f,colorSchemes:P,defaultColorScheme:o,...typeof a!="boolean"&&a},...t)}const _k=vk();function Yv(){const e=Qx(_k);return e[Wv]||e}function $N(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const jN=e=>$N(e)&&e!=="classes",Jv=rk({themeId:Wv,defaultTheme:_k,rootShouldForwardProp:jN}),h_={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:NN}=Nj({themeId:Wv,theme:()=>vk({cssVariables:!0}),colorSchemeStorageKey:h_.colorSchemeStorageKey,modeStorageKey:h_.modeStorageKey,defaultColorScheme:{light:h_.defaultLightColorScheme,dark:h_.defaultDarkColorScheme},resolveTheme:e=>{const t={...e,typography:dk(e.palette,e.typography)};return t.unstable_sx=function(a){return Zp({sx:a,theme:this})},t}});function VN(e){return q.jsx(NN,{...e})}var UN=Object.create,xk=Object.defineProperty,GN=Object.getOwnPropertyDescriptor,bk=Object.getOwnPropertyNames,qN=Object.getPrototypeOf,HN=Object.prototype.hasOwnProperty,hh=(e,t)=>function(){return t||(0,e[bk(e)[0]])((t={exports:{}}).exports,t),t.exports},WN=(e,t,i,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(var c=bk(t),h=0,f=c.length,o;h<f;h++)o=c[h],!HN.call(e,o)&&o!==i&&xk(e,o,{get:(x=>t[x]).bind(null,o),enumerable:!(a=GN(t,o))||a.enumerable});return e},vo=(e,t,i)=>(i=e!=null?UN(qN(e)):{},WN(xk(i,"default",{value:e,enumerable:!0}),e)),wk=hh({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/typeof.js"(e,t){function i(a){"@babel/helpers - typeof";return t.exports=i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},t.exports.__esModule=!0,t.exports.default=t.exports,i(a)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports}}),ZN=hh({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPrimitive.js"(e,t){var i=wk().default;function a(c,h){if(i(c)!="object"||!c)return c;var f=c[Symbol.toPrimitive];if(f!==void 0){var o=f.call(c,h||"default");if(i(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(c)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports}}),XN=hh({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPropertyKey.js"(e,t){var i=wk().default,a=ZN();function c(h){var f=a(h,"string");return i(f)=="symbol"?f:f+""}t.exports=c,t.exports.__esModule=!0,t.exports.default=t.exports}}),om=hh({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/defineProperty.js"(e,t){var i=XN();function a(c,h,f){return(h=i(h))in c?Object.defineProperty(c,h,{value:f,enumerable:!0,configurable:!0,writable:!0}):c[h]=f,c}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports}}),au=hh({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/objectSpread2.js"(e,t){var i=om();function a(h,f){var o=Object.keys(h);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(h);f&&(x=x.filter(function(P){return Object.getOwnPropertyDescriptor(h,P).enumerable})),o.push.apply(o,x)}return o}function c(h){for(var f=1;f<arguments.length;f++){var o=arguments[f]!=null?arguments[f]:{};f%2?a(Object(o),!0).forEach(function(x){i(h,x,o[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach(function(x){Object.defineProperty(h,x,Object.getOwnPropertyDescriptor(o,x))})}return h}t.exports=c,t.exports.__esModule=!0,t.exports.default=t.exports}});function Qv(e){const t={subscribe(i){let a=null,c=!1,h=!1,f=!1;function o(){if(a===null){f=!0;return}h||(h=!0,typeof a=="function"?a():a&&a.unsubscribe())}return a=e({next(x){var P;c||(P=i.next)===null||P===void 0||P.call(i,x)},error(x){var P;c||(c=!0,(P=i.error)===null||P===void 0||P.call(i,x),o())},complete(){var x;c||(c=!0,(x=i.complete)===null||x===void 0||x.call(i),o())}}),f&&o(),{unsubscribe:o}},pipe(...i){return i.reduce(KN,t)}};return t}function KN(e,t){return t(e)}function YN(e){const t=new AbortController;return new Promise((a,c)=>{let h=!1;function f(){h||(h=!0,o.unsubscribe())}t.signal.addEventListener("abort",()=>{c(t.signal.reason)});const o=e.subscribe({next(x){h=!0,a(x),f()},error(x){c(x)},complete(){t.abort(),f()}})})}function JN(e){return t=>{let i=0,a=null;const c=[];function h(){a||(a=t.subscribe({next(o){for(const P of c){var x;(x=P.next)===null||x===void 0||x.call(P,o)}},error(o){for(const P of c){var x;(x=P.error)===null||x===void 0||x.call(P,o)}},complete(){for(const x of c){var o;(o=x.complete)===null||o===void 0||o.call(x)}}}))}function f(){if(i===0&&a){const o=a;a=null,o.unsubscribe()}}return Qv(o=>(i++,c.push(o),h(),{unsubscribe(){i--,f();const x=c.findIndex(P=>P===o);x>-1&&c.splice(x,1)}}))}}function Sk(e){let t=e;const i=[],a=f=>{t!==void 0&&f.next(t),i.push(f)},c=f=>{i.splice(i.indexOf(f),1)},h=Qv(f=>(a(f),()=>{c(f)}));return h.next=f=>{if(t!==f){t=f;for(const o of i)o.next(f)}},h.get=()=>t,h}function QN(e){return Qv(t=>{function i(c=0,h=e.op){const f=e.links[c];if(!f)throw new Error("No more links to execute - did you forget to add an ending link?");return f({op:h,next(x){return i(c+1,x)}})}return i().subscribe(t)})}function Mv(e){return!!e&&!Array.isArray(e)&&typeof e=="object"}function e8(){return Object.create(null)}const PM=e=>e();function EM(e=0){return new Promise(t=>setTimeout(t,e))}var t8=Object.create,Ck=Object.defineProperty,r8=Object.getOwnPropertyDescriptor,Tk=Object.getOwnPropertyNames,n8=Object.getPrototypeOf,i8=Object.prototype.hasOwnProperty,e0=(e,t)=>function(){return t||(0,e[Tk(e)[0]])((t={exports:{}}).exports,t),t.exports},o8=(e,t,i,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(var c=Tk(t),h=0,f=c.length,o;h<f;h++)o=c[h],!i8.call(e,o)&&o!==i&&Ck(e,o,{get:(x=>t[x]).bind(null,o),enumerable:!(a=r8(t,o))||a.enumerable});return e},n1=(e,t,i)=>(i=e!=null?t8(n8(e)):{},o8(Ck(i,"default",{value:e,enumerable:!0}),e));const Mk=()=>{},IM=e=>{Object.freeze&&Object.freeze(e)};function Pk(e,t,i){var a;const c=t.join(".");return(a=i[c])!==null&&a!==void 0||(i[c]=new Proxy(Mk,{get(h,f){if(!(typeof f!="string"||f==="then"))return Pk(e,[...t,f],i)},apply(h,f,o){const x=t[t.length-1];let P={args:o,path:t};return x==="call"?P={args:o.length>=2?[o[1]]:[],path:t.slice(0,-1)}:x==="apply"&&(P={args:o.length>=2?o[1]:[],path:t.slice(0,-1)}),IM(P.args),IM(P.path),e(P)}})),i[c]}const s8=e=>Pk(e,[],e8()),a8=e=>new Proxy(Mk,{get(t,i){if(i!=="then")return e(i)}});var Ek=e0({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/typeof.js"(e,t){function i(a){"@babel/helpers - typeof";return t.exports=i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},t.exports.__esModule=!0,t.exports.default=t.exports,i(a)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports}}),l8=e0({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPrimitive.js"(e,t){var i=Ek().default;function a(c,h){if(i(c)!="object"||!c)return c;var f=c[Symbol.toPrimitive];if(f!==void 0){var o=f.call(c,h||"default");if(i(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(c)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports}}),c8=e0({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPropertyKey.js"(e,t){var i=Ek().default,a=l8();function c(h){var f=a(h,"string");return i(f)=="symbol"?f:f+""}t.exports=c,t.exports.__esModule=!0,t.exports.default=t.exports}}),Ik=e0({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/defineProperty.js"(e,t){var i=c8();function a(c,h,f){return(h=i(h))in c?Object.defineProperty(c,h,{value:f,enumerable:!0,configurable:!0,writable:!0}):c[h]=f,c}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports}}),Z2=e0({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/objectSpread2.js"(e,t){var i=Ik();function a(h,f){var o=Object.keys(h);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(h);f&&(x=x.filter(function(P){return Object.getOwnPropertyDescriptor(h,P).enumerable})),o.push.apply(o,x)}return o}function c(h){for(var f=1;f<arguments.length;f++){var o=arguments[f]!=null?arguments[f]:{};f%2?a(Object(o),!0).forEach(function(x){i(h,x,o[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach(function(x){Object.defineProperty(h,x,Object.getOwnPropertyDescriptor(o,x))})}return h}t.exports=c,t.exports.__esModule=!0,t.exports.default=t.exports}});n1(Z2());n1(Ik());var d_=n1(Z2());function u8(e,t){if("error"in e){const a=t.deserialize(e.error);return{ok:!1,error:(0,d_.default)((0,d_.default)({},e),{},{error:a})}}return{ok:!0,result:(0,d_.default)((0,d_.default)({},e.result),(!e.result.type||e.result.type==="data")&&{type:"data",data:t.deserialize(e.result.data)})}}var Ab=class extends Error{constructor(){super("Unable to transform response from server")}};function h8(e,t){let i;try{i=u8(e,t)}catch{throw new Ab}if(!i.ok&&(!Mv(i.error.error)||typeof i.error.error.code!="number"))throw new Ab;if(i.ok&&!Mv(i.result))throw new Ab;return i}n1(Z2());var f_=vo(om()),ig=vo(au());function d8(e){return e instanceof Fp}function f8(e){return Mv(e)&&Mv(e.error)&&typeof e.error.code=="number"&&typeof e.error.message=="string"}function p8(e,t){return typeof e=="string"?e:Mv(e)&&typeof e.message=="string"?e.message:t}var Fp=class D_ extends Error{constructor(t,i){var a,c;const h=i?.cause;super(t,{cause:h}),(0,f_.default)(this,"cause",void 0),(0,f_.default)(this,"shape",void 0),(0,f_.default)(this,"data",void 0),(0,f_.default)(this,"meta",void 0),this.meta=i?.meta,this.cause=h,this.shape=i==null||(a=i.result)===null||a===void 0?void 0:a.error,this.data=i==null||(c=i.result)===null||c===void 0?void 0:c.error.data,this.name="TRPCClientError",Object.setPrototypeOf(this,D_.prototype)}static from(t,i={}){const a=t;return d8(a)?(i.meta&&(a.meta=(0,ig.default)((0,ig.default)({},a.meta),i.meta)),a):f8(a)?new D_(a.error.message,(0,ig.default)((0,ig.default)({},i),{},{result:a})):new D_(p8(a,"Unknown error"),(0,ig.default)((0,ig.default)({},i),{},{cause:a}))}};function m8(e){const t=e;return t?"input"in t?t:{input:t,output:t}:{input:{serialize:i=>i,deserialize:i=>i},output:{serialize:i=>i,deserialize:i=>i}}}vo(au());vo(au());vo(au());vo(au());const g8={encode:e=>JSON.stringify(e),decode:e=>{if(typeof e!="string")throw new Error("jsonEncoder received binary data. JSON uses text frames. Use a binary encoder for binary data.");return JSON.parse(e)}},y8={enabled:!1,closeMs:0},v8={enabled:!1,pongTimeoutMs:1e3,intervalMs:5e3},_8=e=>e===0?0:Math.min(1e3*2**e,3e4),kk=(e,...t)=>typeof e=="function"?e(...t):e;var x8=vo(om()),og=class Ak extends Error{constructor(t){super(t.message,{cause:t.cause}),this.name="TRPCWebSocketClosedError",Object.setPrototypeOf(this,Ak.prototype)}},b8=class{constructor(e,t){this.onTimeout=e,this.timeoutMs=t,(0,x8.default)(this,"timeout",void 0)}reset(){this.timeout&&(clearTimeout(this.timeout),this.timeout=setTimeout(this.onTimeout,this.timeoutMs))}start(){clearTimeout(this.timeout),this.timeout=setTimeout(this.onTimeout,this.timeoutMs)}stop(){clearTimeout(this.timeout),this.timeout=void 0}};function Rk(){let e,t;return{promise:new Promise((a,c)=>{e=a,t=c}),resolve:e,reject:t}}async function w8(e){const t=await kk(e.url);if(!e.connectionParams)return t;const a=`${t.includes("?")?"&":"?"}connectionParams=1`;return t+a}async function S8(e){const t={method:"connectionParams",data:await kk(e)};return JSON.stringify(t)}var kM=vo(om()),C8=class{constructor(){(0,kM.default)(this,"outgoingRequests",new Array),(0,kM.default)(this,"pendingRequests",{})}register(e,t){const{promise:i,resolve:a}=Rk();return this.outgoingRequests.push({id:String(e.id),message:e,end:i,callbacks:{next:t.next,complete:()=>{t.complete(),a()},error:c=>{t.error(c),a()}}}),()=>{this.delete(e.id),t.complete(),a()}}delete(e){e!==null&&(this.outgoingRequests=this.outgoingRequests.filter(({id:t})=>t!==String(e)),delete this.pendingRequests[String(e)])}flush(){const e=this.outgoingRequests;this.outgoingRequests=[];for(const t of e)this.pendingRequests[t.id]=t;return e}getPendingRequests(){return Object.values(this.pendingRequests)}getPendingRequest(e){return e===null?null:this.pendingRequests[String(e)]}getOutgoingRequests(){return this.outgoingRequests}getRequests(){return[...this.getOutgoingRequests().map(e=>({state:"outgoing",message:e.message,end:e.end,callbacks:e.callbacks})),...this.getPendingRequests().map(e=>({state:"pending",message:e.message,end:e.end,callbacks:e.callbacks}))]}hasPendingRequests(){return this.getPendingRequests().length>0}hasPendingSubscriptions(){return this.getPendingRequests().some(e=>e.message.method==="subscription")}hasOutgoingRequests(){return this.outgoingRequests.length>0}},Dp=vo(om());function T8(e){const{promise:t,resolve:i,reject:a}=Rk();return e.addEventListener("open",()=>{e.removeEventListener("error",a),i()}),e.addEventListener("error",a),t}function M8(e,{intervalMs:t,pongTimeoutMs:i}){let a,c;function h(){a=setTimeout(()=>{e.send("PING"),c=setTimeout(()=>{e.close()},i)},t)}function f(){clearTimeout(a),h()}function o(){clearTimeout(c),f()}e.addEventListener("open",h),e.addEventListener("message",({data:x})=>{clearTimeout(a),h(),x==="PONG"&&o()}),e.addEventListener("close",()=>{clearTimeout(a),clearTimeout(c)})}var Dk=class Ew{constructor(t){var i;if((0,Dp.default)(this,"id",++Ew.connectCount),(0,Dp.default)(this,"WebSocketPonyfill",void 0),(0,Dp.default)(this,"urlOptions",void 0),(0,Dp.default)(this,"keepAliveOpts",void 0),(0,Dp.default)(this,"wsObservable",Sk(null)),(0,Dp.default)(this,"openPromise",null),this.WebSocketPonyfill=(i=t.WebSocketPonyfill)!==null&&i!==void 0?i:WebSocket,!this.WebSocketPonyfill)throw new Error("No WebSocket implementation found - you probably don't want to use this on the server, but if you do you need to pass a `WebSocket`-ponyfill");this.urlOptions=t.urlOptions,this.keepAliveOpts=t.keepAlive}get ws(){return this.wsObservable.get()}set ws(t){this.wsObservable.next(t)}isOpen(){return!!this.ws&&this.ws.readyState===this.WebSocketPonyfill.OPEN&&!this.openPromise}isClosed(){return!!this.ws&&(this.ws.readyState===this.WebSocketPonyfill.CLOSING||this.ws.readyState===this.WebSocketPonyfill.CLOSED)}async open(){var t=this;if(t.openPromise)return t.openPromise;t.id=++Ew.connectCount;const i=w8(t.urlOptions).then(a=>new t.WebSocketPonyfill(a));t.openPromise=i.then(async a=>{t.ws=a,a.binaryType="arraybuffer",a.addEventListener("message",function({data:c}){c==="PING"&&this.send("PONG")}),t.keepAliveOpts.enabled&&M8(a,t.keepAliveOpts),a.addEventListener("close",()=>{t.ws===a&&(t.ws=null)}),await T8(a),t.urlOptions.connectionParams&&a.send(await S8(t.urlOptions.connectionParams))});try{await t.openPromise}finally{t.openPromise=null}}async close(){var t=this;try{await t.openPromise}finally{var i;(i=t.ws)===null||i===void 0||i.close()}}};(0,Dp.default)(Dk,"connectCount",0);function P8(e){return e.isOpen()?{id:e.id,state:"open",ws:e.ws}:e.isClosed()?{id:e.id,state:"closed",ws:e.ws}:e.ws?{id:e.id,state:"connecting",ws:e.ws}:null}var qu=vo(om()),sg=vo(au()),E8=class{constructor(e){var t,i;(0,qu.default)(this,"connectionState",void 0),(0,qu.default)(this,"allowReconnect",!1),(0,qu.default)(this,"requestManager",new C8),(0,qu.default)(this,"activeConnection",void 0),(0,qu.default)(this,"reconnectRetryDelay",void 0),(0,qu.default)(this,"inactivityTimeout",void 0),(0,qu.default)(this,"callbacks",void 0),(0,qu.default)(this,"lazyMode",void 0),(0,qu.default)(this,"encoder",void 0),(0,qu.default)(this,"reconnecting",null),this.encoder=(t=e.experimental_encoder)!==null&&t!==void 0?t:g8,this.callbacks={onOpen:e.onOpen,onClose:e.onClose,onError:e.onError};const a=(0,sg.default)((0,sg.default)({},y8),e.lazy);this.inactivityTimeout=new b8(()=>{if(this.requestManager.hasOutgoingRequests()||this.requestManager.hasPendingRequests()){this.inactivityTimeout.reset();return}this.close().catch(()=>null)},a.closeMs),this.activeConnection=new Dk({WebSocketPonyfill:e.WebSocket,urlOptions:e,keepAlive:(0,sg.default)((0,sg.default)({},v8),e.keepAlive)}),this.activeConnection.wsObservable.subscribe({next:c=>{c&&this.setupWebSocketListeners(c)}}),this.reconnectRetryDelay=(i=e.retryDelayMs)!==null&&i!==void 0?i:_8,this.lazyMode=a.enabled,this.connectionState=Sk({type:"state",state:a.enabled?"idle":"connecting",error:null}),this.lazyMode||this.open().catch(()=>null)}async open(){var e=this;e.allowReconnect=!0,e.connectionState.get().state==="idle"&&e.connectionState.next({type:"state",state:"connecting",error:null});try{await e.activeConnection.open()}catch(t){return e.reconnect(new og({message:"Initialization error",cause:t})),e.reconnecting}}async close(){var e=this;e.allowReconnect=!1,e.inactivityTimeout.stop();const t=[];for(const i of e.requestManager.getRequests())i.message.method==="subscription"?i.callbacks.complete():i.state==="outgoing"?i.callbacks.error(Fp.from(new og({message:"Closed before connection was established"}))):t.push(i.end);await Promise.all(t).catch(()=>null),await e.activeConnection.close().catch(()=>null),e.connectionState.next({type:"state",state:"idle",error:null})}request({op:{id:e,type:t,path:i,input:a,signal:c},transformer:h,lastEventId:f}){return Qv(o=>{const x=this.batchSend({id:e,method:t,params:{input:h.input.serialize(a),path:i,lastEventId:f}},(0,sg.default)((0,sg.default)({},o),{},{next(P){const I=h8(P,h.output);if(!I.ok){o.error(Fp.from(I.error));return}o.next({result:I.result})}}));return()=>{x(),t==="subscription"&&this.activeConnection.isOpen()&&this.send({id:e,method:"subscription.stop"}),c?.removeEventListener("abort",x)}})}get connection(){return P8(this.activeConnection)}reconnect(e){var t=this;if(this.connectionState.next({type:"state",state:"connecting",error:Fp.from(e)}),this.reconnecting)return;const i=async a=>{try{await EM(t.reconnectRetryDelay(a)),t.allowReconnect&&(await t.activeConnection.close(),await t.activeConnection.open(),t.requestManager.hasPendingRequests()&&t.send(t.requestManager.getPendingRequests().map(({message:c})=>c))),t.reconnecting=null}catch{await i(a+1)}};this.reconnecting=i(0)}setupWebSocketListeners(e){var t=this;const i=a=>{const c=this.requestManager.getPendingRequests();for(const{message:h,callbacks:f}of c)h.method!=="subscription"&&(f.error(Fp.from(a??new og({message:"WebSocket closed",cause:a}))),this.requestManager.delete(h.id))};e.addEventListener("open",()=>{PM(async()=>{var a,c;t.lazyMode&&t.inactivityTimeout.start(),(a=(c=t.callbacks).onOpen)===null||a===void 0||a.call(c),t.connectionState.next({type:"state",state:"pending",error:null})}).catch(a=>{e.close(3e3),i(a)})}),e.addEventListener("message",({data:a})=>{if(this.inactivityTimeout.reset(),["PING","PONG"].includes(a))return;const c=this.encoder.decode(a);if("method"in c){this.handleIncomingRequest(c);return}this.handleResponseMessage(c)}),e.addEventListener("close",a=>{var c,h;i(a),(c=(h=this.callbacks).onClose)===null||c===void 0||c.call(h,a),(!this.lazyMode||this.requestManager.hasPendingSubscriptions())&&this.reconnect(new og({message:"WebSocket closed",cause:a}))}),e.addEventListener("error",a=>{var c,h;i(a),(c=(h=this.callbacks).onError)===null||c===void 0||c.call(h,a),this.reconnect(new og({message:"WebSocket closed",cause:a}))})}handleResponseMessage(e){const t=this.requestManager.getPendingRequest(e.id);if(!t)return;t.callbacks.next(e);let i=!0;"result"in e&&t.message.method==="subscription"&&(e.result.type==="data"&&(t.message.params.lastEventId=e.result.id),e.result.type!=="stopped"&&(i=!1)),i&&(t.callbacks.complete(),this.requestManager.delete(e.id))}handleIncomingRequest(e){e.method==="reconnect"&&this.reconnect(new og({message:"Server requested reconnect"}))}send(e){if(!this.activeConnection.isOpen())throw new Error("Active connection is not open");const t=e instanceof Array?e:[e];this.activeConnection.ws.send(this.encoder.encode(t.length===1?t[0]:t))}batchSend(e,t){var i=this;return this.inactivityTimeout.reset(),PM(async()=>{i.activeConnection.isOpen()||await i.open(),await EM(0),i.requestManager.hasOutgoingRequests()&&i.send(i.requestManager.flush().map(({message:a})=>a))}).catch(a=>{this.requestManager.delete(e.id),t.error(Fp.from(a))}),this.requestManager.register(e,t)}};function I8(e){return new E8(e)}function k8(e){const{client:t}=e,i=m8(e.transformer);return()=>({op:a})=>Qv(c=>{const h=a.type==="subscription"?t.connectionState.subscribe({next(o){c.next({result:o,context:a.context})}}):null,f=t.request({op:a,transformer:i}).subscribe(c);return()=>{f.unsubscribe(),h?.unsubscribe()}})}var Rb=vo(om()),AM=vo(au()),A8=class{constructor(e){(0,Rb.default)(this,"links",void 0),(0,Rb.default)(this,"runtime",void 0),(0,Rb.default)(this,"requestId",void 0),this.requestId=0,this.runtime={},this.links=e.links.map(t=>t(this.runtime))}$request(e){var t;return QN({links:this.links,op:(0,AM.default)((0,AM.default)({},e),{},{context:(t=e.context)!==null&&t!==void 0?t:{},id:++this.requestId})}).pipe(JN())}async requestAsPromise(e){var t=this;try{const i=t.$request(e);return(await YN(i)).result.data}catch(i){throw Fp.from(i)}}query(e,t,i){return this.requestAsPromise({type:"query",path:e,input:t,context:i?.context,signal:i?.signal})}mutation(e,t,i){return this.requestAsPromise({type:"mutation",path:e,input:t,context:i?.context,signal:i?.signal})}subscription(e,t,i){return this.$request({type:"subscription",path:e,input:t,context:i.context,signal:i.signal}).subscribe({next(c){switch(c.result.type){case"state":{var h;(h=i.onConnectionStateChange)===null||h===void 0||h.call(i,c.result);break}case"started":{var f;(f=i.onStarted)===null||f===void 0||f.call(i,{context:c.context});break}case"stopped":{var o;(o=i.onStopped)===null||o===void 0||o.call(i);break}case"data":case void 0:{var x;(x=i.onData)===null||x===void 0||x.call(i,c.result.data);break}}},error(c){var h;(h=i.onError)===null||h===void 0||h.call(i,c)},complete(){var c;(c=i.onComplete)===null||c===void 0||c.call(i)}})}};const R8=Symbol.for("trpc_untypedClient"),D8={query:"query",mutate:"mutation",subscribe:"subscription"},z8=e=>D8[e];function O8(e){const t=s8(({path:i,args:a})=>{const c=[...i],h=z8(c.pop()),f=c.join(".");return e[h](f,...a)});return a8(i=>i===R8?e:t[i])}function L8(e){const t=new A8(e);return O8(t)}vo(au());vo(au());var F8=hh({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/asyncIterator.js"(e,t){function i(c){var h,f,o,x=2;for(typeof Symbol<"u"&&(f=Symbol.asyncIterator,o=Symbol.iterator);x--;){if(f&&(h=c[f])!=null)return h.call(c);if(o&&(h=c[o])!=null)return new a(h.call(c));f="@@asyncIterator",o="@@iterator"}throw new TypeError("Object is not async iterable")}function a(c){function h(f){if(Object(f)!==f)return Promise.reject(new TypeError(f+" is not an object."));var o=f.done;return Promise.resolve(f.value).then(function(x){return{value:x,done:o}})}return a=function(o){this.s=o,this.n=o.next},a.prototype={s:null,n:null,next:function(){return h(this.n.apply(this.s,arguments))},return:function(o){var x=this.s.return;return x===void 0?Promise.resolve({value:o,done:!0}):h(x.apply(this.s,arguments))},throw:function(o){var x=this.s.return;return x===void 0?Promise.reject(o):h(x.apply(this.s,arguments))}},new a(c)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports}});vo(F8());vo(au());var B8=hh({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/usingCtx.js"(e,t){function i(){var a=typeof SuppressedError=="function"?SuppressedError:function(o,x){var P=Error();return P.name="SuppressedError",P.error=o,P.suppressed=x,P},c={},h=[];function f(o,x){if(x!=null){if(Object(x)!==x)throw new TypeError("using declarations can only be used with objects, functions, null, or undefined.");if(o)var P=x[Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose")];if(P===void 0&&(P=x[Symbol.dispose||Symbol.for("Symbol.dispose")],o))var I=P;if(typeof P!="function")throw new TypeError("Object is not disposable.");I&&(P=function(){try{I.call(x)}catch(D){return Promise.reject(D)}}),h.push({v:x,d:P,a:o})}else o&&h.push({d:x,a:o});return x}return{e:c,u:f.bind(null,!1),a:f.bind(null,!0),d:function(){var x,P=this.e,I=0;function R(){for(;x=h.pop();)try{if(!x.a&&I===1)return I=0,h.push(x),Promise.resolve().then(R);if(x.d){var $=x.d.call(x.v);if(x.a)return I|=2,Promise.resolve($).then(R,D)}else I|=1}catch(G){return D(G)}if(I===1)return P!==c?Promise.reject(P):Promise.resolve();if(P!==c)throw P}function D($){return P=P!==c?new a($,P):$,R()}return R()}}}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports}}),zk=hh({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/OverloadYield.js"(e,t){function i(a,c){this.v=a,this.k=c}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports}}),$8=hh({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/awaitAsyncGenerator.js"(e,t){var i=zk();function a(c){return new i(c,0)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports}}),j8=hh({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/wrapAsyncGenerator.js"(e,t){var i=zk();function a(h){return function(){return new c(h.apply(this,arguments))}}function c(h){var f,o;function x(I,R){try{var D=h[I](R),$=D.value,G=$ instanceof i;Promise.resolve(G?$.v:$).then(function(j){if(G){var V=I==="return"?"return":"next";if(!$.k||j.done)return x(V,j);j=h[V](j).value}P(D.done?"return":"normal",j)},function(j){x("throw",j)})}catch(j){P("throw",j)}}function P(I,R){switch(I){case"return":f.resolve({value:R,done:!0});break;case"throw":f.reject(R);break;default:f.resolve({value:R,done:!1})}(f=f.next)?x(f.key,f.arg):o=null}this._invoke=function(I,R){return new Promise(function(D,$){var G={key:I,arg:R,resolve:D,reject:$,next:null};o?o=o.next=G:(f=o=G,x(I,R))})},typeof h.return!="function"&&(this.return=void 0)}c.prototype[typeof Symbol=="function"&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},c.prototype.next=function(h){return this._invoke("next",h)},c.prototype.throw=function(h){return this._invoke("throw",h)},c.prototype.return=function(h){return this._invoke("return",h)},t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports}});vo(B8());vo($8());vo(j8());vo(au());function kn(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(i.length?" "+i.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var N8={};function i1(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:N8}var Ok=Object.assign,nx=Object.getOwnPropertyDescriptor,ih=Object.defineProperty,o1=Object.prototype,Iw=[];Object.freeze(Iw);var X2={};Object.freeze(X2);var V8=typeof Proxy<"u",U8=Object.toString();function Lk(){V8||kn("Proxy not available")}function Fk(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var mg=function(){};function nu(e){return typeof e=="function"}function Xp(e){var t=typeof e;switch(t){case"string":case"symbol":case"number":return!0}return!1}function s1(e){return e!==null&&typeof e=="object"}function cd(e){if(!s1(e))return!1;var t=Object.getPrototypeOf(e);if(t==null)return!0;var i=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i.toString()===U8}function Bk(e){var t=e?.constructor;return t?t.name==="GeneratorFunction"||t.displayName==="GeneratorFunction":!1}function t0(e,t,i){ih(e,t,{enumerable:!1,writable:!0,configurable:!0,value:i})}function $k(e,t,i){ih(e,t,{enumerable:!1,writable:!1,configurable:!0,value:i})}function sm(e,t){var i="isMobX"+e;return t.prototype[i]=!0,function(a){return s1(a)&&a[i]===!0}}function Qg(e){return e!=null&&Object.prototype.toString.call(e)==="[object Map]"}function G8(e){var t=Object.getPrototypeOf(e),i=Object.getPrototypeOf(t),a=Object.getPrototypeOf(i);return a===null}function rd(e){return e!=null&&Object.prototype.toString.call(e)==="[object Set]"}var jk=typeof Object.getOwnPropertySymbols<"u";function q8(e){var t=Object.keys(e);if(!jk)return t;var i=Object.getOwnPropertySymbols(e);return i.length?[].concat(t,i.filter(function(a){return o1.propertyIsEnumerable.call(e,a)})):t}var Vg=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:jk?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function Nk(e){return e===null?null:typeof e=="object"?""+e:e}function id(e,t){return o1.hasOwnProperty.call(e,t)}var H8=Object.getOwnPropertyDescriptors||function(t){var i={};return Vg(t).forEach(function(a){i[a]=nx(t,a)}),i};function ll(e,t){return!!(e&t)}function cl(e,t,i){return i?e|=t:e&=~t,e}function RM(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=Array(t);i<t;i++)a[i]=e[i];return a}function W8(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,X8(a.key),a)}}function ey(e,t,i){return t&&W8(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gg(e,t){var i=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=K8(e))||t){i&&(e=i);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ef(){return Ef=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Ef.apply(null,arguments)}function Vk(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,kw(e,t)}function kw(e,t){return kw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},kw(e,t)}function Z8(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function X8(e){var t=Z8(e,"string");return typeof t=="symbol"?t:t+""}function K8(e,t){if(e){if(typeof e=="string")return RM(e,t);var i={}.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?RM(e,t):void 0}}var Qu=Symbol("mobx-stored-annotations");function oh(e){function t(i,a){if(n0(a))return e.decorate_20223_(i,a);r0(i,a,e)}return Object.assign(t,e)}function r0(e,t,i){id(e,Qu)||t0(e,Qu,Ef({},e[Qu])),n7(i)||(e[Qu][t]=i)}function Y8(e){return id(e,Qu)||t0(e,Qu,Ef({},e[Qu])),e[Qu]}function n0(e){return typeof e=="object"&&typeof e.kind=="string"}var Vr=Symbol("mobx administration"),Of=function(){function e(i){i===void 0&&(i="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=zn.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=i}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(a){return a()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(a){return a()})},t.reportObserved=function(){return sA(this)},t.reportChanged=function(){tc(),aA(this),rc()},t.toString=function(){return this.name_},ey(e,[{key:"isBeingObserved",get:function(){return ll(this.flags_,e.isBeingObservedMask_)},set:function(a){this.flags_=cl(this.flags_,e.isBeingObservedMask_,a)}},{key:"isPendingUnobservation",get:function(){return ll(this.flags_,e.isPendingUnobservationMask_)},set:function(a){this.flags_=cl(this.flags_,e.isPendingUnobservationMask_,a)}},{key:"diffValue",get:function(){return ll(this.flags_,e.diffValueMask_)?1:0},set:function(a){this.flags_=cl(this.flags_,e.diffValueMask_,a===1)}}])}();Of.isBeingObservedMask_=1;Of.isPendingUnobservationMask_=2;Of.diffValueMask_=4;var K2=sm("Atom",Of);function Uk(e,t,i){t===void 0&&(t=mg),i===void 0&&(i=mg);var a=new Of(e);return t!==mg&&iV(a,t),i!==mg&&mA(a,i),a}function J8(e,t){return AA(e,t)}function Q8(e,t){return Object.is?Object.is(e,t):e===t?e!==0||1/e===1/t:e!==e&&t!==t}var If={structural:J8,default:Q8};function Kp(e,t,i){return bA(e)?e:Array.isArray(e)?vi.array(e,{name:i}):cd(e)?vi.object(e,void 0,{name:i}):Qg(e)?vi.map(e,{name:i}):rd(e)?vi.set(e,{name:i}):typeof e=="function"&&!Ev(e)&&!Iv(e)?Bk(e)?Ug(e):Pv(i,e):e}function e7(e,t,i){if(e==null||f1(e)||d1(e)||lm(e)||Yu(e))return e;if(Array.isArray(e))return vi.array(e,{name:i,deep:!1});if(cd(e))return vi.object(e,void 0,{name:i,deep:!1});if(Qg(e))return vi.map(e,{name:i,deep:!1});if(rd(e))return vi.set(e,{name:i,deep:!1})}function a1(e){return e}function t7(e,t){return AA(e,t)?t:e}var r7="override";function n7(e){return e.annotationType_===r7}function i0(e,t){return{annotationType_:e,options_:t,make_:i7,extend_:o7,decorate_20223_:s7}}function i7(e,t,i,a){var c;if((c=this.options_)!=null&&c.bound)return this.extend_(e,t,i,!1)===null?0:1;if(a===e.target_)return this.extend_(e,t,i,!1)===null?0:2;if(Ev(i.value))return 1;var h=Gk(e,this,t,i,!1);return ih(a,t,h),2}function o7(e,t,i,a){var c=Gk(e,this,t,i);return e.defineProperty_(t,c,a)}function s7(e,t){var i=t.kind,a=t.name,c=t.addInitializer,h=this,f=function(P){var I,R,D,$;return kf((I=(R=h.options_)==null?void 0:R.name)!=null?I:a.toString(),P,(D=($=h.options_)==null?void 0:$.autoAction)!=null?D:!1)};if(i=="field")return function(x){var P,I=x;return Ev(I)||(I=f(I)),(P=h.options_)!=null&&P.bound&&(I=I.bind(this),I.isMobxAction=!0),I};if(i=="method"){var o;return Ev(e)||(e=f(e)),(o=this.options_)!=null&&o.bound&&c(function(){var x=this,P=x[a].bind(x);P.isMobxAction=!0,x[a]=P}),e}kn("Cannot apply '"+h.annotationType_+"' to '"+String(a)+"' (kind: "+i+"):"+(`
'`+h.annotationType_+"' can only be used on properties with a function value."))}function a7(e,t,i,a){t.annotationType_,a.value}function Gk(e,t,i,a,c){var h,f,o,x,P,I,R;c===void 0&&(c=Jt.safeDescriptors),a7(e,t,i,a);var D=a.value;if((h=t.options_)!=null&&h.bound){var $;D=D.bind(($=e.proxy_)!=null?$:e.target_)}return{value:kf((f=(o=t.options_)==null?void 0:o.name)!=null?f:i.toString(),D,(x=(P=t.options_)==null?void 0:P.autoAction)!=null?x:!1,(I=t.options_)!=null&&I.bound?(R=e.proxy_)!=null?R:e.target_:void 0),configurable:c?e.isPlainObject_:!0,enumerable:!1,writable:!c}}function qk(e,t){return{annotationType_:e,options_:t,make_:l7,extend_:c7,decorate_20223_:u7}}function l7(e,t,i,a){var c;if(a===e.target_)return this.extend_(e,t,i,!1)===null?0:2;if((c=this.options_)!=null&&c.bound&&(!id(e.target_,t)||!Iv(e.target_[t]))&&this.extend_(e,t,i,!1)===null)return 0;if(Iv(i.value))return 1;var h=Hk(e,this,t,i,!1,!1);return ih(a,t,h),2}function c7(e,t,i,a){var c,h=Hk(e,this,t,i,(c=this.options_)==null?void 0:c.bound);return e.defineProperty_(t,h,a)}function u7(e,t){var i,a=t.name,c=t.addInitializer;return Iv(e)||(e=Ug(e)),(i=this.options_)!=null&&i.bound&&c(function(){var h=this,f=h[a].bind(h);f.isMobXFlow=!0,h[a]=f}),e}function h7(e,t,i,a){t.annotationType_,a.value}function Hk(e,t,i,a,c,h){h===void 0&&(h=Jt.safeDescriptors),h7(e,t,i,a);var f=a.value;if(Iv(f)||(f=Ug(f)),c){var o;f=f.bind((o=e.proxy_)!=null?o:e.target_),f.isMobXFlow=!0}return{value:f,configurable:h?e.isPlainObject_:!0,enumerable:!1,writable:!h}}function Y2(e,t){return{annotationType_:e,options_:t,make_:d7,extend_:f7,decorate_20223_:p7}}function d7(e,t,i){return this.extend_(e,t,i,!1)===null?0:1}function f7(e,t,i,a){return m7(e,this,t,i),e.defineComputedProperty_(t,Ef({},this.options_,{get:i.get,set:i.set}),a)}function p7(e,t){var i=this,a=t.name,c=t.addInitializer;return c(function(){var h=cm(this)[Vr],f=Ef({},i.options_,{get:e,context:this});f.name||(f.name="ObservableObject."+a.toString()),h.values_.set(a,new iu(f))}),function(){return this[Vr].getObservablePropValue_(a)}}function m7(e,t,i,a){t.annotationType_,a.get}function l1(e,t){return{annotationType_:e,options_:t,make_:g7,extend_:y7,decorate_20223_:v7}}function g7(e,t,i){return this.extend_(e,t,i,!1)===null?0:1}function y7(e,t,i,a){var c,h;return _7(e,this),e.defineObservableProperty_(t,i.value,(c=(h=this.options_)==null?void 0:h.enhancer)!=null?c:Kp,a)}function v7(e,t){var i=this,a=t.kind,c=t.name,h=new WeakSet;function f(o,x){var P,I,R=cm(o)[Vr],D=new Up(x,(P=(I=i.options_)==null?void 0:I.enhancer)!=null?P:Kp,"ObservableObject."+c.toString(),!1);R.values_.set(c,D),h.add(o)}if(a=="accessor")return{get:function(){return h.has(this)||f(this,e.get.call(this)),this[Vr].getObservablePropValue_(c)},set:function(x){return h.has(this)||f(this,x),this[Vr].setObservablePropValue_(c,x)},init:function(x){return h.has(this)||f(this,x),x}}}function _7(e,t,i,a){t.annotationType_}var x7="true",b7=Wk();function Wk(e){return{annotationType_:x7,options_:e,make_:w7,extend_:S7,decorate_20223_:C7}}function w7(e,t,i,a){var c,h;if(i.get)return Tf.make_(e,t,i,a);if(i.set){var f=kf(t.toString(),i.set);return a===e.target_?e.defineProperty_(t,{configurable:Jt.safeDescriptors?e.isPlainObject_:!0,set:f})===null?0:2:(ih(a,t,{configurable:!0,set:f}),2)}if(a!==e.target_&&typeof i.value=="function"){var o;if(Bk(i.value)){var x,P=(x=this.options_)!=null&&x.autoBind?Ug.bound:Ug;return P.make_(e,t,i,a)}var I=(o=this.options_)!=null&&o.autoBind?Pv.bound:Pv;return I.make_(e,t,i,a)}var R=((c=this.options_)==null?void 0:c.deep)===!1?vi.ref:vi;if(typeof i.value=="function"&&(h=this.options_)!=null&&h.autoBind){var D;i.value=i.value.bind((D=e.proxy_)!=null?D:e.target_)}return R.make_(e,t,i,a)}function S7(e,t,i,a){var c,h;if(i.get)return Tf.extend_(e,t,i,a);if(i.set)return e.defineProperty_(t,{configurable:Jt.safeDescriptors?e.isPlainObject_:!0,set:kf(t.toString(),i.set)},a);if(typeof i.value=="function"&&(c=this.options_)!=null&&c.autoBind){var f;i.value=i.value.bind((f=e.proxy_)!=null?f:e.target_)}var o=((h=this.options_)==null?void 0:h.deep)===!1?vi.ref:vi;return o.extend_(e,t,i,a)}function C7(e,t){kn("'"+this.annotationType_+"' cannot be used as a decorator")}var T7="observable",M7="observable.ref",P7="observable.shallow",E7="observable.struct",Zk={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(Zk);function p_(e){return e||Zk}var Aw=l1(T7),I7=l1(M7,{enhancer:a1}),k7=l1(P7,{enhancer:e7}),A7=l1(E7,{enhancer:t7}),Xk=oh(Aw);function m_(e){return e.deep===!0?Kp:e.deep===!1?a1:D7(e.defaultDecorator)}function R7(e){var t;return e?(t=e.defaultDecorator)!=null?t:Wk(e):void 0}function D7(e){var t,i;return e&&(t=(i=e.options_)==null?void 0:i.enhancer)!=null?t:Kp}function Kk(e,t,i){if(n0(t))return Aw.decorate_20223_(e,t);if(Xp(t)){r0(e,t,Aw);return}return bA(e)?e:cd(e)?vi.object(e,t,i):Array.isArray(e)?vi.array(e,t):Qg(e)?vi.map(e,t):rd(e)?vi.set(e,t):typeof e=="object"&&e!==null?e:vi.box(e,t)}Ok(Kk,Xk);var z7={box:function(t,i){var a=p_(i);return new Up(t,m_(a),a.name,!0,a.equals)},array:function(t,i){var a=p_(i);return(Jt.useProxies===!1||a.proxy===!1?EV:vV)(t,m_(a),a.name)},map:function(t,i){var a=p_(i);return new TA(t,m_(a),a.name)},set:function(t,i){var a=p_(i);return new MA(t,m_(a),a.name)},object:function(t,i,a){return Lf(function(){return vA(Jt.useProxies===!1||a?.proxy===!1?cm({},a):pV({},a),t,i)})},ref:oh(I7),shallow:oh(k7),deep:Xk,struct:oh(A7)},vi=Ok(Kk,z7),Yk="computed",O7="computed.struct",Rw=Y2(Yk),L7=Y2(O7,{equals:If.structural}),Tf=function(t,i){if(n0(i))return Rw.decorate_20223_(t,i);if(Xp(i))return r0(t,i,Rw);if(cd(t))return oh(Y2(Yk,t));var a=cd(i)?i:{};return a.get=t,a.name||(a.name=t.name||""),new iu(a)};Object.assign(Tf,Rw);Tf.struct=oh(L7);var DM,zM,ix=0,F7=1,B7=(DM=(zM=nx(function(){},"name"))==null?void 0:zM.configurable)!=null?DM:!1,OM={value:"action",configurable:!0,writable:!1,enumerable:!1};function kf(e,t,i,a){i===void 0&&(i=!1);function c(){return Jk(e,i,t,a||this,arguments)}return c.isMobxAction=!0,c.toString=function(){return t.toString()},B7&&(OM.value=e,ih(c,"name",OM)),c}function Jk(e,t,i,a,c){var h=$7(e,t);try{return i.apply(a,c)}catch(f){throw h.error_=f,f}finally{j7(h)}}function $7(e,t,i,a){var c=!1,h=0,f=Jt.trackingDerivation,o=!t||!f;tc();var x=Jt.allowStateChanges;o&&(am(),x=c1(!0));var P=J2(!0),I={runAsAction_:o,prevDerivation_:f,prevAllowStateChanges_:x,prevAllowStateReads_:P,notifySpy_:c,startTime_:h,actionId_:F7++,parentActionId_:ix};return ix=I.actionId_,I}function j7(e){ix!==e.actionId_&&kn(30),ix=e.parentActionId_,e.error_!==void 0&&(Jt.suppressReactionErrors=!0),u1(e.prevAllowStateChanges_),iv(e.prevAllowStateReads_),rc(),e.runAsAction_&&od(e.prevDerivation_),Jt.suppressReactionErrors=!1}function Qk(e,t){var i=c1(e);try{return t()}finally{u1(i)}}function c1(e){var t=Jt.allowStateChanges;return Jt.allowStateChanges=e,t}function u1(e){Jt.allowStateChanges=e}var Up=function(e){function t(a,c,h,f,o){var x;return h===void 0&&(h="ObservableValue"),o===void 0&&(o=If.default),x=e.call(this,h)||this,x.enhancer=void 0,x.name_=void 0,x.equals=void 0,x.hasUnreportedChange_=!1,x.interceptors_=void 0,x.changeListeners_=void 0,x.value_=void 0,x.dehancer=void 0,x.enhancer=c,x.name_=h,x.equals=o,x.value_=c(a,void 0,h),x}Vk(t,e);var i=t.prototype;return i.dehanceValue=function(c){return this.dehancer!==void 0?this.dehancer(c):c},i.set=function(c){this.value_,c=this.prepareNewValue_(c),c!==Jt.UNCHANGED&&this.setNewValue_(c)},i.prepareNewValue_=function(c){if(Jl(this)){var h=Ql(this,{object:this,type:sh,newValue:c});if(!h)return Jt.UNCHANGED;c=h.newValue}return c=this.enhancer(c,this.value_,this.name_),this.equals(this.value_,c)?Jt.UNCHANGED:c},i.setNewValue_=function(c){var h=this.value_;this.value_=c,this.reportChanged(),Qc(this)&&eu(this,{type:sh,object:this,newValue:c,oldValue:h})},i.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},i.intercept_=function(c){return o0(this,c)},i.observe_=function(c,h){return h&&c({observableKind:"value",debugObjectName:this.name_,object:this,type:sh,newValue:this.value_,oldValue:void 0}),s0(this,c)},i.raw=function(){return this.value_},i.toJSON=function(){return this.get()},i.toString=function(){return this.name_+"["+this.value_+"]"},i.valueOf=function(){return Nk(this.get())},i[Symbol.toPrimitive]=function(){return this.valueOf()},t}(Of),iu=function(){function e(i){this.dependenciesState_=zn.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=zn.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new sx(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=ox.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,i.get||kn(31),this.derivation=i.get,this.name_=i.name||"ComputedValue",i.set&&(this.setter_=kf("ComputedValue-setter",i.set)),this.equals_=i.equals||(i.compareStructural||i.struct?If.structural:If.default),this.scope_=i.context,this.requiresReaction_=i.requiresReaction,this.keepAlive_=!!i.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){q7(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(a){return a()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(a){return a()})},t.get=function(){if(this.isComputing&&kn(32,this.name_,this.derivation),Jt.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)Dw(this)&&(this.warnAboutUntrackedRead_(),tc(),this.value_=this.computeValue_(!1),rc());else if(sA(this),Dw(this)){var a=Jt.trackingContext;this.keepAlive_&&!a&&(Jt.trackingContext=this),this.trackAndCompute()&&G7(this),Jt.trackingContext=a}var c=this.value_;if(z_(c))throw c.cause;return c},t.set=function(a){if(this.setter_){this.isRunningSetter&&kn(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,a)}finally{this.isRunningSetter=!1}}else kn(34,this.name_)},t.trackAndCompute=function(){var a=this.value_,c=this.dependenciesState_===zn.NOT_TRACKING_,h=this.computeValue_(!0),f=c||z_(a)||z_(h)||!this.equals_(a,h);return f&&(this.value_=h),f},t.computeValue_=function(a){this.isComputing=!0;var c=c1(!1),h;if(a)h=eA(this,this.derivation,this.scope_);else if(Jt.disableErrorBoundaries===!0)h=this.derivation.call(this.scope_);else try{h=this.derivation.call(this.scope_)}catch(f){h=new sx(f)}return u1(c),this.isComputing=!1,h},t.suspend_=function(){this.keepAlive_||(zw(this),this.value_=void 0)},t.observe_=function(a,c){var h=this,f=!0,o=void 0;return fA(function(){var x=h.get();if(!f||c){var P=am();a({observableKind:"computed",debugObjectName:h.name_,type:sh,object:h,newValue:x,oldValue:o}),od(P)}f=!1,o=x})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return Nk(this.get())},t[Symbol.toPrimitive]=function(){return this.valueOf()},ey(e,[{key:"isComputing",get:function(){return ll(this.flags_,e.isComputingMask_)},set:function(a){this.flags_=cl(this.flags_,e.isComputingMask_,a)}},{key:"isRunningSetter",get:function(){return ll(this.flags_,e.isRunningSetterMask_)},set:function(a){this.flags_=cl(this.flags_,e.isRunningSetterMask_,a)}},{key:"isBeingObserved",get:function(){return ll(this.flags_,e.isBeingObservedMask_)},set:function(a){this.flags_=cl(this.flags_,e.isBeingObservedMask_,a)}},{key:"isPendingUnobservation",get:function(){return ll(this.flags_,e.isPendingUnobservationMask_)},set:function(a){this.flags_=cl(this.flags_,e.isPendingUnobservationMask_,a)}},{key:"diffValue",get:function(){return ll(this.flags_,e.diffValueMask_)?1:0},set:function(a){this.flags_=cl(this.flags_,e.diffValueMask_,a===1)}}])}();iu.isComputingMask_=1;iu.isRunningSetterMask_=2;iu.isBeingObservedMask_=4;iu.isPendingUnobservationMask_=8;iu.diffValueMask_=16;var h1=sm("ComputedValue",iu),zn;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(zn||(zn={}));var ox;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(ox||(ox={}));var sx=function(t){this.cause=void 0,this.cause=t};function z_(e){return e instanceof sx}function Dw(e){switch(e.dependenciesState_){case zn.UP_TO_DATE_:return!1;case zn.NOT_TRACKING_:case zn.STALE_:return!0;case zn.POSSIBLY_STALE_:{for(var t=J2(!0),i=am(),a=e.observing_,c=a.length,h=0;h<c;h++){var f=a[h];if(h1(f)){if(Jt.disableErrorBoundaries)f.get();else try{f.get()}catch{return od(i),iv(t),!0}if(e.dependenciesState_===zn.STALE_)return od(i),iv(t),!0}}return rA(e),od(i),iv(t),!1}}}function eA(e,t,i){var a=J2(!0);rA(e),e.newObserving_=new Array(e.runId_===0?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++Jt.runId;var c=Jt.trackingDerivation;Jt.trackingDerivation=e,Jt.inBatch++;var h;if(Jt.disableErrorBoundaries===!0)h=t.call(i);else try{h=t.call(i)}catch(f){h=new sx(f)}return Jt.inBatch--,Jt.trackingDerivation=c,N7(e),iv(a),h}function N7(e){for(var t=e.observing_,i=e.observing_=e.newObserving_,a=zn.UP_TO_DATE_,c=0,h=e.unboundDepsCount_,f=0;f<h;f++){var o=i[f];o.diffValue===0&&(o.diffValue=1,c!==f&&(i[c]=o),c++),o.dependenciesState_>a&&(a=o.dependenciesState_)}for(i.length=c,e.newObserving_=null,h=t.length;h--;){var x=t[h];x.diffValue===0&&iA(x,e),x.diffValue=0}for(;c--;){var P=i[c];P.diffValue===1&&(P.diffValue=0,U7(P,e))}a!==zn.UP_TO_DATE_&&(e.dependenciesState_=a,e.onBecomeStale_())}function zw(e){var t=e.observing_;e.observing_=[];for(var i=t.length;i--;)iA(t[i],e);e.dependenciesState_=zn.NOT_TRACKING_}function tA(e){var t=am();try{return e()}finally{od(t)}}function am(){var e=Jt.trackingDerivation;return Jt.trackingDerivation=null,e}function od(e){Jt.trackingDerivation=e}function J2(e){var t=Jt.allowStateReads;return Jt.allowStateReads=e,t}function iv(e){Jt.allowStateReads=e}function rA(e){if(e.dependenciesState_!==zn.UP_TO_DATE_){e.dependenciesState_=zn.UP_TO_DATE_;for(var t=e.observing_,i=t.length;i--;)t[i].lowestObserverState_=zn.UP_TO_DATE_}}var O_=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},L_=!0,nA=!1,Jt=function(){var e=i1();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(L_=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new O_().version&&(L_=!1),L_?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new O_):(setTimeout(function(){nA||kn(35)},1),new O_)}();function V7(){if((Jt.pendingReactions.length||Jt.inBatch||Jt.isRunningReactions)&&kn(36),nA=!0,L_){var e=i1();--e.__mobxInstanceCount===0&&(e.__mobxGlobals=void 0),Jt=new O_}}function U7(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function iA(e,t){e.observers_.delete(t),e.observers_.size===0&&oA(e)}function oA(e){e.isPendingUnobservation===!1&&(e.isPendingUnobservation=!0,Jt.pendingUnobservations.push(e))}function tc(){Jt.inBatch++}function rc(){if(--Jt.inBatch===0){lA();for(var e=Jt.pendingUnobservations,t=0;t<e.length;t++){var i=e[t];i.isPendingUnobservation=!1,i.observers_.size===0&&(i.isBeingObserved&&(i.isBeingObserved=!1,i.onBUO()),i instanceof iu&&i.suspend_())}Jt.pendingUnobservations=[]}}function sA(e){var t=Jt.trackingDerivation;return t!==null?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved&&Jt.trackingContext&&(e.isBeingObserved=!0,e.onBO())),e.isBeingObserved):(e.observers_.size===0&&Jt.inBatch>0&&oA(e),!1)}function aA(e){e.lowestObserverState_!==zn.STALE_&&(e.lowestObserverState_=zn.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===zn.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=zn.STALE_}))}function G7(e){e.lowestObserverState_!==zn.STALE_&&(e.lowestObserverState_=zn.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===zn.POSSIBLY_STALE_?t.dependenciesState_=zn.STALE_:t.dependenciesState_===zn.UP_TO_DATE_&&(e.lowestObserverState_=zn.UP_TO_DATE_)}))}function q7(e){e.lowestObserverState_===zn.UP_TO_DATE_&&(e.lowestObserverState_=zn.POSSIBLY_STALE_,e.observers_.forEach(function(t){t.dependenciesState_===zn.UP_TO_DATE_&&(t.dependenciesState_=zn.POSSIBLY_STALE_,t.onBecomeStale_())}))}var ch=function(){function e(i,a,c,h){i===void 0&&(i="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=zn.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=ox.NONE,this.name_=i,this.onInvalidate_=a,this.errorHandler_=c,this.requiresObservable_=h}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled||(this.isScheduled=!0,Jt.pendingReactions.push(this),lA())},t.runReaction_=function(){if(!this.isDisposed){tc(),this.isScheduled=!1;var a=Jt.trackingContext;if(Jt.trackingContext=this,Dw(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(c){this.reportExceptionInDerivation_(c)}}Jt.trackingContext=a,rc()}},t.track=function(a){if(!this.isDisposed){tc(),this.isRunning=!0;var c=Jt.trackingContext;Jt.trackingContext=this;var h=eA(this,a,void 0);Jt.trackingContext=c,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&zw(this),z_(h)&&this.reportExceptionInDerivation_(h.cause),rc()}},t.reportExceptionInDerivation_=function(a){var c=this;if(this.errorHandler_){this.errorHandler_(a,this);return}if(Jt.disableErrorBoundaries)throw a;var h="[mobx] uncaught error in '"+this+"'";Jt.suppressReactionErrors||console.error(h,a),Jt.globalReactionErrorHandlers.forEach(function(f){return f(a,c)})},t.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(tc(),zw(this),rc()))},t.getDisposer_=function(a){var c=this,h=function f(){c.dispose(),a==null||a.removeEventListener==null||a.removeEventListener("abort",f)};return a==null||a.addEventListener==null||a.addEventListener("abort",h),h[Vr]=this,h},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(a){},ey(e,[{key:"isDisposed",get:function(){return ll(this.flags_,e.isDisposedMask_)},set:function(a){this.flags_=cl(this.flags_,e.isDisposedMask_,a)}},{key:"isScheduled",get:function(){return ll(this.flags_,e.isScheduledMask_)},set:function(a){this.flags_=cl(this.flags_,e.isScheduledMask_,a)}},{key:"isTrackPending",get:function(){return ll(this.flags_,e.isTrackPendingMask_)},set:function(a){this.flags_=cl(this.flags_,e.isTrackPendingMask_,a)}},{key:"isRunning",get:function(){return ll(this.flags_,e.isRunningMask_)},set:function(a){this.flags_=cl(this.flags_,e.isRunningMask_,a)}},{key:"diffValue",get:function(){return ll(this.flags_,e.diffValueMask_)?1:0},set:function(a){this.flags_=cl(this.flags_,e.diffValueMask_,a===1)}}])}();ch.isDisposedMask_=1;ch.isScheduledMask_=2;ch.isTrackPendingMask_=4;ch.isRunningMask_=8;ch.diffValueMask_=16;var H7=100,Ow=function(t){return t()};function lA(){Jt.inBatch>0||Jt.isRunningReactions||Ow(W7)}function W7(){Jt.isRunningReactions=!0;for(var e=Jt.pendingReactions,t=0;e.length>0;){++t===H7&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var i=e.splice(0),a=0,c=i.length;a<c;a++)i[a].runReaction_()}Jt.isRunningReactions=!1}var ax=sm("Reaction",ch);function Z7(e){var t=Ow;Ow=function(a){return e(function(){return t(a)})}}function ov(){return!1}function X7(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var cA="action",K7="action.bound",uA="autoAction",Y7="autoAction.bound",hA="<unnamed action>",Lw=i0(cA),J7=i0(K7,{bound:!0}),Fw=i0(uA,{autoAction:!0}),Q7=i0(Y7,{autoAction:!0,bound:!0});function dA(e){var t=function(a,c){if(nu(a))return kf(a.name||hA,a,e);if(nu(c))return kf(a,c,e);if(n0(c))return(e?Fw:Lw).decorate_20223_(a,c);if(Xp(c))return r0(a,c,e?Fw:Lw);if(Xp(a))return oh(i0(e?uA:cA,{name:a,autoAction:e}))};return t}var Lr=dA(!1);Object.assign(Lr,Lw);var Pv=dA(!0);Object.assign(Pv,Fw);Lr.bound=oh(J7);Pv.bound=oh(Q7);function Vy(e){return Jk(e.name||hA,!1,e,this,void 0)}function Ev(e){return nu(e)&&e.isMobxAction===!0}function fA(e,t){var i,a,c,h;t===void 0&&(t=X2);var f=(i=(a=t)==null?void 0:a.name)!=null?i:"Autorun",o=!t.scheduler&&!t.delay,x;if(o)x=new ch(f,function(){this.track(R)},t.onError,t.requiresObservable);else{var P=pA(t),I=!1;x=new ch(f,function(){I||(I=!0,P(function(){I=!1,x.isDisposed||x.track(R)}))},t.onError,t.requiresObservable)}function R(){e(x)}return(c=t)!=null&&(c=c.signal)!=null&&c.aborted||x.schedule_(),x.getDisposer_((h=t)==null?void 0:h.signal)}var eV=function(t){return t()};function pA(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:eV}function ag(e,t,i){var a,c,h;i===void 0&&(i=X2);var f=(a=i.name)!=null?a:"Reaction",o=Lr(f,i.onError?tV(i.onError,t):t),x=!i.scheduler&&!i.delay,P=pA(i),I=!0,R=!1,D,$=i.compareStructural?If.structural:i.equals||If.default,G=new ch(f,function(){I||x?j():R||(R=!0,P(j))},i.onError,i.requiresObservable);function j(){if(R=!1,!G.isDisposed){var V=!1,se=D;G.track(function(){var ue=Qk(!1,function(){return e(G)});V=I||!$(D,ue),D=ue}),(I&&i.fireImmediately||!I&&V)&&o(D,se,G),I=!1}}return(c=i)!=null&&(c=c.signal)!=null&&c.aborted||G.schedule_(),G.getDisposer_((h=i)==null?void 0:h.signal)}function tV(e,t){return function(){try{return t.apply(this,arguments)}catch(i){e.call(this,i)}}}var rV="onBO",nV="onBUO";function iV(e,t,i){return gA(rV,e,t,i)}function mA(e,t,i){return gA(nV,e,t,i)}function gA(e,t,i,a){var c=ux(t),h=nu(a)?a:i,f=e+"L";return c[f]?c[f].add(h):c[f]=new Set([h]),function(){var o=c[f];o&&(o.delete(h),o.size===0&&delete c[f])}}var oV="never",g_="always",sV="observed";function yA(e){e.isolateGlobalState===!0&&V7();var t=e.useProxies,i=e.enforceActions;if(t!==void 0&&(Jt.useProxies=t===g_?!0:t===oV?!1:typeof Proxy<"u"),t==="ifavailable"&&(Jt.verifyProxies=!0),i!==void 0){var a=i===g_?g_:i===sV;Jt.enforceActions=a,Jt.allowStateChanges=!(a===!0||a===g_)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(c){c in e&&(Jt[c]=!!e[c])}),Jt.allowStateReads=!Jt.observableRequiresReaction,e.reactionScheduler&&Z7(e.reactionScheduler)}function vA(e,t,i,a){var c=H8(t);return Lf(function(){var h=cm(e,a)[Vr];Vg(c).forEach(function(f){h.extend_(f,c[f],i&&f in i?i[f]:!0)})}),e}function aV(e,t){return _A(ux(e,t))}function _A(e){var t={name:e.name_};return e.observing_&&e.observing_.length>0&&(t.dependencies=lV(e.observing_).map(_A)),t}function lV(e){return Array.from(new Set(e))}var cV=0;function xA(){this.message="FLOW_CANCELLED"}xA.prototype=Object.create(Error.prototype);var Db=qk("flow"),uV=qk("flow.bound",{bound:!0}),Ug=Object.assign(function(t,i){if(n0(i))return Db.decorate_20223_(t,i);if(Xp(i))return r0(t,i,Db);var a=t,c=a.name||"<unnamed flow>",h=function(){var o=this,x=arguments,P=++cV,I=Lr(c+" - runid: "+P+" - init",a).apply(o,x),R,D=void 0,$=new Promise(function(G,j){var V=0;R=j;function se(de){D=void 0;var oe;try{oe=Lr(c+" - runid: "+P+" - yield "+V++,I.next).call(I,de)}catch(be){return j(be)}Q(oe)}function ue(de){D=void 0;var oe;try{oe=Lr(c+" - runid: "+P+" - yield "+V++,I.throw).call(I,de)}catch(be){return j(be)}Q(oe)}function Q(de){if(nu(de?.then)){de.then(Q,j);return}return de.done?G(de.value):(D=Promise.resolve(de.value),D.then(se,ue))}se(void 0)});return $.cancel=Lr(c+" - runid: "+P+" - cancel",function(){try{D&&LM(D);var G=I.return(void 0),j=Promise.resolve(G.value);j.then(mg,mg),LM(j),R(new xA)}catch(V){R(V)}}),$};return h.isMobXFlow=!0,h},Db);Ug.bound=oh(uV);function LM(e){nu(e.cancel)&&e.cancel()}function Iv(e){return e?.isMobXFlow===!0}function hV(e,t){return e?f1(e)||!!e[Vr]||K2(e)||ax(e)||h1(e):!1}function bA(e){return hV(e)}function nd(e,t){t===void 0&&(t=void 0),tc();try{return e.apply(t)}finally{rc()}}function wA(e,t,i){return arguments.length===1||t&&typeof t=="object"?dV(e,t):SA(e,t,{})}function SA(e,t,i){var a;if(typeof i.timeout=="number"){var c=new Error("WHEN_TIMEOUT");a=setTimeout(function(){if(!f[Vr].isDisposed)if(f(),i.onError)i.onError(c);else throw c},i.timeout)}i.name="When";var h=kf("When-effect",t),f=fA(function(o){var x=Qk(!1,e);x&&(o.dispose(),a&&clearTimeout(a),h())},i);return f}function dV(e,t){var i;if(t!=null&&(i=t.signal)!=null&&i.aborted)return Object.assign(Promise.reject(new Error("WHEN_ABORTED")),{cancel:function(){return null}});var a,c,h=new Promise(function(f,o){var x,P=SA(e,f,Ef({},t,{onError:o}));a=function(){P(),o(new Error("WHEN_CANCELLED"))},c=function(){P(),o(new Error("WHEN_ABORTED"))},t==null||(x=t.signal)==null||x.addEventListener==null||x.addEventListener("abort",c)}).finally(function(){var f;return t==null||(f=t.signal)==null||f.removeEventListener==null?void 0:f.removeEventListener("abort",c)});return h.cancel=a,h}function lg(e){return e[Vr]}var fV={has:function(t,i){return lg(t).has_(i)},get:function(t,i){return lg(t).get_(i)},set:function(t,i,a){var c;return Xp(i)?(c=lg(t).set_(i,a,!0))!=null?c:!0:!1},deleteProperty:function(t,i){var a;return Xp(i)?(a=lg(t).delete_(i,!0))!=null?a:!0:!1},defineProperty:function(t,i,a){var c;return(c=lg(t).defineProperty_(i,a))!=null?c:!0},ownKeys:function(t){return lg(t).ownKeys_()},preventExtensions:function(t){kn(13)}};function pV(e,t){var i,a;return Lk(),e=cm(e,t),(a=(i=e[Vr]).proxy_)!=null?a:i.proxy_=new Proxy(e,fV)}function Jl(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function o0(e,t){var i=e.interceptors_||(e.interceptors_=[]);return i.push(t),Fk(function(){var a=i.indexOf(t);a!==-1&&i.splice(a,1)})}function Ql(e,t){var i=am();try{for(var a=[].concat(e.interceptors_||[]),c=0,h=a.length;c<h&&(t=a[c](t),t&&!t.type&&kn(14),!!t);c++);return t}finally{od(i)}}function Qc(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function s0(e,t){var i=e.changeListeners_||(e.changeListeners_=[]);return i.push(t),Fk(function(){var a=i.indexOf(t);a!==-1&&i.splice(a,1)})}function eu(e,t){var i=am(),a=e.changeListeners_;if(a){a=a.slice();for(var c=0,h=a.length;c<h;c++)a[c](t);od(i)}}function mV(e,t,i){return Lf(function(){var a,c=cm(e,i)[Vr];(a=t)!=null||(t=Y8(e)),Vg(t).forEach(function(h){return c.make_(h,t[h])})}),e}var zb=Symbol("mobx-keys");function Q2(e,t,i){return cd(e)?vA(e,e,t,i):(Lf(function(){var a=cm(e,i)[Vr];if(!e[zb]){var c=Object.getPrototypeOf(e),h=new Set([].concat(Vg(e),Vg(c)));h.delete("constructor"),h.delete(Vr),t0(c,zb,h)}e[zb].forEach(function(f){return a.make_(f,t&&f in t?t[f]:!0)})}),e)}var FM="splice",sh="update",gV=1e4,yV={get:function(t,i){var a=t[Vr];return i===Vr?a:i==="length"?a.getArrayLength_():typeof i=="string"&&!isNaN(i)?a.get_(parseInt(i)):id(lx,i)?lx[i]:t[i]},set:function(t,i,a){var c=t[Vr];return i==="length"&&c.setArrayLength_(a),typeof i=="symbol"||isNaN(i)?t[i]=a:c.set_(parseInt(i),a),!0},preventExtensions:function(){kn(15)}},eS=function(){function e(i,a,c,h){i===void 0&&(i="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=c,this.legacyMode_=h,this.atom_=new Of(i),this.enhancer_=function(f,o){return a(f,o,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(a){return this.dehancer!==void 0?this.dehancer(a):a},t.dehanceValues_=function(a){return this.dehancer!==void 0&&a.length>0?a.map(this.dehancer):a},t.intercept_=function(a){return o0(this,a)},t.observe_=function(a,c){return c===void 0&&(c=!1),c&&a({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),s0(this,a)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(a){(typeof a!="number"||isNaN(a)||a<0)&&kn("Out of range: "+a);var c=this.values_.length;if(a!==c)if(a>c){for(var h=new Array(a-c),f=0;f<a-c;f++)h[f]=void 0;this.spliceWithArray_(c,0,h)}else this.spliceWithArray_(a,c-a)},t.updateArrayLength_=function(a,c){a!==this.lastKnownLength_&&kn(16),this.lastKnownLength_+=c,this.legacyMode_&&c>0&&kA(a+c+1)},t.spliceWithArray_=function(a,c,h){var f=this;this.atom_;var o=this.values_.length;if(a===void 0?a=0:a>o?a=o:a<0&&(a=Math.max(0,o+a)),arguments.length===1?c=o-a:c==null?c=0:c=Math.max(0,Math.min(c,o-a)),h===void 0&&(h=Iw),Jl(this)){var x=Ql(this,{object:this.proxy_,type:FM,index:a,removedCount:c,added:h});if(!x)return Iw;c=x.removedCount,h=x.added}if(h=h.length===0?h:h.map(function(R){return f.enhancer_(R,void 0)}),this.legacyMode_){var P=h.length-c;this.updateArrayLength_(o,P)}var I=this.spliceItemsIntoValues_(a,c,h);return(c!==0||h.length!==0)&&this.notifyArraySplice_(a,h,I),this.dehanceValues_(I)},t.spliceItemsIntoValues_=function(a,c,h){if(h.length<gV){var f;return(f=this.values_).splice.apply(f,[a,c].concat(h))}else{var o=this.values_.slice(a,a+c),x=this.values_.slice(a+c);this.values_.length+=h.length-c;for(var P=0;P<h.length;P++)this.values_[a+P]=h[P];for(var I=0;I<x.length;I++)this.values_[a+h.length+I]=x[I];return o}},t.notifyArrayChildUpdate_=function(a,c,h){var f=!this.owned_&&ov(),o=Qc(this),x=o||f?{observableKind:"array",object:this.proxy_,type:sh,debugObjectName:this.atom_.name_,index:a,newValue:c,oldValue:h}:null;this.atom_.reportChanged(),o&&eu(this,x)},t.notifyArraySplice_=function(a,c,h){var f=!this.owned_&&ov(),o=Qc(this),x=o||f?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:FM,index:a,removed:h,added:c,removedCount:h.length,addedCount:c.length}:null;this.atom_.reportChanged(),o&&eu(this,x)},t.get_=function(a){if(this.legacyMode_&&a>=this.values_.length){console.warn("[mobx] Out of bounds read: "+a);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[a])},t.set_=function(a,c){var h=this.values_;if(this.legacyMode_&&a>h.length&&kn(17,a,h.length),a<h.length){this.atom_;var f=h[a];if(Jl(this)){var o=Ql(this,{type:sh,object:this.proxy_,index:a,newValue:c});if(!o)return;c=o.newValue}c=this.enhancer_(c,f);var x=c!==f;x&&(h[a]=c,this.notifyArrayChildUpdate_(a,c,f))}else{for(var P=new Array(a+1-h.length),I=0;I<P.length-1;I++)P[I]=void 0;P[P.length-1]=c,this.spliceWithArray_(h.length,0,P)}},e}();function vV(e,t,i,a){return i===void 0&&(i="ObservableArray"),a===void 0&&(a=!1),Lk(),Lf(function(){var c=new eS(i,t,a,!1);$k(c.values_,Vr,c);var h=new Proxy(c.values_,yV);return c.proxy_=h,e&&e.length&&c.spliceWithArray_(0,0,e),h})}var lx={clear:function(){return this.splice(0)},replace:function(t){var i=this[Vr];return i.spliceWithArray_(0,i.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,i){for(var a=arguments.length,c=new Array(a>2?a-2:0),h=2;h<a;h++)c[h-2]=arguments[h];var f=this[Vr];switch(arguments.length){case 0:return[];case 1:return f.spliceWithArray_(t);case 2:return f.spliceWithArray_(t,i)}return f.spliceWithArray_(t,i,c)},spliceWithArray:function(t,i,a){return this[Vr].spliceWithArray_(t,i,a)},push:function(){for(var t=this[Vr],i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return t.spliceWithArray_(t.values_.length,0,a),t.values_.length},pop:function(){return this.splice(Math.max(this[Vr].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[Vr],i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return t.spliceWithArray_(0,0,a),t.values_.length},reverse:function(){return Jt.trackingDerivation&&kn(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){Jt.trackingDerivation&&kn(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var i=this[Vr],a=i.dehanceValues_(i.values_).indexOf(t);return a>-1?(this.splice(a,1),!0):!1}};Ci("at",gl);Ci("concat",gl);Ci("flat",gl);Ci("includes",gl);Ci("indexOf",gl);Ci("join",gl);Ci("lastIndexOf",gl);Ci("slice",gl);Ci("toString",gl);Ci("toLocaleString",gl);Ci("toSorted",gl);Ci("toSpliced",gl);Ci("with",gl);Ci("every",lu);Ci("filter",lu);Ci("find",lu);Ci("findIndex",lu);Ci("findLast",lu);Ci("findLastIndex",lu);Ci("flatMap",lu);Ci("forEach",lu);Ci("map",lu);Ci("some",lu);Ci("toReversed",lu);Ci("reduce",CA);Ci("reduceRight",CA);function Ci(e,t){typeof Array.prototype[e]=="function"&&(lx[e]=t(e))}function gl(e){return function(){var t=this[Vr];t.atom_.reportObserved();var i=t.dehanceValues_(t.values_);return i[e].apply(i,arguments)}}function lu(e){return function(t,i){var a=this,c=this[Vr];c.atom_.reportObserved();var h=c.dehanceValues_(c.values_);return h[e](function(f,o){return t.call(i,f,o,a)})}}function CA(e){return function(){var t=this,i=this[Vr];i.atom_.reportObserved();var a=i.dehanceValues_(i.values_),c=arguments[0];return arguments[0]=function(h,f,o){return c(h,f,o,t)},a[e].apply(a,arguments)}}var _V=sm("ObservableArrayAdministration",eS);function d1(e){return s1(e)&&_V(e[Vr])}var xV={},bf="add",cx="delete",TA=function(){function e(i,a,c){var h=this;a===void 0&&(a=Kp),c===void 0&&(c="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Vr]=xV,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=a,this.name_=c,nu(Map)||kn(18),Lf(function(){h.keysAtom_=Uk("ObservableMap.keys()"),h.data_=new Map,h.hasMap_=new Map,i&&h.merge(i)})}var t=e.prototype;return t.has_=function(a){return this.data_.has(a)},t.has=function(a){var c=this;if(!Jt.trackingDerivation)return this.has_(a);var h=this.hasMap_.get(a);if(!h){var f=h=new Up(this.has_(a),a1,"ObservableMap.key?",!1);this.hasMap_.set(a,f),mA(f,function(){return c.hasMap_.delete(a)})}return h.get()},t.set=function(a,c){var h=this.has_(a);if(Jl(this)){var f=Ql(this,{type:h?sh:bf,object:this,newValue:c,name:a});if(!f)return this;c=f.newValue}return h?this.updateValue_(a,c):this.addValue_(a,c),this},t.delete=function(a){var c=this;if(this.keysAtom_,Jl(this)){var h=Ql(this,{type:cx,object:this,name:a});if(!h)return!1}if(this.has_(a)){var f=ov(),o=Qc(this),x=o||f?{observableKind:"map",debugObjectName:this.name_,type:cx,object:this,oldValue:this.data_.get(a).value_,name:a}:null;return nd(function(){var P;c.keysAtom_.reportChanged(),(P=c.hasMap_.get(a))==null||P.setNewValue_(!1);var I=c.data_.get(a);I.setNewValue_(void 0),c.data_.delete(a)}),o&&eu(this,x),!0}return!1},t.updateValue_=function(a,c){var h=this.data_.get(a);if(c=h.prepareNewValue_(c),c!==Jt.UNCHANGED){var f=ov(),o=Qc(this),x=o||f?{observableKind:"map",debugObjectName:this.name_,type:sh,object:this,oldValue:h.value_,name:a,newValue:c}:null;h.setNewValue_(c),o&&eu(this,x)}},t.addValue_=function(a,c){var h=this;this.keysAtom_,nd(function(){var P,I=new Up(c,h.enhancer_,"ObservableMap.key",!1);h.data_.set(a,I),c=I.value_,(P=h.hasMap_.get(a))==null||P.setNewValue_(!0),h.keysAtom_.reportChanged()});var f=ov(),o=Qc(this),x=o||f?{observableKind:"map",debugObjectName:this.name_,type:bf,object:this,name:a,newValue:c}:null;o&&eu(this,x)},t.get=function(a){return this.has(a)?this.dehanceValue_(this.data_.get(a).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(a){return this.dehancer!==void 0?this.dehancer(a):a},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var a=this,c=this.keys();return BM({next:function(){var f=c.next(),o=f.done,x=f.value;return{done:o,value:o?void 0:a.get(x)}}})},t.entries=function(){var a=this,c=this.keys();return BM({next:function(){var f=c.next(),o=f.done,x=f.value;return{done:o,value:o?void 0:[x,a.get(x)]}}})},t[Symbol.iterator]=function(){return this.entries()},t.forEach=function(a,c){for(var h=gg(this),f;!(f=h()).done;){var o=f.value,x=o[0],P=o[1];a.call(c,P,x,this)}},t.merge=function(a){var c=this;return lm(a)&&(a=new Map(a)),nd(function(){cd(a)?q8(a).forEach(function(h){return c.set(h,a[h])}):Array.isArray(a)?a.forEach(function(h){var f=h[0],o=h[1];return c.set(f,o)}):Qg(a)?(G8(a)||kn(19,a),a.forEach(function(h,f){return c.set(f,h)})):a!=null&&kn(20,a)}),this},t.clear=function(){var a=this;nd(function(){tA(function(){for(var c=gg(a.keys()),h;!(h=c()).done;){var f=h.value;a.delete(f)}})})},t.replace=function(a){var c=this;return nd(function(){for(var h=bV(a),f=new Map,o=!1,x=gg(c.data_.keys()),P;!(P=x()).done;){var I=P.value;if(!h.has(I)){var R=c.delete(I);if(R)o=!0;else{var D=c.data_.get(I);f.set(I,D)}}}for(var $=gg(h.entries()),G;!(G=$()).done;){var j=G.value,V=j[0],se=j[1],ue=c.data_.has(V);if(c.set(V,se),c.data_.has(V)){var Q=c.data_.get(V);f.set(V,Q),ue||(o=!0)}}if(!o)if(c.data_.size!==f.size)c.keysAtom_.reportChanged();else for(var de=c.data_.keys(),oe=f.keys(),be=de.next(),we=oe.next();!be.done;){if(be.value!==we.value){c.keysAtom_.reportChanged();break}be=de.next(),we=oe.next()}c.data_=f}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(a,c){return s0(this,a)},t.intercept_=function(a){return o0(this,a)},ey(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])}(),lm=sm("ObservableMap",TA);function BM(e){return e[Symbol.toStringTag]="MapIterator",rS(e)}function bV(e){if(Qg(e)||lm(e))return e;if(Array.isArray(e))return new Map(e);if(cd(e)){var t=new Map;for(var i in e)t.set(i,e[i]);return t}else return kn(21,e)}var wV={},MA=function(){function e(i,a,c){var h=this;a===void 0&&(a=Kp),c===void 0&&(c="ObservableSet"),this.name_=void 0,this[Vr]=wV,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=c,nu(Set)||kn(22),this.enhancer_=function(f,o){return a(f,o,c)},Lf(function(){h.atom_=Uk(h.name_),i&&h.replace(i)})}var t=e.prototype;return t.dehanceValue_=function(a){return this.dehancer!==void 0?this.dehancer(a):a},t.clear=function(){var a=this;nd(function(){tA(function(){for(var c=gg(a.data_.values()),h;!(h=c()).done;){var f=h.value;a.delete(f)}})})},t.forEach=function(a,c){for(var h=gg(this),f;!(f=h()).done;){var o=f.value;a.call(c,o,o,this)}},t.add=function(a){var c=this;if(this.atom_,Jl(this)){var h=Ql(this,{type:bf,object:this,newValue:a});if(!h)return this}if(!this.has(a)){nd(function(){c.data_.add(c.enhancer_(a,void 0)),c.atom_.reportChanged()});var f=!1,o=Qc(this),x=o||f?{observableKind:"set",debugObjectName:this.name_,type:bf,object:this,newValue:a}:null;o&&eu(this,x)}return this},t.delete=function(a){var c=this;if(Jl(this)){var h=Ql(this,{type:cx,object:this,oldValue:a});if(!h)return!1}if(this.has(a)){var f=!1,o=Qc(this),x=o||f?{observableKind:"set",debugObjectName:this.name_,type:cx,object:this,oldValue:a}:null;return nd(function(){c.atom_.reportChanged(),c.data_.delete(a)}),o&&eu(this,x),!0}return!1},t.has=function(a){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(a))},t.entries=function(){var a=0,c=Array.from(this.keys()),h=Array.from(this.values());return $M({next:function(){var o=a;return a+=1,o<h.length?{value:[c[o],h[o]],done:!1}:{value:void 0,done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var a=this,c=0,h=Array.from(this.data_.values());return $M({next:function(){return c<h.length?{value:a.dehanceValue_(h[c++]),done:!1}:{value:void 0,done:!0}}})},t.intersection=function(a){if(rd(a)&&!Yu(a))return a.intersection(this);var c=new Set(this);return c.intersection(a)},t.union=function(a){if(rd(a)&&!Yu(a))return a.union(this);var c=new Set(this);return c.union(a)},t.difference=function(a){return new Set(this).difference(a)},t.symmetricDifference=function(a){if(rd(a)&&!Yu(a))return a.symmetricDifference(this);var c=new Set(this);return c.symmetricDifference(a)},t.isSubsetOf=function(a){return new Set(this).isSubsetOf(a)},t.isSupersetOf=function(a){return new Set(this).isSupersetOf(a)},t.isDisjointFrom=function(a){if(rd(a)&&!Yu(a))return a.isDisjointFrom(this);var c=new Set(this);return c.isDisjointFrom(a)},t.replace=function(a){var c=this;return Yu(a)&&(a=new Set(a)),nd(function(){Array.isArray(a)?(c.clear(),a.forEach(function(h){return c.add(h)})):rd(a)?(c.clear(),a.forEach(function(h){return c.add(h)})):a!=null&&kn("Cannot initialize set from "+a)}),this},t.observe_=function(a,c){return s0(this,a)},t.intercept_=function(a){return o0(this,a)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Symbol.iterator]=function(){return this.values()},ey(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])}(),Yu=sm("ObservableSet",MA);function $M(e){return e[Symbol.toStringTag]="SetIterator",rS(e)}var jM=Object.create(null),NM="remove",PA=function(){function e(i,a,c,h){a===void 0&&(a=new Map),h===void 0&&(h=b7),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=i,this.values_=a,this.name_=c,this.defaultAnnotation_=h,this.keysAtom_=new Of("ObservableObject.keys"),this.isPlainObject_=cd(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(a){return this.values_.get(a).get()},t.setObservablePropValue_=function(a,c){var h=this.values_.get(a);if(h instanceof iu)return h.set(c),!0;if(Jl(this)){var f=Ql(this,{type:sh,object:this.proxy_||this.target_,name:a,newValue:c});if(!f)return null;c=f.newValue}if(c=h.prepareNewValue_(c),c!==Jt.UNCHANGED){var o=Qc(this),x=!1,P=o||x?{type:sh,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:h.value_,name:a,newValue:c}:null;h.setNewValue_(c),o&&eu(this,P)}return!0},t.get_=function(a){return Jt.trackingDerivation&&!id(this.target_,a)&&this.has_(a),this.target_[a]},t.set_=function(a,c,h){return h===void 0&&(h=!1),id(this.target_,a)?this.values_.has(a)?this.setObservablePropValue_(a,c):h?Reflect.set(this.target_,a,c):(this.target_[a]=c,!0):this.extend_(a,{value:c,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,h)},t.has_=function(a){if(!Jt.trackingDerivation)return a in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var c=this.pendingKeys_.get(a);return c||(c=new Up(a in this.target_,a1,"ObservableObject.key?",!1),this.pendingKeys_.set(a,c)),c.get()},t.make_=function(a,c){if(c===!0&&(c=this.defaultAnnotation_),c!==!1){if(!(a in this.target_)){var h;if((h=this.target_[Qu])!=null&&h[a])return;kn(1,c.annotationType_,this.name_+"."+a.toString())}for(var f=this.target_;f&&f!==o1;){var o=nx(f,a);if(o){var x=c.make_(this,a,o,f);if(x===0)return;if(x===1)break}f=Object.getPrototypeOf(f)}UM(this,c,a)}},t.extend_=function(a,c,h,f){if(f===void 0&&(f=!1),h===!0&&(h=this.defaultAnnotation_),h===!1)return this.defineProperty_(a,c,f);var o=h.extend_(this,a,c,f);return o&&UM(this,h,a),o},t.defineProperty_=function(a,c,h){h===void 0&&(h=!1),this.keysAtom_;try{tc();var f=this.delete_(a);if(!f)return f;if(Jl(this)){var o=Ql(this,{object:this.proxy_||this.target_,name:a,type:bf,newValue:c.value});if(!o)return null;var x=o.newValue;c.value!==x&&(c=Ef({},c,{value:x}))}if(h){if(!Reflect.defineProperty(this.target_,a,c))return!1}else ih(this.target_,a,c);this.notifyPropertyAddition_(a,c.value)}finally{rc()}return!0},t.defineObservableProperty_=function(a,c,h,f){f===void 0&&(f=!1),this.keysAtom_;try{tc();var o=this.delete_(a);if(!o)return o;if(Jl(this)){var x=Ql(this,{object:this.proxy_||this.target_,name:a,type:bf,newValue:c});if(!x)return null;c=x.newValue}var P=VM(a),I={configurable:Jt.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:P.get,set:P.set};if(f){if(!Reflect.defineProperty(this.target_,a,I))return!1}else ih(this.target_,a,I);var R=new Up(c,h,"ObservableObject.key",!1);this.values_.set(a,R),this.notifyPropertyAddition_(a,R.value_)}finally{rc()}return!0},t.defineComputedProperty_=function(a,c,h){h===void 0&&(h=!1),this.keysAtom_;try{tc();var f=this.delete_(a);if(!f)return f;if(Jl(this)){var o=Ql(this,{object:this.proxy_||this.target_,name:a,type:bf,newValue:void 0});if(!o)return null}c.name||(c.name="ObservableObject.key"),c.context=this.proxy_||this.target_;var x=VM(a),P={configurable:Jt.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:x.get,set:x.set};if(h){if(!Reflect.defineProperty(this.target_,a,P))return!1}else ih(this.target_,a,P);this.values_.set(a,new iu(c)),this.notifyPropertyAddition_(a,void 0)}finally{rc()}return!0},t.delete_=function(a,c){if(c===void 0&&(c=!1),this.keysAtom_,!id(this.target_,a))return!0;if(Jl(this)){var h=Ql(this,{object:this.proxy_||this.target_,name:a,type:NM});if(!h)return null}try{var f;tc();var o=Qc(this),x=!1,P=this.values_.get(a),I=void 0;if(!P&&(o||x)){var R;I=(R=nx(this.target_,a))==null?void 0:R.value}if(c){if(!Reflect.deleteProperty(this.target_,a))return!1}else delete this.target_[a];if(P&&(this.values_.delete(a),P instanceof Up&&(I=P.value_),aA(P)),this.keysAtom_.reportChanged(),(f=this.pendingKeys_)==null||(f=f.get(a))==null||f.set(a in this.target_),o||x){var D={type:NM,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:I,name:a};o&&eu(this,D)}}finally{rc()}return!0},t.observe_=function(a,c){return s0(this,a)},t.intercept_=function(a){return o0(this,a)},t.notifyPropertyAddition_=function(a,c){var h,f=Qc(this),o=!1;if(f||o){var x=f||o?{type:bf,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:a,newValue:c}:null;f&&eu(this,x)}(h=this.pendingKeys_)==null||(h=h.get(a))==null||h.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),Vg(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function cm(e,t){var i;if(id(e,Vr))return e;var a=(i=t?.name)!=null?i:"ObservableObject",c=new PA(e,new Map,String(a),R7(t));return t0(e,Vr,c),e}var SV=sm("ObservableObjectAdministration",PA);function VM(e){return jM[e]||(jM[e]={get:function(){return this[Vr].getObservablePropValue_(e)},set:function(i){return this[Vr].setObservablePropValue_(e,i)}})}function f1(e){return s1(e)?SV(e[Vr]):!1}function UM(e,t,i){var a;(a=e.target_[Qu])==null||delete a[i]}var CV=IA(0),TV=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,e===!1}(),Ob=0,EA=function(){};function MV(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):e.prototype.__proto__!==void 0?e.prototype.__proto__=t:e.prototype=t}MV(EA,Array.prototype);var tS=function(e){function t(a,c,h,f){var o;return h===void 0&&(h="ObservableArray"),f===void 0&&(f=!1),o=e.call(this)||this,Lf(function(){var x=new eS(h,c,f,!0);x.proxy_=o,$k(o,Vr,x),a&&a.length&&o.spliceWithArray(0,0,a),TV&&Object.defineProperty(o,"0",CV)}),o}Vk(t,e);var i=t.prototype;return i.concat=function(){this[Vr].atom_.reportObserved();for(var c=arguments.length,h=new Array(c),f=0;f<c;f++)h[f]=arguments[f];return Array.prototype.concat.apply(this.slice(),h.map(function(o){return d1(o)?o.slice():o}))},i[Symbol.iterator]=function(){var a=this,c=0;return rS({next:function(){return c<a.length?{value:a[c++],done:!1}:{done:!0,value:void 0}}})},ey(t,[{key:"length",get:function(){return this[Vr].getArrayLength_()},set:function(c){this[Vr].setArrayLength_(c)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])}(EA);Object.entries(lx).forEach(function(e){var t=e[0],i=e[1];t!=="concat"&&t0(tS.prototype,t,i)});function IA(e){return{enumerable:!1,configurable:!0,get:function(){return this[Vr].get_(e)},set:function(i){this[Vr].set_(e,i)}}}function PV(e){ih(tS.prototype,""+e,IA(e))}function kA(e){if(e>Ob){for(var t=Ob;t<e+100;t++)PV(t);Ob=e}}kA(1e3);function EV(e,t,i){return new tS(e,t,i)}function ux(e,t){if(typeof e=="object"&&e!==null){if(d1(e))return t!==void 0&&kn(23),e[Vr].atom_;if(Yu(e))return e.atom_;if(lm(e)){if(t===void 0)return e.keysAtom_;var i=e.data_.get(t)||e.hasMap_.get(t);return i||kn(25,t,Bw(e)),i}if(f1(e)){if(!t)return kn(26);var a=e[Vr].values_.get(t);return a||kn(27,t,Bw(e)),a}if(K2(e)||h1(e)||ax(e))return e}else if(nu(e)&&ax(e[Vr]))return e[Vr];kn(28)}function IV(e,t){if(e||kn(29),K2(e)||h1(e)||ax(e)||lm(e)||Yu(e))return e;if(e[Vr])return e[Vr];kn(24,e)}function Bw(e,t){var i;if(t!==void 0)i=ux(e,t);else{if(Ev(e))return e.name;f1(e)||lm(e)||Yu(e)?i=IV(e):i=ux(e)}return i.name_}function Lf(e){var t=am(),i=c1(!0);tc();try{return e()}finally{rc(),u1(i),od(t)}}var GM=o1.toString;function AA(e,t,i){return i===void 0&&(i=-1),$w(e,t,i)}function $w(e,t,i,a,c){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var h=typeof e;if(h!=="function"&&h!=="object"&&typeof t!="object")return!1;var f=GM.call(e);if(f!==GM.call(t))return!1;switch(f){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":i>=0&&i++;break}e=qM(e),t=qM(t);var o=f==="[object Array]";if(!o){if(typeof e!="object"||typeof t!="object")return!1;var x=e.constructor,P=t.constructor;if(x!==P&&!(nu(x)&&x instanceof x&&nu(P)&&P instanceof P)&&"constructor"in e&&"constructor"in t)return!1}if(i===0)return!1;i<0&&(i=-1),a=a||[],c=c||[];for(var I=a.length;I--;)if(a[I]===e)return c[I]===t;if(a.push(e),c.push(t),o){if(I=e.length,I!==t.length)return!1;for(;I--;)if(!$w(e[I],t[I],i-1,a,c))return!1}else{var R=Object.keys(e),D;if(I=R.length,Object.keys(t).length!==I)return!1;for(;I--;)if(D=R[I],!(id(t,D)&&$w(e[D],t[D],i-1,a,c)))return!1}return a.pop(),c.pop(),!0}function qM(e){return d1(e)?e.slice():Qg(e)||lm(e)||rd(e)||Yu(e)?Array.from(e.entries()):e}var HM,kV=((HM=i1().Iterator)==null?void 0:HM.prototype)||{};function rS(e){return e[Symbol.iterator]=AV,Object.assign(Object.create(kV),e)}function AV(){return this}["Symbol","Map","Set"].forEach(function(e){var t=i1();typeof t[e]>"u"&&kn("MobX requires global '"+e+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:X7,extras:{getDebugName:Bw},$mobx:Vr});var y_={},WM;function RV(){if(WM)return y_;WM=1;var e=hI();return y_.createRoot=e.createRoot,y_.hydrateRoot=e.hydrateRoot,y_}var DV=RV();const RA=Dj;function nS(e){return Pj(e)}function zV(e){return e1("MuiSvgIcon",e)}QI("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const OV=e=>{const{color:t,fontSize:i,classes:a}=e,c={root:["root",t!=="inherit"&&`color${Ng(t)}`,`fontSize${Ng(i)}`]};return H2(c,zV,a)},LV=Jv("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.color!=="inherit"&&t[`color${Ng(i.color)}`],t[`fontSize${Ng(i.fontSize)}`]]}})(RA(({theme:e})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:e.transitions?.create?.("fill",{duration:(e.vars??e).transitions?.duration?.shorter}),variants:[{props:t=>!t.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:e.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:e.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:e.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,t])=>t&&t.main).map(([t])=>({props:{color:t},style:{color:(e.vars??e).palette?.[t]?.main}})),{props:{color:"action"},style:{color:(e.vars??e).palette?.action?.active}},{props:{color:"disabled"},style:{color:(e.vars??e).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),jw=Y.forwardRef(function(t,i){const a=nS({props:t,name:"MuiSvgIcon"}),{children:c,className:h,color:f="inherit",component:o="svg",fontSize:x="medium",htmlColor:P,inheritViewBox:I=!1,titleAccess:R,viewBox:D="0 0 24 24",...$}=a,G=Y.isValidElement(c)&&c.type==="svg",j={...a,color:f,component:o,fontSize:x,instanceFontSize:t.fontSize,inheritViewBox:I,viewBox:D,hasSvgAsChild:G},V={};I||(V.viewBox=D);const se=OV(j);return q.jsxs(LV,{as:o,className:ci(se.root,h),focusable:"false",color:P,"aria-hidden":R?void 0:!0,role:R?"img":void 0,ref:i,...V,...$,...G&&c.props,ownerState:j,children:[G?c.props.children:c,R?q.jsx("title",{children:R}):null]})});jw.muiName="SvgIcon";function oi(e,t){function i(a,c){return q.jsx(jw,{"data-testid":void 0,ref:c,...a,children:e})}return i.muiName=jw.muiName,Y.memo(Y.forwardRef(i))}function FV(e,t=166){let i;function a(...c){const h=()=>{e.apply(this,c)};clearTimeout(i),i=setTimeout(h,t)}return a.clear=()=>{clearTimeout(i)},a}function BV(e){return e&&e.ownerDocument||document}function DA(e){return BV(e).defaultView||window}function iS(...e){const t=Y.useRef(void 0),i=Y.useCallback(a=>{const c=e.map(h=>{if(h==null)return null;if(typeof h=="function"){const f=h,o=f(a);return typeof o=="function"?o:()=>{f(null)}}return h.current=a,()=>{h.current=null}});return()=>{c.forEach(h=>h?.())}},e);return Y.useMemo(()=>e.every(a=>a==null)?null:a=>{t.current&&(t.current(),t.current=void 0),a!=null&&(t.current=i(a))},e)}const $V=oi(q.jsx("path",{d:"M21 3 3 10.53v.98l6.84 2.65L12.48 21h.98z"})),jV=oi(q.jsx("path",{d:"M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27zM12 17.3c-.72 0-1.3-.58-1.3-1.3s.58-1.3 1.3-1.3 1.3.58 1.3 1.3-.58 1.3-1.3 1.3m1-4.3h-2V7h2z"}));var ZM=function(e){return typeof e=="object"&&e!==null},NV=function(e){var t=e.value,i=t===void 0?"":t,a=e.numInputs,c=a===void 0?4:a,h=e.onChange,f=e.onPaste,o=e.renderInput,x=e.shouldAutoFocus,P=x===void 0?!1:x,I=e.inputType,R=I===void 0?"text":I,D=e.renderSeparator,$=e.placeholder,G=e.containerStyle,j=e.inputStyle,V=e.skipDefaultStyles,se=V===void 0?!1:V,ue=dn.useState(0),Q=ue[0],de=ue[1],oe=dn.useRef([]),be=function(){return i?i.toString().split(""):[]},we=R==="number"||R==="tel";dn.useEffect(function(){oe.current=oe.current.slice(0,c)},[c]),dn.useEffect(function(){var Ve;P&&((Ve=oe.current[0])===null||Ve===void 0||Ve.focus())},[P]);var Ie=function(){if(typeof $=="string"){if($.length===c)return $;$.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},ke=function(Ve){var ut=we?!isNaN(Number(Ve)):typeof Ve=="string";return ut&&Ve.trim().length===1},ae=function(Ve){var ut=Ve.target.value;ke(ut)&&(He(ut),st(Q+1))},Ee=function(Ve){var ut=Ve.nativeEvent,ve=Ve.target.value;if(!ke(ve)){if(ve.length===c){var Fe=ve.split("").some(function(pt){return!ke(pt)});Fe||(rt(ve.split("")),st(c-1))}ut.data===null&&ut.inputType==="deleteContentBackward"&&(Ve.preventDefault(),He(""),st(Q-1)),Ve.target.value=""}},Ze=function(Ve){return function(ut){de(ut),Ve.target.select()}},Qe=function(){de(Q-1)},vt=function(Ve){var ut=be();[Ve.code,Ve.key].includes("Backspace")?(Ve.preventDefault(),He(""),st(Q-1)):Ve.code==="Delete"?(Ve.preventDefault(),He("")):Ve.code==="ArrowLeft"?(Ve.preventDefault(),st(Q-1)):Ve.code==="ArrowRight"||Ve.key===ut[Q]?(Ve.preventDefault(),st(Q+1)):(Ve.code==="Spacebar"||Ve.code==="Space"||Ve.code==="ArrowUp"||Ve.code==="ArrowDown")&&Ve.preventDefault()},st=function(Ve){var ut,ve,Fe=Math.max(Math.min(c-1,Ve),0);oe.current[Fe]&&((ut=oe.current[Fe])===null||ut===void 0||ut.focus(),(ve=oe.current[Fe])===null||ve===void 0||ve.select(),de(Fe))},He=function(Ve){var ut=be();ut[Q]=Ve[0],rt(ut)},rt=function(Ve){var ut=Ve.join("");h(ut)},Ge=function(Ve){var ut;Ve.preventDefault();var ve=be(),Fe=Q,pt=Ve.clipboardData.getData("text/plain").slice(0,c-Q).split("");if(!(we&&pt.some(function(Ct){return isNaN(Number(Ct))}))){for(var Tt=0;Tt<c;++Tt)Tt>=Q&&pt.length>0&&(ve[Tt]=(ut=pt.shift())!==null&&ut!==void 0?ut:"",Fe++);st(Fe),rt(ve)}};return dn.createElement("div",{style:Object.assign({display:"flex",alignItems:"center"},ZM(G)&&G),className:typeof G=="string"?G:void 0,onPaste:f},Array.from({length:c},function(Ve,ut){return ut}).map(function(Ve){var ut,ve,Fe;return dn.createElement(dn.Fragment,{key:Ve},o({value:(ut=be()[Ve])!==null&&ut!==void 0?ut:"",placeholder:(Fe=(ve=Ie())===null||ve===void 0?void 0:ve[Ve])!==null&&Fe!==void 0?Fe:void 0,ref:function(pt){return oe.current[Ve]=pt},onChange:ae,onFocus:function(pt){return Ze(pt)(Ve)},onBlur:Qe,onKeyDown:vt,onPaste:Ge,autoComplete:"off","aria-label":"Please enter OTP character ".concat(Ve+1),style:Object.assign(se?{}:{width:"1em",textAlign:"center"},ZM(j)?j:{}),className:typeof j=="string"?j:void 0,type:R,inputMode:we?"numeric":"text",onInput:Ee},Ve),Ve<c-1&&(typeof D=="function"?D(Ve):D))}))};const v_=4,VV=e=>{const{appClient:t,App:i,readyToLoadStore:a}=e,[c,h]=Y.useState("authorizing"),f=Y.useRef(null);console.log("render SessionGate"),Y.useEffect(()=>{(async()=>{const P=localStorage.getItem("viewerId");P?(console.log("attempting reconnect"),await t.reconnect.mutate({viewerId:P})?(h("loggedIn"),a.readyToLoad=!0):(console.log("reconnect failed; falling back to pairing flow"),h("loggedOut"))):(console.log("no viewer id"),h("loggedOut"))})()},[]);const o=()=>{h("loggedIn"),a.readyToLoad=!0};return q.jsxs(q.Fragment,{children:[q.jsx(i,{}),c!=="loggedIn"&&q.jsx(fn,{position:"absolute",top:0,left:0,zIndex:9999,justifyContent:"center",alignItems:"center",width:"100%",height:"100vh",bgcolor:"#0008",children:q.jsxs(Hv,{ref:f,size:"lg",sx:{boxShadow:"lg",overflow:"hidden"},children:[q.jsx(UV,{}),q.jsx(Yg,{}),c==="authorizing"?q.jsxs(Yr,{display:"flex",justifyContent:"center",children:[q.jsx(im,{variant:"solid",size:"sm",color:"neutral",sx:{mr:1}}),"Connecting..."]}):q.jsx(uB,{children:q.jsx(GV,{appClient:t,onLoggedIn:o})})]})})]})},UV=Y.memo(()=>q.jsxs(q.Fragment,{children:[" ",q.jsx(Yr,{className:"caveat-alpha-label",level:"h2",textAlign:"end",sx:{position:"absolute",right:"1em",transform:"rotate(-10deg) translate(0.65em, 1em)",color:"#e00"},children:"pre-alpha"}),q.jsx(Yr,{level:"h1",alignSelf:"center",startDecorator:q.jsx(ad,{color:"primary",variant:"solid",style:{pointerEvents:"none"},children:q.jsx($V,{})}),children:"TruckSimNavigator"})]})),GV=Y.memo(e=>{const{appClient:t}=e,[i,a]=Y.useState(null),[c,h]=Y.useState(""),[f,o]=Y.useState(!1);Y.useEffect(()=>{const R=new URL(window.location.href);if(R.searchParams.has("pair")){const D=R.searchParams.get("pair").toLowerCase().replaceAll(/[^a-z]/gi,"");window.history.replaceState({},document.title,window.location.pathname),D.length===v_&&(console.log("using code from query param",D),h(D))}},[]);function x(R){R=R.replaceAll(/[^a-z]/gi,""),h(R.toLowerCase())}function P(R){const D=R.clipboardData.getData("text").toLowerCase().trim();D.length===v_&&(h(D),I(D))}async function I(R){if(console.log("redeem code",R),!f){a(null),o(!0);try{const D=await t.redeemCode.mutate({code:R});localStorage.setItem("viewerId",D.viewerId),localStorage.setItem("telemetryId",D.telemetryId),console.log("code redeemed"),e.onLoggedIn()}catch(D){console.log("error after submitting code"),a(D instanceof Error?D.message:"Login failed"),h("")}finally{o(!1)}}}return q.jsxs(fn,{textAlign:"center",gap:"1em",children:[q.jsxs(Yr,{children:["Enter your"," ",q.jsx(bB,{underline:"always",href:"/whats-a-pairing-code.html",children:"pairing code"})]}),q.jsxs("form",{method:"dialog",onSubmit:()=>void I(c),style:{display:"flex",flexDirection:"column",gap:"1em"},children:[q.jsx(NV,{containerStyle:{justifyContent:"center"},value:c,numInputs:v_,onPaste:P,renderInput:(R,D)=>q.jsx(VF,{slotProps:{input:{...R}},autoFocus:D===0,disabled:f,"data-lpignore":"true","data-1p-ignore":"true",sx:{width:"2em",height:"2em",margin:1,fontSize:"2em",fontFamily:"monospace"}}),onChange:x}),i&&q.jsx(Q4,{color:"danger",startDecorator:q.jsx(jV,{}),children:i}),q.jsxs(iB,{sx:{p:0},children:[q.jsx(Da,{component:"a",href:"https://truckermudgeon.github.io",variant:"outlined",color:"neutral",disabled:f,sx:{flexBasis:"50%"},children:"Back"}),q.jsx(Da,{type:"submit",disabled:f||c.length!==v_,sx:{flexBasis:"50%"},startDecorator:f?q.jsx(im,{variant:"solid",color:"neutral",sx:{opacity:.5}}):null,children:f?"Checking":"Continue"})]})]})]})});var Lb={exports:{}},XM;function qV(){return XM||(XM=1,function(e){var t={};function i(h){return Math.floor(Math.abs(h)+.5)*(h>=0?1:-1)}function a(h,f,o){h=i(h*o),f=i(f*o);var x=(h-f)*2;x<0&&(x=-x-1);for(var P="";x>=32;)P+=String.fromCharCode((32|x&31)+63),x/=32;return P+=String.fromCharCode((x|0)+63),P}t.decode=function(h,f){for(var o=0,x=0,P=0,I=[],R=0,D=0,$=null,G,j,V=Math.pow(10,Number.isInteger(f)?f:5);o<h.length;){$=null,R=1,D=0;do $=h.charCodeAt(o++)-63,D+=($&31)*R,R*=32;while($>=32);G=D&1?(-D-1)/2:D/2,R=1,D=0;do $=h.charCodeAt(o++)-63,D+=($&31)*R,R*=32;while($>=32);j=D&1?(-D-1)/2:D/2,x+=G,P+=j,I.push([x/V,P/V])}return I},t.encode=function(h,f){if(!h.length)return"";for(var o=Math.pow(10,Number.isInteger(f)?f:5),x=a(h[0][0],0,o)+a(h[0][1],0,o),P=1;P<h.length;P++){var I=h[P],R=h[P-1];x+=a(I[0],R[0],o),x+=a(I[1],R[1],o)}return x};function c(h){for(var f=[],o=0;o<h.length;o++){var x=h[o].slice();f.push([x[1],x[0]])}return f}t.fromGeoJSON=function(h,f){if(h&&h.type==="Feature"&&(h=h.geometry),!h||h.type!=="LineString")throw new Error("Input must be a GeoJSON LineString");return t.encode(c(h.coordinates),f)},t.toGeoJSON=function(h,f){var o=t.decode(h,f);return{type:"LineString",coordinates:c(o)}},e.exports&&(e.exports=t)}(Lb)),Lb.exports}var HV=qV();const Gg=Lv(HV);function Nw(e,t){return Nw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},Nw(e,t)}function WV(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Nw(e,t)}const KM={disabled:!1},zA=dn.createContext(null);var ZV=function(t){return t.scrollTop},Wy="unmounted",zp="exited",Op="entering",ug="entered",Vw="exiting",cu=function(e){WV(t,e);function t(a,c){var h;h=e.call(this,a,c)||this;var f=c,o=f&&!f.isMounting?a.enter:a.appear,x;return h.appearStatus=null,a.in?o?(x=zp,h.appearStatus=Op):x=ug:a.unmountOnExit||a.mountOnEnter?x=Wy:x=zp,h.state={status:x},h.nextCallback=null,h}t.getDerivedStateFromProps=function(c,h){var f=c.in;return f&&h.status===Wy?{status:zp}:null};var i=t.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(c){var h=null;if(c!==this.props){var f=this.state.status;this.props.in?f!==Op&&f!==ug&&(h=Op):(f===Op||f===ug)&&(h=Vw)}this.updateStatus(!1,h)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var c=this.props.timeout,h,f,o;return h=f=o=c,c!=null&&typeof c!="number"&&(h=c.exit,f=c.enter,o=c.appear!==void 0?c.appear:f),{exit:h,enter:f,appear:o}},i.updateStatus=function(c,h){if(c===void 0&&(c=!1),h!==null)if(this.cancelNextCallback(),h===Op){if(this.props.unmountOnExit||this.props.mountOnEnter){var f=this.props.nodeRef?this.props.nodeRef.current:s_.findDOMNode(this);f&&ZV(f)}this.performEnter(c)}else this.performExit();else this.props.unmountOnExit&&this.state.status===zp&&this.setState({status:Wy})},i.performEnter=function(c){var h=this,f=this.props.enter,o=this.context?this.context.isMounting:c,x=this.props.nodeRef?[o]:[s_.findDOMNode(this),o],P=x[0],I=x[1],R=this.getTimeouts(),D=o?R.appear:R.enter;if(!c&&!f||KM.disabled){this.safeSetState({status:ug},function(){h.props.onEntered(P)});return}this.props.onEnter(P,I),this.safeSetState({status:Op},function(){h.props.onEntering(P,I),h.onTransitionEnd(D,function(){h.safeSetState({status:ug},function(){h.props.onEntered(P,I)})})})},i.performExit=function(){var c=this,h=this.props.exit,f=this.getTimeouts(),o=this.props.nodeRef?void 0:s_.findDOMNode(this);if(!h||KM.disabled){this.safeSetState({status:zp},function(){c.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:Vw},function(){c.props.onExiting(o),c.onTransitionEnd(f.exit,function(){c.safeSetState({status:zp},function(){c.props.onExited(o)})})})},i.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(c,h){h=this.setNextCallback(h),this.setState(c,h)},i.setNextCallback=function(c){var h=this,f=!0;return this.nextCallback=function(o){f&&(f=!1,h.nextCallback=null,c(o))},this.nextCallback.cancel=function(){f=!1},this.nextCallback},i.onTransitionEnd=function(c,h){this.setNextCallback(h);var f=this.props.nodeRef?this.props.nodeRef.current:s_.findDOMNode(this),o=c==null&&!this.props.addEndListener;if(!f||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var x=this.props.nodeRef?[this.nextCallback]:[f,this.nextCallback],P=x[0],I=x[1];this.props.addEndListener(P,I)}c!=null&&setTimeout(this.nextCallback,c)},i.render=function(){var c=this.state.status;if(c===Wy)return null;var h=this.props,f=h.children;h.in,h.mountOnEnter,h.unmountOnExit,h.appear,h.enter,h.exit,h.timeout,h.addEndListener,h.onEnter,h.onEntering,h.onEntered,h.onExit,h.onExiting,h.onExited,h.nodeRef;var o=Er(h,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return dn.createElement(zA.Provider,{value:null},typeof f=="function"?f(c,o):dn.cloneElement(dn.Children.only(f),o))},t}(dn.Component);cu.contextType=zA;cu.propTypes={};function cg(){}cu.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:cg,onEntering:cg,onEntered:cg,onExit:cg,onExiting:cg,onExited:cg};cu.UNMOUNTED=Wy;cu.EXITED=zp;cu.ENTERING=Op;cu.ENTERED=ug;cu.EXITING=Vw;const YM={};function XV(e,t){const i=Y.useRef(YM);return i.current===YM&&(i.current=e(t)),i}const KV=[];function YV(e){Y.useEffect(e,KV)}class oS{static create(){return new oS}currentId=null;start(t,i){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,i()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function JV(){const e=XV(oS.create).current;return YV(e.disposeEffect),e}const OA=e=>e.scrollTop;function qg(e,t){const{timeout:i,easing:a,style:c={}}=e;return{duration:c.transitionDuration??(typeof i=="number"?i:i[t.mode]||0),easing:c.transitionTimingFunction??(typeof a=="object"?a[t.mode]:a),delay:c.transitionDelay}}function QV(e){return e1("MuiCollapse",e)}QI("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const e9=e=>{const{orientation:t,classes:i}=e,a={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return H2(a,QV,i)},t9=Jv("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.orientation],i.state==="entered"&&t.entered,i.state==="exited"&&!i.in&&i.collapsedSize==="0px"&&t.hidden]}})(RA(({theme:e})=>({height:0,overflow:"hidden",transition:e.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:e.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:t})=>t.state==="exited"&&!t.in&&t.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),r9=Jv("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),n9=Jv("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Yp=Y.forwardRef(function(t,i){const a=nS({props:t,name:"MuiCollapse"}),{addEndListener:c,children:h,className:f,collapsedSize:o="0px",component:x,easing:P,in:I,onEnter:R,onEntered:D,onEntering:$,onExit:G,onExited:j,onExiting:V,orientation:se="vertical",style:ue,timeout:Q=fk.standard,TransitionComponent:de=cu,...oe}=a,be={...a,orientation:se,collapsedSize:o},we=e9(be),Ie=Yv(),ke=JV(),ae=Y.useRef(null),Ee=Y.useRef(),Ze=typeof o=="number"?`${o}px`:o,Qe=se==="horizontal",vt=Qe?"width":"height",st=Y.useRef(null),He=iS(i,st),rt=_t=>bt=>{if(_t){const nt=st.current;bt===void 0?_t(nt):_t(nt,bt)}},Ge=()=>ae.current?ae.current[Qe?"clientWidth":"clientHeight"]:0,Ve=rt((_t,bt)=>{ae.current&&Qe&&(ae.current.style.position="absolute"),_t.style[vt]=Ze,R&&R(_t,bt)}),ut=rt((_t,bt)=>{const nt=Ge();ae.current&&Qe&&(ae.current.style.position="");const{duration:kt,easing:At}=qg({style:ue,timeout:Q,easing:P},{mode:"enter"});if(Q==="auto"){const dr=Ie.transitions.getAutoHeightDuration(nt);_t.style.transitionDuration=`${dr}ms`,Ee.current=dr}else _t.style.transitionDuration=typeof kt=="string"?kt:`${kt}ms`;_t.style[vt]=`${nt}px`,_t.style.transitionTimingFunction=At,$&&$(_t,bt)}),ve=rt((_t,bt)=>{_t.style[vt]="auto",D&&D(_t,bt)}),Fe=rt(_t=>{_t.style[vt]=`${Ge()}px`,G&&G(_t)}),pt=rt(j),Tt=rt(_t=>{const bt=Ge(),{duration:nt,easing:kt}=qg({style:ue,timeout:Q,easing:P},{mode:"exit"});if(Q==="auto"){const At=Ie.transitions.getAutoHeightDuration(bt);_t.style.transitionDuration=`${At}ms`,Ee.current=At}else _t.style.transitionDuration=typeof nt=="string"?nt:`${nt}ms`;_t.style[vt]=Ze,_t.style.transitionTimingFunction=kt,V&&V(_t)}),Ct=_t=>{Q==="auto"&&ke.start(Ee.current||0,_t),c&&c(st.current,_t)};return q.jsx(de,{in:I,onEnter:Ve,onEntered:ve,onEntering:ut,onExit:Fe,onExited:pt,onExiting:Tt,addEndListener:Ct,nodeRef:st,timeout:Q==="auto"?null:Q,...oe,children:(_t,{ownerState:bt,...nt})=>q.jsx(t9,{as:x,className:ci(we.root,f,{entered:we.entered,exited:!I&&Ze==="0px"&&we.hidden}[_t]),style:{[Qe?"minWidth":"minHeight"]:Ze,...ue},ref:He,ownerState:{...be,state:_t},...nt,children:q.jsx(r9,{ownerState:{...be,state:_t},className:we.wrapper,ref:ae,children:q.jsx(n9,{ownerState:{...be,state:_t},className:we.wrapperInner,children:h})})})})});Yp&&(Yp.muiSupportAuto=!0);function LA(e){return parseInt(Y.version,10)>=19?e?.props?.ref||null:e?.ref||null}function i9(e,t,i){const a=t.getBoundingClientRect(),c=i&&i.getBoundingClientRect(),h=DA(t);let f;if(t.fakeTransform)f=t.fakeTransform;else{const P=h.getComputedStyle(t);f=P.getPropertyValue("-webkit-transform")||P.getPropertyValue("transform")}let o=0,x=0;if(f&&f!=="none"&&typeof f=="string"){const P=f.split("(")[1].split(")")[0].split(",");o=parseInt(P[4],10),x=parseInt(P[5],10)}return e==="left"?c?`translateX(${c.right+o-a.left}px)`:`translateX(${h.innerWidth+o-a.left}px)`:e==="right"?c?`translateX(-${a.right-c.left-o}px)`:`translateX(-${a.left+a.width-o}px)`:e==="up"?c?`translateY(${c.bottom+x-a.top}px)`:`translateY(${h.innerHeight+x-a.top}px)`:c?`translateY(-${a.top-c.top+a.height-x}px)`:`translateY(-${a.top+a.height-x}px)`}function o9(e){return typeof e=="function"?e():e}function __(e,t,i){const a=o9(i),c=i9(e,t,a);c&&(t.style.webkitTransform=c,t.style.transform=c)}const sS=Y.forwardRef(function(t,i){const a=Yv(),c={enter:a.transitions.easing.easeOut,exit:a.transitions.easing.sharp},h={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{addEndListener:f,appear:o=!0,children:x,container:P,direction:I="down",easing:R=c,in:D,onEnter:$,onEntered:G,onEntering:j,onExit:V,onExited:se,onExiting:ue,style:Q,timeout:de=h,TransitionComponent:oe=cu,...be}=t,we=Y.useRef(null),Ie=iS(LA(x),we,i),ke=Ge=>Ve=>{Ge&&(Ve===void 0?Ge(we.current):Ge(we.current,Ve))},ae=ke((Ge,Ve)=>{__(I,Ge,P),OA(Ge),$&&$(Ge,Ve)}),Ee=ke((Ge,Ve)=>{const ut=qg({timeout:de,style:Q,easing:R},{mode:"enter"});Ge.style.webkitTransition=a.transitions.create("-webkit-transform",{...ut}),Ge.style.transition=a.transitions.create("transform",{...ut}),Ge.style.webkitTransform="none",Ge.style.transform="none",j&&j(Ge,Ve)}),Ze=ke(G),Qe=ke(ue),vt=ke(Ge=>{const Ve=qg({timeout:de,style:Q,easing:R},{mode:"exit"});Ge.style.webkitTransition=a.transitions.create("-webkit-transform",Ve),Ge.style.transition=a.transitions.create("transform",Ve),__(I,Ge,P),V&&V(Ge)}),st=ke(Ge=>{Ge.style.webkitTransition="",Ge.style.transition="",se&&se(Ge)}),He=Ge=>{f&&f(we.current,Ge)},rt=Y.useCallback(()=>{we.current&&__(I,we.current,P)},[I,P]);return Y.useEffect(()=>{if(D||I==="down"||I==="right")return;const Ge=FV(()=>{we.current&&__(I,we.current,P)}),Ve=DA(we.current);return Ve.addEventListener("resize",Ge),()=>{Ge.clear(),Ve.removeEventListener("resize",Ge)}},[I,D,P]),Y.useEffect(()=>{D||rt()},[D,rt]),q.jsx(oe,{nodeRef:we,onEnter:ae,onEntered:Ze,onEntering:Ee,onExit:vt,onExited:st,onExiting:Qe,addEndListener:He,appear:o,in:D,timeout:de,...be,children:(Ge,{ownerState:Ve,...ut})=>Y.cloneElement(x,{ref:Ie,style:{visibility:Ge==="exited"&&!D?"hidden":void 0,...Q,...x.props.style},...ut})})}),hg=cN({createStyledComponent:Jv("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>nS({props:e,name:"MuiGrid"}),useTheme:Yv}),s9={entering:{transform:"none"},entered:{transform:"none"}},a9=Y.forwardRef(function(t,i){const a=Yv(),c={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{addEndListener:h,appear:f=!0,children:o,easing:x,in:P,onEnter:I,onEntered:R,onEntering:D,onExit:$,onExited:G,onExiting:j,style:V,timeout:se=c,TransitionComponent:ue=cu,...Q}=t,de=Y.useRef(null),oe=iS(de,LA(o),i),be=vt=>st=>{if(vt){const He=de.current;st===void 0?vt(He):vt(He,st)}},we=be(D),Ie=be((vt,st)=>{OA(vt);const He=qg({style:V,timeout:se,easing:x},{mode:"enter"});vt.style.webkitTransition=a.transitions.create("transform",He),vt.style.transition=a.transitions.create("transform",He),I&&I(vt,st)}),ke=be(R),ae=be(j),Ee=be(vt=>{const st=qg({style:V,timeout:se,easing:x},{mode:"exit"});vt.style.webkitTransition=a.transitions.create("transform",st),vt.style.transition=a.transitions.create("transform",st),$&&$(vt)}),Ze=be(G),Qe=vt=>{h&&h(de.current,vt)};return q.jsx(ue,{appear:f,in:P,nodeRef:de,onEnter:Ie,onEntered:ke,onEntering:we,onExit:Ee,onExited:Ze,onExiting:ae,addEndListener:Qe,timeout:se,...Q,children:(vt,{ownerState:st,...He})=>Y.cloneElement(o,{style:{transform:"scale(0)",visibility:vt==="exited"&&!P?"hidden":void 0,...s9[vt],...V,...o.props.style},ref:oe,...He})})}),l9=ok({themeId:Wv});function ea(e,t){if(e==null)throw new Error(t);return e}function Np(e,t){if(!e)throw new Error(`assertion failed: ${t}`)}var il=63710088e-1,c9={centimeters:il*100,centimetres:il*100,degrees:360/(2*Math.PI),feet:il*3.28084,inches:il*39.37,kilometers:il/1e3,kilometres:il/1e3,meters:il,metres:il,miles:il/1609.344,millimeters:il*1e3,millimetres:il*1e3,nauticalmiles:il/1852,radians:1,yards:il*1.0936};function hx(e,t,i={}){const a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=t||{},a.geometry=e,a}function Zy(e,t,i={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!QM(e[0])||!QM(e[1]))throw new Error("coordinates must contain numbers");return hx({type:"Point",coordinates:e},t,i)}function sv(e,t,i={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return hx({type:"LineString",coordinates:e},t,i)}function JM(e,t={}){const i={type:"FeatureCollection"};return t.id&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.features=e,i}function u9(e,t="kilometers"){const i=c9[t];if(!i)throw new Error(t+" units is invalid");return e*i}function Uw(e){return e%(2*Math.PI)*180/Math.PI}function eh(e){return e%360*Math.PI/180}function QM(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function aS(e,t,i){if(e!==null)for(var a,c,h,f,o,x,P,I=0,R=0,D,$=e.type,G=$==="FeatureCollection",j=$==="Feature",V=G?e.features.length:1,se=0;se<V;se++){P=G?e.features[se].geometry:j?e.geometry:e,D=P?P.type==="GeometryCollection":!1,o=D?P.geometries.length:1;for(var ue=0;ue<o;ue++){var Q=0,de=0;if(f=D?P.geometries[ue]:P,f!==null){x=f.coordinates;var oe=f.type;switch(I=0,oe){case null:break;case"Point":if(t(x,R,se,Q,de)===!1)return!1;R++,Q++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(t(x[a],R,se,Q,de)===!1)return!1;R++,oe==="MultiPoint"&&Q++}oe==="LineString"&&Q++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(c=0;c<x[a].length-I;c++){if(t(x[a][c],R,se,Q,de)===!1)return!1;R++}oe==="MultiLineString"&&Q++,oe==="Polygon"&&de++}oe==="Polygon"&&Q++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(de=0,c=0;c<x[a].length;c++){for(h=0;h<x[a][c].length-I;h++){if(t(x[a][c][h],R,se,Q,de)===!1)return!1;R++}de++}Q++}break;case"GeometryCollection":for(a=0;a<f.geometries.length;a++)if(aS(f.geometries[a],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function h9(e,t){var i,a,c,h,f,o,x,P,I,R,D=0,$=e.type==="FeatureCollection",G=e.type==="Feature",j=$?e.features.length:1;for(i=0;i<j;i++){for(o=$?e.features[i].geometry:G?e.geometry:e,P=$?e.features[i].properties:G?e.properties:{},I=$?e.features[i].bbox:G?e.bbox:void 0,R=$?e.features[i].id:G?e.id:void 0,x=o?o.type==="GeometryCollection":!1,f=x?o.geometries.length:1,c=0;c<f;c++){if(h=x?o.geometries[c]:o,h===null){if(t(null,D,P,I,R)===!1)return!1;continue}switch(h.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(h,D,P,I,R)===!1)return!1;break}case"GeometryCollection":{for(a=0;a<h.geometries.length;a++)if(t(h.geometries[a],D,P,I,R)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}D++}}function FA(e,t){h9(e,function(i,a,c,h,f){var o=i===null?null:i.type;switch(o){case null:case"Point":case"LineString":case"Polygon":return t(hx(i,c,{bbox:h,id:f}),a,0)===!1?!1:void 0}var x;switch(o){case"MultiPoint":x="Point";break;case"MultiLineString":x="LineString";break;case"MultiPolygon":x="Polygon";break}for(var P=0;P<i.coordinates.length;P++){var I=i.coordinates[P],R={type:x,coordinates:I};if(t(hx(R,c),a,P)===!1)return!1}})}function d9(e,t){FA(e,function(i,a,c){var h=0;if(i.geometry){var f=i.geometry.type;if(!(f==="Point"||f==="MultiPoint")){var o,x=0,P=0,I=0;if(aS(i,function(R,D,$,G,j){if(o===void 0||a>x||G>P||j>I){o=R,x=a,P=G,I=j,h=0;return}var V=sv([o,R],i.properties);if(t(V,a,c,j,h)===!1)return!1;h++,o=R})===!1)return!1}}})}function f9(e,t,i){var a=i,c=!1;return d9(e,function(h,f,o,x,P){c===!1&&i===void 0?a=h:a=t(a,h,f,o,x,P),c=!0}),a}function Fb(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const i=[1/0,1/0,-1/0,-1/0];return aS(e,a=>{i[0]>a[0]&&(i[0]=a[0]),i[1]>a[1]&&(i[1]=a[1]),i[2]<a[0]&&(i[2]=a[0]),i[3]<a[1]&&(i[3]=a[1])}),i}function Gp(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function p9(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function BA(e,t,i={}){if(i.final===!0)return m9(e,t);const a=Gp(e),c=Gp(t),h=eh(a[0]),f=eh(c[0]),o=eh(a[1]),x=eh(c[1]),P=Math.sin(f-h)*Math.cos(x),I=Math.cos(o)*Math.sin(x)-Math.sin(o)*Math.cos(x)*Math.cos(f-h);return Uw(Math.atan2(P,I))}function m9(e,t){let i=BA(t,e);return i=(i+180)%360,i}var lS=BA;if(!Y.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!mV)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function g9(e){e()}function y9(e){e||(e=g9),yA({reactionScheduler:e})}function v9(e){return aV(e)}var _9=1e4,x9=1e4,b9=function(){function e(t){var i=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(a){a===void 0&&(a=_9),clearTimeout(i.sweepTimeout),i.sweepTimeout=void 0;var c=Date.now();i.registrations.forEach(function(h,f){c-h.registeredAt>=a&&(i.finalize(h.value),i.registrations.delete(f))}),i.registrations.size>0&&i.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){i.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,i,a){this.registrations.set(a,{value:i,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.registrations.delete(t)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,x9))}}),e}(),w9=typeof FinalizationRegistry<"u"?FinalizationRegistry:b9,Gw=new w9(function(e){var t;(t=e.reaction)===null||t===void 0||t.dispose(),e.reaction=null}),Bb={exports:{}},$b={};var eP;function S9(){if(eP)return $b;eP=1;var e=Px();function t(R,D){return R===D&&(R!==0||1/R===1/D)||R!==R&&D!==D}var i=typeof Object.is=="function"?Object.is:t,a=e.useState,c=e.useEffect,h=e.useLayoutEffect,f=e.useDebugValue;function o(R,D){var $=D(),G=a({inst:{value:$,getSnapshot:D}}),j=G[0].inst,V=G[1];return h(function(){j.value=$,j.getSnapshot=D,x(j)&&V({inst:j})},[R,$,D]),c(function(){return x(j)&&V({inst:j}),R(function(){x(j)&&V({inst:j})})},[R]),f($),$}function x(R){var D=R.getSnapshot;R=R.value;try{var $=D();return!i(R,$)}catch{return!0}}function P(R,D){return D()}var I=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?P:o;return $b.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:I,$b}var tP;function C9(){return tP||(tP=1,Bb.exports=S9()),Bb.exports}var T9=C9();function rP(e){e.reaction=new ch("observer".concat(e.name),function(){var t;e.stateVersion=Symbol(),(t=e.onStoreChange)===null||t===void 0||t.call(e)})}function M9(e,t){t===void 0&&(t="observed");var i=dn.useRef(null);if(!i.current){var a={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(o){return Gw.unregister(a),a.onStoreChange=o,a.reaction||(rP(a),a.stateVersion=Symbol()),function(){var x;a.onStoreChange=null,(x=a.reaction)===null||x===void 0||x.dispose(),a.reaction=null}},getSnapshot:function(){return a.stateVersion}};i.current=a}var c=i.current;c.reaction||(rP(c),Gw.register(i,c,c)),dn.useDebugValue(c.reaction,v9),T9.useSyncExternalStore(c.subscribe,c.getSnapshot,c.getSnapshot);var h,f;if(c.reaction.track(function(){try{h=e()}catch(o){f=o}}),f)throw f;return h}var jb,Nb,$A=typeof Symbol=="function"&&Symbol.for,P9=(Nb=(jb=Object.getOwnPropertyDescriptor(function(){},"name"))===null||jb===void 0?void 0:jb.configurable)!==null&&Nb!==void 0?Nb:!1,nP=$A?Symbol.for("react.forward_ref"):typeof Y.forwardRef=="function"&&Y.forwardRef(function(e){return null}).$$typeof,iP=$A?Symbol.for("react.memo"):typeof Y.memo=="function"&&Y.memo(function(e){return null}).$$typeof;function co(e,t){var i;if(iP&&e.$$typeof===iP)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var a=(i=void 0)!==null&&i!==void 0?i:!1,c=e,h=e.displayName||e.name;if(nP&&e.$$typeof===nP&&(a=!0,c=e.render,typeof c!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var f=function(o,x){return M9(function(){return c(o,x)},h)};return f.displayName=e.displayName,P9&&Object.defineProperty(f,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(f.contextTypes=e.contextTypes),a&&(f=Y.forwardRef(f)),f=Y.memo(f),I9(e,f),f}var E9={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function I9(e,t){Object.keys(e).forEach(function(i){E9[i]||Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))})}var Vb;y9(Ju.unstable_batchedUpdates);Vb=Gw.finalizeAllImmediately;const k9="modulepreload",A9=function(e){return"/"+e},oP={},R9=function(t,i,a){let c=Promise.resolve();if(i&&i.length>0){let P=function(I){return Promise.all(I.map(R=>Promise.resolve(R).then(D=>({status:"fulfilled",value:D}),D=>({status:"rejected",reason:D}))))};var f=P;document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),x=o?.nonce||o?.getAttribute("nonce");c=P(i.map(I=>{if(I=A9(I),I in oP)return;oP[I]=!0;const R=I.endsWith(".css"),D=R?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${I}"]${D}`))return;const $=document.createElement("link");if($.rel=R?"stylesheet":k9,R||($.as="script"),$.crossOrigin="",$.href=I,x&&$.setAttribute("nonce",x),document.head.appendChild($),R)return new Promise((G,j)=>{$.addEventListener("load",G),$.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${I}`)))})}))}function h(o){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=o,window.dispatchEvent(x),!x.defaultPrevented)throw o}return c.then(o=>{for(const x of o||[])x.status==="rejected"&&h(x.reason);return t().catch(h)})},jA=Y.createContext(null);function D9(){const e=Y.useContext(jA)?.maps,t=Y.useContext(um);return Y.useMemo(()=>({...e,current:t?.map}),[e,t])}function z9(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,h=Array.isArray(t)?t[1]:t?t.y:0;return i===c&&a===h}function Pa(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Pa(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(const c of i)if(!t.hasOwnProperty(c)||!Pa(e[c],t[c]))return!1;return!0}return!1}function sP(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function aP(e,t){const i=t.viewState||t,a={};if("longitude"in i&&"latitude"in i&&(i.longitude!==e.center.lng||i.latitude!==e.center.lat)){const c=e.center.constructor;a.center=new c(i.longitude,i.latitude)}return"zoom"in i&&i.zoom!==e.zoom&&(a.zoom=i.zoom),"bearing"in i&&i.bearing!==e.bearing&&(a.bearing=i.bearing),"pitch"in i&&i.pitch!==e.pitch&&(a.pitch=i.pitch),i.padding&&e.padding&&!Pa(i.padding,e.padding)&&(a.padding=i.padding),a}const O9=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function lP(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const i=e.layers.map(a=>{let c=null;"interactive"in a&&(c=Object.assign({},a),delete c.interactive);const h=t[a.ref];if(h){c=c||Object.assign({},a),delete c.ref;for(const f of O9)f in h&&(c[f]=h[f])}return c||a});return{...e,layers:i}}const cP={version:8,sources:{},layers:[]},uP={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},hP={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},dP={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},L9=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],F9=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Hg{constructor(t,i,a){this._map=null,this._internalUpdate=!1,this._hoveredFeatures=null,this._propsedCameraUpdate=null,this._styleComponents={},this._onEvent=c=>{const h=this.props[dP[c.type]];h?h(c):c.type==="error"&&console.error(c.error)},this._onCameraEvent=c=>{if(this._internalUpdate)return;c.viewState=this._propsedCameraUpdate||sP(this._map.transform);const h=this.props[hP[c.type]];h&&h(c)},this._onCameraUpdate=c=>this._internalUpdate?c:(this._propsedCameraUpdate=sP(c),aP(c,this.props)),this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const h=this.props[uP[c.type]];h&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),h(c),delete c.features)},this._MapClass=t,this.props=i,this._initialize(a)}get map(){return this._map}setProps(t){const i=this.props;this.props=t;const a=this._updateSettings(t,i),c=this._updateSize(t),h=this._updateViewState(t);this._updateStyle(t,i),this._updateStyleComponents(t),this._updateHandlers(t,i),(a||c||h&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const a=Hg.savedMaps.pop();if(!a)return null;const c=a.map,h=c.getContainer();for(i.className=h.className;h.childNodes.length>0;)i.appendChild(h.childNodes[0]);c._container=i;const f=c._resizeObserver;f&&(f.disconnect(),f.observe(i)),a.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:o}=t;return o&&(o.bounds?c.fitBounds(o.bounds,{...o.fitBoundsOptions,duration:0}):a._updateViewState(o)),c.isStyleLoaded()?c.fire("load"):c.once("style.load",()=>c.fire("load")),c._update(),a}_initialize(t){const{props:i}=this,{mapStyle:a=cP}=i,c={...i,...i.initialViewState,container:t,style:lP(a)},h=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[h.longitude||0,h.latitude||0],zoom:h.zoom||0,pitch:h.pitch||0,bearing:h.bearing||0}),i.gl){const o=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=o,i.gl)}const f=new this._MapClass(c);h.padding&&f.setPadding(h.padding),i.cursor&&(f.getCanvas().style.cursor=i.cursor),f.transformCameraUpdate=this._onCameraUpdate,f.on("style.load",()=>{this._styleComponents={light:f.getLight(),sky:f.getSky(),projection:f.getProjection?.(),terrain:f.getTerrain()},this._updateStyleComponents(this.props)}),f.on("sourcedata",()=>{this._updateStyleComponents(this.props)});for(const o in uP)f.on(o,this._onPointerEvent);for(const o in hP)f.on(o,this._onCameraEvent);for(const o in dP)f.on(o,this._onEvent);this._map=f}recycle(){this.map.getContainer().querySelector("[mapboxgl-children]")?.remove(),Hg.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_updateSize(t){const{viewState:i}=t;if(i){const a=this._map;if(i.width!==a.transform.width||i.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t){const i=this._map,a=i.transform;if(!i.isMoving()){const h=aP(a,t);if(Object.keys(h).length>0)return this._internalUpdate=!0,i.jumpTo(h),this._internalUpdate=!1,!0}return!1}_updateSettings(t,i){const a=this._map;let c=!1;for(const h of L9)h in t&&!Pa(t[h],i[h])&&(c=!0,a[`set${h[0].toUpperCase()}${h.slice(1)}`]?.call(a,t[h]));return c}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==i.mapStyle){const{mapStyle:a=cP,styleDiffing:c=!0}=t,h={diff:c};"localIdeographFontFamily"in t&&(h.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(lP(a),h)}}_updateStyleComponents({light:t,projection:i,sky:a,terrain:c}){const h=this._map,f=this._styleComponents;h.style._loaded&&(t&&!Pa(t,f.light)&&(f.light=t,h.setLight(t)),i&&!Pa(i,f.projection)&&i!==f.projection?.type&&(f.projection=typeof i=="string"?{type:i}:i,h.setProjection?.(f.projection)),a&&!Pa(a,f.sky)&&(f.sky=a,h.setSky(a)),c!==void 0&&!Pa(c,f.terrain)&&(!c||h.getSource(c.source))&&(f.terrain=c,h.setTerrain(c)))}_updateHandlers(t,i){const a=this._map;for(const c of F9){const h=t[c]??!0,f=i[c]??!0;Pa(h,f)||(h?a[c].enable(h):a[c].disable())}}_queryRenderedFeatures(t){const i=this._map,{interactiveLayerIds:a=[]}=this.props;try{return i.queryRenderedFeatures(t,{layers:a.filter(i.getLayer.bind(i))})}catch{return[]}}_updateHover(t){const{props:i}=this;if(i.interactiveLayerIds&&(i.onMouseMove||i.onMouseEnter||i.onMouseLeave)){const c=t.type,h=this._hoveredFeatures?.length>0,f=this._queryRenderedFeatures(t.point),o=f.length>0;!o&&h&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=f,o&&!h&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=c}else this._hoveredFeatures=null}}Hg.savedMaps=[];const B9=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function $9(e){if(!e)return null;const t=e.map,i={getMap:()=>t};for(const a of j9(t))!(a in i)&&!B9.includes(a)&&(i[a]=t[a].bind(t));return i}function j9(e){const t=new Set;let i=e;for(;i;){for(const a of Object.getOwnPropertyNames(i))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);i=Object.getPrototypeOf(i)}return Array.from(t)}const N9=typeof document<"u"?Y.useLayoutEffect:Y.useEffect;function V9(e,t){const{RTLTextPlugin:i,maxParallelImageRequests:a,workerCount:c,workerUrl:h}=t;if(i&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"){const{pluginUrl:f,lazy:o=!0}=typeof i=="string"?{pluginUrl:i}:i;e.setRTLTextPlugin(f,x=>{x&&console.error(x)},o)}a!==void 0&&e.setMaxParallelImageRequests(a),c!==void 0&&e.setWorkerCount(c),h!==void 0&&e.setWorkerUrl(h)}const um=Y.createContext(null);function U9(e,t){const i=Y.useContext(jA),[a,c]=Y.useState(null),h=Y.useRef(),{current:f}=Y.useRef({mapLib:null,map:null});Y.useEffect(()=>{const P=e.mapLib;let I=!0,R;return Promise.resolve(P||R9(()=>Promise.resolve().then(()=>hG),void 0)).then(D=>{if(!I)return;if(!D)throw new Error("Invalid mapLib");const $="Map"in D?D:D.default;if(!$.Map)throw new Error("Invalid mapLib");V9($,e),e.reuseMaps&&(R=Hg.reuse(e,h.current)),R||(R=new Hg($.Map,e,h.current)),f.map=$9(R),f.mapLib=$,c(R),i?.onMapMount(f.map,e.id)}).catch(D=>{const{onError:$}=e;$?$({type:"error",target:null,originalEvent:null,error:D}):console.error(D)}),()=>{I=!1,R&&(i?.onMapUnmount(e.id),e.reuseMaps?R.recycle():R.destroy())}},[]),N9(()=>{a&&a.setProps(e)}),Y.useImperativeHandle(t,()=>f.map,[a]);const o=Y.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),x={height:"100%"};return Y.createElement("div",{id:e.id,ref:h,style:o},a&&Y.createElement(um.Provider,{value:f},Y.createElement("div",{"mapboxgl-children":"",style:x},e.children)))}const G9=Y.forwardRef(U9),q9=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function ud(e,t){if(!e||!t)return;const i=e.style;for(const a in t){const c=t[a];Number.isFinite(c)&&!q9.test(a)?i[a]=`${c}px`:i[a]=c}}function NA(e,t){if(e===t)return null;const i=fP(e),a=fP(t),c=[];for(const h of a)i.has(h)||c.push(h);for(const h of i)a.has(h)||c.push(h);return c.length===0?null:c}function fP(e){return new Set(e?e.trim().split(/\s+/):[])}const dx=Y.memo(Y.forwardRef((e,t)=>{const{map:i,mapLib:a}=Y.useContext(um),c=Y.useRef({props:e}),h=Y.useMemo(()=>{let se=!1;Y.Children.forEach(e.children,de=>{de&&(se=!0)});const ue={...e,element:se?document.createElement("div"):void 0},Q=new a.Marker(ue);return Q.setLngLat([e.longitude,e.latitude]),Q.getElement().addEventListener("click",de=>{c.current.props.onClick?.({type:"click",target:Q,originalEvent:de})}),Q.on("dragstart",de=>{const oe=de;oe.lngLat=h.getLngLat(),c.current.props.onDragStart?.(oe)}),Q.on("drag",de=>{const oe=de;oe.lngLat=h.getLngLat(),c.current.props.onDrag?.(oe)}),Q.on("dragend",de=>{const oe=de;oe.lngLat=h.getLngLat(),c.current.props.onDragEnd?.(oe)}),Q},[]);Y.useEffect(()=>(h.addTo(i.getMap()),()=>{h.remove()}),[]);const{longitude:f,latitude:o,offset:x,style:P,draggable:I=!1,popup:R=null,rotation:D=0,rotationAlignment:$="auto",pitchAlignment:G="auto"}=e;Y.useEffect(()=>{ud(h.getElement(),P)},[P]),Y.useImperativeHandle(t,()=>h,[]);const j=c.current.props;(h.getLngLat().lng!==f||h.getLngLat().lat!==o)&&h.setLngLat([f,o]),x&&!z9(h.getOffset(),x)&&h.setOffset(x),h.isDraggable()!==I&&h.setDraggable(I),h.getRotation()!==D&&h.setRotation(D),h.getRotationAlignment()!==$&&h.setRotationAlignment($),h.getPitchAlignment()!==G&&h.setPitchAlignment(G),h.getPopup()!==R&&h.setPopup(R);const V=NA(j.className,e.className);if(V)for(const se of V)h.toggleClassName(se);return c.current.props=e,Ju.createPortal(e.children,h.getElement())}));Y.memo(Y.forwardRef((e,t)=>{const{map:i,mapLib:a}=Y.useContext(um),c=Y.useMemo(()=>document.createElement("div"),[]),h=Y.useRef({props:e}),f=Y.useMemo(()=>{const o={...e},x=new a.Popup(o);return x.setLngLat([e.longitude,e.latitude]),x.once("open",P=>{h.current.props.onOpen?.(P)}),x},[]);if(Y.useEffect(()=>{const o=x=>{h.current.props.onClose?.(x)};return f.on("close",o),f.setDOMContent(c).addTo(i.getMap()),()=>{f.off("close",o),f.isOpen()&&f.remove()}},[]),Y.useEffect(()=>{ud(f.getElement(),e.style)},[e.style]),Y.useImperativeHandle(t,()=>f,[]),f.isOpen()){const o=h.current.props;(f.getLngLat().lng!==e.longitude||f.getLngLat().lat!==e.latitude)&&f.setLngLat([e.longitude,e.latitude]),e.offset&&!Pa(o.offset,e.offset)&&f.setOffset(e.offset),(o.anchor!==e.anchor||o.maxWidth!==e.maxWidth)&&(f.options.anchor=e.anchor,f.setMaxWidth(e.maxWidth));const x=NA(o.className,e.className);if(x)for(const P of x)f.toggleClassName(P);h.current.props=e}return Ju.createPortal(e.children,c)}));function hm(e,t,i,a){const c=Y.useContext(um),h=Y.useMemo(()=>e(c),[]);return Y.useEffect(()=>{const f=t,o=null,x=typeof t=="function"?t:null,{map:P}=c;return P.hasControl(h)||(P.addControl(h,f?.position),o&&o(c)),()=>{x&&x(c),P.hasControl(h)&&P.removeControl(h)}},[]),h}function H9(e){const t=hm(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return Y.useEffect(()=>{ud(t._container,e.style)},[e.style]),null}Y.memo(H9);function W9(e){const t=hm(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return Y.useEffect(()=>{ud(t._controlContainer,e.style)},[e.style]),null}Y.memo(W9);function Z9(e,t){const i=Y.useRef({props:e}),a=hm(({mapLib:c})=>{const h=new c.GeolocateControl(e),f=h._setupUI;return h._setupUI=()=>{h._container.hasChildNodes()||f()},h.on("geolocate",o=>{i.current.props.onGeolocate?.(o)}),h.on("error",o=>{i.current.props.onError?.(o)}),h.on("outofmaxbounds",o=>{i.current.props.onOutOfMaxBounds?.(o)}),h.on("trackuserlocationstart",o=>{i.current.props.onTrackUserLocationStart?.(o)}),h.on("trackuserlocationend",o=>{i.current.props.onTrackUserLocationEnd?.(o)}),h},{position:e.position});return i.current.props=e,Y.useImperativeHandle(t,()=>a,[]),Y.useEffect(()=>{ud(a._container,e.style)},[e.style]),null}Y.memo(Y.forwardRef(Z9));function X9(e){const t=hm(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return Y.useEffect(()=>{ud(t._container,e.style)},[e.style]),null}Y.memo(X9);function K9(e){const t=hm(({mapLib:h})=>new h.ScaleControl(e),{position:e.position}),i=Y.useRef(e),a=i.current;i.current=e;const{style:c}=e;return e.maxWidth!==void 0&&e.maxWidth!==a.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==a.unit&&t.setUnit(e.unit),Y.useEffect(()=>{ud(t._container,c)},[c]),null}Y.memo(K9);function Y9(e){const t=hm(({mapLib:i})=>new i.TerrainControl(e),{position:e.position});return Y.useEffect(()=>{ud(t._container,e.style)},[e.style]),null}Y.memo(Y9);function J9(e){const t=hm(({mapLib:i})=>new i.LogoControl(e),{position:e.position});return Y.useEffect(()=>{ud(t._container,e.style)},[e.style]),null}Y.memo(J9);function fx(e,t){if(!e)throw new Error(t)}let Q9=0;function eU(e,t,i){if(e.style&&e.style._loaded){const a={...i};return delete a.id,delete a.children,e.addSource(t,a),e.getSource(t)}return null}function tU(e,t,i){fx(t.id===i.id,"source id changed"),fx(t.type===i.type,"source type changed");let a="",c=0;for(const f in t)f!=="children"&&f!=="id"&&!Pa(i[f],t[f])&&(a=f,c++);if(!c)return;const h=t.type;if(h==="geojson")e.setData(t.data);else if(h==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else switch(a){case"coordinates":e.setCoordinates?.(t.coordinates);break;case"url":e.setUrl?.(t.url);break;case"tiles":e.setTiles?.(t.tiles);break;default:console.warn(`Unable to update <Source> prop: ${a}`)}}function wf(e){const t=Y.useContext(um).map.getMap(),i=Y.useRef(e),[,a]=Y.useState(0),c=Y.useMemo(()=>e.id||`jsx-source-${Q9++}`,[]);Y.useEffect(()=>{if(t){const f=()=>setTimeout(()=>a(o=>o+1),0);return t.on("styledata",f),f(),()=>{if(t.off("styledata",f),t.style&&t.style._loaded&&t.getSource(c)){const o=t.getStyle()?.layers;if(o)for(const x of o)x.source===c&&t.removeLayer(x.id);t.removeSource(c)}}}},[t]);let h=t&&t.style&&t.getSource(c);return h?tU(h,e,i.current):h=eU(t,c,e),i.current=e,h&&Y.Children.map(e.children,f=>f&&Y.cloneElement(f,{source:c}))||null}function rU(e,t,i,a){if(fx(i.id===a.id,"layer id changed"),fx(i.type===a.type,"layer type changed"),i.type==="custom"||a.type==="custom")return;const{layout:c={},paint:h={},filter:f,minzoom:o,maxzoom:x,beforeId:P}=i;if(P!==a.beforeId&&e.moveLayer(t,P),c!==a.layout){const I=a.layout||{};for(const R in c)Pa(c[R],I[R])||e.setLayoutProperty(t,R,c[R]);for(const R in I)c.hasOwnProperty(R)||e.setLayoutProperty(t,R,void 0)}if(h!==a.paint){const I=a.paint||{};for(const R in h)Pa(h[R],I[R])||e.setPaintProperty(t,R,h[R]);for(const R in I)h.hasOwnProperty(R)||e.setPaintProperty(t,R,void 0)}Pa(f,a.filter)||e.setFilter(t,f),(o!==a.minzoom||x!==a.maxzoom)&&e.setLayerZoomRange(t,o,x)}function nU(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const a={...i,id:t};delete a.beforeId,e.addLayer(a,i.beforeId)}}let iU=0;function tn(e){const t=Y.useContext(um).map.getMap(),i=Y.useRef(e),[,a]=Y.useState(0),c=Y.useMemo(()=>e.id||`jsx-layer-${iU++}`,[]);if(Y.useEffect(()=>{if(t){const f=()=>a(o=>o+1);return t.on("styledata",f),f(),()=>{t.off("styledata",f),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{rU(t,c,e,i.current)}catch(f){console.warn(f)}else nU(t,c,e);return i.current=e,null}const oU=e=>(console.log("render destination markers",{highlighted:e.selectedDestinationNodeUid,dests:e.destinations}),q.jsx(q.Fragment,{children:e.destinations.map((t,i)=>q.jsx(dx,{longitude:t.lonLat[0],latitude:t.lonLat[1],style:{zIndex:e.selectedDestinationNodeUid===t.nodeUid?e.destinations.length:"auto"},children:q.jsx(Da,{size:e.selectedDestinationNodeUid===t.nodeUid?"lg":"md",onClick:()=>e.onDestinationClick(t),sx:{width:"1em",height:"1em",border:1,backgroundColor:e.selectedDestinationNodeUid==null||e.selectedDestinationNodeUid===t.nodeUid?"primary":"#aaa",display:e.forceDisplay===!0||e.selectedDestinationNodeUid===t.nodeUid?void 0:"none"},children:i+1})},t.nodeUid))}));var Ub={exports:{}},Gb,pP;function VA(){return pP||(pP=1,Gb={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),Gb}var qb={exports:{}},Hb,mP;function sU(){return mP||(mP=1,Hb=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")}),Hb}var gP;function aU(){if(gP)return qb.exports;gP=1;var e=sU(),t=Array.prototype.concat,i=Array.prototype.slice,a=qb.exports=function(h){for(var f=[],o=0,x=h.length;o<x;o++){var P=h[o];e(P)?f=t.call(f,i.call(P)):f.push(P)}return f};return a.wrap=function(c){return function(){return c(a(arguments))}},qb.exports}var yP;function lU(){if(yP)return Ub.exports;yP=1;var e=VA(),t=aU(),i=Object.hasOwnProperty,a=Object.create(null);for(var c in e)i.call(e,c)&&(a[e[c]]=c);var h=Ub.exports={to:{},get:{}};h.get=function(x){var P=x.substring(0,3).toLowerCase(),I,R;switch(P){case"hsl":I=h.get.hsl(x),R="hsl";break;case"hwb":I=h.get.hwb(x),R="hwb";break;default:I=h.get.rgb(x),R="rgb";break}return I?{model:R,value:I}:null},h.get.rgb=function(x){if(!x)return null;var P=/^#([a-f0-9]{3,4})$/i,I=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,R=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,D=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,$=/^(\w+)$/,G=[0,0,0,1],j,V,se;if(j=x.match(I)){for(se=j[2],j=j[1],V=0;V<3;V++){var ue=V*2;G[V]=parseInt(j.slice(ue,ue+2),16)}se&&(G[3]=parseInt(se,16)/255)}else if(j=x.match(P)){for(j=j[1],se=j[3],V=0;V<3;V++)G[V]=parseInt(j[V]+j[V],16);se&&(G[3]=parseInt(se+se,16)/255)}else if(j=x.match(R)){for(V=0;V<3;V++)G[V]=parseInt(j[V+1],0);j[4]&&(j[5]?G[3]=parseFloat(j[4])*.01:G[3]=parseFloat(j[4]))}else if(j=x.match(D)){for(V=0;V<3;V++)G[V]=Math.round(parseFloat(j[V+1])*2.55);j[4]&&(j[5]?G[3]=parseFloat(j[4])*.01:G[3]=parseFloat(j[4]))}else return(j=x.match($))?j[1]==="transparent"?[0,0,0,0]:i.call(e,j[1])?(G=e[j[1]],G[3]=1,G):null:null;for(V=0;V<3;V++)G[V]=f(G[V],0,255);return G[3]=f(G[3],0,1),G},h.get.hsl=function(x){if(!x)return null;var P=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,I=x.match(P);if(I){var R=parseFloat(I[4]),D=(parseFloat(I[1])%360+360)%360,$=f(parseFloat(I[2]),0,100),G=f(parseFloat(I[3]),0,100),j=f(isNaN(R)?1:R,0,1);return[D,$,G,j]}return null},h.get.hwb=function(x){if(!x)return null;var P=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,I=x.match(P);if(I){var R=parseFloat(I[4]),D=(parseFloat(I[1])%360+360)%360,$=f(parseFloat(I[2]),0,100),G=f(parseFloat(I[3]),0,100),j=f(isNaN(R)?1:R,0,1);return[D,$,G,j]}return null},h.to.hex=function(){var x=t(arguments);return"#"+o(x[0])+o(x[1])+o(x[2])+(x[3]<1?o(Math.round(x[3]*255)):"")},h.to.rgb=function(){var x=t(arguments);return x.length<4||x[3]===1?"rgb("+Math.round(x[0])+", "+Math.round(x[1])+", "+Math.round(x[2])+")":"rgba("+Math.round(x[0])+", "+Math.round(x[1])+", "+Math.round(x[2])+", "+x[3]+")"},h.to.rgb.percent=function(){var x=t(arguments),P=Math.round(x[0]/255*100),I=Math.round(x[1]/255*100),R=Math.round(x[2]/255*100);return x.length<4||x[3]===1?"rgb("+P+"%, "+I+"%, "+R+"%)":"rgba("+P+"%, "+I+"%, "+R+"%, "+x[3]+")"},h.to.hsl=function(){var x=t(arguments);return x.length<4||x[3]===1?"hsl("+x[0]+", "+x[1]+"%, "+x[2]+"%)":"hsla("+x[0]+", "+x[1]+"%, "+x[2]+"%, "+x[3]+")"},h.to.hwb=function(){var x=t(arguments),P="";return x.length>=4&&x[3]!==1&&(P=", "+x[3]),"hwb("+x[0]+", "+x[1]+"%, "+x[2]+"%"+P+")"},h.to.keyword=function(x){return a[x.slice(0,3)]};function f(x,P,I){return Math.min(Math.max(P,x),I)}function o(x){var P=Math.round(x).toString(16).toUpperCase();return P.length<2?"0"+P:P}return Ub.exports}var Wb,vP;function UA(){if(vP)return Wb;vP=1;const e=VA(),t={};for(const c of Object.keys(e))t[e[c]]=c;const i={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};Wb=i;for(const c of Object.keys(i)){if(!("channels"in i[c]))throw new Error("missing channels property: "+c);if(!("labels"in i[c]))throw new Error("missing channel labels property: "+c);if(i[c].labels.length!==i[c].channels)throw new Error("channel and label counts mismatch: "+c);const{channels:h,labels:f}=i[c];delete i[c].channels,delete i[c].labels,Object.defineProperty(i[c],"channels",{value:h}),Object.defineProperty(i[c],"labels",{value:f})}i.rgb.hsl=function(c){const h=c[0]/255,f=c[1]/255,o=c[2]/255,x=Math.min(h,f,o),P=Math.max(h,f,o),I=P-x;let R,D;P===x?R=0:h===P?R=(f-o)/I:f===P?R=2+(o-h)/I:o===P&&(R=4+(h-f)/I),R=Math.min(R*60,360),R<0&&(R+=360);const $=(x+P)/2;return P===x?D=0:$<=.5?D=I/(P+x):D=I/(2-P-x),[R,D*100,$*100]},i.rgb.hsv=function(c){let h,f,o,x,P;const I=c[0]/255,R=c[1]/255,D=c[2]/255,$=Math.max(I,R,D),G=$-Math.min(I,R,D),j=function(V){return($-V)/6/G+1/2};return G===0?(x=0,P=0):(P=G/$,h=j(I),f=j(R),o=j(D),I===$?x=o-f:R===$?x=1/3+h-o:D===$&&(x=2/3+f-h),x<0?x+=1:x>1&&(x-=1)),[x*360,P*100,$*100]},i.rgb.hwb=function(c){const h=c[0],f=c[1];let o=c[2];const x=i.rgb.hsl(c)[0],P=1/255*Math.min(h,Math.min(f,o));return o=1-1/255*Math.max(h,Math.max(f,o)),[x,P*100,o*100]},i.rgb.cmyk=function(c){const h=c[0]/255,f=c[1]/255,o=c[2]/255,x=Math.min(1-h,1-f,1-o),P=(1-h-x)/(1-x)||0,I=(1-f-x)/(1-x)||0,R=(1-o-x)/(1-x)||0;return[P*100,I*100,R*100,x*100]};function a(c,h){return(c[0]-h[0])**2+(c[1]-h[1])**2+(c[2]-h[2])**2}return i.rgb.keyword=function(c){const h=t[c];if(h)return h;let f=1/0,o;for(const x of Object.keys(e)){const P=e[x],I=a(c,P);I<f&&(f=I,o=x)}return o},i.keyword.rgb=function(c){return e[c]},i.rgb.xyz=function(c){let h=c[0]/255,f=c[1]/255,o=c[2]/255;h=h>.04045?((h+.055)/1.055)**2.4:h/12.92,f=f>.04045?((f+.055)/1.055)**2.4:f/12.92,o=o>.04045?((o+.055)/1.055)**2.4:o/12.92;const x=h*.4124+f*.3576+o*.1805,P=h*.2126+f*.7152+o*.0722,I=h*.0193+f*.1192+o*.9505;return[x*100,P*100,I*100]},i.rgb.lab=function(c){const h=i.rgb.xyz(c);let f=h[0],o=h[1],x=h[2];f/=95.047,o/=100,x/=108.883,f=f>.008856?f**(1/3):7.787*f+16/116,o=o>.008856?o**(1/3):7.787*o+16/116,x=x>.008856?x**(1/3):7.787*x+16/116;const P=116*o-16,I=500*(f-o),R=200*(o-x);return[P,I,R]},i.hsl.rgb=function(c){const h=c[0]/360,f=c[1]/100,o=c[2]/100;let x,P,I;if(f===0)return I=o*255,[I,I,I];o<.5?x=o*(1+f):x=o+f-o*f;const R=2*o-x,D=[0,0,0];for(let $=0;$<3;$++)P=h+1/3*-($-1),P<0&&P++,P>1&&P--,6*P<1?I=R+(x-R)*6*P:2*P<1?I=x:3*P<2?I=R+(x-R)*(2/3-P)*6:I=R,D[$]=I*255;return D},i.hsl.hsv=function(c){const h=c[0];let f=c[1]/100,o=c[2]/100,x=f;const P=Math.max(o,.01);o*=2,f*=o<=1?o:2-o,x*=P<=1?P:2-P;const I=(o+f)/2,R=o===0?2*x/(P+x):2*f/(o+f);return[h,R*100,I*100]},i.hsv.rgb=function(c){const h=c[0]/60,f=c[1]/100;let o=c[2]/100;const x=Math.floor(h)%6,P=h-Math.floor(h),I=255*o*(1-f),R=255*o*(1-f*P),D=255*o*(1-f*(1-P));switch(o*=255,x){case 0:return[o,D,I];case 1:return[R,o,I];case 2:return[I,o,D];case 3:return[I,R,o];case 4:return[D,I,o];case 5:return[o,I,R]}},i.hsv.hsl=function(c){const h=c[0],f=c[1]/100,o=c[2]/100,x=Math.max(o,.01);let P,I;I=(2-f)*o;const R=(2-f)*x;return P=f*x,P/=R<=1?R:2-R,P=P||0,I/=2,[h,P*100,I*100]},i.hwb.rgb=function(c){const h=c[0]/360;let f=c[1]/100,o=c[2]/100;const x=f+o;let P;x>1&&(f/=x,o/=x);const I=Math.floor(6*h),R=1-o;P=6*h-I,(I&1)!==0&&(P=1-P);const D=f+P*(R-f);let $,G,j;switch(I){default:case 6:case 0:$=R,G=D,j=f;break;case 1:$=D,G=R,j=f;break;case 2:$=f,G=R,j=D;break;case 3:$=f,G=D,j=R;break;case 4:$=D,G=f,j=R;break;case 5:$=R,G=f,j=D;break}return[$*255,G*255,j*255]},i.cmyk.rgb=function(c){const h=c[0]/100,f=c[1]/100,o=c[2]/100,x=c[3]/100,P=1-Math.min(1,h*(1-x)+x),I=1-Math.min(1,f*(1-x)+x),R=1-Math.min(1,o*(1-x)+x);return[P*255,I*255,R*255]},i.xyz.rgb=function(c){const h=c[0]/100,f=c[1]/100,o=c[2]/100;let x,P,I;return x=h*3.2406+f*-1.5372+o*-.4986,P=h*-.9689+f*1.8758+o*.0415,I=h*.0557+f*-.204+o*1.057,x=x>.0031308?1.055*x**(1/2.4)-.055:x*12.92,P=P>.0031308?1.055*P**(1/2.4)-.055:P*12.92,I=I>.0031308?1.055*I**(1/2.4)-.055:I*12.92,x=Math.min(Math.max(0,x),1),P=Math.min(Math.max(0,P),1),I=Math.min(Math.max(0,I),1),[x*255,P*255,I*255]},i.xyz.lab=function(c){let h=c[0],f=c[1],o=c[2];h/=95.047,f/=100,o/=108.883,h=h>.008856?h**(1/3):7.787*h+16/116,f=f>.008856?f**(1/3):7.787*f+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;const x=116*f-16,P=500*(h-f),I=200*(f-o);return[x,P,I]},i.lab.xyz=function(c){const h=c[0],f=c[1],o=c[2];let x,P,I;P=(h+16)/116,x=f/500+P,I=P-o/200;const R=P**3,D=x**3,$=I**3;return P=R>.008856?R:(P-16/116)/7.787,x=D>.008856?D:(x-16/116)/7.787,I=$>.008856?$:(I-16/116)/7.787,x*=95.047,P*=100,I*=108.883,[x,P,I]},i.lab.lch=function(c){const h=c[0],f=c[1],o=c[2];let x;x=Math.atan2(o,f)*360/2/Math.PI,x<0&&(x+=360);const I=Math.sqrt(f*f+o*o);return[h,I,x]},i.lch.lab=function(c){const h=c[0],f=c[1],x=c[2]/360*2*Math.PI,P=f*Math.cos(x),I=f*Math.sin(x);return[h,P,I]},i.rgb.ansi16=function(c,h=null){const[f,o,x]=c;let P=h===null?i.rgb.hsv(c)[2]:h;if(P=Math.round(P/50),P===0)return 30;let I=30+(Math.round(x/255)<<2|Math.round(o/255)<<1|Math.round(f/255));return P===2&&(I+=60),I},i.hsv.ansi16=function(c){return i.rgb.ansi16(i.hsv.rgb(c),c[2])},i.rgb.ansi256=function(c){const h=c[0],f=c[1],o=c[2];return h===f&&f===o?h<8?16:h>248?231:Math.round((h-8)/247*24)+232:16+36*Math.round(h/255*5)+6*Math.round(f/255*5)+Math.round(o/255*5)},i.ansi16.rgb=function(c){let h=c%10;if(h===0||h===7)return c>50&&(h+=3.5),h=h/10.5*255,[h,h,h];const f=(~~(c>50)+1)*.5,o=(h&1)*f*255,x=(h>>1&1)*f*255,P=(h>>2&1)*f*255;return[o,x,P]},i.ansi256.rgb=function(c){if(c>=232){const P=(c-232)*10+8;return[P,P,P]}c-=16;let h;const f=Math.floor(c/36)/5*255,o=Math.floor((h=c%36)/6)/5*255,x=h%6/5*255;return[f,o,x]},i.rgb.hex=function(c){const f=(((Math.round(c[0])&255)<<16)+((Math.round(c[1])&255)<<8)+(Math.round(c[2])&255)).toString(16).toUpperCase();return"000000".substring(f.length)+f},i.hex.rgb=function(c){const h=c.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!h)return[0,0,0];let f=h[0];h[0].length===3&&(f=f.split("").map(R=>R+R).join(""));const o=parseInt(f,16),x=o>>16&255,P=o>>8&255,I=o&255;return[x,P,I]},i.rgb.hcg=function(c){const h=c[0]/255,f=c[1]/255,o=c[2]/255,x=Math.max(Math.max(h,f),o),P=Math.min(Math.min(h,f),o),I=x-P;let R,D;return I<1?R=P/(1-I):R=0,I<=0?D=0:x===h?D=(f-o)/I%6:x===f?D=2+(o-h)/I:D=4+(h-f)/I,D/=6,D%=1,[D*360,I*100,R*100]},i.hsl.hcg=function(c){const h=c[1]/100,f=c[2]/100,o=f<.5?2*h*f:2*h*(1-f);let x=0;return o<1&&(x=(f-.5*o)/(1-o)),[c[0],o*100,x*100]},i.hsv.hcg=function(c){const h=c[1]/100,f=c[2]/100,o=h*f;let x=0;return o<1&&(x=(f-o)/(1-o)),[c[0],o*100,x*100]},i.hcg.rgb=function(c){const h=c[0]/360,f=c[1]/100,o=c[2]/100;if(f===0)return[o*255,o*255,o*255];const x=[0,0,0],P=h%1*6,I=P%1,R=1-I;let D=0;switch(Math.floor(P)){case 0:x[0]=1,x[1]=I,x[2]=0;break;case 1:x[0]=R,x[1]=1,x[2]=0;break;case 2:x[0]=0,x[1]=1,x[2]=I;break;case 3:x[0]=0,x[1]=R,x[2]=1;break;case 4:x[0]=I,x[1]=0,x[2]=1;break;default:x[0]=1,x[1]=0,x[2]=R}return D=(1-f)*o,[(f*x[0]+D)*255,(f*x[1]+D)*255,(f*x[2]+D)*255]},i.hcg.hsv=function(c){const h=c[1]/100,f=c[2]/100,o=h+f*(1-h);let x=0;return o>0&&(x=h/o),[c[0],x*100,o*100]},i.hcg.hsl=function(c){const h=c[1]/100,o=c[2]/100*(1-h)+.5*h;let x=0;return o>0&&o<.5?x=h/(2*o):o>=.5&&o<1&&(x=h/(2*(1-o))),[c[0],x*100,o*100]},i.hcg.hwb=function(c){const h=c[1]/100,f=c[2]/100,o=h+f*(1-h);return[c[0],(o-h)*100,(1-o)*100]},i.hwb.hcg=function(c){const h=c[1]/100,o=1-c[2]/100,x=o-h;let P=0;return x<1&&(P=(o-x)/(1-x)),[c[0],x*100,P*100]},i.apple.rgb=function(c){return[c[0]/65535*255,c[1]/65535*255,c[2]/65535*255]},i.rgb.apple=function(c){return[c[0]/255*65535,c[1]/255*65535,c[2]/255*65535]},i.gray.rgb=function(c){return[c[0]/100*255,c[0]/100*255,c[0]/100*255]},i.gray.hsl=function(c){return[0,0,c[0]]},i.gray.hsv=i.gray.hsl,i.gray.hwb=function(c){return[0,100,c[0]]},i.gray.cmyk=function(c){return[0,0,0,c[0]]},i.gray.lab=function(c){return[c[0],0,0]},i.gray.hex=function(c){const h=Math.round(c[0]/100*255)&255,o=((h<<16)+(h<<8)+h).toString(16).toUpperCase();return"000000".substring(o.length)+o},i.rgb.gray=function(c){return[(c[0]+c[1]+c[2])/3/255*100]},Wb}var Zb,_P;function cU(){if(_P)return Zb;_P=1;const e=UA();function t(){const h={},f=Object.keys(e);for(let o=f.length,x=0;x<o;x++)h[f[x]]={distance:-1,parent:null};return h}function i(h){const f=t(),o=[h];for(f[h].distance=0;o.length;){const x=o.pop(),P=Object.keys(e[x]);for(let I=P.length,R=0;R<I;R++){const D=P[R],$=f[D];$.distance===-1&&($.distance=f[x].distance+1,$.parent=x,o.unshift(D))}}return f}function a(h,f){return function(o){return f(h(o))}}function c(h,f){const o=[f[h].parent,h];let x=e[f[h].parent][h],P=f[h].parent;for(;f[P].parent;)o.unshift(f[P].parent),x=a(e[f[P].parent][P],x),P=f[P].parent;return x.conversion=o,x}return Zb=function(h){const f=i(h),o={},x=Object.keys(f);for(let P=x.length,I=0;I<P;I++){const R=x[I];f[R].parent!==null&&(o[R]=c(R,f))}return o},Zb}var Xb,xP;function uU(){if(xP)return Xb;xP=1;const e=UA(),t=cU(),i={},a=Object.keys(e);function c(f){const o=function(...x){const P=x[0];return P==null?P:(P.length>1&&(x=P),f(x))};return"conversion"in f&&(o.conversion=f.conversion),o}function h(f){const o=function(...x){const P=x[0];if(P==null)return P;P.length>1&&(x=P);const I=f(x);if(typeof I=="object")for(let R=I.length,D=0;D<R;D++)I[D]=Math.round(I[D]);return I};return"conversion"in f&&(o.conversion=f.conversion),o}return a.forEach(f=>{i[f]={},Object.defineProperty(i[f],"channels",{value:e[f].channels}),Object.defineProperty(i[f],"labels",{value:e[f].labels});const o=t(f);Object.keys(o).forEach(P=>{const I=o[P];i[f][P]=h(I),i[f][P].raw=c(I)})}),Xb=i,Xb}var Kb,bP;function hU(){if(bP)return Kb;bP=1;const e=lU(),t=uU(),i=["keyword","gray","hex"],a={};for(const D of Object.keys(t))a[[...t[D].labels].sort().join("")]=D;const c={};function h(D,$){if(!(this instanceof h))return new h(D,$);if($&&$ in i&&($=null),$&&!($ in t))throw new Error("Unknown model: "+$);let G,j;if(D==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(D instanceof h)this.model=D.model,this.color=[...D.color],this.valpha=D.valpha;else if(typeof D=="string"){const V=e.get(D);if(V===null)throw new Error("Unable to parse color from string: "+D);this.model=V.model,j=t[this.model].channels,this.color=V.value.slice(0,j),this.valpha=typeof V.value[j]=="number"?V.value[j]:1}else if(D.length>0){this.model=$||"rgb",j=t[this.model].channels;const V=Array.prototype.slice.call(D,0,j);this.color=R(V,j),this.valpha=typeof D[j]=="number"?D[j]:1}else if(typeof D=="number")this.model="rgb",this.color=[D>>16&255,D>>8&255,D&255],this.valpha=1;else{this.valpha=1;const V=Object.keys(D);"alpha"in D&&(V.splice(V.indexOf("alpha"),1),this.valpha=typeof D.alpha=="number"?D.alpha:0);const se=V.sort().join("");if(!(se in a))throw new Error("Unable to parse color from object: "+JSON.stringify(D));this.model=a[se];const{labels:ue}=t[this.model],Q=[];for(G=0;G<ue.length;G++)Q.push(D[ue[G]]);this.color=R(Q)}if(c[this.model])for(j=t[this.model].channels,G=0;G<j;G++){const V=c[this.model][G];V&&(this.color[G]=V(this.color[G]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}h.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(D){let $=this.model in e.to?this:this.rgb();$=$.round(typeof D=="number"?D:1);const G=$.valpha===1?$.color:[...$.color,this.valpha];return e.to[$.model](G)},percentString(D){const $=this.rgb().round(typeof D=="number"?D:1),G=$.valpha===1?$.color:[...$.color,this.valpha];return e.to.rgb.percent(G)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const D={},{channels:$}=t[this.model],{labels:G}=t[this.model];for(let j=0;j<$;j++)D[G[j]]=this.color[j];return this.valpha!==1&&(D.alpha=this.valpha),D},unitArray(){const D=this.rgb().color;return D[0]/=255,D[1]/=255,D[2]/=255,this.valpha!==1&&D.push(this.valpha),D},unitObject(){const D=this.rgb().object();return D.r/=255,D.g/=255,D.b/=255,this.valpha!==1&&(D.alpha=this.valpha),D},round(D){return D=Math.max(D||0,0),new h([...this.color.map(o(D)),this.valpha],this.model)},alpha(D){return D!==void 0?new h([...this.color,Math.max(0,Math.min(1,D))],this.model):this.valpha},red:x("rgb",0,P(255)),green:x("rgb",1,P(255)),blue:x("rgb",2,P(255)),hue:x(["hsl","hsv","hsl","hwb","hcg"],0,D=>(D%360+360)%360),saturationl:x("hsl",1,P(100)),lightness:x("hsl",2,P(100)),saturationv:x("hsv",1,P(100)),value:x("hsv",2,P(100)),chroma:x("hcg",1,P(100)),gray:x("hcg",2,P(100)),white:x("hwb",1,P(100)),wblack:x("hwb",2,P(100)),cyan:x("cmyk",0,P(100)),magenta:x("cmyk",1,P(100)),yellow:x("cmyk",2,P(100)),black:x("cmyk",3,P(100)),x:x("xyz",0,P(95.047)),y:x("xyz",1,P(100)),z:x("xyz",2,P(108.833)),l:x("lab",0,P(100)),a:x("lab",1),b:x("lab",2),keyword(D){return D!==void 0?new h(D):t[this.model].keyword(this.color)},hex(D){return D!==void 0?new h(D):e.to.hex(this.rgb().round().color)},hexa(D){if(D!==void 0)return new h(D);const $=this.rgb().round().color;let G=Math.round(this.valpha*255).toString(16).toUpperCase();return G.length===1&&(G="0"+G),e.to.hex($)+G},rgbNumber(){const D=this.rgb().color;return(D[0]&255)<<16|(D[1]&255)<<8|D[2]&255},luminosity(){const D=this.rgb().color,$=[];for(const[G,j]of D.entries()){const V=j/255;$[G]=V<=.04045?V/12.92:((V+.055)/1.055)**2.4}return .2126*$[0]+.7152*$[1]+.0722*$[2]},contrast(D){const $=this.luminosity(),G=D.luminosity();return $>G?($+.05)/(G+.05):(G+.05)/($+.05)},level(D){const $=this.contrast(D);return $>=7?"AAA":$>=4.5?"AA":""},isDark(){const D=this.rgb().color;return(D[0]*2126+D[1]*7152+D[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const D=this.rgb();for(let $=0;$<3;$++)D.color[$]=255-D.color[$];return D},lighten(D){const $=this.hsl();return $.color[2]+=$.color[2]*D,$},darken(D){const $=this.hsl();return $.color[2]-=$.color[2]*D,$},saturate(D){const $=this.hsl();return $.color[1]+=$.color[1]*D,$},desaturate(D){const $=this.hsl();return $.color[1]-=$.color[1]*D,$},whiten(D){const $=this.hwb();return $.color[1]+=$.color[1]*D,$},blacken(D){const $=this.hwb();return $.color[2]+=$.color[2]*D,$},grayscale(){const D=this.rgb().color,$=D[0]*.3+D[1]*.59+D[2]*.11;return h.rgb($,$,$)},fade(D){return this.alpha(this.valpha-this.valpha*D)},opaquer(D){return this.alpha(this.valpha+this.valpha*D)},rotate(D){const $=this.hsl();let G=$.color[0];return G=(G+D)%360,G=G<0?360+G:G,$.color[0]=G,$},mix(D,$){if(!D||!D.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof D);const G=D.rgb(),j=this.rgb(),V=$===void 0?.5:$,se=2*V-1,ue=G.alpha()-j.alpha(),Q=((se*ue===-1?se:(se+ue)/(1+se*ue))+1)/2,de=1-Q;return h.rgb(Q*G.red()+de*j.red(),Q*G.green()+de*j.green(),Q*G.blue()+de*j.blue(),G.alpha()*V+j.alpha()*(1-V))}};for(const D of Object.keys(t)){if(i.includes(D))continue;const{channels:$}=t[D];h.prototype[D]=function(...G){return this.model===D?new h(this):G.length>0?new h(G,D):new h([...I(t[this.model][D].raw(this.color)),this.valpha],D)},h[D]=function(...G){let j=G[0];return typeof j=="number"&&(j=R(G,$)),new h(j,D)}}function f(D,$){return Number(D.toFixed($))}function o(D){return function($){return f($,D)}}function x(D,$,G){D=Array.isArray(D)?D:[D];for(const j of D)(c[j]||(c[j]=[]))[$]=G;return D=D[0],function(j){let V;return j!==void 0?(G&&(j=G(j)),V=this[D](),V.color[$]=j,V):(V=this[D]().color[$],G&&(V=G(V)),V)}}function P(D){return function($){return Math.max(0,Math.min(D,$))}}function I(D){return Array.isArray(D)?D:[D]}function R(D,$){for(let G=0;G<$;G++)typeof D[G]!="number"&&(D[G]=0);return D}return Kb=h,Kb}var dU=hU();const cS=Lv(dU),GA=oi(q.jsx("path",{d:"m9.78 11.16-1.42 1.42c-.68-.69-1.34-1.58-1.79-2.94l1.94-.49c.32.89.77 1.5 1.27 2.01M11 6 7 2 3 6h3.02c.02.81.08 1.54.19 2.17l1.94-.49C8.08 7.2 8.03 6.63 8.02 6zm10 0-4-4-4 4h2.99c-.1 3.68-1.28 4.75-2.54 5.88-.5.44-1.01.92-1.45 1.55-.34-.49-.73-.88-1.13-1.24L9.46 13.6c.93.85 1.54 1.54 1.54 3.4v5h2v-5c0-2.02.71-2.66 1.79-3.63 1.38-1.24 3.08-2.78 3.2-7.37z"})),fU=oi(q.jsx("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"})),pU=oi(q.jsx("path",{d:"m22.7 19-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4"})),qA=oi(q.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),mU=oi(q.jsx("path",{d:"m21.41 10.59-7.99-8c-.78-.78-2.05-.78-2.83 0l-8.01 8c-.78.78-.78 2.05 0 2.83l8.01 8c.78.78 2.05.78 2.83 0l7.99-8c.79-.79.79-2.05 0-2.83M13.5 14.5V12H10v3H8v-4c0-.55.45-1 1-1h4.5V7.5L17 11z"})),gU=oi(q.jsx("path",{d:"M20 21c-1.39 0-2.78-.47-4-1.32-2.44 1.71-5.56 1.71-8 0C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 2.52 1.29 5.48 1.29 8 0 1.26.65 2.62.99 4 .99h2v-2zM3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78zM6 6h12v3.97L12 8 6 9.97z"})),yU=oi(q.jsx("path",{d:"M20 9H4v2h16zM4 15h16v-2H4z"})),vU=oi([q.jsx("path",{d:"M13.95 13H9V8.05l5.61-5.61C13.78 2.16 12.9 2 12 2c-4.2 0-8 3.22-8 8.2 0 3.32 2.67 7.25 8 11.8 5.33-4.55 8-8.48 8-11.8 0-1.01-.16-1.94-.45-2.8z"},"0"),q.jsx("path",{d:"M11 11h2.12l6.16-6.16-2.12-2.12L11 8.88zm9.71-9L20 1.29c-.2-.19-.45-.29-.71-.29-.13 0-.48.07-.71.29l-.72.72 2.12 2.12.72-.72c.4-.39.4-1.02.01-1.41"},"1")]),_U=oi(q.jsx("path",{d:"M12 2c-4.2 0-8 3.22-8 8.2 0 3.32 2.67 7.25 8 11.8 5.33-4.55 8-8.48 8-11.8C20 5.22 16.2 2 12 2m0 10c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"})),xU=oi(q.jsx("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5m0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5M7 19h14v-2H7zm0-6h14v-2H7zm0-8v2h14V5z"})),bU=oi(q.jsx("path",{d:"m12 5.69 5 4.5V18h-2v-6H9v6H7v-7.81zM12 3 2 12h3v8h6v-6h2v6h6v-8h3z"})),wU=oi(q.jsx("path",{d:"M7 13c1.66 0 3-1.34 3-3S8.66 7 7 7s-3 1.34-3 3 1.34 3 3 3m12-6h-8v7H3V5H1v15h2v-3h18v3h2v-9c0-2.21-1.79-4-4-4"})),SU=oi(q.jsx("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"})),CU=oi(q.jsx("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"})),TU=oi([q.jsx("path",{d:"M6 17.59 7.41 19 12 14.42 16.59 19 18 17.59l-6-6z"},"0"),q.jsx("path",{d:"m6 11 1.41 1.41L12 7.83l4.59 4.58L18 11l-6-6z"},"1")]),MU=oi(q.jsx("path",{d:"m19.77 7.23.01-.01-3.72-3.72L15 4.56l2.11 2.11c-.94.36-1.61 1.26-1.61 2.33 0 1.38 1.12 2.5 2.5 2.5.36 0 .69-.08 1-.21v7.21c0 .55-.45 1-1 1s-1-.45-1-1V14c0-1.1-.9-2-2-2h-1V5c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2v16h10v-7.5h1.5v5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V9c0-.69-.28-1.32-.73-1.77M12 10H6V5h6zm6 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"})),HA=oi(q.jsx("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m13.5-9 1.96 2.5H17V9.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"})),PU=oi(q.jsx("path",{d:"M15 11V5l-3-3-3 3v2H3v14h18V11zm-8 8H5v-2h2zm0-4H5v-2h2zm0-4H5V9h2zm6 8h-2v-2h2zm0-4h-2v-2h2zm0-4h-2V9h2zm0-4h-2V5h2zm6 12h-2v-2h2zm0-4h-2v-2h2z"})),EU=oi(q.jsx("path",{d:"M12 2 4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"})),IU=oi(q.jsx("path",{d:"m12 7.27 4.28 10.43-3.47-1.53-.81-.36-.81.36-3.47 1.53zM12 2 4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"})),kU=oi(q.jsx("path",{d:"M2 18v4h3v-2h5.5v2h3v-2H19v2h3v-4zM18 2H6c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1m-3 6H9V6h6z"})),AU=oi([q.jsx("circle",{cx:"10",cy:"8",r:"4"},"0"),q.jsx("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99m9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"},"1")]),RU=oi(q.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"})),DU=oi(q.jsx("path",{d:"M12 12c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m6-1.8C18 6.57 15.35 4 12 4s-6 2.57-6 6.2c0 2.34 1.95 5.44 6 9.14 4.05-3.7 6-6.8 6-9.14M12 2c4.2 0 8 3.22 8 8.2 0 3.32-2.67 7.25-8 11.8-5.33-4.55-8-8.48-8-11.8C4 5.22 7.8 2 12 2"})),uS=oi(q.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})),zU=oi(q.jsx("path",{d:"M15 4c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6M3 12c0-2.61 1.67-4.83 4-5.65V4.26C3.55 5.15 1 8.27 1 12s2.55 6.85 6 7.74v-2.09c-2.33-.82-4-3.04-4-5.65"})),OU=oi(q.jsx("path",{d:"m20.55 5.22-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.15.55L3.46 5.22C3.17 5.57 3 6.01 3 6.5V19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.49-.17-.93-.45-1.28M12 9.5l5.5 5.5H14v2h-4v-2H6.5zM5.12 5l.82-1h12l.93 1z"}));class No extends Error{constructor(t){super("unreachable value "+JSON.stringify(t))}}class Qs{static checkArgument(t,i){if(!t)throw new Error(i)}static checkState(t,i){if(!t)throw new Error(i)}static checkExists(t,i){return ea(t,i)}}var Lp=(e=>(e[e.COMPANY=0]="COMPANY",e[e.FUEL=1]="FUEL",e[e.REST=2]="REST",e[e.SERVICE=3]="SERVICE",e[e.DEALER=4]="DEALER",e[e.RECRUITING=5]="RECRUITING",e))(Lp||{}),F_=(e=>(e[e.NEARBY=0]="NEARBY",e[e.ROUTE=1]="ROUTE",e))(F_||{}),fr=(e=>(e[e.THROUGH=0]="THROUGH",e[e.SLIGHT_LEFT=1]="SLIGHT_LEFT",e[e.LEFT=2]="LEFT",e[e.SHARP_LEFT=3]="SHARP_LEFT",e[e.U_TURN_LEFT=4]="U_TURN_LEFT",e[e.SLIGHT_RIGHT=11]="SLIGHT_RIGHT",e[e.RIGHT=12]="RIGHT",e[e.SHARP_RIGHT=13]="SHARP_RIGHT",e[e.U_TURN_RIGHT=14]="U_TURN_RIGHT",e[e.MERGE=-1]="MERGE",e[e.DEPART=-2]="DEPART",e[e.ARRIVE=-3]="ARRIVE",e[e.FERRY=-4]="FERRY",e))(fr||{});const p1=e=>{const{branches:t,activeBranch:i,highlightColor:a="#000",dimColor:c="#ccc"}=e,h=[...t].sort((I,R)=>I===i?1:R===i?-1:0),f=h.some(I=>0<Number(I)&&Number(I)<10),o=h.some(I=>Number(I)>=10),x=h.length===1?"single":f&&!o?"left":o&&!f?"right":"left-and-right",P=h.map((I,R)=>{switch(I){case fr.THROUGH:{let D,$;switch(x){case"single":D=0;break;case"left-and-right":$=-1;break;case"left":D=2,$=-1;break;case"right":D=-2,$=-1;break;default:throw new No(x)}return q.jsx(LU,{offsetX:D,offsetY:$,color:I===i?a:c},R)}case fr.SLIGHT_LEFT:case fr.SLIGHT_RIGHT:{let D,$,G;const j=fr.SLIGHT_LEFT&&t.includes(fr.LEFT)||fr.SLIGHT_RIGHT&&t.includes(fr.RIGHT);switch(x){case"single":D=0;break;case"left-and-right":{D=I===fr.SLIGHT_LEFT?-2:2,$=t.includes(fr.THROUGH)?void 0:j?10:9;break}case"left":case"right":$=t.includes(fr.THROUGH)?void 0:9;break;default:throw new No(x)}return q.jsx(FU,{offsetX:D,stemLength:$,angleLeg:G,orientation:I===fr.SLIGHT_LEFT?"left":"right",color:I===i?a:c},R)}case fr.LEFT:case fr.RIGHT:{let D,$,G,j;const V=I===fr.LEFT&&t.includes(fr.SLIGHT_LEFT)||I===fr.RIGHT&&t.includes(fr.SLIGHT_RIGHT);switch(x){case"single":D=0;break;case"left-and-right":D=I===fr.LEFT?-4:4,$=V?9:10,G=10,j=t.includes(fr.THROUGH)?4:void 0;break;case"left":case"right":D=x==="left"?-2:2,$=V?9:10,G=10,j=t.includes(fr.THROUGH)?4:void 0;break;default:throw new No(x)}return q.jsx(BU,{offsetX:D,stemLength:$,endLength:G,radius:j,orientation:I===fr.LEFT?"left":"right",color:I===i?a:c},R)}case fr.SHARP_LEFT:case fr.SHARP_RIGHT:{let D,$,G;const j=I===fr.SHARP_LEFT&&t.includes(fr.SLIGHT_LEFT)||I===fr.SHARP_RIGHT&&t.includes(fr.SLIGHT_RIGHT);switch(x){case"single":D=0,$=11,G=9,j||$++;break;case"left-and-right":D=I===fr.SHARP_LEFT?-2:2,(I===fr.SHARP_LEFT&&!t.includes(fr.LEFT)||I===fr.SHARP_RIGHT&&!t.includes(fr.RIGHT))&&($=9,G=8),j||($=$==null?9:$+1);break;case"left":case"right":t.length===2&&t.includes(fr.THROUGH)&&($=10,G=9),j||($=$==null?9:$+1);break;default:throw new No(x)}return q.jsx($U,{offsetX:D,stemLength:$,angleLeg:G,orientation:I===fr.SHARP_LEFT?"left":"right",color:I===i?a:c},R)}case fr.U_TURN_LEFT:case fr.U_TURN_RIGHT:{let D,$,G,j,V;const se=I===fr.U_TURN_LEFT&&t.includes(fr.LEFT)||I===fr.U_TURN_RIGHT&&t.includes(fr.RIGHT);switch(x){case"single":break;case"left-and-right":D=I===fr.U_TURN_LEFT?-5:5,G=6,V=4,j=3.5,$=-1,se&&(j--,V+=2);break;case"left":case"right":D=I===fr.U_TURN_LEFT?-3:3,$=-1,G=6,V=4,j=3.5,se&&(j--,V+=2);break;default:throw new No(x)}return q.jsx(jU,{offsetX:D,offsetY:$,stemLength:G,radius:j,endLength:V,orientation:I===fr.U_TURN_LEFT?"left":"right",color:I===i?a:c},R)}case fr.MERGE:return Np(t.length===1,"MERGE must appear alone"),q.jsx(NU,{color:I===i?a:c},R);case fr.DEPART:return Np(t.length===1,"DEPART must appear alone"),q.jsx(TU,{viewBox:"-5 -5 34 34",style:{fill:c}},R);case fr.ARRIVE:return Np(t.length===1,"ARRIVE must appear alone"),q.jsx(DU,{viewBox:"-5 -5 34 34",style:{fill:c}},R);case fr.FERRY:return Np(t.length===1,"FERRY must appear alone"),q.jsx(gU,{viewBox:"-5 -5 34 34",style:{fill:c}},R);default:throw new No(I)}});return q.jsxs("svg",{viewBox:"0 0 24 24",children:[q.jsx("defs",{children:q.jsx("g",{id:"arrow","transform-origin":"0 0",transform:"translate(0,1.414) rotate(135) ",children:q.jsx("path",{fill:"none",strokeWidth:"2",d:"M0,-4 0,0 4,0"})})}),P]})},LU=e=>{const t=[12,21],{color:i="black",orientation:a="left",offsetX:c=0,offsetY:h=0,stemLength:f=18}=e,o=[t[0],t[1]-f];return q.jsxs("g",{stroke:i,"transform-origin":"12 12",transform:`translate(${c}, ${h})scale(${a==="left"?"":"-"}1, 1)`,children:[q.jsx("path",{fill:"none",strokeWidth:"2",d:`M${t.join()} v-${f-1.414}`}),q.jsx("use",{href:"#arrow",x:o[0],y:o[1]})]})},FU=e=>{const t=[14,20],{color:i="black",orientation:a="left",offsetX:c=0,offsetY:h=0,stemLength:f=8,angleLeg:o=8}=e,x=[t[0]-o,t[1]-f-o];return q.jsxs("g",{stroke:i,"transform-origin":"12 12",transform:`translate(${c}, ${h})scale(${a==="left"?"":"-"}1, 1)`,children:[q.jsx("path",{fill:"none",strokeWidth:"2",strokeLinejoin:"round",d:`M${t.join()}v-${f}l-${o-1.414},-${o-1.414}`}),q.jsx("use",{href:"#arrow","transform-origin":x.join(" "),transform:"rotate(-45)",x:x[0],y:x[1]})]})},BU=e=>{const t=[16,20],{color:i="black",orientation:a="left",offsetX:c=0,offsetY:h=0,stemLength:f=10,radius:o=1,endLength:x=12}=e,P=[t[0]-x,t[1]-f];return q.jsxs("g",{stroke:i,"transform-origin":"12 12",transform:`translate(${c}, ${h})scale(${a==="left"?"":"-"}1, 1)`,children:[q.jsx("path",{fill:"none",strokeWidth:"2",d:`M${t.join()}v-${f-o}a${o} ${o} 0 0 0 -${o},-${o}h-${x-o-1.414}`}),q.jsx("use",{href:"#arrow",x:P[0],y:P[1],"transform-origin":P.join(" "),transform:"rotate(-90)"})]})},$U=e=>{const t=[14,20],{color:i="black",orientation:a="left",offsetX:c=0,offsetY:h=0,stemLength:f=8,angleLeg:o=8}=e,x=[t[0]-o,t[1]-f+o];return q.jsxs("g",{stroke:i,"transform-origin":"12 12",transform:`translate(${c}, ${h})scale(${a==="left"?"":"-"}1, 1)`,children:[q.jsx("path",{fill:"none",strokeWidth:"2",strokeLinejoin:"round",d:`M${t.join()}v-${f}l-${o-1.414},${o-1.414}`}),q.jsx("use",{href:"#arrow",x:x[0],y:x[1],"transform-origin":x.join(" "),transform:"rotate(-135)"})]})},jU=e=>{const t=[17,21],{color:i="black",orientation:a="left",offsetX:c=0,offsetY:h=0,stemLength:f=12,radius:o=5,endLength:x=8}=e,P=[t[0]-o*2,t[1]-f+x];return q.jsxs("g",{stroke:i,"transform-origin":"12 12",transform:`translate(${c}, ${h})scale(${a==="left"?"":"-"}1, 1)`,children:[q.jsx("path",{fill:"none",strokeWidth:"2",strokeLinejoin:"round",d:`M${t.join()} v-${f}a${o} ${o} 0 1 0 -${o*2},0v${x-1.414}`}),q.jsx("use",{href:"#arrow",x:P[0],y:P[1],"transform-origin":P.join(" "),transform:"rotate(180)"})]})},NU=e=>{const{color:t="black",offsetX:i=0,offsetY:a=0,stemLength:c=11,baseLeg:h=6}=e,f=[12,3];return q.jsxs("g",{stroke:t,"transform-origin":"12 12",transform:`translate(${i}, ${a})`,children:[q.jsx("path",{fill:"none",strokeWidth:"2",d:`M${f[0]},${f[1]+1.414}V${f[1]+c}l-${h},${h}m${h},-${h}l${h},${h}`}),q.jsx("use",{href:"#arrow",x:f[0],y:f[1]})]})},px=cS("hsl(151,82%,35%)"),VU=Y.memo(e=>{console.log("render Directions");const t=!!e.laneHint||!!e.thenHint,{length:i,unit:a}=e;return q.jsxs(fn,{fontSize:"0.75rem",children:[q.jsx(fn,{direction:"row",alignItems:"center",px:2,py:1,spacing:2,bgcolor:px.string(),borderRadius:t?"1em 1em 1em 0":"1em",children:q.jsxs(fn,{children:[q.jsxs(fn,{direction:"row",alignItems:"center",gap:1,children:[q.jsx(ii,{width:"6em",children:q.jsx(p1,{branches:[e.direction],dimColor:"#fff"})}),q.jsxs(Yr,{level:"h1",textColor:"#fff",textAlign:"center",display:"block",children:[i," ",a]})]}),e.banner&&q.jsx(Yr,{level:"h2",fontWeight:"normal",textColor:"#fff",children:e.banner.text})]})}),e.laneHint?q.jsx(UU,{roundBottomLeft:!e.thenHint,hint:e.laneHint}):null,e.thenHint&&q.jsx(GU,{hint:e.thenHint})]})}),UU=e=>q.jsx(ii,{children:q.jsx(fn,{display:"inline-flex",direction:"row",height:"5em",px:2,py:1,spacing:.5,divider:q.jsx(Yg,{orientation:"vertical",sx:{"--Divider-lineColor":"#fffc",height:"calc(0.75em)",alignSelf:"end",bottom:"-0.5em"}}),sx:{justifyContent:"center"},bgcolor:px.darken(.33).string(),borderRadius:`0 0 1em ${e.roundBottomLeft?"1em":0}`,children:e.hint.lanes.map(({branches:t,activeBranch:i},a)=>q.jsx(ii,{width:44,children:q.jsx(p1,{branches:t,activeBranch:i,dimColor:px.mix(cS("gray"),.5).string(),highlightColor:"#fff"})},a))})}),GU=e=>q.jsx(ii,{children:q.jsxs(fn,{display:"inline-flex",alignItems:"center",direction:"row",height:"5em",px:2,py:1,spacing:1,bgcolor:px.darken(.33).string(),borderRadius:"0 0 1em 1em",children:[q.jsx(Yr,{textColor:"#fff",level:"body-lg",children:"Then"}),q.jsx(ii,{width:"2.5em",height:"2.5em",children:q.jsx(p1,{branches:[e.hint.direction],activeBranch:e.hint.direction,highlightColor:"#fff"})})]})}),qU={light:{background:"rgba(255,255,255,0.9)",fill:"hsl(204,100%,50%)"},dark:{background:"hsl(204,100%,50%)",fill:"rgba(255,255,255,1)"}},HU=Y.forwardRef((e,t)=>{const{mode:i="light"}=e,{background:a,fill:c}=qU[i];return q.jsx(dx,{ref:t,longitude:e.longitude??0,latitude:e.latitude??0,pitchAlignment:"map",rotationAlignment:"map",children:q.jsx(ii,{sx:{width:64,height:64,display:"flex",justifyContent:"center",alignItems:"center",background:a,borderRadius:"50%",boxShadow:"0 1px 1px 1px rgba(128,128,128,.2)"},children:q.jsx(EU,{sx:{transform:"scale(2)",fill:c}})})})});function Jp(e,t={abbreviateUnits:!0,units:"imperial",forceSingular:!1}){const{abbreviateUnits:i,units:a,forceSingular:c}=t;if(a==="metric")throw new Error("metric units currently unsupported");const h=e*.0006213712;let f;if(h<=.1){const o=Math.max(1,e*3.28084),x=Math.round(o/50)*50;f={length:x,unit:i?"ft":c||x===1?"foot":"feet"}}else if(h<=1){const o=Number(h.toPrecision(1));f={length:o,unit:i?"mi":c||o===1?"mile":"miles"}}else h<=10?f={length:Number(h.toPrecision(2)),unit:i?"mi":c?"mile":"miles"}:f={length:Math.round(h),unit:i?"mi":c?"mile":"miles"};return{...f,string:`${f.length.toLocaleString(void 0,{maximumFractionDigits:2})} ${f.unit}`}}function hS(e,t={abbreviateUnits:!0,forceSingular:!1}){const{forceSingular:i}=t,a=t.abbreviateUnits?{plural:"hr",singular:"hr"}:{plural:"hours",singular:"hour"},c=t.abbreviateUnits?{plural:"min",singular:"min"}:{plural:"minutes",singular:"minute"},h=Math.floor(e/3600),f=Math.ceil(e%3600/60),o=[];h&&o.push(h===1?`1 ${a.singular}`:`${h} ${i?a.singular:a.plural}`),o.push(f===1?`1 ${c.singular}`:`${f} ${i?c.singular:c.plural}`);const x=t.abbreviateUnits?o.join(" "):o.join(", ");return{hours:h,minutes:f,string:x}}function WU(e){const t=[];if(e.laneHint?.lanes.length){const c=e.laneHint.lanes,h=c.every(x=>x.activeBranch!=null);let f=0;for(const x of c){if(x.activeBranch!=null){f++;continue}break}let o=0;for(const x of c.toReversed()){if(x.activeBranch!=null){o++;continue}break}if(h)t.push("use any lane to");else if(f>1)e.direction===fr.THROUGH?t.push("keep left to"):t.push(`use the ${f} left lanes to`);else if(o>1)e.direction===fr.THROUGH?t.push("keep right to"):t.push(`use the ${o} right lanes to`);else if(f===1)e.direction===fr.THROUGH?t.push("keep left to"):t.push("use the left lane to");else if(o===1)e.direction===fr.THROUGH?t.push("keep right to"):t.push("use the right lane to");else{const x=[];for(let P=0;P<c.length;P++)c[P].activeBranch!=null&&x.push(P);if(Np(x.length>0),x.length===1){const P=x[0]+1;P<=c.length/2?t.push(`use the ${wP(P)} lane from the left to`):t.push(`use the ${wP(c.length-P+1)} lane from the right to`)}}}let i="none";if(e.banner?.text!=null&&(i=e.banner.text.toLowerCase().startsWith("exit")?"exit":"name"),i==="exit")t.push("take"),t.push(e.banner.text.toLowerCase());else switch(e.direction){case fr.THROUGH:t.push("continue straight");break;case fr.SLIGHT_LEFT:t.push("turn slightly left");break;case fr.LEFT:t.push("turn left");break;case fr.SHARP_LEFT:t.push("turn sharply left");break;case fr.SLIGHT_RIGHT:t.push("turn slightly right");break;case fr.RIGHT:t.push("turn right");break;case fr.SHARP_RIGHT:t.push("turn sharply right");break;case fr.U_TURN_LEFT:case fr.U_TURN_RIGHT:t.push("make a U-turn");break;case fr.MERGE:t.push("merge");break;case fr.DEPART:t.push("follow the route");break;case fr.ARRIVE:t.push(`arrive at ${i!=="none"?e.banner.text:"your destination"}`);break;case fr.FERRY:t.push(`take the ferry to ${ea(e.banner).text}`);break;default:throw new No(e.direction)}i==="name"&&e.direction!==fr.ARRIVE&&e.direction!==fr.FERRY&&(t.push("onto"),t.push(e.banner.text));const a=t.join(" ");return a.charAt(0).toUpperCase()+a.slice(1)}function wP(e){const t=["th","st","nd","rd"],i=e%100;return e+(t[(i-20)%10]||t[i]||t[0])}function ZU(e,t){return t.distance<=250||e.startsWith(t.name)||e.endsWith(t.name)?0:t.distance<=1e3?1:2}function qw(e){switch(e.type){case"city":case"scenery":return`${e.label}, ${e.stateCode}`;case"company":case"landmark":case"viewpoint":case"ferry":case"train":case"dealer":case"serviceArea":{const t=ZU(e.label,e.city);switch(t){case 0:return`${e.city.name}, ${e.stateCode}`;case 1:return`near ${e.city.name}, ${e.stateCode}`;case 2:return`${e.stateName}`;default:throw new No(t)}}default:throw new No(e)}}const XU=e=>{console.log("render route controls");const{summary:{minutes:t,distance:i}}=e,[a,c]=Y.useState(!1),h=a?SU:CU,f=Y.useCallback(()=>{c(!a),e.onExpandedToggle(!a)},[a]),o=R=>()=>{R(),c(!1),e.onExpandedToggle(!1)},x=hS(t*60),P=new Date(Date.now()+t*6e4),I=new Intl.DateTimeFormat("en-US",{timeStyle:"short"}).format(P);return q.jsxs(Hv,{sx:{boxShadow:"rgba(0, 0, 0, 0.2) 0px 3px 5px -1px, rgba(0, 0, 0, 0.14) 0px 6px 10px 0px, rgba(0, 0, 0, 0.12) 0px 1px 18px 0px",borderRadius:12,pb:a?2:0,height:"100%"},children:[q.jsxs(fn,{direction:"row",spacing:2,sx:{justifyContent:"space-between",alignItems:"center"},children:[q.jsxs(fn,{alignItems:"center",children:[q.jsx(Yr,{level:"h3",fontWeight:"bold",children:I}),q.jsx(Yr,{children:"arrival"})]}),q.jsxs(fn,{alignItems:"center",children:[q.jsxs(Yr,{level:"h3",children:[x.hours,":",x.minutes<10?`0${x.minutes}`:x.minutes]}),q.jsx(Yr,{children:t<60?"minutes":"hours"})]}),q.jsxs(fn,{alignItems:"center",children:[q.jsx(Yr,{level:"h3",children:i.length}),q.jsx(Yr,{children:i.unit})]}),q.jsx(ad,{size:"lg",variant:"soft",onClick:f,children:q.jsx(h,{sx:{transform:"scale(1.25)"}})})]}),q.jsx(ii,{sx:{overflowY:"scroll"},children:q.jsx(KU,{expanded:a,onManageStopsClick:e.onManageStopsClick?o(e.onManageStopsClick):void 0,onSearchAlongRouteClick:o(e.onSearchAlongRouteClick),onRoutePreviewClick:o(e.onRoutePreviewClick),onRouteDirectionsClick:o(e.onRouteDirectionsClick),onRouteEndClick:o(e.onRouteEndClick)})})]})},KU=({expanded:e,onManageStopsClick:t,onSearchAlongRouteClick:i,onRoutePreviewClick:a,onRouteDirectionsClick:c,onRouteEndClick:h})=>{const f=Y.useRef();return Y.useEffect(()=>{e&&setTimeout(()=>{f.current?.scrollIntoView({behavior:"smooth",block:"end"})},250)},[e]),q.jsx(Yp,{in:e,children:q.jsxs(nm,{size:"lg",children:[t&&q.jsxs(q.Fragment,{children:[q.jsx(xf,{}),q.jsx(hl,{children:q.jsxs($p,{onClick:t,children:[q.jsx(Jc,{children:q.jsx(vU,{sx:{transform:"scale(1.25)"}})}),"Manage Stops"]})})]}),q.jsx(xf,{}),q.jsx(hl,{children:q.jsxs($p,{onClick:i,children:[q.jsx(Jc,{children:q.jsx(uS,{sx:{transform:"scale(1.25)"}})}),"Search along route"]})}),q.jsx(xf,{}),q.jsx(hl,{children:q.jsxs($p,{onClick:a,children:[q.jsx(Jc,{children:q.jsx(GA,{sx:{transform:"scale(1.25)"}})}),"Preview route"]})}),q.jsx(xf,{}),q.jsx(hl,{children:q.jsxs($p,{onClick:c,children:[q.jsx(Jc,{children:q.jsx(xU,{sx:{transform:"scale(1.25)"}})}),"Directions"]})}),q.jsx(xf,{}),q.jsx(Da,{sx:{mt:2},size:"lg",color:"danger",onClick:h,children:"End Route"}),q.jsx(ii,{ref:f})]})})};function YU(){const[e,t]=Y.useState({width:null,height:null}),i=Y.useRef(null);return[Y.useCallback(c=>{if(i.current&&(i.current.disconnect(),i.current=null),c?.nodeType===Node.ELEMENT_NODE){const h=new ResizeObserver(([f])=>{if(f&&f.borderBoxSize){const{inlineSize:o,blockSize:x}=f.borderBoxSize[0];t({width:o,height:x})}});h.observe(c),i.current=h}},[]),e]}const JU=e=>{const{Guidance:t,RouteControls:i,SegmentCompleteToast:a}=e,[c,{height:h}]=YU(),[f,o]=Y.useState(!1),x=(h??0)<520;return q.jsx(ii,{ref:c,height:"100%",children:q.jsxs(fn,{height:"100%",style:{transition:"all 0.5s ease",position:"relative"},justifyContent:"space-between",children:[q.jsx(ii,{sx:{pointerEvents:"auto"},children:q.jsx(sS,{in:!x||!f,appear:!1,children:q.jsx(ii,{children:q.jsx(Yp,{in:!x||!f,appear:!1,children:q.jsx(t,{})})})})}),q.jsx(ii,{sx:{pointerEvents:"auto",maxHeight:`calc(${h}px - 1em)`},children:q.jsx(i,{onExpandedToggle:o})}),q.jsx(a,{})]})})},QU=e=>q.jsxs(WB,{open:e.open,anchorOrigin:{horizontal:"center",vertical:"bottom"},sx:{flexDirection:"column",width:"100%",position:"absolute",bottom:0,pointerEvents:"auto"},children:[q.jsxs(fn,{gap:1,width:"100%",children:[q.jsx(Yr,{level:"h3",children:"You have arrived"}),q.jsxs(Yr,{level:"h4",color:"neutral",children:[e.place," ",q.jsx(Yr,{color:"neutral",children:e.placeInfo})]})]}),q.jsxs(fn,{gap:1,width:"100%",children:[!e.isFinalSegment&&q.jsx(Da,{size:"lg",onClick:e.onContinueClick,children:"Continue"}),q.jsx(Da,{size:"lg",variant:e.isFinalSegment?"solid":"outlined",onClick:e.onEndClick,children:"End Trip"})]})]});function eG(e,t){return nG(e,t,(i,a,c,h)=>[(i+c)/2,(a+h)/2])}function tG([e,t,i,a]){return eG([e,t],[i,a])}function rG(e){let t=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,h=!1;for(const f of e)h=!0,Array.isArray(f)?(t=Math.min(t,f[0]),a=Math.max(a,f[0]),i=Math.min(i,f[1]),c=Math.max(c,f[1])):(t=Math.min(t,f.x),a=Math.max(a,f.x),i=Math.min(i,f.y),c=Math.max(c,f.y));return Qs.checkArgument(h),[t,i,a,c]}function SP(e,t){let i,a;return Array.isArray(e)?(Qs.checkArgument(e.length>=2),i=e[0],a=e[1]):(i=e.x,a=e.y),t(i,a)}function nG(e,t,i){const[a,c]=SP(e,(o,x)=>[o,x]),[h,f]=SP(t,(o,x)=>[o,x]);return i(a,c,h,f)}const iG=new Set(["fastest","shortest","smallRoads"]),oG={"text-color":"hsl(42, 10%, 14%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 100%)"},sG={"text-color":"hsl(42, 10%, 24%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 100%)"},aG={"text-color":"hsl(42, 10%, 86%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 0%)"},lG={"text-color":"hsl(42, 10%, 76%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 0%)"},dS={light:{water:"#b2cdfb",land:"#f8f8f8",stateBorder:"#aaa",countryBorder:"#ccc",primaryTextPaint:oG,secondaryTextPaint:sG,hiddenRoad:"#e9e9e8",footprint:"#e9e9e8",ferryLine:"#6c90ff88",ferryLabel:"#6c80ff",ferryHalo:"#eeeeffcc",trainLine:"#aaa",trainLabel:"#555c",trainHalo:"#eefc",mapAreaOutline:"#999a"},dark:{water:"#36415d",land:"#1a1a1a",stateBorder:"#555",countryBorder:"#333",primaryTextPaint:aG,secondaryTextPaint:lG,hiddenRoad:"#404038",footprint:"#30302f88",ferryLine:"#6c90ff88",ferryLabel:"#6c80ff",ferryHalo:"#303028cc",trainLine:"#888",trainLabel:"#eeec",trainHalo:"#303028cc",mapAreaOutline:"#777a"}};var B_={exports:{}};var cG=B_.exports,CP;function uG(){return CP||(CP=1,function(e,t){(function(i,a){e.exports=a()})(cG,function(){var i={},a={};function c(f,o,x){if(a[f]=x,f==="index"){var P="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",I={};return a.shared(I),a.index(i,I),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([P],{type:"text/javascript"}))),i}}c("shared",["exports"],function(f){function o(l,r,s,d){return new(s||(s=Promise))(function(g,_){function b(z){try{E(d.next(z))}catch(F){_(F)}}function C(z){try{E(d.throw(z))}catch(F){_(F)}}function E(z){var F;z.done?g(z.value):(F=z.value,F instanceof s?F:new s(function(B){B(F)})).then(b,C)}E((d=d.apply(l,r||[])).next())})}function x(l,r){this.x=l,this.y=r}function P(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var I,R;typeof SuppressedError=="function"&&SuppressedError,x.prototype={clone(){return new x(this.x,this.y)},add(l){return this.clone()._add(l)},sub(l){return this.clone()._sub(l)},multByPoint(l){return this.clone()._multByPoint(l)},divByPoint(l){return this.clone()._divByPoint(l)},mult(l){return this.clone()._mult(l)},div(l){return this.clone()._div(l)},rotate(l){return this.clone()._rotate(l)},rotateAround(l,r){return this.clone()._rotateAround(l,r)},matMult(l){return this.clone()._matMult(l)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(l){return this.x===l.x&&this.y===l.y},dist(l){return Math.sqrt(this.distSqr(l))},distSqr(l){const r=l.x-this.x,s=l.y-this.y;return r*r+s*s},angle(){return Math.atan2(this.y,this.x)},angleTo(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith(l){return this.angleWithSep(l.x,l.y)},angleWithSep(l,r){return Math.atan2(this.x*r-this.y*l,this.x*l+this.y*r)},_matMult(l){const r=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=r,this},_add(l){return this.x+=l.x,this.y+=l.y,this},_sub(l){return this.x-=l.x,this.y-=l.y,this},_mult(l){return this.x*=l,this.y*=l,this},_div(l){return this.x/=l,this.y/=l,this},_multByPoint(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint(l){return this.x/=l.x,this.y/=l.y,this},_unit(){return this._div(this.mag()),this},_perp(){const l=this.y;return this.y=this.x,this.x=-l,this},_rotate(l){const r=Math.cos(l),s=Math.sin(l),d=s*this.x+r*this.y;return this.x=r*this.x-s*this.y,this.y=d,this},_rotateAround(l,r){const s=Math.cos(l),d=Math.sin(l),g=r.y+d*(this.x-r.x)+s*(this.y-r.y);return this.x=r.x+s*(this.x-r.x)-d*(this.y-r.y),this.y=g,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:x},x.convert=function(l){if(l instanceof x)return l;if(Array.isArray(l))return new x(+l[0],+l[1]);if(l.x!==void 0&&l.y!==void 0)return new x(+l.x,+l.y);throw new Error("Expected [x, y] or {x, y} point format")};var D=function(){if(R)return I;function l(r,s,d,g){this.cx=3*r,this.bx=3*(d-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(g-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=s,this.p2x=d,this.p2y=g}return R=1,I=l,l.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,s){if(s===void 0&&(s=1e-6),r<0)return 0;if(r>1)return 1;for(var d=r,g=0;g<8;g++){var _=this.sampleCurveX(d)-r;if(Math.abs(_)<s)return d;var b=this.sampleCurveDerivativeX(d);if(Math.abs(b)<1e-6)break;d-=_/b}var C=0,E=1;for(d=r,g=0;g<20&&(_=this.sampleCurveX(d),!(Math.abs(_-r)<s));g++)r>_?C=d:E=d,d=.5*(E-C)+C;return d},solve:function(r,s){return this.sampleCurveY(this.solveCurveX(r,s))}},I}(),$=P(D);let G,j;function V(){return G==null&&(G=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),G}function se(){if(j==null&&(j=!1,V())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let d=0;d<5*5;d++){const g=4*d;r.fillStyle=`rgb(${g},${g+1},${g+2})`,r.fillRect(d%5,Math.floor(d/5),1,1)}const s=r.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&s[d]!==d){j=!0;break}}}return j||!1}var ue=1e-6,Q=typeof Float32Array<"u"?Float32Array:Array;function de(){var l=new Q(9);return Q!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function oe(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function be(){var l=new Q(3);return Q!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function we(l){var r=l[0],s=l[1],d=l[2];return Math.sqrt(r*r+s*s+d*d)}function Ie(l,r,s){var d=new Q(3);return d[0]=l,d[1]=r,d[2]=s,d}function ke(l,r,s){return l[0]=r[0]+s[0],l[1]=r[1]+s[1],l[2]=r[2]+s[2],l}function ae(l,r,s){return l[0]=r[0]*s,l[1]=r[1]*s,l[2]=r[2]*s,l}function Ee(l,r,s){var d=r[0],g=r[1],_=r[2],b=s[0],C=s[1],E=s[2];return l[0]=g*E-_*C,l[1]=_*b-d*E,l[2]=d*C-g*b,l}var Ze,Qe=we;function vt(l,r,s){var d=r[0],g=r[1],_=r[2],b=r[3];return l[0]=s[0]*d+s[4]*g+s[8]*_+s[12]*b,l[1]=s[1]*d+s[5]*g+s[9]*_+s[13]*b,l[2]=s[2]*d+s[6]*g+s[10]*_+s[14]*b,l[3]=s[3]*d+s[7]*g+s[11]*_+s[15]*b,l}function st(){var l=new Q(4);return Q!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function He(l,r,s,d){var g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",_=Math.PI/360;r*=_,d*=_,s*=_;var b=Math.sin(r),C=Math.cos(r),E=Math.sin(s),z=Math.cos(s),F=Math.sin(d),B=Math.cos(d);switch(g){case"xyz":l[0]=b*z*B+C*E*F,l[1]=C*E*B-b*z*F,l[2]=C*z*F+b*E*B,l[3]=C*z*B-b*E*F;break;case"xzy":l[0]=b*z*B-C*E*F,l[1]=C*E*B-b*z*F,l[2]=C*z*F+b*E*B,l[3]=C*z*B+b*E*F;break;case"yxz":l[0]=b*z*B+C*E*F,l[1]=C*E*B-b*z*F,l[2]=C*z*F-b*E*B,l[3]=C*z*B+b*E*F;break;case"yzx":l[0]=b*z*B+C*E*F,l[1]=C*E*B+b*z*F,l[2]=C*z*F-b*E*B,l[3]=C*z*B-b*E*F;break;case"zxy":l[0]=b*z*B-C*E*F,l[1]=C*E*B+b*z*F,l[2]=C*z*F+b*E*B,l[3]=C*z*B-b*E*F;break;case"zyx":l[0]=b*z*B-C*E*F,l[1]=C*E*B+b*z*F,l[2]=C*z*F-b*E*B,l[3]=C*z*B+b*E*F;break;default:throw new Error("Unknown angle order "+g)}return l}function rt(){var l=new Q(2);return Q!=Float32Array&&(l[0]=0,l[1]=0),l}function Ge(l,r){var s=new Q(2);return s[0]=l,s[1]=r,s}be(),Ze=new Q(4),Q!=Float32Array&&(Ze[0]=0,Ze[1]=0,Ze[2]=0,Ze[3]=0),be(),Ie(1,0,0),Ie(0,1,0),st(),st(),de(),rt();const Ve=8192;function ut(l,r,s){return r*(Ve/(l.tileSize*Math.pow(2,s-l.tileID.overscaledZ)))}function ve(l,r){return(l%r+r)%r}function Fe(l,r,s){return l*(1-s)+r*s}function pt(l){if(l<=0)return 0;if(l>=1)return 1;const r=l*l,s=r*l;return 4*(l<.5?s:3*(l-r)+s-.75)}function Tt(l,r,s,d){const g=new $(l,r,s,d);return _=>g.solve(_)}const Ct=Tt(.25,.1,.25,1);function _t(l,r,s){return Math.min(s,Math.max(r,l))}function bt(l,r,s){const d=s-r,g=((l-r)%d+d)%d+r;return g===r?s:g}function nt(l,...r){for(const s of r)for(const d in s)l[d]=s[d];return l}let kt=1;function At(l,r,s){const d={};for(const g in l)d[g]=r.call(this,l[g],g,l);return d}function dr(l,r,s){const d={};for(const g in l)r.call(this,l[g],g,l)&&(d[g]=l[g]);return d}function ir(l){return Array.isArray(l)?l.map(ir):typeof l=="object"&&l?At(l,ir):l}const Gr={};function Tr(l){Gr[l]||(typeof console<"u"&&console.warn(l),Gr[l]=!0)}function or(l,r,s){return(s.y-l.y)*(r.x-l.x)>(r.y-l.y)*(s.x-l.x)}function qt(l){return typeof WorkerGlobalScope<"u"&&l!==void 0&&l instanceof WorkerGlobalScope}let pr=null;function Xt(l){return typeof ImageBitmap<"u"&&l instanceof ImageBitmap}const Ir="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Rr(l,r,s,d,g){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(l,{timestamp:0});try{const b=_?.format;if(!b||!b.startsWith("BGR")&&!b.startsWith("RGB"))throw new Error(`Unrecognized format ${b}`);const C=b.startsWith("BGR"),E=new Uint8ClampedArray(d*g*4);if(yield _.copyTo(E,function(z,F,B,W,X){const te=4*Math.max(-F,0),re=(Math.max(0,B)-B)*W*4+te,le=4*W,me=Math.max(0,F),Te=Math.max(0,B);return{rect:{x:me,y:Te,width:Math.min(z.width,F+W)-me,height:Math.min(z.height,B+X)-Te},layout:[{offset:re,stride:le}]}}(l,r,s,d,g)),C)for(let z=0;z<E.length;z+=4){const F=E[z];E[z]=E[z+2],E[z+2]=F}return E}finally{_.close()}})}let Br,Wr;function sn(l,r,s,d){return l.addEventListener(r,s,d),{unsubscribe:()=>{l.removeEventListener(r,s,d)}}}function On(l){return l*Math.PI/180}function Tn(l){return l/Math.PI*180}const vn={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Sr={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Dr="AbortError";class ur extends Error{constructor(r=Dr){super(r instanceof Error?r.message:r),this.name=Dr,r instanceof Error&&r.stack&&(this.stack=r.stack)}}function Zr(l){return l.name===Dr}const Ne={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ee(l){return Ne.REGISTERED_PROTOCOLS[l.substring(0,l.indexOf("://"))]}const ie="global-dispatcher";class ce extends Error{constructor(r,s,d,g){super(`AJAXError: ${s} (${r}): ${d}`),this.status=r,this.statusText=s,this.url=d,this.body=g}}const Ce=()=>qt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Be=function(l,r){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){const d=ee(l.url);if(d)return d(l,r);if(qt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,targetMapId:ie},r)}if(!(/^file:/.test(s=l.url)||/^file:/.test(Ce())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(d,g){return o(this,void 0,void 0,function*(){const _=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:Ce(),signal:g.signal});let b,C;d.type!=="json"||_.headers.has("Accept")||_.headers.set("Accept","application/json");try{b=yield fetch(_)}catch(z){throw Zr(z)?z:new ce(0,z.message,d.url,new Blob)}if(!b.ok){const z=yield b.blob();throw new ce(b.status,b.statusText,d.url,z)}C=d.type==="arrayBuffer"||d.type==="image"?b.arrayBuffer():d.type==="json"?b.json():b.text();const E=yield C;return g.signal.throwIfAborted(),{data:E,cacheControl:b.headers.get("Cache-Control"),expires:b.headers.get("Expires")}})}(l,r);if(qt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,mustQueue:!0,targetMapId:ie},r)}var s;return function(d,g){return new Promise((_,b)=>{var C;const E=new XMLHttpRequest;E.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(E.responseType="arraybuffer");for(const z in d.headers)E.setRequestHeader(z,d.headers[z]);d.type==="json"&&(E.responseType="text",!((C=d.headers)===null||C===void 0)&&C.Accept||E.setRequestHeader("Accept","application/json")),E.withCredentials=d.credentials==="include",E.onerror=()=>{b(new Error(E.statusText))},E.onload=()=>{if(!g.signal.aborted)if((E.status>=200&&E.status<300||E.status===0)&&E.response!==null){let z=E.response;if(d.type==="json")try{z=JSON.parse(E.response)}catch(F){return void b(F)}_({data:z,cacheControl:E.getResponseHeader("Cache-Control"),expires:E.getResponseHeader("Expires")})}else{const z=new Blob([E.response],{type:E.getResponseHeader("Content-Type")});b(new ce(E.status,E.statusText,d.url,z))}},g.signal.addEventListener("abort",()=>{E.abort(),b(new ur(g.signal.reason))}),E.send(d.body)})}(l,r)};function Je(l){if(!l||l.indexOf("://")<=0||l.indexOf("data:image/")===0||l.indexOf("blob:")===0)return!0;const r=new URL(l),s=window.location;return r.protocol===s.protocol&&r.host===s.host}function Ye(l,r,s){s[l]&&s[l].indexOf(r)!==-1||(s[l]=s[l]||[],s[l].push(r))}function Ue(l,r,s){if(s&&s[l]){const d=s[l].indexOf(r);d!==-1&&s[l].splice(d,1)}}class Ke{constructor(r,s={}){nt(this,s),this.type=r}}class gt extends Ke{constructor(r,s={}){super("error",nt({error:r},s))}}class et{on(r,s){return this._listeners=this._listeners||{},Ye(r,s,this._listeners),{unsubscribe:()=>{this.off(r,s)}}}off(r,s){return Ue(r,s,this._listeners),Ue(r,s,this._oneTimeListeners),this}once(r,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Ye(r,s,this._oneTimeListeners),this):new Promise(d=>this.once(r,d))}fire(r,s){typeof r=="string"&&(r=new Ke(r,s||{}));const d=r.type;if(this.listens(d)){r.target=this;const g=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const C of g)C.call(this,r);const _=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const C of _)Ue(d,C,this._oneTimeListeners),C.call(this,r);const b=this._eventedParent;b&&(nt(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(r))}else r instanceof gt&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,s){return this._eventedParent=r,this._eventedParentData=s,this}}var Ae={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const Ut=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function mr(l,r){const s={};for(const d in l)d!=="ref"&&(s[d]=l[d]);return Ut.forEach(d=>{d in r&&(s[d]=r[d])}),s}function Zt(l,r){if(Array.isArray(l)){if(!Array.isArray(r)||l.length!==r.length)return!1;for(let s=0;s<l.length;s++)if(!Zt(l[s],r[s]))return!1;return!0}if(typeof l=="object"&&l!==null&&r!==null){if(typeof r!="object"||Object.keys(l).length!==Object.keys(r).length)return!1;for(const s in l)if(!Zt(l[s],r[s]))return!1;return!0}return l===r}function Yt(l,r){l.push(r)}function rr(l,r,s){Yt(s,{command:"addSource",args:[l,r[l]]})}function vr(l,r,s){Yt(r,{command:"removeSource",args:[l]}),s[l]=!0}function kr(l,r,s,d){vr(l,s,d),rr(l,r,s)}function nn(l,r,s){let d;for(d in l[s])if(Object.prototype.hasOwnProperty.call(l[s],d)&&d!=="data"&&!Zt(l[s][d],r[s][d]))return!1;for(d in r[s])if(Object.prototype.hasOwnProperty.call(r[s],d)&&d!=="data"&&!Zt(l[s][d],r[s][d]))return!1;return!0}function Xr(l,r,s,d,g,_){l=l||{},r=r||{};for(const b in l)Object.prototype.hasOwnProperty.call(l,b)&&(Zt(l[b],r[b])||s.push({command:_,args:[d,b,r[b],g]}));for(const b in r)Object.prototype.hasOwnProperty.call(r,b)&&!Object.prototype.hasOwnProperty.call(l,b)&&(Zt(l[b],r[b])||s.push({command:_,args:[d,b,r[b],g]}))}function wn(l){return l.id}function on(l,r){return l[r.id]=r,l}class Mt{constructor(r,s,d,g){this.message=(r?`${r}: `:"")+d,g&&(this.identifier=g),s!=null&&s.__line__&&(this.line=s.__line__)}}function Fr(l,...r){for(const s of r)for(const d in s)l[d]=s[d];return l}class en extends Error{constructor(r,s){super(s),this.message=s,this.key=r}}class Io{constructor(r,s=[]){this.parent=r,this.bindings={};for(const[d,g]of s)this.bindings[d]=g}concat(r){return new Io(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Ti={kind:"null"},Ot={kind:"number"},it={kind:"string"},tt={kind:"boolean"},Ht={kind:"color"},Mr={kind:"projectionDefinition"},Ur={kind:"object"},sr={kind:"value"},An={kind:"collator"},Vi={kind:"formatted"},La={kind:"padding"},yl={kind:"colorArray"},Un={kind:"numberArray"},vl={kind:"resolvedImage"},na={kind:"variableAnchorOffsetCollection"};function Zi(l,r){return{kind:"array",itemType:l,N:r}}function an(l){if(l.kind==="array"){const r=an(l.itemType);return typeof l.N=="number"?`array<${r}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${r}>`}return l.kind}const lc=[Ti,Ot,it,tt,Ht,Mr,Vi,Ur,Zi(sr),La,Un,yl,vl,na];function Pr(l,r){if(r.kind==="error")return null;if(l.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Pr(l.itemType,r.itemType))&&(typeof l.N!="number"||l.N===r.N))return null}else{if(l.kind===r.kind)return null;if(l.kind==="value"){for(const s of lc)if(!Pr(s,r))return null}}return`Expected ${an(l)} but found ${an(r)} instead.`}function Mi(l,r){return r.some(s=>s.kind===l.kind)}function ln(l,r){return r.some(s=>s==="null"?l===null:s==="array"?Array.isArray(l):s==="object"?l&&!Array.isArray(l)&&typeof l=="object":s===typeof l)}function hi(l,r){return l.kind==="array"&&r.kind==="array"?l.itemType.kind===r.itemType.kind&&typeof l.N=="number":l.kind===r.kind}const Pi=.96422,zs=.82521,os=4/29,gn=6/29,dh=3*gn*gn,fh=gn*gn*gn,Fa=Math.PI/180,ph=180/Math.PI;function dm(l){return(l%=360)<0&&(l+=360),l}function fm([l,r,s,d]){let g,_;const b=dd((.2225045*(l=uu(l))+.7168786*(r=uu(r))+.0606169*(s=uu(s)))/1);l===r&&r===s?g=_=b:(g=dd((.4360747*l+.3850649*r+.1430804*s)/Pi),_=dd((.0139322*l+.0971045*r+.7141733*s)/zs));const C=116*b-16;return[C<0?0:C,500*(g-b),200*(b-_),d]}function uu(l){return l<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function dd(l){return l>fh?Math.pow(l,1/3):l/dh+os}function mh([l,r,s,d]){let g=(l+16)/116,_=isNaN(r)?g:g+r/500,b=isNaN(s)?g:g-s/200;return g=1*Bf(g),_=Pi*Bf(_),b=zs*Bf(b),[cc(3.1338561*_-1.6168667*g-.4906146*b),cc(-.9787684*_+1.9161415*g+.033454*b),cc(.0719453*_-.2289914*g+1.4052427*b),d]}function cc(l){return(l=l<=.00304?12.92*l:1.055*Math.pow(l,1/2.4)-.055)<0?0:l>1?1:l}function Bf(l){return l>gn?l*l*l:dh*(l-os)}const $f=Object.hasOwn||function(l,r){return Object.prototype.hasOwnProperty.call(l,r)};function pn(l,r){return $f(l,r)?l[r]:void 0}function gh(l){return parseInt(l.padEnd(2,l),16)/255}function jf(l,r){return _l(r?l/100:l,0,1)}function _l(l,r,s){return Math.min(Math.max(r,l),s)}function fd(l){return!l.some(Number.isNaN)}const hu={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Ba(l,r,s){return l+s*(r-l)}function xl(l,r,s){return l.map((d,g)=>Ba(d,r[g],s))}class $r{constructor(r,s,d,g=1,_=!0){this.r=r,this.g=s,this.b=d,this.a=g,_||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[r,s,d,g]))}static parse(r){if(r instanceof $r)return r;if(typeof r!="string")return;const s=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=pn(hu,d);if(g){const[b,C,E]=g;return[b/255,C/255,E/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const b=d.length<6?1:2;let C=1;return[gh(d.slice(C,C+=b)),gh(d.slice(C,C+=b)),gh(d.slice(C,C+=b)),gh(d.slice(C,C+b)||"ff")]}if(d.startsWith("rgb")){const b=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[C,E,z,F,B,W,X,te,re,le,me,Te]=b,pe=[F||" ",X||" ",le].join("");if(pe==="  "||pe==="  /"||pe===",,"||pe===",,,"){const ye=[z,W,re].join(""),De=ye==="%%%"?100:ye===""?255:0;if(De){const je=[_l(+E/De,0,1),_l(+B/De,0,1),_l(+te/De,0,1),me?jf(+me,Te):1];if(fd(je))return je}}return}}const _=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[b,C,E,z,F,B,W,X,te]=_,re=[E||" ",F||" ",W].join("");if(re==="  "||re==="  /"||re===",,"||re===",,,"){const le=[+C,_l(+z,0,100),_l(+B,0,100),X?jf(+X,te):1];if(fd(le))return function([me,Te,pe,ye]){function De(je){const ot=(je+me/30)%12,xt=Te*Math.min(pe,1-pe);return pe-xt*Math.max(-1,Math.min(ot-3,9-ot,1))}return me=dm(me),Te/=100,pe/=100,[De(0),De(8),De(4),ye]}(le)}}}(r);return s?new $r(...s,!1):void 0}get rgb(){const{r,g:s,b:d,a:g}=this,_=g||1/0;return this.overwriteGetter("rgb",[r/_,s/_,d/_,g])}get hcl(){return this.overwriteGetter("hcl",function(r){const[s,d,g,_]=fm(r),b=Math.sqrt(d*d+g*g);return[Math.round(1e4*b)?dm(Math.atan2(g,d)*ph):NaN,b,s,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",fm(this.rgb))}overwriteGetter(r,s){return Object.defineProperty(this,r,{value:s}),s}toString(){const[r,s,d,g]=this.rgb;return`rgba(${[r,s,d].map(_=>Math.round(255*_)).join(",")},${g})`}static interpolate(r,s,d,g="rgb"){switch(g){case"rgb":{const[_,b,C,E]=xl(r.rgb,s.rgb,d);return new $r(_,b,C,E,!1)}case"hcl":{const[_,b,C,E]=r.hcl,[z,F,B,W]=s.hcl;let X,te;if(isNaN(_)||isNaN(z))isNaN(_)?isNaN(z)?X=NaN:(X=z,C!==1&&C!==0||(te=F)):(X=_,B!==1&&B!==0||(te=b));else{let pe=z-_;z>_&&pe>180?pe-=360:z<_&&_-z>180&&(pe+=360),X=_+d*pe}const[re,le,me,Te]=function([pe,ye,De,je]){return pe=isNaN(pe)?0:pe*Fa,mh([De,Math.cos(pe)*ye,Math.sin(pe)*ye,je])}([X,te??Ba(b,F,d),Ba(C,B,d),Ba(E,W,d)]);return new $r(re,le,me,Te,!1)}case"lab":{const[_,b,C,E]=mh(xl(r.lab,s.lab,d));return new $r(_,b,C,E,!1)}}}}$r.black=new $r(0,0,0,1),$r.white=new $r(1,1,1,1),$r.transparent=new $r(0,0,0,0),$r.red=new $r(1,0,0,1);class ia{constructor(r,s,d){this.sensitivity=r?s?"variant":"case":s?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,s){return this.collator.compare(r,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const bl=["bottom","center","top"];class oa{constructor(r,s,d,g,_,b){this.text=r,this.image=s,this.scale=d,this.fontStack=g,this.textColor=_,this.verticalAlign=b}}class Xi{constructor(r){this.sections=r}static fromString(r){return new Xi([new oa(r,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof Xi?r:Xi.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class zi{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof zi)return r;if(typeof r=="number")return new zi([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const s of r)if(typeof s!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new zi(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,s,d){return new zi(xl(r.values,s.values,d))}}class _n{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof _n)return r;if(typeof r=="number")return new _n([r]);if(Array.isArray(r)){for(const s of r)if(typeof s!="number")return;return new _n(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,s,d){return new _n(xl(r.values,s.values,d))}}class Cr{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Cr)return r;if(typeof r=="string"){const d=$r.parse(r);return d?new Cr([d]):void 0}if(!Array.isArray(r))return;const s=[];for(const d of r){if(typeof d!="string")return;const g=$r.parse(d);if(!g)return;s.push(g)}return new Cr(s)}toString(){return JSON.stringify(this.values)}static interpolate(r,s,d,g="rgb"){const _=[];if(r.values.length!=s.values.length)throw new Error(`colorArray: Arrays have mismatched length (${r.values.length} vs. ${s.values.length}), cannot interpolate.`);for(let b=0;b<r.values.length;b++)_.push($r.interpolate(r.values[b],s.values[b],d,g));return new Cr(_)}}class Mn extends Error{constructor(r){super(r),this.name="RuntimeError"}toJSON(){return this.message}}const ms=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ko{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof ko)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let s=0;s<r.length;s+=2){const d=r[s],g=r[s+1];if(typeof d!="string"||!ms.has(d)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new ko(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,s,d){const g=r.values,_=s.values;if(g.length!==_.length)throw new Mn(`Cannot interpolate values of different length. from: ${r.toString()}, to: ${s.toString()}`);const b=[];for(let C=0;C<g.length;C+=2){if(g[C]!==_[C])throw new Mn(`Cannot interpolate values containing mismatched anchors. from[${C}]: ${g[C]}, to[${C}]: ${_[C]}`);b.push(g[C]);const[E,z]=g[C+1],[F,B]=_[C+1];b.push([Ba(E,F,d),Ba(z,B,d)])}return new ko(b)}}class Vo{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new Vo({name:r,available:!1}):null}}class Ki{constructor(r,s,d){this.from=r,this.to=s,this.transition=d}static interpolate(r,s,d){return new Ki(r,s,d)}static parse(r){return r instanceof Ki?r:Array.isArray(r)&&r.length===3&&typeof r[0]=="string"&&typeof r[1]=="string"&&typeof r[2]=="number"?new Ki(r[0],r[1],r[2]):typeof r=="object"&&typeof r.from=="string"&&typeof r.to=="string"&&typeof r.transition=="number"?new Ki(r.from,r.to,r.transition):typeof r=="string"?new Ki(r,r,1):void 0}}function uc(l,r,s,d){return typeof l=="number"&&l>=0&&l<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof s=="number"&&s>=0&&s<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[l,r,s,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[l,r,s,d]:[l,r,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function wl(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof Ki||l instanceof $r||l instanceof ia||l instanceof Xi||l instanceof zi||l instanceof _n||l instanceof Cr||l instanceof ko||l instanceof Vo)return!0;if(Array.isArray(l)){for(const r of l)if(!wl(r))return!1;return!0}if(typeof l=="object"){for(const r in l)if(!wl(l[r]))return!1;return!0}return!1}function Gn(l){if(l===null)return Ti;if(typeof l=="string")return it;if(typeof l=="boolean")return tt;if(typeof l=="number")return Ot;if(l instanceof $r)return Ht;if(l instanceof Ki)return Mr;if(l instanceof ia)return An;if(l instanceof Xi)return Vi;if(l instanceof zi)return La;if(l instanceof _n)return Un;if(l instanceof Cr)return yl;if(l instanceof ko)return na;if(l instanceof Vo)return vl;if(Array.isArray(l)){const r=l.length;let s;for(const d of l){const g=Gn(d);if(s){if(s===g)continue;s=sr;break}s=g}return Zi(s||sr,r)}return Ur}function Os(l){const r=typeof l;return l===null?"":r==="string"||r==="number"||r==="boolean"?String(l):l instanceof $r||l instanceof Ki||l instanceof Xi||l instanceof zi||l instanceof _n||l instanceof Cr||l instanceof ko||l instanceof Vo?l.toString():JSON.stringify(l)}class Ao{constructor(r,s){this.type=r,this.value=s}static parse(r,s){if(r.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!wl(r[1]))return s.error("invalid value");const d=r[1];let g=Gn(d);const _=s.expectedType;return g.kind!=="array"||g.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(g=_),new Ao(g,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const hc={string:it,number:Ot,boolean:tt,object:Ur};class Uo{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");let d,g=1;const _=r[0];if(_==="array"){let C,E;if(r.length>2){const z=r[1];if(typeof z!="string"||!(z in hc)||z==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);C=hc[z],g++}else C=sr;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return s.error('The length argument to "array" must be a positive integer literal',2);E=r[2],g++}d=Zi(C,E)}else{if(!hc[_])throw new Error(`Types doesn't contain name = ${_}`);d=hc[_]}const b=[];for(;g<r.length;g++){const C=s.parse(r[g],g,sr);if(!C)return null;b.push(C)}return new Uo(d,b)}evaluate(r){for(let s=0;s<this.args.length;s++){const d=this.args[s].evaluate(r);if(!Pr(this.type,Gn(d)))return d;if(s===this.args.length-1)throw new Mn(`Expected value to be of type ${an(this.type)}, but found ${an(Gn(d))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const dc={"to-boolean":tt,"to-color":Ht,"to-number":Ot,"to-string":it};class Ls{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const d=r[0];if(!dc[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&r.length!==2)return s.error("Expected one argument.");const g=dc[d],_=[];for(let b=1;b<r.length;b++){const C=s.parse(r[b],b,sr);if(!C)return null;_.push(C)}return new Ls(g,_)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let s,d;for(const g of this.args){if(s=g.evaluate(r),d=null,s instanceof $r)return s;if(typeof s=="string"){const _=r.parseColor(s);if(_)return _}else if(Array.isArray(s)&&(d=s.length<3||s.length>4?`Invalid rgba value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:uc(s[0],s[1],s[2],s[3]),!d))return new $r(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Mn(d||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const d of this.args){s=d.evaluate(r);const g=zi.parse(s);if(g)return g}throw new Mn(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"numberArray":{let s;for(const d of this.args){s=d.evaluate(r);const g=_n.parse(s);if(g)return g}throw new Mn(`Could not parse numberArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"colorArray":{let s;for(const d of this.args){s=d.evaluate(r);const g=Cr.parse(s);if(g)return g}throw new Mn(`Could not parse colorArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const d of this.args){s=d.evaluate(r);const g=ko.parse(s);if(g)return g}throw new Mn(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const d of this.args){if(s=d.evaluate(r),s===null)return 0;const g=Number(s);if(!isNaN(g))return g}throw new Mn(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return Xi.fromString(Os(this.args[0].evaluate(r)));case"resolvedImage":return Vo.fromString(Os(this.args[0].evaluate(r)));case"projectionDefinition":return this.args[0].evaluate(r);default:return Os(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const yh=["Unknown","Point","LineString","Polygon"];class vh{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?yh[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let s=this._parseColorCache.get(r);return s||(s=$r.parse(r),this._parseColorCache.set(r,s)),s}}class Sl{constructor(r,s,d=[],g,_=new Io,b=[]){this.registry=r,this.path=d,this.key=d.map(C=>`[${C}]`).join(""),this.scope=_,this.errors=b,this.expectedType=g,this._isConstant=s}parse(r,s,d,g,_={}){return s?this.concat(s,d,g)._parse(r,_):this._parse(r,_)}_parse(r,s){function d(g,_,b){return b==="assert"?new Uo(_,[g]):b==="coerce"?new Ls(_,[g]):g}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=r[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[g];if(_){let b=_.parse(r,this);if(!b)return null;if(this.expectedType){const C=this.expectedType,E=b.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||E.kind!=="value"){if(C.kind==="projectionDefinition"&&["string","array"].includes(E.kind)||["color","formatted","resolvedImage"].includes(C.kind)&&["value","string"].includes(E.kind)||["padding","numberArray"].includes(C.kind)&&["value","number","array"].includes(E.kind)||C.kind==="colorArray"&&["value","string","array"].includes(E.kind)||C.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(E.kind))b=d(b,C,s.typeAnnotation||"coerce");else if(this.checkSubtype(C,E))return null}else b=d(b,C,s.typeAnnotation||"assert")}if(!(b instanceof Ao)&&b.type.kind!=="resolvedImage"&&this._isConstant(b)){const C=new vh;try{b=new Ao(b.type,b.evaluate(C))}catch(E){return this.error(E.message),null}}return b}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,s,d){const g=typeof r=="number"?this.path.concat(r):this.path,_=d?this.scope.concat(d):this.scope;return new Sl(this.registry,this._isConstant,g,s||null,_,this.errors)}error(r,...s){const d=`${this.key}${s.map(g=>`[${g}]`).join("")}`;this.errors.push(new en(d,r))}checkSubtype(r,s){const d=Pr(r,s);return d&&this.error(d),d}}class cn{constructor(r,s){this.type=s.type,this.bindings=[].concat(r),this.result=s}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const s of this.bindings)r(s[1]);r(this.result)}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const d=[];for(let _=1;_<r.length-1;_+=2){const b=r[_];if(typeof b!="string")return s.error(`Expected string, but found ${typeof b} instead.`,_);if(/[^a-zA-Z0-9_]/.test(b))return s.error("Variable names must contain only alphanumeric characters or '_'.",_);const C=s.parse(r[_+1],_+1);if(!C)return null;d.push([b,C])}const g=s.parse(r[r.length-1],r.length-1,s.expectedType,d);return g?new cn(d,g):null}outputDefined(){return this.result.outputDefined()}}class Cl{constructor(r,s){this.type=s.type,this.name=r,this.boundExpression=s}static parse(r,s){if(r.length!==2||typeof r[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const d=r[1];return s.scope.has(d)?new Cl(d,s.scope.get(d)):s.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class Jr{constructor(r,s,d){this.type=r,this.index=s,this.input=d}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=s.parse(r[1],1,Ot),g=s.parse(r[2],2,Zi(s.expectedType||sr));return d&&g?new Jr(g.type.itemType,d,g):null}evaluate(r){const s=this.index.evaluate(r),d=this.input.evaluate(r);if(s<0)throw new Mn(`Array index out of bounds: ${s} < 0.`);if(s>=d.length)throw new Mn(`Array index out of bounds: ${s} > ${d.length-1}.`);if(s!==Math.floor(s))throw new Mn(`Array index must be an integer, but found ${s} instead.`);return d[s]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class jr{constructor(r,s){this.type=tt,this.needle=r,this.haystack=s}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=s.parse(r[1],1,sr),g=s.parse(r[2],2,sr);return d&&g?Mi(d.type,[tt,it,Ot,Ti,sr])?new jr(d,g):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${an(d.type)} instead`):null}evaluate(r){const s=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(!d)return!1;if(!ln(s,["boolean","string","number","null"]))throw new Mn(`Expected first argument to be of type boolean, string, number or null, but found ${an(Gn(s))} instead.`);if(!ln(d,["string","array"]))throw new Mn(`Expected second argument to be of type array or string, but found ${an(Gn(d))} instead.`);return d.indexOf(s)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class $a{constructor(r,s,d){this.type=Ot,this.needle=r,this.haystack=s,this.fromIndex=d}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 2 or 3 arguments, but found ${r.length-1} instead.`);const d=s.parse(r[1],1,sr),g=s.parse(r[2],2,sr);if(!d||!g)return null;if(!Mi(d.type,[tt,it,Ot,Ti,sr]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${an(d.type)} instead`);if(r.length===4){const _=s.parse(r[3],3,Ot);return _?new $a(d,g,_):null}return new $a(d,g)}evaluate(r){const s=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(!ln(s,["boolean","string","number","null"]))throw new Mn(`Expected first argument to be of type boolean, string, number or null, but found ${an(Gn(s))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(r)),ln(d,["string"])){const _=d.indexOf(s,g);return _===-1?-1:[...d.slice(0,_)].length}if(ln(d,["array"]))return d.indexOf(s,g);throw new Mn(`Expected second argument to be of type array or string, but found ${an(Gn(d))} instead.`)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class Qr{constructor(r,s,d,g,_,b){this.inputType=r,this.type=s,this.input=d,this.cases=g,this.outputs=_,this.otherwise=b}static parse(r,s){if(r.length<5)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return s.error("Expected an even number of arguments.");let d,g;s.expectedType&&s.expectedType.kind!=="value"&&(g=s.expectedType);const _={},b=[];for(let z=2;z<r.length-1;z+=2){let F=r[z];const B=r[z+1];Array.isArray(F)||(F=[F]);const W=s.concat(z);if(F.length===0)return W.error("Expected at least one branch label.");for(const te of F){if(typeof te!="number"&&typeof te!="string")return W.error("Branch labels must be numbers or strings.");if(typeof te=="number"&&Math.abs(te)>Number.MAX_SAFE_INTEGER)return W.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof te=="number"&&Math.floor(te)!==te)return W.error("Numeric branch labels must be integer values.");if(d){if(W.checkSubtype(d,Gn(te)))return null}else d=Gn(te);if(_[String(te)]!==void 0)return W.error("Branch labels must be unique.");_[String(te)]=b.length}const X=s.parse(B,z,g);if(!X)return null;g=g||X.type,b.push(X)}const C=s.parse(r[1],1,sr);if(!C)return null;const E=s.parse(r[r.length-1],r.length-1,g);return E?C.type.kind!=="value"&&s.concat(1).checkSubtype(d,C.type)?null:new Qr(d,g,C,_,b,E):null}evaluate(r){const s=this.input.evaluate(r);return(Gn(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class du{constructor(r,s,d){this.type=r,this.branches=s,this.otherwise=d}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return s.error("Expected an odd number of arguments.");let d;s.expectedType&&s.expectedType.kind!=="value"&&(d=s.expectedType);const g=[];for(let b=1;b<r.length-1;b+=2){const C=s.parse(r[b],b,tt);if(!C)return null;const E=s.parse(r[b+1],b+1,d);if(!E)return null;g.push([C,E]),d=d||E.type}const _=s.parse(r[r.length-1],r.length-1,d);if(!_)return null;if(!d)throw new Error("Can't infer output type");return new du(d,g,_)}evaluate(r){for(const[s,d]of this.branches)if(s.evaluate(r))return d.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[s,d]of this.branches)r(s),r(d);r(this.otherwise)}outputDefined(){return this.branches.every(([r,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class si{constructor(r,s,d,g){this.type=r,this.input=s,this.beginIndex=d,this.endIndex=g}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 2 or 3 arguments, but found ${r.length-1} instead.`);const d=s.parse(r[1],1,sr),g=s.parse(r[2],2,Ot);if(!d||!g)return null;if(!Mi(d.type,[Zi(sr),it,sr]))return s.error(`Expected first argument to be of type array or string, but found ${an(d.type)} instead`);if(r.length===4){const _=s.parse(r[3],3,Ot);return _?new si(d.type,d,g,_):null}return new si(d.type,d,g)}evaluate(r){const s=this.input.evaluate(r),d=this.beginIndex.evaluate(r);let g;if(this.endIndex&&(g=this.endIndex.evaluate(r)),ln(s,["string"]))return[...s].slice(d,g).join("");if(ln(s,["array"]))return s.slice(d,g);throw new Mn(`Expected first argument to be of type array or string, but found ${an(Gn(s))} instead.`)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function Fs(l,r){const s=l.length-1;let d,g,_=0,b=s,C=0;for(;_<=b;)if(C=Math.floor((_+b)/2),d=l[C],g=l[C+1],d<=r){if(C===s||r<g)return C;_=C+1}else{if(!(d>r))throw new Mn("Input is not a number.");b=C-1}return 0}class sa{constructor(r,s,d){this.type=r,this.input=s,this.labels=[],this.outputs=[];for(const[g,_]of d)this.labels.push(g),this.outputs.push(_)}static parse(r,s){if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");const d=s.parse(r[1],1,Ot);if(!d)return null;const g=[];let _=null;s.expectedType&&s.expectedType.kind!=="value"&&(_=s.expectedType);for(let b=1;b<r.length;b+=2){const C=b===1?-1/0:r[b],E=r[b+1],z=b,F=b+1;if(typeof C!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(g.length&&g[g.length-1][0]>=C)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const B=s.parse(E,F,_);if(!B)return null;_=_||B.type,g.push([C,B])}return new sa(_,d,g)}evaluate(r){const s=this.labels,d=this.outputs;if(s.length===1)return d[0].evaluate(r);const g=this.input.evaluate(r);if(g<=s[0])return d[0].evaluate(r);const _=s.length;return g>=s[_-1]?d[_-1].evaluate(r):d[Fs(s,g)].evaluate(r)}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function fu(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var _h,xh,Nf=function(){if(xh)return _h;function l(r,s,d,g){this.cx=3*r,this.bx=3*(d-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(g-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=s,this.p2x=d,this.p2y=g}return xh=1,_h=l,l.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,s){if(s===void 0&&(s=1e-6),r<0)return 0;if(r>1)return 1;for(var d=r,g=0;g<8;g++){var _=this.sampleCurveX(d)-r;if(Math.abs(_)<s)return d;var b=this.sampleCurveDerivativeX(d);if(Math.abs(b)<1e-6)break;d-=_/b}var C=0,E=1;for(d=r,g=0;g<20&&(_=this.sampleCurveX(d),!(Math.abs(_-r)<s));g++)r>_?C=d:E=d,d=.5*(E-C)+C;return d},solve:function(r,s){return this.sampleCurveY(this.solveCurveX(r,s))}},_h}(),pu=fu(Nf);class Yi{constructor(r,s,d,g,_){this.type=r,this.operator=s,this.interpolation=d,this.input=g,this.labels=[],this.outputs=[];for(const[b,C]of _)this.labels.push(b),this.outputs.push(C)}static interpolationFactor(r,s,d,g){let _=0;if(r.name==="exponential")_=Bs(s,r.base,d,g);else if(r.name==="linear")_=Bs(s,1,d,g);else if(r.name==="cubic-bezier"){const b=r.controlPoints;_=new pu(b[0],b[1],b[2],b[3]).solve(Bs(s,1,d,g))}return _}static parse(r,s){let[d,g,_,...b]=r;if(!Array.isArray(g)||g.length===0)return s.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const z=g[1];if(typeof z!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:z}}else{if(g[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const z=g.slice(1);if(z.length!==4||z.some(F=>typeof F!="number"||F<0||F>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:z}}}if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(_=s.parse(_,2,Ot),!_)return null;const C=[];let E=null;d!=="interpolate-hcl"&&d!=="interpolate-lab"||s.expectedType==yl?s.expectedType&&s.expectedType.kind!=="value"&&(E=s.expectedType):E=Ht;for(let z=0;z<b.length;z+=2){const F=b[z],B=b[z+1],W=z+3,X=z+4;if(typeof F!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(C.length&&C[C.length-1][0]>=F)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',W);const te=s.parse(B,X,E);if(!te)return null;E=E||te.type,C.push([F,te])}return hi(E,Ot)||hi(E,Mr)||hi(E,Ht)||hi(E,La)||hi(E,Un)||hi(E,yl)||hi(E,na)||hi(E,Zi(Ot))?new Yi(E,d,g,_,C):s.error(`Type ${an(E)} is not interpolatable.`)}evaluate(r){const s=this.labels,d=this.outputs;if(s.length===1)return d[0].evaluate(r);const g=this.input.evaluate(r);if(g<=s[0])return d[0].evaluate(r);const _=s.length;if(g>=s[_-1])return d[_-1].evaluate(r);const b=Fs(s,g),C=Yi.interpolationFactor(this.interpolation,g,s[b],s[b+1]),E=d[b].evaluate(r),z=d[b+1].evaluate(r);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Ba(E,z,C);case"color":return $r.interpolate(E,z,C);case"padding":return zi.interpolate(E,z,C);case"colorArray":return Cr.interpolate(E,z,C);case"numberArray":return _n.interpolate(E,z,C);case"variableAnchorOffsetCollection":return ko.interpolate(E,z,C);case"array":return xl(E,z,C);case"projectionDefinition":return Ki.interpolate(E,z,C)}case"interpolate-hcl":switch(this.type.kind){case"color":return $r.interpolate(E,z,C,"hcl");case"colorArray":return Cr.interpolate(E,z,C,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return $r.interpolate(E,z,C,"lab");case"colorArray":return Cr.interpolate(E,z,C,"lab")}}}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Bs(l,r,s,d){const g=d-s,_=l-s;return g===0?0:r===1?_/g:(Math.pow(r,_)-1)/(Math.pow(r,g)-1)}const Qn={color:$r.interpolate,number:Ba,padding:zi.interpolate,numberArray:_n.interpolate,colorArray:Cr.interpolate,variableAnchorOffsetCollection:ko.interpolate,array:xl};class fc{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");let d=null;const g=s.expectedType;g&&g.kind!=="value"&&(d=g);const _=[];for(const C of r.slice(1)){const E=s.parse(C,1+_.length,d,void 0,{typeAnnotation:"omit"});if(!E)return null;d=d||E.type,_.push(E)}if(!d)throw new Error("No output type");const b=g&&_.some(C=>Pr(g,C.type));return new fc(b?sr:d,_)}evaluate(r){let s,d=null,g=0;for(const _ of this.args)if(g++,d=_.evaluate(r),d&&d instanceof Vo&&!d.available&&(s||(s=d.name),d=null,g===this.args.length&&(d=s)),d!==null)break;return d}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}function Vf(l,r){return l==="=="||l==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function pc(l,r,s,d){return d.compare(r,s)===0}function di(l,r,s){const d=l!=="=="&&l!=="!=";return class WA{constructor(_,b,C){this.type=tt,this.lhs=_,this.rhs=b,this.collator=C,this.hasUntypedArgument=_.type.kind==="value"||b.type.kind==="value"}static parse(_,b){if(_.length!==3&&_.length!==4)return b.error("Expected two or three arguments.");const C=_[0];let E=b.parse(_[1],1,sr);if(!E)return null;if(!Vf(C,E.type))return b.concat(1).error(`"${C}" comparisons are not supported for type '${an(E.type)}'.`);let z=b.parse(_[2],2,sr);if(!z)return null;if(!Vf(C,z.type))return b.concat(2).error(`"${C}" comparisons are not supported for type '${an(z.type)}'.`);if(E.type.kind!==z.type.kind&&E.type.kind!=="value"&&z.type.kind!=="value")return b.error(`Cannot compare types '${an(E.type)}' and '${an(z.type)}'.`);d&&(E.type.kind==="value"&&z.type.kind!=="value"?E=new Uo(z.type,[E]):E.type.kind!=="value"&&z.type.kind==="value"&&(z=new Uo(E.type,[z])));let F=null;if(_.length===4){if(E.type.kind!=="string"&&z.type.kind!=="string"&&E.type.kind!=="value"&&z.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(F=b.parse(_[3],3,An),!F)return null}return new WA(E,z,F)}evaluate(_){const b=this.lhs.evaluate(_),C=this.rhs.evaluate(_);if(d&&this.hasUntypedArgument){const E=Gn(b),z=Gn(C);if(E.kind!==z.kind||E.kind!=="string"&&E.kind!=="number")throw new Mn(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${E.kind}, ${z.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const E=Gn(b),z=Gn(C);if(E.kind!=="string"||z.kind!=="string")return r(_,b,C)}return this.collator?s(_,b,C,this.collator.evaluate(_)):r(_,b,C)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const pm=di("==",function(l,r,s){return r===s},pc),Uf=di("!=",function(l,r,s){return r!==s},function(l,r,s,d){return!pc(0,r,s,d)}),mm=di("<",function(l,r,s){return r<s},function(l,r,s,d){return d.compare(r,s)<0}),oy=di(">",function(l,r,s){return r>s},function(l,r,s,d){return d.compare(r,s)>0}),mc=di("<=",function(l,r,s){return r<=s},function(l,r,s,d){return d.compare(r,s)<=0}),pd=di(">=",function(l,r,s){return r>=s},function(l,r,s,d){return d.compare(r,s)>=0});class mu{constructor(r,s,d){this.type=An,this.locale=d,this.caseSensitive=r,this.diacriticSensitive=s}static parse(r,s){if(r.length!==2)return s.error("Expected one argument.");const d=r[1];if(typeof d!="object"||Array.isArray(d))return s.error("Collator options argument must be an object.");const g=s.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,tt);if(!g)return null;const _=s.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,tt);if(!_)return null;let b=null;return d.locale&&(b=s.parse(d.locale,1,it),!b)?null:new mu(g,_,b)}evaluate(r){return new ia(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}class Gf{constructor(r,s,d,g,_){this.type=it,this.number=r,this.locale=s,this.currency=d,this.minFractionDigits=g,this.maxFractionDigits=_}static parse(r,s){if(r.length!==3)return s.error("Expected two arguments.");const d=s.parse(r[1],1,Ot);if(!d)return null;const g=r[2];if(typeof g!="object"||Array.isArray(g))return s.error("NumberFormat options argument must be an object.");let _=null;if(g.locale&&(_=s.parse(g.locale,1,it),!_))return null;let b=null;if(g.currency&&(b=s.parse(g.currency,1,it),!b))return null;let C=null;if(g["min-fraction-digits"]&&(C=s.parse(g["min-fraction-digits"],1,Ot),!C))return null;let E=null;return g["max-fraction-digits"]&&(E=s.parse(g["max-fraction-digits"],1,Ot),!E)?null:new Gf(d,_,b,C,E)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class bh{constructor(r){this.type=Vi,this.sections=r}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const d=r[1];if(!Array.isArray(d)&&typeof d=="object")return s.error("First argument must be an image or text section.");const g=[];let _=!1;for(let b=1;b<=r.length-1;++b){const C=r[b];if(_&&typeof C=="object"&&!Array.isArray(C)){_=!1;let E=null;if(C["font-scale"]&&(E=s.parse(C["font-scale"],1,Ot),!E))return null;let z=null;if(C["text-font"]&&(z=s.parse(C["text-font"],1,Zi(it)),!z))return null;let F=null;if(C["text-color"]&&(F=s.parse(C["text-color"],1,Ht),!F))return null;let B=null;if(C["vertical-align"]){if(typeof C["vertical-align"]=="string"&&!bl.includes(C["vertical-align"]))return s.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${C["vertical-align"]}' instead.`);if(B=s.parse(C["vertical-align"],1,it),!B)return null}const W=g[g.length-1];W.scale=E,W.font=z,W.textColor=F,W.verticalAlign=B}else{const E=s.parse(r[b],1,sr);if(!E)return null;const z=E.type.kind;if(z!=="string"&&z!=="value"&&z!=="null"&&z!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,g.push({content:E,scale:null,font:null,textColor:null,verticalAlign:null})}}return new bh(g)}evaluate(r){return new Xi(this.sections.map(s=>{const d=s.content.evaluate(r);return Gn(d)===vl?new oa("",d,null,null,null,s.verticalAlign?s.verticalAlign.evaluate(r):null):new oa(Os(d),null,s.scale?s.scale.evaluate(r):null,s.font?s.font.evaluate(r).join(","):null,s.textColor?s.textColor.evaluate(r):null,s.verticalAlign?s.verticalAlign.evaluate(r):null)}))}eachChild(r){for(const s of this.sections)r(s.content),s.scale&&r(s.scale),s.font&&r(s.font),s.textColor&&r(s.textColor),s.verticalAlign&&r(s.verticalAlign)}outputDefined(){return!1}}class Tl{constructor(r){this.type=vl,this.input=r}static parse(r,s){if(r.length!==2)return s.error("Expected two arguments.");const d=s.parse(r[1],1,it);return d?new Tl(d):s.error("No image name provided.")}evaluate(r){const s=this.input.evaluate(r),d=Vo.fromString(s);return d&&r.availableImages&&(d.available=r.availableImages.indexOf(s)>-1),d}eachChild(r){r(this.input)}outputDefined(){return!1}}class gu{constructor(r){this.type=Ot,this.input=r}static parse(r,s){if(r.length!==2)return s.error(`Expected 1 argument, but found ${r.length-1} instead.`);const d=s.parse(r[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${an(d.type)} instead.`):new gu(d):null}evaluate(r){const s=this.input.evaluate(r);if(typeof s=="string")return[...s].length;if(Array.isArray(s))return s.length;throw new Mn(`Expected value to be of type string or array, but found ${an(Gn(s))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const Oi=8192;function gm(l,r){const s=(180+l[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,g=Math.pow(2,r.z);return[Math.round(s*g*Oi),Math.round(d*g*Oi)]}function gc(l,r){const s=Math.pow(2,r.z);return[(g=(l[0]/Oi+r.x)/s,360*g-180),(d=(l[1]/Oi+r.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,g}function wh(l,r){l[0]=Math.min(l[0],r[0]),l[1]=Math.min(l[1],r[1]),l[2]=Math.max(l[2],r[0]),l[3]=Math.max(l[3],r[1])}function yc(l,r){return!(l[0]<=r[0]||l[2]>=r[2]||l[1]<=r[1]||l[3]>=r[3])}function sy(l,r,s){const d=l[0]-r[0],g=l[1]-r[1],_=l[0]-s[0],b=l[1]-s[1];return d*b-_*g==0&&d*_<=0&&g*b<=0}function md(l,r,s,d){return(g=[d[0]-s[0],d[1]-s[1]])[0]*(_=[r[0]-l[0],r[1]-l[1]])[1]-g[1]*_[0]!=0&&!(!qf(l,r,s,d)||!qf(s,d,l,r));var g,_}function ay(l,r,s){for(const d of s)for(let g=0;g<d.length-1;++g)if(md(l,r,d[g],d[g+1]))return!0;return!1}function yu(l,r,s=!1){let d=!1;for(const C of r)for(let E=0;E<C.length-1;E++){if(sy(l,C[E],C[E+1]))return s;(_=C[E])[1]>(g=l)[1]!=(b=C[E+1])[1]>g[1]&&g[0]<(b[0]-_[0])*(g[1]-_[1])/(b[1]-_[1])+_[0]&&(d=!d)}var g,_,b;return d}function gd(l,r){for(const s of r)if(yu(l,s))return!0;return!1}function yd(l,r){for(const s of l)if(!yu(s,r))return!1;for(let s=0;s<l.length-1;++s)if(ay(l[s],l[s+1],r))return!1;return!0}function vu(l,r){for(const s of r)if(yd(l,s))return!0;return!1}function qf(l,r,s,d){const g=d[0]-s[0],_=d[1]-s[1],b=(l[0]-s[0])*_-g*(l[1]-s[1]),C=(r[0]-s[0])*_-g*(r[1]-s[1]);return b>0&&C<0||b<0&&C>0}function vd(l,r,s){const d=[];for(let g=0;g<l.length;g++){const _=[];for(let b=0;b<l[g].length;b++){const C=gm(l[g][b],s);wh(r,C),_.push(C)}d.push(_)}return d}function _d(l,r,s){const d=[];for(let g=0;g<l.length;g++){const _=vd(l[g],r,s);d.push(_)}return d}function Hf(l,r,s,d){if(l[0]<s[0]||l[0]>s[2]){const g=.5*d;let _=l[0]-s[0]>g?-d:s[0]-l[0]>g?d:0;_===0&&(_=l[0]-s[2]>g?-d:s[2]-l[0]>g?d:0),l[0]+=_}wh(r,l)}function Wf(l,r,s,d){const g=Math.pow(2,d.z)*Oi,_=[d.x*Oi,d.y*Oi],b=[];for(const C of l)for(const E of C){const z=[E.x+_[0],E.y+_[1]];Hf(z,r,s,g),b.push(z)}return b}function Zf(l,r,s,d){const g=Math.pow(2,d.z)*Oi,_=[d.x*Oi,d.y*Oi],b=[];for(const E of l){const z=[];for(const F of E){const B=[F.x+_[0],F.y+_[1]];wh(r,B),z.push(B)}b.push(z)}if(r[2]-r[0]<=g/2){(C=r)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const E of b)for(const z of E)Hf(z,r,s,g)}var C;return b}class gs{constructor(r,s){this.type=tt,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(wl(r[1])){const d=r[1];if(d.type==="FeatureCollection"){const g=[];for(const _ of d.features){const{type:b,coordinates:C}=_.geometry;b==="Polygon"&&g.push(C),b==="MultiPolygon"&&g.push(...C)}if(g.length)return new gs(d,{type:"MultiPolygon",coordinates:g})}else if(d.type==="Feature"){const g=d.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new gs(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new gs(d,d)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(s,d){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],b=s.canonicalID();if(d.type==="Polygon"){const C=vd(d.coordinates,_,b),E=Wf(s.geometry(),g,_,b);if(!yc(g,_))return!1;for(const z of E)if(!yu(z,C))return!1}if(d.type==="MultiPolygon"){const C=_d(d.coordinates,_,b),E=Wf(s.geometry(),g,_,b);if(!yc(g,_))return!1;for(const z of E)if(!gd(z,C))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(s,d){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],b=s.canonicalID();if(d.type==="Polygon"){const C=vd(d.coordinates,_,b),E=Zf(s.geometry(),g,_,b);if(!yc(g,_))return!1;for(const z of E)if(!yd(z,C))return!1}if(d.type==="MultiPolygon"){const C=_d(d.coordinates,_,b),E=Zf(s.geometry(),g,_,b);if(!yc(g,_))return!1;for(const z of E)if(!vu(z,C))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let ym=class{constructor(l=[],r=(s,d)=>s<d?-1:s>d?1:0){if(this.data=l,this.length=this.data.length,this.compare=r,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:r,compare:s}=this,d=r[l];for(;l>0;){const g=l-1>>1,_=r[g];if(s(d,_)>=0)break;r[l]=_,l=g}r[l]=d}_down(l){const{data:r,compare:s}=this,d=this.length>>1,g=r[l];for(;l<d;){let _=1+(l<<1);const b=_+1;if(b<this.length&&s(r[b],r[_])<0&&(_=b),s(r[_],g)>=0)break;r[l]=r[_],l=_}r[l]=g}};function Xf(l,r,s=0,d=l.length-1,g=Kf){for(;d>s;){if(d-s>600){const E=d-s+1,z=r-s+1,F=Math.log(E),B=.5*Math.exp(2*F/3),W=.5*Math.sqrt(F*B*(E-B)/E)*(z-E/2<0?-1:1);Xf(l,r,Math.max(s,Math.floor(r-z*B/E+W)),Math.min(d,Math.floor(r+(E-z)*B/E+W)),g)}const _=l[r];let b=s,C=d;for(_u(l,s,r),g(l[d],_)>0&&_u(l,s,d);b<C;){for(_u(l,b,C),b++,C--;g(l[b],_)<0;)b++;for(;g(l[C],_)>0;)C--}g(l[s],_)===0?_u(l,s,C):(C++,_u(l,C,d)),C<=r&&(s=C+1),r<=C&&(d=C-1)}}function _u(l,r,s){const d=l[r];l[r]=l[s],l[s]=d}function Kf(l,r){return l<r?-1:l>r?1:0}function Sh(l,r){if(l.length<=1)return[l];const s=[];let d,g;for(const _ of l){const b=Th(_);b!==0&&(_.area=Math.abs(b),g===void 0&&(g=b<0),g===b<0?(d&&s.push(d),d=[_]):d.push(_))}if(d&&s.push(d),r>1)for(let _=0;_<s.length;_++)s[_].length<=r||(Xf(s[_],r,1,s[_].length-1,Ch),s[_]=s[_].slice(0,r));return s}function Ch(l,r){return r.area-l.area}function Th(l){let r=0;for(let s,d,g=0,_=l.length,b=_-1;g<_;b=g++)s=l[g],d=l[b],r+=(d.x-s.x)*(s.y+d.y);return r}const vm=1/298.257223563,Ml=vm*(2-vm),_m=Math.PI/180;class xd{constructor(r){const s=6378.137*_m*1e3,d=Math.cos(r*_m),g=1/(1-Ml*(1-d*d)),_=Math.sqrt(g);this.kx=s*_*d,this.ky=s*_*g*(1-Ml)}distance(r,s){const d=this.wrap(r[0]-s[0])*this.kx,g=(r[1]-s[1])*this.ky;return Math.sqrt(d*d+g*g)}pointOnLine(r,s){let d,g,_,b,C=1/0;for(let E=0;E<r.length-1;E++){let z=r[E][0],F=r[E][1],B=this.wrap(r[E+1][0]-z)*this.kx,W=(r[E+1][1]-F)*this.ky,X=0;B===0&&W===0||(X=(this.wrap(s[0]-z)*this.kx*B+(s[1]-F)*this.ky*W)/(B*B+W*W),X>1?(z=r[E+1][0],F=r[E+1][1]):X>0&&(z+=B/this.kx*X,F+=W/this.ky*X)),B=this.wrap(s[0]-z)*this.kx,W=(s[1]-F)*this.ky;const te=B*B+W*W;te<C&&(C=te,d=z,g=F,_=E,b=X)}return{point:[d,g],index:_,t:Math.max(0,Math.min(1,b))}}wrap(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}}function bd(l,r){return r[0]-l[0]}function xu(l){return l[1]-l[0]+1}function ys(l,r){return l[1]>=l[0]&&l[1]<r}function Mh(l,r){if(l[0]>l[1])return[null,null];const s=xu(l);if(r){if(s===2)return[l,null];const g=Math.floor(s/2);return[[l[0],l[0]+g],[l[0]+g,l[1]]]}if(s===1)return[l,null];const d=Math.floor(s/2)-1;return[[l[0],l[0]+d],[l[0]+d+1,l[1]]]}function wd(l,r){if(!ys(r,l.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let d=r[0];d<=r[1];++d)wh(s,l[d]);return s}function Yf(l){const r=[1/0,1/0,-1/0,-1/0];for(const s of l)for(const d of s)wh(r,d);return r}function Jf(l){return l[0]!==-1/0&&l[1]!==-1/0&&l[2]!==1/0&&l[3]!==1/0}function Sd(l,r,s){if(!Jf(l)||!Jf(r))return NaN;let d=0,g=0;return l[2]<r[0]&&(d=r[0]-l[2]),l[0]>r[2]&&(d=l[0]-r[2]),l[1]>r[3]&&(g=l[1]-r[3]),l[3]<r[1]&&(g=r[1]-l[3]),s.distance([0,0],[d,g])}function vc(l,r,s){const d=s.pointOnLine(r,l);return s.distance(l,d.point)}function Qf(l,r,s,d,g){const _=Math.min(vc(l,[s,d],g),vc(r,[s,d],g)),b=Math.min(vc(s,[l,r],g),vc(d,[l,r],g));return Math.min(_,b)}function $s(l,r,s,d,g){if(!ys(r,l.length)||!ys(d,s.length))return 1/0;let _=1/0;for(let b=r[0];b<r[1];++b){const C=l[b],E=l[b+1];for(let z=d[0];z<d[1];++z){const F=s[z],B=s[z+1];if(md(C,E,F,B))return 0;_=Math.min(_,Qf(C,E,F,B,g))}}return _}function bu(l,r,s,d,g){if(!ys(r,l.length)||!ys(d,s.length))return NaN;let _=1/0;for(let b=r[0];b<=r[1];++b)for(let C=d[0];C<=d[1];++C)if(_=Math.min(_,g.distance(l[b],s[C])),_===0)return _;return _}function xm(l,r,s){if(yu(l,r,!0))return 0;let d=1/0;for(const g of r){const _=g[0],b=g[g.length-1];if(_!==b&&(d=Math.min(d,vc(l,[b,_],s)),d===0))return d;const C=s.pointOnLine(g,l);if(d=Math.min(d,s.distance(l,C.point)),d===0)return d}return d}function bm(l,r,s,d){if(!ys(r,l.length))return NaN;for(let _=r[0];_<=r[1];++_)if(yu(l[_],s,!0))return 0;let g=1/0;for(let _=r[0];_<r[1];++_){const b=l[_],C=l[_+1];for(const E of s)for(let z=0,F=E.length,B=F-1;z<F;B=z++){const W=E[B],X=E[z];if(md(b,C,W,X))return 0;g=Math.min(g,Qf(b,C,W,X,d))}}return g}function ep(l,r){for(const s of l)for(const d of s)if(yu(d,r,!0))return!0;return!1}function wm(l,r,s,d=1/0){const g=Yf(l),_=Yf(r);if(d!==1/0&&Sd(g,_,s)>=d)return d;if(yc(g,_)){if(ep(l,r))return 0}else if(ep(r,l))return 0;let b=1/0;for(const C of l)for(let E=0,z=C.length,F=z-1;E<z;F=E++){const B=C[F],W=C[E];for(const X of r)for(let te=0,re=X.length,le=re-1;te<re;le=te++){const me=X[le],Te=X[te];if(md(B,W,me,Te))return 0;b=Math.min(b,Qf(B,W,me,Te,s))}}return b}function un(l,r,s,d,g,_){if(!_)return;const b=Sd(wd(d,_),g,s);b<r&&l.push([b,_,[0,0]])}function Cd(l,r,s,d,g,_,b){if(!_||!b)return;const C=Sd(wd(d,_),wd(g,b),s);C<r&&l.push([C,_,b])}function Td(l,r,s,d,g=1/0){let _=Math.min(d.distance(l[0],s[0][0]),g);if(_===0)return _;const b=new ym([[0,[0,l.length-1],[0,0]]],bd),C=Yf(s);for(;b.length>0;){const E=b.pop();if(E[0]>=_)continue;const z=E[1],F=r?50:100;if(xu(z)<=F){if(!ys(z,l.length))return NaN;if(r){const B=bm(l,z,s,d);if(isNaN(B)||B===0)return B;_=Math.min(_,B)}else for(let B=z[0];B<=z[1];++B){const W=xm(l[B],s,d);if(_=Math.min(_,W),_===0)return 0}}else{const B=Mh(z,r);un(b,_,d,l,C,B[0]),un(b,_,d,l,C,B[1])}}return _}function ja(l,r,s,d,g,_=1/0){let b=Math.min(_,g.distance(l[0],s[0]));if(b===0)return b;const C=new ym([[0,[0,l.length-1],[0,s.length-1]]],bd);for(;C.length>0;){const E=C.pop();if(E[0]>=b)continue;const z=E[1],F=E[2],B=r?50:100,W=d?50:100;if(xu(z)<=B&&xu(F)<=W){if(!ys(z,l.length)&&ys(F,s.length))return NaN;let X;if(r&&d)X=$s(l,z,s,F,g),b=Math.min(b,X);else if(r&&!d){const te=l.slice(z[0],z[1]+1);for(let re=F[0];re<=F[1];++re)if(X=vc(s[re],te,g),b=Math.min(b,X),b===0)return b}else if(!r&&d){const te=s.slice(F[0],F[1]+1);for(let re=z[0];re<=z[1];++re)if(X=vc(l[re],te,g),b=Math.min(b,X),b===0)return b}else X=bu(l,z,s,F,g),b=Math.min(b,X)}else{const X=Mh(z,r),te=Mh(F,d);Cd(C,b,g,l,s,X[0],te[0]),Cd(C,b,g,l,s,X[0],te[1]),Cd(C,b,g,l,s,X[1],te[0]),Cd(C,b,g,l,s,X[1],te[1])}}return b}function Ph(l){return l.type==="MultiPolygon"?l.coordinates.map(r=>({type:"Polygon",coordinates:r})):l.type==="MultiLineString"?l.coordinates.map(r=>({type:"LineString",coordinates:r})):l.type==="MultiPoint"?l.coordinates.map(r=>({type:"Point",coordinates:r})):[l]}class js{constructor(r,s){this.type=Ot,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${r.length-1} instead.`);if(wl(r[1])){const d=r[1];if(d.type==="FeatureCollection")return new js(d,d.features.map(g=>Ph(g.geometry)).flat());if(d.type==="Feature")return new js(d,Ph(d.geometry));if("type"in d&&"coordinates"in d)return new js(d,Ph(d))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(s,d){const g=s.geometry(),_=g.flat().map(E=>gc([E.x,E.y],s.canonical));if(g.length===0)return NaN;const b=new xd(_[0][1]);let C=1/0;for(const E of d){switch(E.type){case"Point":C=Math.min(C,ja(_,!1,[E.coordinates],!1,b,C));break;case"LineString":C=Math.min(C,ja(_,!1,E.coordinates,!0,b,C));break;case"Polygon":C=Math.min(C,Td(_,!1,E.coordinates,b,C))}if(C===0)return C}return C}(r,this.geometries);if(r.geometryType()==="LineString")return function(s,d){const g=s.geometry(),_=g.flat().map(E=>gc([E.x,E.y],s.canonical));if(g.length===0)return NaN;const b=new xd(_[0][1]);let C=1/0;for(const E of d){switch(E.type){case"Point":C=Math.min(C,ja(_,!0,[E.coordinates],!1,b,C));break;case"LineString":C=Math.min(C,ja(_,!0,E.coordinates,!0,b,C));break;case"Polygon":C=Math.min(C,Td(_,!0,E.coordinates,b,C))}if(C===0)return C}return C}(r,this.geometries);if(r.geometryType()==="Polygon")return function(s,d){const g=s.geometry();if(g.length===0||g[0].length===0)return NaN;const _=Sh(g,0).map(E=>E.map(z=>z.map(F=>gc([F.x,F.y],s.canonical)))),b=new xd(_[0][0][0][1]);let C=1/0;for(const E of d)for(const z of _){switch(E.type){case"Point":C=Math.min(C,Td([E.coordinates],!1,z,b,C));break;case"LineString":C=Math.min(C,Td(E.coordinates,!0,z,b,C));break;case"Polygon":C=Math.min(C,wm(z,E.coordinates,b,C))}if(C===0)return C}return C}(r,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class _c{constructor(r){this.type=sr,this.key=r}static parse(r,s){if(r.length!==2)return s.error(`Expected 1 argument, but found ${r.length-1} instead.`);const d=r[1];return d==null?s.error("Global state property must be defined."):typeof d!="string"?s.error(`Global state property must be string, but found ${typeof r[1]} instead.`):new _c(d)}evaluate(r){var s;const d=(s=r.globals)===null||s===void 0?void 0:s.globalState;return d&&Object.keys(d).length!==0?pn(d,this.key):null}eachChild(){}outputDefined(){return!1}}const xc={"==":pm,"!=":Uf,">":oy,"<":mm,">=":pd,"<=":mc,array:Uo,at:Jr,boolean:Uo,case:du,coalesce:fc,collator:mu,format:bh,image:Tl,in:jr,"index-of":$a,interpolate:Yi,"interpolate-hcl":Yi,"interpolate-lab":Yi,length:gu,let:cn,literal:Ao,match:Qr,number:Uo,"number-format":Gf,object:Uo,slice:si,step:sa,string:Uo,"to-boolean":Ls,"to-color":Ls,"to-number":Ls,"to-string":Ls,var:Cl,within:gs,distance:js,"global-state":_c};class Ro{constructor(r,s,d,g){this.name=r,this.type=s,this._evaluate=d,this.args=g}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,s){const d=r[0],g=Ro.definitions[d];if(!g)return s.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(g)?g[0]:g.type,b=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,C=b.filter(([z])=>!Array.isArray(z)||z.length===r.length-1);let E=null;for(const[z,F]of C){E=new Sl(s.registry,Eh,s.path,null,s.scope);const B=[];let W=!1;for(let X=1;X<r.length;X++){const te=r[X],re=Array.isArray(z)?z[X-1]:z.type,le=E.parse(te,1+B.length,re);if(!le){W=!0;break}B.push(le)}if(!W)if(Array.isArray(z)&&z.length!==B.length)E.error(`Expected ${z.length} arguments, but found ${B.length} instead.`);else{for(let X=0;X<B.length;X++){const te=Array.isArray(z)?z[X]:z.type,re=B[X];E.concat(X+1).checkSubtype(te,re.type)}if(E.errors.length===0)return new Ro(d,_,F,B)}}if(C.length===1)s.errors.push(...E.errors);else{const z=(C.length?C:b).map(([B])=>{return W=B,Array.isArray(W)?`(${W.map(an).join(", ")})`:`(${an(W.type)}...)`;var W}).join(" | "),F=[];for(let B=1;B<r.length;B++){const W=s.parse(r[B],1+F.length);if(!W)return null;F.push(an(W.type))}s.error(`Expected arguments of type ${z}, but found (${F.join(", ")}) instead.`)}return null}static register(r,s){Ro.definitions=s;for(const d in s)r[d]=Ro}}function bc(l,[r,s,d,g]){r=r.evaluate(l),s=s.evaluate(l),d=d.evaluate(l);const _=g?g.evaluate(l):1,b=uc(r,s,d,_);if(b)throw new Mn(b);return new $r(r/255,s/255,d/255,_,!1)}function Md(l,r){return l in r}function Pd(l,r){const s=r[l];return s===void 0?null:s}function aa(l){return{type:l}}function Eh(l){if(l instanceof Cl)return Eh(l.boundExpression);if(l instanceof Ro&&l.name==="error"||l instanceof mu||l instanceof gs||l instanceof js||l instanceof _c)return!1;const r=l instanceof Ls||l instanceof Uo;let s=!0;return l.eachChild(d=>{s=r?s&&Eh(d):s&&d instanceof Ao}),!!s&&Ih(l)&&kh(l,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Ih(l){if(l instanceof Ro&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof gs||l instanceof js)return!1;let r=!0;return l.eachChild(s=>{r&&!Ih(s)&&(r=!1)}),r}function wu(l){if(l instanceof Ro&&l.name==="feature-state")return!1;let r=!0;return l.eachChild(s=>{r&&!wu(s)&&(r=!1)}),r}function kh(l,r){if(l instanceof Ro&&r.indexOf(l.name)>=0)return!1;let s=!0;return l.eachChild(d=>{s&&!kh(d,r)&&(s=!1)}),s}function tp(l){return{result:"success",value:l}}function wc(l){return{result:"error",value:l}}function ss(l){return l["property-type"]==="data-driven"||l["property-type"]==="cross-faded-data-driven"}function Ed(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function Ah(l){return!!l.expression&&l.expression.interpolated}function Kr(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function Id(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)&&Gn(l)===Ur}function Rh(l){return l}function Sm(l,r){const s=l.stops&&typeof l.stops[0][0]=="object",d=s||!(s||l.property!==void 0),g=l.type||(Ah(r)?"exponential":"interval"),_=function(F){switch(F.type){case"color":return $r.parse;case"padding":return zi.parse;case"numberArray":return _n.parse;case"colorArray":return Cr.parse;default:return null}}(r);if(_&&((l=Fr({},l)).stops&&(l.stops=l.stops.map(F=>[F[0],_(F[1])])),l.default=_(l.default?l.default:r.default)),l.colorSpace&&(b=l.colorSpace)!=="rgb"&&b!=="hcl"&&b!=="lab")throw new Error(`Unknown color space: "${l.colorSpace}"`);var b;const C=function(F){switch(F){case"exponential":return kd;case"interval":return ei;case"categorical":return Cm;case"identity":return Ad;default:throw new Error(`Unknown function type "${F}"`)}}(g);let E,z;if(g==="categorical"){E=Object.create(null);for(const F of l.stops)E[F[0]]=F[1];z=typeof l.stops[0][0]}if(s){const F={},B=[];for(let te=0;te<l.stops.length;te++){const re=l.stops[te],le=re[0].zoom;F[le]===void 0&&(F[le]={zoom:le,type:l.type,property:l.property,default:l.default,stops:[]},B.push(le)),F[le].stops.push([re[0].value,re[1]])}const W=[];for(const te of B)W.push([F[te].zoom,Sm(F[te],r)]);const X={name:"linear"};return{kind:"composite",interpolationType:X,interpolationFactor:Yi.interpolationFactor.bind(void 0,X),zoomStops:W.map(te=>te[0]),evaluate:({zoom:te},re)=>kd({stops:W,base:l.base},r,te).evaluate(te,re)}}if(d){const F=g==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:F,interpolationFactor:Yi.interpolationFactor.bind(void 0,F),zoomStops:l.stops.map(B=>B[0]),evaluate:({zoom:B})=>C(l,r,B,E,z)}}return{kind:"source",evaluate(F,B){const W=B&&B.properties?B.properties[l.property]:void 0;return W===void 0?Su(l.default,r.default):C(l,r,W,E,z)}}}function Su(l,r,s){return l!==void 0?l:r!==void 0?r:s!==void 0?s:void 0}function Cm(l,r,s,d,g){return Su(typeof s===g?d[s]:void 0,l.default,r.default)}function ei(l,r,s){if(Kr(s)!=="number")return Su(l.default,r.default);const d=l.stops.length;if(d===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[d-1][0])return l.stops[d-1][1];const g=Fs(l.stops.map(_=>_[0]),s);return l.stops[g][1]}function kd(l,r,s){const d=l.base!==void 0?l.base:1;if(Kr(s)!=="number")return Su(l.default,r.default);const g=l.stops.length;if(g===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[g-1][0])return l.stops[g-1][1];const _=Fs(l.stops.map(F=>F[0]),s),b=function(F,B,W,X){const te=X-W,re=F-W;return te===0?0:B===1?re/te:(Math.pow(B,re)-1)/(Math.pow(B,te)-1)}(s,d,l.stops[_][0],l.stops[_+1][0]),C=l.stops[_][1],E=l.stops[_+1][1],z=Qn[r.type]||Rh;return typeof C.evaluate=="function"?{evaluate(...F){const B=C.evaluate.apply(void 0,F),W=E.evaluate.apply(void 0,F);if(B!==void 0&&W!==void 0)return z(B,W,b,l.colorSpace)}}:z(C,E,b,l.colorSpace)}function Ad(l,r,s){switch(r.type){case"color":s=$r.parse(s);break;case"formatted":s=Xi.fromString(s.toString());break;case"resolvedImage":s=Vo.fromString(s.toString());break;case"padding":s=zi.parse(s);break;case"colorArray":s=Cr.parse(s);break;case"numberArray":s=_n.parse(s);break;default:Kr(s)===r.type||r.type==="enum"&&r.values[s]||(s=void 0)}return Su(s,l.default,r.default)}Ro.register(xc,{error:[{kind:"error"},[it],(l,[r])=>{throw new Mn(r.evaluate(l))}],typeof:[it,[sr],(l,[r])=>an(Gn(r.evaluate(l)))],"to-rgba":[Zi(Ot,4),[Ht],(l,[r])=>{const[s,d,g,_]=r.evaluate(l).rgb;return[255*s,255*d,255*g,_]}],rgb:[Ht,[Ot,Ot,Ot],bc],rgba:[Ht,[Ot,Ot,Ot,Ot],bc],has:{type:tt,overloads:[[[it],(l,[r])=>Md(r.evaluate(l),l.properties())],[[it,Ur],(l,[r,s])=>Md(r.evaluate(l),s.evaluate(l))]]},get:{type:sr,overloads:[[[it],(l,[r])=>Pd(r.evaluate(l),l.properties())],[[it,Ur],(l,[r,s])=>Pd(r.evaluate(l),s.evaluate(l))]]},"feature-state":[sr,[it],(l,[r])=>Pd(r.evaluate(l),l.featureState||{})],properties:[Ur,[],l=>l.properties()],"geometry-type":[it,[],l=>l.geometryType()],id:[sr,[],l=>l.id()],zoom:[Ot,[],l=>l.globals.zoom],"heatmap-density":[Ot,[],l=>l.globals.heatmapDensity||0],elevation:[Ot,[],l=>l.globals.elevation||0],"line-progress":[Ot,[],l=>l.globals.lineProgress||0],accumulated:[sr,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[Ot,aa(Ot),(l,r)=>{let s=0;for(const d of r)s+=d.evaluate(l);return s}],"*":[Ot,aa(Ot),(l,r)=>{let s=1;for(const d of r)s*=d.evaluate(l);return s}],"-":{type:Ot,overloads:[[[Ot,Ot],(l,[r,s])=>r.evaluate(l)-s.evaluate(l)],[[Ot],(l,[r])=>-r.evaluate(l)]]},"/":[Ot,[Ot,Ot],(l,[r,s])=>r.evaluate(l)/s.evaluate(l)],"%":[Ot,[Ot,Ot],(l,[r,s])=>r.evaluate(l)%s.evaluate(l)],ln2:[Ot,[],()=>Math.LN2],pi:[Ot,[],()=>Math.PI],e:[Ot,[],()=>Math.E],"^":[Ot,[Ot,Ot],(l,[r,s])=>Math.pow(r.evaluate(l),s.evaluate(l))],sqrt:[Ot,[Ot],(l,[r])=>Math.sqrt(r.evaluate(l))],log10:[Ot,[Ot],(l,[r])=>Math.log(r.evaluate(l))/Math.LN10],ln:[Ot,[Ot],(l,[r])=>Math.log(r.evaluate(l))],log2:[Ot,[Ot],(l,[r])=>Math.log(r.evaluate(l))/Math.LN2],sin:[Ot,[Ot],(l,[r])=>Math.sin(r.evaluate(l))],cos:[Ot,[Ot],(l,[r])=>Math.cos(r.evaluate(l))],tan:[Ot,[Ot],(l,[r])=>Math.tan(r.evaluate(l))],asin:[Ot,[Ot],(l,[r])=>Math.asin(r.evaluate(l))],acos:[Ot,[Ot],(l,[r])=>Math.acos(r.evaluate(l))],atan:[Ot,[Ot],(l,[r])=>Math.atan(r.evaluate(l))],min:[Ot,aa(Ot),(l,r)=>Math.min(...r.map(s=>s.evaluate(l)))],max:[Ot,aa(Ot),(l,r)=>Math.max(...r.map(s=>s.evaluate(l)))],abs:[Ot,[Ot],(l,[r])=>Math.abs(r.evaluate(l))],round:[Ot,[Ot],(l,[r])=>{const s=r.evaluate(l);return s<0?-Math.round(-s):Math.round(s)}],floor:[Ot,[Ot],(l,[r])=>Math.floor(r.evaluate(l))],ceil:[Ot,[Ot],(l,[r])=>Math.ceil(r.evaluate(l))],"filter-==":[tt,[it,sr],(l,[r,s])=>l.properties()[r.value]===s.value],"filter-id-==":[tt,[sr],(l,[r])=>l.id()===r.value],"filter-type-==":[tt,[it],(l,[r])=>l.geometryType()===r.value],"filter-<":[tt,[it,sr],(l,[r,s])=>{const d=l.properties()[r.value],g=s.value;return typeof d==typeof g&&d<g}],"filter-id-<":[tt,[sr],(l,[r])=>{const s=l.id(),d=r.value;return typeof s==typeof d&&s<d}],"filter->":[tt,[it,sr],(l,[r,s])=>{const d=l.properties()[r.value],g=s.value;return typeof d==typeof g&&d>g}],"filter-id->":[tt,[sr],(l,[r])=>{const s=l.id(),d=r.value;return typeof s==typeof d&&s>d}],"filter-<=":[tt,[it,sr],(l,[r,s])=>{const d=l.properties()[r.value],g=s.value;return typeof d==typeof g&&d<=g}],"filter-id-<=":[tt,[sr],(l,[r])=>{const s=l.id(),d=r.value;return typeof s==typeof d&&s<=d}],"filter->=":[tt,[it,sr],(l,[r,s])=>{const d=l.properties()[r.value],g=s.value;return typeof d==typeof g&&d>=g}],"filter-id->=":[tt,[sr],(l,[r])=>{const s=l.id(),d=r.value;return typeof s==typeof d&&s>=d}],"filter-has":[tt,[sr],(l,[r])=>r.value in l.properties()],"filter-has-id":[tt,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[tt,[Zi(it)],(l,[r])=>r.value.indexOf(l.geometryType())>=0],"filter-id-in":[tt,[Zi(sr)],(l,[r])=>r.value.indexOf(l.id())>=0],"filter-in-small":[tt,[it,Zi(sr)],(l,[r,s])=>s.value.indexOf(l.properties()[r.value])>=0],"filter-in-large":[tt,[it,Zi(sr)],(l,[r,s])=>function(d,g,_,b){for(;_<=b;){const C=_+b>>1;if(g[C]===d)return!0;g[C]>d?b=C-1:_=C+1}return!1}(l.properties()[r.value],s.value,0,s.value.length-1)],all:{type:tt,overloads:[[[tt,tt],(l,[r,s])=>r.evaluate(l)&&s.evaluate(l)],[aa(tt),(l,r)=>{for(const s of r)if(!s.evaluate(l))return!1;return!0}]]},any:{type:tt,overloads:[[[tt,tt],(l,[r,s])=>r.evaluate(l)||s.evaluate(l)],[aa(tt),(l,r)=>{for(const s of r)if(s.evaluate(l))return!0;return!1}]]},"!":[tt,[tt],(l,[r])=>!r.evaluate(l)],"is-supported-script":[tt,[it],(l,[r])=>{const s=l.globals&&l.globals.isSupportedScript;return!s||s(r.evaluate(l))}],upcase:[it,[it],(l,[r])=>r.evaluate(l).toUpperCase()],downcase:[it,[it],(l,[r])=>r.evaluate(l).toLowerCase()],concat:[it,aa(sr),(l,r)=>r.map(s=>Os(s.evaluate(l))).join("")],"resolved-locale":[it,[An],(l,[r])=>r.evaluate(l).resolvedLocale()]});class Sc{constructor(r,s,d){this.expression=r,this._warningHistory={},this._evaluator=new vh,this._defaultValue=s?function(g){if(g.type==="color"&&Id(g.default))return new $r(0,0,0,0);switch(g.type){case"color":return $r.parse(g.default)||null;case"padding":return zi.parse(g.default)||null;case"numberArray":return _n.parse(g.default)||null;case"colorArray":return Cr.parse(g.default)||null;case"variableAnchorOffsetCollection":return ko.parse(g.default)||null;case"projectionDefinition":return Ki.parse(g.default)||null;default:return g.default===void 0?null:g.default}}(s):null,this._enumValues=s&&s.type==="enum"?s.values:null,this._globalState=d}evaluateWithoutErrorHandling(r,s,d,g,_,b){return this._globalState&&(r=kl(r,this._globalState)),this._evaluator.globals=r,this._evaluator.feature=s,this._evaluator.featureState=d,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=b,this.expression.evaluate(this._evaluator)}evaluate(r,s,d,g,_,b){this._globalState&&(r=kl(r,this._globalState)),this._evaluator.globals=r,this._evaluator.feature=s||null,this._evaluator.featureState=d||null,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=b||null;try{const C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new Mn(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(C.message)),this._defaultValue}}}function Cc(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in xc}function Tc(l,r,s){const d=new Sl(xc,Eh,[],r?function(_){const b={color:Ht,string:it,number:Ot,enum:it,boolean:tt,formatted:Vi,padding:La,numberArray:Un,colorArray:yl,projectionDefinition:Mr,resolvedImage:vl,variableAnchorOffsetCollection:na};return _.type==="array"?Zi(b[_.value]||sr,_.length):b[_.type]}(r):void 0),g=d.parse(l,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?tp(new Sc(g,r,s)):wc(d.errors)}class Pl{constructor(r,s,d){this.kind=r,this._styleExpression=s,this.isStateDependent=r!=="constant"&&!wu(s.expression),this.globalStateRefs=Il(s.expression),this._globalState=d}evaluateWithoutErrorHandling(r,s,d,g,_,b){return this._globalState&&(r=kl(r,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(r,s,d,g,_,b)}evaluate(r,s,d,g,_,b){return this._globalState&&(r=kl(r,this._globalState)),this._styleExpression.evaluate(r,s,d,g,_,b)}}class Cu{constructor(r,s,d,g,_){this.kind=r,this.zoomStops=d,this._styleExpression=s,this.isStateDependent=r!=="camera"&&!wu(s.expression),this.globalStateRefs=Il(s.expression),this.interpolationType=g,this._globalState=_}evaluateWithoutErrorHandling(r,s,d,g,_,b){return this._globalState&&(r=kl(r,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(r,s,d,g,_,b)}evaluate(r,s,d,g,_,b){return this._globalState&&(r=kl(r,this._globalState)),this._styleExpression.evaluate(r,s,d,g,_,b)}interpolationFactor(r,s,d){return this.interpolationType?Yi.interpolationFactor(this.interpolationType,r,s,d):0}}function El(l,r,s){const d=Tc(l,r,s);if(d.result==="error")return d;const g=d.value.expression,_=Ih(g);if(!_&&!ss(r))return wc([new en("","data expressions not supported")]);const b=kh(g,["zoom"]);if(!b&&!Ed(r))return wc([new en("","zoom expressions not supported")]);const C=Rd(g);return C||b?C instanceof en?wc([C]):C instanceof Yi&&!Ah(r)?wc([new en("",'"interpolate" expressions cannot be used with this property')]):tp(C?new Cu(_?"camera":"composite",d.value,C.labels,C instanceof Yi?C.interpolation:void 0,s):new Pl(_?"constant":"source",d.value,s)):wc([new en("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Dh{constructor(r,s){this._parameters=r,this._specification=s,Fr(this,Sm(this._parameters,this._specification))}static deserialize(r){return new Dh(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function Rd(l){let r=null;if(l instanceof cn)r=Rd(l.result);else if(l instanceof fc){for(const s of l.args)if(r=Rd(s),r)break}else(l instanceof sa||l instanceof Yi)&&l.input instanceof Ro&&l.input.name==="zoom"&&(r=l);return r instanceof en||l.eachChild(s=>{const d=Rd(s);d instanceof en?r=d:!r&&d?r=new en("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&d&&r!==d&&(r=new en("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Il(l,r=new Set){return l instanceof _c&&r.add(l.key),l.eachChild(s=>{Il(s,r)}),r}function kl(l,r){const{zoom:s,heatmapDensity:d,elevation:g,lineProgress:_,isSupportedScript:b,accumulated:C}=l??{};return{zoom:s,heatmapDensity:d,elevation:g,lineProgress:_,isSupportedScript:b,accumulated:C,globalState:r}}function Tu(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const r of l.slice(1))if(!Tu(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const Dd={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Mc(l,r){if(l==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Tu(l)||(l=Pc(l));const s=Tc(l,Dd,r);if(s.result==="error")throw new Error(s.value.map(d=>`${d.key}: ${d.message}`).join(", "));return{filter:(d,g,_)=>s.value.evaluate(d,g,{},_),needGeometry:zd(l),getGlobalStateRefs:()=>Il(s.value.expression)}}function rp(l,r){return l<r?-1:l>r?1:0}function zd(l){if(!Array.isArray(l))return!1;if(l[0]==="within"||l[0]==="distance")return!0;for(let r=1;r<l.length;r++)if(zd(l[r]))return!0;return!1}function Pc(l){if(!l)return!0;const r=l[0];return l.length<=1?r!=="any":r==="=="?Od(l[1],l[2],"=="):r==="!="?zh(Od(l[1],l[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Od(l[1],l[2],r):r==="any"?(s=l.slice(1),["any"].concat(s.map(Pc))):r==="all"?["all"].concat(l.slice(1).map(Pc)):r==="none"?["all"].concat(l.slice(1).map(Pc).map(zh)):r==="in"?np(l[1],l.slice(2)):r==="!in"?zh(np(l[1],l.slice(2))):r==="has"?Tm(l[1]):r!=="!has"||zh(Tm(l[1]));var s}function Od(l,r,s){switch(l){case"$type":return[`filter-type-${s}`,r];case"$id":return[`filter-id-${s}`,r];default:return[`filter-${s}`,l,r]}}function np(l,r){if(r.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(s=>typeof s!=typeof r[0])?["filter-in-large",l,["literal",r.sort(rp)]]:["filter-in-small",l,["literal",r]]}}function Tm(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function zh(l){return["!",l]}function Mu(l){const r=typeof l;if(r==="number"||r==="boolean"||r==="string"||l==null)return JSON.stringify(l);if(Array.isArray(l)){let g="[";for(const _ of l)g+=`${Mu(_)},`;return`${g}]`}const s=Object.keys(l).sort();let d="{";for(let g=0;g<s.length;g++)d+=`${JSON.stringify(s[g])}:${Mu(l[s[g]])},`;return`${d}}`}function Na(l){let r="";for(const s of Ut)r+=`/${Mu(l[s])}`;return r}function ip(l){const r=l.value;return r?[new Mt(l.key,r,"constants have been deprecated as of v8")]:[]}function Ln(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function _o(l){if(Array.isArray(l))return l.map(_o);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const r={};for(const s in l)r[s]=_o(l[s]);return r}return Ln(l)}function uo(l){const r=l.key,s=l.value,d=l.valueSpec||{},g=l.objectElementValidators||{},_=l.style,b=l.styleSpec,C=l.validateSpec;let E=[];const z=Kr(s);if(z!=="object")return[new Mt(r,s,`object expected, ${z} found`)];for(const F in s){const B=F.split(".")[0],W=pn(d,B)||d["*"];let X;if(pn(g,B))X=g[B];else if(pn(d,B)){if(s[F]===void 0)continue;X=C}else if(g["*"])X=g["*"];else{if(!d["*"]){E.push(new Mt(r,s[F],`unknown property "${F}"`));continue}X=C}E=E.concat(X({key:(r&&`${r}.`)+F,value:s[F],valueSpec:W,style:_,styleSpec:b,object:s,objectKey:F,validateSpec:C},s))}for(const F in d)g[F]||d[F].required&&d[F].default===void 0&&s[F]===void 0&&E.push(new Mt(r,s,`missing required property "${F}"`));return E}function vs(l){const r=l.value,s=l.valueSpec,d=l.style,g=l.styleSpec,_=l.key,b=l.arrayElementValidator||l.validateSpec;if(Kr(r)!=="array")return[new Mt(_,r,`array expected, ${Kr(r)} found`)];if(s.length&&r.length!==s.length)return[new Mt(_,r,`array length ${s.length} expected, length ${r.length} found`)];let C={type:s.value,values:s.values};g.$version<7&&(C.function=s.function),Kr(s.value)==="object"&&(C=s.value);let E=[];for(let z=0;z<r.length;z++)E=E.concat(b({array:r,arrayIndex:z,value:r[z],valueSpec:C,validateSpec:l.validateSpec,style:d,styleSpec:g,key:`${_}[${z}]`}));return E}function Ec(l){const r=l.key,s=l.value,d=l.valueSpec;let g=Kr(s);return g==="number"&&s!=s&&(g="NaN"),g!=="number"?[new Mt(r,s,`number expected, ${g} found`)]:"minimum"in d&&s<d.minimum?[new Mt(r,s,`${s} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&s>d.maximum?[new Mt(r,s,`${s} is greater than the maximum value ${d.maximum}`)]:[]}function Ld(l){const r=l.valueSpec,s=Ln(l.value.type);let d,g,_,b={};const C=s!=="categorical"&&l.value.property===void 0,E=!C,z=Kr(l.value.stops)==="array"&&Kr(l.value.stops[0])==="array"&&Kr(l.value.stops[0][0])==="object",F=uo({key:l.key,value:l.value,valueSpec:l.styleSpec.function,validateSpec:l.validateSpec,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(X){if(s==="identity")return[new Mt(X.key,X.value,'identity function may not have a "stops" property')];let te=[];const re=X.value;return te=te.concat(vs({key:X.key,value:re,valueSpec:X.valueSpec,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,arrayElementValidator:B})),Kr(re)==="array"&&re.length===0&&te.push(new Mt(X.key,re,"array must have at least one stop")),te},default:function(X){return X.validateSpec({key:X.key,value:X.value,valueSpec:r,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec})}}});return s==="identity"&&C&&F.push(new Mt(l.key,l.value,'missing required property "property"')),s==="identity"||l.value.stops||F.push(new Mt(l.key,l.value,'missing required property "stops"')),s==="exponential"&&l.valueSpec.expression&&!Ah(l.valueSpec)&&F.push(new Mt(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(E&&!ss(l.valueSpec)?F.push(new Mt(l.key,l.value,"property functions not supported")):C&&!Ed(l.valueSpec)&&F.push(new Mt(l.key,l.value,"zoom functions not supported"))),s!=="categorical"&&!z||l.value.property!==void 0||F.push(new Mt(l.key,l.value,'"property" property is required')),F;function B(X){let te=[];const re=X.value,le=X.key;if(Kr(re)!=="array")return[new Mt(le,re,`array expected, ${Kr(re)} found`)];if(re.length!==2)return[new Mt(le,re,`array length 2 expected, length ${re.length} found`)];if(z){if(Kr(re[0])!=="object")return[new Mt(le,re,`object expected, ${Kr(re[0])} found`)];if(re[0].zoom===void 0)return[new Mt(le,re,"object stop key must have zoom")];if(re[0].value===void 0)return[new Mt(le,re,"object stop key must have value")];if(_&&_>Ln(re[0].zoom))return[new Mt(le,re[0].zoom,"stop zoom values must appear in ascending order")];Ln(re[0].zoom)!==_&&(_=Ln(re[0].zoom),g=void 0,b={}),te=te.concat(uo({key:`${le}[0]`,value:re[0],valueSpec:{zoom:{}},validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{zoom:Ec,value:W}}))}else te=te.concat(W({key:`${le}[0]`,value:re[0],validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec},re));return Cc(_o(re[1]))?te.concat([new Mt(`${le}[1]`,re[1],"expressions are not allowed in function stops.")]):te.concat(X.validateSpec({key:`${le}[1]`,value:re[1],valueSpec:r,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec}))}function W(X,te){const re=Kr(X.value),le=Ln(X.value),me=X.value!==null?X.value:te;if(d){if(re!==d)return[new Mt(X.key,me,`${re} stop domain type must match previous stop domain type ${d}`)]}else d=re;if(re!=="number"&&re!=="string"&&re!=="boolean")return[new Mt(X.key,me,"stop domain value must be a number, string, or boolean")];if(re!=="number"&&s!=="categorical"){let Te=`number expected, ${re} found`;return ss(r)&&s===void 0&&(Te+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Mt(X.key,me,Te)]}return s!=="categorical"||re!=="number"||isFinite(le)&&Math.floor(le)===le?s!=="categorical"&&re==="number"&&g!==void 0&&le<g?[new Mt(X.key,me,"stop domain values must appear in ascending order")]:(g=le,s==="categorical"&&le in b?[new Mt(X.key,me,"stop domain values must be unique")]:(b[le]=!0,[])):[new Mt(X.key,me,`integer expected, found ${le}`)]}}function Al(l){const r=(l.expressionContext==="property"?El:Tc)(_o(l.value),l.valueSpec);if(r.result==="error")return r.value.map(d=>new Mt(`${l.key}${d.key}`,l.value,d.message));const s=r.value.expression||r.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!s.outputDefined())return[new Mt(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!wu(s))return[new Mt(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if(l.expressionContext==="filter"&&!wu(s))return[new Mt(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!kh(s,["zoom","feature-state"]))return[new Mt(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(l.expressionContext==="cluster-initial"&&!Ih(s))return[new Mt(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ns(l){const r=l.key,s=l.value,d=Kr(s);return d!=="string"?[new Mt(r,s,`color expected, ${d} found`)]:$r.parse(String(s))?[]:[new Mt(r,s,`color expected, "${s}" found`)]}function Vs(l){const r=l.key,s=l.value,d=l.valueSpec,g=[];return Array.isArray(d.values)?d.values.indexOf(Ln(s))===-1&&g.push(new Mt(r,s,`expected one of [${d.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(d.values).indexOf(Ln(s))===-1&&g.push(new Mt(r,s,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(s)} found`)),g}function Us(l){return Tu(_o(l.value))?Al(Fr({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Oh(l)}function Oh(l){const r=l.value,s=l.key;if(Kr(r)!=="array")return[new Mt(s,r,`array expected, ${Kr(r)} found`)];const d=l.styleSpec;let g,_=[];if(r.length<1)return[new Mt(s,r,"filter array must have at least 1 element")];switch(_=_.concat(Vs({key:`${s}[0]`,value:r[0],valueSpec:d.filter_operator,style:l.style,styleSpec:l.styleSpec})),Ln(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&Ln(r[1])==="$type"&&_.push(new Mt(s,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&_.push(new Mt(s,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(g=Kr(r[1]),g!=="string"&&_.push(new Mt(`${s}[1]`,r[1],`string expected, ${g} found`)));for(let b=2;b<r.length;b++)g=Kr(r[b]),Ln(r[1])==="$type"?_=_.concat(Vs({key:`${s}[${b}]`,value:r[b],valueSpec:d.geometry_type,style:l.style,styleSpec:l.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&_.push(new Mt(`${s}[${b}]`,r[b],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let b=1;b<r.length;b++)_=_.concat(Oh({key:`${s}[${b}]`,value:r[b],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":g=Kr(r[1]),r.length!==2?_.push(new Mt(s,r,`filter array for "${r[0]}" operator must have 2 elements`)):g!=="string"&&_.push(new Mt(`${s}[1]`,r[1],`string expected, ${g} found`))}return _}function Fd(l,r){const s=l.key,d=l.validateSpec,g=l.style,_=l.styleSpec,b=l.value,C=l.objectKey,E=_[`${r}_${l.layerType}`];if(!E)return[];const z=C.match(/^(.*)-transition$/);if(r==="paint"&&z&&E[z[1]]&&E[z[1]].transition)return d({key:s,value:b,valueSpec:_.transition,style:g,styleSpec:_});const F=l.valueSpec||E[C];if(!F)return[new Mt(s,b,`unknown property "${C}"`)];let B;if(Kr(b)==="string"&&ss(F)&&!F.tokens&&(B=/^{([^}]+)}$/.exec(b)))return[new Mt(s,b,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(B[1])} }\`.`)];const W=[];return l.layerType==="symbol"&&C==="text-font"&&Id(_o(b))&&Ln(b.type)==="identity"&&W.push(new Mt(s,b,'"text-font" does not support identity functions')),W.concat(d({key:l.key,value:b,valueSpec:F,style:g,styleSpec:_,expressionContext:"property",propertyType:r,propertyKey:C}))}function Ic(l){return Fd(l,"paint")}function Va(l){return Fd(l,"layout")}function qn(l){let r=[];const s=l.value,d=l.key,g=l.style,_=l.styleSpec;if(Kr(s)!=="object")return[new Mt(d,s,`object expected, ${Kr(s)} found`)];s.type||s.ref||r.push(new Mt(d,s,'either "type" or "ref" is required'));let b=Ln(s.type);const C=Ln(s.ref);if(s.id){const E=Ln(s.id);for(let z=0;z<l.arrayIndex;z++){const F=g.layers[z];Ln(F.id)===E&&r.push(new Mt(d,s.id,`duplicate layer id "${s.id}", previously used at line ${F.id.__line__}`))}}if("ref"in s){let E;["type","source","source-layer","filter","layout"].forEach(z=>{z in s&&r.push(new Mt(d,s[z],`"${z}" is prohibited for ref layers`))}),g.layers.forEach(z=>{Ln(z.id)===C&&(E=z)}),E?E.ref?r.push(new Mt(d,s.ref,"ref cannot reference another ref layer")):b=Ln(E.type):r.push(new Mt(d,s.ref,`ref layer "${C}" not found`))}else if(b!=="background")if(s.source){const E=g.sources&&g.sources[s.source],z=E&&Ln(E.type);E?z==="vector"&&b==="raster"?r.push(new Mt(d,s.source,`layer "${s.id}" requires a raster source`)):z!=="raster-dem"&&b==="hillshade"||z!=="raster-dem"&&b==="color-relief"?r.push(new Mt(d,s.source,`layer "${s.id}" requires a raster-dem source`)):z==="raster"&&b!=="raster"?r.push(new Mt(d,s.source,`layer "${s.id}" requires a vector source`)):z!=="vector"||s["source-layer"]?z==="raster-dem"&&b!=="hillshade"&&b!=="color-relief"?r.push(new Mt(d,s.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):b!=="line"||!s.paint||!s.paint["line-gradient"]||z==="geojson"&&E.lineMetrics||r.push(new Mt(d,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new Mt(d,s,`layer "${s.id}" must specify a "source-layer"`)):r.push(new Mt(d,s.source,`source "${s.source}" not found`))}else r.push(new Mt(d,s,'missing required property "source"'));return r=r.concat(uo({key:d,value:s,valueSpec:_.layer,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*":()=>[],type:()=>l.validateSpec({key:`${d}.type`,value:s.type,valueSpec:_.layer.type,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,object:s,objectKey:"type"}),filter:Us,layout:E=>uo({layer:s,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":z=>Va(Fr({layerType:b},z))}}),paint:E=>uo({layer:s,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":z=>Ic(Fr({layerType:b},z))}})}})),r}function mn(l){const r=l.value,s=l.key,d=Kr(r);return d!=="string"?[new Mt(s,r,`string expected, ${d} found`)]:[]}const la={promoteId:function({key:l,value:r}){if(Kr(r)==="string")return mn({key:l,value:r});{const s=[];for(const d in r)s.push(...mn({key:`${l}.${d}`,value:r[d]}));return s}}};function Ji(l){const r=l.value,s=l.key,d=l.styleSpec,g=l.style,_=l.validateSpec;if(!r.type)return[new Mt(s,r,'"type" is required')];const b=Ln(r.type);let C;switch(b){case"vector":case"raster":return C=uo({key:s,value:r,valueSpec:d[`source_${b.replace("-","_")}`],style:l.style,styleSpec:d,objectElementValidators:la,validateSpec:_}),C;case"raster-dem":return C=function(E){var z;const F=(z=E.sourceName)!==null&&z!==void 0?z:"",B=E.value,W=E.styleSpec,X=W.source_raster_dem,te=E.style;let re=[];const le=Kr(B);if(B===void 0)return re;if(le!=="object")return re.push(new Mt("source_raster_dem",B,`object expected, ${le} found`)),re;const me=Ln(B.encoding)==="custom",Te=["redFactor","greenFactor","blueFactor","baseShift"],pe=E.value.encoding?`"${E.value.encoding}"`:"Default";for(const ye in B)!me&&Te.includes(ye)?re.push(new Mt(ye,B[ye],`In "${F}": "${ye}" is only valid when "encoding" is set to "custom". ${pe} encoding found`)):X[ye]?re=re.concat(E.validateSpec({key:ye,value:B[ye],valueSpec:X[ye],validateSpec:E.validateSpec,style:te,styleSpec:W})):re.push(new Mt(ye,B[ye],`unknown property "${ye}"`));return re}({sourceName:s,value:r,style:l.style,styleSpec:d,validateSpec:_}),C;case"geojson":if(C=uo({key:s,value:r,valueSpec:d.source_geojson,style:g,styleSpec:d,validateSpec:_,objectElementValidators:la}),r.cluster)for(const E in r.clusterProperties){const[z,F]=r.clusterProperties[E],B=typeof z=="string"?[z,["accumulated"],["get",E]]:z;C.push(...Al({key:`${s}.${E}.map`,value:F,expressionContext:"cluster-map"})),C.push(...Al({key:`${s}.${E}.reduce`,value:B,expressionContext:"cluster-reduce"}))}return C;case"video":return uo({key:s,value:r,valueSpec:d.source_video,style:g,validateSpec:_,styleSpec:d});case"image":return uo({key:s,value:r,valueSpec:d.source_image,style:g,validateSpec:_,styleSpec:d});case"canvas":return[new Mt(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Vs({key:`${s}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Qi(l){const r=l.value,s=l.styleSpec,d=s.light,g=l.style;let _=[];const b=Kr(r);if(r===void 0)return _;if(b!=="object")return _=_.concat([new Mt("light",r,`object expected, ${b} found`)]),_;for(const C in r){const E=C.match(/^(.*)-transition$/);_=_.concat(E&&d[E[1]]&&d[E[1]].transition?l.validateSpec({key:C,value:r[C],valueSpec:s.transition,validateSpec:l.validateSpec,style:g,styleSpec:s}):d[C]?l.validateSpec({key:C,value:r[C],valueSpec:d[C],validateSpec:l.validateSpec,style:g,styleSpec:s}):[new Mt(C,r[C],`unknown property "${C}"`)])}return _}function Rl(l){const r=l.value,s=l.styleSpec,d=s.sky,g=l.style,_=Kr(r);if(r===void 0)return[];if(_!=="object")return[new Mt("sky",r,`object expected, ${_} found`)];let b=[];for(const C in r)b=b.concat(d[C]?l.validateSpec({key:C,value:r[C],valueSpec:d[C],style:g,styleSpec:s}):[new Mt(C,r[C],`unknown property "${C}"`)]);return b}function Dl(l){const r=l.value,s=l.styleSpec,d=s.terrain,g=l.style;let _=[];const b=Kr(r);if(r===void 0)return _;if(b!=="object")return _=_.concat([new Mt("terrain",r,`object expected, ${b} found`)]),_;for(const C in r)_=_.concat(d[C]?l.validateSpec({key:C,value:r[C],valueSpec:d[C],validateSpec:l.validateSpec,style:g,styleSpec:s}):[new Mt(C,r[C],`unknown property "${C}"`)]);return _}function xo(l){let r=[];const s=l.value,d=l.key;if(Array.isArray(s)){const g=[],_=[];for(const b in s)s[b].id&&g.includes(s[b].id)&&r.push(new Mt(d,s,`all the sprites' ids must be unique, but ${s[b].id} is duplicated`)),g.push(s[b].id),s[b].url&&_.includes(s[b].url)&&r.push(new Mt(d,s,`all the sprites' URLs must be unique, but ${s[b].url} is duplicated`)),_.push(s[b].url),r=r.concat(uo({key:`${d}[${b}]`,value:s[b],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:l.validateSpec}));return r}return mn({key:d,value:s})}function Lh(l){return!!l&&l.constructor===Object}function Bd(l){return Lh(l.value)?[]:[new Mt(l.key,l.value,`object expected, ${Kr(l.value)} found`)]}const $d={"*":()=>[],array:vs,boolean:function(l){const r=l.value,s=l.key,d=Kr(r);return d!=="boolean"?[new Mt(s,r,`boolean expected, ${d} found`)]:[]},number:Ec,color:Ns,constants:ip,enum:Vs,filter:Us,function:Ld,layer:qn,object:uo,source:Ji,light:Qi,sky:Rl,terrain:Dl,projection:function(l){const r=l.value,s=l.styleSpec,d=s.projection,g=l.style,_=Kr(r);if(r===void 0)return[];if(_!=="object")return[new Mt("projection",r,`object expected, ${_} found`)];let b=[];for(const C in r)b=b.concat(d[C]?l.validateSpec({key:C,value:r[C],valueSpec:d[C],style:g,styleSpec:s}):[new Mt(C,r[C],`unknown property "${C}"`)]);return b},projectionDefinition:function(l){const r=l.key;let s=l.value;s=s instanceof String?s.valueOf():s;const d=Kr(s);return d!=="array"||function(g){return Array.isArray(g)&&g.length===3&&typeof g[0]=="string"&&typeof g[1]=="string"&&typeof g[2]=="number"}(s)||function(g){return!!["interpolate","step","literal"].includes(g[0])}(s)?["array","string"].includes(d)?[]:[new Mt(r,s,`projection expected, invalid type "${d}" found`)]:[new Mt(r,s,`projection expected, invalid array ${JSON.stringify(s)} found`)]},string:mn,formatted:function(l){return mn(l).length===0?[]:Al(l)},resolvedImage:function(l){return mn(l).length===0?[]:Al(l)},padding:function(l){const r=l.key,s=l.value;if(Kr(s)==="array"){if(s.length<1||s.length>4)return[new Mt(r,s,`padding requires 1 to 4 values; ${s.length} values found`)];const d={type:"number"};let g=[];for(let _=0;_<s.length;_++)g=g.concat(l.validateSpec({key:`${r}[${_}]`,value:s[_],validateSpec:l.validateSpec,valueSpec:d}));return g}return Ec({key:r,value:s,valueSpec:{}})},numberArray:function(l){const r=l.key,s=l.value;if(Kr(s)==="array"){const d={type:"number"};if(s.length<1)return[new Mt(r,s,"array length at least 1 expected, length 0 found")];let g=[];for(let _=0;_<s.length;_++)g=g.concat(l.validateSpec({key:`${r}[${_}]`,value:s[_],validateSpec:l.validateSpec,valueSpec:d}));return g}return Ec({key:r,value:s,valueSpec:{}})},colorArray:function(l){const r=l.key,s=l.value;if(Kr(s)==="array"){if(s.length<1)return[new Mt(r,s,"array length at least 1 expected, length 0 found")];let d=[];for(let g=0;g<s.length;g++)d=d.concat(Ns({key:`${r}[${g}]`,value:s[g]}));return d}return Ns({key:r,value:s})},variableAnchorOffsetCollection:function(l){const r=l.key,s=l.value,d=Kr(s),g=l.styleSpec;if(d!=="array"||s.length<1||s.length%2!=0)return[new Mt(r,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let b=0;b<s.length;b+=2)_=_.concat(Vs({key:`${r}[${b}]`,value:s[b],valueSpec:g.layout_symbol["text-anchor"]})),_=_.concat(vs({key:`${r}[${b+1}]`,value:s[b+1],valueSpec:{length:2,value:"number"},validateSpec:l.validateSpec,style:l.style,styleSpec:g}));return _},sprite:xo,state:Bd,fontFaces:function(l){const r=l.key,s=l.value,d=l.validateSpec,g=l.styleSpec,_=l.style;if(!Lh(s))return[new Mt(r,s,`object expected, ${Kr(s)} found`)];const b=[];for(const C in s){const E=s[C],z=Kr(E);if(z==="string")b.push(...mn({key:`${r}.${C}`,value:E}));else if(z==="array"){const F={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[B,W]of E.entries())b.push(...uo({key:`${r}.${C}[${B}]`,value:W,valueSpec:F,styleSpec:g,style:_,validateSpec:d}))}else b.push(new Mt(`${r}.${C}`,E,`string or array expected, ${z} found`))}return b}};function Gs(l){const r=l.value,s=l.valueSpec,d=l.styleSpec;return l.validateSpec=Gs,s.expression&&Id(Ln(r))?Ld(l):s.expression&&Cc(_o(r))?Al(l):s.type&&$d[s.type]?$d[s.type](l):uo(Fr({},l,{valueSpec:s.type?d[s.type]:s}))}function op(l){const r=l.value,s=l.key,d=mn(l);return d.length||(r.indexOf("{fontstack}")===-1&&d.push(new Mt(s,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&d.push(new Mt(s,r,'"glyphs" url must include a "{range}" token'))),d}function Li(l,r=Ae){let s=[];return s=s.concat(Gs({key:"",value:l,valueSpec:r.$root,styleSpec:r,style:l,validateSpec:Gs,objectElementValidators:{glyphs:op,"*":()=>[]}})),l.constants&&(s=s.concat(ip({key:"constants",value:l.constants}))),jd(s)}function Go(l){return function(r){return l(Object.assign({},r,{validateSpec:Gs}))}}function jd(l){return[].concat(l).sort((r,s)=>r.line-s.line)}function _s(l){return function(...r){return jd(l.apply(this,r))}}Li.source=_s(Go(Ji)),Li.sprite=_s(Go(xo)),Li.glyphs=_s(Go(op)),Li.light=_s(Go(Qi)),Li.sky=_s(Go(Rl)),Li.terrain=_s(Go(Dl)),Li.state=_s(Go(Bd)),Li.layer=_s(Go(qn)),Li.filter=_s(Go(Us)),Li.paintProperty=_s(Go(Ic)),Li.layoutProperty=_s(Go(Va));const ly={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class xs{constructor(r,s){this._globalState=s,this.setValue(r)}evaluate(){var r;return(r=this._literalValue)!==null&&r!==void 0?r:this._compiledValue.evaluate({})}setValue(r){if(r==null||r==="visible"||r==="none")return this._literalValue=r==="none"?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const s=Tc(r,ly,this._globalState);if(s.result==="error")throw this._literalValue="visible",this._compiledValue=void 0,new Error(s.value.map(d=>`${d.key}: ${d.message}`).join(", "));this._literalValue=void 0,this._compiledValue=s.value,this._globalStateRefs=Il(s.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}const ca=Ae,fi=Li,zl=fi.light,Fh=fi.sky,bs=fi.paintProperty,ws=fi.layoutProperty;function Ss(l,r){let s=!1;if(r&&r.length)for(const d of r)l.fire(new gt(new Error(d.message))),s=!0;return s}class qo{constructor(r,s,d){const g=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const b=new Int32Array(this.arrayBuffer);r=b[0],this.d=(s=b[1])+2*(d=b[2]);for(let E=0;E<this.d*this.d;E++){const z=b[3+E],F=b[3+E+1];g.push(z===F?null:b.subarray(z,F))}const C=b[3+g.length+1];this.keys=b.subarray(b[3+g.length],C),this.bboxes=b.subarray(C),this.insert=this._insertReadonly}else{this.d=s+2*d;for(let b=0;b<this.d*this.d;b++)g.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=r,this.padding=d,this.scale=s/r,this.uid=0;const _=d/s*r;this.min=-_,this.max=r+_}insert(r,s,d,g,_){this._forEachCell(s,d,g,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(s),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,s,d,g,_,b){this.cells[_].push(b)}query(r,s,d,g,_){const b=this.min,C=this.max;if(r<=b&&s<=b&&C<=d&&C<=g&&!_)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(r,s,d,g,this._queryCell,E,{},_),E}}_queryCell(r,s,d,g,_,b,C,E){const z=this.cells[_];if(z!==null){const F=this.keys,B=this.bboxes;for(let W=0;W<z.length;W++){const X=z[W];if(C[X]===void 0){const te=4*X;(E?E(B[te+0],B[te+1],B[te+2],B[te+3]):r<=B[te+2]&&s<=B[te+3]&&d>=B[te+0]&&g>=B[te+1])?(C[X]=!0,b.push(F[X])):C[X]=!1}}}}_forEachCell(r,s,d,g,_,b,C,E){const z=this._convertToCellCoord(r),F=this._convertToCellCoord(s),B=this._convertToCellCoord(d),W=this._convertToCellCoord(g);for(let X=z;X<=B;X++)for(let te=F;te<=W;te++){const re=this.d*te+X;if((!E||E(this._convertFromCellCoord(X),this._convertFromCellCoord(te),this._convertFromCellCoord(X+1),this._convertFromCellCoord(te+1)))&&_.call(this,r,s,d,g,re,b,C,E))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,s=3+this.cells.length+1+1;let d=0;for(let b=0;b<this.cells.length;b++)d+=this.cells[b].length;const g=new Int32Array(s+d+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let _=s;for(let b=0;b<r.length;b++){const C=r[b];g[3+b]=_,g.set(C,_),_+=C.length}return g[3+r.length]=_,g.set(this.keys,_),_+=this.keys.length,g[3+r.length+1]=_,g.set(this.bboxes,_),_+=this.bboxes.length,g.buffer}static serialize(r,s){const d=r.toArrayBuffer();return s&&s.push(d),{buffer:d}}static deserialize(r){return new qo(r.buffer)}}const Ui={};function Gt(l,r,s={}){if(Ui[l])throw new Error(`${l} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:l,writeable:!1}),Ui[l]={klass:r,omit:s.omit||[],shallow:s.shallow||[]}}Gt("Object",Object),Gt("Set",Set),Gt("TransferableGridIndex",qo),Gt("Color",$r),Gt("Error",Error),Gt("AJAXError",ce),Gt("ResolvedImage",Vo),Gt("StylePropertyFunction",Dh),Gt("StyleExpression",Sc,{omit:["_evaluator"]}),Gt("ZoomDependentExpression",Cu),Gt("ZoomConstantExpression",Pl),Gt("CompoundExpression",Ro,{omit:["_evaluate"]});for(const l in xc)xc[l]._classRegistryKey||Gt(`Expression_${l}`,xc[l]);function Bh(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function $h(l){return l.$name||l.constructor._classRegistryKey}function Ol(l){return!function(r){if(r===null||typeof r!="object")return!1;const s=$h(r);return!(!s||s==="Object")}(l)&&(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||l instanceof Error||Bh(l)||Xt(l)||ArrayBuffer.isView(l)||l instanceof ImageData)}function ho(l,r){if(Ol(l))return(Bh(l)||Xt(l))&&r&&r.push(l),ArrayBuffer.isView(l)&&r&&r.push(l.buffer),l instanceof ImageData&&r&&r.push(l.data.buffer),l;if(Array.isArray(l)){const _=[];for(const b of l)_.push(ho(b,r));return _}if(typeof l!="object")throw new Error("can't serialize object of type "+typeof l);const s=$h(l);if(!s)throw new Error(`can't serialize object of unregistered class ${l.constructor.name}`);if(!Ui[s])throw new Error(`${s} is not registered.`);const{klass:d}=Ui[s],g=d.serialize?d.serialize(l,r):{};if(d.serialize){if(r&&g===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in l){if(!l.hasOwnProperty(_)||Ui[s].omit.indexOf(_)>=0)continue;const b=l[_];g[_]=Ui[s].shallow.indexOf(_)>=0?b:ho(b,r)}l instanceof Error&&(g.message=l.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(g.$name=s),g}function fo(l){if(Ol(l))return l;if(Array.isArray(l))return l.map(fo);if(typeof l!="object")throw new Error("can't deserialize object of type "+typeof l);const r=$h(l)||"Object";if(!Ui[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:s}=Ui[r];if(!s)throw new Error(`can't deserialize unregistered class ${r}`);if(s.deserialize)return s.deserialize(l);const d=Object.create(s.prototype);for(const g of Object.keys(l)){if(g==="$name")continue;const _=l[g];d[g]=Ui[r].shallow.indexOf(g)>=0?_:fo(_)}return d}class Hn{constructor(){this.first=!0}update(r,s){const d=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=s),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=d,!0))}}function Do(l){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(l))}function Nd(l){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(l))}function sp(l){return/\s/u.test(String.fromCodePoint(l))}function Ll(l){for(const r of l)if(Nd(r.codePointAt(0)))return!0;return!1}function ap(l){for(const r of l)if(!lp(r.codePointAt(0)))return!1;return!0}function jh(l){const r=l.map(s=>{try{return new RegExp(`\\p{sc=${s}}`,"u").source}catch{return null}}).filter(s=>s);return new RegExp(r.join("|"),"u")}const kc=jh(["Arab","Dupl","Mong","Ougr","Syrc"]);function lp(l){return!kc.test(String.fromCodePoint(l))}function Fl(l){return!(Nd(l)||(r=l,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(r))));var r}const Vd=jh(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function cp(l){return Vd.test(String.fromCodePoint(l))}function Ac(l,r){return!(!r&&cp(l)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(l)))}function Nh(l){for(const r of l)if(cp(r.codePointAt(0)))return!0;return!1}const Ua=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(l){this.pluginStatus=l.pluginStatus,this.pluginURL=l.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(l){if(Ua.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=l.applyArabicShaping,this.processBidirectionalText=l.processBidirectionalText,this.processStyledBidirectionalText=l.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(l,r){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(l.pluginStatus!=="loading")return this.setState(l),l;const s=l.pluginURL,d=new Promise(_=>{this.loadScriptResolve=_});r(s);const g=new Promise(_=>setTimeout(()=>_(),this.TIMEOUT));if(yield Promise.race([d,g]),this.isParsed()){const _={pluginStatus:"loaded",pluginURL:s};return this.setState(_),_}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${s}`)})}};class Sn{constructor(r,s){this.isSupportedScript=Pu,this.zoom=r,s?(this.now=s.now||0,this.fadeDuration=s.fadeDuration||0,this.zoomHistory=s.zoomHistory||new Hn,this.transition=s.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Hn,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,s=r-Math.floor(r),d=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*s}}}function Pu(l){return function(r,s){for(const d of r)if(!Ac(d.codePointAt(0),s))return!1;return!0}(l,Ua.getRTLTextPluginStatus()==="loaded")}const Eu="-transition";class Rc{constructor(r,s,d){this.property=r,this.value=s,this.expression=function(g,_,b){if(Id(g))return new Dh(g,_);if(Cc(g)){const C=El(g,_,b);if(C.result==="error")throw new Error(C.value.map(E=>`${E.key}: ${E.message}`).join(", "));return C.value}{let C=g;return _.type==="color"&&typeof g=="string"?C=$r.parse(g):_.type!=="padding"||typeof g!="number"&&!Array.isArray(g)?_.type!=="numberArray"||typeof g!="number"&&!Array.isArray(g)?_.type!=="colorArray"||typeof g!="string"&&!Array.isArray(g)?_.type==="variableAnchorOffsetCollection"&&Array.isArray(g)?C=ko.parse(g):_.type==="projectionDefinition"&&typeof g=="string"&&(C=Ki.parse(g)):C=Cr.parse(g):C=_n.parse(g):C=zi.parse(g),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>C}}}(s===void 0?r.specification.default:s,r.specification,d)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(r,s,d){return this.property.possiblyEvaluate(this,r,s,d)}}class Dc{constructor(r,s){this.property=r,this.value=new Rc(r,void 0,s)}transitioned(r,s){return new Ud(this.property,this.value,s,nt({},r.transition,this.transition),r.now)}untransitioned(){return new Ud(this.property,this.value,null,{},0)}}class Bl{constructor(r,s){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues),this._globalState=s}getValue(r){return ir(this._values[r].value.value)}setValue(r,s){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Dc(this._values[r].property,this._globalState)),this._values[r].value=new Rc(this._values[r].property,s===null?void 0:ir(s),this._globalState)}getTransition(r){return ir(this._values[r].transition)}setTransition(r,s){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Dc(this._values[r].property,this._globalState)),this._values[r].transition=ir(s)||void 0}serialize(){const r={};for(const s of Object.keys(this._values)){const d=this.getValue(s);d!==void 0&&(r[s]=d);const g=this.getTransition(s);g!==void 0&&(r[`${s}${Eu}`]=g)}return r}transitioned(r,s){const d=new Gd(this._properties);for(const g of Object.keys(this._values))d._values[g]=this._values[g].transitioned(r,s._values[g]);return d}untransitioned(){const r=new Gd(this._properties);for(const s of Object.keys(this._values))r._values[s]=this._values[s].untransitioned();return r}}class Ud{constructor(r,s,d,g,_){this.property=r,this.value=s,this.begin=_+g.delay||0,this.end=this.begin+g.duration||0,r.specification.transition&&(g.delay||g.duration)&&(this.prior=d)}possiblyEvaluate(r,s,d){const g=r.now||0,_=this.value.possiblyEvaluate(r,s,d),b=this.prior;if(b){if(g>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(g<this.begin)return b.possiblyEvaluate(r,s,d);{const C=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(r,s,d),_,pt(C))}}return _}}class Gd{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,s,d){const g=new ua(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(r,s,d);return g}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class qd{constructor(r,s){this._properties=r,this._values=Object.create(r.defaultPropertyValues),this._globalState=s}hasValue(r){return this._values[r].value!==void 0}getValue(r){return ir(this._values[r].value)}setValue(r,s){this._values[r]=new Rc(this._values[r].property,s===null?void 0:ir(s),this._globalState)}serialize(){const r={};for(const s of Object.keys(this._values)){const d=this.getValue(s);d!==void 0&&(r[s]=d)}return r}possiblyEvaluate(r,s,d){const g=new ua(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(r,s,d);return g}}class as{constructor(r,s,d){this.property=r,this.value=s,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,s,d,g){return this.property.evaluate(this.value,this.parameters,r,s,d,g)}}class ua{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class Wt{constructor(r){this.specification=r}possiblyEvaluate(r,s){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(s)}interpolate(r,s,d){const g=Qn[this.specification.type];return g?g(r,s,d):r}}class cr{constructor(r,s){this.specification=r,this.overrides=s}possiblyEvaluate(r,s,d,g){return new as(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(s,null,{},d,g)}:r.expression,s)}interpolate(r,s,d){if(r.value.kind!=="constant"||s.value.kind!=="constant")return r;if(r.value.value===void 0||s.value.value===void 0)return new as(this,{kind:"constant",value:void 0},r.parameters);const g=Qn[this.specification.type];if(g){const _=g(r.value.value,s.value.value,d);return new as(this,{kind:"constant",value:_},r.parameters)}return r}evaluate(r,s,d,g,_,b){return r.kind==="constant"?r.value:r.evaluate(s,d,g,_,b)}}class zc extends cr{possiblyEvaluate(r,s,d,g){if(r.value===void 0)return new as(this,{kind:"constant",value:void 0},s);if(r.expression.kind==="constant"){const _=r.expression.evaluate(s,null,{},d,g),b=r.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,C=this._calculate(b,b,b,s);return new as(this,{kind:"constant",value:C},s)}if(r.expression.kind==="camera"){const _=this._calculate(r.expression.evaluate({zoom:s.zoom-1}),r.expression.evaluate({zoom:s.zoom}),r.expression.evaluate({zoom:s.zoom+1}),s);return new as(this,{kind:"constant",value:_},s)}return new as(this,r.expression,s)}evaluate(r,s,d,g,_,b){if(r.kind==="source"){const C=r.evaluate(s,d,g,_,b);return this._calculate(C,C,C,s)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(s.zoom)-1},d,g),r.evaluate({zoom:Math.floor(s.zoom)},d,g),r.evaluate({zoom:Math.floor(s.zoom)+1},d,g),s):r.value}_calculate(r,s,d,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:r,to:s}:{from:d,to:s}}interpolate(r){return r}}class Vh{constructor(r){this.specification=r}possiblyEvaluate(r,s,d,g){if(r.value!==void 0){if(r.expression.kind==="constant"){const _=r.expression.evaluate(s,null,{},d,g);return this._calculate(_,_,_,s)}return this._calculate(r.expression.evaluate(new Sn(Math.floor(s.zoom-1),s)),r.expression.evaluate(new Sn(Math.floor(s.zoom),s)),r.expression.evaluate(new Sn(Math.floor(s.zoom+1),s)),s)}}_calculate(r,s,d,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:r,to:s}:{from:d,to:s}}interpolate(r){return r}}class Cs{constructor(r){this.specification=r}possiblyEvaluate(r,s,d,g){return!!r.expression.evaluate(s,null,{},d,g)}interpolate(){return!1}}class wi{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in r){const d=r[s];d.specification.overridable&&this.overridableProperties.push(s);const g=this.defaultPropertyValues[s]=new Rc(d,void 0,void 0),_=this.defaultTransitionablePropertyValues[s]=new Dc(d,void 0);this.defaultTransitioningPropertyValues[s]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=g.possiblyEvaluate({})}}}Gt("DataDrivenProperty",cr),Gt("DataConstantProperty",Wt),Gt("CrossFadedDataDrivenProperty",zc),Gt("CrossFadedProperty",Vh),Gt("ColorRampProperty",Cs);class Ho extends et{constructor(r,s,d){if(super(),this.id=r.id,this.type=r.type,this._globalState=d,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},this._visibilityExpression=function(g,_){return new xs(g,_)}(this.visibility,d),r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter,this._featureFilter=Mc(r.filter,d)),s.layout&&(this._unevaluatedLayout=new qd(s.layout,d)),s.paint)){this._transitionablePaint=new Bl(s.paint,d);for(const g in r.paint)this.setPaintProperty(g,r.paint[g],{validate:!1});for(const g in r.layout)this.setLayoutProperty(g,r.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ua(s.paint)}}setFilter(r){this.filter=r,this._featureFilter=Mc(r,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}getLayoutAffectingGlobalStateRefs(){const r=new Set;for(const s of this._visibilityExpression.getGlobalStateRefs())r.add(s);if(this._unevaluatedLayout)for(const s in this._unevaluatedLayout._values){const d=this._unevaluatedLayout._values[s];for(const g of d.getGlobalStateRefs())r.add(g)}for(const s of this._featureFilter.getGlobalStateRefs())r.add(s);return r}getPaintAffectingGlobalStateRefs(){var r;const s=new globalThis.Map;if(this._transitionablePaint)for(const d in this._transitionablePaint._values){const g=this._transitionablePaint._values[d].value;for(const _ of g.getGlobalStateRefs()){const b=(r=s.get(_))!==null&&r!==void 0?r:[];b.push({name:d,value:g.value}),s.set(_,b)}}return s}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(r,s,d={}){if(s==null||!this._validate(ws,`layers.${this.id}.layout.${r}`,r,s,d))return r==="visibility"?(this.visibility=s,this._visibilityExpression.setValue(s),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(r,s)}getPaintProperty(r){return r.endsWith(Eu)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,s,d={}){if(s!=null&&this._validate(bs,`layers.${this.id}.paint.${r}`,r,s,d))return!1;if(r.endsWith(Eu))return this._transitionablePaint.setTransition(r.slice(0,-11),s||void 0),!1;{const g=this._transitionablePaint._values[r],_=g.property.specification["property-type"]==="cross-faded-data-driven",b=g.value.isDataDriven(),C=g.value;this._transitionablePaint.setValue(r,s),this._handleSpecialPaintPropertyUpdate(r);const E=this._transitionablePaint._values[r].value;return E.isDataDriven()||b||_||this._handleOverridablePaintPropertyUpdate(r,C,E)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,s,d){return!1}isHidden(r=this.minzoom,s=!1){return!!(this.minzoom&&r<(s?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&r>=this.maxzoom)||this._evaluatedVisibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(r,s){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,s)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),dr(r,(s,d)=>!(s===void 0||d==="layout"&&!Object.keys(s).length||d==="paint"&&!Object.keys(s).length))}_validate(r,s,d,g,_={}){return(!_||_.validate!==!1)&&Ss(this,r.call(fi,{key:s,layerType:this.type,objectKey:d,value:g,styleSpec:Ae,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const s=this.paint.get(r);if(s instanceof as&&ss(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}let Hd;var ha={get paint(){return Hd=Hd||new wi({"raster-opacity":new Wt(Ae.paint_raster["raster-opacity"]),"raster-hue-rotate":new Wt(Ae.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Wt(Ae.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Wt(Ae.paint_raster["raster-brightness-max"]),"raster-saturation":new Wt(Ae.paint_raster["raster-saturation"]),"raster-contrast":new Wt(Ae.paint_raster["raster-contrast"]),"raster-resampling":new Wt(Ae.paint_raster["raster-resampling"]),"raster-fade-duration":new Wt(Ae.paint_raster["raster-fade-duration"])})}};class $l extends Ho{constructor(r,s){super(r,ha,s)}}const Wd={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Iu{constructor(r,s){this._structArray=r,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Fn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,s){return r._trim(),s&&(r.isTransferred=!0,s.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const s=Object.create(this.prototype);return s.arrayBuffer=r.arrayBuffer,s.length=r.length,s.capacity=r.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function pi(l,r=1){let s=0,d=0;return{members:l.map(g=>{const _=Wd[g.type].BYTES_PER_ELEMENT,b=s=qs(s,Math.max(r,_)),C=g.components||1;return d=Math.max(d,_),s+=_*C,{name:g.name,type:g.type,components:C,offset:b}}),size:qs(s,Math.max(d,r)),alignment:r}}function qs(l,r){return Math.ceil(l/r)*r}class Wo extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s){const d=this.length;return this.resize(d+1),this.emplace(d,r,s)}emplace(r,s,d){const g=2*r;return this.int16[g+0]=s,this.int16[g+1]=d,r}}Wo.prototype.bytesPerElement=4,Gt("StructArrayLayout2i4",Wo);class jl extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,d)}emplace(r,s,d,g){const _=3*r;return this.int16[_+0]=s,this.int16[_+1]=d,this.int16[_+2]=g,r}}jl.prototype.bytesPerElement=6,Gt("StructArrayLayout3i6",jl);class Oc extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,g){const _=this.length;return this.resize(_+1),this.emplace(_,r,s,d,g)}emplace(r,s,d,g,_){const b=4*r;return this.int16[b+0]=s,this.int16[b+1]=d,this.int16[b+2]=g,this.int16[b+3]=_,r}}Oc.prototype.bytesPerElement=8,Gt("StructArrayLayout4i8",Oc);class da extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,g,_,b){const C=this.length;return this.resize(C+1),this.emplace(C,r,s,d,g,_,b)}emplace(r,s,d,g,_,b,C){const E=6*r;return this.int16[E+0]=s,this.int16[E+1]=d,this.int16[E+2]=g,this.int16[E+3]=_,this.int16[E+4]=b,this.int16[E+5]=C,r}}da.prototype.bytesPerElement=12,Gt("StructArrayLayout2i4i12",da);class Uh extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,g,_,b){const C=this.length;return this.resize(C+1),this.emplace(C,r,s,d,g,_,b)}emplace(r,s,d,g,_,b,C){const E=4*r,z=8*r;return this.int16[E+0]=s,this.int16[E+1]=d,this.uint8[z+4]=g,this.uint8[z+5]=_,this.uint8[z+6]=b,this.uint8[z+7]=C,r}}Uh.prototype.bytesPerElement=8,Gt("StructArrayLayout2i4ub8",Uh);class fa extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s){const d=this.length;return this.resize(d+1),this.emplace(d,r,s)}emplace(r,s,d){const g=2*r;return this.float32[g+0]=s,this.float32[g+1]=d,r}}fa.prototype.bytesPerElement=8,Gt("StructArrayLayout2f8",fa);class pa extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d,g,_,b,C,E,z,F){const B=this.length;return this.resize(B+1),this.emplace(B,r,s,d,g,_,b,C,E,z,F)}emplace(r,s,d,g,_,b,C,E,z,F,B){const W=10*r;return this.uint16[W+0]=s,this.uint16[W+1]=d,this.uint16[W+2]=g,this.uint16[W+3]=_,this.uint16[W+4]=b,this.uint16[W+5]=C,this.uint16[W+6]=E,this.uint16[W+7]=z,this.uint16[W+8]=F,this.uint16[W+9]=B,r}}pa.prototype.bytesPerElement=20,Gt("StructArrayLayout10ui20",pa);class ku extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d,g,_,b,C,E){const z=this.length;return this.resize(z+1),this.emplace(z,r,s,d,g,_,b,C,E)}emplace(r,s,d,g,_,b,C,E,z){const F=8*r;return this.uint16[F+0]=s,this.uint16[F+1]=d,this.uint16[F+2]=g,this.uint16[F+3]=_,this.uint16[F+4]=b,this.uint16[F+5]=C,this.uint16[F+6]=E,this.uint16[F+7]=z,r}}ku.prototype.bytesPerElement=16,Gt("StructArrayLayout8ui16",ku);class Bn extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d,g,_,b,C,E,z,F,B,W){const X=this.length;return this.resize(X+1),this.emplace(X,r,s,d,g,_,b,C,E,z,F,B,W)}emplace(r,s,d,g,_,b,C,E,z,F,B,W,X){const te=12*r;return this.int16[te+0]=s,this.int16[te+1]=d,this.int16[te+2]=g,this.int16[te+3]=_,this.uint16[te+4]=b,this.uint16[te+5]=C,this.uint16[te+6]=E,this.uint16[te+7]=z,this.int16[te+8]=F,this.int16[te+9]=B,this.int16[te+10]=W,this.int16[te+11]=X,r}}Bn.prototype.bytesPerElement=24,Gt("StructArrayLayout4i4ui4i24",Bn);class Lc extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,d)}emplace(r,s,d,g){const _=3*r;return this.float32[_+0]=s,this.float32[_+1]=d,this.float32[_+2]=g,r}}Lc.prototype.bytesPerElement=12,Gt("StructArrayLayout3f12",Lc);class Fc extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint32[1*r+0]=s,r}}Fc.prototype.bytesPerElement=4,Gt("StructArrayLayout1ul4",Fc);class Gh extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d,g,_,b,C,E,z){const F=this.length;return this.resize(F+1),this.emplace(F,r,s,d,g,_,b,C,E,z)}emplace(r,s,d,g,_,b,C,E,z,F){const B=10*r,W=5*r;return this.int16[B+0]=s,this.int16[B+1]=d,this.int16[B+2]=g,this.int16[B+3]=_,this.int16[B+4]=b,this.int16[B+5]=C,this.uint32[W+3]=E,this.uint16[B+8]=z,this.uint16[B+9]=F,r}}Gh.prototype.bytesPerElement=20,Gt("StructArrayLayout6i1ul2ui20",Gh);class Ga extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,g,_,b){const C=this.length;return this.resize(C+1),this.emplace(C,r,s,d,g,_,b)}emplace(r,s,d,g,_,b,C){const E=6*r;return this.int16[E+0]=s,this.int16[E+1]=d,this.int16[E+2]=g,this.int16[E+3]=_,this.int16[E+4]=b,this.int16[E+5]=C,r}}Ga.prototype.bytesPerElement=12,Gt("StructArrayLayout2i2i2i12",Ga);class qa extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,g,_){const b=this.length;return this.resize(b+1),this.emplace(b,r,s,d,g,_)}emplace(r,s,d,g,_,b){const C=4*r,E=8*r;return this.float32[C+0]=s,this.float32[C+1]=d,this.float32[C+2]=g,this.int16[E+6]=_,this.int16[E+7]=b,r}}qa.prototype.bytesPerElement=16,Gt("StructArrayLayout2f1f2i16",qa);class Ha extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,g,_,b){const C=this.length;return this.resize(C+1),this.emplace(C,r,s,d,g,_,b)}emplace(r,s,d,g,_,b,C){const E=16*r,z=4*r,F=8*r;return this.uint8[E+0]=s,this.uint8[E+1]=d,this.float32[z+1]=g,this.float32[z+2]=_,this.int16[F+6]=b,this.int16[F+7]=C,r}}Ha.prototype.bytesPerElement=16,Gt("StructArrayLayout2ub2f2i16",Ha);class $n extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,d)}emplace(r,s,d,g){const _=3*r;return this.uint16[_+0]=s,this.uint16[_+1]=d,this.uint16[_+2]=g,r}}$n.prototype.bytesPerElement=6,Gt("StructArrayLayout3ui6",$n);class ti extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d,g,_,b,C,E,z,F,B,W,X,te,re,le,me){const Te=this.length;return this.resize(Te+1),this.emplace(Te,r,s,d,g,_,b,C,E,z,F,B,W,X,te,re,le,me)}emplace(r,s,d,g,_,b,C,E,z,F,B,W,X,te,re,le,me,Te){const pe=24*r,ye=12*r,De=48*r;return this.int16[pe+0]=s,this.int16[pe+1]=d,this.uint16[pe+2]=g,this.uint16[pe+3]=_,this.uint32[ye+2]=b,this.uint32[ye+3]=C,this.uint32[ye+4]=E,this.uint16[pe+10]=z,this.uint16[pe+11]=F,this.uint16[pe+12]=B,this.float32[ye+7]=W,this.float32[ye+8]=X,this.uint8[De+36]=te,this.uint8[De+37]=re,this.uint8[De+38]=le,this.uint32[ye+10]=me,this.int16[pe+22]=Te,r}}ti.prototype.bytesPerElement=48,Gt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ti);class Fi extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d,g,_,b,C,E,z,F,B,W,X,te,re,le,me,Te,pe,ye,De,je,ot,xt,wt,It,Bt,Rt){const St=this.length;return this.resize(St+1),this.emplace(St,r,s,d,g,_,b,C,E,z,F,B,W,X,te,re,le,me,Te,pe,ye,De,je,ot,xt,wt,It,Bt,Rt)}emplace(r,s,d,g,_,b,C,E,z,F,B,W,X,te,re,le,me,Te,pe,ye,De,je,ot,xt,wt,It,Bt,Rt,St){const mt=32*r,Kt=16*r;return this.int16[mt+0]=s,this.int16[mt+1]=d,this.int16[mt+2]=g,this.int16[mt+3]=_,this.int16[mt+4]=b,this.int16[mt+5]=C,this.int16[mt+6]=E,this.int16[mt+7]=z,this.uint16[mt+8]=F,this.uint16[mt+9]=B,this.uint16[mt+10]=W,this.uint16[mt+11]=X,this.uint16[mt+12]=te,this.uint16[mt+13]=re,this.uint16[mt+14]=le,this.uint16[mt+15]=me,this.uint16[mt+16]=Te,this.uint16[mt+17]=pe,this.uint16[mt+18]=ye,this.uint16[mt+19]=De,this.uint16[mt+20]=je,this.uint16[mt+21]=ot,this.uint16[mt+22]=xt,this.uint32[Kt+12]=wt,this.float32[Kt+13]=It,this.float32[Kt+14]=Bt,this.uint16[mt+30]=Rt,this.uint16[mt+31]=St,r}}Fi.prototype.bytesPerElement=64,Gt("StructArrayLayout8i15ui1ul2f2ui64",Fi);class Bc extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.float32[1*r+0]=s,r}}Bc.prototype.bytesPerElement=4,Gt("StructArrayLayout1f4",Bc);class Nl extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,d)}emplace(r,s,d,g){const _=3*r;return this.uint16[6*r+0]=s,this.float32[_+1]=d,this.float32[_+2]=g,r}}Nl.prototype.bytesPerElement=12,Gt("StructArrayLayout1ui2f12",Nl);class $c extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,d)}emplace(r,s,d,g){const _=4*r;return this.uint32[2*r+0]=s,this.uint16[_+2]=d,this.uint16[_+3]=g,r}}$c.prototype.bytesPerElement=8,Gt("StructArrayLayout1ul2ui8",$c);class w extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s){const d=this.length;return this.resize(d+1),this.emplace(d,r,s)}emplace(r,s,d){const g=2*r;return this.uint16[g+0]=s,this.uint16[g+1]=d,r}}w.prototype.bytesPerElement=4,Gt("StructArrayLayout2ui4",w);class n extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint16[1*r+0]=s,r}}n.prototype.bytesPerElement=2,Gt("StructArrayLayout1ui2",n);class u extends Fn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d,g){const _=this.length;return this.resize(_+1),this.emplace(_,r,s,d,g)}emplace(r,s,d,g,_){const b=4*r;return this.float32[b+0]=s,this.float32[b+1]=d,this.float32[b+2]=g,this.float32[b+3]=_,r}}u.prototype.bytesPerElement=16,Gt("StructArrayLayout4f16",u);class m extends Iu{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new x(this.anchorPointX,this.anchorPointY)}}m.prototype.size=20;class v extends Gh{get(r){return new m(this,r)}}Gt("CollisionBoxArray",v);class S extends Iu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}S.prototype.size=48;class M extends ti{get(r){return new S(this,r)}}Gt("PlacedSymbolArray",M);class k extends Iu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}k.prototype.size=64;class O extends Fi{get(r){return new k(this,r)}}Gt("SymbolInstanceArray",O);class N extends Bc{getoffsetX(r){return this.float32[1*r+0]}}Gt("GlyphOffsetArray",N);class H extends jl{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}Gt("SymbolLineVertexArray",H);class J extends Iu{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}J.prototype.size=12;class K extends Nl{get(r){return new J(this,r)}}Gt("TextAnchorOffsetArray",K);class ne extends Iu{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ne.prototype.size=8;class he extends $c{get(r){return new ne(this,r)}}Gt("FeatureIndexArray",he);class ge extends Wo{}class xe extends Wo{}class _e extends Wo{}class Me extends da{}class Oe extends Uh{}class Pe extends fa{}class ze extends pa{}class $e extends ku{}class Re extends Bn{}class We extends Lc{}class dt extends Fc{}class at extends Ga{}class lt extends Ha{}class ct extends $n{}class Dt extends w{}const zt=pi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Pt}=zt;class Nt{constructor(r=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=r}prepareSegment(r,s,d,g){const _=this.segments[this.segments.length-1];return r>Nt.MAX_VERTEX_ARRAY_LENGTH&&Tr(`Max vertices per segment is ${Nt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Nt.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!_||_.vertexLength+r>Nt.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==g?this.createNewSegment(s,d,g):_}createNewSegment(r,s,d){const g={vertexOffset:r.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0,vaos:{}};return d!==void 0&&(g.sortKey=d),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(g),g}getOrCreateLatestSegment(r,s,d){return this.prepareSegment(0,r,s,d)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const r of this.segments)for(const s in r.vaos)r.vaos[s].destroy()}static simpleSegment(r,s,d,g){return new Nt([{vertexOffset:r,primitiveOffset:s,vertexLength:d,primitiveLength:g,vaos:{},sortKey:0}])}}function zr(l,r){return 256*(l=_t(Math.floor(l),0,255))+_t(Math.floor(r),0,255)}Nt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Gt("SegmentVector",Nt);const xn=pi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Wn=pi([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Pn,Zn,En,Xn={exports:{}},ri={exports:{}},eo={exports:{}},Ei=function(){if(En)return Xn.exports;En=1;var l=(Pn||(Pn=1,ri.exports=function(s,d){var g,_,b,C,E,z,F,B;for(_=s.length-(g=3&s.length),b=d,E=3432918353,z=461845907,B=0;B<_;)F=255&s.charCodeAt(B)|(255&s.charCodeAt(++B))<<8|(255&s.charCodeAt(++B))<<16|(255&s.charCodeAt(++B))<<24,++B,b=27492+(65535&(C=5*(65535&(b=(b^=F=(65535&(F=(F=(65535&F)*E+(((F>>>16)*E&65535)<<16)&4294967295)<<15|F>>>17))*z+(((F>>>16)*z&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(F=0,g){case 3:F^=(255&s.charCodeAt(B+2))<<16;case 2:F^=(255&s.charCodeAt(B+1))<<8;case 1:b^=F=(65535&(F=(F=(65535&(F^=255&s.charCodeAt(B)))*E+(((F>>>16)*E&65535)<<16)&4294967295)<<15|F>>>17))*z+(((F>>>16)*z&65535)<<16)&4294967295}return b^=s.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0}),ri.exports),r=(Zn||(Zn=1,eo.exports=function(s,d){for(var g,_=s.length,b=d^_,C=0;_>=4;)g=1540483477*(65535&(g=255&s.charCodeAt(C)|(255&s.charCodeAt(++C))<<8|(255&s.charCodeAt(++C))<<16|(255&s.charCodeAt(++C))<<24))+((1540483477*(g>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),_-=4,++C;switch(_){case 3:b^=(255&s.charCodeAt(C+2))<<16;case 2:b^=(255&s.charCodeAt(C+1))<<8;case 1:b=1540483477*(65535&(b^=255&s.charCodeAt(C)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0}),eo.exports);return Xn.exports=l,Xn.exports.murmur3=l,Xn.exports.murmur2=r,Xn.exports}(),yn=P(Ei);class Gi{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,s,d,g){this.ids.push(Hs(r)),this.positions.push(s,d,g)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Hs(r);let d=0,g=this.ids.length-1;for(;d<g;){const b=d+g>>1;this.ids[b]>=s?g=b:d=b+1}const _=[];for(;this.ids[d]===s;)_.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return _}static serialize(r,s){const d=new Float64Array(r.ids),g=new Uint32Array(r.positions);return ma(d,g,0,d.length-1),s&&s.push(d.buffer,g.buffer),{ids:d,positions:g}}static deserialize(r){const s=new Gi;return s.ids=r.ids,s.positions=r.positions,s.indexed=!0,s}}function Hs(l){const r=+l;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:yn(String(l))}function ma(l,r,s,d){for(;s<d;){const g=l[s+d>>1];let _=s-1,b=d+1;for(;;){do _++;while(l[_]<g);do b--;while(l[b]>g);if(_>=b)break;Ws(l,_,b),Ws(r,3*_,3*b),Ws(r,3*_+1,3*b+1),Ws(r,3*_+2,3*b+2)}b-s<d-b?(ma(l,r,s,b),s=b+1):(ma(l,r,b+1,d),d=b)}}function Ws(l,r,s){const d=l[r];l[r]=l[s],l[s]=d}Gt("FeaturePositionMap",Gi);class zo{constructor(r,s){this.gl=r.gl,this.location=s}}class Wa extends zo{constructor(r,s){super(r,s),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class ga extends zo{constructor(r,s){super(r,s),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class Za extends zo{constructor(r,s){super(r,s),this.current=$r.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const Zo=new Float32Array(16);function ya(l){return[zr(255*l.r,255*l.g),zr(255*l.b,255*l.a)]}class Ts{constructor(r,s,d){this.value=r,this.uniformNames=s.map(g=>`u_${g}`),this.type=d}setUniform(r,s,d){r.set(d.constantOr(this.value))}getBinding(r,s,d){return this.type==="color"?new Za(r,s):new Wa(r,s)}}class Ms{constructor(r,s){this.uniformNames=s.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=r.tlbr}setConstantDashPositions(r,s){this.dashTo=[0,r.y,r.height,r.width],this.dashFrom=[0,s.y,s.height,s.width]}setUniform(r,s,d,g){let _=null;g==="u_pattern_to"?_=this.patternTo:g==="u_pattern_from"?_=this.patternFrom:g==="u_dasharray_to"?_=this.dashTo:g==="u_dasharray_from"?_=this.dashFrom:g==="u_pixel_ratio_to"?_=this.pixelRatioTo:g==="u_pixel_ratio_from"&&(_=this.pixelRatioFrom),_!==null&&r.set(_)}getBinding(r,s,d){return d.substr(0,9)==="u_pattern"||d.substr(0,12)==="u_dasharray_"?new ga(r,s):new Wa(r,s)}}class Rn{constructor(r,s,d,g){this.expression=r,this.type=d,this.maxValue=0,this.paintVertexAttributes=s.map(_=>({name:`a_${_}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(r,s,d){const g=this.paintVertexArray.length,_=this.expression.evaluate(new Sn(0,d),s,{},d.canonical,[],d.formattedSection);this.paintVertexArray.resize(r),this._setPaintValue(g,r,_)}updatePaintArray(r,s,d,g,_){const b=this.expression.evaluate(new Sn(0,_),d,g);this._setPaintValue(r,s,b)}_setPaintValue(r,s,d){if(this.type==="color"){const g=ya(d);for(let _=r;_<s;_++)this.paintVertexArray.emplace(_,g[0],g[1])}else{for(let g=r;g<s;g++)this.paintVertexArray.emplace(g,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class In{constructor(r,s,d,g,_,b){this.expression=r,this.uniformNames=s.map(C=>`u_${C}_t`),this.type=d,this.useIntegerZoom=g,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=s.map(C=>({name:`a_${C}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new b}populatePaintArray(r,s,d){const g=this.expression.evaluate(new Sn(this.zoom,d),s,{},d.canonical,[],d.formattedSection),_=this.expression.evaluate(new Sn(this.zoom+1,d),s,{},d.canonical,[],d.formattedSection),b=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(b,r,g,_)}updatePaintArray(r,s,d,g,_){const b=this.expression.evaluate(new Sn(this.zoom,_),d,g),C=this.expression.evaluate(new Sn(this.zoom+1,_),d,g);this._setPaintValue(r,s,b,C)}_setPaintValue(r,s,d,g){if(this.type==="color"){const _=ya(d),b=ya(g);for(let C=r;C<s;C++)this.paintVertexArray.emplace(C,_[0],_[1],b[0],b[1])}else{for(let _=r;_<s;_++)this.paintVertexArray.emplace(_,d,g);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(g))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,s){const d=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,g=_t(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);r.set(g)}getBinding(r,s,d){return new Wa(r,s)}}class Bi{constructor(r,s,d,g,_,b){this.expression=r,this.type=s,this.useIntegerZoom=d,this.zoom=g,this.layerId=b,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(r,s,d){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(g,r,this.getPositionIds(s),d)}updatePaintArray(r,s,d,g,_){this._setPaintValues(r,s,this.getPositionIds(d),_)}_setPaintValues(r,s,d,g){const _=this.getPositions(g);if(!_||!d)return;const b=_[d.min],C=_[d.mid],E=_[d.max];if(b&&C&&E)for(let z=r;z<s;z++)this.emplace(this.zoomInPaintVertexArray,z,C,b),this.emplace(this.zoomOutPaintVertexArray,z,C,E)}upload(r){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const s=this.getVertexAttributes();this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,s,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,s,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class qi extends Bi{getPositions(r){return r.imagePositions}getPositionIds(r){return r.patterns&&r.patterns[this.layerId]}getVertexAttributes(){return xn.members}emplace(r,s,d,g){r.emplace(s,d.tlbr[0],d.tlbr[1],d.tlbr[2],d.tlbr[3],g.tlbr[0],g.tlbr[1],g.tlbr[2],g.tlbr[3],d.pixelRatio,g.pixelRatio)}}class Oo extends Bi{getPositions(r){return r.dashPositions}getPositionIds(r){return r.dashes&&r.dashes[this.layerId]}getVertexAttributes(){return Wn.members}emplace(r,s,d,g){r.emplace(s,0,d.y,d.height,d.width,0,g.y,g.height,g.width)}}class bo{constructor(r,s,d){this.binders={},this._buffers=[];const g=[];for(const _ in r.paint._values){if(!d(_))continue;const b=r.paint.get(_);if(!(b instanceof as&&ss(b.property.specification)))continue;const C=Mm(_,r.type),E=b.value,z=b.property.specification.type,F=b.property.useIntegerZoom,B=b.property.specification["property-type"],W=B==="cross-faded"||B==="cross-faded-data-driven";if(E.kind==="constant")this.binders[_]=W?new Ms(E.value,C):new Ts(E.value,C,z),g.push(`/u_${_}`);else if(E.kind==="source"||W){const X=up(_,z,"source");this.binders[_]=W?_==="line-dasharray"?new Oo(E,z,F,s,X,r.id):new qi(E,z,F,s,X,r.id):new Rn(E,C,z,X),g.push(`/a_${_}`)}else{const X=up(_,z,"composite");this.binders[_]=new In(E,C,z,F,s,X),g.push(`/z_${_}`)}}this.cacheKey=g.sort().join("")}getMaxValue(r){const s=this.binders[r];return s instanceof Rn||s instanceof In?s.maxValue:0}populatePaintArrays(r,s,d){for(const g in this.binders){const _=this.binders[g];(_ instanceof Rn||_ instanceof In||_ instanceof Bi)&&_.populatePaintArray(r,s,d)}}setConstantPatternPositions(r,s){for(const d in this.binders){const g=this.binders[d];g instanceof Ms&&g.setConstantPatternPositions(r,s)}}setConstantDashPositions(r,s){for(const d in this.binders){const g=this.binders[d];g instanceof Ms&&g.setConstantDashPositions(r,s)}}updatePaintArrays(r,s,d,g,_){let b=!1;for(const C in r){const E=s.getPositions(C);for(const z of E){const F=d.feature(z.index);for(const B in this.binders){const W=this.binders[B];if((W instanceof Rn||W instanceof In||W instanceof Bi)&&W.expression.isStateDependent===!0){const X=g.paint.get(B);W.expression=X.value,W.updatePaintArray(z.start,z.end,F,r[C],_),b=!0}}}}return b}defines(){const r=[];for(const s in this.binders){const d=this.binders[s];(d instanceof Ts||d instanceof Ms)&&r.push(...d.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return r}getBinderAttributes(){const r=[];for(const s in this.binders){const d=this.binders[s];if(d instanceof Rn||d instanceof In)for(let g=0;g<d.paintVertexAttributes.length;g++)r.push(d.paintVertexAttributes[g].name);else if(d instanceof Bi){const g=d.getVertexAttributes();for(const _ of g)r.push(_.name)}}return r}getBinderUniforms(){const r=[];for(const s in this.binders){const d=this.binders[s];if(d instanceof Ts||d instanceof Ms||d instanceof In)for(const g of d.uniformNames)r.push(g)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,s){const d=[];for(const g in this.binders){const _=this.binders[g];if(_ instanceof Ts||_ instanceof Ms||_ instanceof In){for(const b of _.uniformNames)if(s[b]){const C=_.getBinding(r,s[b],b);d.push({name:b,property:g,binding:C})}}}return d}setUniforms(r,s,d,g){for(const{name:_,property:b,binding:C}of s)this.binders[b].setUniform(C,g,d.get(b),_)}updatePaintBuffers(r){this._buffers=[];for(const s in this.binders){const d=this.binders[s];if(r&&d instanceof Bi){const g=r.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(d instanceof Rn||d instanceof In)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(r){for(const s in this.binders){const d=this.binders[s];(d instanceof Rn||d instanceof In||d instanceof Bi)&&d.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const s=this.binders[r];(s instanceof Rn||s instanceof In||s instanceof Bi)&&s.destroy()}}}class Vl{constructor(r,s,d=()=>!0){this.programConfigurations={};for(const g of r)this.programConfigurations[g.id]=new bo(g,s,d);this.needsUpload=!1,this._featureMap=new Gi,this._bufferOffset=0}populatePaintArrays(r,s,d,g){for(const _ in this.programConfigurations)this.programConfigurations[_].populatePaintArrays(r,s,g);s.id!==void 0&&this._featureMap.add(s.id,d,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,s,d,g){for(const _ of d)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(r,this._featureMap,s,_,g)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function Mm(l,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${r}-`,"").replace(/-/g,"_")]}function up(l,r,s){const d={color:{source:fa,composite:u},number:{source:Bc,composite:fa}},g=function(_){return{"line-pattern":{source:ze,composite:ze},"fill-pattern":{source:ze,composite:ze},"fill-extrusion-pattern":{source:ze,composite:ze},"line-dasharray":{source:$e,composite:$e}}[_]}(l);return g&&g[s]||d[r][s]}Gt("ConstantBinder",Ts),Gt("CrossFadedConstantBinder",Ms),Gt("SourceExpressionBinder",Rn),Gt("CrossFadedPatternBinder",qi),Gt("CrossFadedDasharrayBinder",Oo),Gt("CompositeExpressionBinder",In),Gt("ProgramConfiguration",bo,{omit:["_buffers"]}),Gt("ProgramConfigurationSet",Vl);const Zd=Math.pow(2,14)-1,Xa=-Zd-1;function va(l){const r=Ve/l.extent,s=l.loadGeometry();for(let d=0;d<s.length;d++){const g=s[d];for(let _=0;_<g.length;_++){const b=g[_],C=Math.round(b.x*r),E=Math.round(b.y*r);b.x=_t(C,Xa,Zd),b.y=_t(E,Xa,Zd),(C<b.x||C>b.x+1||E<b.y||E>b.y+1)&&Tr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Ka(l,r){return{type:l.type,id:l.id,properties:l.properties,geometry:r?va(l):[]}}const qh=-32768;function Xd(l,r,s,d,g){l.emplaceBack(qh+8*r+d,qh+8*s+g)}class Hh{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasDependencies=!1,this.layoutVertexArray=new xe,this.indexArray=new ct,this.segments=new Nt,this.programConfigurations=new Vl(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,d){const g=this.layers[0],_=[];let b=null,C=!1,E=g.type==="heatmap";if(g.type==="circle"){const F=g;b=F.layout.get("circle-sort-key"),C=!b.isConstant(),E=E||F.paint.get("circle-pitch-alignment")==="map"}const z=E?s.subdivisionGranularity.circle:1;for(const{feature:F,id:B,index:W,sourceLayerIndex:X}of r){const te=this.layers[0]._featureFilter.needGeometry,re=Ka(F,te);if(!this.layers[0]._featureFilter.filter(new Sn(this.zoom),re,d))continue;const le=C?b.evaluate(re,{},d):void 0,me={id:B,properties:F.properties,type:F.type,sourceLayerIndex:X,index:W,geometry:te?re.geometry:va(F),patterns:{},sortKey:le};_.push(me)}C&&_.sort((F,B)=>F.sortKey-B.sortKey);for(const F of _){const{geometry:B,index:W,sourceLayerIndex:X}=F,te=r[W].feature;this.addFeature(F,B,W,d,z),s.featureIndex.insert(te,B,W,X,this.index)}}update(r,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,{imagePositions:d})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Pt),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,s,d,g,_=1){let b;switch(_){case 1:b=[0,7];break;case 3:b=[0,2,5,7];break;case 5:b=[0,1,3,4,6,7];break;case 7:b=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${_}; valid values are 1, 3, 5, 7.`)}const C=b.length;for(const E of s)for(const z of E){const F=z.x,B=z.y;if(F<0||F>=Ve||B<0||B>=Ve)continue;const W=this.segments.prepareSegment(C*C,this.layoutVertexArray,this.indexArray,r.sortKey),X=W.vertexLength;for(let te=0;te<C;te++)for(let re=0;re<C;re++)Xd(this.layoutVertexArray,F,B,b[re],b[te]);for(let te=0;te<C-1;te++)for(let re=0;re<C-1;re++){const le=X+te*C+re,me=X+(te+1)*C+re;this.indexArray.emplaceBack(le,me+1,le+1),this.indexArray.emplaceBack(le,me,me+1)}W.vertexLength+=C*C,W.primitiveLength+=(C-1)*(C-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,{imagePositions:{},canonical:g})}}function Au(l,r){for(let s=0;s<l.length;s++)if(jc(r,l[s]))return!0;for(let s=0;s<r.length;s++)if(jc(l,r[s]))return!0;return!!Yd(l,r)}function Kd(l,r,s){return!!jc(l,r)||!!Pm(r,l,s)}function cy(l,r){if(l.length===1)return hy(r,l[0]);for(let s=0;s<r.length;s++){const d=r[s];for(let g=0;g<d.length;g++)if(jc(l,d[g]))return!0}for(let s=0;s<l.length;s++)if(hy(r,l[s]))return!0;for(let s=0;s<r.length;s++)if(Yd(l,r[s]))return!0;return!1}function uy(l,r,s){if(l.length>1){if(Yd(l,r))return!0;for(let d=0;d<r.length;d++)if(Pm(r[d],l,s))return!0}for(let d=0;d<l.length;d++)if(Pm(l[d],r,s))return!0;return!1}function Yd(l,r){if(l.length===0||r.length===0)return!1;for(let s=0;s<l.length-1;s++){const d=l[s],g=l[s+1];for(let _=0;_<r.length-1;_++)if(w1(d,g,r[_],r[_+1]))return!0}return!1}function w1(l,r,s,d){return or(l,s,d)!==or(r,s,d)&&or(l,r,s)!==or(l,r,d)}function Pm(l,r,s){const d=s*s;if(r.length===1)return l.distSqr(r[0])<d;for(let g=1;g<r.length;g++)if(Em(l,r[g-1],r[g])<d)return!0;return!1}function Em(l,r,s){const d=r.distSqr(s);if(d===0)return l.distSqr(r);const g=((l.x-r.x)*(s.x-r.x)+(l.y-r.y)*(s.y-r.y))/d;return l.distSqr(g<0?r:g>1?s:s.sub(r)._mult(g)._add(r))}function hy(l,r){let s,d,g,_=!1;for(let b=0;b<l.length;b++){s=l[b];for(let C=0,E=s.length-1;C<s.length;E=C++)d=s[C],g=s[E],d.y>r.y!=g.y>r.y&&r.x<(g.x-d.x)*(r.y-d.y)/(g.y-d.y)+d.x&&(_=!_)}return _}function jc(l,r){let s=!1;for(let d=0,g=l.length-1;d<l.length;g=d++){const _=l[d],b=l[g];_.y>r.y!=b.y>r.y&&r.x<(b.x-_.x)*(r.y-_.y)/(b.y-_.y)+_.x&&(s=!s)}return s}function Nc(l,r,s){const d=s[0],g=s[2];if(l.x<d.x&&r.x<d.x||l.x>g.x&&r.x>g.x||l.y<d.y&&r.y<d.y||l.y>g.y&&r.y>g.y)return!1;const _=or(l,r,s[0]);return _!==or(l,r,s[1])||_!==or(l,r,s[2])||_!==or(l,r,s[3])}function Jd(l,r,s){const d=r.paint.get(l).value;return d.kind==="constant"?d.value:s.programConfigurations.get(r.id).getMaxValue(l)}function hp(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function Qd(l,r,s,d,g){if(!r[0]&&!r[1])return l;const _=x.convert(r)._mult(g);s==="viewport"&&_._rotate(-d);const b=[];for(let C=0;C<l.length;C++)b.push(l[C].sub(_));return b}function y0(l){const r=[];for(let s=0;s<l.length;s++){const d=l[s],g=r.at(-1);(s===0||g&&!d.equals(g))&&r.push(d)}return r}function v0({queryGeometry:l,size:r},s){return Kd(l,s,r)}function dp({queryGeometry:l,size:r,transform:s,unwrappedTileID:d,getElevation:g},_){return Kd(l,_,r*(s.projectTileCoordinates(_.x,_.y,d,g).signedDistanceFromCamera/s.cameraToCenterDistance))}function Xo({queryGeometry:l,size:r,transform:s,unwrappedTileID:d,getElevation:g},_){const b=s.projectTileCoordinates(_.x,_.y,d,g).signedDistanceFromCamera,C=r*(s.cameraToCenterDistance/b);return Kd(l,ef(_,s,d,g),C)}function S1({queryGeometry:l,size:r,transform:s,unwrappedTileID:d,getElevation:g},_){return Kd(l,ef(_,s,d,g),r)}function _0({queryGeometry:l,size:r,transform:s,unwrappedTileID:d,getElevation:g,pitchAlignment:_="map",pitchScale:b="map"},C){const E=_==="map"?b==="map"?v0:dp:b==="map"?Xo:S1,z={queryGeometry:l,size:r,transform:s,unwrappedTileID:d,getElevation:g};for(const F of C)for(const B of F)if(E(z,B))return!0;return!1}function ef(l,r,s,d){const g=r.projectTileCoordinates(l.x,l.y,s,d).point;return new x((.5*g.x+.5)*r.width,(.5*-g.y+.5)*r.height)}let Lo,x0;Gt("CircleBucket",Hh,{omit:["layers"]});var hr={get paint(){return x0=x0||new wi({"circle-radius":new cr(Ae.paint_circle["circle-radius"]),"circle-color":new cr(Ae.paint_circle["circle-color"]),"circle-blur":new cr(Ae.paint_circle["circle-blur"]),"circle-opacity":new cr(Ae.paint_circle["circle-opacity"]),"circle-translate":new Wt(Ae.paint_circle["circle-translate"]),"circle-translate-anchor":new Wt(Ae.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Wt(Ae.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Wt(Ae.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new cr(Ae.paint_circle["circle-stroke-width"]),"circle-stroke-color":new cr(Ae.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new cr(Ae.paint_circle["circle-stroke-opacity"])})},get layout(){return Lo=Lo||new wi({"circle-sort-key":new cr(Ae.layout_circle["circle-sort-key"])})}};class tf extends Ho{constructor(r,s){super(r,hr,s)}createBucket(r){return new Hh(r)}queryRadius(r){const s=r;return Jd("circle-radius",this,s)+Jd("circle-stroke-width",this,s)+hp(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:r,feature:s,featureState:d,geometry:g,transform:_,pixelsToTileUnits:b,unwrappedTileID:C,getElevation:E}){const z=Qd(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-_.bearingInRadians,b),F=this.paint.get("circle-radius").evaluate(s,d)+this.paint.get("circle-stroke-width").evaluate(s,d),B=this.paint.get("circle-pitch-scale"),W=this.paint.get("circle-pitch-alignment");let X,te;return W==="map"?(X=z,te=F*b):(X=function(re,le,me,Te){return re.map(pe=>ef(pe,le,me,Te))}(z,_,C,E),te=F),_0({queryGeometry:X,size:te,transform:_,unwrappedTileID:C,getElevation:E,pitchAlignment:W,pitchScale:B},g)}}class Im extends Hh{}let dy;Gt("HeatmapBucket",Im,{omit:["layers"]});var C1={get paint(){return dy=dy||new wi({"heatmap-radius":new cr(Ae.paint_heatmap["heatmap-radius"]),"heatmap-weight":new cr(Ae.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Wt(Ae.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Cs(Ae.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Wt(Ae.paint_heatmap["heatmap-opacity"])})}};function Wh(l,{width:r,height:s},d,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==r*s*d)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${r*s*d}`)}else g=new Uint8Array(r*s*d);return l.width=r,l.height=s,l.data=g,l}function fp(l,{width:r,height:s},d){if(r===l.width&&s===l.height)return;const g=Wh({},{width:r,height:s},d);pp(l,g,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,r),height:Math.min(l.height,s)},d),l.width=r,l.height=s,l.data=g.data}function pp(l,r,s,d,g,_){if(g.width===0||g.height===0)return r;if(g.width>l.width||g.height>l.height||s.x>l.width-g.width||s.y>l.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>r.width||g.height>r.height||d.x>r.width-g.width||d.y>r.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const b=l.data,C=r.data;if(b===C)throw new Error("srcData equals dstData, so image is already copied");for(let E=0;E<g.height;E++){const z=((s.y+E)*l.width+s.x)*_,F=((d.y+E)*r.width+d.x)*_;for(let B=0;B<g.width*_;B++)C[F+B]=b[z+B]}return r}class rf{constructor(r,s){Wh(this,r,1,s)}resize(r){fp(this,r,1)}clone(){return new rf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,d,g,_){pp(r,s,d,g,_,1)}}class Ko{constructor(r,s){Wh(this,r,4,s)}resize(r){fp(this,r,4)}replace(r,s){s?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Ko({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,d,g,_){pp(r,s,d,g,_,4)}setPixel(r,s,d){const g=4*(r*this.width+s);this.data[g+0]=Math.round(255*d.r/d.a),this.data[g+1]=Math.round(255*d.g/d.a),this.data[g+2]=Math.round(255*d.b/d.a),this.data[g+3]=Math.round(255*d.a)}}function fy(l){const r={},s=l.resolution||256,d=l.clips?l.clips.length:1,g=l.image||new Ko({width:s,height:d});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const _=(b,C,E)=>{r[l.evaluationKey]=E;const z=l.expression.evaluate(r);g.setPixel(b/4/s,C/4,z)};if(l.clips)for(let b=0,C=0;b<d;++b,C+=4*s)for(let E=0,z=0;E<s;E++,z+=4){const F=E/(s-1),{start:B,end:W}=l.clips[b];_(C,z,B*(1-F)+W*F)}else for(let b=0,C=0;b<s;b++,C+=4)_(0,C,b/(s-1));return g}Gt("AlphaImage",rf),Gt("RGBAImage",Ko);const mp="big-fb";class py extends Ho{createBucket(r){return new Im(r)}constructor(r,s){super(r,C1,s),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=fy({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(mp)&&this.heatmapFbos.delete(mp)}queryRadius(r){return Jd("heatmap-radius",this,r)}queryIntersectsFeature({queryGeometry:r,feature:s,featureState:d,geometry:g,transform:_,pixelsToTileUnits:b,unwrappedTileID:C,getElevation:E}){return _0({queryGeometry:r,size:this.paint.get("heatmap-radius").evaluate(s,d)*b,transform:_,unwrappedTileID:C,getElevation:E},g)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&!this.isHidden()}}let wo;var Ya={get paint(){return wo=wo||new wi({"hillshade-illumination-direction":new Wt(Ae.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Wt(Ae.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Wt(Ae.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Wt(Ae.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Wt(Ae.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Wt(Ae.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Wt(Ae.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Wt(Ae.paint_hillshade["hillshade-method"])})}};class Ru extends Ho{constructor(r,s){super(r,Ya,s),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let r=this.paint.get("hillshade-illumination-direction").values,s=this.paint.get("hillshade-illumination-altitude").values,d=this.paint.get("hillshade-highlight-color").values,g=this.paint.get("hillshade-shadow-color").values;const _=Math.max(r.length,s.length,d.length,g.length);r=r.concat(Array(_-r.length).fill(r.at(-1))),s=s.concat(Array(_-s.length).fill(s.at(-1))),d=d.concat(Array(_-d.length).fill(d.at(-1))),g=g.concat(Array(_-g.length).fill(g.at(-1)));const b=s.map(On);return{directionRadians:r.map(On),altitudeRadians:b,shadowColor:g,highlightColor:d}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&!this.isHidden()}}let my;var b0={get paint(){return my=my||new wi({"color-relief-opacity":new Wt(Ae["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Cs(Ae["paint_color-relief"]["color-relief-color"])})}};class Zs{constructor(r,s,d,g){this.context=r,this.format=d,this.texture=r.gl.createTexture(),this.update(s,g)}update(r,s,d){const{width:g,height:_}=r,b=!(this.size&&this.size[0]===g&&this.size[1]===_||d),{context:C}=this,{gl:E}=C;if(this.useMipmap=!!(s&&s.useMipmap),E.bindTexture(E.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!s||s.premultiply!==!1)),b)this.size=[g,_],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||Xt(r)?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,r):E.texImage2D(E.TEXTURE_2D,0,this.format,g,_,0,this.format,E.UNSIGNED_BYTE,r.data);else{const{x:z,y:F}=d||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||Xt(r)?E.texSubImage2D(E.TEXTURE_2D,0,z,F,E.RGBA,E.UNSIGNED_BYTE,r):E.texSubImage2D(E.TEXTURE_2D,0,z,F,g,_,E.RGBA,E.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&E.generateMipmap(E.TEXTURE_2D),C.pixelStoreUnpackFlipY.setDefault(),C.pixelStoreUnpack.setDefault(),C.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(r,s,d){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),d!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=_.LINEAR),r!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,r),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,d||r),this.filter=r),s!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,s),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}class gy{constructor(r,s,d,g=1,_=1,b=1,C=0){if(this.uid=r,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void Tr(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const E=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=_,this.blueFactor=b,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let z=0;z<E;z++)this.data[this._idx(-1,z)]=this.data[this._idx(0,z)],this.data[this._idx(E,z)]=this.data[this._idx(E-1,z)],this.data[this._idx(z,-1)]=this.data[this._idx(z,0)],this.data[this._idx(z,E)]=this.data[this._idx(z,E-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(E,-1)]=this.data[this._idx(E-1,0)],this.data[this._idx(-1,E)]=this.data[this._idx(0,E-1)],this.data[this._idx(E,E)]=this.data[this._idx(E-1,E-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let z=0;z<E;z++)for(let F=0;F<E;F++){const B=this.get(z,F);B>this.max&&(this.max=B),B<this.min&&(this.min=B)}}get(r,s){const d=new Uint8Array(this.data.buffer),g=4*this._idx(r,s);return this.unpack(d[g],d[g+1],d[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,s){if(r<-1||r>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${r}, y: ${s}, dim: ${this.dim}`);return(s+1)*this.stride+(r+1)}unpack(r,s,d){return r*this.redFactor+s*this.greenFactor+d*this.blueFactor-this.baseShift}pack(r){return Ja(r,this.getUnpackVector())}getPixels(){return new Ko({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,s,d){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let g=s*this.dim,_=s*this.dim+this.dim,b=d*this.dim,C=d*this.dim+this.dim;switch(s){case-1:g=_-1;break;case 1:_=g+1}switch(d){case-1:b=C-1;break;case 1:C=b+1}const E=-s*this.dim,z=-d*this.dim;for(let F=b;F<C;F++)for(let B=g;B<_;B++)this.data[this._idx(B,F)]=r.data[this._idx(B+E,F+z)]}}function Ja(l,r){const s=r[0],d=r[1],g=r[2],_=r[3],b=Math.min(s,d,g),C=Math.round((l+_)/b);return{r:Math.floor(C*b/s)%256,g:Math.floor(C*b/d)%256,b:Math.floor(C*b/g)%256}}Gt("DEMData",gy);class T1 extends Ho{constructor(r,s){super(r,b0,s)}_createColorRamp(r){const s={elevationStops:[],colorStops:[]},d=this._transitionablePaint._values["color-relief-color"].value.expression;if(d instanceof Pl&&d._styleExpression.expression instanceof Yi){this.colorRampExpression=d;const b=d._styleExpression.expression;s.elevationStops=b.labels,s.colorStops=[];for(const C of s.elevationStops)s.colorStops.push(b.evaluate({globals:{elevation:C}}))}if(s.elevationStops.length<1&&(s.elevationStops=[0],s.colorStops=[$r.transparent]),s.elevationStops.length<2&&(s.elevationStops.push(s.elevationStops[0]+1),s.colorStops.push(s.colorStops[0])),s.elevationStops.length<=r)return s;const g={elevationStops:[],colorStops:[]},_=(s.elevationStops.length-1)/(r-1);for(let b=0;b<s.elevationStops.length-.5;b+=_)g.elevationStops.push(s.elevationStops[Math.round(b)]),g.colorStops.push(s.colorStops[Math.round(b)]);return Tr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${r}, provided: ${s.elevationStops.length}`),g}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(r,s,d){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const g=this._createColorRamp(s),_=new Ko({width:g.colorStops.length,height:1}),b=new Ko({width:g.colorStops.length,height:1});for(let C=0;C<g.elevationStops.length;C++){const E=Ja(g.elevationStops[C],d);b.setPixel(0,C,new $r(E.r/255,E.g/255,E.b/255,1)),_.setPixel(0,C,g.colorStops[C])}return this.colorRampTextures={elevationTexture:new Zs(r,b,r.gl.RGBA),colorTexture:new Zs(r,_,r.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}const w0=pi([{name:"a_pos",components:2,type:"Int16"}],4),{members:S0}=w0;function gp(l,r,s){const d=s.patternDependencies;let g=!1;for(const _ of r){const b=_.paint.get(`${l}-pattern`);b.isConstant()||(g=!0);const C=b.constantOr(null);C&&(g=!0,d[C.to]=!0,d[C.from]=!0)}return g}function km(l,r,s,d,g){const{zoom:_}=d,b=g.patternDependencies;for(const C of r){const E=C.paint.get(`${l}-pattern`).value;if(E.kind!=="constant"){let z=E.evaluate({zoom:_-1},s,{},g.availableImages),F=E.evaluate({zoom:_},s,{},g.availableImages),B=E.evaluate({zoom:_+1},s,{},g.availableImages);z=z&&z.name?z.name:z,F=F&&F.name?F.name:F,B=B&&B.name?B.name:B,b[z]=!0,b[F]=!0,b[B]=!0,s.patterns[C.id]={min:z,mid:F,max:B}}}return s}function C0(l,r,s,d,g){let _;if(g===function(b,C,E,z){let F=0;for(let B=C,W=E-z;B<E;B+=z)F+=(b[W]-b[B])*(b[B+1]+b[W+1]),W=B;return F}(l,r,s,d)>0)for(let b=r;b<s;b+=d)_=Uc(b/d|0,l[b],l[b+1],_);else for(let b=s-d;b>=r;b-=d)_=Uc(b/d|0,l[b],l[b+1],_);return _&&po(_,_.next)&&(Lu(_),_=_.next),_}function Ul(l,r){if(!l)return l;r||(r=l);let s,d=l;do if(s=!1,d.steiner||!po(d,d.next)&&ni(d.prev,d,d.next)!==0)d=d.next;else{if(Lu(d),d=r=d.prev,d===d.next)break;s=!0}while(s||d!==r);return r}function Zh(l,r,s,d,g,_,b){if(!l)return;!b&&_&&function(E,z,F,B){let W=E;do W.z===0&&(W.z=Hi(W.x,W.y,z,F,B)),W.prevZ=W.prev,W.nextZ=W.next,W=W.next;while(W!==E);W.prevZ.nextZ=null,W.prevZ=null,function(X){let te,re=1;do{let le,me=X;X=null;let Te=null;for(te=0;me;){te++;let pe=me,ye=0;for(let je=0;je<re&&(ye++,pe=pe.nextZ,pe);je++);let De=re;for(;ye>0||De>0&&pe;)ye!==0&&(De===0||!pe||me.z<=pe.z)?(le=me,me=me.nextZ,ye--):(le=pe,pe=pe.nextZ,De--),Te?Te.nextZ=le:X=le,le.prevZ=Te,Te=le;me=pe}Te.nextZ=null,re*=2}while(te>1)}(W)}(l,d,g,_);let C=l;for(;l.prev!==l.next;){const E=l.prev,z=l.next;if(_?bn(l,d,g,_):_a(l))r.push(E.i,l.i,z.i),Lu(l),l=z.next,C=z.next;else if((l=z)===C){b?b===1?Zh(l=So(Ul(l),r),r,s,d,g,_,2):b===2&&to(l,r,s,d,g,_):Zh(Ul(l),r,s,d,g,_,1);break}}}function _a(l){const r=l.prev,s=l,d=l.next;if(ni(r,s,d)>=0)return!1;const g=r.x,_=s.x,b=d.x,C=r.y,E=s.y,z=d.y,F=Math.min(g,_,b),B=Math.min(C,E,z),W=Math.max(g,_,b),X=Math.max(C,E,z);let te=d.next;for(;te!==r;){if(te.x>=F&&te.x<=W&&te.y>=B&&te.y<=X&&zu(g,C,_,E,b,z,te.x,te.y)&&ni(te.prev,te,te.next)>=0)return!1;te=te.next}return!0}function bn(l,r,s,d){const g=l.prev,_=l,b=l.next;if(ni(g,_,b)>=0)return!1;const C=g.x,E=_.x,z=b.x,F=g.y,B=_.y,W=b.y,X=Math.min(C,E,z),te=Math.min(F,B,W),re=Math.max(C,E,z),le=Math.max(F,B,W),me=Hi(X,te,r,s,d),Te=Hi(re,le,r,s,d);let pe=l.prevZ,ye=l.nextZ;for(;pe&&pe.z>=me&&ye&&ye.z<=Te;){if(pe.x>=X&&pe.x<=re&&pe.y>=te&&pe.y<=le&&pe!==g&&pe!==b&&zu(C,F,E,B,z,W,pe.x,pe.y)&&ni(pe.prev,pe,pe.next)>=0||(pe=pe.prevZ,ye.x>=X&&ye.x<=re&&ye.y>=te&&ye.y<=le&&ye!==g&&ye!==b&&zu(C,F,E,B,z,W,ye.x,ye.y)&&ni(ye.prev,ye,ye.next)>=0))return!1;ye=ye.nextZ}for(;pe&&pe.z>=me;){if(pe.x>=X&&pe.x<=re&&pe.y>=te&&pe.y<=le&&pe!==g&&pe!==b&&zu(C,F,E,B,z,W,pe.x,pe.y)&&ni(pe.prev,pe,pe.next)>=0)return!1;pe=pe.prevZ}for(;ye&&ye.z<=Te;){if(ye.x>=X&&ye.x<=re&&ye.y>=te&&ye.y<=le&&ye!==g&&ye!==b&&zu(C,F,E,B,z,W,ye.x,ye.y)&&ni(ye.prev,ye,ye.next)>=0)return!1;ye=ye.nextZ}return!0}function So(l,r){let s=l;do{const d=s.prev,g=s.next.next;!po(d,g)&&Am(d,s,s.next,g)&&Ou(d,g)&&Ou(g,d)&&(r.push(d.i,s.i,g.i),Lu(s),Lu(s.next),s=l=g),s=s.next}while(s!==l);return Ul(s)}function to(l,r,s,d,g,_){let b=l;do{let C=b.next.next;for(;C!==b.prev;){if(b.i!==C.i&&yy(b,C)){let E=Rm(b,C);return b=Ul(b,b.next),E=Ul(E,E.next),Zh(b,r,s,d,g,_,0),void Zh(E,r,s,d,g,_,0)}C=C.next}b=b.next}while(b!==l)}function Fo(l,r){let s=l.x-r.x;return s===0&&(s=l.y-r.y,s===0)&&(s=(l.next.y-l.y)/(l.next.x-l.x)-(r.next.y-r.y)/(r.next.x-r.x)),s}function Xs(l,r){const s=function(g,_){let b=_;const C=g.x,E=g.y;let z,F=-1/0;if(po(g,b))return b;do{if(po(g,b.next))return b.next;if(E<=b.y&&E>=b.next.y&&b.next.y!==b.y){const re=b.x+(E-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(re<=C&&re>F&&(F=re,z=b.x<b.next.x?b:b.next,re===C))return z}b=b.next}while(b!==_);if(!z)return null;const B=z,W=z.x,X=z.y;let te=1/0;b=z;do{if(C>=b.x&&b.x>=W&&C!==b.x&&Du(E<X?C:F,E,W,X,E<X?F:C,E,b.x,b.y)){const re=Math.abs(E-b.y)/(C-b.x);Ou(b,g)&&(re<te||re===te&&(b.x>z.x||b.x===z.x&&nf(z,b)))&&(z=b,te=re)}b=b.next}while(b!==B);return z}(l,r);if(!s)return r;const d=Rm(s,l);return Ul(d,d.next),Ul(s,s.next)}function nf(l,r){return ni(l.prev,l,r.prev)<0&&ni(r.next,l,l.next)<0}function Hi(l,r,s,d,g){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-s)*g|0)|l<<8))|l<<4))|l<<2))|l<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-d)*g|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function yp(l){let r=l,s=l;do(r.x<s.x||r.x===s.x&&r.y<s.y)&&(s=r),r=r.next;while(r!==l);return s}function Du(l,r,s,d,g,_,b,C){return(g-b)*(r-C)>=(l-b)*(_-C)&&(l-b)*(d-C)>=(s-b)*(r-C)&&(s-b)*(_-C)>=(g-b)*(d-C)}function zu(l,r,s,d,g,_,b,C){return!(l===b&&r===C)&&Du(l,r,s,d,g,_,b,C)}function yy(l,r){return l.next.i!==r.i&&l.prev.i!==r.i&&!function(s,d){let g=s;do{if(g.i!==s.i&&g.next.i!==s.i&&g.i!==d.i&&g.next.i!==d.i&&Am(g,g.next,s,d))return!0;g=g.next}while(g!==s);return!1}(l,r)&&(Ou(l,r)&&Ou(r,l)&&function(s,d){let g=s,_=!1;const b=(s.x+d.x)/2,C=(s.y+d.y)/2;do g.y>C!=g.next.y>C&&g.next.y!==g.y&&b<(g.next.x-g.x)*(C-g.y)/(g.next.y-g.y)+g.x&&(_=!_),g=g.next;while(g!==s);return _}(l,r)&&(ni(l.prev,l,r.prev)||ni(l,r.prev,r))||po(l,r)&&ni(l.prev,l,l.next)>0&&ni(r.prev,r,r.next)>0)}function ni(l,r,s){return(r.y-l.y)*(s.x-r.x)-(r.x-l.x)*(s.y-r.y)}function po(l,r){return l.x===r.x&&l.y===r.y}function Am(l,r,s,d){const g=xa(ni(l,r,s)),_=xa(ni(l,r,d)),b=xa(ni(s,d,l)),C=xa(ni(s,d,r));return g!==_&&b!==C||!(g!==0||!Vc(l,s,r))||!(_!==0||!Vc(l,d,r))||!(b!==0||!Vc(s,l,d))||!(C!==0||!Vc(s,r,d))}function Vc(l,r,s){return r.x<=Math.max(l.x,s.x)&&r.x>=Math.min(l.x,s.x)&&r.y<=Math.max(l.y,s.y)&&r.y>=Math.min(l.y,s.y)}function xa(l){return l>0?1:l<0?-1:0}function Ou(l,r){return ni(l.prev,l,l.next)<0?ni(l,r,l.next)>=0&&ni(l,l.prev,r)>=0:ni(l,r,l.prev)<0||ni(l,l.next,r)<0}function Rm(l,r){const s=Gl(l.i,l.x,l.y),d=Gl(r.i,r.x,r.y),g=l.next,_=r.prev;return l.next=r,r.prev=l,s.next=g,g.prev=s,d.next=s,s.prev=d,_.next=d,d.prev=_,d}function Uc(l,r,s,d){const g=Gl(l,r,s);return d?(g.next=d.next,g.prev=d,d.next.prev=g,d.next=g):(g.prev=g,g.next=g),g}function Lu(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function Gl(l,r,s){return{i:l,x:r,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Gc{constructor(r,s){if(s>r)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=r,this._minGranularity=s}getGranularityForZoomLevel(r){return Math.max(Math.floor(this._baseZoomGranularity/(1<<r)),this._minGranularity,1)}}class Fu{constructor(r){this.fill=r.fill,this.line=r.line,this.tile=r.tile,this.stencil=r.stencil,this.circle=r.circle}}Fu.noSubdivision=new Fu({fill:new Gc(0,0),line:new Gc(0,0),tile:new Gc(0,0),stencil:new Gc(0,0),circle:1}),Gt("SubdivisionGranularityExpression",Gc),Gt("SubdivisionGranularitySetting",Fu);const Bu=-32768,$u=32767;class Dm{constructor(r,s){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=r,this._granularityCellSize=Ve/r,this._canonical=s}_getKey(r,s){return(r+=32768)<<16|s+32768}_vertexToIndex(r,s){if(r<-32768||s<-32768||r>32767||s>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const d=0|Math.round(r),g=0|Math.round(s),_=this._getKey(d,g);if(this._vertexDictionary.has(_))return this._vertexDictionary.get(_);const b=this._vertexBuffer.length/2;return this._vertexDictionary.set(_,b),this._vertexBuffer.push(d,g),b}_subdivideTrianglesScanline(r){if(this._granularity<2)return function(g,_){const b=[];for(let C=0;C<_.length;C+=3){const E=_[C],z=_[C+1],F=_[C+2],B=g[2*E],W=g[2*E+1];(g[2*z]-B)*(g[2*F+1]-W)-(g[2*z+1]-W)*(g[2*F]-B)>0?(b.push(E),b.push(F),b.push(z)):(b.push(E),b.push(z),b.push(F))}return b}(this._vertexBuffer,r);const s=[],d=r.length;for(let g=0;g<d;g+=3){const _=[r[g+0],r[g+1],r[g+2]],b=[this._vertexBuffer[2*r[g+0]+0],this._vertexBuffer[2*r[g+0]+1],this._vertexBuffer[2*r[g+1]+0],this._vertexBuffer[2*r[g+1]+1],this._vertexBuffer[2*r[g+2]+0],this._vertexBuffer[2*r[g+2]+1]];let C=1/0,E=1/0,z=-1/0,F=-1/0;for(let re=0;re<3;re++){const le=b[2*re],me=b[2*re+1];C=Math.min(C,le),z=Math.max(z,le),E=Math.min(E,me),F=Math.max(F,me)}if(C===z||E===F)continue;const B=Math.floor(C/this._granularityCellSize),W=Math.ceil(z/this._granularityCellSize),X=Math.floor(E/this._granularityCellSize),te=Math.ceil(F/this._granularityCellSize);if(B!==W||X!==te)for(let re=X;re<te;re++){const le=this._scanlineGenerateVertexRingForCellRow(re,b,_);Qa(this._vertexBuffer,le,s)}else s.push(..._)}return s}_scanlineGenerateVertexRingForCellRow(r,s,d){const g=r*this._granularityCellSize,_=g+this._granularityCellSize,b=[];for(let C=0;C<3;C++){const E=s[2*C],z=s[2*C+1],F=s[2*(C+1)%6],B=s[(2*(C+1)+1)%6],W=s[2*(C+2)%6],X=s[(2*(C+2)+1)%6],te=F-E,re=B-z,le=te===0,me=re===0,Te=(g-z)/re,pe=(_-z)/re,ye=Math.min(Te,pe),De=Math.max(Te,pe);if(!me&&(ye>=1||De<=0)||me&&(z<g||z>_)){B>=g&&B<=_&&b.push(d[(C+1)%3]);continue}!me&&ye>0&&b.push(this._vertexToIndex(E+te*ye,z+re*ye));const je=E+te*Math.max(ye,0),ot=E+te*Math.min(De,1);le||this._generateIntraEdgeVertices(b,E,z,F,B,je,ot),!me&&De<1&&b.push(this._vertexToIndex(E+te*De,z+re*De)),(me||B>=g&&B<=_)&&b.push(d[(C+1)%3]),!me&&(B<=g||B>=_)&&this._generateInterEdgeVertices(b,E,z,F,B,W,X,ot,g,_)}return b}_generateIntraEdgeVertices(r,s,d,g,_,b,C){const E=g-s,z=_-d,F=z===0,B=F?Math.min(s,g):Math.min(b,C),W=F?Math.max(s,g):Math.max(b,C),X=Math.floor(B/this._granularityCellSize)+1,te=Math.ceil(W/this._granularityCellSize)-1;if(F?s<g:b<C)for(let re=X;re<=te;re++){const le=re*this._granularityCellSize;r.push(this._vertexToIndex(le,d+z*(le-s)/E))}else for(let re=te;re>=X;re--){const le=re*this._granularityCellSize;r.push(this._vertexToIndex(le,d+z*(le-s)/E))}}_generateInterEdgeVertices(r,s,d,g,_,b,C,E,z,F){const B=_-d,W=b-g,X=C-_,te=(z-_)/X,re=(F-_)/X,le=Math.min(te,re),me=Math.max(te,re),Te=g+W*le;let pe=Math.floor(Math.min(Te,E)/this._granularityCellSize)+1,ye=Math.ceil(Math.max(Te,E)/this._granularityCellSize)-1,De=E<Te;const je=X===0;if(je&&(C===z||C===F))return;if(je||le>=1||me<=0){const xt=d-C,wt=b+(s-b)*Math.min((z-C)/xt,(F-C)/xt);pe=Math.floor(Math.min(wt,E)/this._granularityCellSize)+1,ye=Math.ceil(Math.max(wt,E)/this._granularityCellSize)-1,De=E<wt}const ot=B>0?F:z;if(De)for(let xt=pe;xt<=ye;xt++)r.push(this._vertexToIndex(xt*this._granularityCellSize,ot));else for(let xt=ye;xt>=pe;xt--)r.push(this._vertexToIndex(xt*this._granularityCellSize,ot))}_generateOutline(r){const s=[];for(const d of r){const g=Ps(d,this._granularity,!0),_=this._pointArrayToIndices(g),b=[];for(let C=1;C<_.length;C++)b.push(_[C-1]),b.push(_[C]);s.push(b)}return s}_handlePoles(r){let s=!1,d=!1;this._canonical&&(this._canonical.y===0&&(s=!0),this._canonical.y===(1<<this._canonical.z)-1&&(d=!0)),(s||d)&&this._fillPoles(r,s,d)}_ensureNoPoleVertices(){const r=this._vertexBuffer;for(let s=0;s<r.length;s+=2){const d=r[s+1];d===Bu&&(r[s+1]=-32767),d===$u&&(r[s+1]=32766)}}_generatePoleQuad(r,s,d,g,_,b){g>_!=(b===Bu)?(r.push(s),r.push(d),r.push(this._vertexToIndex(g,b)),r.push(d),r.push(this._vertexToIndex(_,b)),r.push(this._vertexToIndex(g,b))):(r.push(d),r.push(s),r.push(this._vertexToIndex(g,b)),r.push(this._vertexToIndex(_,b)),r.push(d),r.push(this._vertexToIndex(g,b)))}_fillPoles(r,s,d){const g=this._vertexBuffer,_=Ve,b=r.length;for(let C=2;C<b;C+=3){const E=r[C-2],z=r[C-1],F=r[C],B=g[2*E],W=g[2*E+1],X=g[2*z],te=g[2*z+1],re=g[2*F],le=g[2*F+1];s&&(W===0&&te===0&&this._generatePoleQuad(r,E,z,B,X,Bu),te===0&&le===0&&this._generatePoleQuad(r,z,F,X,re,Bu),le===0&&W===0&&this._generatePoleQuad(r,F,E,re,B,Bu)),d&&(W===_&&te===_&&this._generatePoleQuad(r,E,z,B,X,$u),te===_&&le===_&&this._generatePoleQuad(r,z,F,X,re,$u),le===_&&W===_&&this._generatePoleQuad(r,F,E,re,B,$u))}}_initializeVertices(r){for(let s=0;s<r.length;s+=2)this._vertexToIndex(r[s],r[s+1])}subdividePolygonInternal(r,s){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:d,holeIndices:g}=function(C){const E=[],z=[];for(const F of C)if(F.length!==0){F!==C[0]&&E.push(z.length/2);for(let B=0;B<F.length;B++)z.push(F[B].x),z.push(F[B].y)}return{flattened:z,holeIndices:E}}(r);let _;this._initializeVertices(d);try{const C=function(z,F,B=2){const W=F&&F.length,X=W?F[0]*B:z.length;let te=C0(z,0,X,B,!0);const re=[];if(!te||te.next===te.prev)return re;let le,me,Te;if(W&&(te=function(pe,ye,De,je){const ot=[];for(let xt=0,wt=ye.length;xt<wt;xt++){const It=C0(pe,ye[xt]*je,xt<wt-1?ye[xt+1]*je:pe.length,je,!1);It===It.next&&(It.steiner=!0),ot.push(yp(It))}ot.sort(Fo);for(let xt=0;xt<ot.length;xt++)De=Xs(ot[xt],De);return De}(z,F,te,B)),z.length>80*B){le=z[0],me=z[1];let pe=le,ye=me;for(let De=B;De<X;De+=B){const je=z[De],ot=z[De+1];je<le&&(le=je),ot<me&&(me=ot),je>pe&&(pe=je),ot>ye&&(ye=ot)}Te=Math.max(pe-le,ye-me),Te=Te!==0?32767/Te:0}return Zh(te,re,B,le,me,Te,0),re}(d,g),E=this._convertIndices(d,C);_=this._subdivideTrianglesScanline(E)}catch(C){console.error(C)}let b=[];return s&&(b=this._generateOutline(r)),this._ensureNoPoleVertices(),this._handlePoles(_),{verticesFlattened:this._vertexBuffer,indicesTriangles:_,indicesLineList:b}}_convertIndices(r,s){const d=[];for(let g=0;g<s.length;g++)d.push(this._vertexToIndex(r[2*s[g]],r[2*s[g]+1]));return d}_pointArrayToIndices(r){const s=[];for(let d=0;d<r.length;d++){const g=r[d];s.push(this._vertexToIndex(g.x,g.y))}return s}}function Yo(l,r,s,d=!0){return new Dm(s,r).subdividePolygonInternal(l,d)}function Ps(l,r,s=!1){if(!l||l.length<1)return[];if(l.length<2)return[];const d=l[0],g=l[l.length-1],_=s&&(d.x!==g.x||d.y!==g.y);if(r<2)return _?[...l,l[0]]:[...l];const b=Math.floor(Ve/r),C=[];C.push(new x(l[0].x,l[0].y));const E=l.length,z=_?E:E-1;for(let F=0;F<z;F++){const B=l[F],W=F<E-1?l[F+1]:l[0],X=B.x,te=B.y,re=W.x,le=W.y,me=X!==re,Te=te!==le;if(!me&&!Te)continue;const pe=re-X,ye=le-te,De=Math.abs(pe),je=Math.abs(ye);let ot=X,xt=te;for(;;){const It=pe>0?(Math.floor(ot/b)+1)*b:(Math.ceil(ot/b)-1)*b,Bt=ye>0?(Math.floor(xt/b)+1)*b:(Math.ceil(xt/b)-1)*b,Rt=Math.abs(ot-It),St=Math.abs(xt-Bt),mt=Math.abs(ot-re),Kt=Math.abs(xt-le),er=me?Rt/De:Number.POSITIVE_INFINITY,_r=Te?St/je:Number.POSITIVE_INFINITY;if((mt<=Rt||!me)&&(Kt<=St||!Te))break;if(er<_r&&me||!Te){ot=It,xt+=ye*er;const nr=new x(ot,Math.round(xt));C[C.length-1].x===nr.x&&C[C.length-1].y===nr.y||C.push(nr)}else{ot+=pe*_r,xt=Bt;const nr=new x(Math.round(ot),xt);C[C.length-1].x===nr.x&&C[C.length-1].y===nr.y||C.push(nr)}}const wt=new x(re,le);C[C.length-1].x===wt.x&&C[C.length-1].y===wt.y||C.push(wt)}return C}function Qa(l,r,s){if(r.length===0)throw new Error("Subdivision vertex ring is empty.");let d=0,g=l[2*r[0]];for(let E=1;E<r.length;E++){const z=l[2*r[E]];z<g&&(g=z,d=E)}const _=r.length;let b=d,C=(b+1)%_;for(;;){const E=b-1>=0?b-1:_-1,z=(C+1)%_,F=l[2*r[E]],B=l[2*r[z]],W=l[2*r[b]],X=l[2*r[b]+1],te=l[2*r[C]+1];let re=!1;if(F<B)re=!0;else if(F>B)re=!1;else{const le=te-X,me=-(l[2*r[C]]-W),Te=X<te?1:-1;((F-W)*le+(l[2*r[E]+1]-X)*me)*Te>((B-W)*le+(l[2*r[z]+1]-X)*me)*Te&&(re=!0)}if(re){const le=r[E],me=r[b],Te=r[C];le!==me&&le!==Te&&me!==Te&&s.push(Te,me,le),b--,b<0&&(b=_-1)}else{const le=r[z],me=r[b],Te=r[C];le!==me&&le!==Te&&me!==Te&&s.push(Te,me,le),C++,C>=_&&(C=0)}if(E===z)break}}function ls(l,r,s,d,g,_,b,C,E){const z=g.length/2,F=b&&C&&E;if(z<Nt.MAX_VERTEX_ARRAY_LENGTH){const B=r.prepareSegment(z,s,d),W=B.vertexLength;for(let re=0;re<_.length;re+=3)d.emplaceBack(W+_[re],W+_[re+1],W+_[re+2]);let X,te;B.vertexLength+=z,B.primitiveLength+=_.length/3,F&&(te=b.prepareSegment(z,s,C),X=te.vertexLength,te.vertexLength+=z);for(let re=0;re<g.length;re+=2)l(g[re],g[re+1]);if(F)for(let re=0;re<E.length;re++){const le=E[re];for(let me=1;me<le.length;me+=2)C.emplaceBack(X+le[me-1],X+le[me]);te.primitiveLength+=le.length/2}}else(function(B,W,X,te,re,le){const me=[];for(let je=0;je<te.length/2;je++)me.push(-1);const Te={count:0};let pe=0,ye=B.getOrCreateLatestSegment(W,X),De=ye.vertexLength;for(let je=2;je<re.length;je+=3){const ot=re[je-2],xt=re[je-1],wt=re[je];let It=me[ot]<pe,Bt=me[xt]<pe,Rt=me[wt]<pe;ye.vertexLength+((It?1:0)+(Bt?1:0)+(Rt?1:0))>Nt.MAX_VERTEX_ARRAY_LENGTH&&(ye=B.createNewSegment(W,X),pe=Te.count,It=!0,Bt=!0,Rt=!0,De=0);const St=of(me,te,le,Te,ot,It,ye),mt=of(me,te,le,Te,xt,Bt,ye),Kt=of(me,te,le,Te,wt,Rt,ye);X.emplaceBack(De+St-pe,De+mt-pe,De+Kt-pe),ye.primitiveLength++}})(r,s,d,g,_,l),F&&function(B,W,X,te,re,le){const me=[];for(let je=0;je<te.length/2;je++)me.push(-1);const Te={count:0};let pe=0,ye=B.getOrCreateLatestSegment(W,X),De=ye.vertexLength;for(let je=0;je<re.length;je++){const ot=re[je];for(let xt=1;xt<re[je].length;xt+=2){const wt=ot[xt-1],It=ot[xt];let Bt=me[wt]<pe,Rt=me[It]<pe;ye.vertexLength+((Bt?1:0)+(Rt?1:0))>Nt.MAX_VERTEX_ARRAY_LENGTH&&(ye=B.createNewSegment(W,X),pe=Te.count,Bt=!0,Rt=!0,De=0);const St=of(me,te,le,Te,wt,Bt,ye),mt=of(me,te,le,Te,It,Rt,ye);X.emplaceBack(De+St-pe,De+mt-pe),ye.primitiveLength++}}}(b,s,C,g,E,l),r.forceNewSegmentOnNextPrepare(),b?.forceNewSegmentOnNextPrepare()}function of(l,r,s,d,g,_,b){if(_){const C=d.count;return s(r[2*g],r[2*g+1]),l[g]=d.count,d.count++,b.vertexLength++,C}return l[g]}class vp{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new _e,this.indexArray=new ct,this.indexArray2=new Dt,this.programConfigurations=new Vl(r.layers,r.zoom),this.segments=new Nt,this.segments2=new Nt,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,d){this.hasDependencies=gp("fill",this.layers,s);const g=this.layers[0].layout.get("fill-sort-key"),_=!g.isConstant(),b=[];for(const{feature:C,id:E,index:z,sourceLayerIndex:F}of r){const B=this.layers[0]._featureFilter.needGeometry,W=Ka(C,B);if(!this.layers[0]._featureFilter.filter(new Sn(this.zoom),W,d))continue;const X=_?g.evaluate(W,{},d,s.availableImages):void 0,te={id:E,properties:C.properties,type:C.type,sourceLayerIndex:F,index:z,geometry:B?W.geometry:va(C),patterns:{},sortKey:X};b.push(te)}_&&b.sort((C,E)=>C.sortKey-E.sortKey);for(const C of b){const{geometry:E,index:z,sourceLayerIndex:F}=C;if(this.hasDependencies){const B=km("fill",this.layers,C,{zoom:this.zoom},s);this.patternFeatures.push(B)}else this.addFeature(C,E,z,d,{},s.subdivisionGranularity);s.featureIndex.insert(r[z].feature,E,z,F,this.index)}}update(r,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,{imagePositions:d})}addFeatures(r,s,d){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,s,d,r.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,S0),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,s,d,g,_,b){for(const C of Sh(s,500)){const E=Yo(C,g,b.fill.getGranularityForZoomLevel(g.z)),z=this.layoutVertexArray;ls((F,B)=>{z.emplaceBack(F,B)},this.segments,this.layoutVertexArray,this.indexArray,E.verticesFlattened,E.indicesTriangles,this.segments2,this.indexArray2,E.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,{imagePositions:_,canonical:g})}}let zm,T0;Gt("FillBucket",vp,{omit:["layers","patternFeatures"]});var ju={get paint(){return T0=T0||new wi({"fill-antialias":new Wt(Ae.paint_fill["fill-antialias"]),"fill-opacity":new cr(Ae.paint_fill["fill-opacity"]),"fill-color":new cr(Ae.paint_fill["fill-color"]),"fill-outline-color":new cr(Ae.paint_fill["fill-outline-color"]),"fill-translate":new Wt(Ae.paint_fill["fill-translate"]),"fill-translate-anchor":new Wt(Ae.paint_fill["fill-translate-anchor"]),"fill-pattern":new zc(Ae.paint_fill["fill-pattern"])})},get layout(){return zm=zm||new wi({"fill-sort-key":new cr(Ae.layout_fill["fill-sort-key"])})}};class M0 extends Ho{constructor(r,s){super(r,ju,s)}recalculate(r,s){super.recalculate(r,s);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new vp(r)}queryRadius(){return hp(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:r,geometry:s,transform:d,pixelsToTileUnits:g}){return cy(Qd(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-d.bearingInRadians,g),s)}isTileClipped(){return!0}}const vy=pi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Xh=pi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:_y}=vy;class el{constructor(r,s,d,g,_){this.properties={},this.extent=d,this.type=0,this.id=void 0,this._pbf=r,this._geometry=-1,this._keys=g,this._values=_,r.readFields(P0,this,s)}loadGeometry(){const r=this._pbf;r.pos=this._geometry;const s=r.readVarint()+r.pos,d=[];let g,_=1,b=0,C=0,E=0;for(;r.pos<s;){if(b<=0){const z=r.readVarint();_=7&z,b=z>>3}if(b--,_===1||_===2)C+=r.readSVarint(),E+=r.readSVarint(),_===1&&(g&&d.push(g),g=[]),g&&g.push(new x(C,E));else{if(_!==7)throw new Error(`unknown command ${_}`);g&&g.push(g[0].clone())}}return g&&d.push(g),d}bbox(){const r=this._pbf;r.pos=this._geometry;const s=r.readVarint()+r.pos;let d=1,g=0,_=0,b=0,C=1/0,E=-1/0,z=1/0,F=-1/0;for(;r.pos<s;){if(g<=0){const B=r.readVarint();d=7&B,g=B>>3}if(g--,d===1||d===2)_+=r.readSVarint(),b+=r.readSVarint(),_<C&&(C=_),_>E&&(E=_),b<z&&(z=b),b>F&&(F=b);else if(d!==7)throw new Error(`unknown command ${d}`)}return[C,z,E,F]}toGeoJSON(r,s,d){const g=this.extent*Math.pow(2,d),_=this.extent*r,b=this.extent*s,C=this.loadGeometry();function E(W){return[360*(W.x+_)/g-180,360/Math.PI*Math.atan(Math.exp((1-2*(W.y+b)/g)*Math.PI))-90]}function z(W){return W.map(E)}let F;if(this.type===1){const W=[];for(const te of C)W.push(te[0]);const X=z(W);F=W.length===1?{type:"Point",coordinates:X[0]}:{type:"MultiPoint",coordinates:X}}else if(this.type===2){const W=C.map(z);F=W.length===1?{type:"LineString",coordinates:W[0]}:{type:"MultiLineString",coordinates:W}}else{if(this.type!==3)throw new Error("unknown feature type");{const W=xy(C),X=[];for(const te of W)X.push(te.map(z));F=X.length===1?{type:"Polygon",coordinates:X[0]}:{type:"MultiPolygon",coordinates:X}}}const B={type:"Feature",geometry:F,properties:this.properties};return this.id!=null&&(B.id=this.id),B}}function P0(l,r,s){l===1?r.id=s.readVarint():l===2?function(d,g){const _=d.readVarint()+d.pos;for(;d.pos<_;){const b=g._keys[d.readVarint()],C=g._values[d.readVarint()];g.properties[b]=C}}(s,r):l===3?r.type=s.readVarint():l===4&&(r._geometry=s.pos)}function xy(l){const r=l.length;if(r<=1)return[l];const s=[];let d,g;for(let _=0;_<r;_++){const b=by(l[_]);b!==0&&(g===void 0&&(g=b<0),g===b<0?(d&&s.push(d),d=[l[_]]):d&&d.push(l[_]))}return d&&s.push(d),s}function by(l){let r=0;for(let s,d,g=0,_=l.length,b=_-1;g<_;b=g++)s=l[g],d=l[b],r+=(d.x-s.x)*(s.y+d.y);return r}el.types=["Unknown","Point","LineString","Polygon"];class Om{constructor(r,s){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(M1,this,s),this.length=this._features.length}feature(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];const s=this._pbf.readVarint()+this._pbf.pos;return new el(this._pbf,s,this.extent,this._keys,this._values)}}function M1(l,r,s){l===15?r.version=s.readVarint():l===1?r.name=s.readString():l===5?r.extent=s.readVarint():l===2?r._features.push(s.pos):l===3?r._keys.push(s.readString()):l===4&&r._values.push(function(d){let g=null;const _=d.readVarint()+d.pos;for(;d.pos<_;){const b=d.readVarint()>>3;g=b===1?d.readString():b===2?d.readFloat():b===3?d.readDouble():b===4?d.readVarint64():b===5?d.readVarint():b===6?d.readSVarint():b===7?d.readBoolean():null}if(g==null)throw new Error("unknown feature value");return g}(s))}class E0{constructor(r,s){this.layers=r.readFields(I0,{},s)}}function I0(l,r,s){if(l===3){const d=new Om(s,s.readVarint()+s.pos);d.length&&(r[d.name]=d)}}const Lm=Math.pow(2,13);function tl(l,r,s,d,g,_,b,C){l.emplaceBack(r,s,2*Math.floor(d*Lm)+b,g*Lm*2,_*Lm*2,Math.round(C))}class wy{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasDependencies=!1,this.layoutVertexArray=new Me,this.centroidVertexArray=new ge,this.indexArray=new ct,this.programConfigurations=new Vl(r.layers,r.zoom),this.segments=new Nt,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,d){this.features=[],this.hasDependencies=gp("fill-extrusion",this.layers,s);for(const{feature:g,id:_,index:b,sourceLayerIndex:C}of r){const E=this.layers[0]._featureFilter.needGeometry,z=Ka(g,E);if(!this.layers[0]._featureFilter.filter(new Sn(this.zoom),z,d))continue;const F={id:_,sourceLayerIndex:C,index:b,geometry:E?z.geometry:va(g),properties:g.properties,type:g.type,patterns:{}};this.hasDependencies?this.features.push(km("fill-extrusion",this.layers,F,{zoom:this.zoom},s)):this.addFeature(F,F.geometry,b,d,{},s.subdivisionGranularity),s.featureIndex.insert(g,F.geometry,b,C,this.index,!0)}}addFeatures(r,s,d){for(const g of this.features){const{geometry:_}=g;this.addFeature(g,_,g.index,s,d,r.subdivisionGranularity)}}update(r,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,{imagePositions:d})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,_y),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,Xh.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,s,d,g,_,b){for(const C of Sh(s,500)){const E={x:0,y:0,sampleCount:0},z=this.layoutVertexArray.length;this.processPolygon(E,g,r,C,b);const F=this.layoutVertexArray.length-z,B=Math.floor(E.x/E.sampleCount),W=Math.floor(E.y/E.sampleCount);for(let X=0;X<F;X++)this.centroidVertexArray.emplaceBack(B,W)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,{imagePositions:_,canonical:g})}processPolygon(r,s,d,g,_){if(g.length<1||Ii(g[0]))return;for(const B of g)B.length!==0&&sf(r,B);const b={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},C=_.fill.getGranularityForZoomLevel(s.z),E=el.types[d.type]==="Polygon";for(const B of g){if(B.length===0||Ii(B))continue;const W=Ps(B,C,E);this._generateSideFaces(W,b)}if(!E)return;const z=Yo(g,s,C,!1),F=this.layoutVertexArray;ls((B,W)=>{tl(F,B,W,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,z.verticesFlattened,z.indicesTriangles)}_generateSideFaces(r,s){let d=0;for(let g=1;g<r.length;g++){const _=r[g],b=r[g-1];if(k0(_,b))continue;s.segment.vertexLength+4>Nt.MAX_VERTEX_ARRAY_LENGTH&&(s.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const C=_.sub(b)._perp()._unit(),E=b.dist(_);d+E>32768&&(d=0),tl(this.layoutVertexArray,_.x,_.y,C.x,C.y,0,0,d),tl(this.layoutVertexArray,_.x,_.y,C.x,C.y,0,1,d),d+=E,tl(this.layoutVertexArray,b.x,b.y,C.x,C.y,0,0,d),tl(this.layoutVertexArray,b.x,b.y,C.x,C.y,0,1,d);const z=s.segment.vertexLength;this.indexArray.emplaceBack(z,z+2,z+1),this.indexArray.emplaceBack(z+1,z+2,z+3),s.segment.vertexLength+=4,s.segment.primitiveLength+=2}}}function sf(l,r){for(let s=0;s<r.length;s++){const d=r[s];s===r.length-1&&r[0].x===d.x&&r[0].y===d.y||(l.x+=d.x,l.y+=d.y,l.sampleCount++)}}function k0(l,r){return l.x===r.x&&(l.x<0||l.x>Ve)||l.y===r.y&&(l.y<0||l.y>Ve)}function Ii(l){return l.every(r=>r.x<0)||l.every(r=>r.x>Ve)||l.every(r=>r.y<0)||l.every(r=>r.y>Ve)}let A0;Gt("FillExtrusionBucket",wy,{omit:["layers","features"]});var R0={get paint(){return A0=A0||new wi({"fill-extrusion-opacity":new Wt(Ae["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new cr(Ae["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Wt(Ae["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Wt(Ae["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new zc(Ae["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new cr(Ae["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new cr(Ae["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Wt(Ae["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class P1 extends Ho{constructor(r,s){super(r,R0,s)}createBucket(r){return new wy(r)}queryRadius(){return hp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:r,feature:s,featureState:d,geometry:g,transform:_,pixelsToTileUnits:b,pixelPosMatrix:C}){const E=Qd(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-_.bearingInRadians,b),z=this.paint.get("fill-extrusion-height").evaluate(s,d),F=this.paint.get("fill-extrusion-base").evaluate(s,d),B=function(X,te){const re=[];for(const le of X){const me=[le.x,le.y,0,1];vt(me,me,te),re.push(new x(me[0]/me[3],me[1]/me[3]))}return re}(E,C),W=function(X,te,re,le){const me=[],Te=[],pe=le[8]*te,ye=le[9]*te,De=le[10]*te,je=le[11]*te,ot=le[8]*re,xt=le[9]*re,wt=le[10]*re,It=le[11]*re;for(const Bt of X){const Rt=[],St=[];for(const mt of Bt){const Kt=mt.x,er=mt.y,_r=le[0]*Kt+le[4]*er+le[12],nr=le[1]*Kt+le[5]*er+le[13],qr=le[2]*Kt+le[6]*er+le[14],mi=le[3]*Kt+le[7]*er+le[15],no=qr+De,es=mi+je,ql=_r+ot,ks=nr+xt,Bo=qr+wt,ts=mi+It,ji=new x((_r+pe)/es,(nr+ye)/es);ji.z=no/es,Rt.push(ji);const $o=new x(ql/ts,ks/ts);$o.z=Bo/ts,St.push($o)}me.push(Rt),Te.push(St)}return[me,Te]}(g,F,z,C);return function(X,te,re){let le=1/0;cy(re,te)&&(le=Sy(re,te[0]));for(let me=0;me<te.length;me++){const Te=te[me],pe=X[me];for(let ye=0;ye<Te.length-1;ye++){const De=Te[ye],je=[De,Te[ye+1],pe[ye+1],pe[ye],De];Au(re,je)&&(le=Math.min(le,Sy(re,je)))}}return le!==1/0&&le}(W[0],W[1],B)}}function _p(l,r){return l.x*r.x+l.y*r.y}function Sy(l,r){if(l.length===1){let s=0;const d=r[s++];let g;for(;!g||d.equals(g);)if(g=r[s++],!g)return 1/0;for(;s<r.length;s++){const _=r[s],b=l[0],C=g.sub(d),E=_.sub(d),z=b.sub(d),F=_p(C,C),B=_p(C,E),W=_p(E,E),X=_p(z,C),te=_p(z,E),re=F*W-B*B,le=(W*X-B*te)/re,me=(F*te-B*X)/re,Te=d.z*(1-le-me)+g.z*le+_.z*me;if(isFinite(Te))return Te}return 1/0}{let s=1/0;for(const d of r)s=Math.min(s,d.z);return s}}const D0=pi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:E1}=D0,ba=pi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Cy}=ba,I1=Math.cos(Math.PI/180*37.5),qc=Math.pow(2,14)/.5;class af{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Oe,this.layoutVertexArray2=new Pe,this.indexArray=new ct,this.programConfigurations=new Vl(r.layers,r.zoom),this.segments=new Nt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,d){this.hasDependencies=gp("line",this.layers,s)||this.hasLineDasharray(this.layers);const g=this.layers[0].layout.get("line-sort-key"),_=!g.isConstant(),b=[];for(const{feature:C,id:E,index:z,sourceLayerIndex:F}of r){const B=this.layers[0]._featureFilter.needGeometry,W=Ka(C,B);if(!this.layers[0]._featureFilter.filter(new Sn(this.zoom),W,d))continue;const X=_?g.evaluate(W,{},d):void 0,te={id:E,properties:C.properties,type:C.type,sourceLayerIndex:F,index:z,geometry:B?W.geometry:va(C),patterns:{},dashes:{},sortKey:X};b.push(te)}_&&b.sort((C,E)=>C.sortKey-E.sortKey);for(const C of b){const{geometry:E,index:z,sourceLayerIndex:F}=C;this.hasDependencies?(gp("line",this.layers,s)?km("line",this.layers,C,{zoom:this.zoom},s):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,C,this.zoom,s),this.patternFeatures.push(C)):this.addFeature(C,E,z,d,{},{},s.subdivisionGranularity),s.featureIndex.insert(r[z].feature,E,z,F,this.index)}}update(r,s,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,{imagePositions:d,dashPositions:g})}addFeatures(r,s,d,g){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,s,d,g,r.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,Cy)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,E1),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,s,d,g,_,b,C){const E=this.layers[0].layout,z=E.get("line-join").evaluate(r,{}),F=E.get("line-cap"),B=E.get("line-miter-limit"),W=E.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const X of s)this.addLine(X,r,z,F,B,W,g,C);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,{imagePositions:_,dashPositions:b,canonical:g})}addLine(r,s,d,g,_,b,C,E){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,r=Ps(r,C?E.line.getGranularityForZoomLevel(C.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let pe=0;pe<r.length-1;pe++)this.totalDistance+=r[pe].dist(r[pe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const z=el.types[s.type]==="Polygon";let F=r.length;for(;F>=2&&r[F-1].equals(r[F-2]);)F--;let B=0;for(;B<F-1&&r[B].equals(r[B+1]);)B++;if(F<(z?3:2))return;d==="bevel"&&(_=1.05);const W=this.overscaling<=16?122880/(512*this.overscaling):0,X=this.segments.prepareSegment(10*F,this.layoutVertexArray,this.indexArray);let te,re,le,me,Te;this.e1=this.e2=-1,z&&(te=r[F-2],Te=r[B].sub(te)._unit()._perp());for(let pe=B;pe<F;pe++){if(le=pe===F-1?z?r[B+1]:void 0:r[pe+1],le&&r[pe].equals(le))continue;Te&&(me=Te),te&&(re=te),te=r[pe],Te=le?le.sub(te)._unit()._perp():me,me=me||Te;let ye=me.add(Te);ye.x===0&&ye.y===0||ye._unit();const De=me.x*Te.x+me.y*Te.y,je=ye.x*Te.x+ye.y*Te.y,ot=je!==0?1/je:1/0,xt=2*Math.sqrt(2-2*je),wt=je<I1&&re&&le,It=me.x*Te.y-me.y*Te.x>0;if(wt&&pe>B){const St=te.dist(re);if(St>2*W){const mt=te.sub(te.sub(re)._mult(W/St)._round());this.updateDistance(re,mt),this.addCurrentVertex(mt,me,0,0,X),re=mt}}const Bt=re&&le;let Rt=Bt?d:z?"butt":g;if(Bt&&Rt==="round"&&(ot<b?Rt="miter":ot<=2&&(Rt="fakeround")),Rt==="miter"&&ot>_&&(Rt="bevel"),Rt==="bevel"&&(ot>2&&(Rt="flipbevel"),ot<_&&(Rt="miter")),re&&this.updateDistance(re,te),Rt==="miter")ye._mult(ot),this.addCurrentVertex(te,ye,0,0,X);else if(Rt==="flipbevel"){if(ot>100)ye=Te.mult(-1);else{const St=ot*me.add(Te).mag()/me.sub(Te).mag();ye._perp()._mult(St*(It?-1:1))}this.addCurrentVertex(te,ye,0,0,X),this.addCurrentVertex(te,ye.mult(-1),0,0,X)}else if(Rt==="bevel"||Rt==="fakeround"){const St=-Math.sqrt(ot*ot-1),mt=It?St:0,Kt=It?0:St;if(re&&this.addCurrentVertex(te,me,mt,Kt,X),Rt==="fakeround"){const er=Math.round(180*xt/Math.PI/20);for(let _r=1;_r<er;_r++){let nr=_r/er;if(nr!==.5){const mi=nr-.5;nr+=nr*mi*(nr-1)*((1.0904+De*(De*(3.55645-1.43519*De)-3.2452))*mi*mi+(.848013+De*(.215638*De-1.06021)))}const qr=Te.sub(me)._mult(nr)._add(me)._unit()._mult(It?-1:1);this.addHalfVertex(te,qr.x,qr.y,!1,It,0,X)}}le&&this.addCurrentVertex(te,Te,-mt,-Kt,X)}else if(Rt==="butt")this.addCurrentVertex(te,ye,0,0,X);else if(Rt==="square"){const St=re?1:-1;this.addCurrentVertex(te,ye,St,St,X)}else Rt==="round"&&(re&&(this.addCurrentVertex(te,me,0,0,X),this.addCurrentVertex(te,me,1,1,X,!0)),le&&(this.addCurrentVertex(te,Te,-1,-1,X,!0),this.addCurrentVertex(te,Te,0,0,X)));if(wt&&pe<F-1){const St=te.dist(le);if(St>2*W){const mt=te.add(le.sub(te)._mult(W/St)._round());this.updateDistance(te,mt),this.addCurrentVertex(mt,Te,0,0,X),te=mt}}}}addCurrentVertex(r,s,d,g,_,b=!1){const C=s.y*g-s.x,E=-s.y-s.x*g;this.addHalfVertex(r,s.x+s.y*d,s.y-s.x*d,b,!1,d,_),this.addHalfVertex(r,C,E,b,!0,-g,_),this.distance>qc/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,s,d,g,_,b))}addHalfVertex({x:r,y:s},d,g,_,b,C,E){const z=.5*(this.lineClips?this.scaledDistance*(qc-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(_?1:0),(s<<1)+(b?1:0),Math.round(63*d)+128,Math.round(63*g)+128,1+(C===0?0:C<0?-1:1)|(63&z)<<2,z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const F=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,F,this.e2),E.primitiveLength++),b?this.e2=F:this.e1=F}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,s){this.distance+=r.dist(s),this.updateScaledDistance()}hasLineDasharray(r){for(const s of r){const d=s.paint.get("line-dasharray");if(d&&!d.isConstant())return!0}return!1}addLineDashDependencies(r,s,d,g){for(const _ of r){const b=_.paint.get("line-dasharray");if(!b||b.value.kind==="constant")continue;const C=_.layout.get("line-cap")==="round",E={dasharray:b.value.evaluate({zoom:d-1},s,{}),round:C},z={dasharray:b.value.evaluate({zoom:d},s,{}),round:C},F={dasharray:b.value.evaluate({zoom:d+1},s,{}),round:C},B=`${E.dasharray.join(",")},${E.round}`,W=`${z.dasharray.join(",")},${z.round}`,X=`${F.dasharray.join(",")},${F.round}`;g.dashDependencies[B]=E,g.dashDependencies[W]=z,g.dashDependencies[X]=F,s.dashes[_.id]={min:B,mid:W,max:X}}}}let Nu,xp;Gt("LineBucket",af,{omit:["layers","patternFeatures"]});var Fm={get paint(){return xp=xp||new wi({"line-opacity":new cr(Ae.paint_line["line-opacity"]),"line-color":new cr(Ae.paint_line["line-color"]),"line-translate":new Wt(Ae.paint_line["line-translate"]),"line-translate-anchor":new Wt(Ae.paint_line["line-translate-anchor"]),"line-width":new cr(Ae.paint_line["line-width"]),"line-gap-width":new cr(Ae.paint_line["line-gap-width"]),"line-offset":new cr(Ae.paint_line["line-offset"]),"line-blur":new cr(Ae.paint_line["line-blur"]),"line-dasharray":new zc(Ae.paint_line["line-dasharray"]),"line-pattern":new zc(Ae.paint_line["line-pattern"]),"line-gradient":new Cs(Ae.paint_line["line-gradient"])})},get layout(){return Nu=Nu||new wi({"line-cap":new Wt(Ae.layout_line["line-cap"]),"line-join":new cr(Ae.layout_line["line-join"]),"line-miter-limit":new Wt(Ae.layout_line["line-miter-limit"]),"line-round-limit":new Wt(Ae.layout_line["line-round-limit"]),"line-sort-key":new cr(Ae.layout_line["line-sort-key"])})}};class Ty extends cr{possiblyEvaluate(r,s){return s=new Sn(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(r,s)}evaluate(r,s,d,g){return s=nt({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(r,s,d,g)}}let Bm;class My extends Ho{constructor(r,s){super(r,Fm,s),this.gradientVersion=0,Bm||(Bm=new Ty(Fm.paint.properties["line-width"].specification),Bm.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof sa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,s){super.recalculate(r,s),this.paint._values["line-floorwidth"]=Bm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new af(r)}queryRadius(r){const s=r,d=z0(Jd("line-width",this,s),Jd("line-gap-width",this,s)),g=Jd("line-offset",this,s);return d/2+Math.abs(g)+hp(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:r,feature:s,featureState:d,geometry:g,transform:_,pixelsToTileUnits:b}){const C=Qd(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-_.bearingInRadians,b),E=b/2*z0(this.paint.get("line-width").evaluate(s,d),this.paint.get("line-gap-width").evaluate(s,d)),z=this.paint.get("line-offset").evaluate(s,d);return z&&(g=function(F,B){const W=[];for(let X=0;X<F.length;X++){const te=y0(F[X]),re=[];for(let le=0;le<te.length;le++){const me=te[le],Te=te[le-1],pe=te[le+1],ye=le===0?new x(0,0):me.sub(Te)._unit()._perp(),De=le===te.length-1?new x(0,0):pe.sub(me)._unit()._perp(),je=ye._add(De)._unit(),ot=je.x*De.x+je.y*De.y;ot!==0&&je._mult(1/ot),re.push(je._mult(B)._add(me))}W.push(re)}return W}(g,z*b)),function(F,B,W){for(let X=0;X<B.length;X++){const te=B[X];if(F.length>=3){for(let re=0;re<te.length;re++)if(jc(F,te[re]))return!0}if(uy(F,te,W))return!0}return!1}(C,g,E)}isTileClipped(){return!0}}function z0(l,r){return r>0?r+2*l:l}const O0=pi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),L0=pi([{name:"a_projected_pos",components:3,type:"Float32"}],4);pi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const $m=pi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);pi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const bp=pi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),F0=pi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Py(l,r,s){return l.sections.forEach(d=>{d.text=function(g,_,b){const C=_.layout.get("text-transform").evaluate(b,{});return C==="uppercase"?g=g.toLocaleUpperCase():C==="lowercase"&&(g=g.toLocaleLowerCase()),Ua.applyArabicShaping&&(g=Ua.applyArabicShaping(g)),g}(d.text,r,s)}),l}pi([{name:"triangle",components:3,type:"Uint16"}]),pi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),pi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),pi([{type:"Float32",name:"offsetX"}]),pi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),pi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var ro=24;const lf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Ey={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},jm={40:!0};function Nm(l,r,s,d,g,_){if("fontStack"in r){const b=s[r.fontStack],C=b&&b[l];return C?C.metrics.advance*r.scale+g:0}{const b=d[r.imageName];return b?b.displaySize[0]*r.scale*ro/_+g:0}}function wp(l,r,s,d){const g=Math.pow(l-r,2);return d?l<r?g/2:2*g:g+Math.abs(s)*s}function B0(l,r,s){let d=0;return l===10&&(d-=1e4),s&&(d+=150),l!==40&&l!==65288||(d+=50),r!==41&&r!==65289||(d+=50),d}function $0(l,r,s,d,g,_){let b=null,C=wp(r,s,g,_);for(const E of d){const z=wp(r-E.x,s,g,_)+E.badness;z<=C&&(b=E,C=z)}return{index:l,x:r,priorBreak:b,badness:C}}function Sp(l){return l?Sp(l.priorBreak).concat(l.index):[]}class cf{constructor(r="",s=[],d=[]){this.text=r,this.sections=s,this.sectionIndex=d,this.imageSectionID=null}static fromFeature(r,s){const d=new cf;for(let g=0;g<r.sections.length;g++){const _=r.sections[g];_.image?d.addImageSection(_):d.addTextSection(_,s)}return d}length(){return[...this.text].length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}verticalizePunctuation(){this.text=function(r){let s="",d={premature:!0,value:void 0};const g=r[Symbol.iterator]();let _=g.next();const b=r[Symbol.iterator]();b.next();let C=b.next();for(;!_.done;)s+=!C.done&&Fl(C.value.codePointAt(0))&&!lf[C.value]||!d.premature&&Fl(d.value.codePointAt(0))&&!lf[d.value]||!lf[_.value]?_.value:lf[_.value],d={value:_.value,premature:!1},_=g.next(),C=b.next();return s}(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const r=this.text.match(/^\s*/),s=r?r[0].length:0,d=this.text.match(/\S\s*$/),g=d?d[0].length-1:0;this.text=this.text.substring(s,this.text.length-g),this.sectionIndex=this.sectionIndex.slice(s,this.sectionIndex.length-g)}substring(r,s){const d=[...this.text].slice(r,s).join(""),g=this.sectionIndex.slice(r,s);return new cf(d,this.sections,g)}toCodeUnitIndex(r){return[...this.text].slice(0,r).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,s)=>Math.max(r,this.sections[s].scale),0)}getMaxImageSize(r){let s=0,d=0;for(let g=0;g<this.length();g++){const _=this.getSection(g);if("imageName"in _){const b=r[_.imageName];if(!b)continue;const C=b.displaySize;s=Math.max(s,C[0]),d=Math.max(d,C[1])}}return{maxImageWidth:s,maxImageHeight:d}}addTextSection(r,s){this.text+=r.text,this.sections.push({scale:r.scale||1,verticalAlign:r.verticalAlign||"bottom",fontStack:r.fontStack||s});const d=this.sections.length-1;this.sectionIndex.push(...[...r.text].map(()=>d))}addImageSection(r){const s=r.image?r.image.name:"";if(s.length===0)return void Tr("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push({scale:1,verticalAlign:r.verticalAlign||"bottom",imageName:s}),this.sectionIndex.push(this.sections.length-1)):Tr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(r,s,d,g,_){const b=[],C=this.determineAverageLineWidth(r,s,d,g,_),E=this.hasZeroWidthSpaces();let z=0,F=0;const B=this.text[Symbol.iterator]();let W=B.next();const X=this.text[Symbol.iterator]();X.next();let te=X.next();const re=this.text[Symbol.iterator]();re.next(),re.next();let le=re.next();for(;!W.done;){const me=this.getSection(F),Te=W.value.codePointAt(0);if(sp(Te)||(z+=Nm(Te,me,d,g,r,_)),!te.done){const pe=Do(Te),ye=te.value.codePointAt(0);(Ey[Te]||pe||"imageName"in me||!le.done&&jm[ye])&&b.push($0(F+1,z,C,b,B0(Te,ye,pe&&E),!1))}F++,W=B.next(),te=X.next(),le=re.next()}return Sp($0(this.length(),z,C,b,0,!0))}determineAverageLineWidth(r,s,d,g,_){let b=0,C=0;for(const E of this.text){const z=this.getSection(C);b+=Nm(E.codePointAt(0),z,d,g,r,_),C++}return b/Math.max(1,Math.ceil(b/s))}}const Kh=4294967296,j0=1/Kh,Cp=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class p{constructor(r=new Uint8Array(16)){this.buf=ArrayBuffer.isView(r)?r:new Uint8Array(r),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(r,s,d=this.length){for(;this.pos<d;){const g=this.readVarint(),_=g>>3,b=this.pos;this.type=7&g,r(_,s,this),this.pos===b&&this.skip(g)}return s}readMessage(r,s){return this.readFields(r,s,this.readVarint()+this.pos)}readFixed32(){const r=this.dataView.getUint32(this.pos,!0);return this.pos+=4,r}readSFixed32(){const r=this.dataView.getInt32(this.pos,!0);return this.pos+=4,r}readFixed64(){const r=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Kh;return this.pos+=8,r}readSFixed64(){const r=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Kh;return this.pos+=8,r}readFloat(){const r=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,r}readDouble(){const r=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,r}readVarint(r){const s=this.buf;let d,g;return g=s[this.pos++],d=127&g,g<128?d:(g=s[this.pos++],d|=(127&g)<<7,g<128?d:(g=s[this.pos++],d|=(127&g)<<14,g<128?d:(g=s[this.pos++],d|=(127&g)<<21,g<128?d:(g=s[this.pos],d|=(15&g)<<28,function(_,b,C){const E=C.buf;let z,F;if(F=E[C.pos++],z=(112&F)>>4,F<128||(F=E[C.pos++],z|=(127&F)<<3,F<128)||(F=E[C.pos++],z|=(127&F)<<10,F<128)||(F=E[C.pos++],z|=(127&F)<<17,F<128)||(F=E[C.pos++],z|=(127&F)<<24,F<128)||(F=E[C.pos++],z|=(1&F)<<31,F<128))return y(_,z,b);throw new Error("Expected varint not more than 10 bytes")}(d,r,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const r=this.readVarint();return r%2==1?(r+1)/-2:r/2}readBoolean(){return!!this.readVarint()}readString(){const r=this.readVarint()+this.pos,s=this.pos;return this.pos=r,r-s>=12&&Cp?Cp.decode(this.buf.subarray(s,r)):function(d,g,_){let b="",C=g;for(;C<_;){const E=d[C];let z,F,B,W=null,X=E>239?4:E>223?3:E>191?2:1;if(C+X>_)break;X===1?E<128&&(W=E):X===2?(z=d[C+1],(192&z)==128&&(W=(31&E)<<6|63&z,W<=127&&(W=null))):X===3?(z=d[C+1],F=d[C+2],(192&z)==128&&(192&F)==128&&(W=(15&E)<<12|(63&z)<<6|63&F,(W<=2047||W>=55296&&W<=57343)&&(W=null))):X===4&&(z=d[C+1],F=d[C+2],B=d[C+3],(192&z)==128&&(192&F)==128&&(192&B)==128&&(W=(15&E)<<18|(63&z)<<12|(63&F)<<6|63&B,(W<=65535||W>=1114112)&&(W=null))),W===null?(W=65533,X=1):W>65535&&(W-=65536,b+=String.fromCharCode(W>>>10&1023|55296),W=56320|1023&W),b+=String.fromCharCode(W),C+=X}return b}(this.buf,s,r)}readBytes(){const r=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,r);return this.pos=r,s}readPackedVarint(r=[],s){const d=this.readPackedEnd();for(;this.pos<d;)r.push(this.readVarint(s));return r}readPackedSVarint(r=[]){const s=this.readPackedEnd();for(;this.pos<s;)r.push(this.readSVarint());return r}readPackedBoolean(r=[]){const s=this.readPackedEnd();for(;this.pos<s;)r.push(this.readBoolean());return r}readPackedFloat(r=[]){const s=this.readPackedEnd();for(;this.pos<s;)r.push(this.readFloat());return r}readPackedDouble(r=[]){const s=this.readPackedEnd();for(;this.pos<s;)r.push(this.readDouble());return r}readPackedFixed32(r=[]){const s=this.readPackedEnd();for(;this.pos<s;)r.push(this.readFixed32());return r}readPackedSFixed32(r=[]){const s=this.readPackedEnd();for(;this.pos<s;)r.push(this.readSFixed32());return r}readPackedFixed64(r=[]){const s=this.readPackedEnd();for(;this.pos<s;)r.push(this.readFixed64());return r}readPackedSFixed64(r=[]){const s=this.readPackedEnd();for(;this.pos<s;)r.push(this.readSFixed64());return r}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(r){const s=7&r;if(s===0)for(;this.buf[this.pos++]>127;);else if(s===2)this.pos=this.readVarint()+this.pos;else if(s===5)this.pos+=4;else{if(s!==1)throw new Error(`Unimplemented type: ${s}`);this.pos+=8}}writeTag(r,s){this.writeVarint(r<<3|s)}realloc(r){let s=this.length||16;for(;s<this.pos+r;)s*=2;if(s!==this.length){const d=new Uint8Array(s);d.set(this.buf),this.buf=d,this.dataView=new DataView(d.buffer),this.length=s}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(r){this.realloc(4),this.dataView.setInt32(this.pos,r,!0),this.pos+=4}writeSFixed32(r){this.realloc(4),this.dataView.setInt32(this.pos,r,!0),this.pos+=4}writeFixed64(r){this.realloc(8),this.dataView.setInt32(this.pos,-1&r,!0),this.dataView.setInt32(this.pos+4,Math.floor(r*j0),!0),this.pos+=8}writeSFixed64(r){this.realloc(8),this.dataView.setInt32(this.pos,-1&r,!0),this.dataView.setInt32(this.pos+4,Math.floor(r*j0),!0),this.pos+=8}writeVarint(r){(r=+r||0)>268435455||r<0?function(s,d){let g,_;if(s>=0?(g=s%4294967296|0,_=s/4294967296|0):(g=~(-s%4294967296),_=~(-s/4294967296),4294967295^g?g=g+1|0:(g=0,_=_+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),function(b,C,E){E.buf[E.pos++]=127&b|128,b>>>=7,E.buf[E.pos++]=127&b|128,b>>>=7,E.buf[E.pos++]=127&b|128,b>>>=7,E.buf[E.pos++]=127&b|128,E.buf[E.pos]=127&(b>>>=7)}(g,0,d),function(b,C){const E=(7&b)<<4;C.buf[C.pos++]|=E|((b>>>=3)?128:0),b&&(C.buf[C.pos++]=127&b|((b>>>=7)?128:0),b&&(C.buf[C.pos++]=127&b|((b>>>=7)?128:0),b&&(C.buf[C.pos++]=127&b|((b>>>=7)?128:0),b&&(C.buf[C.pos++]=127&b|((b>>>=7)?128:0),b&&(C.buf[C.pos++]=127&b)))))}(_,d)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))}writeSVarint(r){this.writeVarint(r<0?2*-r-1:2*r)}writeBoolean(r){this.writeVarint(+r)}writeString(r){r=String(r),this.realloc(4*r.length),this.pos++;const s=this.pos;this.pos=function(g,_,b){for(let C,E,z=0;z<_.length;z++){if(C=_.charCodeAt(z),C>55295&&C<57344){if(!E){C>56319||z+1===_.length?(g[b++]=239,g[b++]=191,g[b++]=189):E=C;continue}if(C<56320){g[b++]=239,g[b++]=191,g[b++]=189,E=C;continue}C=E-55296<<10|C-56320|65536,E=null}else E&&(g[b++]=239,g[b++]=191,g[b++]=189,E=null);C<128?g[b++]=C:(C<2048?g[b++]=C>>6|192:(C<65536?g[b++]=C>>12|224:(g[b++]=C>>18|240,g[b++]=C>>12&63|128),g[b++]=C>>6&63|128),g[b++]=63&C|128)}return b}(this.buf,r,this.pos);const d=this.pos-s;d>=128&&T(s,d,this),this.pos=s-1,this.writeVarint(d),this.pos+=d}writeFloat(r){this.realloc(4),this.dataView.setFloat32(this.pos,r,!0),this.pos+=4}writeDouble(r){this.realloc(8),this.dataView.setFloat64(this.pos,r,!0),this.pos+=8}writeBytes(r){const s=r.length;this.writeVarint(s),this.realloc(s);for(let d=0;d<s;d++)this.buf[this.pos++]=r[d]}writeRawMessage(r,s){this.pos++;const d=this.pos;r(s,this);const g=this.pos-d;g>=128&&T(d,g,this),this.pos=d-1,this.writeVarint(g),this.pos+=g}writeMessage(r,s,d){this.writeTag(r,2),this.writeRawMessage(s,d)}writePackedVarint(r,s){s.length&&this.writeMessage(r,A,s)}writePackedSVarint(r,s){s.length&&this.writeMessage(r,U,s)}writePackedBoolean(r,s){s.length&&this.writeMessage(r,Le,s)}writePackedFloat(r,s){s.length&&this.writeMessage(r,Z,s)}writePackedDouble(r,s){s.length&&this.writeMessage(r,fe,s)}writePackedFixed32(r,s){s.length&&this.writeMessage(r,qe,s)}writePackedSFixed32(r,s){s.length&&this.writeMessage(r,yt,s)}writePackedFixed64(r,s){s.length&&this.writeMessage(r,Ft,s)}writePackedSFixed64(r,s){s.length&&this.writeMessage(r,$t,s)}writeBytesField(r,s){this.writeTag(r,2),this.writeBytes(s)}writeFixed32Field(r,s){this.writeTag(r,5),this.writeFixed32(s)}writeSFixed32Field(r,s){this.writeTag(r,5),this.writeSFixed32(s)}writeFixed64Field(r,s){this.writeTag(r,1),this.writeFixed64(s)}writeSFixed64Field(r,s){this.writeTag(r,1),this.writeSFixed64(s)}writeVarintField(r,s){this.writeTag(r,0),this.writeVarint(s)}writeSVarintField(r,s){this.writeTag(r,0),this.writeSVarint(s)}writeStringField(r,s){this.writeTag(r,2),this.writeString(s)}writeFloatField(r,s){this.writeTag(r,5),this.writeFloat(s)}writeDoubleField(r,s){this.writeTag(r,1),this.writeDouble(s)}writeBooleanField(r,s){this.writeVarintField(r,+s)}}function y(l,r,s){return s?4294967296*r+(l>>>0):4294967296*(r>>>0)+(l>>>0)}function T(l,r,s){const d=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));s.realloc(d);for(let g=s.pos-1;g>=l;g--)s.buf[g+d]=s.buf[g]}function A(l,r){for(let s=0;s<l.length;s++)r.writeVarint(l[s])}function U(l,r){for(let s=0;s<l.length;s++)r.writeSVarint(l[s])}function Z(l,r){for(let s=0;s<l.length;s++)r.writeFloat(l[s])}function fe(l,r){for(let s=0;s<l.length;s++)r.writeDouble(l[s])}function Le(l,r){for(let s=0;s<l.length;s++)r.writeBoolean(l[s])}function qe(l,r){for(let s=0;s<l.length;s++)r.writeFixed32(l[s])}function yt(l,r){for(let s=0;s<l.length;s++)r.writeSFixed32(l[s])}function Ft(l,r){for(let s=0;s<l.length;s++)r.writeFixed64(l[s])}function $t(l,r){for(let s=0;s<l.length;s++)r.writeSFixed64(l[s])}function Lt(l,r,s){l===1&&s.readMessage(lr,r)}function lr(l,r,s){if(l===3){const{id:d,bitmap:g,width:_,height:b,left:C,top:E,advance:z}=s.readMessage(gr,{});r.push({id:d,bitmap:new rf({width:_+6,height:b+6},g),metrics:{width:_,height:b,left:C,top:E,advance:z}})}}function gr(l,r,s){l===1?r.id=s.readVarint():l===2?r.bitmap=s.readBytes():l===3?r.width=s.readVarint():l===4?r.height=s.readVarint():l===5?r.left=s.readSVarint():l===6?r.top=s.readSVarint():l===7&&(r.advance=s.readVarint())}function yr(l){let r=0,s=0;for(const b of l)r+=b.w*b.h,s=Math.max(s,b.w);l.sort((b,C)=>C.h-b.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),s),h:1/0}];let g=0,_=0;for(const b of l)for(let C=d.length-1;C>=0;C--){const E=d[C];if(!(b.w>E.w||b.h>E.h)){if(b.x=E.x,b.y=E.y,_=Math.max(_,b.y+b.h),g=Math.max(g,b.x+b.w),b.w===E.w&&b.h===E.h){const z=d.pop();z&&C<d.length&&(d[C]=z)}else b.h===E.h?(E.x+=b.w,E.w-=b.w):b.w===E.w?(E.y+=b.h,E.h-=b.h):(d.push({x:E.x+b.w,y:E.y,w:E.w-b.w,h:b.h}),E.y+=b.h,E.h-=b.h);break}}return{w:g,h:_,fill:r/(g*_)||0}}class ki{constructor(r,{pixelRatio:s,version:d,stretchX:g,stretchY:_,content:b,textFitWidth:C,textFitHeight:E}){this.paddedRect=r,this.pixelRatio=s,this.stretchX=g,this.stretchY=_,this.content=b,this.version=d,this.textFitWidth=C,this.textFitHeight=E}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class ht{constructor(r,s){const d={},g={};this.haveRenderCallbacks=[];const _=[];this.addImages(r,d,_),this.addImages(s,g,_);const{w:b,h:C}=yr(_),E=new Ko({width:b||1,height:C||1});for(const z in r){const F=r[z],B=d[z].paddedRect;Ko.copy(F.data,E,{x:0,y:0},{x:B.x+1,y:B.y+1},F.data)}for(const z in s){const F=s[z],B=g[z].paddedRect,W=B.x+1,X=B.y+1,te=F.data.width,re=F.data.height;Ko.copy(F.data,E,{x:0,y:0},{x:W,y:X},F.data),Ko.copy(F.data,E,{x:0,y:re-1},{x:W,y:X-1},{width:te,height:1}),Ko.copy(F.data,E,{x:0,y:0},{x:W,y:X+re},{width:te,height:1}),Ko.copy(F.data,E,{x:te-1,y:0},{x:W-1,y:X},{width:1,height:re}),Ko.copy(F.data,E,{x:0,y:0},{x:W+te,y:X},{width:1,height:re})}this.image=E,this.iconPositions=d,this.patternPositions=g}addImages(r,s,d){for(const g in r){const _=r[g],b={x:0,y:0,w:_.data.width+2,h:_.data.height+2};d.push(b),s[g]=new ki(b,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(r,s){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in r.updatedImages)this.patchUpdatedImage(this.iconPositions[d],r.getImage(d),s),this.patchUpdatedImage(this.patternPositions[d],r.getImage(d),s)}patchUpdatedImage(r,s,d){if(!r||!s||r.version===s.version)return;r.version=s.version;const[g,_]=r.tl;d.update(s.data,void 0,{x:g,y:_})}}var Xe;function ft(l,r,s,d,g,_,b,C,E,z,F,B,W,X,te){const re=cf.fromFeature(l,g);let le;B===f.az.vertical&&re.verticalizePunctuation();let me=re.determineLineBreaks(z,_,r,d,X);const{processBidirectionalText:Te,processStyledBidirectionalText:pe}=Ua;if(Te&&re.sections.length===1){le=[],me=me.map(ot=>re.toCodeUnitIndex(ot));const je=Te(re.toString(),me);for(const ot of je){const xt=[...ot].map(()=>0);le.push(new cf(ot,re.sections,xt))}}else if(pe){le=[],me=me.map(wt=>re.toCodeUnitIndex(wt));let je=0;const ot=[];for(const wt of re.text)ot.push(...Array(wt.length).fill(re.sectionIndex[je])),je++;const xt=pe(re.text,ot,me);for(const wt of xt){const It=[];let Bt="";for(const Rt of wt[0])It.push(wt[1][Bt.length]),Bt+=Rt;le.push(new cf(wt[0],re.sections,It))}}else le=function(je,ot){const xt=[];let wt=0;for(const It of ot)xt.push(je.substring(wt,It)),wt=It;return wt<je.length()&&xt.push(je.substring(wt,je.length())),xt}(re,me);const ye=[],De={positionedLines:ye,text:re.toString(),top:F[1],bottom:F[1],left:F[0],right:F[0],writingMode:B,iconsInText:!1,verticalizable:!1};return function(je,ot,xt,wt,It,Bt,Rt,St,mt,Kt,er,_r){let nr=0,qr=0,mi=0,no=0;const es=St==="right"?1:St==="left"?0:.5,ql=ro/_r;let ks=0;for(const ji of It){ji.trim();const $o=ji.getMaxScale(),us={positionedGlyphs:[],lineOffset:0};je.positionedLines[ks]=us;const hs=us.positionedGlyphs;let Ks=0;if(!ji.length()){qr+=Bt,++ks;continue}const rs=xr(wt,ji,ql);let Ys=0;for(const Mo of ji.text){const Si=ji.getSection(Ys),io=Mo.codePointAt(0),Ri=Or(mt,er,io),Po={glyph:io,imageName:null,x:nr,y:qr+-17,vertical:Ri,scale:1,fontStack:"",sectionIndex:ji.getSectionIndex(Ys),metrics:null,rect:null};let Jh;if("fontStack"in Si){if(Jh=Nr(Si,io,Ri,rs,ot,xt),!Jh)continue;Po.fontStack=Si.fontStack}else{if(je.iconsInText=!0,Si.scale*=ql,Jh=Co(Si,Ri,$o,rs,wt),!Jh)continue;Ks=Math.max(Ks,Jh.imageOffset),Po.imageName=Si.imageName}const{rect:Zc,metrics:Oy,baselineOffset:mf}=Jh;Po.y+=mf,Po.scale=Si.scale,Po.metrics=Oy,Po.rect=Zc,hs.push(Po),Ri?(je.verticalizable=!0,nr+=("imageName"in Si?Oy.advance:ro)*Si.scale+Kt):nr+=Oy.advance*Si.scale+Kt,Ys++}hs.length!==0&&(mi=Math.max(nr-Kt,mi),Cn(hs,0,hs.length-1,es)),nr=0,us.lineOffset=Math.max(Ks,($o-1)*ro);const Hl=Bt*$o+Ks;qr+=Hl,no=Math.max(Hl,no),++ks}const{horizontalAlign:Bo,verticalAlign:ts}=Vt(Rt);(function(ji,$o,us,hs,Ks,rs,Ys,Hl,Mo){const Si=($o-us)*Ks;let io=0;io=rs!==Ys?-Hl*hs- -17:-hs*Mo*Ys+.5*Ys;for(const Ri of ji)for(const Po of Ri.positionedGlyphs)Po.x+=Si,Po.y+=io})(je.positionedLines,es,Bo,ts,mi,no,Bt,qr,It.length),je.top+=-ts*qr,je.bottom=je.top+qr,je.left+=-Bo*mi,je.right=je.left+mi}(De,r,s,d,le,b,C,E,B,z,W,te),!function(je){for(const ot of je)if(ot.positionedGlyphs.length!==0)return!1;return!0}(ye)&&De}function Vt(l){let r=.5,s=.5;switch(l){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:r,verticalAlign:s}}function xr(l,r,s){const d=r.getMaxScale()*ro,{maxImageWidth:g,maxImageHeight:_}=r.getMaxImageSize(l),b=Math.max(d,_*s);return{verticalLineContentWidth:Math.max(d,g*s),horizontalLineContentHeight:b}}function Ar(l){switch(l){case"top":return 0;case"center":return .5;default:return 1}}function Or(l,r,s){return!(l===f.az.horizontal||!r&&!Nd(s)||r&&(sp(s)||(d=s,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(d)))));var d}function Nr(l,r,s,d,g,_){const b=_[l.fontStack],C=function(z,F,B,W){if(z&&z.rect)return z;const X=F[B.fontStack],te=X&&X[W];return te?{rect:null,metrics:te.metrics}:null}(b&&b[r],g,l,r);if(C===null)return null;let E;if(s)E=d.verticalLineContentWidth-l.scale*ro;else{const z=Ar(l.verticalAlign);E=(d.horizontalLineContentHeight-l.scale*ro)*z}return{rect:C.rect,metrics:C.metrics,baselineOffset:E}}function Co(l,r,s,d,g){const _=g[l.imageName];if(!_)return null;const b=_.paddedRect,C=_.displaySize,E={width:C[0],height:C[1],left:1,top:-3,advance:r?C[1]:C[0]};let z;if(r)z=d.verticalLineContentWidth-C[1]*l.scale;else{const F=Ar(l.verticalAlign);z=(d.horizontalLineContentHeight-C[1]*l.scale)*F}return{rect:b,metrics:E,baselineOffset:z,imageOffset:(r?C[0]:C[1])*l.scale-ro*s}}function Cn(l,r,s,d){if(d===0)return;const g=l[s],_=(l[s].x+g.metrics.advance*g.scale)*d;for(let b=r;b<=s;b++)l[b].x-=_}function Vu(l,r,s){const{horizontalAlign:d,verticalAlign:g}=Vt(s),_=r[0]-l.displaySize[0]*d,b=r[1]-l.displaySize[1]*g;return{image:l,top:b,bottom:b+l.displaySize[1],left:_,right:_+l.displaySize[0]}}function N0(l){var r,s;let d=l.left,g=l.top,_=l.right-d,b=l.bottom-g;const C=(r=l.image.textFitWidth)!==null&&r!==void 0?r:"stretchOrShrink",E=(s=l.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",z=(l.image.content[2]-l.image.content[0])/(l.image.content[3]-l.image.content[1]);if(E==="proportional"){if(C==="stretchOnly"&&_/b<z||C==="proportional"){const F=Math.ceil(b*z);d*=F/_,_=F}}else if(C==="proportional"&&E==="stretchOnly"&&z!==0&&_/b>z){const F=Math.ceil(_/z);g*=F/b,b=F}return{x1:d,y1:g,x2:d+_,y2:g+b}}function FS(l,r,s,d,g,_){const b=l.image;let C;if(b.content){const le=b.content,me=b.pixelRatio||1;C=[le[0]/me,le[1]/me,b.displaySize[0]-le[2]/me,b.displaySize[1]-le[3]/me]}const E=r.left*_,z=r.right*_;let F,B,W,X;s==="width"||s==="both"?(X=g[0]+E-d[3],B=g[0]+z+d[1]):(X=g[0]+(E+z-b.displaySize[0])/2,B=X+b.displaySize[0]);const te=r.top*_,re=r.bottom*_;return s==="height"||s==="both"?(F=g[1]+te-d[0],W=g[1]+re+d[2]):(F=g[1]+(te+re-b.displaySize[1])/2,W=F+b.displaySize[1]),{image:b,top:F,right:B,bottom:W,left:X,collisionPadding:C}}Gt("ImagePosition",ki),Gt("ImageAtlas",ht),f.az=void 0,(Xe=f.az||(f.az={}))[Xe.none=0]="none",Xe[Xe.horizontal=1]="horizontal",Xe[Xe.vertical=2]="vertical",Xe[Xe.horizontalOnly=3]="horizontalOnly";const Yh=128,uf=32640;function BS(l,r){const{expression:s}=r;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Sn(l+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:g}=s;let _=0;for(;_<d.length&&d[_]<=l;)_++;_=Math.max(0,_-1);let b=_;for(;b<d.length&&d[b]<l+1;)b++;b=Math.min(d.length-1,b);const C=d[_],E=d[b];return s.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:E,interpolationType:g}:{kind:"camera",minZoom:C,maxZoom:E,minSize:s.evaluate(new Sn(C)),maxSize:s.evaluate(new Sn(E)),interpolationType:g}}}function k1(l,r,s){let d="never";const g=l.get(r);return g?d=g:l.get(s)&&(d="always"),d}const vD=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function V0(l,r,s,d,g,_,b,C,E,z,F,B,W){const X=C?Math.min(uf,Math.round(C[0])):0,te=C?Math.min(uf,Math.round(C[1])):0;l.emplaceBack(r,s,Math.round(32*d),Math.round(32*g),_,b,(X<<1)+(E?1:0),te,16*z,16*F,256*B,256*W)}function A1(l,r,s){l.emplaceBack(r.x,r.y,s),l.emplaceBack(r.x,r.y,s),l.emplaceBack(r.x,r.y,s),l.emplaceBack(r.x,r.y,s)}function _D(l){for(const r of l.sections)if(Nh(r.text))return!0;return!1}class R1{constructor(r){this.layoutVertexArray=new Re,this.indexArray=new ct,this.programConfigurations=r,this.segments=new Nt,this.dynamicLayoutVertexArray=new We,this.opacityVertexArray=new dt,this.hasVisibleVertices=!1,this.placedSymbolArray=new M}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,s,d,g){this.isEmpty()||(d&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,O0.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,L0.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,vD,!0),this.opacityVertexBuffer.itemSize=1),(d||g)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Gt("SymbolBuffers",R1);class D1{constructor(r,s,d){this.layoutVertexArray=new r,this.layoutAttributes=s,this.indexArray=new d,this.segments=new Nt,this.collisionVertexArray=new lt}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,$m.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Gt("CollisionBuffers",D1);class Vm{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(b=>b.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=BS(this.zoom,s["text-size"]),this.iconSizeData=BS(this.zoom,s["icon-size"]);const d=this.layers[0].layout,g=d.get("symbol-sort-key"),_=d.get("symbol-z-order");this.canOverlap=k1(d,"text-overlap","text-allow-overlap")!=="never"||k1(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(b=>f.az[b])),this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id),this.sourceID=r.sourceID}createArrays(){this.text=new R1(new Vl(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new R1(new Vl(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new N,this.lineVertexArray=new H,this.symbolInstances=new O,this.textAnchorOffsets=new K}calculateGlyphDependencies(r,s,d,g,_){for(const b of r)if(s[b.codePointAt(0)]=!0,(d||g)&&_){const C=lf[b];C&&(s[C.codePointAt(0)]=!0)}}populate(r,s,d){const g=this.layers[0],_=g.layout,b=_.get("text-font"),C=_.get("text-field"),E=_.get("icon-image"),z=(C.value.kind!=="constant"||C.value.value instanceof Xi&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(b.value.kind!=="constant"||b.value.value.length>0),F=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,B=_.get("symbol-sort-key");if(this.features=[],!z&&!F)return;const W=s.iconDependencies,X=s.glyphDependencies,te=s.availableImages,re=new Sn(this.zoom);for(const{feature:le,id:me,index:Te,sourceLayerIndex:pe}of r){const ye=g._featureFilter.needGeometry,De=Ka(le,ye);if(!g._featureFilter.filter(re,De,d))continue;let je,ot;if(ye||(De.geometry=va(le)),z){const wt=g.getValueAndResolveTokens("text-field",De,d,te),It=Xi.factory(wt),Bt=this.hasRTLText=this.hasRTLText||_D(It);(!Bt||Ua.getRTLTextPluginStatus()==="unavailable"||Bt&&Ua.isParsed())&&(je=Py(It,g,De))}if(F){const wt=g.getValueAndResolveTokens("icon-image",De,d,te);ot=wt instanceof Vo?wt:Vo.fromString(wt)}if(!je&&!ot)continue;const xt=this.sortFeaturesByKey?B.evaluate(De,{},d):void 0;if(this.features.push({id:me,text:je,icon:ot,index:Te,sourceLayerIndex:pe,geometry:De.geometry,properties:le.properties,type:el.types[le.type],sortKey:xt}),ot&&(W[ot.name]=!0),je){const wt=b.evaluate(De,{},d).join(","),It=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(f.az.vertical)>=0;for(const Bt of je.sections)if(Bt.image)W[Bt.image.name]=!0;else{const Rt=Ll(je.toString()),St=Bt.fontStack||wt,mt=X[St]=X[St]||{};this.calculateGlyphDependencies(Bt.text,mt,It,this.allowVerticalPlacement,Rt)}}}_.get("symbol-placement")==="line"&&(this.features=function(le){const me={},Te={},pe=[];let ye=0;function De(wt){pe.push(le[wt]),ye++}function je(wt,It,Bt){const Rt=Te[wt];return delete Te[wt],Te[It]=Rt,pe[Rt].geometry[0].pop(),pe[Rt].geometry[0]=pe[Rt].geometry[0].concat(Bt[0]),Rt}function ot(wt,It,Bt){const Rt=me[It];return delete me[It],me[wt]=Rt,pe[Rt].geometry[0].shift(),pe[Rt].geometry[0]=Bt[0].concat(pe[Rt].geometry[0]),Rt}function xt(wt,It,Bt){const Rt=Bt?It[0][It[0].length-1]:It[0][0];return`${wt}:${Rt.x}:${Rt.y}`}for(let wt=0;wt<le.length;wt++){const It=le[wt],Bt=It.geometry,Rt=It.text?It.text.toString():null;if(!Rt){De(wt);continue}const St=xt(Rt,Bt),mt=xt(Rt,Bt,!0);if(St in Te&&mt in me&&Te[St]!==me[mt]){const Kt=ot(St,mt,Bt),er=je(St,mt,pe[Kt].geometry);delete me[St],delete Te[mt],Te[xt(Rt,pe[er].geometry,!0)]=er,pe[Kt].geometry=null}else St in Te?je(St,mt,Bt):mt in me?ot(St,mt,Bt):(De(wt),me[St]=ye-1,Te[mt]=ye-1)}return pe.filter(wt=>wt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((le,me)=>le.sortKey-me.sortKey)}update(r,s,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,s,this.layers,{imagePositions:d}),this.icon.programConfigurations.updatePaintArrays(r,s,this.layers,{imagePositions:d}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,s){const d=this.lineVertexArray.length;if(r.segment!==void 0){let g=r.dist(s[r.segment+1]),_=r.dist(s[r.segment]);const b={};for(let C=r.segment+1;C<s.length;C++)b[C]={x:s[C].x,y:s[C].y,tileUnitDistanceFromAnchor:g},C<s.length-1&&(g+=s[C+1].dist(s[C]));for(let C=r.segment||0;C>=0;C--)b[C]={x:s[C].x,y:s[C].y,tileUnitDistanceFromAnchor:_},C>0&&(_+=s[C-1].dist(s[C]));for(let C=0;C<s.length;C++){const E=b[C];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(r,s,d,g,_,b,C,E,z,F,B,W){const X=r.indexArray,te=r.layoutVertexArray,re=r.segments.prepareSegment(4*s.length,te,X,this.canOverlap?b.sortKey:void 0),le=this.glyphOffsetArray.length,me=re.vertexLength,Te=this.allowVerticalPlacement&&C===f.az.vertical?Math.PI/2:0,pe=b.text&&b.text.sections;for(let ye=0;ye<s.length;ye++){const{tl:De,tr:je,bl:ot,br:xt,tex:wt,pixelOffsetTL:It,pixelOffsetBR:Bt,minFontScaleX:Rt,minFontScaleY:St,glyphOffset:mt,isSDF:Kt,sectionIndex:er}=s[ye],_r=re.vertexLength,nr=mt[1];V0(te,E.x,E.y,De.x,nr+De.y,wt.x,wt.y,d,Kt,It.x,It.y,Rt,St),V0(te,E.x,E.y,je.x,nr+je.y,wt.x+wt.w,wt.y,d,Kt,Bt.x,It.y,Rt,St),V0(te,E.x,E.y,ot.x,nr+ot.y,wt.x,wt.y+wt.h,d,Kt,It.x,Bt.y,Rt,St),V0(te,E.x,E.y,xt.x,nr+xt.y,wt.x+wt.w,wt.y+wt.h,d,Kt,Bt.x,Bt.y,Rt,St),A1(r.dynamicLayoutVertexArray,E,Te),X.emplaceBack(_r,_r+2,_r+1),X.emplaceBack(_r+1,_r+2,_r+3),re.vertexLength+=4,re.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(mt[0]),ye!==s.length-1&&er===s[ye+1].sectionIndex||r.programConfigurations.populatePaintArrays(te.length,b,b.index,{imagePositions:{},canonical:W,formattedSection:pe&&pe[er]})}r.placedSymbolArray.emplaceBack(E.x,E.y,le,this.glyphOffsetArray.length-le,me,z,F,E.segment,d?d[0]:0,d?d[1]:0,g[0],g[1],C,0,!1,0,B)}_addCollisionDebugVertex(r,s,d,g,_,b){return s.emplaceBack(0,0),r.emplaceBack(d.x,d.y,g,_,Math.round(b.x),Math.round(b.y))}addCollisionDebugVertices(r,s,d,g,_,b,C){const E=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),z=E.vertexLength,F=_.layoutVertexArray,B=_.collisionVertexArray,W=C.anchorX,X=C.anchorY;this._addCollisionDebugVertex(F,B,b,W,X,new x(r,s)),this._addCollisionDebugVertex(F,B,b,W,X,new x(d,s)),this._addCollisionDebugVertex(F,B,b,W,X,new x(d,g)),this._addCollisionDebugVertex(F,B,b,W,X,new x(r,g)),E.vertexLength+=4;const te=_.indexArray;te.emplaceBack(z,z+1),te.emplaceBack(z+1,z+2),te.emplaceBack(z+2,z+3),te.emplaceBack(z+3,z),E.primitiveLength+=4}addDebugCollisionBoxes(r,s,d,g){for(let _=r;_<s;_++){const b=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(b.x1,b.y1,b.x2,b.y2,g?this.textCollisionBox:this.iconCollisionBox,b.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new D1(at,bp.members,Dt),this.iconCollisionBox=new D1(at,bp.members,Dt);for(let r=0;r<this.symbolInstances.length;r++){const s=this.symbolInstances.get(r);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(r,s,d,g,_,b,C,E,z){const F={};for(let B=s;B<d;B++){const W=r.get(B);F.textBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},F.textFeatureIndex=W.featureIndex;break}for(let B=g;B<_;B++){const W=r.get(B);F.verticalTextBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},F.verticalTextFeatureIndex=W.featureIndex;break}for(let B=b;B<C;B++){const W=r.get(B);F.iconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},F.iconFeatureIndex=W.featureIndex;break}for(let B=E;B<z;B++){const W=r.get(B);F.verticalIconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},F.verticalIconFeatureIndex=W.featureIndex;break}return F}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const d=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,s){const d=r.placedSymbolArray.get(s),g=d.vertexStartIndex+4*d.numGlyphs;for(let _=d.vertexStartIndex;_<g;_+=4)r.indexArray.emplaceBack(_,_+2,_+1),r.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(r),d=Math.cos(r),g=[],_=[],b=[];for(let C=0;C<this.symbolInstances.length;++C){b.push(C);const E=this.symbolInstances.get(C);g.push(0|Math.round(s*E.anchorX+d*E.anchorY)),_.push(E.featureIndex)}return b.sort((C,E)=>g[C]-g[E]||_[E]-_[C]),b}addToSortKeyRanges(r,s){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===s?d.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const d=this.symbolInstances.get(s);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((g,_,b)=>{g>=0&&b.indexOf(g)===_&&this.addIndicesForPlacedSymbol(this.text,g)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let $S,jS;Gt("SymbolBucket",Vm,{omit:["layers","collisionBoxArray","features","compareText"]}),Vm.MAX_GLYPHS=65535,Vm.addDynamicAttributes=A1;var z1={get paint(){return jS=jS||new wi({"icon-opacity":new cr(Ae.paint_symbol["icon-opacity"]),"icon-color":new cr(Ae.paint_symbol["icon-color"]),"icon-halo-color":new cr(Ae.paint_symbol["icon-halo-color"]),"icon-halo-width":new cr(Ae.paint_symbol["icon-halo-width"]),"icon-halo-blur":new cr(Ae.paint_symbol["icon-halo-blur"]),"icon-translate":new Wt(Ae.paint_symbol["icon-translate"]),"icon-translate-anchor":new Wt(Ae.paint_symbol["icon-translate-anchor"]),"text-opacity":new cr(Ae.paint_symbol["text-opacity"]),"text-color":new cr(Ae.paint_symbol["text-color"],{runtimeType:Ht,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new cr(Ae.paint_symbol["text-halo-color"]),"text-halo-width":new cr(Ae.paint_symbol["text-halo-width"]),"text-halo-blur":new cr(Ae.paint_symbol["text-halo-blur"]),"text-translate":new Wt(Ae.paint_symbol["text-translate"]),"text-translate-anchor":new Wt(Ae.paint_symbol["text-translate-anchor"])})},get layout(){return $S=$S||new wi({"symbol-placement":new Wt(Ae.layout_symbol["symbol-placement"]),"symbol-spacing":new Wt(Ae.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Wt(Ae.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new cr(Ae.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Wt(Ae.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Wt(Ae.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Wt(Ae.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Wt(Ae.layout_symbol["icon-ignore-placement"]),"icon-optional":new Wt(Ae.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Wt(Ae.layout_symbol["icon-rotation-alignment"]),"icon-size":new cr(Ae.layout_symbol["icon-size"]),"icon-text-fit":new Wt(Ae.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Wt(Ae.layout_symbol["icon-text-fit-padding"]),"icon-image":new cr(Ae.layout_symbol["icon-image"]),"icon-rotate":new cr(Ae.layout_symbol["icon-rotate"]),"icon-padding":new cr(Ae.layout_symbol["icon-padding"]),"icon-keep-upright":new Wt(Ae.layout_symbol["icon-keep-upright"]),"icon-offset":new cr(Ae.layout_symbol["icon-offset"]),"icon-anchor":new cr(Ae.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Wt(Ae.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Wt(Ae.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Wt(Ae.layout_symbol["text-rotation-alignment"]),"text-field":new cr(Ae.layout_symbol["text-field"]),"text-font":new cr(Ae.layout_symbol["text-font"]),"text-size":new cr(Ae.layout_symbol["text-size"]),"text-max-width":new cr(Ae.layout_symbol["text-max-width"]),"text-line-height":new Wt(Ae.layout_symbol["text-line-height"]),"text-letter-spacing":new cr(Ae.layout_symbol["text-letter-spacing"]),"text-justify":new cr(Ae.layout_symbol["text-justify"]),"text-radial-offset":new cr(Ae.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Wt(Ae.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new cr(Ae.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new cr(Ae.layout_symbol["text-anchor"]),"text-max-angle":new Wt(Ae.layout_symbol["text-max-angle"]),"text-writing-mode":new Wt(Ae.layout_symbol["text-writing-mode"]),"text-rotate":new cr(Ae.layout_symbol["text-rotate"]),"text-padding":new Wt(Ae.layout_symbol["text-padding"]),"text-keep-upright":new Wt(Ae.layout_symbol["text-keep-upright"]),"text-transform":new cr(Ae.layout_symbol["text-transform"]),"text-offset":new cr(Ae.layout_symbol["text-offset"]),"text-allow-overlap":new Wt(Ae.layout_symbol["text-allow-overlap"]),"text-overlap":new Wt(Ae.layout_symbol["text-overlap"]),"text-ignore-placement":new Wt(Ae.layout_symbol["text-ignore-placement"]),"text-optional":new Wt(Ae.layout_symbol["text-optional"])})}};class NS{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:Ti,this.defaultValue=r}evaluate(r){if(r.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(r.formattedSection))return s.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Gt("FormatSectionOverride",NS,{omit:["defaultValue"]});class U0 extends Ho{constructor(r,s){super(r,z1,s)}recalculate(r,s){if(super.recalculate(r,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const g=[];for(const _ of d)g.indexOf(_)<0&&g.push(_);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,s,d,g){const _=this.layout.get(r).evaluate(s,{},d,g),b=this._unevaluatedLayout._values[r];return b.isDataDriven()||Cc(b.value)||!_?_:function(C,E){return E.replace(/{([^{}]+)}/g,(z,F)=>C&&F in C?String(C[F]):"")}(s.properties,_)}createBucket(r){return new Vm(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of z1.paint.overridableProperties){if(!U0.hasPaintOverride(this.layout,r))continue;const s=this.paint.get(r),d=new NS(s),g=new Sc(d,s.property.specification);let _=null;_=s.value.kind==="constant"||s.value.kind==="source"?new Pl("source",g):new Cu("composite",g,s.value.zoomStops),this.paint._values[r]=new as(s.property,_,s.parameters)}}_handleOverridablePaintPropertyUpdate(r,s,d){return!(!this.layout||s.isDataDriven()||d.isDataDriven())&&U0.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,s){const d=r.get("text-field"),g=z1.paint.properties[s];let _=!1;const b=C=>{for(const E of C)if(g.overrides&&g.overrides.hasOverride(E))return void(_=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Xi)b(d.value.value.sections);else if(d.value.kind==="source"||d.value.kind==="composite"){const C=z=>{_||(z instanceof Ao&&Gn(z.value)===Vi?b(z.value.sections):z instanceof bh?b(z.sections):z.eachChild(C))},E=d.value;E._styleExpression&&C(E._styleExpression.expression)}return _}}let VS;var xD={get paint(){return VS=VS||new wi({"background-color":new Wt(Ae.paint_background["background-color"]),"background-pattern":new Vh(Ae.paint_background["background-pattern"]),"background-opacity":new Wt(Ae.paint_background["background-opacity"])})}};class bD extends Ho{constructor(r,s){super(r,xD,s)}}class wD extends Ho{constructor(r,s){super(r,{},s),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class SD{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const CD={once:!0},O1=63710088e-1;class hf{constructor(r,s){if(isNaN(r)||isNaN(s))throw new Error(`Invalid LngLat object: (${r}, ${s})`);if(this.lng=+r,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new hf(bt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const s=Math.PI/180,d=this.lat*s,g=r.lat*s,_=Math.sin(d)*Math.sin(g)+Math.cos(d)*Math.cos(g)*Math.cos((r.lng-this.lng)*s);return O1*Math.acos(Math.min(_,1))}static convert(r){if(r instanceof hf)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new hf(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new hf(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const US=2*Math.PI*O1;function GS(l){return US*Math.cos(l*Math.PI/180)}function qS(l){return(180+l)/360}function HS(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function WS(l,r){return l/GS(r)}function ZS(l){return 360*l-180}function G0(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function XS(l,r){return l*GS(G0(r))}class Iy{constructor(r,s,d=0){this.x=+r,this.y=+s,this.z=+d}static fromLngLat(r,s=0){const d=hf.convert(r);return new Iy(qS(d.lng),HS(d.lat),WS(s,d.lat))}toLngLat(){return new hf(ZS(this.x),G0(this.y))}toAltitude(){return XS(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/US*(r=G0(this.y),1/Math.cos(r*Math.PI/180));var r}}function KS(l,r,s){var d=2*Math.PI*6378137/256/Math.pow(2,s);return[l*d-2*Math.PI*6378137/2,r*d-2*Math.PI*6378137/2]}class L1{constructor(r,s,d){if(!function(g,_,b){return!(g<0||g>25||b<0||b>=Math.pow(2,g)||_<0||_>=Math.pow(2,g))}(r,s,d))throw new Error(`x=${s}, y=${d}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=s,this.y=d,this.key=Um(0,r,r,s,d)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,s,d){const g=(b=this.y,C=this.z,E=KS(256*(_=this.x),256*(b=Math.pow(2,C)-b-1),C),z=KS(256*(_+1),256*(b+1),C),E[0]+","+E[1]+","+z[0]+","+z[1]);var _,b,C,E,z;const F=function(B,W,X){let te,re="";for(let le=B;le>0;le--)te=1<<le-1,re+=(W&te?1:0)+(X&te?2:0);return re}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,F).replace(/{bbox-epsg-3857}/g,g)}isChildOf(r){const s=this.z-r.z;return s>0&&r.x===this.x>>s&&r.y===this.y>>s}getTilePoint(r){const s=Math.pow(2,this.z);return new x((r.x*s-this.x)*Ve,(r.y*s-this.y)*Ve)}toString(){return`${this.z}/${this.x}/${this.y}`}}class YS{constructor(r,s){this.wrap=r,this.canonical=s,this.key=Um(r,s.z,s.z,s.x,s.y)}}class wa{constructor(r,s,d,g,_){if(this.terrainRttPosMatrix32f=null,r<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${d}`);this.overscaledZ=r,this.wrap=s,this.canonical=new L1(d,+g,+_),this.key=Um(s,r,d,g,_)}clone(){return new wa(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-r;return r>this.canonical.z?new wa(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new wa(r,this.wrap,r,this.canonical.x>>s,this.canonical.y>>s)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(r,s){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-r;return r>this.canonical.z?Um(this.wrap*+s,r,this.canonical.z,this.canonical.x,this.canonical.y):Um(this.wrap*+s,r,r,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(r){if(r.wrap!==this.wrap||this.overscaledZ-r.overscaledZ<=0)return!1;if(r.overscaledZ===0)return this.overscaledZ>0;const s=this.canonical.z-r.canonical.z;return!(s<0)&&r.canonical.x===this.canonical.x>>s&&r.canonical.y===this.canonical.y>>s}children(r){if(this.overscaledZ>=r)return[new wa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,d=2*this.canonical.x,g=2*this.canonical.y;return[new wa(s,this.wrap,s,d,g),new wa(s,this.wrap,s,d+1,g),new wa(s,this.wrap,s,d,g+1),new wa(s,this.wrap,s,d+1,g+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new wa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new wa(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new YS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Iy(r.x-this.wrap,r.y))}normalizeCoordinates(r,s,d=8192){if(r>=0&&r<d&&s>=0&&s<d)return{tileID:this,x:r,y:s};const g=Math.floor(r/d),_=Math.floor(s/d),b=r-g*d,C=s-_*d,E=this.canonical.z,z=1<<E,F=this.canonical.y+_;if(F<0||F>=z)return null;let B=this.canonical.x+g,W=this.wrap;return B<0?(W-=Math.ceil(-B/z),B=(B%z+z)%z):B>=z&&(W+=Math.floor(B/z),B%=z),{tileID:new wa(this.overscaledZ,W,E,B,F),x:b,y:C}}}function Um(l,r,s,d,g){(l*=2)<0&&(l=-1*l-1);const _=1<<s;return(_*_*l+_*g+d).toString(36)+s.toString(36)+r.toString(36)}function F1(l,r){return r?l.properties[r]:l.id}function TD(l,r){const s={id:l.id};if(r.removeAllProperties&&(delete l.removeProperties,delete l.addOrUpdateProperties,delete r.removeProperties),r.removeProperties)for(const d of r.removeProperties){const g=l.addOrUpdateProperties.findIndex(_=>_.key===d);g>-1&&l.addOrUpdateProperties.splice(g,1)}return(l.removeAllProperties||r.removeAllProperties)&&(s.removeAllProperties=!0),(l.removeProperties||r.removeProperties)&&(s.removeProperties=[...l.removeProperties||[],...r.removeProperties||[]]),(l.addOrUpdateProperties||r.addOrUpdateProperties)&&(s.addOrUpdateProperties=[...l.addOrUpdateProperties||[],...r.addOrUpdateProperties||[]]),(l.newGeometry||r.newGeometry)&&(s.newGeometry=r.newGeometry||l.newGeometry),s}function JS(l){var r,s;if(!l)return{};const d={};return d.removeAll=l.removeAll,d.remove=new Set(l.remove||[]),d.add=new Map((r=l.add)===null||r===void 0?void 0:r.map(g=>[g.id,g])),d.update=new Map((s=l.update)===null||s===void 0?void 0:s.map(g=>[g.id,g])),d}Gt("CanonicalTileID",L1),Gt("OverscaledTileID",wa,{omit:["terrainRttPosMatrix32f"]});class Tp{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(r){return this.minX=Math.min(this.minX,r.x),this.minY=Math.min(this.minY,r.y),this.maxX=Math.max(this.maxX,r.x),this.maxY=Math.max(this.maxY,r.y),this}expandBy(r){return this.minX-=r,this.minY-=r,this.maxX+=r,this.maxY+=r,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(r){return this.expandBy(-r)}map(r){const s=new Tp;return s.extend(r(new x(this.minX,this.minY))),s.extend(r(new x(this.maxX,this.minY))),s.extend(r(new x(this.minX,this.maxY))),s.extend(r(new x(this.maxX,this.maxY))),s}static fromPoints(r){const s=new Tp;for(const d of r)s.extend(d);return s}contains(r){return r.x>=this.minX&&r.x<=this.maxX&&r.y>=this.minY&&r.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(r){return!this.empty()&&!r.empty()&&r.minX>=this.minX&&r.maxX<=this.maxX&&r.minY>=this.minY&&r.maxY<=this.maxY}intersects(r){return!this.empty()&&!r.empty()&&r.minX<=this.maxX&&r.maxX>=this.minX&&r.minY<=this.maxY&&r.maxY>=this.minY}}class QS{constructor(r){this._stringToNumber={},this._numberToString=[];for(let s=0;s<r.length;s++){const d=r[s];this._stringToNumber[d]=s,this._numberToString[s]=d}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class eC{constructor(r,s,d,g,_){this.type="Feature",this._vectorTileFeature=r,this._x=d,this._y=g,this._z=s,this.properties=r.properties,this.id=_}projectPoint(r,s,d,g){return[360*(r.x+s)/g-180,360/Math.PI*Math.atan(Math.exp((1-2*(r.y+d)/g)*Math.PI))-90]}projectLine(r,s,d,g){return r.map(_=>this.projectPoint(_,s,d,g))}get geometry(){if(this._geometry)return this._geometry;const r=this._vectorTileFeature,s=r.extent*Math.pow(2,this._z),d=r.extent*this._x,g=r.extent*this._y,_=r.loadGeometry();switch(r.type){case 1:{const b=[];for(const E of _)b.push(E[0]);const C=this.projectLine(b,d,g,s);this._geometry=b.length===1?{type:"Point",coordinates:C[0]}:{type:"MultiPoint",coordinates:C};break}case 2:{const b=_.map(C=>this.projectLine(C,d,g,s));this._geometry=b.length===1?{type:"LineString",coordinates:b[0]}:{type:"MultiLineString",coordinates:b};break}case 3:{const b=xy(_),C=[];for(const E of b)C.push(E.map(z=>this.projectLine(z,d,g,s)));this._geometry=C.length===1?{type:"Polygon",coordinates:C[0]}:{type:"MultiPolygon",coordinates:C};break}default:throw new Error(`unknown feature type: ${r.type}`)}return this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&s!=="_x"&&s!=="_y"&&s!=="_z"&&(r[s]=this[s]);return r}}class Gm{_name;dataBuffer;nullabilityBuffer;_size;constructor(r,s,d){this._name=r,this.dataBuffer=s,typeof d=="number"?this._size=d:(this.nullabilityBuffer=d,this._size=d.size())}getValue(r){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(r)?null:this.getValueFromBuffer(r)}has(r){return this.nullabilityBuffer&&this.nullabilityBuffer.get(r)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class q0 extends Gm{}class B1 extends q0{getValueFromBuffer(r){return this.dataBuffer[r]}}class $1 extends q0{getValueFromBuffer(r){return this.dataBuffer[r]}}class tC extends Gm{delta;constructor(r,s,d,g){super(r,s,g),this.delta=d}}class j1 extends tC{constructor(r,s,d,g){super(r,Int32Array.of(s),d,g)}getValueFromBuffer(r){return this.dataBuffer[0]+r*this.delta}}class N1 extends Gm{constructor(r,s,d){super(r,Int32Array.of(s),d)}getValueFromBuffer(r){return this.dataBuffer[0]}}class MD{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(r,s,d,g,_=4096){this._name=r,this._geometryVector=s,this._idVector=d,this._propertyVectors=g,this._extent=_}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(r){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map(s=>[s.name,s]))),this.propertyVectorsMap.get(r)}*[Symbol.iterator](){const r=this.geometryVector[Symbol.iterator]();let s=0;for(;s<this.numFeatures;){let d;this.idVector&&(d=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(s)):this.idVector.getValue(s));const g=r?.next().value,_={};for(const b of this.propertyVectors){if(!b)continue;const C=b.name,E=b.getValue(s);E!==null&&(_[C]=E)}s++,yield{id:d,geometry:g,properties:_}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const r=[],s=this.geometryVector.getGeometries();for(let d=0;d<this.numFeatures;d++){let g;this.idVector&&(g=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(d)):this.idVector.getValue(d));const _={coordinates:s[d],type:this.geometryVector.geometryType(d)},b={};for(const C of this.propertyVectors){if(!C)continue;const E=C.name,z=C.getValue(d);z!==null&&(b[E]=z)}r.push({id:g,geometry:_,properties:b})}return r}containsMaxSaveIntegerValues(r){return r instanceof B1||r instanceof N1&&r instanceof j1||r instanceof $1}}class PD{value;constructor(r){this.value=r}get(){return this.value}set(r){this.value=r}increment(){return this.value++}add(r){this.value+=r}}var Dn,df,Jo,Hc,Mp,Sa,$i,To,rC,rl;function cs(l,r,s){const d=new Int32Array(s);let g=0,_=r.get();for(let b=0;b<d.length;b++){let C=l[_++],E=127&C;C<128||(C=l[_++],E|=(127&C)<<7,C<128||(C=l[_++],E|=(127&C)<<14,C<128||(C=l[_++],E|=(127&C)<<21,C<128||(C=l[_++],E|=(15&C)<<28)))),d[g++]=E}return r.set(_),d}function V1(l,r,s){const d=new BigInt64Array(s);for(let g=0;g<d.length;g++)d[g]=ED(l,r);return d}function ED(l,r){let s=0n,d=0,g=r.get();for(;g<l.length;){const _=l[g++];if(s|=BigInt(127&_)<<BigInt(d),!(128&_))break;if(d+=7,d>=64)throw new Error("Varint too long")}return r.set(g),s}function ID(l,r){let s,d;return d=l[r.get()],r.increment(),s=127&d,d<128?s:(d=l[r.get()],r.increment(),s|=(127&d)<<7,d<128?s:(d=l[r.get()],r.increment(),s|=(127&d)<<14,d<128?s:(d=l[r.get()],r.increment(),s|=(127&d)<<21,d<128?s:(d=l[r.get()],s|=(15&d)<<28,function(g,_,b){let C,E;if(E=_[b.get()],b.increment(),C=(112&E)>>4,E<128||(E=_[b.get()],b.increment(),C|=(127&E)<<3,E<128)||(E=_[b.get()],b.increment(),C|=(127&E)<<10,E<128)||(E=_[b.get()],b.increment(),C|=(127&E)<<17,E<128)||(E=_[b.get()],b.increment(),C|=(127&E)<<24,E<128)||(E=_[b.get()],b.increment(),C|=(1&E)<<31,E<128))return 4294967296*C+(g>>>0);throw new Error("Expected varint not more than 10 bytes")}(s,l,r)))))}function Ai(l){return l>>>1^-(1&l)}function Ca(l){return l>>1n^-(1n&l)}function qm(l){return l%2==1?(l+1)/-2:l/2}function nC(l,r,s){if(s===void 0){s=0;for(let _=0;_<r;_++)s+=l[_]}const d=new Int32Array(s);let g=0;for(let _=0;_<r;_++){const b=l[_];d.fill(l[_+r],g,g+b),g+=b}return d}function iC(l,r,s){if(s===void 0){s=0;for(let _=0;_<r;_++)s+=Number(l[_])}const d=new BigInt64Array(s);let g=0;for(let _=0;_<r;_++){const b=Number(l[_]);d.fill(l[_+r],g,g+b),g+=b}return d}function oC(l,r,s){const d=new Float64Array(s);let g=0;for(let _=0;_<r;_++){const b=l[_];d.fill(l[_+r],g,g+b),g+=b}return d}function sC(l){const r=l.length/4*4;let s=1;if(r>=4)for(let d=l[0];s<r-4;s+=4)d=l[s]+=d,d=l[s+1]+=d,d=l[s+2]+=d,d=l[s+3]+=d;for(;s!=l.length;)l[s]+=l[s-1],++s}(function(l){l.NONE="NONE",l.DELTA="DELTA",l.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",l.RLE="RLE",l.MORTON="MORTON",l.PDE="PDE"})(Dn||(Dn={})),function(l){l.NONE="NONE",l.FAST_PFOR="FAST_PFOR",l.VARINT="VARINT",l.ALP="ALP"}(df||(df={})),function(l){l.PRESENT="PRESENT",l.DATA="DATA",l.OFFSET="OFFSET",l.LENGTH="LENGTH"}(Jo||(Jo={}));class U1{_dictionaryType;_offsetType;_lengthType;constructor(r,s,d){this._dictionaryType=r,this._offsetType=s,this._lengthType=d}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function Es(l,r){const s=function(d,g){const _=d[g.get()],b=Object.values(Jo)[_>>4];let C=null;switch(b){case Jo.DATA:C=new U1(Object.values(Hc)[15&_]);break;case Jo.OFFSET:C=new U1(null,Object.values(Mp)[15&_]);break;case Jo.LENGTH:C=new U1(null,null,Object.values(Sa)[15&_])}g.increment();const E=d[g.get()],z=Object.values(Dn)[E>>5],F=Object.values(Dn)[E>>2&7],B=Object.values(df)[3&E];g.increment();const W=cs(d,g,2),X=W[0];return{physicalStreamType:b,logicalStreamType:C,logicalLevelTechnique1:z,logicalLevelTechnique2:F,physicalLevelTechnique:B,numValues:X,byteLength:W[1],decompressedCount:X}}(l,r);return s.logicalLevelTechnique1===Dn.MORTON?function(d,g,_){const b=cs(g,_,2);return{physicalStreamType:d.physicalStreamType,logicalStreamType:d.logicalStreamType,logicalLevelTechnique1:d.logicalLevelTechnique1,logicalLevelTechnique2:d.logicalLevelTechnique2,physicalLevelTechnique:d.physicalLevelTechnique,numValues:d.numValues,byteLength:d.byteLength,decompressedCount:d.decompressedCount,numBits:b[0],coordinateShift:b[1]}}(s,l,r):Dn.RLE!==s.logicalLevelTechnique1&&Dn.RLE!==s.logicalLevelTechnique2||df.NONE===s.physicalLevelTechnique?s:function(d,g,_){const b=cs(g,_,2);return{physicalStreamType:d.physicalStreamType,logicalStreamType:d.logicalStreamType,logicalLevelTechnique1:d.logicalLevelTechnique1,logicalLevelTechnique2:d.logicalLevelTechnique2,physicalLevelTechnique:d.physicalLevelTechnique,numValues:d.numValues,byteLength:d.byteLength,decompressedCount:b[1],runs:b[0],numRleValues:b[1]}}(s,l,r)}(function(l){l.NONE="NONE",l.SINGLE="SINGLE",l.SHARED="SHARED",l.VERTEX="VERTEX",l.MORTON="MORTON",l.FSST="FSST"})(Hc||(Hc={})),function(l){l.VERTEX="VERTEX",l.INDEX="INDEX",l.STRING="STRING",l.KEY="KEY"}(Mp||(Mp={})),function(l){l.VAR_BINARY="VAR_BINARY",l.GEOMETRIES="GEOMETRIES",l.PARTS="PARTS",l.RINGS="RINGS",l.TRIANGLES="TRIANGLES",l.SYMBOL="SYMBOL",l.DICTIONARY="DICTIONARY"}(Sa||(Sa={})),function(l){l[l.FLAT=0]="FLAT",l[l.CONST=1]="CONST",l[l.SEQUENCE=2]="SEQUENCE",l[l.DICTIONARY=3]="DICTIONARY",l[l.FSST_DICTIONARY=4]="FSST_DICTIONARY"}($i||($i={}));class Wc{values;_size;constructor(r,s){this.values=r,this._size=s}get(r){const s=Math.floor(r/8);return(this.values[s]>>r%8&1)==1}set(r,s){const d=Math.floor(r/8);this.values[d]=this.values[d]|(s?1:0)<<r%8}getInt(r){const s=Math.floor(r/8);return this.values[s]>>r%8&1}size(){return this._size}getBuffer(){return this.values}}function H0(l,r,s){if(!r)return l;const d=r.size(),g=new l.constructor(d);let _=0;for(let b=0;b<d;b++)g[b]=r.get(b)?l[_++]:s;return g}function Is(l,r,s,d,g,_){return function(b,C,E,z,F){switch(C.logicalLevelTechnique1){case Dn.DELTA:if(C.logicalLevelTechnique2===Dn.RLE){const B=C;if(!F)return function(W,X,te){const re=new Int32Array(te);let le=0,me=0;for(let Te=0;Te<X;Te++){const pe=W[Te],ye=Ai(W[Te+X]);for(let De=0;De<pe;De++)me+=ye,re[le++]=me}return re}(b,B.runs,B.numRleValues);b=nC(b,B.runs,B.numRleValues)}(function(B){B[0]=Ai(B[0]);const W=B.length/4*4;let X=1;if(W>=4)for(;X<W-4;X+=4){const te=B[X+1],re=B[X+2],le=B[X+3];B[X]=Ai(B[X])+B[X-1],B[X+1]=Ai(te)+B[X],B[X+2]=Ai(re)+B[X+1],B[X+3]=Ai(le)+B[X+2]}for(;X!=B.length;++X)B[X]=Ai(B[X])+B[X-1]})(b);break;case Dn.RLE:b=function(B,W,X){return X?function(te,re,le){if(le===void 0){le=0;for(let pe=0;pe<re;pe++)le+=te[pe]}const me=new Int32Array(le);let Te=0;for(let pe=0;pe<re;pe++){const ye=te[pe];let De=te[pe+re];De=Ai(De),me.fill(De,Te,Te+ye),Te+=ye}return me}(B,W.runs,W.numRleValues):nC(B,W.runs,W.numRleValues)}(b,C,E);break;case Dn.MORTON:sC(b);break;case Dn.COMPONENTWISE_DELTA:(function(B){if(B.length<2)return;B[0]=Ai(B[0]),B[1]=Ai(B[1]);const W=B.length/4*4;let X=2;if(W>=4)for(;X<W-4;X+=4){const te=B[X+1],re=B[X+2],le=B[X+3];B[X]=Ai(B[X])+B[X-2],B[X+1]=Ai(te)+B[X-1],B[X+2]=Ai(re)+B[X],B[X+3]=Ai(le)+B[X+1]}for(;X!=B.length;X+=2)B[X]=Ai(B[X])+B[X-2],B[X+1]=Ai(B[X+1])+B[X-1]})(b);break;case Dn.NONE:E&&function(B){for(let W=0;W<B.length;W++)B[W]=Ai(B[W])}(b);break;default:throw new Error(`The specified Logical level technique is not supported: ${C.logicalLevelTechnique1}`)}return F?H0(b,F,0):b}(W0(l,r,s),s,d,0,_)}function ff(l,r,s){return function(d,g){if(g.logicalLevelTechnique1===Dn.DELTA&&g.logicalLevelTechnique2===Dn.NONE)return function(_){const b=new Int32Array(_.length+1);b[0]=0,b[1]=Ai(_[0]);let C=b[1];for(let E=2;E!=b.length;++E)C+=Ai(_[E-1]),b[E]=b[E-1]+C;return new Uint32Array(b)}(d);if(g.logicalLevelTechnique1===Dn.RLE&&g.logicalLevelTechnique2===Dn.NONE)return function(_,b,C){const E=new Int32Array(C+1);E[0]=0;let z=1,F=E[0];for(let B=0;B<b;B++){const W=_[B],X=_[B+b];for(let te=z;te<z+W;te++)E[te]=X+F,F=E[te];z+=W}return new Uint32Array(E)}(d,g.runs,g.numRleValues);if(g.logicalLevelTechnique1===Dn.NONE&&g.logicalLevelTechnique2===Dn.NONE){(function(b){let C=0;for(let E=0;E<b.length;E++)b[E]+=C,C=b[E]})(d);const _=new Uint32Array(g.numValues+1);return _[0]=0,_.set(d,1),_}if(g.logicalLevelTechnique1===Dn.DELTA&&g.logicalLevelTechnique2===Dn.RLE){const _=function(b,C,E){const z=new Int32Array(E+1);z[0]=0;let F=1,B=z[0];for(let W=0;W<C;W++){const X=b[W];let te=b[W+C];te=Ai(te);for(let re=F;re<F+X;re++)z[re]=te+B,B=z[re];F+=X}return new Uint32Array(z)}(d,g.runs,g.numRleValues);return sC(_),_}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")}(W0(l,r,s),s)}function W0(l,r,s){const d=s.physicalLevelTechnique;if(d===df.FAST_PFOR)return function(){throw new Error("FastPFor is not implemented yet.")}();if(d===df.VARINT)return cs(l,r,s.numValues);if(d===df.NONE){const g=r.get();r.add(s.byteLength);const _=l.subarray(g,r.get());return new Int32Array(_)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function G1(l,r,s,d){const g=W0(l,r,s);if(g.length===1){const _=g[0];return d?Ai(_):_}return d?function(_){return Ai(_[1])}(g):function(_){return _[1]}(g)}function aC(l,r,s){return function(d){if(d.length==2){const g=Ai(d[1]);return[g,g]}return[Ai(d[2]),Ai(d[3])]}(W0(l,r,s))}function lC(l,r,s){return function(d){if(d.length==2){const g=Ca(d[1]);return[g,g]}return[Ca(d[2]),Ca(d[3])]}(V1(l,r,s.numValues))}function cC(l,r,s,d,g){return function(_,b,C,E){switch(b.logicalLevelTechnique1){case Dn.DELTA:if(b.logicalLevelTechnique2===Dn.RLE){const z=b;if(!E)return function(F,B,W){const X=new BigInt64Array(W);let te=0,re=0n;for(let le=0;le<B;le++){const me=Number(F[le]),Te=Ca(F[le+B]);for(let pe=0;pe<me;pe++)re+=Te,X[te++]=re}return X}(_,z.runs,z.numRleValues);_=iC(_,z.runs,z.numRleValues)}(function(z){z[0]=Ca(z[0]);const F=z.length/4*4;let B=1;if(F>=4)for(;B<F-4;B+=4){const W=z[B+1],X=z[B+2],te=z[B+3];z[B]=Ca(z[B])+z[B-1],z[B+1]=Ca(W)+z[B],z[B+2]=Ca(X)+z[B+1],z[B+3]=Ca(te)+z[B+2]}for(;B!=z.length;++B)z[B]=Ca(z[B])+z[B-1]})(_);break;case Dn.RLE:_=function(z,F,B){return B?function(W,X,te){if(te===void 0){te=0;for(let me=0;me<X;me++)te+=Number(W[me])}const re=new BigInt64Array(te);let le=0;for(let me=0;me<X;me++){const Te=Number(W[me]);let pe=W[me+X];pe=Ca(pe),re.fill(pe,le,le+Te),le+=Te}return re}(z,F.runs,F.numRleValues):iC(z,F.runs,F.numRleValues)}(_,b,C);break;case Dn.NONE:C&&function(z){for(let F=0;F<z.length;F++)z[F]=Ca(z[F])}(_);break;default:throw new Error(`The specified Logical level technique is not supported: ${b.logicalLevelTechnique1}`)}return E?H0(_,E,0n):_}(V1(l,r,s.numValues),s,d,g)}function uC(l,r,s,d){const g=V1(l,r,s.numValues);if(g.length===1){const _=g[0];return d?Ca(_):_}return d?function(_){return Ca(_[1])}(g):function(_){return _[1]}(g)}function Z0(l,r,s,d){const g=l.logicalLevelTechnique1;if(g===Dn.RLE)return l.runs===1?$i.CONST:$i.FLAT;if(g!==Dn.DELTA||l.logicalLevelTechnique2!==Dn.RLE)return l.numValues===1?$i.CONST:$i.FLAT;const _=r instanceof Wc?r.size():r;if(l.numRleValues!==_)return $i.FLAT;if(l.runs===1)return $i.SEQUENCE;if(l.runs!==2)return l.numValues===1?$i.CONST:$i.FLAT;const b=d.get();let C;if(l.physicalLevelTechnique===df.VARINT)C=cs(s,d,4);else{const E=d.get();C=new Int32Array(s.buffer,s.byteOffset+E,4)}return d.set(b),C[2]===2&&C[3]===2?$i.SEQUENCE:l.numValues===1?$i.CONST:$i.FLAT}class hC extends q0{getValueFromBuffer(r){return this.dataBuffer[r]}}class dC extends tC{constructor(r,s,d,g){super(r,BigInt64Array.of(s),d,g)}getValueFromBuffer(r){return this.dataBuffer[0]+BigInt(r)*this.delta}}class Hm{_geometryOffsets;_partOffsets;_ringOffsets;constructor(r,s,d){this._geometryOffsets=r,this._partOffsets=s,this._ringOffsets=d}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function q1(l,r,s){return{x:fC(l,r)-s,y:fC(l>>1,r)-s}}function fC(l,r){let s=0;for(let d=0;d<r;d++)s|=(l&1<<2*d)>>d;return s}(function(l){l[l.POINT=0]="POINT",l[l.LINESTRING=1]="LINESTRING",l[l.POLYGON=2]="POLYGON",l[l.MULTIPOINT=3]="MULTIPOINT",l[l.MULTILINESTRING=4]="MULTILINESTRING",l[l.MULTIPOLYGON=5]="MULTIPOLYGON"})(To||(To={})),function(l){l[l.POINT=0]="POINT",l[l.LINESTRING=1]="LINESTRING",l[l.POLYGON=2]="POLYGON"}(rC||(rC={})),function(l){l[l.MORTON=0]="MORTON",l[l.VEC_2=1]="VEC_2",l[l.VEC_3=2]="VEC_3"}(rl||(rl={}));class kD{createPoint(r){return[[r]]}createMultiPoint(r){return r.map(s=>[s])}createLineString(r){return[r]}createMultiLineString(r){return r}createPolygon(r,s){return[r].concat(s)}createMultiPolygon(r){return r.flat()}}function pC(l){const r=new Array(l.numGeometries);let s=1,d=1,g=1,_=0;const b=new kD;let C=0,E=0;const z=l.mortonSettings,F=l.topologyVector,B=F.geometryOffsets,W=F.partOffsets,X=F.ringOffsets,te=l.vertexOffsets,re=l.containsPolygonGeometry(),le=l.vertexBuffer;for(let me=0;me<l.numGeometries;me++){const Te=l.geometryType(me);if(Te===To.POINT){if(te&&te.length!==0)if(l.vertexBufferType===rl.VEC_2){const pe=2*te[E++],ye=new x(le[pe],le[pe+1]);r[_++]=b.createPoint(ye)}else{const pe=q1(le[te[E++]],z.numBits,z.coordinateShift),ye=new x(pe.x,pe.y);r[_++]=b.createPoint(ye)}else{const pe=new x(le[C++],le[C++]);r[_++]=b.createPoint(pe)}B&&g++,W&&s++,X&&d++}else if(Te===To.MULTIPOINT){const pe=B[g]-B[g-1];g++;const ye=new Array(pe);if(te&&te.length!==0){for(let De=0;De<pe;De++){const je=2*te[E++];ye[De]=new x(le[je],le[je+1])}r[_++]=b.createMultiPoint(ye)}else{for(let De=0;De<pe;De++){const je=le[C++],ot=le[C++];ye[De]=new x(je,ot)}r[_++]=b.createMultiPoint(ye)}}else if(Te===To.LINESTRING){let pe,ye=0;re?(ye=X[d]-X[d-1],d++):ye=W[s]-W[s-1],s++,te&&te.length!==0?(pe=l.vertexBufferType===rl.VEC_2?W1(le,te,E,ye,!1):Z1(le,te,E,ye,!1,z),E+=ye):(pe=H1(le,C,ye,!1),C+=2*ye),r[_++]=b.createLineString(pe),B&&g++}else if(Te===To.POLYGON){const pe=W[s]-W[s-1];s++;const ye=new Array(pe-1);let De=X[d]-X[d-1];if(d++,te&&te.length!==0){const je=l.vertexBufferType===rl.VEC_2?K0(le,te,E,De):Y0(le,te,E,De,0,z);E+=De;for(let ot=0;ot<ye.length;ot++)De=X[d]-X[d-1],d++,ye[ot]=l.vertexBufferType===rl.VEC_2?K0(le,te,E,De):Y0(le,te,E,De,0,z),E+=De;r[_++]=b.createPolygon(je,ye)}else{const je=X0(le,C,De);C+=2*De;for(let ot=0;ot<ye.length;ot++)De=X[d]-X[d-1],d++,ye[ot]=X0(le,C,De),C+=2*De;r[_++]=b.createPolygon(je,ye)}B&&g++}else if(Te===To.MULTILINESTRING){const pe=B[g]-B[g-1];g++;const ye=new Array(pe);if(te&&te.length!==0){for(let De=0;De<pe;De++){let je=0;re?(je=X[d]-X[d-1],d++):je=W[s]-W[s-1],s++;const ot=l.vertexBufferType===rl.VEC_2?W1(le,te,E,je,!1):Z1(le,te,E,je,!1,z);ye[De]=ot,E+=je}r[_++]=b.createMultiLineString(ye)}else{for(let De=0;De<pe;De++){let je=0;re?(je=X[d]-X[d-1],d++):je=W[s]-W[s-1],s++,ye[De]=H1(le,C,je,!1),C+=2*je}r[_++]=b.createMultiLineString(ye)}}else{if(Te!==To.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const pe=B[g]-B[g-1];g++;const ye=new Array(pe);let De=0;if(te&&te.length!==0){for(let je=0;je<pe;je++){const ot=W[s]-W[s-1];s++;const xt=new Array(ot-1);De=X[d]-X[d-1],d++;const wt=l.vertexBufferType===rl.VEC_2?K0(le,te,E,De):Y0(le,te,E,De,0,z);E+=De;for(let It=0;It<xt.length;It++)De=X[d]-X[d-1],d++,xt[It]=l.vertexBufferType===rl.VEC_2?K0(le,te,E,De):Y0(le,te,E,De,0,z),E+=De;ye[je]=b.createPolygon(wt,xt)}r[_++]=b.createMultiPolygon(ye)}else{for(let je=0;je<pe;je++){const ot=W[s]-W[s-1];s++;const xt=new Array(ot-1);De=X[d]-X[d-1],d++;const wt=X0(le,C,De);C+=2*De;for(let It=0;It<xt.length;It++){const Bt=X[d]-X[d-1];d++,xt[It]=X0(le,C,Bt),C+=2*Bt}ye[je]=b.createPolygon(wt,xt)}r[_++]=b.createMultiPolygon(ye)}}}}return r}function X0(l,r,s){return H1(l,r,s,!0)}function K0(l,r,s,d){return W1(l,r,s,d,!0)}function Y0(l,r,s,d,g,_){return Z1(l,r,s,d,!0,_)}function H1(l,r,s,d){const g=new Array(d?s+1:s);for(let _=0;_<2*s;_+=2)g[_/2]=new x(l[r+_],l[r+_+1]);return d&&(g[g.length-1]=g[0]),g}function W1(l,r,s,d,g){const _=new Array(g?d+1:d);for(let b=0;b<2*d;b+=2){const C=2*r[s+b/2];_[b/2]=new x(l[C],l[C+1])}return g&&(_[_.length-1]=_[0]),_}function Z1(l,r,s,d,g,_){const b=new Array(g?d+1:d);for(let C=0;C<d;C++){const E=q1(l[r[s+C]],_.numBits,_.coordinateShift);b[C]=new x(E.x,E.y)}return g&&(b[b.length-1]=b[0]),b}class mC{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(r,s,d,g,_){this._vertexBufferType=r,this._topologyVector=s,this._vertexOffsets=d,this._vertexBuffer=g,this._mortonSettings=_}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const r=pC(this);let s=0;for(;s<this.numGeometries;)yield{coordinates:r[s],type:this.geometryType(s)},s++}getSimpleEncodedVertex(r){const s=this.vertexOffsets?2*this.vertexOffsets[r]:2*r;return[this.vertexBuffer[s],this.vertexBuffer[s+1]]}getVertex(r){if(this.vertexOffsets&&this.mortonSettings){const d=q1(this.vertexBuffer[this.vertexOffsets[r]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[d.x,d.y]}const s=this.vertexOffsets?2*this.vertexOffsets[r]:2*r;return[this.vertexBuffer[s],this.vertexBuffer[s+1]]}getGeometries(){return pC(this)}get mortonSettings(){return this._mortonSettings}}class gC extends mC{_numGeometries;_geometryType;constructor(r,s,d,g,_,b,C){super(d,g,_,b,C),this._numGeometries=r,this._geometryType=s}geometryType(r){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===To.POLYGON||this._geometryType===To.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class yC extends mC{_geometryTypes;constructor(r,s,d,g,_,b){super(r,d,g,_,b),this._geometryTypes=s}geometryType(r){return this._geometryTypes[r]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let r=0;r<this.numGeometries;r++)if(this.geometryType(r)===To.POLYGON||this.geometryType(r)===To.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class vC{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(r,s,d,g){this._triangleOffsets=r,this._indexBuffer=s,this._vertexBuffer=d,this._topologyVector=g}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const r=new Array(this.numGeometries),s=this._topologyVector,d=s.partOffsets,g=s.ringOffsets,_=s.geometryOffsets;let b=0,C=1,E=1,z=1;for(let F=0;F<this.numGeometries;F++)switch(this.geometryType(F)){case To.POLYGON:{const B=d[C]-d[C-1];C++;const W=[];for(let X=0;X<B;X++){const te=g[E]-g[E-1];E++;const re=[];for(let le=0;le<te;le++){const me=this._vertexBuffer[b++],Te=this._vertexBuffer[b++];re.push(new x(me,Te))}re.length>0&&re.push(re[0]),W.push(re)}r[F]=W,_&&z++}break;case To.MULTIPOLYGON:{const B=_[z]-_[z-1];z++;const W=[];for(let X=0;X<B;X++){const te=d[C]-d[C-1];C++;for(let re=0;re<te;re++){const le=g[E]-g[E-1];E++;const me=[];for(let Te=0;Te<le;Te++){const pe=this._vertexBuffer[b++],ye=this._vertexBuffer[b++];me.push(new x(pe,ye))}me.length>0&&me.push(me[0]),W.push(me)}}r[F]=W}}return r}[Symbol.iterator](){return null}}function _C(l,r,s,d,g,_){return new AD(l,r,s,d,g,_)}class AD extends vC{_numGeometries;_geometryType;constructor(r,s,d,g,_,b){super(d,g,_,b),this._numGeometries=r,this._geometryType=s}geometryType(r){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function xC(l,r,s,d,g){return new RD(l,r,s,d,g)}class RD extends vC{_geometryTypes;constructor(r,s,d,g,_){super(s,d,g,_),this._geometryTypes=r}geometryType(r){return this._geometryTypes[r]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function DD(l,r,s,d,g){const _=Es(l,s);let b=null,C=null,E=null,z=null;if(Z0(_,d,l,s)===$i.CONST){const Te=G1(l,s,_,!1);let pe=null,ye=null,De=null,je=null;for(let ot=0;ot<r-1;ot++){const xt=Es(l,s);switch(xt.physicalStreamType){case Jo.LENGTH:switch(xt.logicalStreamType.lengthType){case Sa.GEOMETRIES:pe=ff(l,s,xt);break;case Sa.PARTS:ye=ff(l,s,xt);break;case Sa.RINGS:De=ff(l,s,xt);break;case Sa.TRIANGLES:je=ff(l,s,xt)}break;case Jo.OFFSET:switch(xt.logicalStreamType.offsetType){case Mp.VERTEX:b=Is(l,s,xt,!1);break;case Mp.INDEX:z=Is(l,s,xt,!1)}break;case Jo.DATA:Hc.VERTEX===xt.logicalStreamType.dictionaryType?C=Is(l,s,xt,!0):(E={numBits:xt.numBits,coordinateShift:xt.coordinateShift},C=Is(l,s,xt,!1))}}return z!==null?pe!=null||ye!=null?_C(d,Te,je,z,C,new Hm(pe,ye,De)):_C(d,Te,je,z,C):E===null?function(ot,xt,wt,It,Bt){return new gC(ot,xt,rl.VEC_2,wt,It,Bt)}(d,Te,new Hm(pe,ye,De),b,C):function(ot,xt,wt,It,Bt,Rt){return new gC(ot,xt,rl.MORTON,wt,It,Bt,Rt)}(d,Te,new Hm(pe,ye,De),b,C,E)}const F=Is(l,s,_,!1);let B=null,W=null,X=null,te=null;for(let Te=0;Te<r-1;Te++){const pe=Es(l,s);switch(pe.physicalStreamType){case Jo.LENGTH:switch(pe.logicalStreamType.lengthType){case Sa.GEOMETRIES:B=Is(l,s,pe,!1);break;case Sa.PARTS:W=Is(l,s,pe,!1);break;case Sa.RINGS:X=Is(l,s,pe,!1);break;case Sa.TRIANGLES:te=ff(l,s,pe)}break;case Jo.OFFSET:switch(pe.logicalStreamType.offsetType){case Mp.VERTEX:b=Is(l,s,pe,!1);break;case Mp.INDEX:z=Is(l,s,pe,!1)}break;case Jo.DATA:Hc.VERTEX===pe.logicalStreamType.dictionaryType?C=Is(l,s,pe,!0):(E={numBits:pe.numBits,coordinateShift:pe.coordinateShift},C=Is(l,s,pe,!1))}}let re=null,le=null,me=null;return B!==null?(re=X1(F,B,2),W!==null&&X!==null?(le=bC(F,re,W,!1),me=function(Te,pe,ye,De){const je=new Uint32Array(ye[ye.length-1]+1);let ot=0;je[0]=ot;let xt=1,wt=1,It=0;for(let Bt=0;Bt<Te.length;Bt++){const Rt=Te[Bt],St=pe[Bt+1]-pe[Bt];if(Rt!==0&&Rt!==3)for(let mt=0;mt<St;mt++){const Kt=ye[xt]-ye[xt-1];xt++;for(let er=0;er<Kt;er++)ot=je[wt++]=ot+De[It++]}else for(let mt=0;mt<St;mt++)je[wt++]=++ot,xt++}return je}(F,re,le,X)):W!==null&&(le=function(Te,pe,ye){const De=new Uint32Array(pe[pe.length-1]+1);let je=0;De[0]=je;let ot=1,xt=0;for(let wt=0;wt<Te.length;wt++){const It=Te[wt],Bt=pe[wt+1]-pe[wt];if(It===4||It===1)for(let Rt=0;Rt<Bt;Rt++)je=De[ot++]=je+ye[xt++];else for(let Rt=0;Rt<Bt;Rt++)De[ot++]=++je}return De}(F,re,W))):W!==null&&X!==null?(le=X1(F,W,1),me=bC(F,le,X,!0)):W!==null&&(le=X1(F,W,0)),z!==null&&le===null?xC(F,te,z,C):z!==null?xC(F,te,z,C,new Hm(re,le,me)):E===null?function(Te,pe,ye,De){return new yC(rl.VEC_2,Te,pe,ye,De)}(F,new Hm(re,le,me),b,C):function(Te,pe,ye,De,je){return new yC(rl.MORTON,Te,pe,ye,De,je)}(F,new Hm(re,le,me),b,C,E)}function X1(l,r,s){const d=new Uint32Array(l.length+1);let g=0;d[0]=g;let _=0;for(let b=0;b<l.length;b++)g=d[b+1]=g+(l[b]>s?r[_++]:1);return d}function bC(l,r,s,d){const g=new Uint32Array(r[r.length-1]+1);let _=0;g[0]=_;let b=1,C=0;for(let E=0;E<l.length;E++){const z=l[E],F=r[E+1]-r[E];if(z===5||z===2||d&&(z===4||z===1))for(let B=0;B<F;B++)_=g[b++]=_+s[C++];else for(let B=0;B<F;B++)g[b++]=++_}return g}class zD extends Gm{dataVector;constructor(r,s,d){super(r,s.getBuffer(),d),this.dataVector=s}getValueFromBuffer(r){return this.dataVector.get(r)}}class OD extends q0{getValueFromBuffer(r){return this.dataBuffer[r]}}class wC extends Gm{constructor(r,s,d){super(r,BigInt64Array.of(s),d)}getValueFromBuffer(r){return this.dataBuffer[0]}}function ky(l,r,s,d,g){const _=function(b,C,E,z){const F=new Uint8Array(C);let B=0;const W=z.get()+E;for(;B<C&&!(z.get()>=W);){const X=b[z.increment()];if(X<=127){const te=X+3,re=b[z.increment()],le=Math.min(B+te,C);F.fill(re,B,le),B=le}else{const te=256-X;for(let re=0;re<te&&B<C;re++)F[B++]=b[z.increment()]}}return z.set(W),F}(l,Math.ceil(r/8),s,d);return g?function(b,C,E){if(!E)return b;const z=E.size(),F=new Wc(b,C),B=new Wc(new Uint8Array(Math.ceil(z/8)),z);let W=0;for(let X=0;X<z;X++){const te=!!E.get(X)&&F.get(W++);B.set(X,te)}return B.getBuffer()}(_,r,g):_}const LD=new TextDecoder;function K1(l,r,s){return s-r>=12?LD.decode(l.subarray(r,s)):function(d,g,_){let b="",C=g;for(;C<_;){const E=d[C];let z,F,B,W=null,X=E>239?4:E>223?3:E>191?2:1;if(C+X>_)break;X===1?E<128&&(W=E):X===2?(z=d[C+1],(192&z)==128&&(W=(31&E)<<6|63&z,W<=127&&(W=null))):X===3?(z=d[C+1],F=d[C+2],(192&z)==128&&(192&F)==128&&(W=(15&E)<<12|(63&z)<<6|63&F,(W<=2047||W>=55296&&W<=57343)&&(W=null))):X===4&&(z=d[C+1],F=d[C+2],B=d[C+3],(192&z)==128&&(192&F)==128&&(192&B)==128&&(W=(15&E)<<18|(63&z)<<12|(63&F)<<6|63&B,(W<=65535||W>=1114112)&&(W=null))),W===null?(W=65533,X=1):W>65535&&(W-=65536,b+=String.fromCharCode(W>>>10&1023|55296),W=56320|1023&W),b+=String.fromCharCode(W),C+=X}return b}(l,r,s)}class Y1 extends Gm{offsetBuffer;constructor(r,s,d,g){super(r,d,g),this.offsetBuffer=s}}class SC extends Y1{textEncoder;constructor(r,s,d,g){super(r,s,d,g??s.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(r){return K1(this.dataBuffer,this.offsetBuffer[r],this.offsetBuffer[r+1])}}class Wm extends Y1{indexBuffer;textEncoder;constructor(r,s,d,g,_){super(r,d,g,_??s.length),this.indexBuffer=s,this.indexBuffer=s,this.textEncoder=new TextEncoder}getValueFromBuffer(r){const s=this.indexBuffer[r];return K1(this.dataBuffer,this.offsetBuffer[s],this.offsetBuffer[s+1])}}class CC extends Y1{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(r,s,d,g,_,b,C){super(r,d,g,C),this.indexBuffer=s,this.symbolOffsetBuffer=_,this.symbolTableBuffer=b,this.textEncoder=new TextEncoder}getValueFromBuffer(r){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=function(d,g,_){const b=[],C=new Array(g.length).fill(0);for(let E=1;E<g.length;E++)C[E]=C[E-1]+g[E-1];for(let E=0;E<_.length;E++)if(_[E]===255)b.push(_[++E]);else{const z=g[_[E]],F=C[_[E]];for(let B=0;B<z;B++)b.push(d[F+B])}return new Uint8Array(b)}(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const s=this.indexBuffer[r];return K1(this.decodedDictionary,this.offsetBuffer[s],this.offsetBuffer[s+1])}offsetToLengthBuffer(r){const s=new Uint32Array(r.length-1);let d=r[0];for(let g=1;g<r.length;g++){const _=r[g];s[g-1]=_-d,d=_}return s}}function FD(l,r,s,d,g,_){return s.type==="scalarType"?function(b,C,E,z,F,B){let W=null,X=0;if(b===0)return null;if(B.nullable){const re=Es(C,E);X=re.numValues;const le=E.get(),me=ky(C,X,re.byteLength,E);E.set(le+re.byteLength),W=new Wc(me,re.numValues)}const te=W??z;switch(F.physicalType){case 4:case 3:return function(re,le,me,Te,pe){const ye=Es(re,le),De=Z0(ye,pe,re,le),je=Te.physicalType===3;if(De===$i.FLAT){const ot=Is(re,le,ye,je,0,Ay(pe)?pe:void 0);return new B1(me.name,ot,pe)}if(De===$i.SEQUENCE){const ot=aC(re,le,ye);return new j1(me.name,ot[0],ot[1],ye.numRleValues)}{const ot=G1(re,le,ye,je);return new N1(me.name,ot,pe)}}(C,E,B,F,te);case 9:return function(re,le,me,Te,pe){let ye=null,De=null,je=null,ot=null,xt=null,wt=null,It=null,Bt=null;for(let Rt=0;Rt<Te;Rt++){const St=Es(le,me);if(St.byteLength!==0)switch(St.physicalStreamType){case Jo.PRESENT:{const mt=ky(le,St.numValues,St.byteLength,me);wt=new Wc(mt,St.numValues);break}case Jo.OFFSET:De=Is(le,me,St,!1,0,pe!=null||wt!=null?pe??wt:void 0);break;case Jo.LENGTH:{const mt=ff(le,me,St);Sa.DICTIONARY===St.logicalStreamType.lengthType?ye=mt:Sa.SYMBOL===St.logicalStreamType.lengthType?ot=mt:It=mt;break}case Jo.DATA:{const mt=le.subarray(me.get(),me.get()+St.byteLength);me.add(St.byteLength);const Kt=St.logicalStreamType.dictionaryType;Hc.FSST===Kt?xt=mt:Hc.SINGLE===Kt||Hc.SHARED===Kt?je=mt:Hc.NONE===Kt&&(Bt=mt);break}}}return function(Rt,St,mt,Kt,er,_r,nr){return St?new CC(Rt,mt,Kt,er,_r,St,nr):null}(re,xt,De,ye,je,ot,pe??wt)??function(Rt,St,mt,Kt,er){return St?er?new Wm(Rt,mt,Kt,St,er):new Wm(Rt,mt,Kt,St):null}(re,je,De,ye,pe??wt)??function(Rt,St,mt,Kt,er){if(!St||!mt)return null;if(Kt)return er?new Wm(Rt,Kt,St,mt,er):new Wm(Rt,Kt,St,mt);if(er&&er.size()!==St.length-1){const _r=new Int32Array(er.size());let nr=0;for(let qr=0;qr<er.size();qr++)_r[qr]=er.get(qr)?nr++:0;return new Wm(Rt,_r,St,mt,er)}return er?new SC(Rt,St,mt,er):new SC(Rt,St,mt)}(re,It,Bt,De,pe??wt)}(B.name,C,E,B.nullable?b-1:b,W);case 0:return function(re,le,me,Te,pe){const ye=Es(re,le),De=ye.numValues,je=le.get(),ot=Ay(pe)?pe:void 0,xt=ky(re,De,ye.byteLength,le,ot);le.set(je+ye.byteLength);const wt=new Wc(xt,De);return new zD(me.name,wt,pe)}(C,E,B,0,te);case 6:case 5:return function(re,le,me,Te,pe){const ye=Es(re,le),De=Z0(ye,Te,re,le),je=pe.physicalType===5;if(De===$i.FLAT){const ot=cC(re,le,ye,je,Ay(Te)?Te:void 0);return new hC(me.name,ot,Te)}if(De===$i.SEQUENCE){const ot=lC(re,le,ye);return new dC(me.name,ot[0],ot[1],ye.numRleValues)}{const ot=uC(re,le,ye,je);return new wC(me.name,ot,Te)}}(C,E,B,te,F);case 7:return function(re,le,me,Te){const pe=Es(re,le),ye=Ay(Te)?Te:void 0,De=function(je,ot,xt,wt){const It=ot.get(),Bt=It+xt*Float32Array.BYTES_PER_ELEMENT,Rt=new Uint8Array(je.subarray(It,Bt)).buffer,St=new Float32Array(Rt);return ot.set(Bt),wt?H0(St,wt,0):St}(re,le,pe.numValues,ye);return new OD(me.name,De,Te)}(C,E,B,te);case 8:return function(re,le,me,Te){const pe=Es(re,le),ye=Ay(Te)?Te:void 0,De=function(je,ot,xt,wt){const It=ot.get(),Bt=It+xt*Float64Array.BYTES_PER_ELEMENT,Rt=new Uint8Array(je.subarray(It,Bt)).buffer,St=new Float64Array(Rt);return ot.set(Bt),wt?H0(St,wt,0):St}(re,le,pe.numValues,ye);return new $1(me.name,De,Te)}(C,E,B,te);default:throw new Error(`The specified data type for the field is currently not supported: ${F}`)}}(d,l,r,g,s.scalarType,s):d===0?null:function(b,C,E,z){let F=null,B=null,W=null,X=null,te=!1;for(;!te;){const Te=Es(b,C);switch(Te.physicalStreamType){case Jo.LENGTH:Sa.DICTIONARY===Te.logicalStreamType.lengthType?F=ff(b,C,Te):W=ff(b,C,Te);break;case Jo.DATA:Hc.SINGLE===Te.logicalStreamType.dictionaryType||Hc.SHARED===Te.logicalStreamType.dictionaryType?(B=b.subarray(C.get(),C.get()+Te.byteLength),te=!0):X=b.subarray(C.get(),C.get()+Te.byteLength),C.add(Te.byteLength)}}const re=E.complexType.children,le=[];let me=0;for(const Te of re){const pe=cs(b,C,1)[0];if(pe==0)continue;const ye=Te.name?`${E.name}${Te.name}`:E.name;if(pe!==2||Te.type!=="scalarField"||Te.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const De=Es(b,C),je=ky(b,De.numValues,De.byteLength,C),ot=Es(b,C),xt=Is(b,C,ot,!1,0,ot.decompressedCount!==z?new Wc(je,De.numValues):void 0);le[me++]=X?new CC(ye,xt,F,B,W,X,new Wc(je,De.numValues)):new Wm(ye,xt,F,B,new Wc(je,De.numValues))}return le}(l,r,s,g)}function Ay(l){return l instanceof Wc}function TC(l){switch(l){case 0:case 1:case 2:case 3:{const r={};r.nullable=!!(1&l),r.columnScope=0;const s={};return s.physicalType=l>1?6:4,s.type="physicalType",r.scalarType=s,r.type="scalarType",r}case 4:{const r={nullable:!1,columnScope:0},s={type:"physicalType",physicalType:0};return r.type="complexType",r.complexType=s,r}case 30:{const r={nullable:!1,columnScope:0},s={type:"physicalType",physicalType:1};return r.type="complexType",r.complexType=s,r}default:return function(r){let s=null;switch(r){case 10:case 11:s=0;break;case 12:case 13:s=1;break;case 14:case 15:s=2;break;case 16:case 17:s=3;break;case 18:case 19:s=4;break;case 20:case 21:s=5;break;case 22:case 23:s=6;break;case 24:case 25:s=7;break;case 26:case 27:s=8;break;case 28:case 29:s=9;break;default:return null}const d={};d.nullable=!!(1&r),d.columnScope=0;const g={type:"physicalType"};return g.physicalType=s,d.type="scalarType",d.scalarType=g,d}(l)}}function MC(l){return l>=10}function PC(l){return l===30}function BD(l){if(l.name==="id")return!1;if(l.type==="scalarType"){const r=l.scalarType;if(r.type==="physicalType")switch(r.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(r.type==="logicalType")return!1}else if(l.type==="complexType"){const r=l.complexType;if(r.type==="physicalType")switch(r.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",l),!1}const $D=new TextDecoder;function J1(l,r){const s=cs(l,r,1)[0];if(s===0)return"";const d=r.get(),g=l.subarray(d,d+s);return r.add(s),$D.decode(g)}function EC(l,r){const s=cs(l,r,1)[0]>>>0;if(s<10||s>30)throw new Error(`Unsupported field type code ${s}. Supported: 10-29(scalars), 30(STRUCT)`);const d=TC(s);if(MC(s)&&(d.name=J1(l,r)),PC(s)){const g=cs(l,r,1)[0]>>>0;d.complexType.children=new Array(g);for(let _=0;_<g;_++)d.complexType.children[_]=EC(l,r)}return function(g){return{name:g.name,nullable:g.nullable,scalarField:g.scalarType,complexField:g.complexType,type:g.type==="scalarType"?"scalarField":"complexField"}}(d)}function jD(l,r){const s=cs(l,r,1)[0]>>>0,d=TC(s);if(!d)throw new Error(`Unsupported column type code ${s}. Supported: 0-3(ID), 4(GEOMETRY), 10-29(scalars), 30(STRUCT)`);if(MC(s)?d.name=J1(l,r):s>=0&&s<=3?d.name="id":s===4&&(d.name="geometry"),PC(s)){const g=cs(l,r,1)[0]>>>0,_=d.complexType;_.children=new Array(g);for(let b=0;b<g;b++)_.children[b]=EC(l,r)}return d}function ND(l,r){const s={featureTables:[]},d={};d.name=J1(l,r);const g=cs(l,r,1)[0]>>>0,_=cs(l,r,1)[0]>>>0;d.columns=new Array(_);for(let b=0;b<_;b++)d.columns[b]=jD(l,r);return s.featureTables.push(d),[s,g]}function VD(l,r,s,d,g,_,b=!1){const C=r.scalarType.physicalType,E=Z0(g,_,l,s);if(C===4)switch(E){case $i.FLAT:{const z=Is(l,s,g,!1);return new B1(d,z,_)}case $i.SEQUENCE:{const z=aC(l,s,g);return new j1(d,z[0],z[1],g.numRleValues)}case $i.CONST:{const z=G1(l,s,g,!1);return new N1(d,z,_)}}else switch(E){case $i.FLAT:{if(b){const F=function(B,W,X){const te=function(re,le,me){const Te=new Float64Array(me);for(let pe=0;pe<me;pe++)Te[pe]=ID(re,le);return Te}(B,W,X.numValues);return function(re,le){switch(le.logicalLevelTechnique1){case Dn.DELTA:return le.logicalLevelTechnique2===Dn.RLE&&(re=oC(re,le.runs,le.numRleValues)),function(me){me[0]=qm(me[0]);const Te=me.length/4*4;let pe=1;if(Te>=4)for(;pe<Te-4;pe+=4){const ye=me[pe+1],De=me[pe+2],je=me[pe+3];me[pe]=qm(me[pe])+me[pe-1],me[pe+1]=qm(ye)+me[pe],me[pe+2]=qm(De)+me[pe+1],me[pe+3]=qm(je)+me[pe+2]}for(;pe!=me.length;++pe)me[pe]=qm(me[pe])+me[pe-1]}(re),re;case Dn.RLE:return function(me,Te){return oC(me,Te.runs,Te.numRleValues)}(re,le);case Dn.NONE:return re;default:throw new Error(`The specified Logical level technique is not supported: ${le.logicalLevelTechnique1}`)}}(te,X)}(l,s,g);return new $1(d,F,_)}const z=cC(l,s,g,!1);return new hC(d,z,_)}case $i.SEQUENCE:{const z=lC(l,s,g);return new dC(d,z[0],z[1],g.numRleValues)}case $i.CONST:{const z=uC(l,s,g,!1);return new wC(d,z,_)}}throw new Error("Vector type not supported for id column.")}class UD{constructor(r,s){var d;switch(this._featureData=r,this.properties=this._featureData.properties||{},(d=this._featureData.geometry)===null||d===void 0?void 0:d.type){case To.POINT:case To.MULTIPOINT:this.type=1;break;case To.LINESTRING:case To.MULTILINESTRING:this.type=2;break;case To.POLYGON:case To.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=s,this.id=Number(this._featureData.id)}loadGeometry(){const r=[];for(const s of this._featureData.geometry.coordinates){const d=[];for(const g of s)d.push(new x(g.x,g.y));r.push(d)}return r}}class GD{constructor(r){this.features=[],this.featureTable=r,this.name=r.name,this.extent=r.extent,this.version=2,this.features=r.getFeatures(),this.length=this.features.length}feature(r){return new UD(this.features[r],this.extent)}}class IC{constructor(r){this.layers={};const s=function(d,g,_=!0){const b=new PD(0),C=[];for(;b.get()<d.length;){const E=cs(d,b,1)[0]>>>0,z=b.get()+E;if(z>d.length)throw new Error(`Block overruns tile: ${z} > ${d.length}`);if(cs(d,b,1)[0]>>>0!=1){b.set(z);continue}const F=ND(d,b),B=F[1],W=F[0].featureTables[0];let X=null,te=null;const re=[];let le=0;for(const Te of W.columns){const pe=Te.name;if(pe==="id"){let ye=null;if(Te.nullable){const je=Es(d,b),ot=b.get(),xt=ky(d,je.numValues,je.byteLength,b);b.set(ot+je.byteLength),ye=new Wc(xt,je.numValues)}const De=Es(d,b);le=De.decompressedCount,X=VD(d,Te,b,pe,De,ye??le,_)}else if(pe==="geometry"){const ye=cs(d,b,1)[0];if(le===0){const De=b.get();le=Es(d,b).decompressedCount,b.set(De)}te=DD(d,ye,b,le)}else{const ye=BD(Te)?cs(d,b,1)[0]:1;if(ye===0)continue;const De=FD(d,b,Te,ye,le);if(De)if(Array.isArray(De))for(const je of De)re.push(je);else re.push(De)}}const me=new MD(W.name,te,X,re,B);C.push(me),b.set(z)}return C}(new Uint8Array(r));this.layers=s.reduce((d,g)=>Object.assign(Object.assign({},d),{[g.name]:new GD(g)}),{})}}class qD{constructor(r,s){this.feature=r,this.type=r.type,this.properties=r.tags?r.tags:{},this.extent=s,"id"in r&&(typeof r.id=="string"?this.id=parseInt(r.id,10):typeof r.id!="number"||isNaN(r.id)||(this.id=r.id))}loadGeometry(){const r=[],s=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const d of s){const g=[];for(const _ of d)g.push(new x(_[0],_[1]));r.push(g)}return r}}const Ry="_geojsonTileLayer";function HD(l,r){r.writeVarintField(15,l.version||1),r.writeStringField(1,l.name||""),r.writeVarintField(5,l.extent||4096);const s={keys:[],values:[],keycache:{},valuecache:{}};for(let _=0;_<l.length;_++)s.feature=l.feature(_),r.writeMessage(2,WD,s);const d=s.keys;for(const _ of d)r.writeStringField(3,_);const g=s.values;for(const _ of g)r.writeMessage(4,KD,_)}function WD(l,r){if(!l.feature)return;const s=l.feature;s.id!==void 0&&r.writeVarintField(1,s.id),r.writeMessage(2,ZD,l),r.writeVarintField(3,s.type),r.writeMessage(4,XD,s)}function ZD(l,r){for(const s in l.feature?.properties){let d=l.feature.properties[s],g=l.keycache[s];if(d==null)continue;g===void 0&&(l.keys.push(s),g=l.keys.length-1,l.keycache[s]=g),r.writeVarint(g),typeof d!="string"&&typeof d!="boolean"&&typeof d!="number"&&(d=JSON.stringify(d));const _=typeof d+":"+d;let b=l.valuecache[_];b===void 0&&(l.values.push(d),b=l.values.length-1,l.valuecache[_]=b),r.writeVarint(b)}}function Q1(l,r){return(r<<3)+(7&l)}function kC(l){return l<<1^l>>31}function XD(l,r){const s=l.loadGeometry(),d=l.type;let g=0,_=0;for(const b of s){let C=1;d===1&&(C=b.length),r.writeVarint(Q1(1,C));const E=d===3?b.length-1:b.length;for(let z=0;z<E;z++){z===1&&d!==1&&r.writeVarint(Q1(2,E-1));const F=b[z].x-g,B=b[z].y-_;r.writeVarint(kC(F)),r.writeVarint(kC(B)),g+=F,_+=B}l.type===3&&r.writeVarint(Q1(7,1))}}function KD(l,r){const s=typeof l;s==="string"?r.writeStringField(1,l):s==="boolean"?r.writeBooleanField(7,l):s==="number"&&(l%1!=0?r.writeDoubleField(3,l):l<0?r.writeSVarintField(6,l):r.writeVarintField(5,l))}class AC{constructor(r,s){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new qo(Ve,16,0),this.grid3D=new qo(Ve,16,0),this.featureIndexArray=new he,this.promoteId=s}insert(r,s,d,g,_,b){const C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,g,_);const E=b?this.grid3D:this.grid;for(let z=0;z<s.length;z++){const F=s[z],B=[1/0,1/0,-1/0,-1/0];for(let W=0;W<F.length;W++){const X=F[W];B[0]=Math.min(B[0],X.x),B[1]=Math.min(B[1],X.y),B[2]=Math.max(B[2],X.x),B[3]=Math.max(B[3],X.y)}B[0]<Ve&&B[1]<Ve&&B[2]>=0&&B[3]>=0&&E.insert(C,B[0],B[1],B[2],B[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new E0(new p(this.rawTileData)).layers:new IC(this.rawTileData).layers,this.sourceLayerCoder=new QS(this.vtLayers?Object.keys(this.vtLayers).sort():[Ry])),this.vtLayers}query(r,s,d,g){this.loadVTLayers();const _=r.params,b=Ve/r.tileSize/r.scale,C=Mc(_.filter,_.globalState),E=r.queryGeometry,z=r.queryPadding*b,F=Tp.fromPoints(E),B=this.grid.query(F.minX-z,F.minY-z,F.maxX+z,F.maxY+z),W=Tp.fromPoints(r.cameraQueryGeometry).expandBy(z),X=this.grid3D.query(W.minX,W.minY,W.maxX,W.maxY,(le,me,Te,pe)=>function(ye,De,je,ot,xt){for(const It of ye)if(De<=It.x&&je<=It.y&&ot>=It.x&&xt>=It.y)return!0;const wt=[new x(De,je),new x(De,xt),new x(ot,xt),new x(ot,je)];if(ye.length>2){for(const It of wt)if(jc(ye,It))return!0}for(let It=0;It<ye.length-1;It++)if(Nc(ye[It],ye[It+1],wt))return!0;return!1}(r.cameraQueryGeometry,le-z,me-z,Te+z,pe+z));for(const le of X)B.push(le);B.sort(YD);const te={};let re;for(let le=0;le<B.length;le++){const me=B[le];if(me===re)continue;re=me;const Te=this.featureIndexArray.get(me);let pe=null;this.loadMatchingFeature(te,Te.bucketIndex,Te.sourceLayerIndex,Te.featureIndex,C,_.layers,_.availableImages,s,d,g,(ye,De,je)=>(pe||(pe=va(ye)),De.queryIntersectsFeature({queryGeometry:E,feature:ye,featureState:je,geometry:pe,zoom:this.z,transform:r.transform,pixelsToTileUnits:b,pixelPosMatrix:r.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:r.getElevation})))}return te}loadMatchingFeature(r,s,d,g,_,b,C,E,z,F,B){const W=this.bucketLayerIDs[s];if(b&&!W.some(le=>b.has(le)))return;const X=this.sourceLayerCoder.decode(d),te=this.vtLayers[X].feature(g);if(_.needGeometry){const le=Ka(te,!0);if(!_.filter(new Sn(this.tileID.overscaledZ),le,this.tileID.canonical))return}else if(!_.filter(new Sn(this.tileID.overscaledZ),te))return;const re=this.getId(te,X);for(let le=0;le<W.length;le++){const me=W[le];if(b&&!b.has(me))continue;const Te=E[me];if(!Te)continue;let pe={};re&&F&&(pe=F.getState(Te.sourceLayer||Ry,re));const ye=nt({},z[me]);ye.paint=RC(ye.paint,Te.paint,te,pe,C),ye.layout=RC(ye.layout,Te.layout,te,pe,C);const De=!B||B(te,Te,pe);if(!De)continue;const je=new eC(te,this.z,this.x,this.y,re);je.layer=ye;let ot=r[me];ot===void 0&&(ot=r[me]=[]),ot.push({featureIndex:g,feature:je,intersectionZ:De})}}lookupSymbolFeatures(r,s,d,g,_,b,C,E){const z={};this.loadVTLayers();const F=Mc(_.filterSpec,_.globalState);for(const B of r)this.loadMatchingFeature(z,d,g,B,F,b,C,E,s);return z}hasLayer(r){for(const s of this.bucketLayerIDs)for(const d of s)if(r===d)return!0;return!1}getId(r,s){var d;let g=r.id;return this.promoteId&&(g=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof g=="boolean"&&(g=Number(g)),g===void 0&&(!((d=r.properties)===null||d===void 0)&&d.cluster)&&this.promoteId&&(g=Number(r.properties.cluster_id))),g}}function RC(l,r,s,d,g){return At(l,(_,b)=>{const C=r instanceof ua?r.get(b):null;return C&&C.evaluate?C.evaluate(s,d,g):C})}function YD(l,r){return r-l}function DC(l,r,s,d,g){const _=[];for(let b=0;b<l.length;b++){const C=l[b];let E;for(let z=0;z<C.length-1;z++){let F=C[z],B=C[z+1];F.x<r&&B.x<r||(F.x<r?F=new x(r,F.y+(r-F.x)/(B.x-F.x)*(B.y-F.y))._round():B.x<r&&(B=new x(r,F.y+(r-F.x)/(B.x-F.x)*(B.y-F.y))._round()),F.y<s&&B.y<s||(F.y<s?F=new x(F.x+(s-F.y)/(B.y-F.y)*(B.x-F.x),s)._round():B.y<s&&(B=new x(F.x+(s-F.y)/(B.y-F.y)*(B.x-F.x),s)._round()),F.x>=d&&B.x>=d||(F.x>=d?F=new x(d,F.y+(d-F.x)/(B.x-F.x)*(B.y-F.y))._round():B.x>=d&&(B=new x(d,F.y+(d-F.x)/(B.x-F.x)*(B.y-F.y))._round()),F.y>=g&&B.y>=g||(F.y>=g?F=new x(F.x+(g-F.y)/(B.y-F.y)*(B.x-F.x),g)._round():B.y>=g&&(B=new x(F.x+(g-F.y)/(B.y-F.y)*(B.x-F.x),g)._round()),E&&F.equals(E[E.length-1])||(E=[F],_.push(E)),E.push(B)))))}}return _}function zC(l,r,s,d,g){switch(r){case 1:return function(_,b,C,E){const z=[];for(const F of _)for(const B of F){const W=E===0?B.x:B.y;W>=b&&W<=C&&z.push([B])}return z}(l,s,d,g);case 2:return OC(l,s,d,g,!1);case 3:return OC(l,s,d,g,!0)}return[]}function JD(l,r,s,d,g){const _=d===0?QD:e5;let b=[];const C=[];for(let F=0;F<l.length-1;F++){const B=l[F],W=l[F+1],X=d===0?B.x:B.y,te=d===0?W.x:W.y;let re=!1;X<r?te>r&&b.push(_(B,W,r)):X>s?te<s&&b.push(_(B,W,s)):b.push(B),te<r&&X>=r&&(b.push(_(B,W,r)),re=!0),te>s&&X<=s&&(b.push(_(B,W,s)),re=!0),!g&&re&&(C.push(b),b=[])}const E=l.length-1,z=d===0?l[E].x:l[E].y;return z>=r&&z<=s&&b.push(l[E]),g&&b.length>0&&!b[0].equals(b[b.length-1])&&b.push(new x(b[0].x,b[0].y)),b.length>0&&C.push(b),C}function OC(l,r,s,d,g){const _=[];for(const b of l){const C=JD(b,r,s,d,g);C.length>0&&_.push(...C)}return _}function QD(l,r,s){return new x(s,l.y+(s-l.x)/(r.x-l.x)*(r.y-l.y))}function e5(l,r,s){return new x(l.x+(s-l.y)/(r.y-l.y)*(r.x-l.x),s)}Gt("FeatureIndex",AC,{omit:["rawTileData","sourceLayerCoder"]});class pf extends x{constructor(r,s,d,g){super(r,s),this.angle=d,g!==void 0&&(this.segment=g)}clone(){return new pf(this.x,this.y,this.angle,this.segment)}}function LC(l,r,s,d,g){if(r.segment===void 0||s===0)return!0;let _=r,b=r.segment+1,C=0;for(;C>-s/2;){if(b--,b<0)return!1;C-=l[b].dist(_),_=l[b]}C+=l[b].dist(l[b+1]),b++;const E=[];let z=0;for(;C<s/2;){const F=l[b],B=l[b+1];if(!B)return!1;let W=l[b-1].angleTo(F)-F.angleTo(B);for(W=Math.abs((W+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:C,angleDelta:W}),z+=W;C-E[0].distance>d;)z-=E.shift().angleDelta;if(z>g)return!1;b++,C+=F.dist(B)}return!0}function FC(l){let r=0;for(let s=0;s<l.length-1;s++)r+=l[s].dist(l[s+1]);return r}function BC(l,r,s){return l?.6*r*s:0}function $C(l,r){return Math.max(l?l.right-l.left:0,r?r.right-r.left:0)}function t5(l,r,s,d,g,_){const b=BC(s,g,_),C=$C(s,d)*_;let E=0;const z=FC(l)/2;for(let F=0;F<l.length-1;F++){const B=l[F],W=l[F+1],X=B.dist(W);if(E+X>z){const te=(z-E)/X,re=Qn.number(B.x,W.x,te),le=Qn.number(B.y,W.y,te),me=new pf(re,le,W.angleTo(B),F);return me._round(),!b||LC(l,me,C,b,r)?me:void 0}E+=X}}function r5(l,r,s,d,g,_,b,C,E){const z=BC(d,_,b),F=$C(d,g),B=F*b,W=l[0].x===0||l[0].x===E||l[0].y===0||l[0].y===E;return r-B<r/4&&(r=B+r/4),jC(l,W?r/2*C%r:(F/2+2*_)*b*C%r,r,z,s,B,W,!1,E)}function jC(l,r,s,d,g,_,b,C,E){const z=_/2,F=FC(l);let B=0,W=r-s,X=[];for(let te=0;te<l.length-1;te++){const re=l[te],le=l[te+1],me=re.dist(le),Te=le.angleTo(re);for(;W+s<B+me;){W+=s;const pe=(W-B)/me,ye=Qn.number(re.x,le.x,pe),De=Qn.number(re.y,le.y,pe);if(ye>=0&&ye<E&&De>=0&&De<E&&W-z>=0&&W+z<=F){const je=new pf(ye,De,Te,te);je._round(),d&&!LC(l,je,_,d,g)||X.push(je)}}B+=me}return C||X.length||b||(X=jC(l,B/2,s,d,g,_,b,!0,E)),X}function NC(l,r,s,d){const g=[],_=l.image,b=_.pixelRatio,C=_.paddedRect.w-2,E=_.paddedRect.h-2;let z={x1:l.left,y1:l.top,x2:l.right,y2:l.bottom};const F=_.stretchX||[[0,C]],B=_.stretchY||[[0,E]],W=(mt,Kt)=>mt+Kt[1]-Kt[0],X=F.reduce(W,0),te=B.reduce(W,0),re=C-X,le=E-te;let me=0,Te=X,pe=0,ye=te,De=0,je=re,ot=0,xt=le;if(_.content&&d){const mt=_.content,Kt=mt[2]-mt[0],er=mt[3]-mt[1];(_.textFitWidth||_.textFitHeight)&&(z=N0(l)),me=J0(F,0,mt[0]),pe=J0(B,0,mt[1]),Te=J0(F,mt[0],mt[2]),ye=J0(B,mt[1],mt[3]),De=mt[0]-me,ot=mt[1]-pe,je=Kt-Te,xt=er-ye}const wt=z.x1,It=z.y1,Bt=z.x2-wt,Rt=z.y2-It,St=(mt,Kt,er,_r)=>{const nr=Q0(mt.stretch-me,Te,Bt,wt),qr=e_(mt.fixed-De,je,mt.stretch,X),mi=Q0(Kt.stretch-pe,ye,Rt,It),no=e_(Kt.fixed-ot,xt,Kt.stretch,te),es=Q0(er.stretch-me,Te,Bt,wt),ql=e_(er.fixed-De,je,er.stretch,X),ks=Q0(_r.stretch-pe,ye,Rt,It),Bo=e_(_r.fixed-ot,xt,_r.stretch,te),ts=new x(nr,mi),ji=new x(es,mi),$o=new x(es,ks),us=new x(nr,ks),hs=new x(qr/b,no/b),Ks=new x(ql/b,Bo/b),rs=r*Math.PI/180;if(rs){const Mo=Math.sin(rs),Si=Math.cos(rs),io=[Si,-Mo,Mo,Si];ts._matMult(io),ji._matMult(io),us._matMult(io),$o._matMult(io)}const Ys=mt.stretch+mt.fixed,Hl=Kt.stretch+Kt.fixed;return{tl:ts,tr:ji,bl:us,br:$o,tex:{x:_.paddedRect.x+1+Ys,y:_.paddedRect.y+1+Hl,w:er.stretch+er.fixed-Ys,h:_r.stretch+_r.fixed-Hl},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:hs,pixelOffsetBR:Ks,minFontScaleX:je/b/Bt,minFontScaleY:xt/b/Rt,isSDF:s}};if(d&&(_.stretchX||_.stretchY)){const mt=VC(F,re,X),Kt=VC(B,le,te);for(let er=0;er<mt.length-1;er++){const _r=mt[er],nr=mt[er+1];for(let qr=0;qr<Kt.length-1;qr++)g.push(St(_r,Kt[qr],nr,Kt[qr+1]))}}else g.push(St({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:E+1}));return g}function J0(l,r,s){let d=0;for(const g of l)d+=Math.max(r,Math.min(s,g[1]))-Math.max(r,Math.min(s,g[0]));return d}function VC(l,r,s){const d=[{fixed:-1,stretch:0}];for(const[g,_]of l){const b=d[d.length-1];d.push({fixed:g-b.stretch,stretch:b.stretch}),d.push({fixed:g-b.stretch,stretch:b.stretch+(_-g)})}return d.push({fixed:r+1,stretch:s}),d}function Q0(l,r,s,d){return l/r*s+d}function e_(l,r,s,d){return l-r*s/d}Gt("Anchor",pf);class t_{constructor(r,s,d,g,_,b,C,E,z,F){var B;if(this.boxStartIndex=r.length,z){let W=b.top,X=b.bottom;const te=b.collisionPadding;te&&(W-=te[1],X+=te[3]);let re=X-W;re>0&&(re=Math.max(10,re),this.circleDiameter=re)}else{const W=!((B=b.image)===null||B===void 0)&&B.content&&(b.image.textFitWidth||b.image.textFitHeight)?N0(b):{x1:b.left,y1:b.top,x2:b.right,y2:b.bottom};W.y1=W.y1*C-E[0],W.y2=W.y2*C+E[2],W.x1=W.x1*C-E[3],W.x2=W.x2*C+E[1];const X=b.collisionPadding;if(X&&(W.x1-=X[0]*C,W.y1-=X[1]*C,W.x2+=X[2]*C,W.y2+=X[3]*C),F){const te=new x(W.x1,W.y1),re=new x(W.x2,W.y1),le=new x(W.x1,W.y2),me=new x(W.x2,W.y2),Te=F*Math.PI/180;te._rotate(Te),re._rotate(Te),le._rotate(Te),me._rotate(Te),W.x1=Math.min(te.x,re.x,le.x,me.x),W.x2=Math.max(te.x,re.x,le.x,me.x),W.y1=Math.min(te.y,re.y,le.y,me.y),W.y2=Math.max(te.y,re.y,le.y,me.y)}r.emplaceBack(s.x,s.y,W.x1,W.y1,W.x2,W.y2,d,g,_)}this.boxEndIndex=r.length}}class n5{constructor(r=[],s=(d,g)=>d<g?-1:d>g?1:0){if(this.data=r,this.length=this.data.length,this.compare=s,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:s,compare:d}=this,g=s[r];for(;r>0;){const _=r-1>>1,b=s[_];if(d(g,b)>=0)break;s[r]=b,r=_}s[r]=g}_down(r){const{data:s,compare:d}=this,g=this.length>>1,_=s[r];for(;r<g;){let b=1+(r<<1);const C=b+1;if(C<this.length&&d(s[C],s[b])<0&&(b=C),d(s[b],_)>=0)break;s[r]=s[b],r=b}s[r]=_}}function i5(l,r=1,s=!1){const d=Tp.fromPoints(l[0]),g=Math.min(d.width(),d.height());let _=g/2;const b=new n5([],o5),{minX:C,minY:E,maxX:z,maxY:F}=d;if(g===0)return new x(C,E);for(let X=C;X<z;X+=g)for(let te=E;te<F;te+=g)b.push(new Zm(X+_,te+_,_,l));let B=function(X){let te=0,re=0,le=0;const me=X[0];for(let Te=0,pe=me.length,ye=pe-1;Te<pe;ye=Te++){const De=me[Te],je=me[ye],ot=De.x*je.y-je.x*De.y;re+=(De.x+je.x)*ot,le+=(De.y+je.y)*ot,te+=3*ot}return new Zm(re/te,le/te,0,X)}(l),W=b.length;for(;b.length;){const X=b.pop();(X.d>B.d||!B.d)&&(B=X,s&&console.log("found best %d after %d probes",Math.round(1e4*X.d)/1e4,W)),X.max-B.d<=r||(_=X.h/2,b.push(new Zm(X.p.x-_,X.p.y-_,_,l)),b.push(new Zm(X.p.x+_,X.p.y-_,_,l)),b.push(new Zm(X.p.x-_,X.p.y+_,_,l)),b.push(new Zm(X.p.x+_,X.p.y+_,_,l)),W+=4)}return s&&(console.log(`num probes: ${W}`),console.log(`best distance: ${B.d}`)),B.p}function o5(l,r){return r.max-l.max}function Zm(l,r,s,d){this.p=new x(l,r),this.h=s,this.d=function(g,_){let b=!1,C=1/0;for(let E=0;E<_.length;E++){const z=_[E];for(let F=0,B=z.length,W=B-1;F<B;W=F++){const X=z[F],te=z[W];X.y>g.y!=te.y>g.y&&g.x<(te.x-X.x)*(g.y-X.y)/(te.y-X.y)+X.x&&(b=!b),C=Math.min(C,Em(g,X,te))}}return(b?1:-1)*Math.sqrt(C)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var Qo;f.aP=void 0,(Qo=f.aP||(f.aP={}))[Qo.center=1]="center",Qo[Qo.left=2]="left",Qo[Qo.right=3]="right",Qo[Qo.top=4]="top",Qo[Qo.bottom=5]="bottom",Qo[Qo["top-left"]=6]="top-left",Qo[Qo["top-right"]=7]="top-right",Qo[Qo["bottom-left"]=8]="bottom-left",Qo[Qo["bottom-right"]=9]="bottom-right";const eb=Number.POSITIVE_INFINITY;function UC(l,r){return r[1]!==eb?function(s,d,g){let _=0,b=0;switch(d=Math.abs(d),g=Math.abs(g),s){case"top-right":case"top-left":case"top":b=g-7;break;case"bottom-right":case"bottom-left":case"bottom":b=7-g}switch(s){case"top-right":case"bottom-right":case"right":_=-d;break;case"top-left":case"bottom-left":case"left":_=d}return[_,b]}(l,r[0],r[1]):function(s,d){let g=0,_=0;d<0&&(d=0);const b=d/Math.SQRT2;switch(s){case"top-right":case"top-left":_=b-7;break;case"bottom-right":case"bottom-left":_=7-b;break;case"bottom":_=7-d;break;case"top":_=d-7}switch(s){case"top-right":case"bottom-right":g=-b;break;case"top-left":case"bottom-left":g=b;break;case"left":g=d;break;case"right":g=-d}return[g,_]}(l,r[0])}function GC(l,r,s){var d;const g=l.layout,_=(d=g.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(r,{},s);if(_){const C=_.values,E=[];for(let z=0;z<C.length;z+=2){const F=E[z]=C[z],B=C[z+1].map(W=>W*ro);F.startsWith("top")?B[1]-=7:F.startsWith("bottom")&&(B[1]+=7),E[z+1]=B}return new ko(E)}const b=g.get("text-variable-anchor");if(b){let C;C=l._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(r,{},s)*ro,eb]:g.get("text-offset").evaluate(r,{},s).map(z=>z*ro);const E=[];for(const z of b)E.push(z,UC(z,C));return new ko(E)}return null}function tb(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function s5(l,r,s,d,g,_,b,C,E,z,F,B){let W=_.textMaxSize.evaluate(r,{});W===void 0&&(W=b);const X=l.layers[0].layout,te=X.get("icon-offset").evaluate(r,{},F),re=HC(s.horizontal),le=b/24,me=l.tilePixelRatio*le,Te=l.tilePixelRatio*W/24,pe=l.tilePixelRatio*C,ye=l.tilePixelRatio*X.get("symbol-spacing"),De=X.get("text-padding")*l.tilePixelRatio,je=function(er,_r,nr,qr=1){const mi=er.get("icon-padding").evaluate(_r,{},nr),no=mi&&mi.values;return[no[0]*qr,no[1]*qr,no[2]*qr,no[3]*qr]}(X,r,F,l.tilePixelRatio),ot=X.get("text-max-angle")/180*Math.PI,xt=X.get("text-rotation-alignment")!=="viewport"&&X.get("symbol-placement")!=="point",wt=X.get("icon-rotation-alignment")==="map"&&X.get("symbol-placement")!=="point",It=X.get("symbol-placement"),Bt=ye/2,Rt=X.get("icon-text-fit");let St;d&&Rt!=="none"&&(l.allowVerticalPlacement&&s.vertical&&(St=FS(d,s.vertical,Rt,X.get("icon-text-fit-padding"),te,le)),re&&(d=FS(d,re,Rt,X.get("icon-text-fit-padding"),te,le)));const mt=F?B.line.getGranularityForZoomLevel(F.z):1,Kt=(er,_r)=>{_r.x<0||_r.x>=Ve||_r.y<0||_r.y>=Ve||function(nr,qr,mi,no,es,ql,ks,Bo,ts,ji,$o,us,hs,Ks,rs,Ys,Hl,Mo,Si,io,Ri,Po,Jh,Zc,Oy){const mf=nr.addToLineVertexArray(qr,mi);let Pp,Xm,Km,Ym,KC=0,YC=0,JC=0,QC=0,cb=-1,ub=-1;const Qh={};let eT=yn("");if(nr.allowVerticalPlacement&&no.vertical){const ds=Bo.layout.get("text-rotate").evaluate(Ri,{},Zc)+90;Km=new t_(ts,qr,ji,$o,us,no.vertical,hs,Ks,rs,ds),ks&&(Ym=new t_(ts,qr,ji,$o,us,ks,Hl,Mo,rs,ds))}if(es){const ds=Bo.layout.get("icon-rotate").evaluate(Ri,{}),nl=Bo.layout.get("icon-text-fit")!=="none",Ep=NC(es,ds,Jh,nl),Kc=ks?NC(ks,ds,Jh,nl):void 0;Xm=new t_(ts,qr,ji,$o,us,es,Hl,Mo,!1,ds),KC=4*Ep.length;const Ip=nr.iconSizeData;let Uu=null;Ip.kind==="source"?(Uu=[Yh*Bo.layout.get("icon-size").evaluate(Ri,{})],Uu[0]>uf&&Tr(`${nr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Ip.kind==="composite"&&(Uu=[Yh*Po.compositeIconSizes[0].evaluate(Ri,{},Zc),Yh*Po.compositeIconSizes[1].evaluate(Ri,{},Zc)],(Uu[0]>uf||Uu[1]>uf)&&Tr(`${nr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),nr.addSymbols(nr.icon,Ep,Uu,io,Si,Ri,f.az.none,qr,mf.lineStartIndex,mf.lineLength,-1,Zc),cb=nr.icon.placedSymbolArray.length-1,Kc&&(YC=4*Kc.length,nr.addSymbols(nr.icon,Kc,Uu,io,Si,Ri,f.az.vertical,qr,mf.lineStartIndex,mf.lineLength,-1,Zc),ub=nr.icon.placedSymbolArray.length-1)}const tT=Object.keys(no.horizontal);for(const ds of tT){const nl=no.horizontal[ds];if(!Pp){eT=yn(nl.text);const Kc=Bo.layout.get("text-rotate").evaluate(Ri,{},Zc);Pp=new t_(ts,qr,ji,$o,us,nl,hs,Ks,rs,Kc)}const Ep=nl.positionedLines.length===1;if(JC+=qC(nr,qr,nl,ql,Bo,rs,Ri,Ys,mf,no.vertical?f.az.horizontal:f.az.horizontalOnly,Ep?tT:[ds],Qh,cb,Po,Zc),Ep)break}no.vertical&&(QC+=qC(nr,qr,no.vertical,ql,Bo,rs,Ri,Ys,mf,f.az.vertical,["vertical"],Qh,ub,Po,Zc));const c5=Pp?Pp.boxStartIndex:nr.collisionBoxArray.length,u5=Pp?Pp.boxEndIndex:nr.collisionBoxArray.length,h5=Km?Km.boxStartIndex:nr.collisionBoxArray.length,d5=Km?Km.boxEndIndex:nr.collisionBoxArray.length,f5=Xm?Xm.boxStartIndex:nr.collisionBoxArray.length,p5=Xm?Xm.boxEndIndex:nr.collisionBoxArray.length,m5=Ym?Ym.boxStartIndex:nr.collisionBoxArray.length,g5=Ym?Ym.boxEndIndex:nr.collisionBoxArray.length;let Xc=-1;const n_=(ds,nl)=>ds&&ds.circleDiameter?Math.max(ds.circleDiameter,nl):nl;Xc=n_(Pp,Xc),Xc=n_(Km,Xc),Xc=n_(Xm,Xc),Xc=n_(Ym,Xc);const rT=Xc>-1?1:0;rT&&(Xc*=Oy/ro),nr.glyphOffsetArray.length>=Vm.MAX_GLYPHS&&Tr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ri.sortKey!==void 0&&nr.addToSortKeyRanges(nr.symbolInstances.length,Ri.sortKey);const y5=GC(Bo,Ri,Zc),[v5,_5]=function(ds,nl){const Ep=ds.length,Kc=nl?.values;if(Kc?.length>0)for(let Ip=0;Ip<Kc.length;Ip+=2){const Uu=Kc[Ip+1];ds.emplaceBack(f.aP[Kc[Ip]],Uu[0],Uu[1])}return[Ep,ds.length]}(nr.textAnchorOffsets,y5);nr.symbolInstances.emplaceBack(qr.x,qr.y,Qh.right>=0?Qh.right:-1,Qh.center>=0?Qh.center:-1,Qh.left>=0?Qh.left:-1,Qh.vertical||-1,cb,ub,eT,c5,u5,h5,d5,f5,p5,m5,g5,ji,JC,QC,KC,YC,rT,0,hs,Xc,v5,_5)}(l,_r,er,s,d,g,St,l.layers[0],l.collisionBoxArray,r.index,r.sourceLayerIndex,l.index,me,[De,De,De,De],xt,E,pe,je,wt,te,r,_,z,F,b)};if(It==="line")for(const er of DC(r.geometry,0,0,Ve,Ve)){const _r=Ps(er,mt),nr=r5(_r,ye,ot,s.vertical||re,d,24,Te,l.overscaling,Ve);for(const qr of nr)re&&a5(l,re.text,Bt,qr)||Kt(_r,qr)}else if(It==="line-center"){for(const er of r.geometry)if(er.length>1){const _r=Ps(er,mt),nr=t5(_r,ot,s.vertical||re,d,24,Te);nr&&Kt(_r,nr)}}else if(r.type==="Polygon")for(const er of Sh(r.geometry,0)){const _r=i5(er,16);Kt(Ps(er[0],mt,!0),new pf(_r.x,_r.y,0))}else if(r.type==="LineString")for(const er of r.geometry){const _r=Ps(er,mt);Kt(_r,new pf(_r[0].x,_r[0].y,0))}else if(r.type==="Point")for(const er of r.geometry)for(const _r of er)Kt([_r],new pf(_r.x,_r.y,0))}function qC(l,r,s,d,g,_,b,C,E,z,F,B,W,X,te){const re=function(Te,pe,ye,De,je,ot,xt,wt){const It=De.layout.get("text-rotate").evaluate(ot,{})*Math.PI/180,Bt=[];for(const Rt of pe.positionedLines)for(const St of Rt.positionedGlyphs){if(!St.rect)continue;const mt=St.rect||{};let Kt=4,er=!0,_r=1,nr=0;const qr=(je||wt)&&St.vertical,mi=St.metrics.advance*St.scale/2;if(wt&&pe.verticalizable&&(nr=Rt.lineOffset/2-(St.imageName?-(ro-St.metrics.width*St.scale)/2:(St.scale-1)*ro)),St.imageName){const Mo=xt[St.imageName];er=Mo.sdf,_r=Mo.pixelRatio,Kt=1/_r}const no=je?[St.x+mi,St.y]:[0,0];let es=je?[0,0]:[St.x+mi+ye[0],St.y+ye[1]-nr],ql=[0,0];qr&&(ql=es,es=[0,0]);const ks=St.metrics.isDoubleResolution?2:1,Bo=(St.metrics.left-Kt)*St.scale-mi+es[0],ts=(-St.metrics.top-Kt)*St.scale+es[1],ji=Bo+mt.w/ks*St.scale/_r,$o=ts+mt.h/ks*St.scale/_r,us=new x(Bo,ts),hs=new x(ji,ts),Ks=new x(Bo,$o),rs=new x(ji,$o);if(qr){const Mo=new x(-mi,mi- -17),Si=-Math.PI/2,io=12-mi,Ri=new x(22-io,-(St.imageName?io:0)),Po=new x(...ql);us._rotateAround(Si,Mo)._add(Ri)._add(Po),hs._rotateAround(Si,Mo)._add(Ri)._add(Po),Ks._rotateAround(Si,Mo)._add(Ri)._add(Po),rs._rotateAround(Si,Mo)._add(Ri)._add(Po)}if(It){const Mo=Math.sin(It),Si=Math.cos(It),io=[Si,-Mo,Mo,Si];us._matMult(io),hs._matMult(io),Ks._matMult(io),rs._matMult(io)}const Ys=new x(0,0),Hl=new x(0,0);Bt.push({tl:us,tr:hs,bl:Ks,br:rs,tex:mt,writingMode:pe.writingMode,glyphOffset:no,sectionIndex:St.sectionIndex,isSDF:er,pixelOffsetTL:Ys,pixelOffsetBR:Hl,minFontScaleX:0,minFontScaleY:0})}return Bt}(0,s,C,g,_,b,d,l.allowVerticalPlacement),le=l.textSizeData;let me=null;le.kind==="source"?(me=[Yh*g.layout.get("text-size").evaluate(b,{})],me[0]>uf&&Tr(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):le.kind==="composite"&&(me=[Yh*X.compositeTextSizes[0].evaluate(b,{},te),Yh*X.compositeTextSizes[1].evaluate(b,{},te)],(me[0]>uf||me[1]>uf)&&Tr(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),l.addSymbols(l.text,re,me,C,_,b,z,r,E.lineStartIndex,E.lineLength,W,te);for(const Te of F)B[Te]=l.text.placedSymbolArray.length-1;return 4*re.length}function HC(l){for(const r in l)return l[r];return null}function a5(l,r,s,d){const g=l.compareText;if(r in g){const _=g[r];for(let b=_.length-1;b>=0;b--)if(d.dist(_[b])<s)return!0}else g[r]=[];return g[r].push(d),!1}const WC=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class rb{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,d]=new Uint8Array(r,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=d>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const _=WC[15&d];if(!_)throw new Error("Unrecognized array type.");const[b]=new Uint16Array(r,2,1),[C]=new Uint32Array(r,4,1);return new rb(C,b,_,r)}constructor(r,s=64,d=Float64Array,g){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=d,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const _=WC.indexOf(this.ArrayType),b=2*r*this.ArrayType.BYTES_PER_ELEMENT,C=r*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-C%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${d}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+C+E,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+b+C+E),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+C+E,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=r)}add(r,s){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=r,this.coords[this._pos++]=s,d}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return nb(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,s,d,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:b,nodeSize:C}=this,E=[0,_.length-1,0],z=[];for(;E.length;){const F=E.pop()||0,B=E.pop()||0,W=E.pop()||0;if(B-W<=C){for(let le=W;le<=B;le++){const me=b[2*le],Te=b[2*le+1];me>=r&&me<=d&&Te>=s&&Te<=g&&z.push(_[le])}continue}const X=W+B>>1,te=b[2*X],re=b[2*X+1];te>=r&&te<=d&&re>=s&&re<=g&&z.push(_[X]),(F===0?r<=te:s<=re)&&(E.push(W),E.push(X-1),E.push(1-F)),(F===0?d>=te:g>=re)&&(E.push(X+1),E.push(B),E.push(1-F))}return z}within(r,s,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:_,nodeSize:b}=this,C=[0,g.length-1,0],E=[],z=d*d;for(;C.length;){const F=C.pop()||0,B=C.pop()||0,W=C.pop()||0;if(B-W<=b){for(let le=W;le<=B;le++)XC(_[2*le],_[2*le+1],r,s)<=z&&E.push(g[le]);continue}const X=W+B>>1,te=_[2*X],re=_[2*X+1];XC(te,re,r,s)<=z&&E.push(g[X]),(F===0?r-d<=te:s-d<=re)&&(C.push(W),C.push(X-1),C.push(1-F)),(F===0?r+d>=te:s+d>=re)&&(C.push(X+1),C.push(B),C.push(1-F))}return E}}function nb(l,r,s,d,g,_){if(g-d<=s)return;const b=d+g>>1;ZC(l,r,b,d,g,_),nb(l,r,s,d,b-1,1-_),nb(l,r,s,b+1,g,1-_)}function ZC(l,r,s,d,g,_){for(;g>d;){if(g-d>600){const z=g-d+1,F=s-d+1,B=Math.log(z),W=.5*Math.exp(2*B/3),X=.5*Math.sqrt(B*W*(z-W)/z)*(F-z/2<0?-1:1);ZC(l,r,s,Math.max(d,Math.floor(s-F*W/z+X)),Math.min(g,Math.floor(s+(z-F)*W/z+X)),_)}const b=r[2*s+_];let C=d,E=g;for(Dy(l,r,d,s),r[2*g+_]>b&&Dy(l,r,d,g);C<E;){for(Dy(l,r,C,E),C++,E--;r[2*C+_]<b;)C++;for(;r[2*E+_]>b;)E--}r[2*d+_]===b?Dy(l,r,d,E):(E++,Dy(l,r,E,g)),E<=s&&(d=E+1),s<=E&&(g=E-1)}}function Dy(l,r,s,d){ib(l,s,d),ib(r,2*s,2*d),ib(r,2*s+1,2*d+1)}function ib(l,r,s){const d=l[r];l[r]=l[s],l[s]=d}function XC(l,r,s,d){const g=l-s,_=r-d;return g*g+_*_}var ob;f.cI=void 0,(ob=f.cI||(f.cI={})).create="create",ob.load="load",ob.fullLoad="fullLoad";let r_=null,zy=[];const sb=1e3/60,ab="loadTime",lb="fullLoadTime",l5={mark(l){performance.mark(l)},recordStartOfFrameAt(l){r_!=null&&zy.push(l-r_),r_=l},resetRuntimeMetrics(){r_=null,zy=[]},clearInitializationMetrics(){performance.clearMeasures(ab),performance.clearMeasures(lb);for(const l in f.cI)performance.clearMarks(f.cI[l])},remove(){this.resetRuntimeMetrics(),this.clearInitializationMetrics()},getPerformanceMetrics(){performance.measure(ab,f.cI.create,f.cI.load),performance.measure(lb,f.cI.create,f.cI.fullLoad);const l=performance.getEntriesByName(ab)[0].duration,r=performance.getEntriesByName(lb)[0].duration,s=zy.length;return{loadTimeMs:l,fullLoadTimeMs:r,averageFramesPerSecond:1/(zy.reduce((d,g)=>d+g,0)/s/1e3),virtualDroppedFramesCount:zy.filter(d=>d>sb).reduce((d,g)=>d+(g-sb)/sb,0),totalFramesCount:s}}};f.$=V,f.A=Q,f.B=Ss,f.C=fi,f.D=Wt,f.E=et,f.F=function([l,r,s]){return r+=90,r*=Math.PI/180,s*=Math.PI/180,{x:l*Math.cos(r)*Math.sin(s),y:l*Math.sin(r)*Math.sin(s),z:l*Math.cos(s)}},f.G=Qn,f.H=Sn,f.I=ki,f.J=Fh,f.K=function(l){if(pr==null){const r=l.navigator?l.navigator.userAgent:null;pr=!!l.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return pr},f.L=class{constructor(l,r){this.target=l,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new SD(()=>this.process()),this.subscription=sn(this.target,"message",s=>this.receive(s),!1),this.globalScope=qt(self)?l:window}registerMessageHandler(l,r){this.messageHandlers[l]=r}unregisterMessageHandler(l){delete this.messageHandlers[l]}sendAsync(l,r){return new Promise((s,d)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10),_=r?sn(r.signal,"abort",()=>{_?.unsubscribe(),delete this.resolveRejects[g];const E={id:g,type:"<cancel>",origin:location.origin,targetMapId:l.targetMapId,sourceMapId:this.mapId};this.target.postMessage(E)},CD):null;this.resolveRejects[g]={resolve:E=>{_?.unsubscribe(),s(E)},reject:E=>{_?.unsubscribe(),d(E)}};const b=[],C=Object.assign(Object.assign({},l),{id:g,sourceMapId:this.mapId,origin:location.origin,data:ho(l.data,b)});this.target.postMessage(C,{transfer:b})})}receive(l){const r=l.data,s=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!=="resource://android"&&location.origin!=="resource://android"&&r.origin!==location.origin||r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[s];const d=this.abortControllers[s];return delete this.abortControllers[s],void(d&&d.abort())}if(qt(self)||r.mustQueue)return this.tasks[s]=r,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,r)}}process(){if(this.taskQueue.length===0)return;const l=this.taskQueue.shift(),r=this.tasks[l];delete this.tasks[l],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(l,r)}processTask(l,r){return o(this,void 0,void 0,function*(){if(r.type==="<response>"){const g=this.resolveRejects[l];return delete this.resolveRejects[l],g?void(r.error?g.reject(fo(r.error)):g.resolve(fo(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(l,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=fo(r.data),d=new AbortController;this.abortControllers[l]=d;try{const g=yield this.messageHandlers[r.type](r.sourceMapId,s,d);this.completeTask(l,null,g)}catch(g){this.completeTask(l,g)}})}completeTask(l,r,s){const d=[];delete this.abortControllers[l];const g={id:l,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?ho(r):null,data:ho(s,d)};this.target.postMessage(g,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},f.M=ie,f.N=function(){var l=new Q(16);return Q!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},f.O=function(l,r,s){var d,g,_,b,C,E,z,F,B,W,X,te,re=s[0],le=s[1],me=s[2];return r===l?(l[12]=r[0]*re+r[4]*le+r[8]*me+r[12],l[13]=r[1]*re+r[5]*le+r[9]*me+r[13],l[14]=r[2]*re+r[6]*le+r[10]*me+r[14],l[15]=r[3]*re+r[7]*le+r[11]*me+r[15]):(g=r[1],_=r[2],b=r[3],C=r[4],E=r[5],z=r[6],F=r[7],B=r[8],W=r[9],X=r[10],te=r[11],l[0]=d=r[0],l[1]=g,l[2]=_,l[3]=b,l[4]=C,l[5]=E,l[6]=z,l[7]=F,l[8]=B,l[9]=W,l[10]=X,l[11]=te,l[12]=d*re+C*le+B*me+r[12],l[13]=g*re+E*le+W*me+r[13],l[14]=_*re+z*le+X*me+r[14],l[15]=b*re+F*le+te*me+r[15]),l},f.P=x,f.Q=function(l,r,s){var d=s[0],g=s[1],_=s[2];return l[0]=r[0]*d,l[1]=r[1]*d,l[2]=r[2]*d,l[3]=r[3]*d,l[4]=r[4]*g,l[5]=r[5]*g,l[6]=r[6]*g,l[7]=r[7]*g,l[8]=r[8]*_,l[9]=r[9]*_,l[10]=r[10]*_,l[11]=r[11]*_,l[12]=r[12],l[13]=r[13],l[14]=r[14],l[15]=r[15],l},f.R=Ko,f.S=function(l,r,s){var d=r[0],g=r[1],_=r[2],b=r[3],C=r[4],E=r[5],z=r[6],F=r[7],B=r[8],W=r[9],X=r[10],te=r[11],re=r[12],le=r[13],me=r[14],Te=r[15],pe=s[0],ye=s[1],De=s[2],je=s[3];return l[0]=pe*d+ye*C+De*B+je*re,l[1]=pe*g+ye*E+De*W+je*le,l[2]=pe*_+ye*z+De*X+je*me,l[3]=pe*b+ye*F+De*te+je*Te,l[4]=(pe=s[4])*d+(ye=s[5])*C+(De=s[6])*B+(je=s[7])*re,l[5]=pe*g+ye*E+De*W+je*le,l[6]=pe*_+ye*z+De*X+je*me,l[7]=pe*b+ye*F+De*te+je*Te,l[8]=(pe=s[8])*d+(ye=s[9])*C+(De=s[10])*B+(je=s[11])*re,l[9]=pe*g+ye*E+De*W+je*le,l[10]=pe*_+ye*z+De*X+je*me,l[11]=pe*b+ye*F+De*te+je*Te,l[12]=(pe=s[12])*d+(ye=s[13])*C+(De=s[14])*B+(je=s[15])*re,l[13]=pe*g+ye*E+De*W+je*le,l[14]=pe*_+ye*z+De*X+je*me,l[15]=pe*b+ye*F+De*te+je*Te,l},f.T=Zs,f.U=function(l,r){const s={};for(let d=0;d<r.length;d++){const g=r[d];g in l&&(s[g]=l[g])}return s},f.V=hf,f.W=bt,f.X=HS,f.Y=qS,f.Z=Zr,f._=o,f.a=ur,f.a$=ae,f.a0=se,f.a1=Rr,f.a2=wa,f.a3=ZS,f.a4=G0,f.a5=Ve,f.a6=function(l,r,s){if(!l)return r||{};if(!r)return l||{};const d=JS(l),g=JS(r);(function(b,C){C.removeAll&&(b.add.clear(),b.update.clear(),b.remove.clear(),C.remove.clear());for(const E of C.remove)b.add.delete(E),b.update.delete(E);for(const[E,z]of C.update){const F=b.update.get(E);F&&(C.update.set(E,TD(F,z)),b.update.delete(E))}})(d,g);const _={};if((d.removeAll||g.removeAll)&&(_.removeAll=!0),_.remove=new Set([...d.remove,...g.remove]),_.add=new Map([...d.add,...g.add]),_.update=new Map([...d.update,...g.update]),_.remove.size&&_.add.size)for(const b of _.add.keys())_.remove.delete(b);return function(b){const C={};return b.removeAll&&(C.removeAll=b.removeAll),b.remove&&(C.remove=Array.from(b.remove)),b.add&&(C.add=Array.from(b.add.values())),b.update&&(C.update=Array.from(b.update.values())),C}(_)},f.a7=function(l,r){const s=new Map;if(l==null||l.type==null)return s;if(l.type==="Feature"){const d=F1(l,r);return d==null?void 0:(s.set(d,l),s)}if(l.type==="FeatureCollection"){const d=new Set;for(const g of l.features){const _=F1(g,r);if(_==null||d.has(_))return;d.add(_),s.set(_,g)}return s}},f.a8=function(l,r,s){var d,g;const _=[];if(r.removeAll)l.clear();else if(r.remove)for(const b of r.remove){const C=l.get(b);C&&(_.push(C.geometry),l.delete(b))}if(r.add)for(const b of r.add){const C=F1(b,s);if(C==null)continue;const E=l.get(C);E&&_.push(E.geometry),_.push(b.geometry),l.set(C,b)}if(r.update)for(const b of r.update){const C=l.get(b.id);if(!C)continue;const E=!!b.newGeometry,z=b.removeAllProperties||((d=b.removeProperties)===null||d===void 0?void 0:d.length)>0||((g=b.addOrUpdateProperties)===null||g===void 0?void 0:g.length)>0;if(!E&&!z)continue;_.push(C.geometry);const F=Object.assign({},C);if(l.set(b.id,F),E&&(_.push(b.newGeometry),F.geometry=b.newGeometry),z){if(F.properties=b.removeAllProperties?{}:Object.assign({},F.properties||{}),b.removeProperties)for(const B of b.removeProperties)delete F.properties[B];if(b.addOrUpdateProperties)for(const{key:B,value:W}of b.addOrUpdateProperties)F.properties[B]=W}}return _},f.a9=Iy,f.aA=function(l,{uSize:r,uSizeT:s},{lowerSize:d,upperSize:g}){return l.kind==="source"?d/Yh:l.kind==="composite"?Qn.number(d/Yh,g/Yh,s):r},f.aB=function(l,r){var s=r[0],d=r[1],g=r[2],_=r[3],b=r[4],C=r[5],E=r[6],z=r[7],F=r[8],B=r[9],W=r[10],X=r[11],te=r[12],re=r[13],le=r[14],me=r[15],Te=s*C-d*b,pe=s*E-g*b,ye=s*z-_*b,De=d*E-g*C,je=d*z-_*C,ot=g*z-_*E,xt=F*re-B*te,wt=F*le-W*te,It=F*me-X*te,Bt=B*le-W*re,Rt=B*me-X*re,St=W*me-X*le,mt=Te*St-pe*Rt+ye*Bt+De*It-je*wt+ot*xt;return mt?(l[0]=(C*St-E*Rt+z*Bt)*(mt=1/mt),l[1]=(g*Rt-d*St-_*Bt)*mt,l[2]=(re*ot-le*je+me*De)*mt,l[3]=(W*je-B*ot-X*De)*mt,l[4]=(E*It-b*St-z*wt)*mt,l[5]=(s*St-g*It+_*wt)*mt,l[6]=(le*ye-te*ot-me*pe)*mt,l[7]=(F*ot-W*ye+X*pe)*mt,l[8]=(b*Rt-C*It+z*xt)*mt,l[9]=(d*It-s*Rt-_*xt)*mt,l[10]=(te*je-re*ye+me*Te)*mt,l[11]=(B*ye-F*je-X*Te)*mt,l[12]=(C*wt-b*Bt-E*xt)*mt,l[13]=(s*Bt-d*wt+g*xt)*mt,l[14]=(re*pe-te*De-le*Te)*mt,l[15]=(F*De-B*pe+W*Te)*mt,l):null},f.aC=rt,f.aD=function(l){var r=l[0],s=l[1];return Math.sqrt(r*r+s*s)},f.aE=function(l){return l[0]=0,l[1]=0,l},f.aF=function(l,r,s){return l[0]=r[0]*s,l[1]=r[1]*s,l},f.aG=A1,f.aH=vt,f.aI=function(l,r,s,d){const g=r.y-l.y,_=r.x-l.x,b=d.y-s.y,C=d.x-s.x,E=b*_-C*g;if(E===0)return null;const z=(C*(l.y-s.y)-b*(l.x-s.x))/E;return new x(l.x+z*_,l.y+z*g)},f.aJ=DC,f.aK=Au,f.aL=function(l){let r=1/0,s=1/0,d=-1/0,g=-1/0;for(const _ of l)r=Math.min(r,_.x),s=Math.min(s,_.y),d=Math.max(d,_.x),g=Math.max(g,_.y);return[r,s,d,g]},f.aM=ro,f.aN=ut,f.aO=function(l,r,s,d,g=!1){if(!s[0]&&!s[1])return[0,0];const _=g?d==="map"?-l.bearingInRadians:0:d==="viewport"?l.bearingInRadians:0;if(_){const b=Math.sin(_),C=Math.cos(_);s=[s[0]*C-s[1]*b,s[0]*b+s[1]*C]}return[g?s[0]:ut(r,s[0],l.zoom),g?s[1]:ut(r,s[1],l.zoom)]},f.aQ=k1,f.aR=tb,f.aS=Vt,f.aT=rb,f.aU=pi,f.aV=Fu,f.aW=ge,f.aX=Nt,f.aY=ct,f.aZ=Tn,f.a_=XS,f.aa=Tp,f.ab=25,f.ac=L1,f.ad=l=>{const r=window.document.createElement("video");return r.muted=!0,new Promise(s=>{r.onloadstart=()=>{s(r)};for(const d of l){const g=window.document.createElement("source");Je(d)||(r.crossOrigin="Anonymous"),g.src=d,r.appendChild(g)}})},f.ae=Mt,f.af=function(){return kt++},f.ag=v,f.ah=Vm,f.ai=Ry,f.aj=Mc,f.ak=Ka,f.al=eC,f.am=function(l){const r={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,d,g,_)=>{const b=g||_;return r[d]=!b||b.toLowerCase(),""}),r["max-age"]){const s=parseInt(r["max-age"],10);isNaN(s)?delete r["max-age"]:r["max-age"]=s}return r},f.an=_t,f.ao=85.051129,f.ap=On,f.aq=function(l){return Math.pow(2,l)},f.ar=oe,f.as=WS,f.at=function(l){return Math.log(l)/Math.LN2},f.au=function(l){var r=l[0],s=l[1];return r*r+s*s},f.av=function(l){if(!l.length)return new Set;const r=Math.max(...l.map(E=>E.canonical.z));let s=1/0,d=-1/0,g=1/0,_=-1/0;const b=[];for(const E of l){const{x:z,y:F,z:B}=E.canonical,W=Math.pow(2,r-B),X=z*W,te=F*W;b.push({id:E,x:X,y:te}),X<s&&(s=X),X>d&&(d=X),te<g&&(g=te),te>_&&(_=te)}const C=new Set;for(const E of b)E.x!==s&&E.x!==d&&E.y!==g&&E.y!==_||C.add(E.id);return C},f.aw=function(l,r){const s=Math.abs(2*l.wrap)-+(l.wrap<0),d=Math.abs(2*r.wrap)-+(r.wrap<0);return l.overscaledZ-r.overscaledZ||d-s||r.canonical.y-l.canonical.y||r.canonical.x-l.canonical.x},f.ax=class{constructor(l,r){this.max=l,this.onRemove=r,this.reset()}reset(){for(const l in this.data)for(const r of this.data[l])r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value);return this.data={},this.order=[],this}add(l,r,s){const d=l.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);const g={value:r,timeout:void 0};if(s!==void 0&&(g.timeout=setTimeout(()=>{this.remove(l,g)},s)),this.data[d].push(g),this.order.push(d),this.order.length>this.max){const _=this._getAndRemoveByKey(this.order[0]);_&&this.onRemove(_)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const r=this.data[l].shift();return r.timeout&&clearTimeout(r.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),r.value}getByKey(l){const r=this.data[l];return r?r[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,r){if(!this.has(l))return this;const s=l.wrapped().key,d=r===void 0?0:this.data[s].indexOf(r),g=this.data[s][d];return this.data[s].splice(d,1),g.timeout&&clearTimeout(g.timeout),this.data[s].length===0&&delete this.data[s],this.onRemove(g.value),this.order.splice(this.order.indexOf(s),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r)}return this}filter(l){const r=[];for(const s in this.data)for(const d of this.data[s])l(d.value)||r.push(d);for(const s of r)this.remove(s.value.tileID,s)}},f.ay=function(l,r){let s=0,d=0;if(l.kind==="constant")d=l.layoutSize;else if(l.kind!=="source"){const{interpolationType:g,minZoom:_,maxZoom:b}=l,C=g?_t(Yi.interpolationFactor(g,r,_,b),0,1):0;l.kind==="camera"?d=Qn.number(l.minSize,l.maxSize,C):s=C}return{uSizeT:s,uSize:d}},f.b=Xt,f.b$=Za,f.b0=ke,f.b1=function(l){var r=new Q(3);return r[0]=l[0],r[1]=l[1],r[2]=l[2],r},f.b2=function(l,r,s){return l[0]=r[0]-s[0],l[1]=r[1]-s[1],l[2]=r[2]-s[2],l},f.b3=function(l,r){var s=r[0],d=r[1],g=r[2],_=s*s+d*d+g*g;return _>0&&(_=1/Math.sqrt(_)),l[0]=r[0]*_,l[1]=r[1]*_,l[2]=r[2]*_,l},f.b4=Ee,f.b5=function(l,r){return l[0]*r[0]+l[1]*r[1]+l[2]*r[2]},f.b6=function(l,r,s){return l[0]=r[0]*s[0],l[1]=r[1]*s[1],l[2]=r[2]*s[2],l[3]=r[3]*s[3],l},f.b7=we,f.b8=function(l,r,s){const d=r[0]*s[0]+r[1]*s[1]+r[2]*s[2];return d===0?null:(-(l[0]*s[0]+l[1]*s[1]+l[2]*s[2])-s[3])/d},f.b9=Qe,f.bA=function(){return new Float64Array(3)},f.bB=He,f.bC=function(l,r,s){var d=s[0],g=s[1],_=s[2],b=s[3],C=r[0],E=r[1],z=r[2],F=g*z-_*E,B=_*C-d*z,W=d*E-g*C;return l[0]=C+b*(F+=F)+g*(W+=W)-_*(B+=B),l[1]=E+b*B+_*F-d*W,l[2]=z+b*W+d*B-g*F,l},f.bD=function(l,r,s){const d=(g=[l[0],l[1],l[2],r[0],r[1],r[2],s[0],s[1],s[2]])[0]*((F=g[8])*(b=g[4])-(C=g[5])*(z=g[7]))+g[1]*(-F*(_=g[3])+C*(E=g[6]))+g[2]*(z*_-b*E);var g,_,b,C,E,z,F;if(d===0)return null;const B=Ee([],[r[0],r[1],r[2]],[s[0],s[1],s[2]]),W=Ee([],[s[0],s[1],s[2]],[l[0],l[1],l[2]]),X=Ee([],[l[0],l[1],l[2]],[r[0],r[1],r[2]]),te=ae([],B,-l[3]);return ke(te,te,ae([],W,-r[3])),ke(te,te,ae([],X,-s[3])),ae(te,te,1/d),te},f.bE=O1,f.bF=function(){return new Float64Array(4)},f.bG=function(l,r,s,d){var g=[],_=[];return g[0]=r[0]-s[0],g[1]=r[1]-s[1],g[2]=r[2]-s[2],_[0]=g[0]*Math.cos(d)-g[1]*Math.sin(d),_[1]=g[0]*Math.sin(d)+g[1]*Math.cos(d),_[2]=g[2],l[0]=_[0]+s[0],l[1]=_[1]+s[1],l[2]=_[2]+s[2],l},f.bH=function(l,r,s,d){var g=[],_=[];return g[0]=r[0]-s[0],g[1]=r[1]-s[1],g[2]=r[2]-s[2],_[0]=g[0],_[1]=g[1]*Math.cos(d)-g[2]*Math.sin(d),_[2]=g[1]*Math.sin(d)+g[2]*Math.cos(d),l[0]=_[0]+s[0],l[1]=_[1]+s[1],l[2]=_[2]+s[2],l},f.bI=function(l,r,s,d){var g=[],_=[];return g[0]=r[0]-s[0],g[1]=r[1]-s[1],g[2]=r[2]-s[2],_[0]=g[2]*Math.sin(d)+g[0]*Math.cos(d),_[1]=g[1],_[2]=g[2]*Math.cos(d)-g[0]*Math.sin(d),l[0]=_[0]+s[0],l[1]=_[1]+s[1],l[2]=_[2]+s[2],l},f.bJ=function(l,r,s){var d=Math.sin(s),g=Math.cos(s),_=r[0],b=r[1],C=r[2],E=r[3],z=r[8],F=r[9],B=r[10],W=r[11];return r!==l&&(l[4]=r[4],l[5]=r[5],l[6]=r[6],l[7]=r[7],l[12]=r[12],l[13]=r[13],l[14]=r[14],l[15]=r[15]),l[0]=_*g-z*d,l[1]=b*g-F*d,l[2]=C*g-B*d,l[3]=E*g-W*d,l[8]=_*d+z*g,l[9]=b*d+F*g,l[10]=C*d+B*g,l[11]=E*d+W*g,l},f.bK=function(l,r){const s=ve(l,360),d=ve(r,360),g=d-s,_=d>s?g-360:g+360;return Math.abs(g)<Math.abs(_)?g:_},f.bL=function(l){return l[0]=0,l[1]=0,l[2]=0,l},f.bM=function(l,r,s,d){const g=Math.sqrt(l*l+r*r),_=Math.sqrt(s*s+d*d);l/=g,r/=g,s/=_,d/=_;const b=Math.acos(l*s+r*d);return-r*s+l*d>0?b:-b},f.bN=function(l,r){const s=ve(l,2*Math.PI),d=ve(r,2*Math.PI);return Math.min(Math.abs(s-d),Math.abs(s-d+2*Math.PI),Math.abs(s-d-2*Math.PI))},f.bO=function(){const l={},r=Ae.$version;for(const s in Ae.$root){const d=Ae.$root[s];if(d.required){let g=null;g=s==="version"?r:d.type==="array"?[]:{},g!=null&&(l[s]=g)}}return l},f.bP=Ce,f.bQ=Hn,f.bR=function l(r,s){if(Array.isArray(r)){if(!Array.isArray(s)||r.length!==s.length)return!1;for(let d=0;d<r.length;d++)if(!l(r[d],s[d]))return!1;return!0}if(typeof r=="object"&&r!==null&&s!==null){if(typeof s!="object"||Object.keys(r).length!==Object.keys(s).length)return!1;for(const d in r)if(!l(r[d],s[d]))return!1;return!0}return r===s},f.bS=function(l){l=l.slice();const r=Object.create(null);for(let s=0;s<l.length;s++)r[l[s].id]=l[s];for(let s=0;s<l.length;s++)"ref"in l[s]&&(l[s]=mr(l[s],r[l[s].ref]));return l},f.bT=function(l,r){if(l.type==="custom")return new wD(l,r);switch(l.type){case"background":return new bD(l,r);case"circle":return new tf(l,r);case"color-relief":return new T1(l,r);case"fill":return new M0(l,r);case"fill-extrusion":return new P1(l,r);case"heatmap":return new py(l,r);case"hillshade":return new Ru(l,r);case"line":return new My(l,r);case"raster":return new $l(l,r);case"symbol":return new U0(l,r)}},f.bU=l=>l.type==="raster",f.bV=ir,f.bW=function(l,r){if(!l)return[{command:"setStyle",args:[r]}];let s=[];try{if(!Zt(l.version,r.version))return[{command:"setStyle",args:[r]}];Zt(l.center,r.center)||s.push({command:"setCenter",args:[r.center]}),Zt(l.state,r.state)||s.push({command:"setGlobalState",args:[r.state]}),Zt(l.centerAltitude,r.centerAltitude)||s.push({command:"setCenterAltitude",args:[r.centerAltitude]}),Zt(l.zoom,r.zoom)||s.push({command:"setZoom",args:[r.zoom]}),Zt(l.bearing,r.bearing)||s.push({command:"setBearing",args:[r.bearing]}),Zt(l.pitch,r.pitch)||s.push({command:"setPitch",args:[r.pitch]}),Zt(l.roll,r.roll)||s.push({command:"setRoll",args:[r.roll]}),Zt(l.sprite,r.sprite)||s.push({command:"setSprite",args:[r.sprite]}),Zt(l.glyphs,r.glyphs)||s.push({command:"setGlyphs",args:[r.glyphs]}),Zt(l.transition,r.transition)||s.push({command:"setTransition",args:[r.transition]}),Zt(l.light,r.light)||s.push({command:"setLight",args:[r.light]}),Zt(l.terrain,r.terrain)||s.push({command:"setTerrain",args:[r.terrain]}),Zt(l.sky,r.sky)||s.push({command:"setSky",args:[r.sky]}),Zt(l.projection,r.projection)||s.push({command:"setProjection",args:[r.projection]});const d={},g=[];(function(b,C,E,z){let F;for(F in C=C||{},b=b||{})Object.prototype.hasOwnProperty.call(b,F)&&(Object.prototype.hasOwnProperty.call(C,F)||vr(F,E,z));for(F in C)Object.prototype.hasOwnProperty.call(C,F)&&(Object.prototype.hasOwnProperty.call(b,F)?Zt(b[F],C[F])||(b[F].type==="geojson"&&C[F].type==="geojson"&&nn(b,C,F)?Yt(E,{command:"setGeoJSONSourceData",args:[F,C[F].data]}):kr(F,C,E,z)):rr(F,C,E))})(l.sources,r.sources,g,d);const _=[];l.layers&&l.layers.forEach(b=>{"source"in b&&d[b.source]?s.push({command:"removeLayer",args:[b.id]}):_.push(b)}),s=s.concat(g),function(b,C,E){C=C||[];const z=(b=b||[]).map(wn),F=C.map(wn),B=b.reduce(on,{}),W=C.reduce(on,{}),X=z.slice(),te=Object.create(null);let re,le,me,Te,pe;for(let ye=0,De=0;ye<z.length;ye++)re=z[ye],Object.prototype.hasOwnProperty.call(W,re)?De++:(Yt(E,{command:"removeLayer",args:[re]}),X.splice(X.indexOf(re,De),1));for(let ye=0,De=0;ye<F.length;ye++)re=F[F.length-1-ye],X[X.length-1-ye]!==re&&(Object.prototype.hasOwnProperty.call(B,re)?(Yt(E,{command:"removeLayer",args:[re]}),X.splice(X.lastIndexOf(re,X.length-De),1)):De++,Te=X[X.length-ye],Yt(E,{command:"addLayer",args:[W[re],Te]}),X.splice(X.length-ye,0,re),te[re]=!0);for(let ye=0;ye<F.length;ye++)if(re=F[ye],le=B[re],me=W[re],!te[re]&&!Zt(le,me))if(Zt(le.source,me.source)&&Zt(le["source-layer"],me["source-layer"])&&Zt(le.type,me.type)){for(pe in Xr(le.layout,me.layout,E,re,null,"setLayoutProperty"),Xr(le.paint,me.paint,E,re,null,"setPaintProperty"),Zt(le.filter,me.filter)||Yt(E,{command:"setFilter",args:[re,me.filter]}),Zt(le.minzoom,me.minzoom)&&Zt(le.maxzoom,me.maxzoom)||Yt(E,{command:"setLayerZoomRange",args:[re,me.minzoom,me.maxzoom]}),le)Object.prototype.hasOwnProperty.call(le,pe)&&pe!=="layout"&&pe!=="paint"&&pe!=="filter"&&pe!=="metadata"&&pe!=="minzoom"&&pe!=="maxzoom"&&(pe.indexOf("paint.")===0?Xr(le[pe],me[pe],E,re,pe.slice(6),"setPaintProperty"):Zt(le[pe],me[pe])||Yt(E,{command:"setLayerProperty",args:[re,pe,me[pe]]}));for(pe in me)Object.prototype.hasOwnProperty.call(me,pe)&&!Object.prototype.hasOwnProperty.call(le,pe)&&pe!=="layout"&&pe!=="paint"&&pe!=="filter"&&pe!=="metadata"&&pe!=="minzoom"&&pe!=="maxzoom"&&(pe.indexOf("paint.")===0?Xr(le[pe],me[pe],E,re,pe.slice(6),"setPaintProperty"):Zt(le[pe],me[pe])||Yt(E,{command:"setLayerProperty",args:[re,pe,me[pe]]}))}else Yt(E,{command:"removeLayer",args:[re]}),Te=X[X.lastIndexOf(re)+1],Yt(E,{command:"addLayer",args:[me,Te]})}(_,r.layers,s)}catch(d){console.warn("Unable to compute style diff:",d),s=[{command:"setStyle",args:[r]}]}return s},f.bX=function(l){const r=[],s=l.id;return s===void 0&&r.push({message:`layers.${s}: missing required property "id"`}),l.render===void 0&&r.push({message:`layers.${s}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&r.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),r},f.bY=At,f.bZ=dr,f.b_=class extends zo{constructor(l,r){super(l,r),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},f.ba=function(l,r,s){return l[0]=r[0]*s,l[1]=r[1]*s,l[2]=r[2]*s,l[3]=r[3]*s,l},f.bb=function(l,r){return l[0]*r[0]+l[1]*r[1]+l[2]*r[2]+l[3]},f.bc=YS,f.bd=Um,f.be=function(l,r,s,d,g){var _=1/Math.tan(r/2);if(l[0]=_/s,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=_,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,g!=null&&g!==1/0){var b=1/(d-g);l[10]=(g+d)*b,l[14]=2*g*d*b}else l[10]=-1,l[14]=-2*d;return l},f.bf=function(l){var r=new Q(16);return r[0]=l[0],r[1]=l[1],r[2]=l[2],r[3]=l[3],r[4]=l[4],r[5]=l[5],r[6]=l[6],r[7]=l[7],r[8]=l[8],r[9]=l[9],r[10]=l[10],r[11]=l[11],r[12]=l[12],r[13]=l[13],r[14]=l[14],r[15]=l[15],r},f.bg=function(l,r,s){var d=Math.sin(s),g=Math.cos(s),_=r[0],b=r[1],C=r[2],E=r[3],z=r[4],F=r[5],B=r[6],W=r[7];return r!==l&&(l[8]=r[8],l[9]=r[9],l[10]=r[10],l[11]=r[11],l[12]=r[12],l[13]=r[13],l[14]=r[14],l[15]=r[15]),l[0]=_*g+z*d,l[1]=b*g+F*d,l[2]=C*g+B*d,l[3]=E*g+W*d,l[4]=z*g-_*d,l[5]=F*g-b*d,l[6]=B*g-C*d,l[7]=W*g-E*d,l},f.bh=function(l,r,s){var d=Math.sin(s),g=Math.cos(s),_=r[4],b=r[5],C=r[6],E=r[7],z=r[8],F=r[9],B=r[10],W=r[11];return r!==l&&(l[0]=r[0],l[1]=r[1],l[2]=r[2],l[3]=r[3],l[12]=r[12],l[13]=r[13],l[14]=r[14],l[15]=r[15]),l[4]=_*g+z*d,l[5]=b*g+F*d,l[6]=C*g+B*d,l[7]=E*g+W*d,l[8]=z*g-_*d,l[9]=F*g-b*d,l[10]=B*g-C*d,l[11]=W*g-E*d,l},f.bi=function(){const l=new Float32Array(16);return oe(l),l},f.bj=function(){const l=new Float64Array(16);return oe(l),l},f.bk=function(){return new Float64Array(16)},f.bl=function(l,r,s){const d=new Float64Array(4);return He(d,l,r-90,s),d},f.bm=function(l,r,s,d){var g,_,b,C,E,z=r[0],F=r[1],B=r[2],W=r[3],X=s[0],te=s[1],re=s[2],le=s[3];return(_=z*X+F*te+B*re+W*le)<0&&(_=-_,X=-X,te=-te,re=-re,le=-le),1-_>ue?(g=Math.acos(_),b=Math.sin(g),C=Math.sin((1-d)*g)/b,E=Math.sin(d*g)/b):(C=1-d,E=d),l[0]=C*z+E*X,l[1]=C*F+E*te,l[2]=C*B+E*re,l[3]=C*W+E*le,l},f.bn=function(l){const r=new Float64Array(9);var s,d,g,_,b,C,E,z,F,B,W,X,te,re,le,me,Te,pe;B=(g=(d=l)[0])*(E=g+g),W=(_=d[1])*E,te=(b=d[2])*E,re=b*(z=_+_),me=(C=d[3])*E,Te=C*z,pe=C*(F=b+b),(s=r)[0]=1-(X=_*z)-(le=b*F),s[3]=W-pe,s[6]=te+Te,s[1]=W+pe,s[4]=1-B-le,s[7]=re-me,s[2]=te-Te,s[5]=re+me,s[8]=1-B-X;const ye=Tn(-Math.asin(_t(r[2],-1,1)));let De,je;return Math.hypot(r[5],r[8])<.001?(De=0,je=-Tn(Math.atan2(r[3],r[4]))):(De=Tn(r[5]===0&&r[8]===0?0:Math.atan2(r[5],r[8])),je=Tn(r[1]===0&&r[0]===0?0:Math.atan2(r[1],r[0]))),{roll:De,pitch:ye+90,bearing:je}},f.bo=function(l,r){return l.roll==r.roll&&l.pitch==r.pitch&&l.bearing==r.bearing},f.bp=$r,f.bq=Wa,f.br=Bu,f.bs=$u,f.bt=Gc,f.bu=Fe,f.bv=pt,f.bw=Ki,f.bx=function(l,r,s,d,g){return Fe(d,g,_t((l-r)/(s-r),0,1))},f.by=function(l,r,s,d){return l[0]=r[0]+s[0]*d,l[1]=r[1]+s[1]*d,l[2]=r[2]+s[2]*d,l},f.bz=ve,f.c=Ne,f.c$=class{constructor(l){this.start=`${l}#start`,this.end=`${l}#end`,this.measure=l,performance.mark(this.start)}finish(){performance.mark(this.end);let l=performance.getEntriesByName(this.measure);return l.length===0&&(performance.measure(this.measure,this.start,this.end),l=performance.getEntriesByName(this.measure),performance.clearMarks(this.start),performance.clearMarks(this.end),performance.clearMeasures(this.measure)),l}},f.c0=class extends zo{constructor(l,r){super(l,r),this.current=Zo}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let r=1;r<16;r++)if(l[r]!==this.current[r]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},f.c1=ga,f.c2=class extends zo{constructor(l,r){super(l,r),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},f.c3=class extends zo{constructor(l,r){super(l,r),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},f.c4=de,f.c5=function(l,r){var s=Math.sin(r),d=Math.cos(r);return l[0]=d,l[1]=s,l[2]=0,l[3]=-s,l[4]=d,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},f.c6=function(l,r,s){var d=r[0],g=r[1],_=r[2];return l[0]=d*s[0]+g*s[3]+_*s[6],l[1]=d*s[1]+g*s[4]+_*s[7],l[2]=d*s[2]+g*s[5]+_*s[8],l},f.c7=function(l,r,s,d,g,_,b){var C=1/(r-s),E=1/(d-g),z=1/(_-b);return l[0]=-2*C,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*E,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*z,l[11]=0,l[12]=(r+s)*C,l[13]=(g+d)*E,l[14]=(b+_)*z,l[15]=1,l},f.c8=class extends zo{constructor(l,r){super(l,r),this.current=new Array}set(l){if(l!=this.current){this.current=l;const r=new Float32Array(4*l.length);for(let s=0;s<l.length;s++)r[4*s]=l[s].r,r[4*s+1]=l[s].g,r[4*s+2]=l[s].b,r[4*s+3]=l[s].a;this.gl.uniform4fv(this.location,r)}}},f.c9=class extends zo{constructor(l,r){super(l,r),this.current=new Array}set(l){if(l!=this.current){this.current=l;const r=new Float32Array(l);this.gl.uniform1fv(this.location,r)}}},f.cA=function(l,r){var s;if(!Sr[r])return!1;const d=l?.target,g=((s=d?.ownerDocument)===null||s===void 0?void 0:s.defaultView)||window;return l instanceof g.MouseEvent||l instanceof g.WheelEvent},f.cB=function(l,r){return vn[r]&&"touches"in l},f.cC=function(l){return vn[l]||Sr[l]},f.cD=function(l,r,s){var d=r[0],g=r[1];return l[0]=s[0]*d+s[4]*g+s[12],l[1]=s[1]*d+s[5]*g+s[13],l},f.cE=function(l,r){const{x:s,y:d}=Iy.fromLngLat(r);return!(l<0||l>25||d<0||d>=1||s<0||s>=1)},f.cF=function(l,r){return l[0]=r[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=r[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=r[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},f.cG=class extends jl{},f.cH=l5,f.cJ=ce,f.cK=function(l,r){Ne.REGISTERED_PROTOCOLS[l]=r},f.cL=function(l){delete Ne.REGISTERED_PROTOCOLS[l]},f.cM=function(l,r){const s={};for(let g=0;g<l.length;g++){const _=r&&r[l[g].id]||Na(l[g]);r&&(r[l[g].id]=_);let b=s[_];b||(b=s[_]=[]),b.push(l[g])}const d=[];for(const g in s)d.push(s[g]);return d},f.cN=Gt,f.cO=QS,f.cP=AC,f.cQ=ht,f.cR=function(l){var r;l.bucket.createArrays(),l.bucket.tilePixelRatio=Ve/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;const s=l.bucket.layers[0],d=s.layout,g=s._unevaluatedLayout._values,_={layoutIconSize:g["icon-size"].possiblyEvaluate(new Sn(l.bucket.zoom+1),l.canonical),layoutTextSize:g["text-size"].possiblyEvaluate(new Sn(l.bucket.zoom+1),l.canonical),textMaxSize:g["text-size"].possiblyEvaluate(new Sn(18))};if(l.bucket.textSizeData.kind==="composite"){const{minZoom:F,maxZoom:B}=l.bucket.textSizeData;_.compositeTextSizes=[g["text-size"].possiblyEvaluate(new Sn(F),l.canonical),g["text-size"].possiblyEvaluate(new Sn(B),l.canonical)]}if(l.bucket.iconSizeData.kind==="composite"){const{minZoom:F,maxZoom:B}=l.bucket.iconSizeData;_.compositeIconSizes=[g["icon-size"].possiblyEvaluate(new Sn(F),l.canonical),g["icon-size"].possiblyEvaluate(new Sn(B),l.canonical)]}const b=d.get("text-line-height")*ro,C=d.get("text-rotation-alignment")!=="viewport"&&d.get("symbol-placement")!=="point",E=d.get("text-keep-upright"),z=d.get("text-size");for(const F of l.bucket.features){const B=d.get("text-font").evaluate(F,{},l.canonical).join(","),W=z.evaluate(F,{},l.canonical),X=_.layoutTextSize.evaluate(F,{},l.canonical),te=_.layoutIconSize.evaluate(F,{},l.canonical),re={horizontal:{},vertical:void 0},le=F.text;let me,Te=[0,0];if(le){const De=le.toString(),je=d.get("text-letter-spacing").evaluate(F,{},l.canonical)*ro,ot=ap(De)?je:0,xt=d.get("text-anchor").evaluate(F,{},l.canonical),wt=GC(s,F,l.canonical);if(!wt){const St=d.get("text-radial-offset").evaluate(F,{},l.canonical);Te=St?UC(xt,[St*ro,eb]):d.get("text-offset").evaluate(F,{},l.canonical).map(mt=>mt*ro)}let It=C?"center":d.get("text-justify").evaluate(F,{},l.canonical);const Bt=d.get("symbol-placement")==="point"?d.get("text-max-width").evaluate(F,{},l.canonical)*ro:1/0,Rt=()=>{l.bucket.allowVerticalPlacement&&Ll(De)&&(re.vertical=ft(le,l.glyphMap,l.glyphPositions,l.imagePositions,B,Bt,b,xt,"left",ot,Te,f.az.vertical,!0,X,W))};if(!C&&wt){const St=new Set;if(It==="auto")for(let Kt=0;Kt<wt.values.length;Kt+=2)St.add(tb(wt.values[Kt]));else St.add(It);let mt=!1;for(const Kt of St)if(!re.horizontal[Kt])if(mt)re.horizontal[Kt]=re.horizontal[0];else{const er=ft(le,l.glyphMap,l.glyphPositions,l.imagePositions,B,Bt,b,"center",Kt,ot,Te,f.az.horizontal,!1,X,W);er&&(re.horizontal[Kt]=er,mt=er.positionedLines.length===1)}Rt()}else{It==="auto"&&(It=tb(xt));const St=ft(le,l.glyphMap,l.glyphPositions,l.imagePositions,B,Bt,b,xt,It,ot,Te,f.az.horizontal,!1,X,W);St&&(re.horizontal[It]=St),Rt(),Ll(De)&&C&&E&&(re.vertical=ft(le,l.glyphMap,l.glyphPositions,l.imagePositions,B,Bt,b,xt,It,ot,Te,f.az.vertical,!1,X,W))}}let pe=!1;if(F.icon&&F.icon.name){const De=l.imageMap[F.icon.name];De&&(me=Vu(l.imagePositions[F.icon.name],d.get("icon-offset").evaluate(F,{},l.canonical),d.get("icon-anchor").evaluate(F,{},l.canonical)),pe=!!De.sdf,l.bucket.sdfIcons===void 0?l.bucket.sdfIcons=pe:l.bucket.sdfIcons!==pe&&Tr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(De.pixelRatio!==l.bucket.pixelRatio||d.get("icon-rotate").constantOr(1)!==0)&&(l.bucket.iconsNeedLinear=!0))}const ye=HC(re.horizontal)||re.vertical;(r=l.bucket).iconsInText||(r.iconsInText=!!ye&&ye.iconsInText),(ye||me)&&s5(l.bucket,F,re,me,l.imageMap,_,X,te,Te,pe,l.canonical,l.subdivisionGranularity)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},f.cS=vp,f.cT=wy,f.cU=af,f.cV=function(l){const r=new p;return function(s,d){for(const g in s.layers)d.writeMessage(3,HD,s.layers[g])}(l,r),r.finish()},f.cW=function(l,r,s,d,g,_){let b=zC(l,r,s,g,0);return b=zC(b,r,d,_,1),b},f.cX=class{constructor(l){this.maxEntries=l,this.map=new Map}get(l){const r=this.map.get(l);return r!==void 0&&(this.map.delete(l),this.map.set(l,r)),r}set(l,r){if(this.map.has(l))this.map.delete(l);else if(this.map.size>=this.maxEntries){const s=this.map.keys().next().value;this.map.delete(s)}this.map.set(l,r)}clear(){this.map.clear()}},f.cY=E0,f.cZ=p,f.c_=IC,f.ca=class extends qa{},f.cb=F0,f.cc=class extends $n{},f.cd=mp,f.ce=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},f.cf=fy,f.cg=function(l,r,s){var d=r[0],g=r[1],_=r[2],b=s[3]*d+s[7]*g+s[11]*_+s[15];return l[0]=(s[0]*d+s[4]*g+s[8]*_+s[12])/(b=b||1),l[1]=(s[1]*d+s[5]*g+s[9]*_+s[13])/b,l[2]=(s[2]*d+s[6]*g+s[10]*_+s[14])/b,l},f.ch=class extends Oc{},f.ci=class extends n{},f.cj=function(l,r){return l[0]===r[0]&&l[1]===r[1]&&l[2]===r[2]&&l[3]===r[3]&&l[4]===r[4]&&l[5]===r[5]&&l[6]===r[6]&&l[7]===r[7]&&l[8]===r[8]&&l[9]===r[9]&&l[10]===r[10]&&l[11]===r[11]&&l[12]===r[12]&&l[13]===r[13]&&l[14]===r[14]&&l[15]===r[15]},f.ck=function(l,r){var s=l[0],d=l[1],g=l[2],_=l[3],b=l[4],C=l[5],E=l[6],z=l[7],F=l[8],B=l[9],W=l[10],X=l[11],te=l[12],re=l[13],le=l[14],me=l[15],Te=r[0],pe=r[1],ye=r[2],De=r[3],je=r[4],ot=r[5],xt=r[6],wt=r[7],It=r[8],Bt=r[9],Rt=r[10],St=r[11],mt=r[12],Kt=r[13],er=r[14],_r=r[15];return Math.abs(s-Te)<=ue*Math.max(1,Math.abs(s),Math.abs(Te))&&Math.abs(d-pe)<=ue*Math.max(1,Math.abs(d),Math.abs(pe))&&Math.abs(g-ye)<=ue*Math.max(1,Math.abs(g),Math.abs(ye))&&Math.abs(_-De)<=ue*Math.max(1,Math.abs(_),Math.abs(De))&&Math.abs(b-je)<=ue*Math.max(1,Math.abs(b),Math.abs(je))&&Math.abs(C-ot)<=ue*Math.max(1,Math.abs(C),Math.abs(ot))&&Math.abs(E-xt)<=ue*Math.max(1,Math.abs(E),Math.abs(xt))&&Math.abs(z-wt)<=ue*Math.max(1,Math.abs(z),Math.abs(wt))&&Math.abs(F-It)<=ue*Math.max(1,Math.abs(F),Math.abs(It))&&Math.abs(B-Bt)<=ue*Math.max(1,Math.abs(B),Math.abs(Bt))&&Math.abs(W-Rt)<=ue*Math.max(1,Math.abs(W),Math.abs(Rt))&&Math.abs(X-St)<=ue*Math.max(1,Math.abs(X),Math.abs(St))&&Math.abs(te-mt)<=ue*Math.max(1,Math.abs(te),Math.abs(mt))&&Math.abs(re-Kt)<=ue*Math.max(1,Math.abs(re),Math.abs(Kt))&&Math.abs(le-er)<=ue*Math.max(1,Math.abs(le),Math.abs(er))&&Math.abs(me-_r)<=ue*Math.max(1,Math.abs(me),Math.abs(_r))},f.cl=function(l,r){return l[0]=r[0],l[1]=r[1],l[2]=r[2],l[3]=r[3],l[4]=r[4],l[5]=r[5],l[6]=r[6],l[7]=r[7],l[8]=r[8],l[9]=r[9],l[10]=r[10],l[11]=r[11],l[12]=r[12],l[13]=r[13],l[14]=r[14],l[15]=r[15],l},f.cm=l=>l.type==="symbol",f.cn=l=>l.type==="circle",f.co=l=>l.type==="heatmap",f.cp=l=>l.type==="line",f.cq=l=>l.type==="fill",f.cr=l=>l.type==="fill-extrusion",f.cs=l=>l.type==="hillshade",f.ct=l=>l.type==="color-relief",f.cu=l=>l.type==="background",f.cv=l=>l.type==="custom",f.cw=Tt,f.cx=function(l,r,s){if(r<=0)return l;const d=1/r;return s===void 0||Math.abs(s)<1e-10?Math.round(l*d)/d:(s>0?Math.ceil(l*d-1e-9):Math.floor(l*d+1e-10))/d},f.cy=function(l,r,s){const d=Ge(r.x-s.x,r.y-s.y),g=Ge(l.x-s.x,l.y-s.y);var _,b;return Tn(Math.atan2(d[0]*g[1]-d[1]*g[0],(_=d)[0]*(b=g)[0]+_[1]*b[1]))},f.cz=Ct,f.d=Je,f.d0=function(l,r,s,d,g){return o(this,void 0,void 0,function*(){if(se())try{return yield Rr(l,r,s,d,g)}catch{}return function(_,b,C,E,z){const F=_.width,B=_.height;Br&&Wr||(Br=new OffscreenCanvas(F,B),Wr=Br.getContext("2d",{willReadFrequently:!0})),Br.width=F,Br.height=B,Wr.drawImage(_,0,0,F,B);const W=Wr.getImageData(b,C,E,z);return Wr.clearRect(0,0,F,B),W.data}(l,r,s,d,g)})},f.d1=gy,f.d2=P,f.d3=class{constructor(l,r){this.layers={[Ry]:this},this.name=Ry,this.version=r?r.version:1,this.extent=r?r.extent:4096,this.length=l.length,this.features=l}feature(l){return new qD(this.features[l],this.extent)}},f.d4=Tc,f.d5=Ua,f.e=nt,f.f=l=>o(void 0,void 0,void 0,function*(){if(l.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(l)],{type:"image/png"});try{return createImageBitmap(r)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),f.g=ee,f.h=l=>new Promise((r,s)=>{const d=new Image;d.onload=()=>{r(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame(()=>{d.src=Ir})},d.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(l)],{type:"image/png"});d.src=l.byteLength?URL.createObjectURL(g):Ir}),f.i=qt,f.j=(l,r)=>Be(nt(l,{type:"json"}),r),f.k=gt,f.l=Ke,f.m=Be,f.n=(l,r)=>Be(nt(l,{type:"arrayBuffer"}),r),f.o=function(l){return new p(l).readFields(Lt,[])},f.p=yr,f.q=function(l){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(l))},f.r=rf,f.s=sn,f.t=wi,f.u=Ae,f.v=ca,f.w=Tr,f.x=Bl,f.y=zl,f.z=Eu}),c("worker",["./shared"],function(f){class o{constructor(ee,ie){this.keyCache={},ee&&this.replace(ee,ie)}replace(ee,ie){this._layerConfigs={},this._layers={},this.update(ee,[],ie)}update(ee,ie,ce){for(const Be of ee){this._layerConfigs[Be.id]=Be;const Je=this._layers[Be.id]=f.bT(Be,ce);Je._featureFilter=f.aj(Je.filter,ce),this.keyCache[Be.id]&&delete this.keyCache[Be.id]}for(const Be of ie)delete this.keyCache[Be],delete this._layerConfigs[Be],delete this._layers[Be];this.familiesBySource={};const Ce=f.cM(Object.values(this._layerConfigs),this.keyCache);for(const Be of Ce){const Je=Be.map(Ae=>this._layers[Ae.id]),Ye=Je[0];if(Ye.isHidden())continue;const Ue=Ye.source||"";let Ke=this.familiesBySource[Ue];Ke||(Ke=this.familiesBySource[Ue]={});const gt=Ye.sourceLayer||f.ai;let et=Ke[gt];et||(et=Ke[gt]=[]),et.push(Je)}}}class x{constructor(ee){const ie={},ce=[];for(const Ye in ee){const Ue=ee[Ye],Ke=ie[Ye]={};for(const gt in Ue){const et=Ue[+gt];if(!et||et.bitmap.width===0||et.bitmap.height===0)continue;const Ae={x:0,y:0,w:et.bitmap.width+2,h:et.bitmap.height+2};ce.push(Ae),Ke[gt]={rect:Ae,metrics:et.metrics}}}const{w:Ce,h:Be}=f.p(ce),Je=new f.r({width:Ce||1,height:Be||1});for(const Ye in ee){const Ue=ee[Ye];for(const Ke in Ue){const gt=Ue[+Ke];if(!gt||gt.bitmap.width===0||gt.bitmap.height===0)continue;const et=ie[Ye][Ke].rect;f.r.copy(gt.bitmap,Je,{x:0,y:0},{x:et.x+1,y:et.y+1},gt.bitmap)}}this.image=Je,this.positions=ie}}f.cN("GlyphAtlas",x);class P{constructor(ee){this.tileID=new f.a2(ee.tileID.overscaledZ,ee.tileID.wrap,ee.tileID.canonical.z,ee.tileID.canonical.x,ee.tileID.canonical.y),this.uid=ee.uid,this.zoom=ee.zoom,this.pixelRatio=ee.pixelRatio,this.tileSize=ee.tileSize,this.source=ee.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ee.showCollisionBoxes,this.collectResourceTiming=!!ee.collectResourceTiming,this.returnDependencies=!!ee.returnDependencies,this.promoteId=ee.promoteId,this.inFlightDependencies=[]}parse(ee,ie,ce,Ce,Be){return f._(this,void 0,void 0,function*(){this.status="parsing",this.data=ee,this.collisionBoxArray=new f.ag;const Je=new f.cO(Object.keys(ee.layers).sort()),Ye=new f.cP(this.tileID,this.promoteId);Ye.bucketLayerIDs=[];const Ue={},Ke={featureIndex:Ye,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:ce,subdivisionGranularity:Be},gt=ie.familiesBySource[this.source];for(const Fr in gt){const en=ee.layers[Fr];if(!en)continue;en.version===1&&f.w(`Vector tile source "${this.source}" layer "${Fr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Io=Je.encode(Fr),Ti=[];for(let Ot=0;Ot<en.length;Ot++){const it=en.feature(Ot),tt=Ye.getId(it,Fr);Ti.push({feature:it,id:tt,index:Ot,sourceLayerIndex:Io})}for(const Ot of gt[Fr]){const it=Ot[0];it.source!==this.source&&f.w(`layer.source = ${it.source} does not equal this.source = ${this.source}`),it.isHidden(this.zoom,!0)||(I(Ot,this.zoom,ce),(Ue[it.id]=it.createBucket({index:Ye.bucketLayerIDs.length,layers:Ot,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Io,sourceID:this.source})).populate(Ti,Ke,this.tileID.canonical),Ye.bucketLayerIDs.push(Ot.map(tt=>tt.id)))}}const et=f.bY(Ke.glyphDependencies,Fr=>Object.keys(Fr).map(Number));this.inFlightDependencies.forEach(Fr=>Fr?.abort()),this.inFlightDependencies=[];let Ae=Promise.resolve({});if(Object.keys(et).length){const Fr=new AbortController;this.inFlightDependencies.push(Fr),Ae=Ce.sendAsync({type:"GG",data:{stacks:et,source:this.source,tileID:this.tileID,type:"glyphs"}},Fr)}const Ut=Object.keys(Ke.iconDependencies);let mr=Promise.resolve({});if(Ut.length){const Fr=new AbortController;this.inFlightDependencies.push(Fr),mr=Ce.sendAsync({type:"GI",data:{icons:Ut,source:this.source,tileID:this.tileID,type:"icons"}},Fr)}const Zt=Object.keys(Ke.patternDependencies);let Yt=Promise.resolve({});if(Zt.length){const Fr=new AbortController;this.inFlightDependencies.push(Fr),Yt=Ce.sendAsync({type:"GI",data:{icons:Zt,source:this.source,tileID:this.tileID,type:"patterns"}},Fr)}const rr=Ke.dashDependencies;let vr=Promise.resolve({});if(Object.keys(rr).length){const Fr=new AbortController;this.inFlightDependencies.push(Fr),vr=Ce.sendAsync({type:"GDA",data:{dashes:rr}},Fr)}const[kr,nn,Xr,wn]=yield Promise.all([Ae,mr,Yt,vr]),on=new x(kr),Mt=new f.cQ(nn,Xr);for(const Fr in Ue){const en=Ue[Fr];en instanceof f.ah?(I(en.layers,this.zoom,ce),f.cR({bucket:en,glyphMap:kr,glyphPositions:on.positions,imageMap:nn,imagePositions:Mt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Ke.subdivisionGranularity})):en.hasDependencies&&(en instanceof f.cS||en instanceof f.cT||en instanceof f.cU)&&(I(en.layers,this.zoom,ce),en.addFeatures(Ke,this.tileID.canonical,Mt.patternPositions,wn))}return this.status="done",{buckets:Object.values(Ue).filter(Fr=>!Fr.isEmpty()),featureIndex:Ye,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:on.image,imageAtlas:Mt,dashPositions:wn,glyphMap:this.returnDependencies?kr:null,iconMap:this.returnDependencies?nn:null,glyphPositions:this.returnDependencies?on.positions:null}})}}function I(Ne,ee,ie){const ce=new f.H(ee);for(const Ce of Ne)Ce.recalculate(ce,ie)}class R{constructor(){this.loading={},this.loaded={},this.parsing={}}startLoading(ee,ie){this.loading[ee]=ie}finishLoading(ee){delete this.loading[ee]}abort(ee){const ie=this.loading[ee];ie?.abort&&(ie.abort.abort(),delete this.loading[ee])}setParsing(ee,ie){this.parsing[ee]=ie}consumeParsing(ee){const ie=this.parsing[ee];if(ie)return delete this.parsing[ee],ie}clearParsing(ee){delete this.parsing[ee]}markLoaded(ee,ie){this.loaded[ee]=ie}getLoaded(ee){const ie=this.loaded[ee];if(ie)return ie}removeLoaded(ee){delete this.loaded[ee]}clearLoaded(){this.loaded={}}}class D{constructor(ee,ie,ce,Ce,Be){this.type=ee,this.properties=ce||{},this.extent=Be,this.pointsArray=ie,this.id=Ce}loadGeometry(){return this.pointsArray.map(ee=>ee.map(ie=>new f.P(ie.x,ie.y)))}}class ${constructor(ee,ie,ce){this.version=2,this._myFeatures=ee,this.name=ie,this.length=ee.length,this.extent=ce}feature(ee){return this._myFeatures[ee]}}class G{constructor(){this.layers={}}addLayer(ee){this.layers[ee.name]=ee}}function j(Ne){let ee=f.cV(Ne);return ee.byteOffset===0&&ee.byteLength===ee.buffer.byteLength||(ee=new Uint8Array(ee)),{vectorTile:Ne,rawData:ee.buffer}}function V(Ne,ee,ie){const{extent:ce}=Ne,Ce=Math.pow(2,ie.z-ee.z),Be=(ie.x-ee.x*Ce)*ce,Je=(ie.y-ee.y*Ce)*ce,Ye=[];for(let Ue=0;Ue<Ne.length;Ue++){const Ke=Ne.feature(Ue);let gt=Ke.loadGeometry();for(const Ae of gt)for(const Ut of Ae)Ut.x=Ut.x*Ce-Be,Ut.y=Ut.y*Ce-Je;const et=128;gt=f.cW(gt,Ke.type,-et,-et,ce+et,ce+et),gt.length!==0&&Ye.push(new D(Ke.type,gt,Ke.properties,Ke.id,ce))}return new $(Ye,Ne.name,ce)}class se{constructor(ee,ie,ce){this.actor=ee,this.layerIndex=ie,this.availableImages=ce,this.tileState=new R,this.overzoomedTileResultCache=new f.cX(1e3)}loadVectorTile(ee,ie){return f._(this,void 0,void 0,function*(){const ce=yield f.n(ee.request,ie);try{return{vectorTile:ee.encoding!=="mlt"?new f.cY(new f.cZ(ce.data)):new f.c_(ce.data),rawData:ce.data,cacheControl:ce.cacheControl,expires:ce.expires}}catch(Ce){const Be=new Uint8Array(ce.data);let Je=`Unable to parse the tile at ${ee.request.url}, `;throw Je+=Be[0]===31&&Be[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ce.message}`,new Error(Je)}})}loadTile(ee){return f._(this,void 0,void 0,function*(){const{uid:ie,overzoomParameters:ce}=ee;ce&&(ee.request=ce.overzoomRequest);const Ce=this._startRequestTiming(ee),Be=new P(ee);this.tileState.startLoading(ie,Be);const Je=new AbortController;Be.abort=Je;try{const Ye=yield this.loadVectorTile(ee,Je);if(this.tileState.finishLoading(ie),!Ye)return null;let{vectorTile:Ue,rawData:Ke}=Ye;ce&&({vectorTile:Ue,rawData:Ke}=this._getOverzoomTile(ee,Ye.vectorTile));const gt=this._getExpiryData(Ye),et=this._finishRequestTiming(Ce);Be.vectorTile=Ue,this.tileState.markLoaded(ie,Be);const Ae={rawData:Ke,cacheControl:gt,resourceTiming:et};this.tileState.setParsing(ie,Ae);try{return yield this._parseWorkerTile(Be,ee,Ae)}finally{this.tileState.clearParsing(ie)}}catch(Ye){throw this.tileState.finishLoading(ie),Be.status="done",this.tileState.markLoaded(ie,Be),Ye}})}_parseWorkerTile(ee,ie,ce){return f._(this,void 0,void 0,function*(){let Ce=yield ee.parse(ee.vectorTile,this.layerIndex,this.availableImages,this.actor,ie.subdivisionGranularity);if(ce){const{rawData:Be,cacheControl:Je,resourceTiming:Ye}=ce;Ce=f.e({rawTileData:Be.slice(0),encoding:ie.encoding},Ce,Je,Ye)}return Ce})}_getExpiryData(ee){const{expires:ie,cacheControl:ce}=ee,Ce={};return ie&&(Ce.expires=ie),ce&&(Ce.cacheControl=ce),Ce}_startRequestTiming(ee){var ie;if(!((ie=ee.request)===null||ie===void 0)&&ie.collectResourceTiming)return new f.c$(ee.request.url)}_finishRequestTiming(ee){const ie=ee?.finish();return ie?{resourceTiming:JSON.parse(JSON.stringify(ie))}:{}}_getOverzoomTile(ee,ie){const{tileID:ce,source:Ce,overzoomParameters:Be}=ee,{maxZoomTileID:Je}=Be,Ye=`${Je.key}_${ce.key}`,Ue=this.overzoomedTileResultCache.get(Ye);if(Ue)return Ue;const Ke=new G,gt=this.layerIndex.familiesBySource[Ce];for(const Ae in gt){const Ut=ie.layers[Ae];if(!Ut)continue;const mr=V(Ut,Je,ce.canonical);mr.length>0&&Ke.addLayer(mr)}const et=j(Ke);return this.overzoomedTileResultCache.set(Ye,et),et}reloadTile(ee){return f._(this,void 0,void 0,function*(){const ie=ee.uid,ce=this.tileState.getLoaded(ie);if(!ce)throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");if(ce.showCollisionBoxes=ee.showCollisionBoxes,ce.status==="parsing"){const Ce=this.tileState.consumeParsing(ie);return yield this._parseWorkerTile(ce,ee,Ce)}if(ce.status==="done"&&ce.vectorTile)return yield this._parseWorkerTile(ce,ee)})}abortTile(ee){return f._(this,void 0,void 0,function*(){this.tileState.abort(ee.uid)})}removeTile(ee){return f._(this,void 0,void 0,function*(){this.tileState.removeLoaded(ee.uid)})}}class ue{constructor(){this.loaded={}}loadTile(ee){return f._(this,void 0,void 0,function*(){const{uid:ie,encoding:ce,rawImageData:Ce,redFactor:Be,greenFactor:Je,blueFactor:Ye,baseShift:Ue}=ee,Ke=Ce.width+2,gt=Ce.height+2,et=f.b(Ce)?new f.R({width:Ke,height:gt},yield f.d0(Ce,-1,-1,Ke,gt)):Ce,Ae=new f.d1(ie,et,ce,Be,Je,Ye,Ue);return this.loaded=this.loaded||{},this.loaded[ie]=Ae,Ae})}removeTile(ee){const ie=this.loaded,ce=ee.uid;ie&&ie[ce]&&delete ie[ce]}}var Q,de,oe=function(){if(de)return Q;function Ne(ie,ce){if(ie.length!==0){ee(ie[0],ce);for(var Ce=1;Ce<ie.length;Ce++)ee(ie[Ce],!ce)}}function ee(ie,ce){for(var Ce=0,Be=0,Je=0,Ye=ie.length,Ue=Ye-1;Je<Ye;Ue=Je++){var Ke=(ie[Je][0]-ie[Ue][0])*(ie[Ue][1]+ie[Je][1]),gt=Ce+Ke;Be+=Math.abs(Ce)>=Math.abs(Ke)?Ce-gt+Ke:Ke-gt+Ce,Ce=gt}Ce+Be>=0!=!!ce&&ie.reverse()}return de=1,Q=function ie(ce,Ce){var Be,Je=ce&&ce.type;if(Je==="FeatureCollection")for(Be=0;Be<ce.features.length;Be++)ie(ce.features[Be],Ce);else if(Je==="GeometryCollection")for(Be=0;Be<ce.geometries.length;Be++)ie(ce.geometries[Be],Ce);else if(Je==="Feature")ie(ce.geometry,Ce);else if(Je==="Polygon")Ne(ce.coordinates,Ce);else if(Je==="MultiPolygon")for(Be=0;Be<ce.coordinates.length;Be++)Ne(ce.coordinates[Be],Ce);return ce}}(),be=f.d2(oe);const we={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ne=>Ne},Ie=Math.fround||(ke=new Float32Array(1),Ne=>(ke[0]=+Ne,ke[0]));var ke;class ae{constructor(ee){this.options=Object.assign(Object.create(we),ee),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ee){const{log:ie,minZoom:ce,maxZoom:Ce}=this.options;ie&&console.time("total time");const Be=`prepare ${ee.length} points`;ie&&console.time(Be),this.points=ee;const Je=[];for(let Ue=0;Ue<ee.length;Ue++){const Ke=ee[Ue];if(!Ke.geometry)continue;const[gt,et]=Ke.geometry.coordinates,Ae=Ie(Qe(gt)),Ut=Ie(vt(et));Je.push(Ae,Ut,1/0,Ue,-1,1),this.options.reduce&&Je.push(0)}let Ye=this.trees[Ce+1]=this._createTree(Je);ie&&console.timeEnd(Be);for(let Ue=Ce;Ue>=ce;Ue--){const Ke=+Date.now();Ye=this.trees[Ue]=this._createTree(this._cluster(Ye,Ue)),ie&&console.log("z%d: %d clusters in %dms",Ue,Ye.numItems,+Date.now()-Ke)}return ie&&console.timeEnd("total time"),this}getClusters(ee,ie){let ce=((ee[0]+180)%360+360)%360-180;const Ce=Math.max(-90,Math.min(90,ee[1]));let Be=ee[2]===180?180:((ee[2]+180)%360+360)%360-180;const Je=Math.max(-90,Math.min(90,ee[3]));if(ee[2]-ee[0]>=360)ce=-180,Be=180;else if(ce>Be){const et=this.getClusters([ce,Ce,180,Je],ie),Ae=this.getClusters([-180,Ce,Be,Je],ie);return et.concat(Ae)}const Ye=this.trees[this._limitZoom(ie)],Ue=Ye.range(Qe(ce),vt(Je),Qe(Be),vt(Ce)),Ke=Ye.data,gt=[];for(const et of Ue){const Ae=this.stride*et;gt.push(Ke[Ae+5]>1?Ee(Ke,Ae,this.clusterProps):this.points[Ke[Ae+3]])}return gt}getChildren(ee){const ie=this._getOriginId(ee),ce=this._getOriginZoom(ee),Ce="No cluster with the specified id.",Be=this.trees[ce];if(!Be)throw new Error(Ce);const Je=Be.data;if(ie*this.stride>=Je.length)throw new Error(Ce);const Ye=this.options.radius/(this.options.extent*Math.pow(2,ce-1)),Ue=Be.within(Je[ie*this.stride],Je[ie*this.stride+1],Ye),Ke=[];for(const gt of Ue){const et=gt*this.stride;Je[et+4]===ee&&Ke.push(Je[et+5]>1?Ee(Je,et,this.clusterProps):this.points[Je[et+3]])}if(Ke.length===0)throw new Error(Ce);return Ke}getLeaves(ee,ie,ce){const Ce=[];return this._appendLeaves(Ce,ee,ie=ie||10,ce=ce||0,0),Ce}getTile(ee,ie,ce){const Ce=this.trees[this._limitZoom(ee)],Be=Math.pow(2,ee),{extent:Je,radius:Ye}=this.options,Ue=Ye/Je,Ke=(ce-Ue)/Be,gt=(ce+1+Ue)/Be,et={features:[]};return this._addTileFeatures(Ce.range((ie-Ue)/Be,Ke,(ie+1+Ue)/Be,gt),Ce.data,ie,ce,Be,et),ie===0&&this._addTileFeatures(Ce.range(1-Ue/Be,Ke,1,gt),Ce.data,Be,ce,Be,et),ie===Be-1&&this._addTileFeatures(Ce.range(0,Ke,Ue/Be,gt),Ce.data,-1,ce,Be,et),et.features.length?et:null}getClusterExpansionZoom(ee){let ie=this._getOriginZoom(ee)-1;for(;ie<=this.options.maxZoom;){const ce=this.getChildren(ee);if(ie++,ce.length!==1)break;ee=ce[0].properties.cluster_id}return ie}_appendLeaves(ee,ie,ce,Ce,Be){const Je=this.getChildren(ie);for(const Ye of Je){const Ue=Ye.properties;if(Ue&&Ue.cluster?Be+Ue.point_count<=Ce?Be+=Ue.point_count:Be=this._appendLeaves(ee,Ue.cluster_id,ce,Ce,Be):Be<Ce?Be++:ee.push(Ye),ee.length===ce)break}return Be}_createTree(ee){const ie=new f.aT(ee.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ce=0;ce<ee.length;ce+=this.stride)ie.add(ee[ce],ee[ce+1]);return ie.finish(),ie.data=ee,ie}_addTileFeatures(ee,ie,ce,Ce,Be,Je){for(const Ye of ee){const Ue=Ye*this.stride,Ke=ie[Ue+5]>1;let gt,et,Ae;if(Ke)gt=Ze(ie,Ue,this.clusterProps),et=ie[Ue],Ae=ie[Ue+1];else{const Zt=this.points[ie[Ue+3]];gt=Zt.properties;const[Yt,rr]=Zt.geometry.coordinates;et=Qe(Yt),Ae=vt(rr)}const Ut={type:1,geometry:[[Math.round(this.options.extent*(et*Be-ce)),Math.round(this.options.extent*(Ae*Be-Ce))]],tags:gt};let mr;mr=Ke||this.options.generateId?ie[Ue+3]:this.points[ie[Ue+3]].id,mr!==void 0&&(Ut.id=mr),Je.features.push(Ut)}}_limitZoom(ee){return Math.max(this.options.minZoom,Math.min(Math.floor(+ee),this.options.maxZoom+1))}_cluster(ee,ie){const{radius:ce,extent:Ce,reduce:Be,minPoints:Je}=this.options,Ye=ce/(Ce*Math.pow(2,ie)),Ue=ee.data,Ke=[],gt=this.stride;for(let et=0;et<Ue.length;et+=gt){if(Ue[et+2]<=ie)continue;Ue[et+2]=ie;const Ae=Ue[et],Ut=Ue[et+1],mr=ee.within(Ue[et],Ue[et+1],Ye),Zt=Ue[et+5];let Yt=Zt;for(const rr of mr){const vr=rr*gt;Ue[vr+2]>ie&&(Yt+=Ue[vr+5])}if(Yt>Zt&&Yt>=Je){let rr,vr=Ae*Zt,kr=Ut*Zt,nn=-1;const Xr=(et/gt<<5)+(ie+1)+this.points.length;for(const wn of mr){const on=wn*gt;if(Ue[on+2]<=ie)continue;Ue[on+2]=ie;const Mt=Ue[on+5];vr+=Ue[on]*Mt,kr+=Ue[on+1]*Mt,Ue[on+4]=Xr,Be&&(rr||(rr=this._map(Ue,et,!0),nn=this.clusterProps.length,this.clusterProps.push(rr)),Be(rr,this._map(Ue,on)))}Ue[et+4]=Xr,Ke.push(vr/Yt,kr/Yt,1/0,Xr,-1,Yt),Be&&Ke.push(nn)}else{for(let rr=0;rr<gt;rr++)Ke.push(Ue[et+rr]);if(Yt>1)for(const rr of mr){const vr=rr*gt;if(!(Ue[vr+2]<=ie)){Ue[vr+2]=ie;for(let kr=0;kr<gt;kr++)Ke.push(Ue[vr+kr])}}}}return Ke}_getOriginId(ee){return ee-this.points.length>>5}_getOriginZoom(ee){return(ee-this.points.length)%32}_map(ee,ie,ce){if(ee[ie+5]>1){const Je=this.clusterProps[ee[ie+6]];return ce?Object.assign({},Je):Je}const Ce=this.points[ee[ie+3]].properties,Be=this.options.map(Ce);return ce&&Be===Ce?Object.assign({},Be):Be}}function Ee(Ne,ee,ie){return{type:"Feature",id:Ne[ee+3],properties:Ze(Ne,ee,ie),geometry:{type:"Point",coordinates:[(ce=Ne[ee],360*(ce-.5)),st(Ne[ee+1])]}};var ce}function Ze(Ne,ee,ie){const ce=Ne[ee+5],Ce=ce>=1e4?`${Math.round(ce/1e3)}k`:ce>=1e3?Math.round(ce/100)/10+"k":ce,Be=Ne[ee+6],Je=Be===-1?{}:Object.assign({},ie[Be]);return Object.assign(Je,{cluster:!0,cluster_id:Ne[ee+3],point_count:ce,point_count_abbreviated:Ce})}function Qe(Ne){return Ne/360+.5}function vt(Ne){const ee=Math.sin(Ne*Math.PI/180),ie=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return ie<0?0:ie>1?1:ie}function st(Ne){const ee=(180-360*Ne)*Math.PI/180;return 360*Math.atan(Math.exp(ee))/Math.PI-90}function He(Ne,ee,ie,ce){let Ce=ce;const Be=ee+(ie-ee>>1);let Je,Ye=ie-ee;const Ue=Ne[ee],Ke=Ne[ee+1],gt=Ne[ie],et=Ne[ie+1];for(let Ae=ee+3;Ae<ie;Ae+=3){const Ut=rt(Ne[Ae],Ne[Ae+1],Ue,Ke,gt,et);if(Ut>Ce)Je=Ae,Ce=Ut;else if(Ut===Ce){const mr=Math.abs(Ae-Be);mr<Ye&&(Je=Ae,Ye=mr)}}Ce>ce&&(Je-ee>3&&He(Ne,ee,Je,ce),Ne[Je+2]=Ce,ie-Je>3&&He(Ne,Je,ie,ce))}function rt(Ne,ee,ie,ce,Ce,Be){let Je=Ce-ie,Ye=Be-ce;if(Je!==0||Ye!==0){const Ue=((Ne-ie)*Je+(ee-ce)*Ye)/(Je*Je+Ye*Ye);Ue>1?(ie=Ce,ce=Be):Ue>0&&(ie+=Je*Ue,ce+=Ye*Ue)}return Je=Ne-ie,Ye=ee-ce,Je*Je+Ye*Ye}function Ge(Ne,ee,ie,ce){const Ce={type:ee,geom:ie},Be={id:Ne??null,type:Ce.type,geometry:Ce.geom,tags:ce,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};switch(Ce.type){case"Point":case"MultiPoint":case"LineString":Ve(Be,Ce.geom);break;case"Polygon":Ve(Be,Ce.geom[0]);break;case"MultiLineString":for(const Je of Ce.geom)Ve(Be,Je);break;case"MultiPolygon":for(const Je of Ce.geom)Ve(Be,Je[0])}return Be}function Ve(Ne,ee){for(let ie=0;ie<ee.length;ie+=3)Ne.minX=Math.min(Ne.minX,ee[ie]),Ne.minY=Math.min(Ne.minY,ee[ie+1]),Ne.maxX=Math.max(Ne.maxX,ee[ie]),Ne.maxY=Math.max(Ne.maxY,ee[ie+1])}function ut(Ne,ee){const ie=[];switch(Ne.type){case"FeatureCollection":for(let ce=0;ce<Ne.features.length;ce++)ve(ie,Ne.features[ce],ee,ce);break;case"Feature":ve(ie,Ne,ee);break;default:ve(ie,{geometry:Ne,properties:void 0},ee)}return ie}function ve(Ne,ee,ie,ce){if(!ee.geometry)return;if(ee.geometry.type==="GeometryCollection"){for(const Ye of ee.geometry.geometries)ve(Ne,{id:ee.id,geometry:Ye,properties:ee.properties},ie,ce);return}if(!ee.geometry.coordinates?.length)return;const Be=Math.pow(ie.tolerance/((1<<ie.maxZoom)*ie.extent),2);let Je=ee.id;switch(ie.promoteId?Je=ee.properties?.[ie.promoteId]:ie.generateId&&(Je=ce||0),ee.geometry.type){case"Point":{const Ye=[];return Fe(ee.geometry.coordinates,Ye),void Ne.push(Ge(Je,ee.geometry.type,Ye,ee.properties))}case"MultiPoint":{const Ye=[];for(const Ue of ee.geometry.coordinates)Fe(Ue,Ye);return void Ne.push(Ge(Je,ee.geometry.type,Ye,ee.properties))}case"LineString":{const Ye=[];return pt(ee.geometry.coordinates,Ye,Be,!1),void Ne.push(Ge(Je,ee.geometry.type,Ye,ee.properties))}case"MultiLineString":{if(ie.lineMetrics){for(const Ue of ee.geometry.coordinates){const Ke=[];pt(Ue,Ke,Be,!1),Ne.push(Ge(Je,"LineString",Ke,ee.properties))}return}const Ye=[];return Tt(ee.geometry.coordinates,Ye,Be,!1),void Ne.push(Ge(Je,ee.geometry.type,Ye,ee.properties))}case"Polygon":{const Ye=[];return Tt(ee.geometry.coordinates,Ye,Be,!0),void Ne.push(Ge(Je,ee.geometry.type,Ye,ee.properties))}case"MultiPolygon":{const Ye=[];for(const Ue of ee.geometry.coordinates){const Ke=[];Tt(Ue,Ke,Be,!0),Ye.push(Ke)}return void Ne.push(Ge(Je,ee.geometry.type,Ye,ee.properties))}default:throw new Error("Input data is not a valid GeoJSON object.")}}function Fe(Ne,ee){ee.push(Ct(Ne[0]),_t(Ne[1]),0)}function pt(Ne,ee,ie,ce){let Ce,Be,Je=0;for(let Ue=0;Ue<Ne.length;Ue++){const Ke=Ct(Ne[Ue][0]),gt=_t(Ne[Ue][1]);ee.push(Ke,gt,0),Ue>0&&(Je+=ce?(Ce*gt-Ke*Be)/2:Math.sqrt(Math.pow(Ke-Ce,2)+Math.pow(gt-Be,2))),Ce=Ke,Be=gt}const Ye=ee.length-3;ee[2]=1,ie>0&&He(ee,0,Ye,ie),ee[Ye+2]=1,ee.size=Math.abs(Je),ee.start=0,ee.end=ee.size}function Tt(Ne,ee,ie,ce){for(let Ce=0;Ce<Ne.length;Ce++){const Be=[];pt(Ne[Ce],Be,ie,ce),ee.push(Be)}}function Ct(Ne){return Ne/360+.5}function _t(Ne){const ee=Math.sin(Ne*Math.PI/180),ie=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return ie<0?0:ie>1?1:ie}function bt(Ne,ee,ie,ce,Ce,Be,Je,Ye){if(ce/=ee,Be>=(ie/=ee)&&Je<ce)return Ne;if(Je<ie||Be>=ce)return null;const Ue=[];for(const Ke of Ne){const gt=Ce===0?Ke.minX:Ke.minY,et=Ce===0?Ke.maxX:Ke.maxY;if(gt>=ie&&et<ce)Ue.push(Ke);else if(!(et<ie||gt>=ce))switch(Ke.type){case"Point":case"MultiPoint":{const Ae=[];if(nt(Ke.geometry,Ae,ie,ce,Ce),!Ae.length)continue;Ue.push(Ge(Ke.id,Ae.length===3?"Point":"MultiPoint",Ae,Ke.tags));continue}case"LineString":{const Ae=[];if(kt(Ke.geometry,Ae,ie,ce,Ce,!1,Ye.lineMetrics),!Ae.length)continue;if(Ye.lineMetrics){for(const Ut of Ae)Ue.push(Ge(Ke.id,Ke.type,Ut,Ke.tags));continue}if(Ae.length>1){Ue.push(Ge(Ke.id,"MultiLineString",Ae,Ke.tags));continue}Ue.push(Ge(Ke.id,Ke.type,Ae[0],Ke.tags));continue}case"MultiLineString":{const Ae=[];if(dr(Ke.geometry,Ae,ie,ce,Ce,!1),!Ae.length)continue;if(Ae.length===1){Ue.push(Ge(Ke.id,"LineString",Ae[0],Ke.tags));continue}Ue.push(Ge(Ke.id,Ke.type,Ae,Ke.tags));continue}case"Polygon":{const Ae=[];if(dr(Ke.geometry,Ae,ie,ce,Ce,!0),!Ae.length)continue;Ue.push(Ge(Ke.id,Ke.type,Ae,Ke.tags));continue}case"MultiPolygon":{const Ae=[];for(const Ut of Ke.geometry){const mr=[];dr(Ut,mr,ie,ce,Ce,!0),mr.length&&Ae.push(mr)}if(!Ae.length)continue;Ue.push(Ge(Ke.id,Ke.type,Ae,Ke.tags));continue}}}return Ue.length?Ue:null}function nt(Ne,ee,ie,ce,Ce){for(let Be=0;Be<Ne.length;Be+=3){const Je=Ne[Be+Ce];Je>=ie&&Je<=ce&&ir(ee,Ne[Be],Ne[Be+1],Ne[Be+2])}}function kt(Ne,ee,ie,ce,Ce,Be,Je){let Ye=At(Ne);const Ue=Ce===0?Gr:Tr;let Ke,gt,et=Ne.start;for(let Yt=0;Yt<Ne.length-3;Yt+=3){const rr=Ne[Yt],vr=Ne[Yt+1],kr=Ne[Yt+2],nn=Ne[Yt+3],Xr=Ne[Yt+4],wn=Ce===0?rr:vr,on=Ce===0?nn:Xr;let Mt=!1;Je&&(Ke=Math.sqrt(Math.pow(rr-nn,2)+Math.pow(vr-Xr,2))),wn<ie?on>ie&&(gt=Ue(Ye,rr,vr,nn,Xr,ie),Je&&(Ye.start=et+Ke*gt)):wn>ce?on<ce&&(gt=Ue(Ye,rr,vr,nn,Xr,ce),Je&&(Ye.start=et+Ke*gt)):ir(Ye,rr,vr,kr),on<ie&&wn>=ie&&(gt=Ue(Ye,rr,vr,nn,Xr,ie),Mt=!0),on>ce&&wn<=ce&&(gt=Ue(Ye,rr,vr,nn,Xr,ce),Mt=!0),!Be&&Mt&&(Je&&(Ye.end=et+Ke*gt),ee.push(Ye),Ye=At(Ne)),Je&&(et+=Ke)}let Ae=Ne.length-3;const Ut=Ne[Ae],mr=Ne[Ae+1],Zt=Ce===0?Ut:mr;Zt>=ie&&Zt<=ce&&ir(Ye,Ut,mr,Ne[Ae+2]),Ae=Ye.length-3,Be&&Ae>=3&&(Ye[Ae]!==Ye[0]||Ye[Ae+1]!==Ye[1])&&ir(Ye,Ye[0],Ye[1],Ye[2]),Ye.length&&ee.push(Ye)}function At(Ne){const ee=[];return ee.size=Ne.size,ee.start=Ne.start,ee.end=Ne.end,ee}function dr(Ne,ee,ie,ce,Ce,Be){for(const Je of Ne)kt(Je,ee,ie,ce,Ce,Be,!1)}function ir(Ne,ee,ie,ce){Ne.push(ee,ie,ce)}function Gr(Ne,ee,ie,ce,Ce,Be){const Je=(Be-ee)/(ce-ee);return ir(Ne,Be,ie+(Ce-ie)*Je,1),Je}function Tr(Ne,ee,ie,ce,Ce,Be){const Je=(Be-ie)/(Ce-ie);return ir(Ne,ee+(ce-ee)*Je,Be,1),Je}function or(Ne,ee){const ie=ee.buffer/ee.extent;let ce=Ne;const Ce=bt(Ne,1,-1-ie,ie,0,-1,2,ee),Be=bt(Ne,1,1-ie,2+ie,0,-1,2,ee);return(Ce||Be)&&(ce=bt(Ne,1,-ie,1+ie,0,-1,2,ee)||[],Ce&&(ce=qt(Ce,1).concat(ce)),Be&&(ce=ce.concat(qt(Be,-1)))),ce}function qt(Ne,ee){const ie=[];for(const ce of Ne)switch(ce.type){case"Point":case"MultiPoint":case"LineString":{const Ce=pr(ce.geometry,ee);ie.push(Ge(ce.id,ce.type,Ce,ce.tags));continue}case"MultiLineString":case"Polygon":{const Ce=[];for(const Be of ce.geometry)Ce.push(pr(Be,ee));ie.push(Ge(ce.id,ce.type,Ce,ce.tags));continue}case"MultiPolygon":{const Ce=[];for(const Be of ce.geometry){const Je=[];for(const Ye of Be)Je.push(pr(Ye,ee));Ce.push(Je)}ie.push(Ge(ce.id,ce.type,Ce,ce.tags));continue}}return ie}function pr(Ne,ee){const ie=[];ie.size=Ne.size,Ne.start!==void 0&&(ie.start=Ne.start,ie.end=Ne.end);for(let ce=0;ce<Ne.length;ce+=3)ie.push(Ne[ce]+ee,Ne[ce+1],Ne[ce+2]);return ie}function Xt(Ne,ee){if(Ne.transformed)return Ne;const ie=1<<Ne.z,ce=Ne.x,Ce=Ne.y;for(const Be of Ne.features){if(Be.type===1){const Ye=[];for(let Ue=0;Ue<Be.geometry.length;Ue+=2)Ye.push(Ir(Be.geometry[Ue],Be.geometry[Ue+1],ee,ie,ce,Ce));Be.geometry=Ye;continue}const Je=[];for(const Ye of Be.geometry){const Ue=[];for(let Ke=0;Ke<Ye.length;Ke+=2)Ue.push(Ir(Ye[Ke],Ye[Ke+1],ee,ie,ce,Ce));Je.push(Ue)}Be.geometry=Je}return Ne.transformed=!0,Ne}function Ir(Ne,ee,ie,ce,Ce,Be){return[Math.round(ie*(Ne*ce-Ce)),Math.round(ie*(ee*ce-Be))]}function Rr(Ne,ee,ie,ce,Ce){const Be=ee===Ce.maxZoom?0:Ce.tolerance/((1<<ee)*Ce.extent),Je={features:[],numPoints:0,numSimplified:0,numFeatures:Ne.length,source:null,x:ie,y:ce,z:ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ye of Ne)Br(Je,Ye,Be,Ce);return Je}function Br(Ne,ee,ie,ce){Ne.minX=Math.min(Ne.minX,ee.minX),Ne.minY=Math.min(Ne.minY,ee.minY),Ne.maxX=Math.max(Ne.maxX,ee.maxX),Ne.maxY=Math.max(Ne.maxY,ee.maxY);let Ce,Be=ee.tags||null;switch(ee.type){case"Point":case"MultiPoint":{const Je=[];for(let Ye=0;Ye<ee.geometry.length;Ye+=3)Je.push(ee.geometry[Ye],ee.geometry[Ye+1]),Ne.numPoints++,Ne.numSimplified++;if(!Je.length)return;Ce={type:1,tags:Be,geometry:Je};break}case"LineString":{const Je=[];if(Wr(Je,ee.geometry,Ne,ie,!1,!1),!Je.length)return;if(ce.lineMetrics){Be={};for(const Ye in ee.tags)Be[Ye]=ee.tags[Ye];Be.mapbox_clip_start=ee.geometry.start/ee.geometry.size,Be.mapbox_clip_end=ee.geometry.end/ee.geometry.size}Ce={type:2,tags:Be,geometry:Je};break}case"MultiLineString":case"Polygon":{const Je=[];for(let Ye=0;Ye<ee.geometry.length;Ye++)Wr(Je,ee.geometry[Ye],Ne,ie,ee.type==="Polygon",Ye===0);if(!Je.length)return;Ce={type:ee.type==="Polygon"?3:2,tags:Be,geometry:Je};break}case"MultiPolygon":{const Je=[];for(let Ye=0;Ye<ee.geometry.length;Ye++){const Ue=ee.geometry[Ye];for(let Ke=0;Ke<Ue.length;Ke++)Wr(Je,Ue[Ke],Ne,ie,!0,Ke===0)}if(!Je.length)return;Ce={type:3,tags:Be,geometry:Je};break}}ee.id!==null&&(Ce.id=ee.id),Ne.features.push(Ce)}function Wr(Ne,ee,ie,ce,Ce,Be){const Je=ce*ce;if(ce>0&&ee.size<(Ce?Je:ce))return void(ie.numPoints+=ee.length/3);const Ye=[];for(let Ue=0;Ue<ee.length;Ue+=3)(ce===0||ee[Ue+2]>Je)&&(ie.numSimplified++,Ye.push(ee[Ue],ee[Ue+1])),ie.numPoints++;Ce&&function(Ue,Ke){let gt=0;for(let et=0,Ae=Ue.length,Ut=Ae-2;et<Ae;Ut=et,et+=2)gt+=(Ue[et]-Ue[Ut])*(Ue[et+1]+Ue[Ut+1]);if(gt>0===Ke)for(let et=0,Ae=Ue.length;et<Ae/2;et+=2){const Ut=Ue[et],mr=Ue[et+1];Ue[et]=Ue[Ae-2-et],Ue[et+1]=Ue[Ae-1-et],Ue[Ae-2-et]=Ut,Ue[Ae-1-et]=mr}}(Ye,Be),Ne.push(Ye)}function sn(Ne,ee,ie){const ce=!!ee.newGeometry,Ce=ee.removeAllProperties||ee.removeProperties?.length>0||ee.addOrUpdateProperties?.length>0;if(ce){let Be=ut({type:"FeatureCollection",features:[{type:"Feature",id:Ne.id,geometry:ee.newGeometry,properties:Ce?On(Ne.tags,ee):Ne.tags}]},ie);return Be=or(Be,ie),Be[0]}if(Ce){const Be={...Ne};return Be.tags=On(Be.tags,ee),Be}return null}function On(Ne,ee){if(ee.removeAllProperties)return{};const ie={...Ne||{}};if(ee.removeProperties)for(const ce of ee.removeProperties)delete ie[ce];if(ee.addOrUpdateProperties)for(const{key:ce,value:Ce}of ee.addOrUpdateProperties)ie[ce]=Ce;return ie}const Tn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,updateable:!1,debug:0};class vn{options;tiles;tileCoords;stats={};total=0;source;constructor(ee,ie){const ce=(ie=this.options=Object.assign({},Tn,ie)).debug;if(ce&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ce=ut(ee,ie);this.tiles={},this.tileCoords=[],ce&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ce=or(Ce,ie),Ce.length&&this.splitTile(Ce,0,0,0),ie.updateable&&(this.source=Ce),ce&&(Ce.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ee,ie,ce,Ce,Be,Je,Ye){const Ue=[ee,ie,ce,Ce],Ke=this.options,gt=Ke.debug;for(;Ue.length;){Ce=Ue.pop(),ce=Ue.pop(),ie=Ue.pop(),ee=Ue.pop();const et=1<<ie,Ae=Sr(ie,ce,Ce);let Ut=this.tiles[Ae];if(!Ut&&(gt>1&&console.time("creation"),Ut=this.tiles[Ae]=Rr(ee,ie,ce,Ce,Ke),this.tileCoords.push({z:ie,x:ce,y:Ce,id:Ae}),gt)){gt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,ce,Ce,Ut.numFeatures,Ut.numPoints,Ut.numSimplified),console.timeEnd("creation"));const Mt=`z${ie}`;this.stats[Mt]=(this.stats[Mt]||0)+1,this.total++}if(Ut.source=ee,Be==null){if(ie===Ke.indexMaxZoom||Ut.numPoints<=Ke.indexMaxPoints)continue}else{if(ie===Ke.maxZoom||ie===Be)continue;if(Be!=null){const Mt=Be-ie;if(ce!==Je>>Mt||Ce!==Ye>>Mt)continue}}if(Ut.source=null,!ee.length)continue;gt>1&&console.time("clipping");const mr=.5*Ke.buffer/Ke.extent,Zt=.5-mr,Yt=.5+mr,rr=1+mr;let vr=null,kr=null,nn=null,Xr=null;const wn=bt(ee,et,ce-mr,ce+Yt,0,Ut.minX,Ut.maxX,Ke),on=bt(ee,et,ce+Zt,ce+rr,0,Ut.minX,Ut.maxX,Ke);wn&&(vr=bt(wn,et,Ce-mr,Ce+Yt,1,Ut.minY,Ut.maxY,Ke),kr=bt(wn,et,Ce+Zt,Ce+rr,1,Ut.minY,Ut.maxY,Ke)),on&&(nn=bt(on,et,Ce-mr,Ce+Yt,1,Ut.minY,Ut.maxY,Ke),Xr=bt(on,et,Ce+Zt,Ce+rr,1,Ut.minY,Ut.maxY,Ke)),gt>1&&console.timeEnd("clipping"),Ue.push(vr||[],ie+1,2*ce,2*Ce),Ue.push(kr||[],ie+1,2*ce,2*Ce+1),Ue.push(nn||[],ie+1,2*ce+1,2*Ce),Ue.push(Xr||[],ie+1,2*ce+1,2*Ce+1)}}getTile(ee,ie,ce){ee=+ee,ie=+ie,ce=+ce;const Ce=this.options,{extent:Be,debug:Je}=Ce;if(ee<0||ee>24)return null;const Ye=1<<ee,Ue=Sr(ee,ie=ie+Ye&Ye-1,ce);if(this.tiles[Ue])return Xt(this.tiles[Ue],Be);Je>1&&console.log("drilling down to z%d-%d-%d",ee,ie,ce);let Ke,gt=ee,et=ie,Ae=ce;for(;!Ke&&gt>0;)gt--,et>>=1,Ae>>=1,Ke=this.tiles[Sr(gt,et,Ae)];return Ke?.source?(Je>1&&(console.log("found parent tile z%d-%d-%d",gt,et,Ae),console.time("drilling down")),this.splitTile(Ke.source,gt,et,Ae,ee,ie,ce),Je>1&&console.timeEnd("drilling down"),this.tiles[Ue]?Xt(this.tiles[Ue],Be):null):null}invalidateTiles(ee){const ie=this.options,{debug:ce}=ie;let Ce=1/0,Be=-1/0,Je=1/0,Ye=-1/0;for(const gt of ee)Ce=Math.min(Ce,gt.minX),Be=Math.max(Be,gt.maxX),Je=Math.min(Je,gt.minY),Ye=Math.max(Ye,gt.maxY);const Ue=ie.buffer/ie.extent,Ke=new Set;for(const gt in this.tiles){const et=this.tiles[gt],Ae=1<<et.z,Ut=(et.x-Ue)/Ae,mr=(et.x+1+Ue)/Ae,Zt=(et.y-Ue)/Ae,Yt=(et.y+1+Ue)/Ae;if(Be<Ut||Ce>=mr||Ye<Zt||Je>=Yt)continue;let rr=!1;for(const vr of ee)if(vr.maxX>=Ut&&vr.minX<mr&&vr.maxY>=Zt&&vr.minY<Yt){rr=!0;break}if(rr){if(ce){ce>1&&console.log("invalidate tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",et.z,et.x,et.y,et.numFeatures,et.numPoints,et.numSimplified);const vr=`z${et.z}`;this.stats[vr]=(this.stats[vr]||0)-1,this.total--}delete this.tiles[gt],Ke.add(gt)}}Ke.size&&(this.tileCoords=this.tileCoords.filter(gt=>!Ke.has(gt.id)))}updateData(ee){const ie=this.options,ce=ie.debug;if(!ie.updateable)throw new Error("to update tile geojson `updateable` option must be set to true");const{affected:Ce,source:Be}=function(et,Ae,Ut){const mr=function(Yt){return Yt?{removeAll:Yt.removeAll,remove:new Set(Yt.remove||[]),add:new Map(Yt.add?.map(rr=>[rr.id,rr])),update:new Map(Yt.update?.map(rr=>[rr.id,rr]))}:{remove:new Set,add:new Map,update:new Map}}(Ae);let Zt=[];if(mr.removeAll&&(Zt=et,et=[]),mr.remove.size||mr.add.size){const Yt=[];for(const rr of et){const{id:vr}=rr;(mr.remove.has(vr)||mr.add.has(vr))&&Yt.push(rr)}if(Yt.length){Zt.push(...Yt);const rr=new Set(Yt.map(vr=>vr.id));et=et.filter(vr=>!rr.has(vr.id))}if(mr.add.size){let rr=ut({type:"FeatureCollection",features:Array.from(mr.add.values())},Ut);rr=or(rr,Ut),Zt.push(...rr),et.push(...rr)}}if(mr.update.size)for(const[Yt,rr]of mr.update){const vr=et.findIndex(Xr=>Xr.id===Yt);if(vr===-1)continue;const kr=et[vr],nn=sn(kr,rr,Ut);nn&&(Zt.push(kr,nn),et[vr]=nn)}return{affected:Zt,source:et}}(this.source,ee,ie);if(!Ce.length)return;this.source=Be,ce>1&&(console.log("invalidating tiles"),console.time("invalidating")),this.invalidateTiles(Ce),ce>1&&console.timeEnd("invalidating");const[Je,Ye,Ue]=[0,0,0],Ke=Rr(this.source,Je,Ye,Ue,this.options);Ke.source=this.source;const gt=Sr(Je,Ye,Ue);if(this.tiles[gt]=Ke,this.tileCoords.push({z:Je,x:Ye,y:Ue,id:gt}),ce){const et=`z${Je}`;this.stats[et]=(this.stats[et]||0)+1,this.total++}}}function Sr(Ne,ee,ie){return 32*((1<<Ne)*ie+ee)+Ne}class Dr{constructor(ee,ie,ce,Ce=ur){this._dataUpdateable=new Map,this.actor=ee,this.layerIndex=ie,this.availableImages=ce,this.tileState=new R,this._createGeoJSONIndex=Ce}loadVectorTile(ee){if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const{z:ie,x:ce,y:Ce}=ee.tileID.canonical,Be=this._geoJSONIndex.getTile(ie,ce,Ce);return Be?j(new f.d3(Be.features,{version:2,extent:f.a5})):null}loadTile(ee){return f._(this,void 0,void 0,function*(){const{uid:ie}=ee,ce=new P(ee);ce.abort=new AbortController;try{const Ce=this.loadVectorTile(ee);if(!Ce)return null;const{vectorTile:Be,rawData:Je}=Ce;ce.vectorTile=Be,this.tileState.markLoaded(ie,ce);const Ye={rawData:Je};this.tileState.setParsing(ie,Ye);try{return yield this._parseWorkerTile(ce,ee,Ye)}finally{this.tileState.clearParsing(ie)}}catch(Ce){throw ce.status="done",this.tileState.markLoaded(ie,ce),Ce}})}_reloadLoadedTile(ee){return f._(this,void 0,void 0,function*(){const ie=ee.uid,ce=this.tileState.getLoaded(ie);if(!ce)throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");if(ce.showCollisionBoxes=ee.showCollisionBoxes,ce.status==="parsing"){const Ce=this.tileState.consumeParsing(ie);return yield this._parseWorkerTile(ce,ee,Ce)}if(ce.status==="done"&&ce.vectorTile)return yield this._parseWorkerTile(ce,ee)})}_parseWorkerTile(ee,ie,ce){return f._(this,void 0,void 0,function*(){let Ce=yield ee.parse(ee.vectorTile,this.layerIndex,this.availableImages,this.actor,ie.subdivisionGranularity);if(ce){const{rawData:Be}=ce;Ce=f.e({rawTileData:Be.slice(0)},Ce)}return Ce})}abortTile(ee){return f._(this,void 0,void 0,function*(){this.tileState.abort(ee.uid)})}removeTile(ee){return f._(this,void 0,void 0,function*(){this.tileState.removeLoaded(ee.uid)})}loadData(ee){return f._(this,void 0,void 0,function*(){var ie;(ie=this._pendingRequest)===null||ie===void 0||ie.abort();const ce=this._startRequestTiming(ee);this._pendingRequest=new AbortController;try{(!this._pendingData||ee.request||ee.data||ee.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(ee,this._pendingRequest));const Ce=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(Ce,ee),this.tileState.clearLoaded();const Be={};return ee.request&&(Be.data=Ce),this._finishRequestTiming(ce,ee,Be),Be}catch(Ce){if(delete this._pendingRequest,f.Z(Ce))return{abandoned:!0};throw Ce}})}_startRequestTiming(ee){var ie;if(!((ie=ee.request)===null||ie===void 0)&&ie.collectResourceTiming)return new f.c$(ee.request.url)}_finishRequestTiming(ee,ie,ce){const Ce=ee?.finish();Ce&&(ce.resourceTiming={[ie.source]:JSON.parse(JSON.stringify(Ce))})}getData(){return f._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ee){return this.tileState.getLoaded(ee.uid)?this._reloadLoadedTile(ee):this.loadTile(ee)}loadAndProcessGeoJSON(ee,ie){return f._(this,void 0,void 0,function*(){let ce;if(ee.request?ce=yield this.loadGeoJSONFromUrl(ee.request,ee.promoteId,ie):ee.data?ce=this._loadGeoJSONFromObject(ee.data,ee.promoteId):ee.dataDiff&&(ce=this._loadGeoJSONFromDiff(ee.dataDiff,ee.promoteId,ee.source)),delete this._pendingRequest,typeof ce!="object")throw new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`);return be(ce,!0),ee.filter&&(ce=this._filterGeoJSON(ce,ee.filter)),ce})}loadGeoJSONFromUrl(ee,ie,ce){return f._(this,void 0,void 0,function*(){const Ce=yield f.j(ee,ce);return this._dataUpdateable=f.a7(Ce.data,ie),Ce.data})}_loadGeoJSONFromObject(ee,ie){return this._dataUpdateable=f.a7(ee,ie),ee}_loadGeoJSONFromDiff(ee,ie,ce){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ce}`);f.a8(this._dataUpdateable,ee,ie);const Ce=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(Ce)}_filterGeoJSON(ee,ie){const ce=f.d4(ie,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ce.result==="error")throw new Error(ce.value.map(Be=>`${Be.key}: ${Be.message}`).join(", "));const Ce=ee.features.filter(Be=>ce.value.evaluate({zoom:0},Be));return this._toFeatureCollection(Ce)}_toFeatureCollection(ee){return{type:"FeatureCollection",features:ee}}removeSource(ee){return f._(this,void 0,void 0,function*(){var ie;(ie=this._pendingRequest)===null||ie===void 0||ie.abort()})}getClusterExpansionZoom(ee){return this._geoJSONIndex.getClusterExpansionZoom(ee.clusterId)}getClusterChildren(ee){return this._geoJSONIndex.getChildren(ee.clusterId)}getClusterLeaves(ee){return this._geoJSONIndex.getLeaves(ee.clusterId,ee.limit,ee.offset)}}function ur(Ne,ee){return ee.cluster?new ae(function({superclusterOptions:ie,clusterProperties:ce}){if(!ce||!ie)return ie;const Ce={},Be={},Je={accumulated:null,zoom:0},Ye={properties:null},Ue=Object.keys(ce);for(const Ke of Ue){const[gt,et]=ce[Ke],Ae=f.d4(et),Ut=f.d4(typeof gt=="string"?[gt,["accumulated"],["get",Ke]]:gt);Ce[Ke]=Ae.value,Be[Ke]=Ut.value}return ie.map=Ke=>{Ye.properties=Ke;const gt={};for(const et of Ue)gt[et]=Ce[et].evaluate(Je,Ye);return gt},ie.reduce=(Ke,gt)=>{Ye.properties=gt;for(const et of Ue)Je.accumulated=Ke[et],Ke[et]=Be[et].evaluate(Je,Ye)},ie}(ee)).load(Ne.features):function(ie,ce){return new vn(ie,ce)}(Ne,ee.geojsonVtOptions)}class Zr{constructor(ee){this.self=ee,this.actor=new f.L(ee),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(ie,ce)=>{if(this.externalWorkerSourceTypes[ie])throw new Error(`Worker source with name "${ie}" already registered.`);this.externalWorkerSourceTypes[ie]=ce},this.self.addProtocol=f.cK,this.self.removeProtocol=f.cL,this.self.registerRTLTextPlugin=ie=>{f.d5.setMethods(ie)},this.actor.registerMessageHandler("LDT",(ie,ce)=>this._getDEMWorkerSource(ie,ce.source).loadTile(ce)),this.actor.registerMessageHandler("RDT",(ie,ce)=>f._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ie,ce.source).removeTile(ce)})),this.actor.registerMessageHandler("GCEZ",(ie,ce)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,ce.type,ce.source).getClusterExpansionZoom(ce)})),this.actor.registerMessageHandler("GCC",(ie,ce)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,ce.type,ce.source).getClusterChildren(ce)})),this.actor.registerMessageHandler("GCL",(ie,ce)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,ce.type,ce.source).getClusterLeaves(ce)})),this.actor.registerMessageHandler("LD",(ie,ce)=>this._getWorkerSource(ie,ce.type,ce.source).loadData(ce)),this.actor.registerMessageHandler("GD",(ie,ce)=>this._getWorkerSource(ie,ce.type,ce.source).getData()),this.actor.registerMessageHandler("LT",(ie,ce)=>this._getWorkerSource(ie,ce.type,ce.source).loadTile(ce)),this.actor.registerMessageHandler("RT",(ie,ce)=>this._getWorkerSource(ie,ce.type,ce.source).reloadTile(ce)),this.actor.registerMessageHandler("AT",(ie,ce)=>this._getWorkerSource(ie,ce.type,ce.source).abortTile(ce)),this.actor.registerMessageHandler("RMT",(ie,ce)=>this._getWorkerSource(ie,ce.type,ce.source).removeTile(ce)),this.actor.registerMessageHandler("RS",(ie,ce)=>f._(this,void 0,void 0,function*(){if(!this.workerSources[ie]||!this.workerSources[ie][ce.type]||!this.workerSources[ie][ce.type][ce.source])return;const Ce=this.workerSources[ie][ce.type][ce.source];delete this.workerSources[ie][ce.type][ce.source],Ce.removeSource!==void 0&&Ce.removeSource(ce)})),this.actor.registerMessageHandler("RM",ie=>f._(this,void 0,void 0,function*(){delete this.layerIndexes[ie],delete this.availableImages[ie],delete this.workerSources[ie],delete this.demWorkerSources[ie],this.globalStates.delete(ie)})),this.actor.registerMessageHandler("SR",(ie,ce)=>f._(this,void 0,void 0,function*(){this.referrer=ce})),this.actor.registerMessageHandler("SRPS",(ie,ce)=>this._syncRTLPluginState(ie,ce)),this.actor.registerMessageHandler("IS",(ie,ce)=>f._(this,void 0,void 0,function*(){this.self.importScripts(ce)})),this.actor.registerMessageHandler("SI",(ie,ce)=>this._setImages(ie,ce)),this.actor.registerMessageHandler("UL",(ie,ce)=>f._(this,void 0,void 0,function*(){this._getLayerIndex(ie).update(ce.layers,ce.removedIds,this._getGlobalState(ie))})),this.actor.registerMessageHandler("UGS",(ie,ce)=>f._(this,void 0,void 0,function*(){const Ce=this._getGlobalState(ie);for(const Be in ce)Ce[Be]=ce[Be]})),this.actor.registerMessageHandler("SL",(ie,ce)=>f._(this,void 0,void 0,function*(){this._getLayerIndex(ie).replace(ce,this._getGlobalState(ie))}))}_getGlobalState(ee){let ie=this.globalStates.get(ee);return ie||(ie={},this.globalStates.set(ee,ie)),ie}_setImages(ee,ie){return f._(this,void 0,void 0,function*(){this.availableImages[ee]=ie;for(const ce in this.workerSources[ee]){const Ce=this.workerSources[ee][ce];for(const Be in Ce)Ce[Be].availableImages=ie}})}_syncRTLPluginState(ee,ie){return f._(this,void 0,void 0,function*(){return yield f.d5.syncState(ie,this.self.importScripts)})}_getAvailableImages(ee){let ie=this.availableImages[ee];return ie||(ie=[]),ie}_getLayerIndex(ee){let ie=this.layerIndexes[ee];return ie||(ie=this.layerIndexes[ee]=new o),ie}_getWorkerSource(ee,ie,ce){if(this.workerSources[ee]||(this.workerSources[ee]={}),this.workerSources[ee][ie]||(this.workerSources[ee][ie]={}),!this.workerSources[ee][ie][ce]){const Ce={sendAsync:(Be,Je)=>(Be.targetMapId=ee,this.actor.sendAsync(Be,Je))};switch(ie){case"vector":this.workerSources[ee][ie][ce]=new se(Ce,this._getLayerIndex(ee),this._getAvailableImages(ee));break;case"geojson":this.workerSources[ee][ie][ce]=new Dr(Ce,this._getLayerIndex(ee),this._getAvailableImages(ee));break;default:this.workerSources[ee][ie][ce]=new this.externalWorkerSourceTypes[ie](Ce,this._getLayerIndex(ee),this._getAvailableImages(ee))}}return this.workerSources[ee][ie][ce]}_getDEMWorkerSource(ee,ie){return this.demWorkerSources[ee]||(this.demWorkerSources[ee]={}),this.demWorkerSources[ee][ie]||(this.demWorkerSources[ee][ie]=new ue),this.demWorkerSources[ee][ie]}}return f.i(self)&&(self.worker=new Zr(self)),Zr}),c("index",["exports","./shared"],function(f,o){var x="5.18.0";function P(){var w=new o.A(4);return o.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}let I,R,D;const $={frame(w,n,u,m){const v=m||window,S=v.requestAnimationFrame(k=>{M(),n(k)}),{unsubscribe:M}=o.s(w.signal,"abort",()=>{M(),v.cancelAnimationFrame(S),u(new o.a(w.signal.reason))},!1)},frameAsync(w,n){return new Promise((u,m)=>{this.frame(w,u,m,n)})},getImageData(w,n=0){return this.getImageCanvasContext(w).getImageData(-n,-n,w.width+2*n,w.height+2*n)},getImageCanvasContext(w){const n=window.document.createElement("canvas"),u=n.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return n.width=w.width,n.height=w.height,u.drawImage(w,0,0,w.width,w.height),u},resolveURL:w=>(I||(I=document.createElement("a")),I.href=w,I.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return D!==void 0?D:!!matchMedia&&(R==null&&(R=matchMedia("(prefers-reduced-motion: reduce)")),R.matches)},set prefersReducedMotion(w){D=w}},G=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(w){this._frozenAt=w}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function j(){return G.getCurrentTime()}class V{static testProp(n){if(!V.docStyle)return n[0];for(let u=0;u<n.length;u++)if(n[u]in V.docStyle)return n[u];return n[0]}static create(n,u,m){const v=window.document.createElement(n);return u!==void 0&&(v.className=u),m&&m.appendChild(v),v}static createNS(n,u){return window.document.createElementNS(n,u)}static disableDrag(){V.docStyle&&V.selectProp&&(V.userSelect=V.docStyle[V.selectProp],V.docStyle[V.selectProp]="none")}static enableDrag(){V.docStyle&&V.selectProp&&(V.docStyle[V.selectProp]=V.userSelect)}static setTransform(n,u){n.style[V.transformProp]=u}static addEventListener(n,u,m,v={}){n.addEventListener(u,m,"passive"in v?v:v.capture)}static removeEventListener(n,u,m,v={}){n.removeEventListener(u,m,"passive"in v?v:v.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",V.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",V.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",V.suppressClickInternal,!0)},0)}static getScale(n){const u=n.getBoundingClientRect();return{x:u.width/n.offsetWidth||1,y:u.height/n.offsetHeight||1,boundingClientRect:u}}static getPoint(n,u,m){const v=u.boundingClientRect;return new o.P((m.clientX-v.left)/u.x-n.clientLeft,(m.clientY-v.top)/u.y-n.clientTop)}static mousePos(n,u){const m=V.getScale(n);return V.getPoint(n,m,u)}static touchPos(n,u){const m=[],v=V.getScale(n);for(let S=0;S<u.length;S++)m.push(V.getPoint(n,v,u[S]));return m}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}static sanitize(n){const u=new DOMParser().parseFromString(n,"text/html").body||document.createElement("body"),m=u.querySelectorAll("script");for(const v of m)v.remove();return V.clean(u),u.innerHTML}static isPossiblyDangerous(n,u){const m=u.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(n)||!m.includes("javascript:")&&!m.includes("data:"))||!!n.startsWith("on")||void 0}static clean(n){const u=n.children;for(const m of u)V.removeAttributes(m),V.clean(m)}static removeAttributes(n){for(const{name:u,value:m}of n.attributes)V.isPossiblyDangerous(u,m)&&n.removeAttribute(u)}}V.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,V.selectProp=V.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),V.transformProp=V.testProp(["transform","WebkitTransform"]);const se={supported:!1,testSupport:function(w){!de&&Q&&(oe?be(w):ue=w)}};let ue,Q,de=!1,oe=!1;function be(w){const n=w.createTexture();w.bindTexture(w.TEXTURE_2D,n);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,Q),w.isContextLost())return;se.supported=!0}catch{}w.deleteTexture(n),de=!0}var we;typeof document<"u"&&(Q=document.createElement("img"),Q.onload=()=>{ue&&be(ue),ue=null,oe=!0},Q.onerror=()=>{de=!0,ue=null},Q.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(w){let n,u,m,v;w.resetRequestQueue=()=>{n=[],u=0,m=0,v={}},w.addThrottleControl=O=>{const N=m++;return v[N]=O,N},w.removeThrottleControl=O=>{delete v[O],M()},w.getImage=(O,N,H=!0)=>new Promise((J,K)=>{se.supported&&(O.headers||(O.headers={}),O.headers.accept="image/webp,*/*"),o.e(O,{type:"image"}),n.push({abortController:N,requestParameters:O,supportImageRefresh:H,state:"queued",onError:ne=>{K(ne)},onSuccess:ne=>{J(ne)}}),M()});const S=O=>o._(this,void 0,void 0,function*(){O.state="running";const{requestParameters:N,supportImageRefresh:H,onError:J,onSuccess:K,abortController:ne}=O,he=H===!1&&!o.i(self)&&!o.g(N.url)&&(!N.headers||Object.keys(N.headers).reduce((_e,Me)=>_e&&Me==="accept",!0));u++;const ge=he?k(N,ne):o.m(N,ne);try{const _e=yield ge;delete O.abortController,O.state="completed",_e.data instanceof HTMLImageElement||o.b(_e.data)?K(_e):_e.data&&K({data:yield(xe=_e.data,typeof createImageBitmap=="function"?o.f(xe):o.h(xe)),cacheControl:_e.cacheControl,expires:_e.expires})}catch(_e){delete O.abortController,J(_e)}finally{u--,M()}var xe}),M=()=>{const O=(()=>{for(const N of Object.keys(v))if(v[N]())return!0;return!1})()?o.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let N=u;N<O&&n.length>0;N++){const H=n.shift();H.abortController.signal.aborted?N--:S(H)}},k=(O,N)=>new Promise((H,J)=>{const K=new Image,ne=O.url,he=O.credentials;he&&he==="include"?K.crossOrigin="use-credentials":(he&&he==="same-origin"||!o.d(ne))&&(K.crossOrigin="anonymous"),N.signal.addEventListener("abort",()=>{K.src="",J(new o.a(N.signal.reason))}),K.fetchPriority="high",K.onload=()=>{K.onerror=K.onload=null,H({data:K})},K.onerror=()=>{K.onerror=K.onload=null,N.signal.aborted||J(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},K.src=ne})}(we||(we={})),we.resetRequestQueue();class Ie{constructor(n){this._transformRequestFn=n??null}transformRequest(n,u){return this._transformRequestFn&&this._transformRequestFn(n,u)||{url:n}}setTransformRequest(n){this._transformRequestFn=n}}function ke(w){const n=[];if(typeof w=="string")n.push({id:"default",url:w});else if(w&&w.length>0){const u=[];for(const{id:m,url:v}of w){const S=`${m}${v}`;u.indexOf(S)===-1&&(u.push(S),n.push({id:m,url:v}))}}return n}function ae(w,n,u){try{const m=new URL(w);return m.pathname+=`${n}${u}`,m.toString()}catch{throw new Error(`Invalid sprite URL "${w}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function Ee(w){const{userImage:n}=w;return!!(n&&n.render&&n.render())&&(w.data.replace(new Uint8Array(n.data.buffer)),!0)}class Ze extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const n of Object.keys(this.images))this.removeImage(n);this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:u,promiseResolve:m}of this.requestors)m(this._getImagesForIds(u));this.requestors=[]}}getImage(n){const u=this.images[n];if(u&&!u.data&&u.spriteData){const m=u.spriteData;u.data=new o.R({width:m.width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),u.spriteData=null}return u}addImage(n,u){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,u)&&(this.images[n]=u)}_validate(n,u){let m=!0;const v=u.data||u.spriteData;return this._validateStretch(u.stretchX,v&&v.width)||(this.fire(new o.k(new Error(`Image "${n}" has invalid "stretchX" value`))),m=!1),this._validateStretch(u.stretchY,v&&v.height)||(this.fire(new o.k(new Error(`Image "${n}" has invalid "stretchY" value`))),m=!1),this._validateContent(u.content,u)||(this.fire(new o.k(new Error(`Image "${n}" has invalid "content" value`))),m=!1),m}_validateStretch(n,u){if(!n)return!0;let m=0;for(const v of n){if(v[0]<m||v[1]<v[0]||u<v[1])return!1;m=v[1]}return!0}_validateContent(n,u){if(!n)return!0;if(n.length!==4)return!1;const m=u.spriteData,v=m&&m.width||u.data.width,S=m&&m.height||u.data.height;return!(n[0]<0||v<n[0]||n[1]<0||S<n[1]||n[2]<0||v<n[2]||n[3]<0||S<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,u,m=!0){const v=this.getImage(n);if(m&&(v.data.width!==u.data.width||v.data.height!==u.data.height))throw new Error(`size mismatch between old image (${v.data.width}x${v.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=v.version+1,this.images[n]=u,this.updatedImages[n]=!0}removeImage(n){const u=this.images[n];delete this.images[n],delete this.patterns[n],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n){return new Promise((u,m)=>{let v=!0;if(!this.isLoaded())for(const S of n)this.images[S]||(v=!1);this.isLoaded()||v?u(this._getImagesForIds(n)):this.requestors.push({ids:n,promiseResolve:u})})}_getImagesForIds(n){const u={};for(const m of n){let v=this.getImage(m);v||(this.fire(new o.l("styleimagemissing",{id:m})),v=this.getImage(m)),v?u[m]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,textFitWidth:v.textFitWidth,textFitHeight:v.textFitHeight,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:o.w(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){const{width:n,height:u}=this.atlasImage;return{width:n,height:u}}getPattern(n){const u=this.patterns[n],m=this.getImage(n);if(!m)return null;if(u&&u.position.version===m.version)return u.position;if(u)u.position.version=m.version;else{const v={w:m.data.width+2,h:m.data.height+2,x:0,y:0},S=new o.I(v,m);this.patterns[n]={bin:v,position:S}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const u=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.T(n,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const S in this.patterns)n.push(this.patterns[S].bin);const{w:u,h:m}=o.p(n),v=this.atlasImage;v.resize({width:u||1,height:m||1});for(const S in this.patterns){const{bin:M}=this.patterns[S],k=M.x+1,O=M.y+1,N=this.getImage(S).data,H=N.width,J=N.height;o.R.copy(N,v,{x:0,y:0},{x:k,y:O},{width:H,height:J}),o.R.copy(N,v,{x:0,y:J-1},{x:k,y:O-1},{width:H,height:1}),o.R.copy(N,v,{x:0,y:0},{x:k,y:O+J},{width:H,height:1}),o.R.copy(N,v,{x:H-1,y:0},{x:k-1,y:O},{width:1,height:J}),o.R.copy(N,v,{x:0,y:0},{x:k+H,y:O},{width:1,height:J})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const u of n){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const m=this.getImage(u);m||o.w(`Image with ID: "${u}" was not found`),Ee(m)&&this.updateImage(u,m)}}cloneImages(){const n={};for(const u in this.images){const m=this.images[u];n[u]=Object.assign(Object.assign({},m),{data:m.data?m.data.clone():null})}return n}}const Qe=1e20;function vt(w,n,u,m,v,S,M,k,O){for(let N=n;N<n+m;N++)st(w,u*S+N,S,v,M,k,O);for(let N=u;N<u+v;N++)st(w,N*S+n,1,m,M,k,O)}function st(w,n,u,m,v,S,M){S[0]=0,M[0]=-Qe,M[1]=Qe,v[0]=w[n];for(let k=1,O=0,N=0;k<m;k++){v[k]=w[n+k*u];const H=k*k;do{const J=S[O];N=(v[k]-v[J]+H-J*J)/(k-J)/2}while(N<=M[O]&&--O>-1);O++,S[O]=k,M[O]=N,M[O+1]=Qe}for(let k=0,O=0;k<m;k++){for(;M[O+1]<k;)O++;const N=S[O],H=k-N;w[n+k*u]=v[N]+H*H}}const He=o.v.layout_symbol["text-font"].default.join(",");class rt{constructor(n,u,m){this.requestManager=n,this.localIdeographFontFamily=u,this.entries={},this.lang=m}setURL(n){this.url=n}getGlyphs(n){return o._(this,void 0,void 0,function*(){const u=[];for(const S in n)for(const M of n[S])u.push(this._getAndCacheGlyphsPromise(S,M));const m=yield Promise.all(u),v={};for(const{stack:S,id:M,glyph:k}of m)v[S]||(v[S]={}),v[S][M]=k&&{id:k.id,bitmap:k.bitmap.clone(),metrics:k.metrics};return v})}_getAndCacheGlyphsPromise(n,u){return o._(this,void 0,void 0,function*(){let m=this.entries[n];m||(m=this.entries[n]={glyphs:{},requests:{},ranges:{}});let v=m.glyphs[u];return v!==void 0?{stack:n,id:u,glyph:v}:!this.url||this._charUsesLocalIdeographFontFamily(u)?(v=m.glyphs[u]=this._drawGlyph(m,n,u),{stack:n,id:u,glyph:v}):yield this._downloadAndCacheRangePromise(n,u)})}_downloadAndCacheRangePromise(n,u){return o._(this,void 0,void 0,function*(){const m=this.entries[n],v=Math.floor(u/256);if(m.ranges[v])return{stack:n,id:u,glyph:null};if(!m.requests[v]){const S=rt.loadGlyphRange(n,v,this.url,this.requestManager);m.requests[v]=S}try{const S=yield m.requests[v];for(const M in S)m.glyphs[+M]=S[+M];return m.ranges[v]=!0,{stack:n,id:u,glyph:S[u]||null}}catch(S){const M=m.glyphs[u]=this._drawGlyph(m,n,u);return this._warnOnMissingGlyphRange(M,v,u,S),{stack:n,id:u,glyph:M}}})}_warnOnMissingGlyphRange(n,u,m,v){const S=256*u,M=S+255,k=m.toString(16).padStart(4,"0").toUpperCase();o.w(`Unable to load glyph range ${u}, ${S}-${M}. Rendering codepoint U+${k} locally instead. ${v}`)}_charUsesLocalIdeographFontFamily(n){return!!this.localIdeographFontFamily&&o.q(n)}_drawGlyph(n,u,m){const v=u===He&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(m),S=v?"ideographTinySDF":"tinySDF";n[S]||(n[S]=this._createTinySDF(v?this.localIdeographFontFamily:u));const M=n[S].draw(String.fromCodePoint(m)),k=new RegExp("^\\p{gc=Cf}+$","u").test(String.fromCodePoint(m));return{id:m,bitmap:new o.r({width:M.width||60,height:M.height||60},M.data),metrics:{width:k?0:M.glyphWidth/2||24,height:M.glyphHeight/2||24,left:M.glyphLeft/2+.5||0,top:M.glyphTop/2-27.5||-8,advance:k?0:M.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(n){const u=n?n.split(","):[];u.push("sans-serif");const m=u.map(v=>/[-\w]+/.test(v)?v:`'${CSS.escape(v)}'`).join(",");return new rt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:this._fontWeight(u[0]),fontStyle:this._fontStyle(u[0]),lang:this.lang})}_fontStyle(n){return/italic/i.test(n)?"italic":/oblique/i.test(n)?"oblique":"normal"}_fontWeight(n){const u={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let m;for(const[v,S]of Object.entries(u))new RegExp(`\\b${v}\\b`,"i").test(n)&&(m=`${S}`);return m}destroy(){for(const n in this.entries){const u=this.entries[n];u.tinySDF&&(u.tinySDF=null),u.ideographTinySDF&&(u.ideographTinySDF=null),u.glyphs={},u.requests={},u.ranges={}}this.entries={}}}rt.loadGlyphRange=function(w,n,u,m){return o._(this,void 0,void 0,function*(){const v=256*n,S=v+255,M=m.transformRequest(u.replace("{fontstack}",w).replace("{range}",`${v}-${S}`),"Glyphs"),k=yield o.n(M,new AbortController);if(!k||!k.data)throw new Error(`Could not load glyph range. range: ${n}, ${v}-${S}`);const O={};for(const N of o.o(k.data))O[N.id]=N;return O})},rt.TinySDF=class{constructor({fontSize:w=24,buffer:n=3,radius:u=8,cutoff:m=.25,fontFamily:v="sans-serif",fontWeight:S="normal",fontStyle:M="normal",lang:k=null}={}){this.buffer=n,this.cutoff=m,this.radius=u,this.lang=k;const O=this.size=w+4*n,N=this._createCanvas(O),H=this.ctx=N.getContext("2d",{willReadFrequently:!0});H.font=`${M} ${S} ${w}px ${v}`,H.textBaseline="alphabetic",H.textAlign="left",H.fillStyle="black",this.gridOuter=new Float64Array(O*O),this.gridInner=new Float64Array(O*O),this.f=new Float64Array(O),this.z=new Float64Array(O+1),this.v=new Uint16Array(O)}_createCanvas(w){const n=document.createElement("canvas");return n.width=n.height=w,n}draw(w){const{width:n,actualBoundingBoxAscent:u,actualBoundingBoxDescent:m,actualBoundingBoxLeft:v,actualBoundingBoxRight:S}=this.ctx.measureText(w),M=Math.ceil(u),k=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(S-v))),O=Math.min(this.size-this.buffer,M+Math.ceil(m)),N=k+2*this.buffer,H=O+2*this.buffer,J=Math.max(N*H,0),K=new Uint8ClampedArray(J),ne={data:K,width:N,height:H,glyphWidth:k,glyphHeight:O,glyphTop:M,glyphLeft:0,glyphAdvance:n};if(k===0||O===0)return ne;const{ctx:he,buffer:ge,gridInner:xe,gridOuter:_e}=this;this.lang&&(he.lang=this.lang),he.clearRect(ge,ge,k,O),he.fillText(w,ge,ge+M);const Me=he.getImageData(ge,ge,k,O);_e.fill(Qe,0,J),xe.fill(0,0,J);for(let Oe=0;Oe<O;Oe++)for(let Pe=0;Pe<k;Pe++){const ze=Me.data[4*(Oe*k+Pe)+3]/255;if(ze===0)continue;const $e=(Oe+ge)*N+Pe+ge;if(ze===1)_e[$e]=0,xe[$e]=Qe;else{const Re=.5-ze;_e[$e]=Re>0?Re*Re:0,xe[$e]=Re<0?Re*Re:0}}vt(_e,0,0,N,H,N,this.f,this.v,this.z),vt(xe,ge,ge,k,O,N,this.f,this.v,this.z);for(let Oe=0;Oe<J;Oe++){const Pe=Math.sqrt(_e[Oe])-Math.sqrt(xe[Oe]);K[Oe]=Math.round(255-255*(Pe/this.radius+this.cutoff))}return ne}};class Ge{constructor(){this.specification=o.u.light.position}possiblyEvaluate(n,u){return o.F(n.expression.evaluate(u))}interpolate(n,u,m){return{x:o.G.number(n.x,u.x,m),y:o.G.number(n.y,u.y,m),z:o.G.number(n.z,u.z,m)}}}let Ve;class ut extends o.E{constructor(n){super(),Ve=Ve||new o.t({anchor:new o.D(o.u.light.anchor),position:new Ge,color:new o.D(o.u.light.color),intensity:new o.D(o.u.light.intensity)}),this._transitionable=new o.x(Ve,void 0),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,u={}){if(!this._validate(o.y,n,u))for(const m in n){const v=n[m];m.endsWith(o.z)?this._transitionable.setTransition(m.slice(0,-o.z.length),v):this._transitionable.setValue(m,v)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,u,m){return(!m||m.validate!==!1)&&o.B(this,n.call(o.C,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:o.u}))}}const ve=new o.t({"sky-color":new o.D(o.u.sky["sky-color"]),"horizon-color":new o.D(o.u.sky["horizon-color"]),"fog-color":new o.D(o.u.sky["fog-color"]),"fog-ground-blend":new o.D(o.u.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.u.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.u.sky["atmosphere-blend"])});class Fe extends o.E{constructor(n){super(),this._transitionable=new o.x(ve,void 0),this.setSky(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.H(0))}setSky(n,u={}){if(!this._validate(o.J,n,u)){n||(n={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const m in n){const v=n[m];m.endsWith(o.z)?this._transitionable.setTransition(m.slice(0,-o.z.length),v):this._transitionable.setValue(m,v)}}}getSky(){return this._transitionable.serialize()}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,u,m={}){return m?.validate!==!1&&o.B(this,n.call(o.C,o.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:o.u})))}calculateFogBlendOpacity(n){return n<60?0:n<70?(n-60)/10:1}}class pt{constructor(n,u){this.width=n,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,u){const m=n.join(",")+String(u);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(n,u)),this.dashEntry[m]}getDashRanges(n,u,m){const v=[];let S=n.length%2==1?-n[n.length-1]*m:0,M=n[0]*m,k=!0;v.push({left:S,right:M,isDash:k,zeroLength:n[0]===0});let O=n[0];for(let N=1;N<n.length;N++){k=!k;const H=n[N];S=O*m,O+=H,M=O*m,v.push({left:S,right:M,isDash:k,zeroLength:H===0})}return v}addRoundDash(n,u,m){const v=u/2;for(let S=-m;S<=m;S++){const M=this.width*(this.nextRow+m+S);let k=0,O=n[k];for(let N=0;N<this.width;N++){N/O.right>1&&(O=n[++k]);const H=Math.abs(N-O.left),J=Math.abs(N-O.right),K=Math.min(H,J);let ne;const he=S/m*(v+1);if(O.isDash){const ge=v-Math.abs(he);ne=Math.sqrt(K*K+ge*ge)}else ne=v-Math.sqrt(K*K+he*he);this.data[M+N]=Math.max(0,Math.min(255,ne+128))}}}addRegularDash(n){for(let k=n.length-1;k>=0;--k){const O=n[k],N=n[k+1];O.zeroLength?n.splice(k,1):N&&N.isDash===O.isDash&&(N.left=O.left,n.splice(k,1))}const u=n[0],m=n[n.length-1];u.isDash===m.isDash&&(u.left=m.left-this.width,m.right=u.right+this.width);const v=this.width*this.nextRow;let S=0,M=n[S];for(let k=0;k<this.width;k++){k/M.right>1&&(M=n[++S]);const O=Math.abs(k-M.left),N=Math.abs(k-M.right),H=Math.min(O,N);this.data[v+k]=Math.max(0,Math.min(255,(M.isDash?H:-H)+128))}}addDash(n,u){const m=u?7:0,v=2*m+1;if(this.nextRow+v>this.height)return o.w("LineAtlas out of space"),null;let S=0;for(let k=0;k<n.length;k++)S+=n[k];if(S!==0){const k=this.width/S,O=this.getDashRanges(n,this.width,k);u?this.addRoundDash(O,k,m):this.addRegularDash(O)}const M={y:this.nextRow+m,height:2*m,width:S};return this.nextRow+=v,this.dirty=!0,M}bind(n){const u=n.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}const Tt="maplibre_preloaded_worker_pool";class Ct{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<Ct.workerCount;)this.workers.push(new Worker(o.c.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Tt]}numActive(){return Object.keys(this.active).length}}const _t=Math.floor($.hardwareConcurrency/2);let bt,nt;function kt(){return bt||(bt=new Ct),bt}Ct.workerCount=o.K(globalThis)?Math.max(Math.min(_t,3),1):1;class At{constructor(n,u){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=u;const m=this.workerPool.acquire(u);for(let v=0;v<m.length;v++){const S=new o.L(m[v],u);S.name=`Worker ${v}`,this.actors.push(S)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,u){const m=[];for(const v of this.actors)m.push(v.sendAsync({type:n,data:u}));return Promise.all(m)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],n&&this.workerPool.release(this.id)}registerMessageHandler(n,u){for(const m of this.actors)m.registerMessageHandler(n,u)}unregisterMessageHandler(n){for(const u of this.actors)u.unregisterMessageHandler(n)}}function dr(){return nt||(nt=new At(kt(),o.M),nt.registerMessageHandler("GR",(w,n,u)=>o.m(n,u))),nt}function ir(w,n){const u=o.N();return o.O(u,u,[1,1,0]),o.Q(u,u,[.5*w.width,.5*w.height,1]),w.calculatePosMatrix?o.S(u,u,w.calculatePosMatrix(n.toUnwrapped())):u}function Gr(w,n,u,m,v,S,M){var k;const O=function(K,ne,he){if(K)for(const ge of K){const xe=ne[ge];if(xe&&xe.source===he&&xe.type==="fill-extrusion")return!0}else for(const ge in ne){const xe=ne[ge];if(xe.source===he&&xe.type==="fill-extrusion")return!0}return!1}((k=v?.layers)!==null&&k!==void 0?k:null,n,w.id),N=S.maxPitchScaleFactor(),H=w.tilesIn(m,N,O);H.sort(Tr);const J=[];for(const K of H)J.push({wrappedTileID:K.tileID.wrapped().key,queryResults:K.tile.queryRenderedFeatures(n,u,w.getState(),K.queryGeometry,K.cameraQueryGeometry,K.scale,v,S,N,ir(S,K.tileID),M?(ne,he)=>M(K.tileID,ne,he):void 0)});return function(K,ne){for(const he in K)for(const ge of K[he])or(ge,ne);return K}(function(K){const ne={},he={};for(const ge of K){const xe=ge.queryResults,_e=ge.wrappedTileID,Me=he[_e]=he[_e]||{};for(const Oe in xe){const Pe=xe[Oe],ze=Me[Oe]=Me[Oe]||{},$e=ne[Oe]=ne[Oe]||[];for(const Re of Pe)ze[Re.featureIndex]||(ze[Re.featureIndex]=!0,$e.push(Re))}}return ne}(J),w)}function Tr(w,n){const u=w.tileID,m=n.tileID;return u.overscaledZ-m.overscaledZ||u.canonical.y-m.canonical.y||u.wrap-m.wrap||u.canonical.x-m.canonical.x}function or(w,n){const u=w.feature,m=n.getFeatureState(u.layer["source-layer"],u.id);u.source=u.layer.source,u.layer["source-layer"]&&(u.sourceLayer=u.layer["source-layer"]),u.state=m}function qt(w,n,u,m){return o._(this,void 0,void 0,function*(){let v=w;if(w.url?v=(yield o.j(n.transformRequest(w.url,"Source"),u)).data:yield $.frameAsync(u,m),!v)return null;const S=o.U(o.e(v,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in v&&v.vector_layers&&(S.vectorLayerIds=v.vector_layers.map(M=>M.id)),S})}class pr{constructor(n,u){n&&(u?this.setSouthWest(n).setNorthEast(u):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof o.V?new o.V(n.lng,n.lat):o.V.convert(n),this}setSouthWest(n){return this._sw=n instanceof o.V?new o.V(n.lng,n.lat):o.V.convert(n),this}extend(n){const u=this._sw,m=this._ne;let v,S;if(n instanceof o.V)v=n,S=n;else{if(!(n instanceof pr))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(pr.convert(n)):this.extend(o.V.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(o.V.convert(n)):this;if(v=n._sw,S=n._ne,!v||!S)return this}return u||m?(u.lng=Math.min(v.lng,u.lng),u.lat=Math.min(v.lat,u.lat),m.lng=Math.max(S.lng,m.lng),m.lat=Math.max(S.lat,m.lat)):(this._sw=new o.V(v.lng,v.lat),this._ne=new o.V(S.lng,S.lat)),this}getCenter(){return new o.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.V(this.getWest(),this.getNorth())}getSouthEast(){return new o.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:u,lat:m}=o.V.convert(n);let v=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&v}intersects(n){if(!((n=pr.convert(n)).getNorth()>=this.getSouth()&&n.getSouth()<=this.getNorth()))return!1;const u=Math.abs(this.getEast()-this.getWest()),m=Math.abs(n.getEast()-n.getWest());if(u>=360||m>=360)return!0;const v=o.W(this.getWest(),-180,180),S=o.W(this.getEast(),-180,180),M=o.W(n.getWest(),-180,180),k=o.W(n.getEast(),-180,180),O=v>S,N=M>k;return!(!O||!N)||(O?k>=v||M<=S:N?S>=M||v<=k:M<=S&&k>=v)}static convert(n){return n instanceof pr?n:n&&new pr(n)}static fromLngLat(n,u=0){const m=360*u/40075017,v=m/Math.cos(Math.PI/180*n.lat);return new pr(new o.V(n.lng-v,n.lat-m),new o.V(n.lng+v,n.lat+m))}adjustAntiMeridian(){const n=new o.V(this._sw.lng,this._sw.lat),u=new o.V(this._ne.lng,this._ne.lat);return new pr(n,n.lng>u.lng?new o.V(u.lng+360,u.lat):u)}}class Xt{constructor(n,u,m){this.bounds=pr.convert(this.validateBounds(n)),this.minzoom=u||0,this.maxzoom=m||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const u=Math.pow(2,n.z),m=Math.floor(o.Y(this.bounds.getWest())*u),v=Math.floor(o.X(this.bounds.getNorth())*u),S=Math.ceil(o.Y(this.bounds.getEast())*u),M=Math.ceil(o.X(this.bounds.getSouth())*u);return n.x>=m&&n.x<S&&n.y>=v&&n.y<M}}class Ir extends o.E{constructor(n,u,m,v){if(super(),this.id=n,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.U(u,["url","scheme","tileSize","promoteId","encoding"])),this._options=o.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield qt(this._options,this.map._requestManager,this._tileJSONRequest,this.map._ownerWindow);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),n&&(o.e(this,n),n.bounds&&(this.tileBounds=new Xt(n.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this._loaded=!0,o.Z(n)||this.fire(new o.k(n))}})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.abort(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(n){return o._(this,void 0,void 0,function*(){const u=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(u,"Tile"),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(n)};m.request.collectResourceTiming=this._collectResourceTiming;let v="RT";if(n.actor&&n.state!=="expired"){if(n.state==="loading")return new Promise((S,M)=>{n.reloadPromise={resolve:S,reject:M}})}else n.actor=this.dispatcher.getActor(),v="LT";n.abortController=new AbortController;try{const S=yield n.actor.sendAsync({type:v,data:m},n.abortController);if(delete n.abortController,n.aborted)return;this._afterTileLoadWorkerResponse(n,S)}catch(S){if(delete n.abortController,n.aborted)return;if(S&&S.status!==404)throw S;this._afterTileLoadWorkerResponse(n,null)}})}_getOverzoomParameters(n){if(n.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const u=n.tileID.scaledTo(this.maxzoom).canonical,m=u.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:u,overzoomRequest:this.map._requestManager.transformRequest(m,"Tile")}}_afterTileLoadWorkerResponse(n,u){if(u&&u.resourceTiming&&(n.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&n.setExpiryData(u),n.loadVectorData(u,this.map.painter),n.reloadPromise){const m=n.reloadPromise;n.reloadPromise=null,this.loadTile(n).then(m.resolve).catch(m.reject)}}abortTile(n){return o._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.actor&&(yield n.actor.sendAsync({type:"AT",data:{uid:n.uid,type:this.type,source:this.id}}))})}unloadTile(n){return o._(this,void 0,void 0,function*(){n.unloadVectorData(),n.actor&&(yield n.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Rr extends o.E{constructor(n,u,m,v){super(),this.id=n,this.dispatcher=m,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},u),o.e(this,o.U(u,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(n=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield qt(this._options,this.map._requestManager,this._tileJSONRequest,this.map._ownerWindow);this._tileJSONRequest=null,this._loaded=!0,u&&(o.e(this,u),u.bounds&&(this.tileBounds=new Xt(u.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:n})))}catch(u){this._tileJSONRequest=null,this._loaded=!0,o.Z(u)||this.fire(new o.k(u))}})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),n(),this.load(!0)}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}serialize(){return o.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n){return o._(this,void 0,void 0,function*(){const u=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.abortController=new AbortController;try{const m=yield we.getImage(this.map._requestManager.transformRequest(u,"Tile"),n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(m&&m.data){this.map._refreshExpiredTiles&&(m.cacheControl||m.expires)&&n.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const v=this.map.painter.context,S=v.gl,M=m.data;n.texture=this.map.painter.getTileTexture(M.width),n.texture?n.texture.update(M,{useMipmap:!0}):(n.texture=new o.T(v,M,S.RGBA,{useMipmap:!0}),n.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST)),n.state="loaded"}}catch(m){if(delete n.abortController,n.aborted)n.state="unloaded";else if(m)throw n.state="errored",m}})}abortTile(n){return o._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController)})}unloadTile(n){return o._(this,void 0,void 0,function*(){n.texture&&this.map.painter.saveTileTexture(n.texture)})}hasTransition(){return!1}}class Br extends Rr{constructor(n,u,m,v){super(n,u,m,v),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(n){return o._(this,void 0,void 0,function*(){const u=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m=this.map._requestManager.transformRequest(u,"Tile");n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.abortController=new AbortController;try{const v=yield we.getImage(m,n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(v&&v.data){const S=v.data;this.map._refreshExpiredTiles&&(v.cacheControl||v.expires)&&n.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const M=o.b(S)&&o.$()?S:yield this.readImageNow(S),k={type:this.type,uid:n.uid,source:this.id,rawImageData:M,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!n.actor||n.state==="expired"){n.actor=this.dispatcher.getActor();const O=yield n.actor.sendAsync({type:"LDT",data:k});n.dem=O,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded"}}}catch(v){if(delete n.abortController,n.aborted)n.state="unloaded";else if(v)throw n.state="errored",v}})}readImageNow(n){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.a0()){const u=n.width+2,m=n.height+2;try{return new o.R({width:u,height:m},yield o.a1(n,-1,-1,u,m))}catch{}}return $.getImageData(n,1)})}_getNeighboringTiles(n){const u=n.canonical,m=Math.pow(2,u.z),v=(u.x-1+m)%m,S=u.x===0?n.wrap-1:n.wrap,M=(u.x+1+m)%m,k=u.x+1===m?n.wrap+1:n.wrap,O={};return O[new o.a2(n.overscaledZ,S,u.z,v,u.y).key]={backfilled:!1},O[new o.a2(n.overscaledZ,k,u.z,M,u.y).key]={backfilled:!1},u.y>0&&(O[new o.a2(n.overscaledZ,S,u.z,v,u.y-1).key]={backfilled:!1},O[new o.a2(n.overscaledZ,n.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},O[new o.a2(n.overscaledZ,k,u.z,M,u.y-1).key]={backfilled:!1}),u.y+1<m&&(O[new o.a2(n.overscaledZ,S,u.z,v,u.y+1).key]={backfilled:!1},O[new o.a2(n.overscaledZ,n.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},O[new o.a2(n.overscaledZ,k,u.z,M,u.y+1).key]={backfilled:!1}),O}unloadTile(n){return o._(this,void 0,void 0,function*(){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&(yield n.actor.sendAsync({type:"RDT",data:{type:this.type,uid:n.uid,source:this.id}}))})}}function Wr(w){return w.type==="GeometryCollection"?w.geometries.map(n=>n.coordinates).flat(1/0):w.coordinates.flat(1/0)}function sn(w){const n=new pr;let u;switch(w.type){case"FeatureCollection":u=w.features.map(m=>Wr(m.geometry)).flat(1/0);break;case"Feature":u=Wr(w.geometry);break;default:u=Wr(w)}if(u.length==0)return n;for(let m=0;m<u.length-1;m+=2)n.extend([u[m],u[m+1]]);return n}class On extends o.E{constructor(n,u,m,v){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:u.data},this.actor=m.getActor(),this.setEventedParent(v),this._data=typeof u.data=="string"?{url:u.data}:{geojson:u.data},this._options=o.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId,u.clusterMaxZoom!==void 0&&this.maxzoom<=u.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${u.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(u.buffer!==void 0?u.buffer:128),tolerance:this._pixelsToTileUnits(u.tolerance!==void 0?u.tolerance:.375),extent:o.a5,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(u.clusterMaxZoom),minPoints:Math.max(2,u.clusterMinPoints||2),extent:o.a5,radius:this._pixelsToTileUnits(u.clusterRadius||50),log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(n){return n*(o.a5/this.tileSize)}_getClusterMaxZoom(n){const u=n?Math.round(n):this.maxzoom-1;return Number.isInteger(n)||n===void 0||o.w(`Integer expected for option 'clusterMaxZoom': provided value "${n}" rounded to "${u}"`),u}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(n){this.map=n,this.load()}setData(n,u){this._data=typeof n=="string"?{url:n}:{geojson:n},this._pendingWorkerUpdate={data:n};const m=this._updateWorkerData();return u?m:this}updateData(n,u){this._pendingWorkerUpdate.diff=o.a6(this._pendingWorkerUpdate.diff,n);const m=this._updateWorkerData();return u?m:this}getData(){return o._(this,void 0,void 0,function*(){const n=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:n})})}getBounds(){return o._(this,void 0,void 0,function*(){return sn(yield this.getData())})}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(n.clusterRadius)),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(n.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(n){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:n,source:this.id}})}getClusterChildren(n){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:n,source:this.id}})}getClusterLeaves(n,u,m){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:n,limit:u,offset:m}})}_updateWorkerData(){return o._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void o.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:n,diff:u}=this._pendingWorkerUpdate,m=this._getLoadGeoJSONParameters(n,u);n!==void 0?this._pendingWorkerUpdate.data=void 0:u&&(this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,yield this._dispatchWorkerUpdate(m)})}_getLoadGeoJSONParameters(n,u){const m=o.e({type:this.type},this.workerOptions);return typeof n=="string"?(m.request=this.map._requestManager.transformRequest($.resolveURL(n),"Source"),m.request.collectResourceTiming=this._collectResourceTiming,m):n!==void 0?(m.data=n,m):(u&&(m.dataDiff=u),m)}_dispatchWorkerUpdate(n){return o._(this,void 0,void 0,function*(){this._isUpdatingWorker=!0,this.fire(new o.l("dataloading",{dataType:"source"}));try{const u=yield this.actor.sendAsync({type:"LD",data:n});if(this._isUpdatingWorker=!1,this._removed||u.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));u.data&&(this._data={geojson:u.data});const m=this._applyDiffToSource(n.dataDiff),v=this._getShouldReloadTileOptions(m),S={dataType:"source"};this._applyResourceTiming(S,u),this.fire(new o.l("data",Object.assign(Object.assign({},S),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},S),{sourceDataType:"content",shouldReloadTileOptions:v})))}catch(u){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(u))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}})}_applyResourceTiming(n,u){var m;if(!this._collectResourceTiming)return;const v=(m=u.resourceTiming)===null||m===void 0?void 0:m[this.id];if(!v)return;const S=v.slice(0);S?.length&&o.e(n,{resourceTiming:S})}_applyDiffToSource(n){if(!n)return;const u=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const v=o.a7(this._data.geojson,u);if(!v)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:v}}if(!this._data.updateable)return;const m=o.a8(this._data.updateable,n,u);return n.removeAll||this._options.cluster?void 0:m}_getShouldReloadTileOptions(n){if(n)return{affectedBounds:n.filter(Boolean).map(u=>sn(u))}}shouldReloadTile(n,{affectedBounds:u}){if(n.state==="loading")return!0;if(n.state==="unloaded")return!1;const{buffer:m,extent:v}=this.workerOptions.geojsonVtOptions,S=function({x:M,y:k,z:O},N=0){const H=o.a3((M-N)/Math.pow(2,O)),J=o.a4((k+1+N)/Math.pow(2,O)),K=o.a3((M+1+N)/Math.pow(2,O)),ne=o.a4((k-N)/Math.pow(2,O));return new pr([H,J],[K,ne])}(n.tileID.canonical,m/v);for(const M of u)if(S.intersects(M))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(n){return o._(this,void 0,void 0,function*(){const u=n.actor?"RT":"LT";n.actor=this.actor;const m={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};n.abortController=new AbortController;const v=yield this.actor.sendAsync({type:u,data:m},n.abortController);delete n.abortController,n.unloadVectorData(),n.aborted||n.loadVectorData(v,this.map.painter,u==="RT")})}abortTile(n){return o._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.aborted=!0})}unloadTile(n){return o._(this,void 0,void 0,function*(){n.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class Tn extends o.E{constructor(n,u,m,v){super(),this.flippedWindingOrder=!1,this.id=n,this.dispatcher=m,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=u}load(n){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const u=yield we.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,n&&(this.coordinates=n),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,o.Z(u)||this.fire(new o.k(u))}})}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=n.url,this.load(n.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(n){this.coordinates=n;const u=n.map(o.a9.fromLngLat);var m;return this.tileID=function(v){const S=o.aa.fromPoints(v),M=S.width(),k=S.height(),O=Math.max(M,k),N=Math.max(0,Math.floor(-Math.log(O)/Math.LN2)),H=Math.pow(2,N);return new o.ac(N,Math.floor((S.minX+S.maxX)/2*H),Math.floor((S.minY+S.maxY)/2*H))}(u),this.terrainTileRanges=this._getOverlappingTileRanges(u),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=u.map(v=>this.tileID.getTilePoint(v)._round()),this.flippedWindingOrder=((m=this.tileCoords)[1].x-m[0].x)*(m[2].y-m[0].y)-(m[1].y-m[0].y)*(m[2].x-m[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,u=n.gl;this.texture||(this.texture=new o.T(n,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let m=!1;for(const v in this.tiles){const S=this.tiles[v];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,m=!0)}m&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(n){const{minX:u,minY:m,maxX:v,maxY:S}=o.aa.fromPoints(n),M={};for(let k=0;k<=o.ab;k++){const O=Math.pow(2,k),N=Math.floor(u*O),H=Math.floor(m*O),J=Math.floor(v*O),K=Math.floor(S*O),ne=(N%O+O)%O,he=J%O,ge=Math.floor(N/O),xe=Math.floor(J/O);M[k]={minWrap:ge,maxWrap:xe,minTileXWrapped:ne,maxTileXWrapped:he,minTileY:H,maxTileY:K}}return M}}class vn extends Tn{constructor(n,u,m,v){super(n,u,m,v),this.roundZoom=!0,this.type="video",this.options=u}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const n=this.options;this.urls=[];for(const u of n.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{const u=yield o.ad(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new o.k(u))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const u=this.video.seekable;n<u.start(0)||n>u.end(0)?this.fire(new o.k(new o.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,u=n.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new o.T(n,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let m=!1;for(const v in this.tiles){const S=this.tiles[v];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,m=!0)}m&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Sr extends Tn{constructor(n,u,m,v){super(n,u,m,v),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(S=>!Array.isArray(S)||S.length!==2||S.some(M=>typeof M!="number"))||this.fire(new o.k(new o.ae(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.ae(`sources.${n}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new o.k(new o.ae(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.ae(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.ae(`sources.${n}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,m=u.gl;this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new o.T(u,this.canvas,m.RGBA,{premultiply:!0}),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE));let v=!1;for(const S in this.tiles){const M=this.tiles[S];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture,v=!0)}v&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const Dr={},ur=w=>{switch(w){case"geojson":return On;case"image":return Tn;case"raster":return Rr;case"raster-dem":return Br;case"vector":return Ir;case"video":return vn;case"canvas":return Sr}return Dr[w]},Zr="RTLPluginLoaded";class Ne extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=dr()}_syncState(n){return this.status=n,this.dispatcher.broadcast("SRPS",{pluginStatus:n,pluginURL:this.url}).catch(u=>{throw this.status="error",u})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(n){return o._(this,arguments,void 0,function*(u,m=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=$.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if(this.status==="unavailable"){if(!m)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(Zr))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let ee=null;function ie(){return ee||(ee=new Ne),ee}var ce,Ce;(function(w){w[w.Base=0]="Base",w[w.Parent=1]="Parent"})(ce||(ce={})),function(w){w[w.Departing=0]="Departing",w[w.Incoming=1]="Incoming"}(Ce||(Ce={}));class Be{constructor(n,u){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=n,this.uid=o.af(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttFingerprint={},this.expiredRequestCount=0,this.state="loading"}isRenderable(n){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(n||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:n,fadingDirection:u,fadingParentID:m,fadeEndTime:v}){this.resetFadeLogic(),this.fadingRole=n,this.fadingDirection=u,this.fadingParentID=m,this.fadeEndTime=v}setSelfFadeLogic(n){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=n}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=j(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,u,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData,this.latestFeatureIndex.encoding=n.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(v,S){const M={};if(!S)return M;for(const k of v){const O=k.layerIds.map(N=>S.getLayer(N)).filter(Boolean);if(O.length!==0){k.layers=O,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map(N=>O.filter(H=>H.id===N)[0]));for(const N of O)M[N.id]=k}}return M}(n.buckets,u?.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const S=this.buckets[v];if(S instanceof o.ah){if(this.hasSymbolBuckets=!0,!m)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const S=this.buckets[v];if(S instanceof o.ah&&S.hasRTLText){this.hasRTLText=!0,ie().lazyLoad();break}}this.queryPadding=0;for(const v in this.buckets){const S=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(v).queryRadius(S))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),this.dashPositions=n.dashPositions}else this.collisionBoxArray=new o.ag}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const m in this.buckets){const v=this.buckets[m];v.uploadPending()&&v.upload(n)}const u=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new o.T(n,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new o.T(n,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,u,m,v,S,M,k,O,N,H,J){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:S,scale:M,tileSize:this.tileSize,pixelPosMatrix:H,transform:O,params:k,queryPadding:this.queryPadding*N,getElevation:J},n,u,m):{}}querySourceFeatures(n,u){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const v=m.loadVTLayers(),S=u&&u.sourceLayer?u.sourceLayer:"",M=v[o.ai]||v[S];if(!M)return;const k=o.aj(u?.filter,u?.globalState),{z:O,x:N,y:H}=this.tileID.canonical,J={z:O,x:N,y:H};for(let K=0;K<M.length;K++){const ne=M.feature(K);if(k.needGeometry){const xe=o.ak(ne,!0);if(!k.filter(new o.H(this.tileID.overscaledZ),xe,this.tileID.canonical))continue}else if(!k.filter(new o.H(this.tileID.overscaledZ),ne))continue;const he=m.getId(ne,S),ge=new o.al(ne,O,N,H,he);ge.tile=J,n.push(ge)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const u=this.expirationTime;if(n.cacheControl){const m=o.am(n.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const m=Date.now();let v=!1;if(this.expirationTime>m)v=!1;else if(u)if(this.expirationTime<u)v=!0;else{const S=this.expirationTime-u;S?this.expirationTime=m+Math.max(S,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const m=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!u.style.hasLayer(v))continue;const S=this.buckets[v],M=S.layers[0].sourceLayer||o.ai,k=m[M],O=n[M];if(!k||!O||Object.keys(O).length===0)continue;S.update(O,k,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const N=u&&u.style&&u.style.getLayer(v);N&&(this.queryPadding=Math.max(this.queryPadding,N.queryRadius(S)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<j()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(n){this.symbolFadeHoldUntil=j()+n}setDependencies(n,u){const m={};for(const v of u)m[v]=!0;this.dependencies[n]=m}hasDependency(n,u){for(const m of n){const v=this.dependencies[m];if(v){for(const S of u)if(v[S])return!0}}return!1}}class Je{constructor(){this.state={},this.stateChanges={},this.deletedStates={},this.revision=0}updateState(n,u,m){const v=String(u);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][v]=this.stateChanges[n][v]||{},o.e(this.stateChanges[n][v],m),this.deletedStates[n]===null){this.deletedStates[n]={};for(const S in this.state[n])S!==v&&(this.deletedStates[n][S]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][v]===null){this.deletedStates[n][v]={};for(const S in this.state[n][v])m[S]||(this.deletedStates[n][v][S]=null)}else for(const S in m)this.deletedStates[n]&&this.deletedStates[n][v]&&this.deletedStates[n][v][S]===null&&delete this.deletedStates[n][v][S]}removeFeatureState(n,u,m){if(this.deletedStates[n]===null)return;const v=String(u);if(this.deletedStates[n]=this.deletedStates[n]||{},m&&u!==void 0)this.deletedStates[n][v]!==null&&(this.deletedStates[n][v]=this.deletedStates[n][v]||{},this.deletedStates[n][v][m]=null);else if(u!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][v])for(m in this.deletedStates[n][v]={},this.stateChanges[n][v])this.deletedStates[n][v][m]=null;else this.deletedStates[n][v]=null;else this.deletedStates[n]=null}getState(n,u){const m=String(u),v=o.e({},(this.state[n]||{})[m],(this.stateChanges[n]||{})[m]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const S=this.deletedStates[n][u];if(S===null)return{};for(const M in S)delete v[M]}return v}initializeTileState(n,u){n.setFeatureState(this.state,u)}coalesceChanges(n,u){const m={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const S={};for(const M in this.stateChanges[v])this.state[v][M]||(this.state[v][M]={}),o.e(this.state[v][M],this.stateChanges[v][M]),S[M]=this.state[v][M];m[v]=S}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const S={};if(this.deletedStates[v]===null)for(const M in this.state[v])S[M]={},this.state[v][M]={};else for(const M in this.deletedStates[v]){if(this.deletedStates[v][M]===null)this.state[v][M]={};else for(const k of Object.keys(this.deletedStates[v][M]))delete this.state[v][M][k];S[M]=this.state[v][M]}m[v]=m[v]||{},o.e(m[v],S)}this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0&&(this.revision++,n.setFeatureState(m,u))}}const Ye=89.25;function Ue(w,n){const u=o.an(n.lat,-o.ao,o.ao);return new o.P(o.Y(n.lng)*w,o.X(u)*w)}function Ke(w,n){return new o.a9(n.x/w,n.y/w).toLngLat()}function gt(w){return w.cameraToCenterDistance*Math.min(.85*Math.tan(o.ap(90-w.pitch)),Math.tan(o.ap(Ye-w.pitch)))}function et(w,n){const u=w.canonical,m=n/o.aq(u.z),v=u.x+Math.pow(2,u.z)*w.wrap,S=o.ar(new Float64Array(16));return o.O(S,S,[v*m,u.y*m,0]),o.Q(S,S,[m/o.a5,m/o.a5,1]),S}function Ae(w,n,u,m,v){const S=o.a9.fromLngLat(w,n),M=v*o.as(1,w.lat),{x:k,y:O,z:N}=Ut(u,m);return new o.a9(S.x+M*-k,S.y+M*-O,S.z+M*-N)}function Ut(w,n){const u=o.ap(w),m=o.ap(n),v=Math.cos(-u),S=Math.sin(u);return{x:S*Math.sin(m),y:-S*Math.cos(m),z:v}}function mr(w,n,u){const m=n.intersectsFrustum(w);if(!u||m===0)return m;const v=n.intersectsPlane(u);return v===0?0:m===2&&v===2?2:1}function Zt(w,n,u){let m=0;const v=(u-n)/10;for(let S=0;S<10;S++)m+=v*Math.pow(Math.cos(n+(S+.5)/10*(u-n)),w);return m}function Yt(w,n){return function(u,m,v,S,M){const k=2*((w-1)/o.at(Math.cos(o.ap(Ye-M))/Math.cos(o.ap(Ye)))-1),O=Math.acos(v/S),N=2*Zt(k-1,0,o.ap(M/2)),H=Math.min(o.ap(Ye),O+o.ap(M/2)),J=Zt(k-1,Math.min(H,O-o.ap(M/2)),H),K=Math.atan(m/v),ne=Math.hypot(m,v);let he=u;return he+=o.at(S/ne/Math.max(.5,Math.cos(o.ap(M/2)))),he+=k*o.at(Math.cos(K))/2,he-=o.at(Math.max(1,J/N/n))/2,he}}const rr=Yt(9.314,3);function vr(w,n){const u=(n.roundZoom?Math.round:Math.floor)(w.zoom+o.at(w.tileSize/n.tileSize));return Math.max(0,u)}function kr(w,n){const u=w.getCameraFrustum(),m=w.getClippingPlane(),v=w.screenPointToMercatorCoordinate(w.getCameraPoint()),S=o.a9.fromLngLat(w.center,w.elevation);v.z=S.z+Math.cos(w.pitchInRadians)*w.cameraToCenterDistance/w.worldSize;const M=w.getCoveringTilesDetailsProvider(),k=M.allowVariableZoom(w,n),O=vr(w,n),N=n.minzoom||0,H=n.maxzoom!==void 0?n.maxzoom:w.maxZoom,J=Math.min(Math.max(0,O),H),K=Math.pow(2,J),ne=[K*v.x,K*v.y,0],he=[K*S.x,K*S.y,0],ge=Math.hypot(S.x-v.x,S.y-v.y),xe=Math.abs(S.z-v.z),_e=Math.hypot(ge,xe),Me=ze=>({zoom:0,x:0,y:0,wrap:ze,fullyVisible:!1}),Oe=[],Pe=[];if(w.renderWorldCopies&&M.allowWorldCopies())for(let ze=1;ze<=3;ze++)Oe.push(Me(-ze)),Oe.push(Me(ze));for(Oe.push(Me(0));Oe.length>0;){const ze=Oe.pop(),$e=ze.x,Re=ze.y;let We=ze.fullyVisible;const dt={x:$e,y:Re,z:ze.zoom},at=M.getTileBoundingVolume(dt,ze.wrap,w.elevation,n);if(!We){const zt=mr(u,at,m);if(zt===0)continue;We=zt===2}const lt=M.distanceToTile2d(v.x,v.y,dt,at);let ct=O;k&&(ct=(n.calculateTileZoom||rr)(w.zoom+o.at(w.tileSize/n.tileSize),lt,xe,_e,w.fov)),ct=(n.roundZoom?Math.round:Math.floor)(ct),ct=Math.max(0,ct);const Dt=Math.min(ct,H);if(ze.wrap=M.getWrap(S,dt,ze.wrap),ze.zoom>=Dt){if(ze.zoom<N)continue;const zt=J-ze.zoom,Pt=ne[0]-.5-($e<<zt),Nt=ne[1]-.5-(Re<<zt),zr=n.reparseOverscaled?Math.max(ze.zoom,ct):ze.zoom;Pe.push({tileID:new o.a2(ze.zoom===H?zr:ze.zoom,ze.wrap,ze.zoom,$e,Re),distanceSq:o.au([he[0]-.5-$e,he[1]-.5-Re]),tileDistanceToCamera:Math.sqrt(Pt*Pt+Nt*Nt)})}else for(let zt=0;zt<4;zt++)Oe.push({zoom:ze.zoom+1,x:($e<<1)+zt%2,y:(Re<<1)+(zt>>1),wrap:ze.wrap,fullyVisible:We})}return Pe.sort((ze,$e)=>ze.distanceSq-$e.distanceSq).map(ze=>ze.tileID)}const nn=o.aa.fromPoints([new o.P(0,0),new o.P(o.a5,o.a5)]);function Xr(w){return w==="raster"||w==="image"||w==="video"}function wn(w,n,u,m,v,S,M){if(!n.hasData())return!1;const{tileID:k,fadingRole:O,fadingDirection:N,fadingParentID:H}=n;if(O===ce.Base&&N===Ce.Incoming&&H)return u[H.key]=H,!0;const J=Math.max(k.overscaledZ-v,S);for(let K=k.overscaledZ-1;K>=J;K--){const ne=k.scaledTo(K),he=w.getLoadedTile(ne);if(he)return n.setCrossFadeLogic({fadingRole:ce.Base,fadingDirection:Ce.Incoming,fadingParentID:he.tileID,fadeEndTime:m+M}),he.setCrossFadeLogic({fadingRole:ce.Parent,fadingDirection:Ce.Departing,fadeEndTime:m+M}),u[ne.key]=ne,!0}return!1}function on(w,n,u,m,v,S){if(!n.hasData())return!1;const M=n.tileID.children(v);let k=Mt(w,n,M,u,m,v,S);if(k)return!0;for(const O of M)Mt(w,n,O.children(v),u,m,v,S)&&(k=!0);return k}function Mt(w,n,u,m,v,S,M){if(u[0].overscaledZ>=S)return!1;let k=!1;for(const O of u){const N=w.getLoadedTile(O);if(!N)continue;const{fadingRole:H,fadingDirection:J,fadingParentID:K}=N;H===ce.Base&&J===Ce.Departing&&K||(N.setCrossFadeLogic({fadingRole:ce.Base,fadingDirection:Ce.Departing,fadingParentID:n.tileID,fadeEndTime:v+M}),n.setCrossFadeLogic({fadingRole:ce.Parent,fadingDirection:Ce.Incoming,fadeEndTime:v+M})),m[O.key]=O,k=!0}return k}function Fr(w,n,u,m){const v=w.tileID;return!!w.selfFading||!w.hasData()&&!!n.has(v)&&(w.setSelfFadeLogic(u+m),!0)}function en(w,n){var u;w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let m=n.tileID.canonical.x-w.tileID.canonical.x;const v=n.tileID.canonical.y-w.tileID.canonical.y,S=Math.pow(2,w.tileID.canonical.z),M=n.tileID.key;m===0&&v===0||Math.abs(v)>1||(Math.abs(m)>1&&(Math.abs(m+S)===1?m+=S:Math.abs(m-S)===1&&(m-=S)),n.dem&&w.dem&&(w.dem.backfillBorder(n.dem,m,v),!((u=w.neighboringTiles)===null||u===void 0)&&u[M]&&(w.neighboringTiles[M].backfilled=!0)))}class Io{constructor(){this._tiles={}}handleWrapJump(n){const u={};for(const m in this._tiles){const v=this._tiles[m];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+n),u[v.tileID.key]=v}this._tiles=u}setFeatureState(n,u){for(const m in this._tiles)this._tiles[m].setFeatureState(n,u)}getAllTiles(){return Object.values(this._tiles)}getAllIds(n=!1){return n?Object.values(this._tiles).map(u=>u.tileID).sort(o.aw).map(u=>u.key):Object.keys(this._tiles)}getTileById(n){return this._tiles[n]}setTile(n,u){this._tiles[n]=u}deleteTileById(n){delete this._tiles[n]}getLoadedTile(n){const u=this.getTileById(n.key);return u?.hasData()?u:null}isIdRenderable(n,u=!1){var m;return(m=this.getTileById(n))===null||m===void 0?void 0:m.isRenderable(u)}getRenderableIds(n=0,u){const m=[];for(const v of this.getAllIds())this.isIdRenderable(v,u)&&m.push(this.getTileById(v));return u?m.sort((v,S)=>{const M=v.tileID,k=S.tileID,O=new o.P(M.canonical.x,M.canonical.y)._rotate(-n),N=new o.P(k.canonical.x,k.canonical.y)._rotate(-n);return M.overscaledZ-k.overscaledZ||N.y-O.y||N.x-O.x}).map(v=>v.tileID.key):m.map(v=>v.tileID).sort(o.aw).map(v=>v.key)}}class Ti extends o.E{constructor(n,u,m){super(),this.id=n,this.dispatcher=m,this.on("data",v=>this._dataHandler(v)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((v,S,M,k)=>{const O=new(ur(S.type))(v,S,M,k);if(O.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${O.id}`);return O})(n,u,m,this),this._inViewTiles=new Io,this._outOfViewCache=new o.ax(0,v=>this._unloadTile(v)),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new Je,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){for(const u of this._inViewTiles.getAllTiles())u.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n),this._inViewTiles=new Io}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n of this._inViewTiles.getAllTiles())if(n.state!=="loaded"&&n.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,u,m){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(n),this._tileLoaded(n,u,m)}catch(v){n.state="errored",v.status!==404?this._source.fire(new o.k(v,{tile:n})):this.update(this.transform,this.terrain)}})}_unloadTile(n){this._source.unloadTile&&this._source.unloadTile(n)}_abortTile(n){this._source.abortTile&&this._source.abortTile(n),this._source.fire(new o.l("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const u of this._inViewTiles.getAllTiles())u.upload(n),u.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(n){var u;return this._inViewTiles.getRenderableIds((u=this.transform)===null||u===void 0?void 0:u.bearingInRadians,n)}hasRenderableParent(n){const u=n.overscaledZ-1;if(u>=this._source.minzoom){const m=this.getLoadedTile(n.scaledTo(u));if(m)return this._inViewTiles.isIdRenderable(m.tileID.key)}return!1}reload(n,u=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const m of this._inViewTiles.getAllIds()){const v=this._inViewTiles.getTileById(m);u&&!this._source.shouldReloadTile(v,u)||(n?this._reloadTile(m,"expired"):v.state!=="errored"&&this._reloadTile(m,"reloading"))}}}_reloadTile(n,u){return o._(this,void 0,void 0,function*(){const m=this._inViewTiles.getTileById(n);m&&(m.state!=="loading"&&(m.state=u),yield this._loadTile(m,n,u))})}_tileLoaded(n,u,m){n.timeAdded=j(),n.selfFading&&(n.fadeEndTime=n.timeAdded+this._rasterFadeDuration),m==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(u,n),this.getSource().type==="raster-dem"&&n.dem&&function(v,S){var M,k;const O=S.getRenderableIds();for(const N of O){if(!v.neighboringTiles||!v.neighboringTiles[N])continue;const H=S.getTileById(N);v.neighboringTiles[N].backfilled||en(v,H),!((k=(M=H.neighboringTiles)===null||M===void 0?void 0:M[v.tileID.key])===null||k===void 0)&&k.backfilled||en(H,v)}}(n,this._inViewTiles),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:n,coord:n.tileID}))}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._inViewTiles.getTileById(n)}_retainLoadedChildren(n,u){const m=this._getLoadedDescendents(u),v=new Set;for(const S of u){const M=m[S.key];if(!M?.length){v.add(S);continue}const k=S.overscaledZ+Ti.maxOverzooming,O=M.filter(J=>J.tileID.overscaledZ<=k);if(!O.length){v.add(S);continue}const N=Math.min(...O.map(J=>J.tileID.overscaledZ)),H=O.filter(J=>J.tileID.overscaledZ===N).map(J=>J.tileID);for(const J of H)n[J.key]=J;this._areDescendentsComplete(H,N,S.overscaledZ)||v.add(S)}return v}_getLoadedDescendents(n){var u;const m={};for(const v of this._inViewTiles.getAllTiles().filter(S=>S.hasData()))for(const S of n)v.tileID.isChildOf(S)&&(m[u=S.key]||(m[u]=[])).push(v);return m}_areDescendentsComplete(n,u,m){return n.length===1&&n[0].isOverscaled()?n[0].overscaledZ===u:Math.pow(4,u-m)===n.length}getLoadedTile(n){return this._inViewTiles.getLoadedTile(n)}updateCacheSize(n){const u=Math.ceil(n.width/this._source.tileSize)+1,m=Math.ceil(n.height/this._source.tileSize)+1,v=Math.floor(u*m*(this._maxTileCacheZoomLevels===null?o.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),S=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._outOfViewCache.setMaxSize(S)}handleWrapJump(n){const u=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);this._prevLng=n,u&&(this._inViewTiles.handleWrapJump(u),this._resetTileReloadTimers())}update(n,u){if(!this._sourceLoaded||this._paused)return;let m;this.transform=n,this.terrain=u,this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?m=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(O=>new o.a2(O.canonical.z,O.wrap,O.canonical.z,O.canonical.x,O.canonical.y)):(m=kr(n,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?n.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(m=m.filter(O=>this._source.hasTile(O)))):m=[],this.usedForTerrain&&(m=this._addTerrainIdealTiles(m));const v=m.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,v&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const S=vr(n,this._source),M=this._updateRetainedTiles(m,S),k=Xr(this._source.type);k&&this._rasterFadeDuration>0&&!u&&function(O,N,H,J,K,ne,he){const ge=j(),xe=o.av(N);for(const _e of N){const Me=O.getTileById(_e.key);Me.fadingDirection!==Ce.Departing&&Me.fadeOpacity!==0||Me.resetFadeLogic(),wn(O,Me,H,ge,J,K,he)||on(O,Me,H,ge,ne,he)||Fr(Me,xe,ge,he)||Me.resetFadeLogic()}}(this._inViewTiles,m,M,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),k?this._cleanUpRasterTiles(M):this._cleanUpVectorTiles(M)}_cleanUpRasterTiles(n){for(const u of this._inViewTiles.getAllIds())n[u]||this._removeTile(u)}_cleanUpVectorTiles(n){for(const u of this._inViewTiles.getAllIds()){const m=this._inViewTiles.getTileById(u);n[u]?m.clearSymbolFadeHold():m.hasSymbolBuckets?m.holdingForSymbolFade()?m.symbolFadeFinished()&&this._removeTile(u):m.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(u)}}_addTerrainIdealTiles(n){const u=[];for(const m of n)if(m.canonical.z>this._source.minzoom){const v=m.scaledTo(m.canonical.z-1);u.push(v);const S=m.scaledTo(Math.max(this._source.minzoom,Math.min(m.canonical.z,5)));u.push(S)}return n.concat(u)}releaseSymbolFadeTiles(){for(const n of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(n).holdingForSymbolFade()&&this._removeTile(n)}_updateRetainedTiles(n,u){var m;const v=new Set;for(const N of n)this._addTile(N).hasData()||v.add(N);const S=n.reduce((N,H)=>(N[H.key]=H,N),{}),M=this._retainLoadedChildren(S,v),k={},O=Math.max(u-Ti.maxUnderzooming,this._source.minzoom);for(const N of M){let H=this._inViewTiles.getTileById(N.key),J=H?.wasRequested();for(let K=N.overscaledZ-1;K>=O;--K){const ne=N.scaledTo(K);if(k[ne.key])break;if(k[ne.key]=!0,H=this.getTile(ne),!H&&J&&(H=this._addTile(ne)),H){const he=H.hasData();if((he||!(!((m=this.map)===null||m===void 0)&&m.cancelPendingTileRequestsWhileZooming)||J)&&(S[ne.key]=ne),J=H.wasRequested(),he)break}}}return S}_addTile(n){let u=this._inViewTiles.getTileById(n.key);if(u)return u;u=this._outOfViewCache.getAndRemove(n),u&&(u.resetFadeLogic(),this._setTileReloadTimer(n.key,u),u.tileID=n,this._state.initializeTileState(u,this.map?this.map.painter:null));const m=u;return u||(u=new Be(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(u,n.key,u.state)),u.uses++,this._inViewTiles.setTile(n.key,u),m||this._source.fire(new o.l("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(n,u){this._clearTileReloadTimer(n);const m=u.getExpiryTimeout();m&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},m))}_clearTileReloadTimer(n){const u=this._timers[n];u&&(clearTimeout(u),delete this._timers[n])}_resetTileReloadTimers(){for(const n in this._timers)clearTimeout(this._timers[n]),delete this._timers[n];for(const n of this._inViewTiles.getAllIds()){const u=this._inViewTiles.getTileById(n);this._setTileReloadTimer(n,u)}}refreshTiles(n){for(const u of this._inViewTiles.getAllIds()){const m=this._inViewTiles.getTileById(u);(this._inViewTiles.isIdRenderable(u)||m.state=="errored")&&n.some(v=>v.equals(m.tileID.canonical))&&this._reloadTile(u,"expired")}}_removeTile(n){const u=this._inViewTiles.getTileById(n);u&&(u.uses--,this._inViewTiles.deleteTileById(n),this._clearTileReloadTimer(n),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._outOfViewCache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(n){n.dataType==="source"&&(n.sourceDataType!=="metadata"?n.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(n.sourceDataChanged,n.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n of this._inViewTiles.getAllIds())this._removeTile(n);this._outOfViewCache.reset()}tilesIn(n,u,m){const v=[],S=this.transform;if(!S)return v;const M=S.getCoveringTilesDetailsProvider().allowWorldCopies(),k=m?S.getCameraQueryGeometry(n):n,O=ne=>S.screenPointToMercatorCoordinate(ne,this.terrain),N=this.transformBbox(n,O,!M),H=this.transformBbox(k,O,!M),J=this.getIds(),K=o.aa.fromPoints(H);for(let ne=0;ne<J.length;ne++){const he=this._inViewTiles.getTileById(J[ne]);if(he.holdingForSymbolFade())continue;const ge=M?[he.tileID]:[he.tileID.unwrapTo(-1),he.tileID.unwrapTo(0)],xe=Math.pow(2,S.zoom-he.tileID.overscaledZ),_e=u*he.queryPadding*o.a5/he.tileSize/xe;for(const Me of ge){const Oe=K.map(Pe=>Me.getTilePoint(new o.a9(Pe.x,Pe.y)));if(Oe.expandBy(_e),Oe.intersects(nn)){const Pe=N.map($e=>Me.getTilePoint($e)),ze=H.map($e=>Me.getTilePoint($e));v.push({tile:he,tileID:M?Me:Me.unwrapTo(0),queryGeometry:Pe,cameraQueryGeometry:ze,scale:xe})}}}return v}transformBbox(n,u,m){let v=n.map(u);if(m){const S=o.aa.fromPoints(n);S.shrinkBy(.001*Math.min(S.width(),S.height()));const M=S.map(u);o.aa.fromPoints(v).covers(M)||(v=v.map(k=>k.x>.5?new o.a9(k.x-1,k.y,k.z):k))}return v}getVisibleCoordinates(n){const u=this.getRenderableIds(n).map(m=>this._inViewTiles.getTileById(m).tileID);return this.transform&&this.transform.populateCache(u),u}hasTransition(){return!!this._source.hasTransition()||!(!Xr(this._source.type)||!function(n,u){if(u<=0)return!1;const m=j();for(const v of n.getAllTiles())if(v.fadeEndTime>=m)return!0;return!1}(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(n){this._rasterFadeDuration=n}setFeatureState(n,u,m){this._state.updateState(n=n||o.ai,u,m)}removeFeatureState(n,u,m){this._state.removeFeatureState(n=n||o.ai,u,m)}getFeatureState(n,u){return this._state.getState(n=n||o.ai,u)}setDependencies(n,u,m){const v=this._inViewTiles.getTileById(n);v&&v.setDependencies(u,m)}reloadTilesForDependencies(n,u){for(const m of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(m).hasDependency(n,u)&&this._reloadTile(m,"reloading");this._outOfViewCache.filter(m=>!m.hasDependency(n,u))}areTilesLoaded(){for(const n of this._inViewTiles.getAllTiles())if(n.state!=="loaded"&&n.state!=="errored")return!1;return!0}}Ti.maxUnderzooming=10,Ti.maxOverzooming=3;class Ot{constructor(n,u){this.reset(n,u)}reset(n,u){this.points=n||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=o.an(n,0,1);let u=1,m=this._distances[u];const v=n*this.paddedLength+this.padding;for(;m<v&&u<this._distances.length;)m=this._distances[++u];const S=u-1,M=this._distances[S],k=m-M,O=k>0?(v-M)/k:0;return this.points[S].mult(1-O).add(this.points[u].mult(O))}}function it(w,n){let u=!0;return w==="always"||w!=="never"&&n!=="never"||(u=!1),u}class tt{constructor(n,u,m){const v=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(n/m),this.yCellCount=Math.ceil(u/m);for(let M=0;M<this.xCellCount*this.yCellCount;M++)v.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=u,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,u,m,v,S){this._forEachCell(u,m,v,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(S)}insertCircle(n,u,m,v){this._forEachCell(u-v,m-v,u+v,m+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(u),this.circles.push(m),this.circles.push(v)}_insertBoxCell(n,u,m,v,S,M){this.boxCells[S].push(M)}_insertCircleCell(n,u,m,v,S,M){this.circleCells[S].push(M)}_query(n,u,m,v,S,M,k){if(m<0||n>this.width||v<0||u>this.height)return[];const O=[];if(n<=0&&u<=0&&this.width<=m&&this.height<=v){if(S)return[{key:null,x1:n,y1:u,x2:m,y2:v}];for(let N=0;N<this.boxKeys.length;N++)O.push({key:this.boxKeys[N],x1:this.bboxes[4*N],y1:this.bboxes[4*N+1],x2:this.bboxes[4*N+2],y2:this.bboxes[4*N+3]});for(let N=0;N<this.circleKeys.length;N++){const H=this.circles[3*N],J=this.circles[3*N+1],K=this.circles[3*N+2];O.push({key:this.circleKeys[N],x1:H-K,y1:J-K,x2:H+K,y2:J+K})}}else this._forEachCell(n,u,m,v,this._queryCell,O,{hitTest:S,overlapMode:M,seenUids:{box:{},circle:{}}},k);return O}query(n,u,m,v){return this._query(n,u,m,v,!1,null)}hitTest(n,u,m,v,S,M){return this._query(n,u,m,v,!0,S,M).length>0}hitTestCircle(n,u,m,v,S){const M=n-m,k=n+m,O=u-m,N=u+m;if(k<0||M>this.width||N<0||O>this.height)return!1;const H=[];return this._forEachCell(M,O,k,N,this._queryCellCircle,H,{hitTest:!0,overlapMode:v,circle:{x:n,y:u,radius:m},seenUids:{box:{},circle:{}}},S),H.length>0}_queryCell(n,u,m,v,S,M,k,O){const{seenUids:N,hitTest:H,overlapMode:J}=k,K=this.boxCells[S];if(K!==null){const he=this.bboxes;for(const ge of K)if(!N.box[ge]){N.box[ge]=!0;const xe=4*ge,_e=this.boxKeys[ge];if(n<=he[xe+2]&&u<=he[xe+3]&&m>=he[xe+0]&&v>=he[xe+1]&&(!O||O(_e))&&(!H||!it(J,_e.overlapMode))&&(M.push({key:_e,x1:he[xe],y1:he[xe+1],x2:he[xe+2],y2:he[xe+3]}),H))return!0}}const ne=this.circleCells[S];if(ne!==null){const he=this.circles;for(const ge of ne)if(!N.circle[ge]){N.circle[ge]=!0;const xe=3*ge,_e=this.circleKeys[ge];if(this._circleAndRectCollide(he[xe],he[xe+1],he[xe+2],n,u,m,v)&&(!O||O(_e))&&(!H||!it(J,_e.overlapMode))){const Me=he[xe],Oe=he[xe+1],Pe=he[xe+2];if(M.push({key:_e,x1:Me-Pe,y1:Oe-Pe,x2:Me+Pe,y2:Oe+Pe}),H)return!0}}}return!1}_queryCellCircle(n,u,m,v,S,M,k,O){const{circle:N,seenUids:H,overlapMode:J}=k,K=this.boxCells[S];if(K!==null){const he=this.bboxes;for(const ge of K)if(!H.box[ge]){H.box[ge]=!0;const xe=4*ge,_e=this.boxKeys[ge];if(this._circleAndRectCollide(N.x,N.y,N.radius,he[xe+0],he[xe+1],he[xe+2],he[xe+3])&&(!O||O(_e))&&!it(J,_e.overlapMode))return M.push(!0),!0}}const ne=this.circleCells[S];if(ne!==null){const he=this.circles;for(const ge of ne)if(!H.circle[ge]){H.circle[ge]=!0;const xe=3*ge,_e=this.circleKeys[ge];if(this._circlesCollide(he[xe],he[xe+1],he[xe+2],N.x,N.y,N.radius)&&(!O||O(_e))&&!it(J,_e.overlapMode))return M.push(!0),!0}}}_forEachCell(n,u,m,v,S,M,k,O){const N=this._convertToXCellCoord(n),H=this._convertToYCellCoord(u),J=this._convertToXCellCoord(m),K=this._convertToYCellCoord(v);for(let ne=N;ne<=J;ne++)for(let he=H;he<=K;he++)if(S.call(this,n,u,m,v,this.xCellCount*he+ne,M,k,O))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,u,m,v,S,M){const k=v-n,O=S-u,N=m+M;return N*N>k*k+O*O}_circleAndRectCollide(n,u,m,v,S,M,k){const O=(M-v)/2,N=Math.abs(n-(v+O));if(N>O+m)return!1;const H=(k-S)/2,J=Math.abs(u-(S+H));if(J>H+m)return!1;if(N<=O||J<=H)return!0;const K=N-O,ne=J-H;return K*K+ne*ne<=m*m}}function Ht(w,n,u){const m=o.N();if(!w){const{vecSouth:J,vecEast:K}=Ur(n),ne=P();ne[0]=K[0],ne[1]=K[1],ne[2]=J[0],ne[3]=J[1],v=ne,(H=(M=(S=ne)[0])*(N=S[3])-(O=S[2])*(k=S[1]))&&(v[0]=N*(H=1/H),v[1]=-k*H,v[2]=-O*H,v[3]=M*H),m[0]=ne[0],m[1]=ne[1],m[4]=ne[2],m[5]=ne[3]}var v,S,M,k,O,N,H;return o.Q(m,m,[1/u,1/u,1]),m}function Mr(w,n,u,m){if(w){const v=o.N();if(!n){const{vecSouth:S,vecEast:M}=Ur(u);v[0]=M[0],v[1]=M[1],v[4]=S[0],v[5]=S[1]}return o.Q(v,v,[m,m,1]),v}return u.pixelsToClipSpaceMatrix}function Ur(w){const n=Math.cos(w.rollInRadians),u=Math.sin(w.rollInRadians),m=Math.cos(w.pitchInRadians),v=Math.cos(w.bearingInRadians),S=Math.sin(w.bearingInRadians),M=o.aC();M[0]=-v*m*u-S*n,M[1]=-S*m*u+v*n;const k=o.aD(M);k<1e-9?o.aE(M):o.aF(M,M,1/k);const O=o.aC();O[0]=v*m*n-S*u,O[1]=S*m*n+v*u;const N=o.aD(O);return N<1e-9?o.aE(O):o.aF(O,O,1/N),{vecEast:O,vecSouth:M}}function sr(w,n,u,m){let v;m?(v=[w,n,m(w,n),1],o.aH(v,v,u)):(v=[w,n,0,1],os(v,v,u));const S=v[3];return{point:new o.P(v[0]/S,v[1]/S),signedDistanceFromCamera:S,isOccluded:!1}}function An(w,n){return .5+w/n*.5}function Vi(w,n){return w.x>=-n[0]&&w.x<=n[0]&&w.y>=-n[1]&&w.y<=n[1]}function La(w,n,u,m,v,S,M,k,O,N,H,J,K){const ne=u?w.textSizeData:w.iconSizeData,he=o.ay(ne,n.transform.zoom),ge=[256/n.width*2+1,256/n.height*2+1],xe=u?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;xe.clear();const _e=w.lineVertexArray,Me=u?w.text.placedSymbolArray:w.icon.placedSymbolArray,Oe=n.transform.width/n.transform.height;let Pe=!1;for(let ze=0;ze<Me.length;ze++){const $e=Me.get(ze);if($e.hidden||$e.writingMode===o.az.vertical&&!Pe){zs($e.numGlyphs,xe);continue}Pe=!1;const Re=new o.P($e.anchorX,$e.anchorY),We={getElevation:K,pitchedLabelPlaneMatrix:m,lineVertexArray:_e,pitchWithMap:S,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:n.transform,tileAnchorPoint:Re,unwrappedTileID:O,width:N,height:H,translation:J},dt=Pr($e.anchorX,$e.anchorY,We);if(!Vi(dt.point,ge)){zs($e.numGlyphs,xe);continue}const at=An(n.transform.cameraToCenterDistance,dt.signedDistanceFromCamera),lt=o.aA(ne,he,$e),ct=S?lt*n.transform.getPitchedTextCorrection($e.anchorX,$e.anchorY,O)/at:lt*at,Dt=vl({projectionContext:We,pitchedLabelPlaneMatrixInverse:v,symbol:$e,fontSize:ct,flip:!1,keepUpright:M,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:xe,aspectRatio:Oe,rotateToLine:k});Pe=Dt.useVertical,(Dt.notEnoughRoom||Pe||Dt.needsFlipping&&vl({projectionContext:We,pitchedLabelPlaneMatrixInverse:v,symbol:$e,fontSize:ct,flip:!0,keepUpright:M,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:xe,aspectRatio:Oe,rotateToLine:k}).notEnoughRoom)&&zs($e.numGlyphs,xe)}u?w.text.dynamicLayoutVertexBuffer.updateData(xe):w.icon.dynamicLayoutVertexBuffer.updateData(xe)}function yl(w,n,u,m,v,S,M,k){const O=S.glyphStartIndex+S.numGlyphs,N=S.lineStartIndex,H=S.lineStartIndex+S.lineLength,J=n.getoffsetX(S.glyphStartIndex),K=n.getoffsetX(O-1),ne=hi(w*J,u,m,v,S.segment,N,H,k,M);if(!ne)return null;const he=hi(w*K,u,m,v,S.segment,N,H,k,M);return he?k.projectionCache.anyProjectionOccluded?null:{first:ne,last:he}:null}function Un(w,n,u,m){return w===o.az.horizontal&&Math.abs(u.y-n.y)>Math.abs(u.x-n.x)*m?{useVertical:!0}:(w===o.az.vertical?n.y<u.y:n.x>u.x)?{needsFlipping:!0}:null}function vl(w){const{projectionContext:n,pitchedLabelPlaneMatrixInverse:u,symbol:m,fontSize:v,flip:S,keepUpright:M,glyphOffsetArray:k,dynamicLayoutVertexArray:O,aspectRatio:N,rotateToLine:H}=w,J=v/24,K=m.lineOffsetX*J,ne=m.lineOffsetY*J;let he;if(m.numGlyphs>1){const ge=m.glyphStartIndex+m.numGlyphs,xe=m.lineStartIndex,_e=m.lineStartIndex+m.lineLength,Me=yl(J,k,K,ne,S,m,H,n);if(!Me)return{notEnoughRoom:!0};const Oe=lc(Me.first.point.x,Me.first.point.y,n,u),Pe=lc(Me.last.point.x,Me.last.point.y,n,u);if(M&&!S){const ze=Un(m.writingMode,Oe,Pe,N);if(ze)return ze}he=[Me.first];for(let ze=m.glyphStartIndex+1;ze<ge-1;ze++){const $e=hi(J*k.getoffsetX(ze),K,ne,S,m.segment,xe,_e,n,H);if(!$e)return{notEnoughRoom:!0};he.push($e)}he.push(Me.last)}else{if(M&&!S){const xe=an(n.tileAnchorPoint.x,n.tileAnchorPoint.y,n).point,_e=m.lineStartIndex+m.segment+1,Me=new o.P(n.lineVertexArray.getx(_e),n.lineVertexArray.gety(_e)),Oe=an(Me.x,Me.y,n),Pe=Oe.signedDistanceFromCamera>0?Oe.point:na(n.tileAnchorPoint,Me,xe,1,n),ze=lc(xe.x,xe.y,n,u),$e=lc(Pe.x,Pe.y,n,u),Re=Un(m.writingMode,ze,$e,N);if(Re)return Re}const ge=hi(J*k.getoffsetX(m.glyphStartIndex),K,ne,S,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,n,H);if(!ge||n.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};he=[ge]}for(const ge of he)o.aG(O,ge.point,ge.angle);return{}}function na(w,n,u,m,v){const S=w.add(w.sub(n)._unit()),M=an(S.x,S.y,v).point,k=u.sub(M);return u.add(k._mult(m/k.mag()))}function Zi(w,n,u){const m=n.projectionCache;if(m.projections[w])return m.projections[w];const v=new o.P(n.lineVertexArray.getx(w),n.lineVertexArray.gety(w)),S=an(v.x,v.y,n);if(S.signedDistanceFromCamera>0)return m.projections[w]=S.point,m.anyProjectionOccluded=m.anyProjectionOccluded||S.isOccluded,S.point;const M=w-u.direction;return na(u.distanceFromAnchor===0?n.tileAnchorPoint:new o.P(n.lineVertexArray.getx(M),n.lineVertexArray.gety(M)),v,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,n)}function an(w,n,u){const m=w+u.translation[0],v=n+u.translation[1];let S;return u.pitchWithMap?(S=sr(m,v,u.pitchedLabelPlaneMatrix,u.getElevation),S.isOccluded=!1):(S=u.transform.projectTileCoordinates(m,v,u.unwrappedTileID,u.getElevation),S.point.x=(.5*S.point.x+.5)*u.width,S.point.y=(.5*-S.point.y+.5)*u.height),S}function lc(w,n,u,m){if(u.pitchWithMap){const v=[w,n,0,1];return o.aH(v,v,m),u.transform.projectTileCoordinates(v[0]/v[3],v[1]/v[3],u.unwrappedTileID,u.getElevation).point}return{x:w/u.width*2-1,y:1-n/u.height*2}}function Pr(w,n,u){return u.transform.projectTileCoordinates(w,n,u.unwrappedTileID,u.getElevation)}function Mi(w,n,u){return w._unit()._perp()._mult(n*u)}function ln(w,n,u,m,v,S,M,k,O){if(k.projectionCache.offsets[w])return k.projectionCache.offsets[w];const N=u.add(n);if(w+O.direction<m||w+O.direction>=v)return k.projectionCache.offsets[w]=N,N;const H=Zi(w+O.direction,k,O),J=Mi(H.sub(u),M,O.direction),K=u.add(J),ne=H.add(J);return k.projectionCache.offsets[w]=o.aI(S,N,K,ne)||N,k.projectionCache.offsets[w]}function hi(w,n,u,m,v,S,M,k,O){const N=m?w-n:w+n;let H=N>0?1:-1,J=0;m&&(H*=-1,J=Math.PI),H<0&&(J+=Math.PI);let K,ne=H>0?S+v:S+v+1;k.projectionCache.cachedAnchorPoint?K=k.projectionCache.cachedAnchorPoint:(K=an(k.tileAnchorPoint.x,k.tileAnchorPoint.y,k).point,k.projectionCache.cachedAnchorPoint=K);let he,ge,xe=K,_e=K,Me=0,Oe=0;const Pe=Math.abs(N),ze=[];let $e;for(;Me+Oe<=Pe;){if(ne+=H,ne<S||ne>=M)return null;Me+=Oe,_e=xe,ge=he;const dt={absOffsetX:Pe,direction:H,distanceFromAnchor:Me,previousVertex:_e};if(xe=Zi(ne,k,dt),u===0)ze.push(_e),$e=xe.sub(_e);else{let at;const lt=xe.sub(_e);at=lt.mag()===0?Mi(Zi(ne+H,k,dt).sub(xe),u,H):Mi(lt,u,H),ge||(ge=_e.add(at)),he=ln(ne,at,xe,S,M,ge,u,k,dt),ze.push(ge),$e=he.sub(ge)}Oe=$e.mag()}const Re=$e._mult((Pe-Me)/Oe)._add(ge||_e),We=J+Math.atan2(xe.y-_e.y,xe.x-_e.x);return ze.push(Re),{point:Re,angle:O?We:0,path:ze}}const Pi=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function zs(w,n){for(let u=0;u<w;u++){const m=n.length;n.resize(m+4),n.float32.set(Pi,3*m)}}function os(w,n,u){const m=n[0],v=n[1];return w[0]=u[0]*m+u[4]*v+u[12],w[1]=u[1]*m+u[5]*v+u[13],w[3]=u[3]*m+u[7]*v+u[15],w}const gn=100;class dh{constructor(n,u=new tt(n.width+200,n.height+200,25),m=new tt(n.width+200,n.height+200,25)){this.transform=n,this.grid=u,this.ignoredGrid=m,this.pitchFactor=Math.cos(n.pitch*Math.PI/180)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+gn,this.screenBottomBoundary=n.height+gn,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,u,m,v,S,M,k,O,N,H,J,K){const ne=this.projectAndGetPerspectiveRatio(n.anchorPointX+O[0],n.anchorPointY+O[1],S,H,K),he=m*ne.perspectiveRatio;let ge;if(M||k)ge=this._projectCollisionBox(n,he,v,S,M,k,O,ne,H,J,K);else{const $e=ne.x+(J?J.x*he:0),Re=ne.y+(J?J.y*he:0);ge={allPointsOccluded:!1,box:[$e+n.x1*he,Re+n.y1*he,$e+n.x2*he,Re+n.y2*he]}}const[xe,_e,Me,Oe]=ge.box,Pe=M?ge.allPointsOccluded:ne.isOccluded;let ze=Pe;return ze||(ze=ne.perspectiveRatio<this.perspectiveRatioCutoff),ze||(ze=!this.isInsideGrid(xe,_e,Me,Oe)),ze||u!=="always"&&this.grid.hitTest(xe,_e,Me,Oe,u,N)?{box:[xe,_e,Me,Oe],placeable:!1,offscreen:!1,occluded:Pe}:{box:[xe,_e,Me,Oe],placeable:!0,offscreen:this.isOffscreen(xe,_e,Me,Oe),occluded:Pe}}placeCollisionCircles(n,u,m,v,S,M,k,O,N,H,J,K,ne,he){const ge=[],xe=new o.P(u.anchorX,u.anchorY),_e=this.getPerspectiveRatio(xe.x,xe.y,M,he),Me=(N?S*this.transform.getPitchedTextCorrection(u.anchorX,u.anchorY,M)/_e:S*_e)/o.aM,Oe={getElevation:he,pitchedLabelPlaneMatrix:k,lineVertexArray:m,pitchWithMap:N,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:xe,unwrappedTileID:M,width:this.transform.width,height:this.transform.height,translation:ne},Pe=yl(Me,v,u.lineOffsetX*Me,u.lineOffsetY*Me,!1,u,!1,Oe);let ze=!1,$e=!1,Re=!0;if(Pe){const We=.5*J*_e+K,dt=new o.P(-100,-100),at=new o.P(this.screenRightBoundary,this.screenBottomBoundary),lt=new Ot,ct=Pe.first,Dt=Pe.last;let zt=[];for(let zr=ct.path.length-1;zr>=1;zr--)zt.push(ct.path[zr]);for(let zr=1;zr<Dt.path.length;zr++)zt.push(Dt.path[zr]);const Pt=2.5*We;if(N){const zr=this.projectPathToScreenSpace(zt,Oe);zt=zr.some(xn=>xn.signedDistanceFromCamera<=0)?[]:zr.map(xn=>xn.point)}let Nt=[];if(zt.length>0){const zr=zt[0].clone(),xn=zt[0].clone();for(let Wn=1;Wn<zt.length;Wn++)zr.x=Math.min(zr.x,zt[Wn].x),zr.y=Math.min(zr.y,zt[Wn].y),xn.x=Math.max(xn.x,zt[Wn].x),xn.y=Math.max(xn.y,zt[Wn].y);Nt=zr.x>=dt.x&&xn.x<=at.x&&zr.y>=dt.y&&xn.y<=at.y?[zt]:xn.x<dt.x||zr.x>at.x||xn.y<dt.y||zr.y>at.y?[]:o.aJ([zt],dt.x,dt.y,at.x,at.y)}for(const zr of Nt){lt.reset(zr,.25*We);let xn=0;xn=lt.length<=.5*We?1:Math.ceil(lt.paddedLength/Pt)+1;for(let Wn=0;Wn<xn;Wn++){const Pn=Wn/Math.max(xn-1,1),Zn=lt.lerp(Pn),En=Zn.x+gn,Xn=Zn.y+gn;ge.push(En,Xn,We,0);const ri=En-We,eo=Xn-We,Ei=En+We,yn=Xn+We;if(Re=Re&&this.isOffscreen(ri,eo,Ei,yn),$e=$e||this.isInsideGrid(ri,eo,Ei,yn),n!=="always"&&this.grid.hitTestCircle(En,Xn,We,n,H)&&(ze=!0,!O))return{circles:[],offscreen:!1,collisionDetected:ze}}}}return{circles:!O&&ze||!$e||_e<this.perspectiveRatioCutoff?[]:ge,offscreen:Re,collisionDetected:ze}}projectPathToScreenSpace(n,u){const m=function(v,S){const M=o.N();return o.aB(M,S.pitchedLabelPlaneMatrix),v.map(k=>{const O=sr(k.x,k.y,M,S.getElevation),N=S.transform.projectTileCoordinates(O.point.x,O.point.y,S.unwrappedTileID,S.getElevation);return N.point.x=(.5*N.point.x+.5)*S.width,N.point.y=(.5*-N.point.y+.5)*S.height,N})}(n,u);return function(v){let S=0,M=0,k=0,O=0;for(let N=0;N<v.length;N++)v[N].isOccluded?(k=N+1,O=0):(O++,O>M&&(M=O,S=k));return v.slice(S,S+M)}(m)}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[],m=new o.aa;for(const J of n){const K=new o.P(J.x+gn,J.y+gn);m.extend(K),u.push(K)}const{minX:v,minY:S,maxX:M,maxY:k}=m,O=this.grid.query(v,S,M,k).concat(this.ignoredGrid.query(v,S,M,k)),N={},H={};for(const J of O){const K=J.key;if(N[K.bucketInstanceId]===void 0&&(N[K.bucketInstanceId]={}),N[K.bucketInstanceId][K.featureIndex])continue;const ne=[new o.P(J.x1,J.y1),new o.P(J.x2,J.y1),new o.P(J.x2,J.y2),new o.P(J.x1,J.y2)];o.aK(u,ne)&&(N[K.bucketInstanceId][K.featureIndex]=!0,H[K.bucketInstanceId]===void 0&&(H[K.bucketInstanceId]=[]),H[K.bucketInstanceId].push(K.featureIndex))}return H}insertCollisionBox(n,u,m,v,S,M){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:S,collisionGroupID:M,overlapMode:u},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,u,m,v,S,M){const k=m?this.ignoredGrid:this.grid,O={bucketInstanceId:v,featureIndex:S,collisionGroupID:M,overlapMode:u};for(let N=0;N<n.length;N+=4)k.insertCircle(O,n[N],n[N+1],n[N+2])}projectAndGetPerspectiveRatio(n,u,m,v,S){if(S){let M;v?(M=[n,u,v(n,u),1],o.aH(M,M,S)):(M=[n,u,0,1],os(M,M,S));const k=M[3];return{x:(M[0]/k+1)/2*this.transform.width+gn,y:(-M[1]/k+1)/2*this.transform.height+gn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/k*.5,isOccluded:!1,signedDistanceFromCamera:k}}{const M=this.transform.projectTileCoordinates(n,u,m,v);return{x:(M.point.x+1)/2*this.transform.width+gn,y:(1-M.point.y)/2*this.transform.height+gn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/M.signedDistanceFromCamera*.5,isOccluded:M.isOccluded,signedDistanceFromCamera:M.signedDistanceFromCamera}}}getPerspectiveRatio(n,u,m,v){const S=this.transform.projectTileCoordinates(n,u,m,v);return .5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5}isOffscreen(n,u,m,v){return m<gn||n>=this.screenRightBoundary||v<gn||u>this.screenBottomBoundary}isInsideGrid(n,u,m,v){return m>=0&&n<this.gridRightBoundary&&v>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const n=o.ar([]);return o.O(n,n,[-100,-100,0]),n}_projectCollisionBox(n,u,m,v,S,M,k,O,N,H,J){let K=1,ne=0,he=0,ge=1;const xe=n.anchorPointX+k[0],_e=n.anchorPointY+k[1];if(M&&!S){const zt=this.projectAndGetPerspectiveRatio(xe+1,_e,v,N,J),Pt=zt.x-O.x,Nt=Math.atan((zt.y-O.y)/Pt)+(Pt<0?Math.PI:0),zr=Math.sin(Nt),xn=Math.cos(Nt);K=xn,ne=zr,he=-zr,ge=xn}else if(!M&&S){const zt=Ur(this.transform);K=zt.vecEast[0],ne=zt.vecEast[1],he=zt.vecSouth[0],ge=zt.vecSouth[1]}let Me=O.x,Oe=O.y,Pe=u;S&&(Me=xe,Oe=_e,Pe=Math.pow(2,-(this.transform.zoom-m.overscaledZ)),Pe*=this.transform.getPitchedTextCorrection(xe,_e,v),H||(Pe*=o.an(.5+O.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),H&&(Me+=K*H.x*Pe+he*H.y*Pe,Oe+=ne*H.x*Pe+ge*H.y*Pe);const ze=n.x1*Pe,$e=n.x2*Pe,Re=(ze+$e)/2,We=n.y1*Pe,dt=n.y2*Pe,at=(We+dt)/2,lt=[{offsetX:ze,offsetY:We},{offsetX:Re,offsetY:We},{offsetX:$e,offsetY:We},{offsetX:$e,offsetY:at},{offsetX:$e,offsetY:dt},{offsetX:Re,offsetY:dt},{offsetX:ze,offsetY:dt},{offsetX:ze,offsetY:at}];let ct=[];for(const{offsetX:zt,offsetY:Pt}of lt)ct.push(new o.P(Me+K*zt+he*Pt,Oe+ne*zt+ge*Pt));let Dt=!1;if(S){const zt=ct.map(Pt=>this.projectAndGetPerspectiveRatio(Pt.x,Pt.y,v,N,J));Dt=zt.some(Pt=>!Pt.isOccluded),ct=zt.map(Pt=>new o.P(Pt.x,Pt.y))}else Dt=!0;return{box:o.aL(ct),allPointsOccluded:!Dt}}}class fh{constructor(n,u,m,v){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?u:-u))):v&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class Fa{constructor(n,u,m,v,S){this.text=new fh(n?n.text:null,u,m,S),this.icon=new fh(n?n.icon:null,u,v,S)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ph{constructor(n,u,m){this.text=n,this.icon=u,this.skipFade=m}}class dm{constructor(n,u,m,v,S){this.bucketInstanceId=n,this.featureIndex=u,this.sourceLayerIndex=m,this.bucketIndex=v,this.tileID=S}}class fm{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const u=++this.maxGroupID;this.collisionGroups[n]={ID:u,predicate:m=>m.collisionGroupID===u}}return this.collisionGroups[n]}}function uu(w,n,u,m,v){const{horizontalAlign:S,verticalAlign:M}=o.aS(w);return new o.P(-(S-.5)*n+m[0]*v,-(M-.5)*u+m[1]*v)}class dd{constructor(n,u,m,v,S){this.transform=n.clone(),this.terrain=u,this.collisionIndex=new dh(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new fm(v),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(n){const u=this.terrain;return u?(m,v)=>u.getElevation(n,m,v):null}getBucketParts(n,u,m,v){const S=m.getBucket(u),M=m.latestFeatureIndex;if(!S||!M||u.id!==S.layerIds[0])return;const k=m.collisionBoxArray,O=S.layers[0].layout,N=S.layers[0].paint,H=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),J=m.tileSize/o.a5,K=m.tileID.toUnwrapped(),ne=O.get("text-rotation-alignment")==="map",he=o.aN(m,1,this.transform.zoom),ge=o.aO(this.collisionIndex.transform,m,N.get("text-translate"),N.get("text-translate-anchor")),xe=o.aO(this.collisionIndex.transform,m,N.get("icon-translate"),N.get("icon-translate-anchor")),_e=Ht(ne,this.transform,he);this.retainedQueryData[S.bucketInstanceId]=new dm(S.bucketInstanceId,M,S.sourceLayerIndex,S.index,m.tileID);const Me={bucket:S,layout:O,translationText:ge,translationIcon:xe,unwrappedTileID:K,pitchedLabelPlaneMatrix:_e,scale:H,textPixelRatio:J,holdingForFade:m.holdingForSymbolFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:o.ay(S.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(S.sourceID)};if(v)for(const Oe of S.sortKeyRanges){const{sortKey:Pe,symbolInstanceStart:ze,symbolInstanceEnd:$e}=Oe;n.push({sortKey:Pe,symbolInstanceStart:ze,symbolInstanceEnd:$e,parameters:Me})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:Me})}attemptAnchorPlacement(n,u,m,v,S,M,k,O,N,H,J,K,ne,he,ge,xe,_e,Me,Oe,Pe){const ze=o.aP[n.textAnchor],$e=[n.textOffset0,n.textOffset1],Re=uu(ze,m,v,$e,S),We=this.collisionIndex.placeCollisionBox(u,K,O,N,H,k,M,xe,J.predicate,Oe,Re,Pe);if((!Me||this.collisionIndex.placeCollisionBox(Me,K,O,N,H,k,M,_e,J.predicate,Oe,Re,Pe).placeable)&&We.placeable){let dt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ne.crossTileID]&&this.prevPlacement.placements[ne.crossTileID]&&this.prevPlacement.placements[ne.crossTileID].text&&(dt=this.prevPlacement.variableOffsets[ne.crossTileID].anchor),ne.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ne.crossTileID]={textOffset:$e,width:m,height:v,anchor:ze,textBoxScale:S,prevAnchor:dt},this.markUsedJustification(he,ze,ne,ge),he.allowVerticalPlacement&&(this.markUsedOrientation(he,ge,ne),this.placedOrientations[ne.crossTileID]=ge),{shift:Re,placedGlyphBoxes:We}}}placeLayerBucketPart(n,u,m){const{bucket:v,layout:S,translationText:M,translationIcon:k,unwrappedTileID:O,pitchedLabelPlaneMatrix:N,textPixelRatio:H,holdingForFade:J,collisionBoxArray:K,partiallyEvaluatedTextSize:ne,collisionGroup:he}=n.parameters,ge=S.get("text-optional"),xe=S.get("icon-optional"),_e=o.aQ(S,"text-overlap","text-allow-overlap"),Me=_e==="always",Oe=o.aQ(S,"icon-overlap","icon-allow-overlap"),Pe=Oe==="always",ze=S.get("text-rotation-alignment")==="map",$e=S.get("text-pitch-alignment")==="map",Re=S.get("icon-text-fit")!=="none",We=S.get("symbol-z-order")==="viewport-y",dt=Me&&(Pe||!v.hasIconData()||xe),at=Pe&&(Me||!v.hasTextData()||ge);!v.collisionArrays&&K&&v.deserializeCollisionBoxes(K);const lt=this.retainedQueryData[v.bucketInstanceId].tileID,ct=this._getTerrainElevationFunc(lt),Dt=this.transform.getFastPathSimpleProjectionMatrix(lt),zt=(Pt,Nt,zr)=>{var xn,Wn;if(u[Pt.crossTileID])return;if(J)return void(this.placements[Pt.crossTileID]=new ph(!1,!1,!1));let Pn=!1,Zn=!1,En=!0,Xn=null,ri={box:null,placeable:!1,offscreen:null,occluded:!1},eo={placeable:!1},Ei=null,yn=null,Gi=null,Hs=0,ma=0,Ws=0;Nt.textFeatureIndex?Hs=Nt.textFeatureIndex:Pt.useRuntimeCollisionCircles&&(Hs=Pt.featureIndex),Nt.verticalTextFeatureIndex&&(ma=Nt.verticalTextFeatureIndex);const zo=Nt.textBox;if(zo){const Zo=Rn=>{let In=o.az.horizontal;if(v.allowVerticalPlacement&&!Rn&&this.prevPlacement){const Bi=this.prevPlacement.placedOrientations[Pt.crossTileID];Bi&&(this.placedOrientations[Pt.crossTileID]=Bi,In=Bi,this.markUsedOrientation(v,In,Pt))}return In},ya=(Rn,In)=>{if(v.allowVerticalPlacement&&Pt.numVerticalGlyphVertices>0&&Nt.verticalTextBox){for(const Bi of v.writingModes)if(Bi===o.az.vertical?(ri=In(),eo=ri):ri=Rn(),ri&&ri.placeable)break}else ri=Rn()},Ts=Pt.textAnchorOffsetStartIndex,Ms=Pt.textAnchorOffsetEndIndex;if(Ms===Ts){const Rn=(In,Bi)=>{const qi=this.collisionIndex.placeCollisionBox(In,_e,H,lt,O,$e,ze,M,he.predicate,ct,void 0,Dt);return qi&&qi.placeable&&(this.markUsedOrientation(v,Bi,Pt),this.placedOrientations[Pt.crossTileID]=Bi),qi};ya(()=>Rn(zo,o.az.horizontal),()=>{const In=Nt.verticalTextBox;return v.allowVerticalPlacement&&Pt.numVerticalGlyphVertices>0&&In?Rn(In,o.az.vertical):{box:null,offscreen:null}}),Zo(ri&&ri.placeable)}else{let Rn=o.aP[(Wn=(xn=this.prevPlacement)===null||xn===void 0?void 0:xn.variableOffsets[Pt.crossTileID])===null||Wn===void 0?void 0:Wn.anchor];const In=(qi,Oo,bo)=>{const Vl=qi.x2-qi.x1,Mm=qi.y2-qi.y1,up=Pt.textBoxScale,Zd=Re&&Oe==="never"?Oo:null;let Xa=null,va=_e==="never"?1:2,Ka="never";Rn&&va++;for(let qh=0;qh<va;qh++){for(let Xd=Ts;Xd<Ms;Xd++){const Hh=v.textAnchorOffsets.get(Xd);if(Rn&&Hh.textAnchor!==Rn)continue;const Au=this.attemptAnchorPlacement(Hh,qi,Vl,Mm,up,ze,$e,H,lt,O,he,Ka,Pt,v,bo,M,k,Zd,ct);if(Au&&(Xa=Au.placedGlyphBoxes,Xa&&Xa.placeable))return Pn=!0,Xn=Au.shift,Xa}Rn?Rn=null:Ka=_e}return m&&!Xa&&(Xa={box:this.collisionIndex.placeCollisionBox(zo,"always",H,lt,O,$e,ze,M,he.predicate,ct,void 0,Dt).box,offscreen:!1,placeable:!1,occluded:!1}),Xa};ya(()=>In(zo,Nt.iconBox,o.az.horizontal),()=>{const qi=Nt.verticalTextBox;return v.allowVerticalPlacement&&(!ri||!ri.placeable)&&Pt.numVerticalGlyphVertices>0&&qi?In(qi,Nt.verticalIconBox,o.az.vertical):{box:null,occluded:!0,offscreen:null}}),ri&&(Pn=ri.placeable,En=ri.offscreen);const Bi=Zo(ri&&ri.placeable);if(!Pn&&this.prevPlacement){const qi=this.prevPlacement.variableOffsets[Pt.crossTileID];qi&&(this.variableOffsets[Pt.crossTileID]=qi,this.markUsedJustification(v,qi.anchor,Pt,Bi))}}}if(Ei=ri,Pn=Ei&&Ei.placeable,En=Ei&&Ei.offscreen,Pt.useRuntimeCollisionCircles&&Pt.centerJustifiedTextSymbolIndex>=0){const Zo=v.text.placedSymbolArray.get(Pt.centerJustifiedTextSymbolIndex),ya=o.aA(v.textSizeData,ne,Zo),Ts=S.get("text-padding");yn=this.collisionIndex.placeCollisionCircles(_e,Zo,v.lineVertexArray,v.glyphOffsetArray,ya,O,N,m,$e,he.predicate,Pt.collisionCircleDiameter,Ts,M,ct),yn.circles.length&&yn.collisionDetected&&!m&&o.w("Collisions detected, but collision boxes are not shown"),Pn=Me||yn.circles.length>0&&!yn.collisionDetected,En=En&&yn.offscreen}if(Nt.iconFeatureIndex&&(Ws=Nt.iconFeatureIndex),Nt.iconBox){const Zo=ya=>this.collisionIndex.placeCollisionBox(ya,Oe,H,lt,O,$e,ze,k,he.predicate,ct,Re&&Xn?Xn:void 0,Dt);eo&&eo.placeable&&Nt.verticalIconBox?(Gi=Zo(Nt.verticalIconBox),Zn=Gi.placeable):(Gi=Zo(Nt.iconBox),Zn=Gi.placeable),En=En&&Gi.offscreen}const Wa=ge||Pt.numHorizontalGlyphVertices===0&&Pt.numVerticalGlyphVertices===0,ga=xe||Pt.numIconVertices===0;Wa||ga?ga?Wa||(Zn=Zn&&Pn):Pn=Zn&&Pn:Zn=Pn=Zn&&Pn;const Za=Zn&&Gi.placeable;if(Pn&&Ei.placeable&&this.collisionIndex.insertCollisionBox(Ei.box,_e,S.get("text-ignore-placement"),v.bucketInstanceId,eo&&eo.placeable&&ma?ma:Hs,he.ID),Za&&this.collisionIndex.insertCollisionBox(Gi.box,Oe,S.get("icon-ignore-placement"),v.bucketInstanceId,Ws,he.ID),yn&&Pn&&this.collisionIndex.insertCollisionCircles(yn.circles,_e,S.get("text-ignore-placement"),v.bucketInstanceId,Hs,he.ID),m&&this.storeCollisionData(v.bucketInstanceId,zr,Nt,Ei,Gi,yn),Pt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Pt.crossTileID]=new ph((Pn||dt)&&!Ei?.occluded,(Zn||at)&&!Gi?.occluded,En||v.justReloaded),u[Pt.crossTileID]=!0};if(We){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Pt=v.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Nt=Pt.length-1;Nt>=0;--Nt){const zr=Pt[Nt];zt(v.symbolInstances.get(zr),v.collisionArrays[zr],zr)}}else for(let Pt=n.symbolInstanceStart;Pt<n.symbolInstanceEnd;Pt++)zt(v.symbolInstances.get(Pt),v.collisionArrays[Pt],Pt);v.justReloaded=!1}storeCollisionData(n,u,m,v,S,M){if(m.textBox||m.iconBox){let k,O;this.collisionBoxArrays.has(n)?k=this.collisionBoxArrays.get(n):(k=new Map,this.collisionBoxArrays.set(n,k)),k.has(u)?O=k.get(u):(O={text:null,icon:null},k.set(u,O)),m.textBox&&(O.text=v.box),m.iconBox&&(O.icon=S.box)}if(M){let k=this.collisionCircleArrays[n];k===void 0&&(k=this.collisionCircleArrays[n]=[]);for(let O=0;O<M.circles.length;O+=4)k.push(M.circles[O+0]-gn),k.push(M.circles[O+1]-gn),k.push(M.circles[O+2]),k.push(M.collisionDetected?1:0)}}markUsedJustification(n,u,m,v){let S;S=v===o.az.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[o.aR(u)];const M=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const k of M)k>=0&&(n.text.placedSymbolArray.get(k).crossTileID=S>=0&&k!==S?0:m.crossTileID)}markUsedOrientation(n,u,m){const v=u===o.az.horizontal||u===o.az.horizontalOnly?u:0,S=u===o.az.vertical?u:0,M=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const k of M)n.text.placedSymbolArray.get(k).placedOrientation=v;m.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=S)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let m=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const v=u?u.symbolFadeChange(n):1,S=u?u.opacities:{},M=u?u.variableOffsets:{},k=u?u.placedOrientations:{};for(const O in this.placements){const N=this.placements[O],H=S[O];H?(this.opacities[O]=new Fa(H,v,N.text,N.icon),m=m||N.text!==H.text.placed||N.icon!==H.icon.placed):(this.opacities[O]=new Fa(null,v,N.text,N.icon,N.skipFade),m=m||N.text||N.icon)}for(const O in S){const N=S[O];if(!this.opacities[O]){const H=new Fa(N,v,!1,!1);H.isHidden()||(this.opacities[O]=H,m=m||N.text.placed||N.icon.placed)}}for(const O in M)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=M[O]);for(const O in k)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=k[O]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:n)}updateLayerOpacities(n,u){const m={};for(const v of u){const S=v.getBucket(n);S&&v.latestFeatureIndex&&n.id===S.layerIds[0]&&this.updateBucketOpacities(S,v.tileID,m,v.collisionBoxArray)}}updateBucketOpacities(n,u,m,v){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const S=n.layers[0],M=S.layout,k=new Fa(null,0,!1,!1,!0),O=M.get("text-allow-overlap"),N=M.get("icon-allow-overlap"),H=S._unevaluatedLayout.hasValue("text-variable-anchor")||S._unevaluatedLayout.hasValue("text-variable-anchor-offset"),J=M.get("text-rotation-alignment")==="map",K=M.get("text-pitch-alignment")==="map",ne=M.get("icon-text-fit")!=="none",he=new Fa(null,0,O&&(N||!n.hasIconData()||M.get("icon-optional")),N&&(O||!n.hasTextData()||M.get("text-optional")),!0);!n.collisionArrays&&v&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(v);const ge=(_e,Me,Oe)=>{for(let Pe=0;Pe<Me/4;Pe++)_e.opacityVertexArray.emplaceBack(Oe);_e.hasVisibleVertices=_e.hasVisibleVertices||Oe!==hu},xe=this.collisionBoxArrays.get(n.bucketInstanceId);for(let _e=0;_e<n.symbolInstances.length;_e++){const Me=n.symbolInstances.get(_e),{numHorizontalGlyphVertices:Oe,numVerticalGlyphVertices:Pe,crossTileID:ze}=Me;let $e=this.opacities[ze];m[ze]?$e=k:$e||($e=he,this.opacities[ze]=$e),m[ze]=!0;const Re=Me.numIconVertices>0,We=this.placedOrientations[Me.crossTileID],dt=We===o.az.vertical,at=We===o.az.horizontal||We===o.az.horizontalOnly;if(Oe>0||Pe>0){const ct=fd($e.text);ge(n.text,Oe,dt?hu:ct),ge(n.text,Pe,at?hu:ct);const Dt=$e.text.isHidden();[Me.rightJustifiedTextSymbolIndex,Me.centerJustifiedTextSymbolIndex,Me.leftJustifiedTextSymbolIndex].forEach(Nt=>{Nt>=0&&(n.text.placedSymbolArray.get(Nt).hidden=Dt||dt?1:0)}),Me.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(Me.verticalPlacedTextSymbolIndex).hidden=Dt||at?1:0);const zt=this.variableOffsets[Me.crossTileID];zt&&this.markUsedJustification(n,zt.anchor,Me,We);const Pt=this.placedOrientations[Me.crossTileID];Pt&&(this.markUsedJustification(n,"left",Me,Pt),this.markUsedOrientation(n,Pt,Me))}if(Re){const ct=fd($e.icon),Dt=!(ne&&Me.verticalPlacedIconSymbolIndex&&dt);Me.placedIconSymbolIndex>=0&&(ge(n.icon,Me.numIconVertices,Dt?ct:hu),n.icon.placedSymbolArray.get(Me.placedIconSymbolIndex).hidden=$e.icon.isHidden()),Me.verticalPlacedIconSymbolIndex>=0&&(ge(n.icon,Me.numVerticalIconVertices,Dt?hu:ct),n.icon.placedSymbolArray.get(Me.verticalPlacedIconSymbolIndex).hidden=$e.icon.isHidden())}const lt=xe&&xe.has(_e)?xe.get(_e):{text:null,icon:null};if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const ct=n.collisionArrays[_e];if(ct){let Dt=new o.P(0,0);if(ct.textBox||ct.verticalTextBox){let zt=!0;if(H){const Pt=this.variableOffsets[ze];Pt?(Dt=uu(Pt.anchor,Pt.width,Pt.height,Pt.textOffset,Pt.textBoxScale),J&&Dt._rotate(K?-this.transform.bearingInRadians:this.transform.bearingInRadians)):zt=!1}if(ct.textBox||ct.verticalTextBox){let Pt;ct.textBox&&(Pt=dt),ct.verticalTextBox&&(Pt=at),mh(n.textCollisionBox.collisionVertexArray,$e.text.placed,!zt||Pt,lt.text,Dt.x,Dt.y)}}if(ct.iconBox||ct.verticalIconBox){const zt=!!(!at&&ct.verticalIconBox);let Pt;ct.iconBox&&(Pt=zt),ct.verticalIconBox&&(Pt=!zt),mh(n.iconCollisionBox.collisionVertexArray,$e.icon.placed,Pt,lt.icon,ne?Dt.x:0,ne?Dt.y:0)}}}}if(n.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);n.bucketInstanceId in this.collisionCircleArrays&&(n.collisionCircleArray=this.collisionCircleArrays[n.bucketInstanceId],delete this.collisionCircleArrays[n.bucketInstanceId])}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,u){const m=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*m>n}setStale(){this.stale=!0}}function mh(w,n,u,m,v,S){m&&m.length!==0||(m=[0,0,0,0]);const M=m[0]-gn,k=m[1]-gn,O=m[2]-gn,N=m[3]-gn;w.emplaceBack(n?1:0,u?1:0,v||0,S||0,M,k),w.emplaceBack(n?1:0,u?1:0,v||0,S||0,O,k),w.emplaceBack(n?1:0,u?1:0,v||0,S||0,O,N),w.emplaceBack(n?1:0,u?1:0,v||0,S||0,M,N)}const cc=Math.pow(2,25),Bf=Math.pow(2,24),$f=Math.pow(2,17),pn=Math.pow(2,16),gh=Math.pow(2,9),jf=Math.pow(2,8),_l=Math.pow(2,1);function fd(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const n=w.placed?1:0,u=Math.floor(127*w.opacity);return u*cc+n*Bf+u*$f+n*pn+u*gh+n*jf+u*_l+n}const hu=0;class Ba{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,u,m,v,S){const M=this._bucketParts;for(;this._currentTileIndex<n.length;)if(u.getBucketParts(M,v,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort((k,O)=>k.sortKey-O.sortKey));this._currentPartIndex<M.length;)if(u.placeLayerBucketPart(M[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,S())return!0;return!1}}class xl{constructor(n,u,m,v,S,M,k,O){this.placement=new dd(n,u,M,k,O),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(n,u,m){const v=j(),S=()=>!this._forceFullPlacement&&j()-v>2;for(;this._currentPlacementIndex>=0;){const M=u[n[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=k)&&(!M.maxzoom||M.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new Ba(M)),this._inProgressLayer.continuePlacement(m[M.source],this.placement,this._showCollisionBoxes,M,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const $r=512/o.a5/2;class ia{constructor(n,u,m){this.tileID=n,this.bucketInstanceId=m,this._symbolsByKey={};const v=new Map;for(let S=0;S<u.length;S++){const M=u.get(S),k=M.key,O=v.get(k);O?O.push(M):v.set(k,[M])}for(const[S,M]of v){const k={positions:M.map(O=>({x:Math.floor(O.anchorX*$r),y:Math.floor(O.anchorY*$r)})),crossTileIDs:M.map(O=>O.crossTileID)};if(k.positions.length>128){const O=new o.aT(k.positions.length,16,Uint16Array);for(const{x:N,y:H}of k.positions)O.add(N,H);O.finish(),delete k.positions,k.index=O}this._symbolsByKey[S]=k}}getScaledCoordinates(n,u){const{x:m,y:v,z:S}=this.tileID.canonical,{x:M,y:k,z:O}=u.canonical,N=$r/Math.pow(2,O-S),H=(k*o.a5+n.anchorY)*N,J=v*o.a5*$r;return{x:Math.floor((M*o.a5+n.anchorX)*N-m*o.a5*$r),y:Math.floor(H-J)}}findMatches(n,u,m){const v=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let S=0;S<n.length;S++){const M=n.get(S);if(M.crossTileID)continue;const k=this._symbolsByKey[M.key];if(!k)continue;const O=this.getScaledCoordinates(M,u);if(k.index){const N=k.index.range(O.x-v,O.y-v,O.x+v,O.y+v).sort();for(const H of N){const J=k.crossTileIDs[H];if(!m[J]){m[J]=!0,M.crossTileID=J;break}}}else if(k.positions)for(let N=0;N<k.positions.length;N++){const H=k.positions[N],J=k.crossTileIDs[N];if(Math.abs(H.x-O.x)<=v&&Math.abs(H.y-O.y)<=v&&!m[J]){m[J]=!0,M.crossTileID=J;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:n})=>n)}}class bl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class oa{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const u=Math.round((n-this.lng)/360);if(u!==0)for(const m in this.indexes){const v=this.indexes[m],S={};for(const M in v){const k=v[M];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+u),S[k.tileID.key]=k}this.indexes[m]=S}this.lng=n}addBucket(n,u,m){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let S=0;S<u.symbolInstances.length;S++)u.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const v=this.usedCrossTileIDs[n.overscaledZ];for(const S in this.indexes){const M=this.indexes[S];if(Number(S)>n.overscaledZ)for(const k in M){const O=M[k];O.tileID.isChildOf(n)&&O.findMatches(u.symbolInstances,n,v)}else{const k=M[n.scaledTo(Number(S)).key];k&&k.findMatches(u.symbolInstances,n,v)}}for(let S=0;S<u.symbolInstances.length;S++){const M=u.symbolInstances.get(S);M.crossTileID||(M.crossTileID=m.generate(),v[M.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new ia(n,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(n,u){for(const m of u.getCrossTileIDsLists())for(const v of m)delete this.usedCrossTileIDs[n][v]}removeStaleBuckets(n){let u=!1;for(const m in this.indexes){const v=this.indexes[m];for(const S in v)n[v[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,v[S]),delete v[S],u=!0)}return u}}class Xi{constructor(){this.layerIndexes={},this.crossTileIDs=new bl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,u,m){let v=this.layerIndexes[n.id];v===void 0&&(v=this.layerIndexes[n.id]=new oa);let S=!1;const M={};v.handleWrapJump(m);for(const k of u){const O=k.getBucket(n);O&&n.id===O.layerIds[0]&&(O.bucketInstanceId||(O.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(k.tileID,O,this.crossTileIDs)&&(S=!0),M[O.bucketInstanceId]=!0)}return v.removeStaleBuckets(M)&&(S=!0),S}pruneUnusedLayers(n){const u={};n.forEach(m=>{u[m]=!0});for(const m in this.layerIndexes)u[m]||delete this.layerIndexes[m]}}var zi="void main() {fragColor=vec4(1.0);}";const _n={prelude:Cr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Cr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Cr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Cr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Cr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Cr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Cr(zi,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Cr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Cr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Cr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Cr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Cr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Cr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Cr(zi,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Cr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Cr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Cr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Cr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Cr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Cr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Cr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Cr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Cr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Cr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Cr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Cr(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:Cr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:Cr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Cr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Cr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Cr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Cr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Cr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Cr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Cr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Cr(`#ifdef GL_ES
precision highp float;
#endif
in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Cr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Cr(w,n){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=n.match(/in ([\w]+) ([\w]+)/g),v=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=S?S.concat(v):v,k={};return{fragmentSource:w=w.replace(u,(O,N,H,J,K)=>(k[K]=!0,N==="define"?`
#ifndef HAS_UNIFORM_u_${K}
in ${H} ${J} ${K};
#else
uniform ${H} ${J} u_${K};
#endif
`:`
#ifdef HAS_UNIFORM_u_${K}
    ${H} ${J} ${K} = u_${K};
#endif
`)),vertexSource:n=n.replace(u,(O,N,H,J,K)=>{const ne=J==="float"?"vec2":"vec4",he=K.match(/color/)?"color":ne;return k[K]?N==="define"?`
#ifndef HAS_UNIFORM_u_${K}
uniform lowp float u_${K}_t;
in ${H} ${ne} a_${K};
out ${H} ${J} ${K};
#else
uniform ${H} ${J} u_${K};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${K}
    ${K} = a_${K};
#else
    ${H} ${J} ${K} = u_${K};
#endif
`:`
#ifndef HAS_UNIFORM_u_${K}
    ${K} = unpack_mix_${he}(a_${K}, u_${K}_t);
#else
    ${H} ${J} ${K} = u_${K};
#endif
`:N==="define"?`
#ifndef HAS_UNIFORM_u_${K}
uniform lowp float u_${K}_t;
in ${H} ${ne} a_${K};
#else
uniform ${H} ${J} u_${K};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${K}
    ${H} ${J} ${K} = a_${K};
#else
    ${H} ${J} ${K} = u_${K};
#endif
`:`
#ifndef HAS_UNIFORM_u_${K}
    ${H} ${J} ${K} = unpack_mix_${he}(a_${K}, u_${K}_t);
#else
    ${H} ${J} ${K} = u_${K};
#endif
`}),staticAttributes:m,staticUniforms:M}}class Mn{constructor(n,u,m){this.vertexBuffer=n,this.indexBuffer=u,this.segments=m}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var ms=o.aU([{name:"a_pos",type:"Int16",components:2}]);const ko="#define PROJECTION_MERCATOR",Vo="mercator";class Ki{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Vo}get shaderDefine(){return ko}get shaderPreludeCode(){return _n.projectionMercator}get vertexShaderPreludeCode(){return _n.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(n){}getMeshFromTileID(n,u,m,v,S){if(this._cachedMesh)return this._cachedMesh;const M=new o.aW;M.emplaceBack(0,0),M.emplaceBack(o.a5,0),M.emplaceBack(0,o.a5),M.emplaceBack(o.a5,o.a5);const k=n.createVertexBuffer(M,ms.members),O=o.aX.simpleSegment(0,0,4,2),N=new o.aY;N.emplaceBack(1,0,2),N.emplaceBack(1,2,3);const H=n.createIndexBuffer(N);return this._cachedMesh=new Mn(k,H,O),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(n){}}class uc{constructor(n=0,u=0,m=0,v=0){if(isNaN(n)||n<0||isNaN(u)||u<0||isNaN(m)||m<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=u,this.left=m,this.right=v}interpolate(n,u,m){return u.top!=null&&n.top!=null&&(this.top=o.G.number(n.top,u.top,m)),u.bottom!=null&&n.bottom!=null&&(this.bottom=o.G.number(n.bottom,u.bottom,m)),u.left!=null&&n.left!=null&&(this.left=o.G.number(n.left,u.left,m)),u.right!=null&&n.right!=null&&(this.right=o.G.number(n.right,u.right,m)),this}getCenter(n,u){const m=o.an((this.left+n-this.right)/2,0,n),v=o.an((this.top+u-this.bottom)/2,0,u);return new o.P(m,v)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new uc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function wl(w,n){if(!w.renderWorldCopies||w.lngRange)return;const u=n.lng-w.center.lng;n.lng+=u>180?-360:u<-180?360:0}function Gn(w){return Math.max(0,Math.floor(w))}class Os{constructor(n,u){var m;this.applyConstrain=(v,S)=>this._constrainOverride!==null?this._constrainOverride(v,S):this._callbacks.defaultConstrain(v,S),this._callbacks=n,this._tileSize=512,this._renderWorldCopies=u?.renderWorldCopies===void 0||!!u?.renderWorldCopies,this._minZoom=u?.minZoom||0,this._maxZoom=u?.maxZoom||22,this._minPitch=u?.minPitch==null?0:u?.minPitch,this._maxPitch=u?.maxPitch==null?60:u?.maxPitch,this._constrainOverride=(m=u?.constrainOverride)!==null&&m!==void 0?m:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Gn(this._zoom),this._scale=o.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new uc,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(n,u,m){this._constrainOverride=n.constrainOverride,this._latRange=n.latRange,this._lngRange=n.lngRange,this._width=n.width,this._height=n.height,this._center=n.center,this._elevation=n.elevation,this._minElevationForCurrentTile=n.minElevationForCurrentTile,this._zoom=n.zoom,this._tileZoom=Gn(this._zoom),this._scale=o.aq(this._zoom),this._bearingInRadians=n.bearingInRadians,this._fovInRadians=n.fovInRadians,this._pitchInRadians=n.pitchInRadians,this._rollInRadians=n.rollInRadians,this._unmodified=n.unmodified,this._edgeInsets=new uc(n.padding.top,n.padding.bottom,n.padding.left,n.padding.right),this._minZoom=n.minZoom,this._maxZoom=n.maxZoom,this._minPitch=n.minPitch,this._maxPitch=n.maxPitch,this._renderWorldCopies=n.renderWorldCopies,this._cameraToCenterDistance=n.cameraToCenterDistance,this._nearZ=n.nearZ,this._farZ=n.farZ,this._autoCalculateNearFarZ=!m&&n.autoCalculateNearFarZ,u&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(n){this._minElevationForCurrentTile=n}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(n){this._minZoom!==n&&(this._minZoom=n,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(n){this._minPitch!==n&&(this._minPitch=n,this.setPitch(Math.max(this.pitch,n)))}get maxPitch(){return this._maxPitch}setMaxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.setPitch(Math.min(this.pitch,n)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get constrainOverride(){return this._constrainOverride}setConstrainOverride(n){n===void 0&&(n=null),this._constrainOverride!==n&&(this._constrainOverride=n,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(n){const u=o.W(n,-180,180)*Math.PI/180;var m,v,S,M,k,O,N,H,J;this._bearingInRadians!==u&&(this._unmodified=!1,this._bearingInRadians=u,this._calcMatrices(),this._rotationMatrix=P(),m=this._rotationMatrix,S=-this._bearingInRadians,M=(v=this._rotationMatrix)[0],k=v[1],O=v[2],N=v[3],H=Math.sin(S),J=Math.cos(S),m[0]=M*J+O*H,m[1]=k*J+N*H,m[2]=M*-H+O*J,m[3]=k*-H+N*J)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(n){const u=o.an(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==u&&(this._unmodified=!1,this._pitchInRadians=u,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(n){const u=n/180*Math.PI;this._rollInRadians!==u&&(this._unmodified=!1,this._rollInRadians=u,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aZ(this._fovInRadians)}setFov(n){n=o.an(n,.1,150),this.fov!==n&&(this._unmodified=!1,this._fovInRadians=o.ap(n),this._calcMatrices())}get zoom(){return this._zoom}setZoom(n){const u=this.applyConstrain(this._center,n).zoom;this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this._tileZoom=Math.max(0,Math.floor(u)),this._scale=o.aq(u),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(n){n!==this._elevation&&(this._elevation=n,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(n,u){this._autoCalculateNearFarZ=!1,this._nearZ=n,this._farZ=u,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,u,m){this._unmodified=!1,this._edgeInsets.interpolate(n,u,m),this.constrainInternal(),this._calcMatrices()}resize(n,u,m=!0){this._width=n,this._height=u,m&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new pr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(n){n?(this._lngRange=[n.getWest(),n.getEast()],this._latRange=[n.getSouth(),n.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-o.ao,o.ao])}getCameraQueryGeometry(n,u){if(u.length===1)return[u[0],n];{const{minX:m,minY:v,maxX:S,maxY:M}=o.aa.fromPoints(u).extend(n);return[new o.P(m,v),new o.P(S,v),new o.P(S,M),new o.P(m,M),new o.P(m,v)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const n=this._unmodified,{center:u,zoom:m}=this.applyConstrain(this.center,this.zoom);this.setCenter(u),this.setZoom(m),this._unmodified=n,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let n=o.ar(new Float64Array(16));o.Q(n,n,[this._width/2,-this._height/2,1]),o.O(n,n,[1,-1,0]),this._clipSpaceToPixelsMatrix=n,n=o.ar(new Float64Array(16)),o.Q(n,n,[1,-1,1]),o.O(n,n,[-1,-1,0]),o.Q(n,n,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=n,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(n,u,m,v){const S=m!==void 0?m:this.bearing,M=v=v!==void 0?v:this.pitch,{distanceToCenter:k,clampedElevation:O}=this._distanceToCenterFromAltElevationPitch(u,this.elevation,M),{x:N,y:H}=Ut(M,S),J=o.a9.fromLngLat(n,u);let K,ne,he=o.a_(1,J.y),ge=0;do{if(ge+=1,ge>10)break;ne=k/he,K=new o.a9(J.x+N*ne,J.y+H*ne),he=1/K.meterInMercatorCoordinateUnits()}while(Math.abs(k-ne*he)>1e-12);return{center:K.toLngLat(),elevation:O,zoom:o.at(this.height/2/Math.tan(this.fovInRadians/2)/ne/this.tileSize)}}recalculateZoomAndCenter(n){if(this.elevation-n==0)return;const u=1/this.worldSize,m=o.as(1,this.center.lat)*this.worldSize,v=o.a9.fromLngLat(this.center,this.elevation),S=v.x/u,M=v.y/u,k=v.z/u,O=this.pitch,N=this.bearing,{x:H,y:J,z:K}=Ut(O,N),ne=this.cameraToCenterDistance,he=S+ne*-H,ge=M+ne*-J,xe=k+ne*K,{distanceToCenter:_e,clampedElevation:Me}=this._distanceToCenterFromAltElevationPitch(xe/m,n,O),Oe=_e*m,Pe=new o.a9((he+H*Oe)*u,(ge+J*Oe)*u,0).toLngLat(),ze=o.as(1,Pe.lat),$e=o.at(this.height/2/Math.tan(this.fovInRadians/2)/_e/ze/this.tileSize);this._elevation=Me,this._center=Pe,this.setZoom($e)}_distanceToCenterFromAltElevationPitch(n,u,m){const v=-Math.cos(o.ap(m)),S=n-u;let M,k=u;return v*S>=0||Math.abs(v)<.1?(M=1e4,k=n+M*v):M=-S/v,{distanceToCenter:M,clampedElevation:k}}getCameraPoint(){const n=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(n*Math.sin(this.rollInRadians),n*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const n=o.as(1,this.center.lat)*this.worldSize;return Ae(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/n).toLngLat()}getMercatorTileCoordinates(n){if(!n)return[0,0,1,1];const u=n.canonical.z>=0?1<<n.canonical.z:Math.pow(2,n.canonical.z);return[n.canonical.x/u,n.canonical.y/u,1/u/o.a5,1/u/o.a5]}}class Ao{constructor(n,u){this.min=n,this.max=u,this.center=o.a$([],o.b0([],this.min,this.max),.5)}quadrant(n){const u=[n%2==0,n<2],m=o.b1(this.min),v=o.b1(this.max);for(let S=0;S<u.length;S++)m[S]=u[S]?this.min[S]:this.center[S],v[S]=u[S]?this.center[S]:this.max[S];return v[2]=this.max[2],new Ao(m,v)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersectsFrustum(n){let u=!0;for(let m=0;m<n.planes.length;m++){const v=this.intersectsPlane(n.planes[m]);if(v===0)return 0;v===1&&(u=!1)}return u?2:n.aabb.min[0]>this.max[0]||n.aabb.min[1]>this.max[1]||n.aabb.min[2]>this.max[2]||n.aabb.max[0]<this.min[0]||n.aabb.max[1]<this.min[1]||n.aabb.max[2]<this.min[2]?0:1}intersectsPlane(n){let u=n[3],m=n[3];for(let v=0;v<3;v++)n[v]>0?(u+=n[v]*this.min[v],m+=n[v]*this.max[v]):(m+=n[v]*this.min[v],u+=n[v]*this.max[v]);return u>=0?2:m<0?0:1}}class hc{distanceToTile2d(n,u,m,v){const S=v.distanceX([n,u]),M=v.distanceY([n,u]);return Math.hypot(S,M)}getWrap(n,u,m){return m}getTileBoundingVolume(n,u,m,v){var S,M;let k=0,O=0;if(v?.terrain){const H=new o.a2(n.z,u,n.z,n.x,n.y),J=v.terrain.getMinMaxElevation(H);k=(S=J.minElevation)!==null&&S!==void 0?S:Math.min(0,m),O=(M=J.maxElevation)!==null&&M!==void 0?M:Math.max(0,m)}const N=1<<n.z;return new Ao([u+n.x/N,n.y/N,k],[u+(n.x+1)/N,(n.y+1)/N,O])}allowVariableZoom(n,u){const m=n.fov*(Math.abs(Math.cos(n.rollInRadians))*n.height+Math.abs(Math.sin(n.rollInRadians))*n.width)/n.height,v=o.an(78.5-m/2,0,60);return!!u.terrain||n.pitch>v}allowWorldCopies(){return!0}prepareNextFrame(){}}class Uo{constructor(n,u,m){this.points=n,this.planes=u,this.aabb=m}static fromInvProjectionMatrix(n,u=1,m=0,v,S){const M=S?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],k=Math.pow(2,m),O=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(K=>function(ne,he,ge,xe){const _e=o.aH([],ne,he),Me=1/_e[3]/ge*xe;return o.b6(_e,_e,[Me,Me,1/_e[3],Me])}(K,n,u,k));v&&function(K,ne,he,ge){const xe=ge?4:0,_e=ge?0:4;let Me=0;const Oe=[],Pe=[];for(let Re=0;Re<4;Re++){const We=o.b2([],K[Re+_e],K[Re+xe]),dt=o.b7(We);o.a$(We,We,1/dt),Oe.push(dt),Pe.push(We)}for(let Re=0;Re<4;Re++){const We=o.b8(K[Re+xe],Pe[Re],he);Me=We!==null&&We>=0?Math.max(Me,We):Math.max(Me,Oe[Re])}const ze=function(Re,We){const dt=o.b2([],Re[We[0]],Re[We[1]]),at=o.b2([],Re[We[2]],Re[We[1]]),lt=[0,0,0,0];return o.b3(lt,o.b4([],dt,at)),lt[3]=-o.b5(lt,Re[We[0]]),lt}(K,ne),$e=function(Re,We){const dt=o.b9(Re),at=o.ba([],Re,1/dt),lt=o.b2([],We,o.a$([],at,o.b5(We,at))),ct=o.b9(lt);if(ct>0){const Dt=Math.sqrt(1-at[3]*at[3]),zt=o.a$([],at,-at[3]),Pt=o.b0([],zt,o.a$([],lt,Dt/ct));return o.bb(We,Pt)}return null}(he,ze);if($e!==null){const Re=$e/o.b5(Pe[0],ze);Me=Math.min(Me,Re)}for(let Re=0;Re<4;Re++){const We=Math.min(Me,Oe[Re]);K[Re+_e]=[K[Re+xe][0]+Pe[Re][0]*We,K[Re+xe][1]+Pe[Re][1]*We,K[Re+xe][2]+Pe[Re][2]*We,1]}}(O,M[0],v,S);const N=M.map(K=>{const ne=o.b2([],O[K[0]],O[K[1]]),he=o.b2([],O[K[2]],O[K[1]]),ge=o.b3([],o.b4([],ne,he)),xe=-o.b5(ge,O[K[1]]);return ge.concat(xe)}),H=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],J=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const K of O)for(let ne=0;ne<3;ne++)H[ne]=Math.min(H[ne],K[ne]),J[ne]=Math.max(J[ne],K[ne]);return new Uo(O,N,new Ao(H,J))}}class dc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,u,m){return this._helper.interpolatePadding(n,u,m)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,u,m=!0){this._helper.resize(n,u,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}setConstrainOverride(n){this._helper.setConstrainOverride(n)}overrideNearFarZ(n,u){this._helper.overrideNearFarZ(n,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n,u){}constructor(n){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(u,m)=>{m=o.an(+m,this.minZoom,this.maxZoom);const v={center:new o.V(u.lng,u.lat),zoom:m};let S=this._helper._lngRange;if(!this._helper._renderWorldCopies&&S===null){const Pe=179.9999999999;S=[-Pe,Pe]}const M=this.tileSize*o.aq(v.zoom);let k=0,O=M,N=0,H=M,J=0,K=0;const{x:ne,y:he}=this.size;if(this._helper._latRange){const Pe=this._helper._latRange;k=o.X(Pe[1])*M,O=o.X(Pe[0])*M,O-k<he&&(J=he/(O-k))}S&&(N=o.W(o.Y(S[0])*M,0,M),H=o.W(o.Y(S[1])*M,0,M),H<N&&(H+=M),H-N<ne&&(K=ne/(H-N)));const{x:ge,y:xe}=Ue(M,u);let _e,Me;const Oe=Math.max(K||0,J||0);if(Oe){const Pe=new o.P(K?(H+N)/2:ge,J?(O+k)/2:xe);return v.center=Ke(M,Pe).wrap(),v.zoom+=o.at(Oe),v}if(this._helper._latRange){const Pe=he/2;xe-Pe<k&&(Me=k+Pe),xe+Pe>O&&(Me=O-Pe)}if(S){const Pe=(N+H)/2;let ze=ge;this._helper._renderWorldCopies&&(ze=o.W(ge,Pe-M/2,Pe+M/2));const $e=ne/2;ze-$e<N&&(_e=N+$e),ze+$e>H&&(_e=H-$e)}if(_e!==void 0||Me!==void 0){const Pe=new o.P(_e??ge,Me??xe);v.center=Ke(M,Pe).wrap()}return v},this.applyConstrain=(u,m)=>this._helper.applyConstrain(u,m),this._helper=new Os({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(u,m)=>this.defaultConstrain(u,m)},n),this._coveringTilesDetailsProvider=new hc}clone(){const n=new dc;return n.apply(this,!1),n}apply(n,u,m){this._helper.apply(n,u,m)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(n){const u=[new o.bc(0,n)];if(this._helper._renderWorldCopies){const m=this.screenPointToMercatorCoordinate(new o.P(0,0)),v=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),S=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),M=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),k=Math.floor(Math.min(m.x,v.x,S.x,M.x)),O=Math.floor(Math.max(m.x,v.x,S.x,M.x)),N=1;for(let H=k-N;H<=O+N;H++)H!==0&&u.push(new o.bc(H,n))}return u}getCameraFrustum(){return Uo.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){const u=this.screenPointToLocation(this.centerPoint,n),m=n?n.getElevationForLngLatZoom(u,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(m)}setLocationAtPoint(n,u){const m=o.as(this.elevation,this.center.lat),v=this.screenPointToMercatorCoordinateAtZ(u,m),S=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,m),M=o.a9.fromLngLat(n),k=new o.a9(M.x-(v.x-S.x),M.y-(v.y-S.y));this.setCenter(k?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(n,u){return u?this.coordinatePoint(o.a9.fromLngLat(n),u.getElevationForLngLat(n,this),this._pixelMatrix3D):this.coordinatePoint(o.a9.fromLngLat(n))}screenPointToLocation(n,u){var m;return(m=this.screenPointToMercatorCoordinate(n,u))===null||m===void 0?void 0:m.toLngLat()}screenPointToMercatorCoordinate(n,u){if(u){const m=u.pointCoordinate(n);if(m!=null)return m}return this.screenPointToMercatorCoordinateAtZ(n)}screenPointToMercatorCoordinateAtZ(n,u){const m=u||0,v=[n.x,n.y,0,1],S=[n.x,n.y,1,1];o.aH(v,v,this._pixelMatrixInverse),o.aH(S,S,this._pixelMatrixInverse);const M=v[3],k=S[3],O=v[1]/M,N=S[1]/k,H=v[2]/M,J=S[2]/k,K=H===J?0:(m-H)/(J-H);return new o.a9(o.G.number(v[0]/M,S[0]/k,K)/this.worldSize,o.G.number(O,N,K)/this.worldSize,m)}coordinatePoint(n,u=0,m=this._pixelMatrix){const v=[n.x*this.worldSize,n.y*this.worldSize,u,1];return o.aH(v,v,m),new o.P(v[0]/v[3],v[1]/v[3])}getBounds(){const n=Math.max(0,this._helper._height/2-gt(this));return new pr().extend(this.screenPointToLocation(new o.P(0,n))).extend(this.screenPointToLocation(new o.P(this._helper._width,n))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(n,u){return u?u.pointCoordinate(n)!=null:n.y>this.height/2-gt(this)}calculatePosMatrix(n,u=!1,m){var v;const S=(v=n.key)!==null&&v!==void 0?v:o.bd(n.wrap,n.canonical.z,n.canonical.z,n.canonical.x,n.canonical.y),M=u?this._alignedPosMatrixCache:this._posMatrixCache;if(M.has(S)){const N=M.get(S);return m?N.f32:N.f64}const k=et(n,this.worldSize);o.S(k,u?this._alignedProjMatrix:this._viewProjMatrix,k);const O={f64:k,f32:new Float32Array(k)};return M.set(S,O),m?O.f32:O.f64}calculateFogMatrix(n){const u=n.key,m=this._fogMatrixCacheF32;if(m.has(u))return m.get(u);const v=et(n,this.worldSize);return o.S(v,this._fogMatrix,v),m.set(u,new Float32Array(v)),m.get(u)}calculateCenterFromCameraLngLatAlt(n,u,m,v){return this._helper.calculateCenterFromCameraLngLatAlt(n,u,m,v)}_calculateNearFarZIfNeeded(n,u,m){if(!this._helper.autoCalculateNearFarZ)return;const v=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),S=n-v*this._helper._pixelPerMeter/Math.cos(u),M=v<0?S:n,k=Math.PI/2+this.pitchInRadians,O=o.ap(this.fov)*(Math.abs(Math.cos(o.ap(this.roll)))*this.height+Math.abs(Math.sin(o.ap(this.roll)))*this.width)/this.height*(.5+m.y/this.height),N=Math.sin(O)*M/Math.sin(o.an(Math.PI-k-O,.01,Math.PI-.01)),H=gt(this),J=Math.atan(H/this._helper.cameraToCenterDistance),K=o.ap(.75),ne=J>K?2*J*(.5+m.y/(2*H)):K,he=Math.sin(ne)*M/Math.sin(o.an(Math.PI-k-ne,.01,Math.PI-.01)),ge=Math.min(N,he);this._helper._farZ=1.01*(Math.cos(Math.PI/2-u)*ge+M),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const n=this.centerOffset,u=Ue(this.worldSize,this.center),m=u.x,v=u.y;this._helper._pixelPerMeter=o.as(1,this.center.lat)*this.worldSize;const S=o.ap(Math.min(this.pitch,Ye)),M=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(S));let k;this._calculateNearFarZIfNeeded(M,S,n),k=new Float64Array(16),o.be(k,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.aB(this._invProjMatrix,k),k[8]=2*-n.x/this._helper._width,k[9]=2*n.y/this._helper._height,this._projectionMatrix=o.bf(k),o.Q(k,k,[1,-1,1]),o.O(k,k,[0,0,-this._helper.cameraToCenterDistance]),o.bg(k,k,-this.rollInRadians),o.bh(k,k,this.pitchInRadians),o.bg(k,k,-this.bearingInRadians),o.O(k,k,[-m,-v,0]),this._mercatorMatrix=o.Q([],k,[this.worldSize,this.worldSize,this.worldSize]),o.Q(k,k,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,k),o.O(k,k,[0,0,-this.elevation]),this._viewProjMatrix=k,this._invViewProjMatrix=o.aB([],k);const O=[0,0,-1,1];o.aH(O,O,this._invViewProjMatrix),this._cameraPosition=[O[0]/O[3],O[1]/O[3],O[2]/O[3]],this._fogMatrix=new Float64Array(16),o.be(this._fogMatrix,this.fovInRadians,this.width/this.height,M,this._helper._farZ),this._fogMatrix[8]=2*-n.x/this.width,this._fogMatrix[9]=2*n.y/this.height,o.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.O(this._fogMatrix,this._fogMatrix,[-m,-v,0]),o.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,k);const N=this._helper._width%2/2,H=this._helper._height%2/2,J=Math.cos(this.bearingInRadians),K=Math.sin(-this.bearingInRadians),ne=m-Math.round(m)+J*N+K*H,he=v-Math.round(v)+J*H+K*N,ge=new Float64Array(k);if(o.O(ge,ge,[ne>.5?ne-1:ne,he>.5?he-1:he,0]),this._alignedProjMatrix=ge,k=o.aB(new Float64Array(16),this._pixelMatrix),!k)throw new Error("failed to invert matrix");this._pixelMatrixInverse=k,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const n=this.screenPointToMercatorCoordinate(new o.P(0,0)),u=[n.x*this.worldSize,n.y*this.worldSize,0,1];return o.aH(u,u,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const n=o.as(1,this.center.lat)*this.worldSize;return Ae(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/n).toLngLat()}lngLatToCameraDepth(n,u){const m=o.a9.fromLngLat(n),v=[m.x*this.worldSize,m.y*this.worldSize,u,1];return o.aH(v,v,this._viewProjMatrix),v[2]/v[3]}getProjectionData(n){const{overscaledTileID:u,aligned:m,applyTerrainMatrix:v}=n,S=this._helper.getMercatorTileCoordinates(u),M=u?this.calculatePosMatrix(u,m,!0):null;let k;return k=u&&u.terrainRttPosMatrix32f&&v?u.terrainRttPosMatrix32f:M||o.bi(),{mainMatrix:k,tileMercatorCoords:S,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:k}}isLocationOccluded(n){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(n,u,m){return 1}transformLightDirection(n){return o.b1(n)}getRayDirectionFromPixel(n){throw new Error("Not implemented.")}projectTileCoordinates(n,u,m,v){const S=this.calculatePosMatrix(m);let M;v?(M=[n,u,v(n,u),1],o.aH(M,M,S)):(M=[n,u,0,1],os(M,M,S));const k=M[3];return{point:new o.P(M[0]/k,M[1]/k),signedDistanceFromCamera:k,isOccluded:!1}}populateCache(n){for(const u of n)this.calculatePosMatrix(u)}getMatrixForModel(n,u){const m=o.a9.fromLngLat(n,u),v=m.meterInMercatorCoordinateUnits(),S=o.bj();return o.O(S,S,[m.x,m.y,m.z]),o.bg(S,S,Math.PI),o.bh(S,S,Math.PI/2),o.Q(S,S,[-v,v,v]),S}getProjectionDataForCustomLayer(n=!0){const u=new o.a2(0,0,0,0,0),m=this.getProjectionData({overscaledTileID:u,applyGlobeMatrix:n}),v=et(u,this.worldSize);o.S(v,this._viewProjMatrix,v),m.tileMercatorCoords=[0,0,1,1];const S=[o.a5,o.a5,this.worldSize/this._helper.pixelsPerMeter],M=o.bk();return o.Q(M,v,S),m.fallbackMatrix=M,m.mainMatrix=M,m}getFastPathSimpleProjectionMatrix(n){return this.calculatePosMatrix(n)}}function Ls(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function yh(w){if(w.useSlerp)if(w.k<1){const n=o.bl(w.startEulerAngles.roll,w.startEulerAngles.pitch,w.startEulerAngles.bearing),u=o.bl(w.endEulerAngles.roll,w.endEulerAngles.pitch,w.endEulerAngles.bearing),m=new Float64Array(4);o.bm(m,n,u,w.k);const v=o.bn(m);w.tr.setRoll(v.roll),w.tr.setPitch(v.pitch),w.tr.setBearing(v.bearing)}else w.tr.setRoll(w.endEulerAngles.roll),w.tr.setPitch(w.endEulerAngles.pitch),w.tr.setBearing(w.endEulerAngles.bearing);else w.tr.setRoll(o.G.number(w.startEulerAngles.roll,w.endEulerAngles.roll,w.k)),w.tr.setPitch(o.G.number(w.startEulerAngles.pitch,w.endEulerAngles.pitch,w.k)),w.tr.setBearing(o.G.number(w.startEulerAngles.bearing,w.endEulerAngles.bearing,w.k))}function vh(w,n,u,m,v){const S=v.padding,M=Ue(v.worldSize,u.getNorthWest()),k=Ue(v.worldSize,u.getNorthEast()),O=Ue(v.worldSize,u.getSouthEast()),N=Ue(v.worldSize,u.getSouthWest()),H=o.ap(-m),J=M.rotate(H),K=k.rotate(H),ne=O.rotate(H),he=N.rotate(H),ge=new o.P(Math.max(J.x,K.x,he.x,ne.x),Math.max(J.y,K.y,he.y,ne.y)),xe=new o.P(Math.min(J.x,K.x,he.x,ne.x),Math.min(J.y,K.y,he.y,ne.y)),_e=ge.sub(xe),Me=(v.width-(S.left+S.right+n.left+n.right))/_e.x,Oe=(v.height-(S.top+S.bottom+n.top+n.bottom))/_e.y;if(Oe<0||Me<0)return void Ls();const Pe=Math.min(o.at(v.scale*Math.min(Me,Oe)),w.maxZoom),ze=o.P.convert(w.offset),$e=new o.P((n.left-n.right)/2,(n.top-n.bottom)/2).rotate(o.ap(m)),Re=ze.add($e).mult(v.scale/o.aq(Pe));return{center:Ke(v.worldSize,M.add(O).div(2).sub(Re)),zoom:Pe,bearing:m}}class Sl{get useGlobeControls(){return!1}handlePanInertia(n,u){const m=n.mag(),v=Math.abs(gt(u));return{easingOffset:n.mult(Math.min(.75*v/m,1)),easingCenter:u.center}}handleMapControlsRollPitchBearingZoom(n,u){n.bearingDelta&&u.setBearing(u.bearing+n.bearingDelta),n.pitchDelta&&u.setPitch(u.pitch+n.pitchDelta),n.rollDelta&&u.setRoll(u.roll+n.rollDelta),n.zoomDelta&&u.setZoom(u.zoom+n.zoomDelta)}handleMapControlsPan(n,u,m){n.around.distSqr(u.centerPoint)<.01||u.setLocationAtPoint(m,n.around)}cameraForBoxAndBearing(n,u,m,v,S){return vh(n,u,m,v,S)}handleJumpToCenterZoom(n,u){n.zoom!==(u.zoom!==void 0?+u.zoom:n.zoom)&&n.setZoom(+u.zoom),u.center!==void 0&&n.setCenter(o.V.convert(u.center))}handleEaseTo(n,u){const m=n.zoom,v=n.padding,S={roll:n.roll,pitch:n.pitch,bearing:n.bearing},M={roll:u.roll===void 0?n.roll:u.roll,pitch:u.pitch===void 0?n.pitch:u.pitch,bearing:u.bearing===void 0?n.bearing:u.bearing},k=u.zoom!==void 0,O=!n.isPaddingEqual(u.padding);let N=!1;const H=k?+u.zoom:n.zoom;let J=n.centerPoint.add(u.offsetAsPoint);const K=n.screenPointToLocation(J),{center:ne,zoom:he}=n.applyConstrain(o.V.convert(u.center||K),H??m);wl(n,ne);const ge=Ue(n.worldSize,K),xe=Ue(n.worldSize,ne).sub(ge),_e=o.aq(he-m);return N=he!==m,{easeFunc:Me=>{if(N&&n.setZoom(o.G.number(m,he,Me)),o.bo(S,M)||yh({startEulerAngles:S,endEulerAngles:M,tr:n,k:Me,useSlerp:S.roll!=M.roll}),O&&(n.interpolatePadding(v,u.padding,Me),J=n.centerPoint.add(u.offsetAsPoint)),u.around)n.setLocationAtPoint(u.around,u.aroundPoint);else{const Oe=o.aq(n.zoom-m),Pe=he>m?Math.min(2,_e):Math.max(.5,_e),ze=Math.pow(Pe,1-Me),$e=Ke(n.worldSize,ge.add(xe.mult(Me*ze)).mult(Oe));n.setLocationAtPoint(n.renderWorldCopies?$e.wrap():$e,J)}},isZooming:N,elevationCenter:ne}}handleFlyTo(n,u){const m=u.zoom!==void 0,v=n.zoom,S=n.applyConstrain(o.V.convert(u.center||u.locationAtOffset),m?+u.zoom:v),M=S.center,k=S.zoom;wl(n,M);const O=Ue(n.worldSize,u.locationAtOffset),N=Ue(n.worldSize,M).sub(O),H=N.mag(),J=o.aq(k-v);let K;if(u.minZoom!==void 0){const ne=Math.min(+u.minZoom,v,k),he=n.applyConstrain(M,ne).zoom;K=o.aq(he-v)}return{easeFunc:(ne,he,ge,xe)=>{n.setZoom(ne===1?k:v+o.at(he));const _e=ne===1?M:Ke(n.worldSize,O.add(N.mult(ge)).mult(he));n.setLocationAtPoint(n.renderWorldCopies?_e.wrap():_e,xe)},scaleOfZoom:J,targetCenter:M,scaleOfMinZoom:K,pixelPathLength:H}}}class cn{constructor(n,u,m){this.blendFunction=n,this.blendColor=u,this.mask=m}}cn.Replace=[1,0],cn.disabled=new cn(cn.Replace,o.bp.transparent,[!1,!1,!1,!1]),cn.unblended=new cn(cn.Replace,o.bp.transparent,[!0,!0,!0,!0]),cn.alphaBlended=new cn([1,771],o.bp.transparent,[!0,!0,!0,!0]);const Cl=2305;class Jr{constructor(n,u,m){this.enable=n,this.mode=u,this.frontFace=m}}Jr.disabled=new Jr(!1,1029,Cl),Jr.backCCW=new Jr(!0,1029,Cl),Jr.frontCCW=new Jr(!0,1028,Cl);class jr{constructor(n,u,m){this.func=n,this.mask=u,this.range=m}}jr.ReadOnly=!1,jr.ReadWrite=!0,jr.disabled=new jr(519,jr.ReadOnly,[0,1]);const $a=7680;class Qr{constructor(n,u,m,v,S,M){this.test=n,this.ref=u,this.mask=m,this.fail=v,this.depthFail=S,this.pass=M}}Qr.disabled=new Qr({func:519,mask:0},0,0,$a,$a,$a);const du=new WeakMap;function si(w){var n;if(du.has(w))return du.get(w);{const u=(n=w.getParameter(w.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return du.set(w,u),u}}class Fs{get awaitingQuery(){return!!this._readbackQueue}constructor(n){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=n;const u=n.context,m=u.gl;this._texFormat=m.RGBA,this._texType=m.UNSIGNED_BYTE;const v=new o.aW;v.emplaceBack(-1,-1),v.emplaceBack(2,-1),v.emplaceBack(-1,2);const S=new o.aY;S.emplaceBack(0,1,2),this._fullscreenTriangle=new Mn(u.createVertexBuffer(v,ms.members),u.createIndexBuffer(S),o.aX.simpleSegment(0,0,v.length,S.length)),this._resultBuffer=new Uint8Array(4),u.activeTexture.set(m.TEXTURE1);const M=m.createTexture();m.bindTexture(m.TEXTURE_2D,M),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST),m.texImage2D(m.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=u.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(M),si(m)&&(this._pbo=m.createBuffer(),m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.bufferData(m.PIXEL_PACK_BUFFER,4,m.STREAM_READ),m.bindBuffer(m.PIXEL_PACK_BUFFER,null))}destroy(){const n=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),n.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(n,u){const m=this._updateCount;return this._readbackQueue?m>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():m>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(n,u),this._updateCount++,this._measuredError}_bindFramebuffer(){const n=this._cachedRenderContext.context,u=n.gl;n.activeTexture.set(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,this._fbo.colorAttachment.get()),n.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(n,u){const m=this._cachedRenderContext.context,v=m.gl;if(this._bindFramebuffer(),m.viewport.set([0,0,this._texWidth,this._texHeight]),m.clear({color:o.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(m,v.TRIANGLES,jr.disabled,Qr.disabled,cn.unblended,Jr.disabled,((S,M)=>({u_input:S,u_output_expected:M}))(n,u),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&si(v)){v.bindBuffer(v.PIXEL_PACK_BUFFER,this._pbo),v.readBuffer(v.COLOR_ATTACHMENT0),v.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),v.bindBuffer(v.PIXEL_PACK_BUFFER,null);const S=v.fenceSync(v.SYNC_GPU_COMMANDS_COMPLETE,0);v.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:S}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const n=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&si(n)){const u=n.clientWaitSync(this._readbackQueue.sync,0,0);if(u===n.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(u===n.TIMEOUT_EXPIRED)return;n.bindBuffer(n.PIXEL_PACK_BUFFER,this._pbo),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),n.bindBuffer(n.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),n.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Fs._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(n){let u=0;return u+=n[0]/256,u+=n[1]/65536,u+=n[2]/16777216,n[3]<127&&(u=-u),u/128}}const sa=o.a5/128;function fu(w,n){const u=w.granularity!==void 0?Math.max(w.granularity,1):1,m=u+(w.generateBorders?2:0),v=u+(w.extendToNorthPole||w.generateBorders?1:0)+(w.extendToSouthPole||w.generateBorders?1:0),S=m+1,M=v+1,k=w.generateBorders?-1:0,O=w.generateBorders||w.extendToNorthPole?-1:0,N=u+(w.generateBorders?1:0),H=u+(w.generateBorders||w.extendToSouthPole?1:0),J=S*M,K=m*v*6,ne=S*M>65536;if(ne&&n==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const he=ne||n==="32bit",ge=new Int16Array(2*J);let xe=0;for(let Oe=O;Oe<=H;Oe++)for(let Pe=k;Pe<=N;Pe++){let ze=Pe/u*o.a5;Pe===-1&&(ze=-sa),Pe===u+1&&(ze=o.a5+sa);let $e=Oe/u*o.a5;Oe===-1&&($e=w.extendToNorthPole?o.br:-sa),Oe===u+1&&($e=w.extendToSouthPole?o.bs:o.a5+sa),ge[xe++]=ze,ge[xe++]=$e}const _e=he?new Uint32Array(K):new Uint16Array(K);let Me=0;for(let Oe=0;Oe<v;Oe++)for(let Pe=0;Pe<m;Pe++){const ze=Pe+1+Oe*S,$e=Pe+(Oe+1)*S,Re=Pe+1+(Oe+1)*S;_e[Me++]=Pe+Oe*S,_e[Me++]=$e,_e[Me++]=ze,_e[Me++]=ze,_e[Me++]=$e,_e[Me++]=Re}return{vertices:ge.buffer.slice(0),indices:_e.buffer.slice(0),uses32bitIndices:he}}const _h=new o.aV({fill:new o.bt(128,2),line:new o.bt(512,0),tile:new o.bt(128,32),stencil:new o.bt(128,1),circle:3});class xh{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return _n.projectionGlobe}get vertexShaderPreludeCode(){return _n.projectionMercator.vertexSource}get subdivisionGranularity(){return _h}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(n){this._errorMeasurement||(this._errorMeasurement=new Fs(n));const u=o.X(this._errorQueryLatitudeDegrees),m=2*Math.atan(Math.exp(Math.PI-u*Math.PI*2))-.5*Math.PI,v=this._errorMeasurement.updateErrorLoop(u,m),S=j();v!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=v,this._errorMeasurementLastChangeTime=S);const M=Math.min(Math.max((S-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bv(M))}_getMeshKey(n){return`${n.granularity.toString(36)}_${n.generateBorders?"b":""}${n.extendToNorthPole?"n":""}${n.extendToSouthPole?"s":""}`}getMeshFromTileID(n,u,m,v,S){const M=(S==="stencil"?_h.stencil:_h.tile).getGranularityForZoomLevel(u.z);return this._getMesh(n,{granularity:M,generateBorders:m,extendToNorthPole:u.y===0&&v,extendToSouthPole:u.y===(1<<u.z)-1&&v})}_getMesh(n,u){const m=this._getMeshKey(u);if(m in this._tileMeshCache)return this._tileMeshCache[m];const v=function(S,M){const k=fu(M,"16bit"),O=o.aW.deserialize({arrayBuffer:k.vertices,length:k.vertices.byteLength/2/2}),N=o.aY.deserialize({arrayBuffer:k.indices,length:k.indices.byteLength/2/3});return new Mn(S.createVertexBuffer(O,ms.members),S.createIndexBuffer(N),o.aX.simpleSegment(0,0,O.length,N.length))}(n,u);return this._tileMeshCache[m]=v,v}recalculate(n){}hasTransition(){const n=j();let u=!1;return u=u||(n-this._errorMeasurementLastChangeTime)/1e3<.7,u=u||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,u}setErrorQueryLatitudeDegrees(n){this._errorQueryLatitudeDegrees=n}}const Nf=new o.t({type:new o.D(o.u.projection.type)});class pu extends o.E{constructor(n){super(),this._transitionable=new o.x(Nf,void 0),this.setProjection(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.H(0)),this._mercatorProjection=new Ki,this._verticalPerspectiveProjection=new xh}get transitionState(){const n=this.properties.get("type");if(typeof n=="string"&&n==="mercator")return 0;if(typeof n=="string"&&n==="vertical-perspective")return 1;if(n instanceof o.bw){if(n.from==="vertical-perspective"&&n.to==="mercator")return 1-n.transition;if(n.from==="mercator"&&n.to==="vertical-perspective")return n.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(n){this._mercatorProjection.updateGPUdependent(n),this._verticalPerspectiveProjection.updateGPUdependent(n)}getMeshFromTileID(n,u,m,v,S){return this.currentProjection.getMeshFromTileID(n,u,m,v,S)}setProjection(n){this._transitionable.setValue("type",n?.type||"mercator")}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}setErrorQueryLatitudeDegrees(n){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(n),this._mercatorProjection.setErrorQueryLatitudeDegrees(n)}}function Yi(w){const n=fc(w.worldSize,w.center.lat);return 2*Math.PI*n}function Bs(w,n,u,m,v){const S=1/(1<<v),M=n/o.a5*S+m*S,k=o.bz((w/o.a5*S+u*S)*Math.PI*2+Math.PI,2*Math.PI),O=2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI,N=Math.cos(O),H=new Float64Array(3);return H[0]=Math.sin(k)*N,H[1]=Math.sin(O),H[2]=Math.cos(k)*N,H}function Qn(w){return function(n,u){const m=Math.cos(u),v=new Float64Array(3);return v[0]=Math.sin(n)*m,v[1]=Math.sin(u),v[2]=Math.cos(n)*m,v}(w.lng*Math.PI/180,w.lat*Math.PI/180)}function fc(w,n){return w/(2*Math.PI)/Math.cos(n*Math.PI/180)}function Vf(w){const n=Math.asin(w[1])/Math.PI*180,u=Math.sqrt(w[0]*w[0]+w[2]*w[2]);if(u>1e-6){const m=w[0]/u,v=Math.acos(w[2]/u),S=(m>0?v:-v)/Math.PI*180;return new o.V(o.W(S,-180,180),n)}return new o.V(0,n)}function pc(w){return Math.cos(w*Math.PI/180)}function di(w,n){const u=pc(w),m=pc(n);return o.at(m/u)}function pm(w,n){const u=w.rotate(n.bearingInRadians),m=n.zoom+di(n.center.lat,0),v=o.bu(1/pc(n.center.lat),1/pc(Math.min(Math.abs(n.center.lat),60)),o.bx(m,7,3,0,1)),S=360/Yi({worldSize:n.worldSize,center:{lat:n.center.lat}});return new o.V(n.center.lng-u.x*S*v,o.an(n.center.lat+u.y*S,-o.ao,o.ao))}function Uf(w){const n=.5*w,u=Math.sin(n),m=Math.cos(n);return Math.log(u+m)-Math.log(m-u)}function mm(w,n,u,m){const v=w.lat+u*m;if(Math.abs(u)>1){const S=(Math.sign(w.lat+u)!==Math.sign(w.lat)?-Math.abs(w.lat):Math.abs(w.lat))*Math.PI/180,M=Math.abs(w.lat+u)*Math.PI/180,k=Uf(S+m*(M-S)),O=Uf(S),N=Uf(M);return new o.V(w.lng+n*((k-O)/(N-O)),v)}return new o.V(w.lng+n*m,v)}class oy{constructor(n){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=n}swapBuffers(){if(!this._hadAnyChanges)return;const n=this._cachePrevious;this._cachePrevious=this._cache,this._cache=n,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(n,u,m,v){const S=`${n.z}_${n.x}_${n.y}_${v?.terrain?"t":""}`,M=this._cache.get(S);if(M)return M;const k=this._cachePrevious.get(S);if(k)return this._cache.set(S,k),k;const O=this._boundingVolumeFactory(n,u,m,v);return this._cache.set(S,O),this._hadAnyChanges=!0,O}}class mc{constructor(n,u,m,v){this.min=m,this.max=v,this.points=n,this.planes=u}static fromAabb(n,u){const m=[];for(let v=0;v<8;v++)m.push([1&~v?n[0]:u[0],(v>>1&1)==1?u[1]:n[1],(v>>2&1)==1?u[2]:n[2]]);return new mc(m,[[-1,0,0,u[0]],[1,0,0,-n[0]],[0,-1,0,u[1]],[0,1,0,-n[1]],[0,0,-1,u[2]],[0,0,1,-n[2]]],n,u)}static fromCenterSizeAngles(n,u,m){const v=o.bB([],m[0],m[1],m[2]),S=o.bC([],[u[0],0,0],v),M=o.bC([],[0,u[1],0],v),k=o.bC([],[0,0,u[2]],v),O=[...n],N=[...n];for(let J=0;J<8;J++)for(let K=0;K<3;K++){const ne=n[K]+S[K]*(1&~J?-1:1)+M[K]*((J>>1&1)==1?1:-1)+k[K]*((J>>2&1)==1?1:-1);O[K]=Math.min(O[K],ne),N[K]=Math.max(N[K],ne)}const H=[];for(let J=0;J<8;J++){const K=[...n];o.b0(K,K,o.a$([],S,1&~J?-1:1)),o.b0(K,K,o.a$([],M,(J>>1&1)==1?1:-1)),o.b0(K,K,o.a$([],k,(J>>2&1)==1?1:-1)),H.push(K)}return new mc(H,[[...S,-o.b5(S,H[0])],[...M,-o.b5(M,H[0])],[...k,-o.b5(k,H[0])],[-S[0],-S[1],-S[2],-o.b5(S,H[7])],[-M[0],-M[1],-M[2],-o.b5(M,H[7])],[-k[0],-k[1],-k[2],-o.b5(k,H[7])]],O,N)}intersectsFrustum(n){let u=!0;const m=this.points.length,v=this.planes.length,S=n.planes.length,M=n.points.length;for(let k=0;k<S;k++){const O=n.planes[k];let N=0;for(let H=0;H<m;H++){const J=this.points[H];O[0]*J[0]+O[1]*J[1]+O[2]*J[2]+O[3]>=0&&N++}if(N===0)return 0;N<m&&(u=!1)}if(u)return 2;for(let k=0;k<v;k++){const O=this.planes[k];let N=0;for(let H=0;H<M;H++){const J=n.points[H];O[0]*J[0]+O[1]*J[1]+O[2]*J[2]+O[3]>=0&&N++}if(N===0)return 0}return 1}intersectsPlane(n){const u=this.points.length;let m=0;for(let v=0;v<u;v++){const S=this.points[v];n[0]*S[0]+n[1]*S[1]+n[2]*S[2]+n[3]>=0&&m++}return m===u?2:m===0?0:1}}function pd(w,n,u){const m=w-n;return m<0?-m:Math.max(0,m-u)}function mu(w,n,u,m,v){const S=w-u;let M;return M=S<0?Math.min(-S,1+S-v):S>1?Math.min(Math.max(S-v,0),1-S):0,Math.max(M,pd(n,m,v))}class Gf{constructor(){this._boundingVolumeCache=new oy(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(n,u,m,v){const S=1<<m.z,M=1/S,k=m.x/S,O=m.y/S;let N=2;return N=Math.min(N,mu(n,u,k,O,M)),N=Math.min(N,mu(n,u,k+.5,-O-M,M)),N=Math.min(N,mu(n,u,k+.5,2-O-M,M)),N}getWrap(n,u,m){const v=1<<u.z,S=1/v,M=u.x/v,k=pd(n.x,M,S),O=pd(n.x,M-1,S),N=pd(n.x,M+1,S),H=Math.min(k,O,N);return H===N?1:H===O?-1:0}allowVariableZoom(n,u){return vr(n,u)>4}allowWorldCopies(){return!1}getTileBoundingVolume(n,u,m,v){return this._boundingVolumeCache.getTileBoundingVolume(n,u,m,v)}_computeTileBoundingVolume(n,u,m,v){var S,M;let k=0,O=0;if(v?.terrain){const N=new o.a2(n.z,u,n.z,n.x,n.y),H=v.terrain.getMinMaxElevation(N);k=(S=H.minElevation)!==null&&S!==void 0?S:Math.min(0,m),O=(M=H.maxElevation)!==null&&M!==void 0?M:Math.max(0,m)}if(k/=o.bE,O/=o.bE,k+=1,O+=1,n.z<=0)return mc.fromAabb([-O,-O,-O],[O,O,O]);if(n.z===1)return mc.fromAabb([n.x===0?-O:0,n.y===0?0:-O,-O],[n.x===0?0:O,n.y===0?O:0,O]);{const N=[Bs(0,0,n.x,n.y,n.z),Bs(o.a5,0,n.x,n.y,n.z),Bs(o.a5,o.a5,n.x,n.y,n.z),Bs(0,o.a5,n.x,n.y,n.z)],H=[];for(const lt of N)H.push(o.a$([],lt,O));if(O!==k)for(const lt of N)H.push(o.a$([],lt,k));n.y===0&&H.push([0,1,0]),n.y===(1<<n.z)-1&&H.push([0,-1,0]);const J=[1,1,1],K=[-1,-1,-1];for(const lt of H)for(let ct=0;ct<3;ct++)J[ct]=Math.min(J[ct],lt[ct]),K[ct]=Math.max(K[ct],lt[ct]);const ne=Bs(o.a5/2,o.a5/2,n.x,n.y,n.z),he=o.b4([],[0,1,0],ne);o.b3(he,he);const ge=o.b4([],ne,he);o.b3(ge,ge);const xe=o.b4([],N[2],N[1]);o.b3(xe,xe);const _e=o.b4([],N[0],N[3]);o.b3(_e,_e),H.push(o.a$([],ne,O)),n.y>=(1<<n.z)/2&&H.push(o.a$([],Bs(o.a5/2,0,n.x,n.y,n.z),O)),n.y<(1<<n.z)/2&&H.push(o.a$([],Bs(o.a5/2,o.a5,n.x,n.y,n.z),O));const Me=bh(ne,H),Oe=bh(ge,H),Pe=[-ne[0],-ne[1],-ne[2],Me.max],ze=[ne[0],ne[1],ne[2],-Me.min],$e=[-ge[0],-ge[1],-ge[2],Oe.max],Re=[ge[0],ge[1],ge[2],-Oe.min],We=[...xe,0],dt=[..._e,0],at=[];return n.y===0?at.push(o.bD(dt,We,Pe),o.bD(dt,We,ze)):at.push(o.bD($e,We,Pe),o.bD($e,We,ze),o.bD($e,dt,Pe),o.bD($e,dt,ze)),n.y===(1<<n.z)-1?at.push(o.bD(dt,We,Pe),o.bD(dt,We,ze)):at.push(o.bD(Re,We,Pe),o.bD(Re,We,ze),o.bD(Re,dt,Pe),o.bD(Re,dt,ze)),new mc(at,[Pe,ze,$e,Re,We,dt],J,K)}}}function bh(w,n){let u=1/0,m=-1/0;for(const v of n){const S=o.b5(w,v);u=Math.min(u,S),m=Math.max(m,S)}return{min:u,max:m}}class Tl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,u,m){return this._helper.interpolatePadding(n,u,m)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,u){this._helper.resize(n,u)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}setConstrainOverride(n){this._helper.setConstrainOverride(n)}overrideNearFarZ(n,u){this._helper.overrideNearFarZ(n,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n){}constructor(n){this._cachedClippingPlane=o.bF(),this._projectionMatrix=o.bj(),this._globeViewProjMatrix32f=o.bi(),this._globeViewProjMatrixNoCorrection=o.bj(),this._globeViewProjMatrixNoCorrectionInverted=o.bj(),this._globeProjMatrixInverted=o.bj(),this._cameraPosition=o.bA(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(u,m)=>{const v=o.an(u.lat,-o.ao,o.ao),S=o.an(+m,this.minZoom+di(0,v),this.maxZoom);return{center:new o.V(u.lng,v),zoom:S}},this.applyConstrain=(u,m)=>this._helper.applyConstrain(u,m),this._helper=new Os({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(u,m)=>this.defaultConstrain(u,m)},n),this._coveringTilesDetailsProvider=new Gf}clone(){const n=new Tl;return n.apply(this,!1),n}apply(n,u,m){this._globeLatitudeErrorCorrectionRadians=m||0,this._helper.apply(n,u)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const n=o.bA();return n[0]=this._cameraPosition[0],n[1]=this._cameraPosition[1],n[2]=this._cameraPosition[2],n}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(n){const{overscaledTileID:u,applyGlobeMatrix:m}=n,v=this._helper.getMercatorTileCoordinates(u);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:v,clippingPlane:this._cachedClippingPlane,projectionTransition:m?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(n){const u=this.pitchInRadians,m=this.cameraToCenterDistance/n,v=Math.sin(u)*m,S=Math.cos(u)*m+1,M=1/Math.sqrt(v*v+S*S)*1;let k=-v,O=S;const N=Math.sqrt(k*k+O*O);k/=N,O/=N;const H=[0,k,O];o.bG(H,H,[0,0,0],-this.bearingInRadians),o.bH(H,H,[0,0,0],-1*this.center.lat*Math.PI/180),o.bI(H,H,[0,0,0],this.center.lng*Math.PI/180);const J=1/o.b7(H);return o.a$(H,H,J),[...H,-M*J]}isLocationOccluded(n){return!this.isSurfacePointVisible(Qn(n))}transformLightDirection(n){const u=this._helper._center.lng*Math.PI/180,m=this._helper._center.lat*Math.PI/180,v=Math.cos(m),S=[Math.sin(u)*v,Math.sin(m),Math.cos(u)*v],M=[S[2],0,-S[0]],k=[0,0,0];o.b4(k,M,S),o.b3(M,M),o.b3(k,k);const O=[0,0,0];return o.b3(O,[M[0]*n[0]+k[0]*n[1]+S[0]*n[2],M[1]*n[0]+k[1]*n[1]+S[1]*n[2],M[2]*n[0]+k[2]*n[1]+S[2]*n[2]]),O}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(n,u,m){const v=function(k,O,N){const H=1/(1<<N.z);return new o.a9(k/o.a5*H+N.x*H,O/o.a5*H+N.y*H)}(n,u,m.canonical),S=(M=v.y,[o.bz(v.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI]);var M;return this.getCircleRadiusCorrection()/Math.cos(S[1])}projectTileCoordinates(n,u,m,v){const S=m.canonical,M=Bs(n,u,S.x,S.y,S.z),k=1+(v?v(n,u):0)/o.bE,O=[M[0]*k,M[1]*k,M[2]*k,1];o.aH(O,O,this._globeViewProjMatrixNoCorrection);const N=this._cachedClippingPlane,H=N[0]*M[0]+N[1]*M[1]+N[2]*M[2]+N[3]<0;return{point:new o.P(O[0]/O[3],O[1]/O[3]),signedDistanceFromCamera:O[3],isOccluded:H}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const n=fc(this.worldSize,this.center.lat),u=o.bk(),m=o.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*n),o.be(u,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const v=this.centerOffset;u[8]=2*-v.x/this._helper._width,u[9]=2*v.y/this._helper._height,this._projectionMatrix=o.bf(u),this._globeProjMatrixInverted=o.bk(),o.aB(this._globeProjMatrixInverted,u),o.O(u,u,[0,0,-this.cameraToCenterDistance]),o.bg(u,u,this.rollInRadians),o.bh(u,u,-this.pitchInRadians),o.bg(u,u,this.bearingInRadians),o.O(u,u,[0,0,-n]);const S=o.bA();S[0]=n,S[1]=n,S[2]=n,o.bh(m,u,this.center.lat*Math.PI/180),o.bJ(m,m,-this.center.lng*Math.PI/180),o.Q(m,m,S),this._globeViewProjMatrixNoCorrection=m,o.bh(u,u,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bJ(u,u,-this.center.lng*Math.PI/180),o.Q(u,u,S),this._globeViewProjMatrix32f=new Float32Array(u),this._globeViewProjMatrixNoCorrectionInverted=o.bk(),o.aB(this._globeViewProjMatrixNoCorrectionInverted,m);const M=o.bA();this._cameraPosition=o.bA(),this._cameraPosition[2]=this.cameraToCenterDistance/n,o.bG(this._cameraPosition,this._cameraPosition,M,-this.rollInRadians),o.bH(this._cameraPosition,this._cameraPosition,M,this.pitchInRadians),o.bG(this._cameraPosition,this._cameraPosition,M,-this.bearingInRadians),o.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bH(this._cameraPosition,this._cameraPosition,M,-this.center.lat*Math.PI/180),o.bI(this._cameraPosition,this._cameraPosition,M,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(n);const k=o.bf(this._globeViewProjMatrixNoCorrectionInverted);o.Q(k,k,[1,1,-1]),this._cachedFrustum=Uo.fromInvProjectionMatrix(k,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(n){o.w("calculateFogMatrix is not supported on globe projection.");const u=o.bk();return o.ar(u),u}getVisibleUnwrappedCoordinates(n){return[new o.bc(0,n)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){n&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,u){if(!this._globeViewProjMatrixNoCorrection)return 1;const m=Qn(n);o.a$(m,m,1+u/o.bE);const v=o.bF();return o.aH(v,[m[0],m[1],m[2],1],this._globeViewProjMatrixNoCorrection),v[2]/v[3]}populateCache(n){}getBounds(){const n=.5*this.width,u=.5*this.height,m=[new o.P(0,0),new o.P(n,0),new o.P(this.width,0),new o.P(this.width,u),new o.P(this.width,this.height),new o.P(n,this.height),new o.P(0,this.height),new o.P(0,u)],v=[];for(const J of m)v.push(this.unprojectScreenPoint(J));let S=0,M=0,k=0,O=0;const N=this.center;for(const J of v){const K=o.bK(N.lng,J.lng),ne=o.bK(N.lat,J.lat);K<M&&(M=K),K>S&&(S=K),ne<O&&(O=ne),ne>k&&(k=ne)}const H=[N.lng+M,N.lat+O,N.lng+S,N.lat+k];return this.isSurfacePointOnScreen([0,1,0])&&(H[3]=90,H[0]=-180,H[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(H[1]=-90,H[0]=-180,H[2]=180),new pr(H)}calculateCenterFromCameraLngLatAlt(n,u,m,v){return this._helper.calculateCenterFromCameraLngLatAlt(n,u,m,v)}setLocationAtPoint(n,u){const m=Qn(this.unprojectScreenPoint(u)),v=Qn(n),S=o.bA();o.bL(S);const M=o.bA();o.bI(M,m,S,-this.center.lng*Math.PI/180),o.bH(M,M,S,this.center.lat*Math.PI/180);const k=v[0]*v[0]+v[2]*v[2],O=M[0]*M[0];if(k<O)return;const N=Math.sqrt(k-O),H=-N,J=o.bM(v[0],v[2],M[0],N),K=o.bM(v[0],v[2],M[0],H),ne=o.bA();o.bI(ne,v,S,-J);const he=o.bM(ne[1],ne[2],M[1],M[2]),ge=o.bA();o.bI(ge,v,S,-K);const xe=o.bM(ge[1],ge[2],M[1],M[2]),_e=.5*Math.PI,Me=he>=-_e&&he<=_e,Oe=xe>=-_e&&xe<=_e;let Pe,ze;if(Me&&Oe){const dt=this.center.lng*Math.PI/180,at=this.center.lat*Math.PI/180;o.bN(J,dt)+o.bN(he,at)<o.bN(K,dt)+o.bN(xe,at)?(Pe=J,ze=he):(Pe=K,ze=xe)}else if(Me)Pe=J,ze=he;else{if(!Oe)return;Pe=K,ze=xe}const $e=Pe/Math.PI*180,Re=ze/Math.PI*180,We=this.center.lat;this.setCenter(new o.V($e,o.an(Re,-90,90))),this.setZoom(this.zoom+di(We,this.center.lat))}locationToScreenPoint(n,u){const m=Qn(n);if(u){const v=u.getElevationForLngLatZoom(n,this._helper._tileZoom);o.a$(m,m,1+v/o.bE)}return this._projectSurfacePointToScreen(m)}_projectSurfacePointToScreen(n){const u=o.bF();return o.aH(u,[...n,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],new o.P((.5*u[0]+.5)*this.width,(.5*-u[1]+.5)*this.height)}screenPointToMercatorCoordinate(n,u){if(u){const m=u.pointCoordinate(n);if(m)return m}return o.a9.fromLngLat(this.unprojectScreenPoint(n))}screenPointToLocation(n,u){var m;return(m=this.screenPointToMercatorCoordinate(n,u))===null||m===void 0?void 0:m.toLngLat()}isPointOnMapSurface(n,u){const m=this._cameraPosition,v=this.getRayDirectionFromPixel(n);return!!this.rayPlanetIntersection(m,v)}getRayDirectionFromPixel(n){const u=o.bF();u[0]=n.x/this.width*2-1,u[1]=-1*(n.y/this.height*2-1),u[2]=1,u[3]=1,o.aH(u,u,this._globeViewProjMatrixNoCorrectionInverted),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3];const m=o.bA();m[0]=u[0]-this._cameraPosition[0],m[1]=u[1]-this._cameraPosition[1],m[2]=u[2]-this._cameraPosition[2];const v=o.bA();return o.b3(v,m),v}isSurfacePointVisible(n){const u=this._cachedClippingPlane;return u[0]*n[0]+u[1]*n[1]+u[2]*n[2]+u[3]>=0}isSurfacePointOnScreen(n){if(!this.isSurfacePointVisible(n))return!1;const u=o.bF();return o.aH(u,[...n,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3],u[0]>-1&&u[0]<1&&u[1]>-1&&u[1]<1&&u[2]>-1&&u[2]<1}rayPlanetIntersection(n,u){const m=o.b5(n,u),v=o.bA(),S=o.bA();o.a$(S,u,m),o.b2(v,n,S);const M=1-o.b5(v,v);if(M<0)return null;const k=o.b5(n,n)-1,O=-m+(m<0?1:-1)*Math.sqrt(M),N=k/O,H=O;return{tMin:Math.min(N,H),tMax:Math.max(N,H)}}unprojectScreenPoint(n){const u=this._cameraPosition,m=this.getRayDirectionFromPixel(n),v=this.rayPlanetIntersection(u,m);if(v){const H=o.bA();o.b0(H,u,[m[0]*v.tMin,m[1]*v.tMin,m[2]*v.tMin]);const J=o.bA();return o.b3(J,H),Vf(J)}const S=this._cachedClippingPlane,M=S[0]*m[0]+S[1]*m[1]+S[2]*m[2],k=-o.bb(S,u)/M,O=o.bA();if(k>0)o.b0(O,u,[m[0]*k,m[1]*k,m[2]*k]);else{const H=o.bA();o.b0(H,u,[2*m[0],2*m[1],2*m[2]]);const J=o.bb(this._cachedClippingPlane,H);o.b2(O,H,[this._cachedClippingPlane[0]*J,this._cachedClippingPlane[1]*J,this._cachedClippingPlane[2]*J])}const N=function(H){const J=o.bA();return J[0]=H[0]*-H[3],J[1]=H[1]*-H[3],J[2]=H[2]*-H[3],{center:J,radius:Math.sqrt(1-H[3]*H[3])}}(S);return Vf(function(H,J,K){const ne=o.bA();o.b2(ne,K,H);const he=o.bA();return o.by(he,H,ne,J/o.b9(ne)),he}(N.center,N.radius,O))}getMatrixForModel(n,u){const m=o.V.convert(n),v=1/o.bE,S=o.bj();return o.bJ(S,S,m.lng/180*Math.PI),o.bh(S,S,-m.lat/180*Math.PI),o.O(S,S,[0,0,1+u/o.bE]),o.bh(S,S,.5*Math.PI),o.Q(S,S,[v,v,v]),S}getProjectionDataForCustomLayer(n=!0){const u=this.getProjectionData({overscaledTileID:new o.a2(0,0,0,0,0),applyGlobeMatrix:n});return u.tileMercatorCoords=[0,0,1,1],u}getFastPathSimpleProjectionMatrix(n){}}class gu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,u,m){return this._helper.interpolatePadding(n,u,m)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,u,m=!0){this._helper.resize(n,u,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}setConstrainOverride(n){this._helper.setConstrainOverride(n)}overrideNearFarZ(n,u){this._helper.overrideNearFarZ(n,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(n,u){this._globeness=n,this._globeLatitudeErrorCorrectionRadians=u,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(n){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(u,m)=>this.currentTransform.defaultConstrain(u,m),this.applyConstrain=(u,m)=>this._helper.applyConstrain(u,m),this._helper=new Os({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(u,m)=>this.defaultConstrain(u,m)},n),this._globeness=1,this._mercatorTransform=new dc,this._verticalPerspectiveTransform=new Tl}clone(){const n=new gu;return n._globeness=this._globeness,n._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,n.apply(this,!1),n}apply(n,u){this._helper.apply(n,u),this._mercatorTransform.apply(this,!1),this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(n){const u=this._mercatorTransform.getProjectionData(n),m=this._verticalPerspectiveTransform.getProjectionData(n);return{mainMatrix:this.isGlobeRendering?m.mainMatrix:u.mainMatrix,clippingPlane:m.clippingPlane,tileMercatorCoords:m.tileMercatorCoords,projectionTransition:n.applyGlobeMatrix?this._globeness:0,fallbackMatrix:u.fallbackMatrix}}isLocationOccluded(n){return this.currentTransform.isLocationOccluded(n)}transformLightDirection(n){return this.currentTransform.transformLightDirection(n)}getPixelScale(){return o.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(n,u,m){const v=this._mercatorTransform.getPitchedTextCorrection(n,u,m),S=this._verticalPerspectiveTransform.getPitchedTextCorrection(n,u,m);return o.bu(v,S,this._globeness)}projectTileCoordinates(n,u,m,v){return this.currentTransform.projectTileCoordinates(n,u,m,v)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(n){return this.currentTransform.calculateFogMatrix(n)}getVisibleUnwrappedCoordinates(n){return this.currentTransform.getVisibleUnwrappedCoordinates(n)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(n){this._mercatorTransform.recalculateZoomAndCenter(n),this._verticalPerspectiveTransform.recalculateZoomAndCenter(n)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,u){return this.currentTransform.lngLatToCameraDepth(n,u)}populateCache(n){this._mercatorTransform.populateCache(n),this._verticalPerspectiveTransform.populateCache(n)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(n,u,m,v){return this._helper.calculateCenterFromCameraLngLatAlt(n,u,m,v)}setLocationAtPoint(n,u){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(n,u),void this.apply(this._mercatorTransform,!1);this._verticalPerspectiveTransform.setLocationAtPoint(n,u),this.apply(this._verticalPerspectiveTransform,!1)}locationToScreenPoint(n,u){return this.currentTransform.locationToScreenPoint(n,u)}screenPointToMercatorCoordinate(n,u){return this.currentTransform.screenPointToMercatorCoordinate(n,u)}screenPointToLocation(n,u){return this.currentTransform.screenPointToLocation(n,u)}isPointOnMapSurface(n,u){return this.currentTransform.isPointOnMapSurface(n,u)}getRayDirectionFromPixel(n){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(n)}getMatrixForModel(n,u){return this.currentTransform.getMatrixForModel(n,u)}getProjectionDataForCustomLayer(n=!0){const u=this._mercatorTransform.getProjectionDataForCustomLayer(n);if(!this.isGlobeRendering)return u;const m=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(n);return m.fallbackMatrix=u.mainMatrix,m}getFastPathSimpleProjectionMatrix(n){return this.currentTransform.getFastPathSimpleProjectionMatrix(n)}}class Oi{get useGlobeControls(){return!0}handlePanInertia(n,u){const m=pm(n,u);return Math.abs(m.lng-u.center.lng)>180&&(m.lng=u.center.lng+179.5*Math.sign(m.lng-u.center.lng)),{easingCenter:m,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(n,u){const m=n.around,v=u.screenPointToLocation(m);n.bearingDelta&&u.setBearing(u.bearing+n.bearingDelta),n.pitchDelta&&u.setPitch(u.pitch+n.pitchDelta),n.rollDelta&&u.setRoll(u.roll+n.rollDelta);const S=u.zoom;n.zoomDelta&&u.setZoom(u.zoom+n.zoomDelta);const M=u.zoom-S;if(M===0)return;const k=o.bK(u.center.lng,v.lng),O=k/(Math.abs(k/180)+1),N=o.bK(u.center.lat,v.lat),H=u.getRayDirectionFromPixel(m),J=u.cameraPosition,K=-1*o.b5(J,H),ne=o.bA();o.b0(ne,J,[H[0]*K,H[1]*K,H[2]*K]);const he=o.b7(ne)-1,ge=Math.exp(.5*-Math.max(he-.3,0)),xe=fc(u.worldSize,u.center.lat)/Math.min(u.width,u.height),_e=o.bx(xe,.9,.5,1,.25),Me=(1-o.aq(-M))*Math.min(ge,_e),Oe=u.center.lat,Pe=u.zoom,ze=new o.V(u.center.lng+O*Me,o.an(u.center.lat+N*Me,-o.ao,o.ao));u.setLocationAtPoint(v,m);const $e=u.center,Re=o.bx(Math.abs(k),45,85,0,1),We=o.bx(xe,.75,.35,0,1),dt=Math.pow(Math.max(Re,We),.25),at=o.bK($e.lng,ze.lng),lt=o.bK($e.lat,ze.lat);u.setCenter(new o.V($e.lng+at*dt,$e.lat+lt*dt).wrap()),u.setZoom(Pe+di(Oe,u.center.lat))}handleMapControlsPan(n,u,m){if(!n.panDelta)return;const v=u.center.lat,S=u.zoom;u.setCenter(pm(n.panDelta,u).wrap()),u.setZoom(S+di(v,u.center.lat))}cameraForBoxAndBearing(n,u,m,v,S){const M=vh(n,u,m,v,S),k=u.left/S.width*2-1,O=(S.width-u.right)/S.width*2-1,N=u.top/S.height*-2+1,H=(S.height-u.bottom)/S.height*-2+1,J=o.bK(m.getWest(),m.getEast())<0,K=J?m.getEast():m.getWest(),ne=J?m.getWest():m.getEast(),he=Math.max(m.getNorth(),m.getSouth()),ge=Math.min(m.getNorth(),m.getSouth()),xe=K+.5*o.bK(K,ne),_e=he+.5*o.bK(he,ge),Me=S.clone();Me.setCenter(M.center),Me.setBearing(M.bearing),Me.setPitch(0),Me.setRoll(0),Me.setZoom(M.zoom);const Oe=Me.modelViewProjectionMatrix,Pe=[Qn(m.getNorthWest()),Qn(m.getNorthEast()),Qn(m.getSouthWest()),Qn(m.getSouthEast()),Qn(new o.V(ne,_e)),Qn(new o.V(K,_e)),Qn(new o.V(xe,he)),Qn(new o.V(xe,ge))],ze=Qn(M.center);let $e=Number.POSITIVE_INFINITY;for(const Re of Pe)k<0&&($e=Oi.getLesserNonNegativeNonNull($e,Oi.solveVectorScale(Re,ze,Oe,"x",k))),O>0&&($e=Oi.getLesserNonNegativeNonNull($e,Oi.solveVectorScale(Re,ze,Oe,"x",O))),N>0&&($e=Oi.getLesserNonNegativeNonNull($e,Oi.solveVectorScale(Re,ze,Oe,"y",N))),H<0&&($e=Oi.getLesserNonNegativeNonNull($e,Oi.solveVectorScale(Re,ze,Oe,"y",H)));if(Number.isFinite($e)&&$e!==0)return M.zoom=Me.zoom+o.at($e),M;Ls()}handleJumpToCenterZoom(n,u){const m=n.center.lat,v=n.applyConstrain(u.center?o.V.convert(u.center):n.center,n.zoom).center;n.setCenter(v.wrap());const S=u.zoom!==void 0?+u.zoom:n.zoom+di(m,v.lat);n.zoom!==S&&n.setZoom(S)}handleEaseTo(n,u){const m=n.zoom,v=n.center,S=n.padding,M={roll:n.roll,pitch:n.pitch,bearing:n.bearing},k={roll:u.roll===void 0?n.roll:u.roll,pitch:u.pitch===void 0?n.pitch:u.pitch,bearing:u.bearing===void 0?n.bearing:u.bearing},O=u.zoom!==void 0,N=!n.isPaddingEqual(u.padding);let H=!1;const J=u.center?o.V.convert(u.center):v,K=n.applyConstrain(J,m).center;wl(n,K);const ne=n.clone();ne.setCenter(K),ne.setZoom(O?+u.zoom:m+di(v.lat,J.lat)),ne.setBearing(u.bearing);const he=new o.P(o.an(n.centerPoint.x+u.offsetAsPoint.x,0,n.width),o.an(n.centerPoint.y+u.offsetAsPoint.y,0,n.height));ne.setLocationAtPoint(K,he);const ge=(u.offset&&u.offsetAsPoint.mag())>0?ne.center:K,xe=O?+u.zoom:m+di(v.lat,ge.lat),_e=m+di(v.lat,0),Me=xe+di(ge.lat,0),Oe=o.bK(v.lng,ge.lng),Pe=o.bK(v.lat,ge.lat),ze=o.aq(Me-_e);return H=xe!==m,{easeFunc:$e=>{if(o.bo(M,k)||yh({startEulerAngles:M,endEulerAngles:k,tr:n,k:$e,useSlerp:M.roll!=k.roll}),N&&n.interpolatePadding(S,u.padding,$e),u.around)o.w("Easing around a point is not supported under globe projection."),n.setLocationAtPoint(u.around,u.aroundPoint);else{const Re=Me>_e?Math.min(2,ze):Math.max(.5,ze),We=Math.pow(Re,1-$e),dt=mm(v,Oe,Pe,$e*We);n.setCenter(dt.wrap())}if(H){const Re=o.G.number(_e,Me,$e)+di(0,n.center.lat);n.setZoom(Re)}},isZooming:H,elevationCenter:ge}}handleFlyTo(n,u){const m=u.zoom!==void 0,v=n.center,S=n.zoom,M=n.padding,k=!n.isPaddingEqual(u.padding),O=n.applyConstrain(o.V.convert(u.center||u.locationAtOffset),S).center,N=m?+u.zoom:n.zoom+di(n.center.lat,O.lat),H=n.clone();H.setCenter(O),H.setZoom(N),H.setBearing(u.bearing);const J=new o.P(o.an(n.centerPoint.x+u.offsetAsPoint.x,0,n.width),o.an(n.centerPoint.y+u.offsetAsPoint.y,0,n.height));H.setLocationAtPoint(O,J);const K=H.center;wl(n,K);const ne=function(Pe,ze,$e){const Re=Qn(ze),We=Qn($e),dt=o.b5(Re,We),at=Math.acos(dt),lt=Yi(Pe);return at/(2*Math.PI)*lt}(n,v,K),he=S+di(v.lat,0),ge=N+di(K.lat,0),xe=o.aq(ge-he);let _e;if(typeof u.minZoom=="number"){const Pe=+u.minZoom+di(K.lat,0),ze=Math.min(Pe,he,ge)+di(0,K.lat),$e=n.applyConstrain(K,ze).zoom+di(K.lat,0);_e=o.aq($e-he)}const Me=o.bK(v.lng,K.lng),Oe=o.bK(v.lat,K.lat);return{easeFunc:(Pe,ze,$e,Re)=>{const We=mm(v,Me,Oe,$e);k&&n.interpolatePadding(M,u.padding,Pe);const dt=Pe===1?K:We;n.setCenter(dt.wrap());const at=he+o.at(ze);n.setZoom(Pe===1?N:at+di(0,dt.lat))},scaleOfZoom:xe,targetCenter:K,scaleOfMinZoom:_e,pixelPathLength:ne}}static solveVectorScale(n,u,m,v,S){const M=v==="x"?[m[0],m[4],m[8],m[12]]:[m[1],m[5],m[9],m[13]],k=[m[3],m[7],m[11],m[15]],O=n[0]*M[0]+n[1]*M[1]+n[2]*M[2],N=n[0]*k[0]+n[1]*k[1]+n[2]*k[2],H=u[0]*M[0]+u[1]*M[1]+u[2]*M[2],J=u[0]*k[0]+u[1]*k[1]+u[2]*k[2];return H+S*N===O+S*J||k[3]*(O-H)+M[3]*(J-N)+O*J==H*N?null:(H+M[3]-S*J-S*k[3])/(H-O-S*J+S*N)}static getLesserNonNegativeNonNull(n,u){return u!==null&&u>=0&&u<n?u:n}}class gm{constructor(n){this._globe=n,this._mercatorCameraHelper=new Sl,this._verticalPerspectiveCameraHelper=new Oi}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(n,u){return this.currentHelper.handlePanInertia(n,u)}handleMapControlsRollPitchBearingZoom(n,u){return this.currentHelper.handleMapControlsRollPitchBearingZoom(n,u)}handleMapControlsPan(n,u,m){this.currentHelper.handleMapControlsPan(n,u,m)}cameraForBoxAndBearing(n,u,m,v,S){return this.currentHelper.cameraForBoxAndBearing(n,u,m,v,S)}handleJumpToCenterZoom(n,u){this.currentHelper.handleJumpToCenterZoom(n,u)}handleEaseTo(n,u){return this.currentHelper.handleEaseTo(n,u)}handleFlyTo(n,u){return this.currentHelper.handleFlyTo(n,u)}}const gc=(w,n)=>o.B(w,n&&n.filter(u=>u.identifier!=="source.canvas")),wh=o.bO();class yc extends o.E{constructor(n,u={}){var m,v;super(),this._rtlPluginLoaded=()=>{for(const M in this.tileManagers){const k=this.tileManagers[M].getSource().type;k!=="vector"&&k!=="geojson"||this.tileManagers[M].reload()}},this.map=n,this.dispatcher=new At(kt(),n._getMapId()),this.dispatcher.registerMessageHandler("GG",(M,k)=>this.getGlyphs(M,k)),this.dispatcher.registerMessageHandler("GI",(M,k)=>this.getImages(M,k)),this.dispatcher.registerMessageHandler("GDA",(M,k)=>this.getDashes(M,k)),this.imageManager=new Ze,this.imageManager.setEventedParent(this);const S=((m=n._container)===null||m===void 0?void 0:m.lang)||typeof document<"u"&&((v=document.documentElement)===null||v===void 0?void 0:v.lang)||void 0;this.glyphManager=new rt(n._requestManager,u.localIdeographFontFamily,S),this.lineAtlas=new pt(256,512),this.crossTileSymbolIndex=new Xi,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",o.bP()),ie().on(Zr,this._rtlPluginLoaded),this.on("data",M=>{if(M.dataType!=="source"||M.sourceDataType!=="metadata")return;const k=this.tileManagers[M.sourceId];if(!k)return;const O=k.getSource();if(O&&O.vectorLayerIds)for(const N in this._layers){const H=this._layers[N];H.source===O.id&&this._validateLayer(H)}})}_setInitialValues(){var n;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new o.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((n=this.crossTileSymbolIndex)===null||n===void 0?void 0:n.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(n,u){var m,v,S;this._checkLoaded();const M=u===null?(S=(v=(m=this.stylesheet.state)===null||m===void 0?void 0:m[n])===null||v===void 0?void 0:v.default)!==null&&S!==void 0?S:null:u;if(o.bR(M,this._globalState[n]))return this;this._globalState[n]=M,this._applyGlobalStateChanges([n])}getGlobalState(){return this._globalState}setGlobalState(n){this._checkLoaded();const u=[];for(const m in n)!o.bR(this._globalState[m],n[m].default)&&(u.push(m),this._globalState[m]=n[m].default);this._applyGlobalStateChanges(u)}_applyGlobalStateChanges(n){if(n.length===0)return;const u=new Set,m={};for(const v of n){m[v]=this._globalState[v];for(const S in this._layers){const M=this._layers[S],k=M.getLayoutAffectingGlobalStateRefs(),O=M.getPaintAffectingGlobalStateRefs(),N=M.getVisibilityAffectingGlobalStateRefs();if(k.has(v)&&u.add(M.source),O.has(v))for(const{name:H,value:J}of O.get(v))this._updatePaintProperty(M,H,J);N?.has(v)&&(M.recalculateVisibility(),this._updateLayer(M))}}this.dispatcher.broadcast("UGS",m);for(const v in this.tileManagers)u.has(v)&&(this._reloadSource(v),this._changed=!0)}loadURL(n,u={},m){this.fire(new o.l("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const v=this.map._requestManager.transformRequest(n,"Style");this._loadStyleRequest=new AbortController;const S=this._loadStyleRequest;o.j(v,this._loadStyleRequest).then(M=>{this._loadStyleRequest=null,this._load(M.data,u,m)}).catch(M=>{this._loadStyleRequest=null,M&&!S.signal.aborted&&this.fire(new o.k(M))})}loadJSON(n,u={},m){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,$.frameAsync(this._frameRequest,this.map._ownerWindow).then(()=>{this._frameRequest=null,u.validate=u.validate!==!1,this._load(n,u,m)}).catch(()=>{})}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(wh,{validate:!1})}_load(n,u,m){var v,S;let M=u.transformStyle?u.transformStyle(m,n):n;if(!u.validate||!gc(this,o.C(M))){M=Object.assign({},M),this._loaded=!0,this.stylesheet=M;for(const k in M.sources)this.addSource(k,M.sources[k],{validate:!1});M.sprite?this._loadSprite(M.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(M.glyphs),this._createLayers(),this.light=new ut(this.stylesheet.light),this._setProjectionInternal(((v=this.stylesheet.projection)===null||v===void 0?void 0:v.type)||"mercator"),this.sky=new Fe(this.stylesheet.sky),this.map.setTerrain((S=this.stylesheet.terrain)!==null&&S!==void 0?S:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){var n,u,m;const v=o.bS(this.stylesheet.layers);this.setGlobalState((n=this.stylesheet.state)!==null&&n!==void 0?n:null),this.dispatcher.broadcast("SL",v),this._order=v.map(S=>S.id),this._layers={},this._serializedLayers=null;for(const S of v){const M=o.bT(S,this._globalState);if(M.setEventedParent(this,{layer:{id:S.id}}),this._layers[S.id]=M,o.bU(M)&&this.tileManagers[M.source]){const k=(m=(u=S.paint)===null||u===void 0?void 0:u["raster-fade-duration"])!==null&&m!==void 0?m:M.paint.get("raster-fade-duration");this.tileManagers[M.source].setRasterFadeDuration(k)}}}_loadSprite(n,u=!1,m=void 0){this.imageManager.setLoaded(!1);const v=new AbortController;let S;this._spriteRequest=v,function(M,k,O,N){return o._(this,void 0,void 0,function*(){const H=ke(M),J=O>1?"@2x":"",K={},ne={};for(const{id:he,url:ge}of H){const xe=k.transformRequest(ae(ge,J,".json"),"SpriteJSON");K[he]=o.j(xe,N);const _e=k.transformRequest(ae(ge,J,".png"),"SpriteImage");ne[he]=we.getImage(_e,N)}return yield Promise.all([...Object.values(K),...Object.values(ne)]),function(he,ge){return o._(this,void 0,void 0,function*(){const xe={};for(const _e in he){xe[_e]={};const Me=$.getImageCanvasContext((yield ge[_e]).data),Oe=(yield he[_e]).data;for(const Pe in Oe){const{width:ze,height:$e,x:Re,y:We,sdf:dt,pixelRatio:at,stretchX:lt,stretchY:ct,content:Dt,textFitWidth:zt,textFitHeight:Pt}=Oe[Pe];xe[_e][Pe]={data:null,pixelRatio:at,sdf:dt,stretchX:lt,stretchY:ct,content:Dt,textFitWidth:zt,textFitHeight:Pt,spriteData:{width:ze,height:$e,x:Re,y:We,context:Me}}}}return xe})}(K,ne)})}(n,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(M=>{if(this._spriteRequest=null,M)for(const k in M){this._spritesImagesIds[k]=[];const O=this._spritesImagesIds[k]?this._spritesImagesIds[k].filter(N=>!(N in M)):[];for(const N of O)this.imageManager.removeImage(N),this._changedImages[N]=!0;for(const N in M[k]){const H=k==="default"?N:`${k}:${N}`;this._spritesImagesIds[k].push(H),H in this.imageManager.images?this.imageManager.updateImage(H,M[k][N],!1):this.imageManager.addImage(H,M[k][N]),u&&(this._changedImages[H]=!0)}}}).catch(M=>{this._spriteRequest=null,S=M,v.signal.aborted||this.fire(new o.k(S))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),m&&m(S)})}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(n){const u=this.tileManagers[n.source];if(!u)return;const m=n.sourceLayer;if(!m)return;const v=u.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(m)===-1)&&this.fire(new o.k(new Error(`Source layer "${m}" does not exist on source "${v.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.tileManagers)if(!this.tileManagers[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n,u=!1){const m=this._serializedAllLayers();if(!n||n.length===0)return Object.values(u?o.bV(m):m);const v=[];for(const S of n)if(m[S]){const M=u?o.bV(m[S]):m[S];v.push(M)}return v}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const u=Object.keys(this._layers);for(const m of u){const v=this._layers[m];v.type!=="custom"&&(n[m]=v.serialize())}return n}hasTransitions(){var n,u,m;if(!((n=this.light)===null||n===void 0)&&n.hasTransition()||!((u=this.sky)===null||u===void 0)&&u.hasTransition()||!((m=this.projection)===null||m===void 0)&&m.hasTransition())return!0;for(const v in this.tileManagers)if(this.tileManagers[v].hasTransition())return!0;for(const v in this._layers)if(this._layers[v].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const u=this._changed;if(u){const v=Object.keys(this._updatedLayers),S=Object.keys(this._removedLayers);(v.length||S.length)&&this._updateWorkerLayers(v,S);for(const M in this._updatedSources){const k=this._updatedSources[M];if(k==="reload")this._reloadSource(M);else{if(k!=="clear")throw new Error(`Invalid action ${k}`);this._clearSource(M)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const M in this._updatedPaintProps)this._layers[M].updateTransitions(n);this.light.updateTransitions(n),this.sky.updateTransitions(n),this._resetUpdates()}const m={};for(const v in this.tileManagers){const S=this.tileManagers[v];m[v]=S.used,S.used=!1}for(const v of this._order){const S=this._layers[v];S.recalculate(n,this._availableImages),!S.isHidden(n.zoom)&&S.source&&(this.tileManagers[S.source].used=!0)}for(const v in m){const S=this.tileManagers[v];!!m[v]!=!!S.used&&S.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(n),this.sky.recalculate(n),this.projection.recalculate(n),this.z=n.zoom,u&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const u in this.tileManagers)this.tileManagers[u].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.tileManagers)this.tileManagers[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(n,!1),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,u={}){var m;this._checkLoaded();const v=this.serialize();if(n=u.transformStyle?u.transformStyle(v,n):n,((m=u.validate)===null||m===void 0||m)&&gc(this,o.C(n)))return!1;(n=o.bV(n)).layers=o.bS(n.layers);const S=o.bW(v,n),M=this._getOperationsToPerform(S);if(M.unimplemented.length>0)throw new Error(`Unimplemented: ${M.unimplemented.join(", ")}.`);if(M.operations.length===0)return!1;for(const k of M.operations)k();return this.stylesheet=n,this._serializedLayers=null,this.fire(new o.l("style.load",{style:this})),!0}_getOperationsToPerform(n){const u=[],m=[];for(const v of n)switch(v.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":u.push(()=>this.addLayer.apply(this,v.args));break;case"removeLayer":u.push(()=>this.removeLayer.apply(this,v.args));break;case"setPaintProperty":u.push(()=>this.setPaintProperty.apply(this,v.args));break;case"setLayoutProperty":u.push(()=>this.setLayoutProperty.apply(this,v.args));break;case"setFilter":u.push(()=>this.setFilter.apply(this,v.args));break;case"addSource":u.push(()=>this.addSource.apply(this,v.args));break;case"removeSource":u.push(()=>this.removeSource.apply(this,v.args));break;case"setLayerZoomRange":u.push(()=>this.setLayerZoomRange.apply(this,v.args));break;case"setLight":u.push(()=>this.setLight.apply(this,v.args));break;case"setGeoJSONSourceData":u.push(()=>this.setGeoJSONSourceData.apply(this,v.args));break;case"setGlyphs":u.push(()=>this.setGlyphs.apply(this,v.args));break;case"setSprite":u.push(()=>this.setSprite.apply(this,v.args));break;case"setTerrain":u.push(()=>this.map.setTerrain.apply(this,v.args));break;case"setSky":u.push(()=>this.setSky.apply(this,v.args));break;case"setProjection":this.setProjection.apply(this,v.args);break;case"setGlobalState":u.push(()=>this.setGlobalState.apply(this,v.args));break;case"setTransition":u.push(()=>{});break;default:m.push(v.command)}return{operations:u,unimplemented:m}}addImage(n,u){if(this.getImage(n))return this.fire(new o.k(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,u),this._afterImageUpdated(n)}updateImage(n,u){this.imageManager.updateImage(n,u)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new o.k(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,u,m={}){if(this._checkLoaded(),this.tileManagers[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(o.C.source,`sources.${n}`,u,null,m))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const v=this.tileManagers[n]=new Ti(n,u,this.dispatcher);v.style=this,v.setEventedParent(this,()=>({isSourceLoaded:v.loaded(),source:v.serialize(),sourceId:n})),v.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.tileManagers[n]===void 0)throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===n)return this.fire(new o.k(new Error(`Source "${n}" cannot be removed while layer "${m}" is using it.`)));const u=this.tileManagers[n];delete this.tileManagers[n],delete this._updatedSources[n],u.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,u){if(this._checkLoaded(),this.tileManagers[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const m=this.tileManagers[n].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(u),this._changed=!0}getSource(n){return this.tileManagers[n]&&this.tileManagers[n].getSource()}addLayer(n,u,m={}){this._checkLoaded();const v=n.id;if(this.getLayer(v))return void this.fire(new o.k(new Error(`Layer "${v}" already exists on this map.`)));let S;if(n.type==="custom"){if(gc(this,o.bX(n)))return;S=o.bT(n,this._globalState)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(v,n.source),n=o.bV(n),n=o.e(n,{source:v})),this._validate(o.C.layer,`layers.${v}`,n,{arrayIndex:-1},m))return;S=o.bT(n,this._globalState),this._validateLayer(S),S.setEventedParent(this,{layer:{id:v}})}const M=u?this._order.indexOf(u):this._order.length;if(u&&M===-1)this.fire(new o.k(new Error(`Cannot add layer "${v}" before non-existing layer "${u}".`)));else{if(this._order.splice(M,0,v),this._layerOrderChanged=!0,this._layers[v]=S,this._removedLayers[v]&&S.source&&S.type!=="custom"){const k=this._removedLayers[v];delete this._removedLayers[v],k.type!==S.type?this._updatedSources[S.source]="clear":(this._updatedSources[S.source]="reload",this.tileManagers[S.source].pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map)}}moveLayer(n,u){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new o.k(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===u)return;const m=this._order.indexOf(n);this._order.splice(m,1);const v=u?this._order.indexOf(u):this._order.length;u&&v===-1?this.fire(new o.k(new Error(`Cannot move layer "${n}" before non-existing layer "${u}".`))):(this._order.splice(v,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const u=this._layers[n];if(!u)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${n}".`)));u.setEventedParent(null);const m=this._order.indexOf(n);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=u,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],u.onRemove&&u.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,u,m){this._checkLoaded();const v=this.getLayer(n);v?v.minzoom===u&&v.maxzoom===m||(u!=null&&(v.minzoom=u),m!=null&&(v.maxzoom=m),this._updateLayer(v)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,u,m={}){this._checkLoaded();const v=this.getLayer(n);if(v){if(!o.bR(v.filter,u))return u==null?(v.setFilter(void 0),void this._updateLayer(v)):void(this._validate(o.C.filter,`layers.${v.id}.filter`,u,null,m)||(v.setFilter(o.bV(u)),this._updateLayer(v)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return o.bV(this.getLayer(n).filter)}setLayoutProperty(n,u,m,v={}){this._checkLoaded();const S=this.getLayer(n);S?o.bR(S.getLayoutProperty(u),m)||(S.setLayoutProperty(u,m,v),this._updateLayer(S)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,u){const m=this.getLayer(n);if(m)return m.getLayoutProperty(u);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,u,m,v={}){this._checkLoaded();const S=this.getLayer(n);S?o.bR(S.getPaintProperty(u),m)||this._updatePaintProperty(S,u,m,v):this.fire(new o.k(new Error(`Cannot style non-existing layer "${n}".`)))}_updatePaintProperty(n,u,m,v={}){n.setPaintProperty(u,m,v)&&this._updateLayer(n),o.bU(n)&&u==="raster-fade-duration"&&this.tileManagers[n.source].setRasterFadeDuration(m),this._changed=!0,this._updatedPaintProps[n.id]=!0,this._serializedLayers=null}getPaintProperty(n,u){return this.getLayer(n).getPaintProperty(u)}setFeatureState(n,u){this._checkLoaded();const m=n.source,v=n.sourceLayer,S=this.tileManagers[m];if(S===void 0)return void this.fire(new o.k(new Error(`The source '${m}' does not exist in the map's style.`)));const M=S.getSource().type;M==="geojson"&&v?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):M!=="vector"||v?(n.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),S.setFeatureState(v,n.id,u)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,u){this._checkLoaded();const m=n.source,v=this.tileManagers[m];if(v===void 0)return void this.fire(new o.k(new Error(`The source '${m}' does not exist in the map's style.`)));const S=v.getSource().type,M=S==="vector"?n.sourceLayer:void 0;S!=="vector"||M?u&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(M,n.id,u):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const u=n.source,m=n.sourceLayer,v=this.tileManagers[u];if(v!==void 0)return v.getSource().type!=="vector"||m?(n.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),v.getFeatureState(m,n.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=o.bY(this.tileManagers,S=>S.serialize()),u=this._serializeByIds(this._order,!0),m=this.map.getTerrain()||void 0,v=this.stylesheet;return o.bZ({version:v.version,name:v.name,metadata:v.metadata,light:v.light,sky:v.sky,center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,sprite:v.sprite,glyphs:v.glyphs,transition:v.transition,projection:v.projection,sources:n,layers:u,terrain:m},S=>S!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.tileManagers[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.tileManagers[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const u=M=>this._layers[M].type==="fill-extrusion",m={},v=[];for(let M=this._order.length-1;M>=0;M--){const k=this._order[M];if(u(k)){m[k]=M;for(const O of n){const N=O[k];if(N)for(const H of N)v.push(H)}}}v.sort((M,k)=>k.intersectionZ-M.intersectionZ);const S=[];for(let M=this._order.length-1;M>=0;M--){const k=this._order[M];if(u(k))for(let O=v.length-1;O>=0;O--){const N=v[O].feature;if(m[N.layer.id]<M)break;S.push(N),v.pop()}else for(const O of n){const N=O[k];if(N)for(const H of N)S.push(H.feature)}}return S}queryRenderedFeatures(n,u,m){u&&u.filter&&this._validate(o.C.filter,"queryRenderedFeatures.filter",u.filter,null,u);const v={};if(u&&u.layers){if(!(Array.isArray(u.layers)||u.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const N of u.layers){const H=this._layers[N];if(!H)return this.fire(new o.k(new Error(`The layer '${N}' does not exist in the map's style and cannot be queried for features.`))),[];v[H.source]=!0}}const S=[];u.availableImages=this._availableImages;const M=this._serializedAllLayers(),k=u.layers instanceof Set?u.layers:Array.isArray(u.layers)?new Set(u.layers):null,O=Object.assign(Object.assign({},u),{layers:k,globalState:this._globalState});for(const N in this.tileManagers)u.layers&&!v[N]||S.push(Gr(this.tileManagers[N],this._layers,M,n,O,m,this.map.terrain?(H,J,K)=>this.map.terrain.getElevation(H,J,K):void 0));return this.placement&&S.push(function(N,H,J,K,ne,he,ge){const xe={},_e=he.queryRenderedSymbols(K),Me=[];for(const Oe of Object.keys(_e).map(Number))Me.push(ge[Oe]);Me.sort(Tr);for(const Oe of Me){const Pe=Oe.featureIndex.lookupSymbolFeatures(_e[Oe.bucketInstanceId],H,Oe.bucketIndex,Oe.sourceLayerIndex,{filterSpec:ne.filter,globalState:ne.globalState},ne.layers,ne.availableImages,N);for(const ze in Pe){const $e=xe[ze]=xe[ze]||[],Re=Pe[ze];Re.sort((We,dt)=>{const at=Oe.featureSortOrder;if(at){const lt=at.indexOf(We.featureIndex);return at.indexOf(dt.featureIndex)-lt}return dt.featureIndex-We.featureIndex});for(const We of Re)$e.push(We)}}return function(Oe,Pe,ze){for(const $e in Oe)for(const Re of Oe[$e])or(Re,ze[Pe[$e].source]);return Oe}(xe,N,J)}(this._layers,M,this.tileManagers,n,O,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(S)}querySourceFeatures(n,u){u?.filter&&this._validate(o.C.filter,"querySourceFeatures.filter",u.filter,null,u);const m=this.tileManagers[n];return m?function(v,S){const M=v.getRenderableIds().map(N=>v.getTileByID(N)),k=[],O={};for(let N=0;N<M.length;N++){const H=M[N],J=H.tileID.canonical.key;O[J]||(O[J]=!0,H.querySourceFeatures(k,S))}return k}(m,u?Object.assign(Object.assign({},u),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(n,u={}){this._checkLoaded();const m=this.light.getLight();let v=!1;for(const M in n)if(!o.bR(n[M],m[M])){v=!0;break}if(!v)return;const S={now:j(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,u),this.light.updateTransitions(S)}getProjection(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.projection}setProjection(n){if(this._checkLoaded(),this.stylesheet.projection=n,this.projection){if(this.projection.name===n.type)return;this.projection.destroy(),delete this.projection}this._setProjectionInternal(n.type)}getSky(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.sky}setSky(n,u={}){this._checkLoaded();const m=this.getSky();let v=!1;if(!n&&!m)return;if(n&&!m)v=!0;else if(!n&&m)v=!0;else for(const M in n)if(!o.bR(n[M],m[M])){v=!0;break}if(!v)return;const S={now:j(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=n,this.sky.setSky(n,u),this.sky.updateTransitions(S)}_setProjectionInternal(n){const u=function(m,v){const S={constrainOverride:v};if(Array.isArray(m)){const M=new pu({type:m});return{projection:M,transform:new gu(S),cameraHelper:new gm(M)}}switch(m){case"mercator":return{projection:new Ki,transform:new dc(S),cameraHelper:new Sl};case"globe":{const M=new pu({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:M,transform:new gu(S),cameraHelper:new gm(M)}}case"vertical-perspective":return{projection:new xh,transform:new Tl(S),cameraHelper:new Oi};default:return o.w(`Unknown projection name: ${m}. Falling back to mercator projection.`),{projection:new Ki,transform:new dc(S),cameraHelper:new Sl}}}(n,this.map.transformConstrain);this.projection=u.projection,this.map.migrateProjection(u.transform,u.cameraHelper);for(const m in this.tileManagers)this.tileManagers[m].reload()}_validate(n,u,m,v,S={}){return(!S||S.validate!==!1)&&gc(this,n.call(o.C,o.e({key:u,style:this.serialize(),value:m,styleSpec:o.u},v)))}_remove(n=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ie().off(Zr,this._rtlPluginLoaded);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.tileManagers){const m=this.tileManagers[u];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),n&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(n)}_clearSource(n){this.tileManagers[n].clearTiles()}_reloadSource(n){this.tileManagers[n].resume(),this.tileManagers[n].reload()}_updateSources(n){for(const u in this.tileManagers)this.tileManagers[u].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.tileManagers)this._reloadSource(n)}_updatePlacement(n,u,m,v,S=!1){let M=!1,k=!1;const O={};for(const N of this._order){const H=this._layers[N];if(H.type!=="symbol")continue;if(!O[H.source]){const K=this.tileManagers[H.source];O[H.source]=K.getRenderableIds(!0).map(ne=>K.getTileByID(ne)).sort((ne,he)=>he.tileID.overscaledZ-ne.tileID.overscaledZ||(ne.tileID.isLessThan(he.tileID)?-1:1))}const J=this.crossTileSymbolIndex.addLayer(H,O[H.source],n.center.lng);M=M||J}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((S=S||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(j(),n.zoom))&&(this.pauseablePlacement=new xl(n,this.map.terrain,this._order,S,u,m,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(j()),k=!0),M&&this.pauseablePlacement.placement.setStale()),k||M)for(const N of this._order){const H=this._layers[N];H.type==="symbol"&&this.placement.updateLayerOpacities(H,O[H.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(j())}_releaseSymbolFadeTiles(){for(const n in this.tileManagers)this.tileManagers[n].releaseSymbolFadeTiles()}getImages(n,u){return o._(this,void 0,void 0,function*(){const m=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();const v=this.tileManagers[u.source];return v&&v.setDependencies(u.tileID.key,u.type,u.icons),m})}getGlyphs(n,u){return o._(this,void 0,void 0,function*(){const m=yield this.glyphManager.getGlyphs(u.stacks),v=this.tileManagers[u.source];return v&&v.setDependencies(u.tileID.key,u.type,[""]),m})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,u={}){this._checkLoaded(),n&&this._validate(o.C.glyphs,"glyphs",n,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}getDashes(n,u){return o._(this,void 0,void 0,function*(){const m={};for(const[v,S]of Object.entries(u.dashes))m[v]=this.lineAtlas.getDash(S.dasharray,S.round);return m})}addSprite(n,u,m={},v){this._checkLoaded();const S=[{id:n,url:u}],M=[...ke(this.stylesheet.sprite),...S];this._validate(o.C.sprite,"sprite",M,null,m)||(this.stylesheet.sprite=M,this._loadSprite(S,!0,v))}removeSprite(n){this._checkLoaded();const u=ke(this.stylesheet.sprite);if(u.find(m=>m.id===n)){if(this._spritesImagesIds[n])for(const m of this._spritesImagesIds[n])this.imageManager.removeImage(m),this._changedImages[m]=!0;u.splice(u.findIndex(m=>m.id===n),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return ke(this.stylesheet.sprite)}setSprite(n,u={},m){this._checkLoaded(),n&&this._validate(o.C.sprite,"sprite",n,null,u)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,m):(this._unloadSprite(),m&&m(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const n in this.tileManagers){const u=this.tileManagers[n];u.setEventedParent(null),u.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const n in this._layers){const u=this._layers[n];u.setEventedParent(null),u.onRemove&&u.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var sy=o.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class md{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,u,m,v,S,M,k,O,N){this.context=n;let H=this.boundPaintVertexBuffers.length!==v.length;for(let J=0;!H&&J<v.length;J++)this.boundPaintVertexBuffers[J]!==v[J]&&(H=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==m||H||this.boundIndexBuffer!==S||this.boundVertexOffset!==M||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==O||this.boundDynamicVertexBuffer3!==N?this.freshBind(u,m,v,S,M,k,O,N):(n.bindVertexArray.set(this.vao),k&&k.bind(),S&&S.dynamicDraw&&S.bind(),O&&O.bind(),N&&N.bind())}freshBind(n,u,m,v,S,M,k,O){const N=n.numAttributes,H=this.context,J=H.gl;this.vao&&this.destroy(),this.vao=H.createVertexArray(),H.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=v,this.boundVertexOffset=S,this.boundDynamicVertexBuffer=M,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=O,u.enableAttributes(J,n);for(const K of m)K.enableAttributes(J,n);M&&M.enableAttributes(J,n),k&&k.enableAttributes(J,n),O&&O.enableAttributes(J,n),u.bind(),u.setVertexAttribPointers(J,n,S);for(const K of m)K.bind(),K.setVertexAttribPointers(J,n,S);M&&(M.bind(),M.setVertexAttribPointers(J,n,S)),v&&v.bind(),k&&(k.bind(),k.setVertexAttribPointers(J,n,S)),O&&(O.bind(),O.setVertexAttribPointers(J,n,S)),H.currentNumAttributes=N}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const ay=(w,n,u,m,v)=>({u_texture:0,u_ele_delta:w,u_fog_matrix:n,u_fog_color:u?u.properties.get("fog-color"):o.bp.white,u_fog_ground_blend:u?u.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:v?0:u?u.calculateFogBlendOpacity(m):0,u_horizon_color:u?u.properties.get("horizon-color"):o.bp.white,u_horizon_fog_blend:u?u.properties.get("horizon-fog-blend"):1,u_is_globe_mode:v?1:0}),yu={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function gd(w){const n=[];for(let u=0;u<w.length;u++){if(w[u]===null)continue;const m=w[u].split(" ");n.push(m.pop())}return n}class yd{constructor(n,u,m,v,S,M,k,O,N=[]){const H=n.gl;this.program=H.createProgram();const J=gd(u.staticAttributes),K=m?m.getBinderAttributes():[],ne=J.concat(K),he=_n.prelude.staticUniforms?gd(_n.prelude.staticUniforms):[],ge=k.staticUniforms?gd(k.staticUniforms):[],xe=u.staticUniforms?gd(u.staticUniforms):[],_e=m?m.getBinderUniforms():[],Me=he.concat(ge).concat(xe).concat(_e),Oe=[];for(const at of Me)Oe.indexOf(at)<0&&Oe.push(at);const Pe=m?m.defines():[];si(H)&&Pe.unshift("#version 300 es"),S&&Pe.push("#define OVERDRAW_INSPECTOR;"),M&&Pe.push("#define TERRAIN3D;"),O&&Pe.push(O),N&&Pe.push(...N);let ze=Pe.concat(_n.prelude.fragmentSource,k.fragmentSource,u.fragmentSource).join(`
`),$e=Pe.concat(_n.prelude.vertexSource,k.vertexSource,u.vertexSource).join(`
`);si(H)||(ze=function(at){return at.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(ze),$e=function(at){return at.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}($e));const Re=H.createShader(H.FRAGMENT_SHADER);if(H.isContextLost())return void(this.failedToCreate=!0);if(H.shaderSource(Re,ze),H.compileShader(Re),!H.getShaderParameter(Re,H.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${H.getShaderInfoLog(Re)}`);H.attachShader(this.program,Re);const We=H.createShader(H.VERTEX_SHADER);if(H.isContextLost())return void(this.failedToCreate=!0);if(H.shaderSource(We,$e),H.compileShader(We),!H.getShaderParameter(We,H.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${H.getShaderInfoLog(We)}`);H.attachShader(this.program,We),this.attributes={};const dt={};this.numAttributes=ne.length;for(let at=0;at<this.numAttributes;at++)ne[at]&&(H.bindAttribLocation(this.program,at,ne[at]),this.attributes[ne[at]]=at);if(H.linkProgram(this.program),!H.getProgramParameter(this.program,H.LINK_STATUS))throw new Error(`Program failed to link: ${H.getProgramInfoLog(this.program)}`);H.deleteShader(We),H.deleteShader(Re);for(let at=0;at<Oe.length;at++){const lt=Oe[at];if(lt&&!dt[lt]){const ct=H.getUniformLocation(this.program,lt);ct&&(dt[lt]=ct)}}this.fixedUniforms=v(n,dt),this.terrainUniforms=((at,lt)=>({u_depth:new o.b_(at,lt.u_depth),u_terrain:new o.b_(at,lt.u_terrain),u_terrain_dim:new o.bq(at,lt.u_terrain_dim),u_terrain_matrix:new o.c0(at,lt.u_terrain_matrix),u_terrain_unpack:new o.c1(at,lt.u_terrain_unpack),u_terrain_exaggeration:new o.bq(at,lt.u_terrain_exaggeration)}))(n,dt),this.projectionUniforms=((at,lt)=>({u_projection_matrix:new o.c0(at,lt.u_projection_matrix),u_projection_tile_mercator_coords:new o.c1(at,lt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.c1(at,lt.u_projection_clipping_plane),u_projection_transition:new o.bq(at,lt.u_projection_transition),u_projection_fallback_matrix:new o.c0(at,lt.u_projection_fallback_matrix)}))(n,dt),this.binderUniforms=m?m.getUniforms(n,dt):[]}draw(n,u,m,v,S,M,k,O,N,H,J,K,ne,he,ge,xe,_e,Me,Oe){const Pe=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(m),n.setStencilMode(v),n.setColorMode(S),n.setCullFace(M),O){n.activeTexture.set(Pe.TEXTURE2),Pe.bindTexture(Pe.TEXTURE_2D,O.depthTexture),n.activeTexture.set(Pe.TEXTURE3),Pe.bindTexture(Pe.TEXTURE_2D,O.texture);for(const $e in this.terrainUniforms)this.terrainUniforms[$e].set(O[$e])}if(N)for(const $e in N)this.projectionUniforms[yu[$e]].set(N[$e]);if(k)for(const $e in this.fixedUniforms)this.fixedUniforms[$e].set(k[$e]);xe&&xe.setUniforms(n,this.binderUniforms,he,{zoom:ge});let ze=0;switch(u){case Pe.LINES:ze=2;break;case Pe.TRIANGLES:ze=3;break;case Pe.LINE_STRIP:ze=1}for(const $e of ne.get()){const Re=$e.vaos||($e.vaos={});(Re[H]||(Re[H]=new md)).bind(n,this,J,xe?xe.getPaintVertexBuffers():[],K,$e.vertexOffset,_e,Me,Oe),Pe.drawElements(u,$e.primitiveLength*ze,Pe.UNSIGNED_SHORT,$e.primitiveOffset*ze*2)}}}function vu(w,n,u){const m=1/o.aN(u,1,n.transform.tileZoom),v=Math.pow(2,u.tileID.overscaledZ),S=u.tileSize*Math.pow(2,n.transform.tileZoom)/v,M=S*(u.tileID.canonical.x+u.tileID.wrap*v),k=S*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[m,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[M>>16,k>>16],u_pixel_coord_lower:[65535&M,65535&k]}}const qf=(w,n,u,m)=>{const v=w.style.light,S=v.properties.get("position"),M=[S.x,S.y,S.z],k=o.c4();v.properties.get("anchor")==="viewport"&&o.c5(k,w.transform.bearingInRadians),o.c6(M,M,k);const O=w.transform.transformLightDirection(M),N=v.properties.get("color");return{u_lightpos:M,u_lightpos_globe:O,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[N.r,N.g,N.b],u_vertical_gradient:+n,u_opacity:u,u_fill_translate:m}},vd=(w,n,u,m,v,S,M)=>o.e(qf(w,n,u,m),vu(S,w,M),{u_height_factor:-Math.pow(2,v.overscaledZ)/M.tileSize/8}),_d=(w,n,u,m)=>o.e(vu(n,w,u),{u_fill_translate:m}),Hf=(w,n)=>({u_world:w,u_fill_translate:n}),Wf=(w,n,u,m,v)=>o.e(_d(w,n,u,v),{u_world:m}),Zf=(w,n,u,m,v)=>{const S=w.transform;let M,k,O=0;if(u.paint.get("circle-pitch-alignment")==="map"){const N=o.aN(n,1,S.zoom);M=!0,k=[N,N],O=N/(o.a5*Math.pow(2,n.tileID.overscaledZ))*2*Math.PI*v}else M=!1,k=S.pixelsToGLUnits;return{u_camera_to_center_distance:S.cameraToCenterDistance,u_scale_with_map:+(u.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+M,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:k,u_globe_extrude_scale:O,u_translate:m}},gs=w=>({u_pixel_extrude_scale:[1/w.width,1/w.height]}),ym=w=>({u_viewport_size:[w.width,w.height]}),Xf=(w,n=1)=>({u_color:w,u_overlay:0,u_overlay_scale:n}),_u=(w,n,u,m)=>{const v=o.aN(w,1,n)/(o.a5*Math.pow(2,w.tileID.overscaledZ))*2*Math.PI*m;return{u_extrude_scale:o.aN(w,1,n),u_intensity:u,u_globe_extrude_scale:v}},Kf=(w,n,u,m)=>{const v=o.N();o.c7(v,0,w.width,w.height,0,0,1);const S=w.context.gl;return{u_matrix:v,u_world:[S.drawingBufferWidth,S.drawingBufferHeight],u_image:u,u_color_ramp:m,u_opacity:n.paint.get("heatmap-opacity")}},Sh=(w,n,u)=>{const m=u.paint.get("hillshade-accent-color");let v;switch(u.paint.get("hillshade-method")){case"basic":v=4;break;case"combined":v=1;break;case"igor":v=2;break;case"multidirectional":v=3;break;default:v=0}const S=u.getIlluminationProperties();for(let M=0;M<S.directionRadians.length;M++)u.paint.get("hillshade-illumination-anchor")==="viewport"&&(S.directionRadians[M]+=w.transform.bearingInRadians);return{u_image:0,u_latrange:Th(0,n.tileID),u_exaggeration:u.paint.get("hillshade-exaggeration"),u_altitudes:S.altitudeRadians,u_azimuths:S.directionRadians,u_accent:m,u_method:v,u_highlights:S.highlightColor,u_shadows:S.shadowColor}},Ch=(w,n)=>{const u=n.stride,m=o.N();return o.c7(m,0,o.a5,-o.a5,0,0,1),o.O(m,m,[0,-o.a5,0]),{u_matrix:m,u_image:1,u_dimension:[u,u],u_zoom:w.overscaledZ,u_unpack:n.getUnpackVector()}};function Th(w,n){const u=Math.pow(2,n.canonical.z),m=n.canonical.y;return[new o.a9(0,m/u).toLngLat().lat,new o.a9(0,(m+1)/u).toLngLat().lat]}const vm=(w,n,u=0)=>({u_image:0,u_unpack:n.getUnpackVector(),u_dimension:[n.stride,n.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:u,u_opacity:w.paint.get("color-relief-opacity")}),Ml=(w,n,u,m)=>{const v=w.transform;return{u_translation:Mh(w,n,u),u_ratio:m/o.aN(n,1,v.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},_m=(w,n,u,m,v)=>o.e(Ml(w,n,u,m),{u_image:0,u_image_height:v}),xd=(w,n,u,m,v)=>{const S=w.transform,M=ys(n,S);return{u_translation:Mh(w,n,u),u_texsize:n.imageAtlasTexture.size,u_ratio:m/o.aN(n,1,S.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[M,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},bd=(w,n,u,m,v)=>{const S=ys(n,w.transform);return o.e(Ml(w,n,u,m),{u_tileratio:S,u_crossfade_from:v.fromScale,u_crossfade_to:v.toScale,u_image:0,u_mix:v.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})},xu=(w,n,u,m,v,S)=>{const M=ys(n,w.transform);return o.e(Ml(w,n,u,m),{u_image:0,u_image_height:S,u_tileratio:M,u_crossfade_from:v.fromScale,u_crossfade_to:v.toScale,u_image_dash:1,u_mix:v.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})};function ys(w,n){return 1/o.aN(w,1,n.tileZoom)}function Mh(w,n,u){return o.aO(w.transform,n,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const wd=(w,n,u,m,v)=>{return{u_tl_parent:w,u_scale_parent:n,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(M=m.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(S=m.paint.get("raster-contrast"),S>0?1/(1-S):1+S),u_spin_weights:Yf(m.paint.get("raster-hue-rotate")),u_coords_top:[v[0].x,v[0].y,v[1].x,v[1].y],u_coords_bottom:[v[3].x,v[3].y,v[2].x,v[2].y]};var S,M};function Yf(w){w*=Math.PI/180;const n=Math.sin(w),u=Math.cos(w);return[(2*u+1)/3,(-Math.sqrt(3)*n-u+1)/3,(Math.sqrt(3)*n-u+1)/3]}const Jf=(w,n,u,m,v,S,M,k,O,N,H,J,K)=>{const ne=M.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:ne.cameraToCenterDistance,u_pitch:ne.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:ne.width/ne.height,u_fade_change:M.options.fadeDuration?M.symbolFadeChange:1,u_label_plane_matrix:k,u_coord_matrix:O,u_is_text:+H,u_pitch_with_map:+m,u_is_along_line:v,u_is_variable_anchor:S,u_texsize:J,u_texture:0,u_translation:N,u_pitched_scale:K}},Sd=(w,n,u,m,v,S,M,k,O,N,H,J,K,ne)=>{const he=M.transform;return o.e(Jf(w,n,u,m,v,S,M,k,O,N,H,J,ne),{u_gamma_scale:m?Math.cos(he.pitch*Math.PI/180)*he.cameraToCenterDistance:1,u_device_pixel_ratio:M.pixelRatio,u_is_halo:1})},vc=(w,n,u,m,v,S,M,k,O,N,H,J,K)=>o.e(Sd(w,n,u,m,v,S,M,k,O,N,!0,H,0,K),{u_texsize_icon:J,u_texture_icon:1}),Qf=(w,n)=>({u_opacity:w,u_color:n}),$s=(w,n,u,m,v)=>o.e(function(S,M,k,O){const N=k.imageManager.getPattern(S.from.toString()),H=k.imageManager.getPattern(S.to.toString()),{width:J,height:K}=k.imageManager.getPixelSize(),ne=Math.pow(2,O.tileID.overscaledZ),he=O.tileSize*Math.pow(2,k.transform.tileZoom)/ne,ge=he*(O.tileID.canonical.x+O.tileID.wrap*ne),xe=he*O.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:N.tl,u_pattern_br_a:N.br,u_pattern_tl_b:H.tl,u_pattern_br_b:H.br,u_texsize:[J,K],u_mix:M.t,u_pattern_size_a:N.displaySize,u_pattern_size_b:H.displaySize,u_scale_a:M.fromScale,u_scale_b:M.toScale,u_tile_units_to_pixels:1/o.aN(O,1,k.transform.tileZoom),u_pixel_coord_upper:[ge>>16,xe>>16],u_pixel_coord_lower:[65535&ge,65535&xe]}}(u,v,n,m),{u_opacity:w}),bu=(w,n)=>{},xm={fillExtrusion:(w,n)=>({u_lightpos:new o.c2(w,n.u_lightpos),u_lightpos_globe:new o.c2(w,n.u_lightpos_globe),u_lightintensity:new o.bq(w,n.u_lightintensity),u_lightcolor:new o.c2(w,n.u_lightcolor),u_vertical_gradient:new o.bq(w,n.u_vertical_gradient),u_opacity:new o.bq(w,n.u_opacity),u_fill_translate:new o.c3(w,n.u_fill_translate)}),fillExtrusionPattern:(w,n)=>({u_lightpos:new o.c2(w,n.u_lightpos),u_lightpos_globe:new o.c2(w,n.u_lightpos_globe),u_lightintensity:new o.bq(w,n.u_lightintensity),u_lightcolor:new o.c2(w,n.u_lightcolor),u_vertical_gradient:new o.bq(w,n.u_vertical_gradient),u_height_factor:new o.bq(w,n.u_height_factor),u_opacity:new o.bq(w,n.u_opacity),u_fill_translate:new o.c3(w,n.u_fill_translate),u_image:new o.b_(w,n.u_image),u_texsize:new o.c3(w,n.u_texsize),u_pixel_coord_upper:new o.c3(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new o.c3(w,n.u_pixel_coord_lower),u_scale:new o.c2(w,n.u_scale),u_fade:new o.bq(w,n.u_fade)}),fill:(w,n)=>({u_fill_translate:new o.c3(w,n.u_fill_translate)}),fillPattern:(w,n)=>({u_image:new o.b_(w,n.u_image),u_texsize:new o.c3(w,n.u_texsize),u_pixel_coord_upper:new o.c3(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new o.c3(w,n.u_pixel_coord_lower),u_scale:new o.c2(w,n.u_scale),u_fade:new o.bq(w,n.u_fade),u_fill_translate:new o.c3(w,n.u_fill_translate)}),fillOutline:(w,n)=>({u_world:new o.c3(w,n.u_world),u_fill_translate:new o.c3(w,n.u_fill_translate)}),fillOutlinePattern:(w,n)=>({u_world:new o.c3(w,n.u_world),u_image:new o.b_(w,n.u_image),u_texsize:new o.c3(w,n.u_texsize),u_pixel_coord_upper:new o.c3(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new o.c3(w,n.u_pixel_coord_lower),u_scale:new o.c2(w,n.u_scale),u_fade:new o.bq(w,n.u_fade),u_fill_translate:new o.c3(w,n.u_fill_translate)}),circle:(w,n)=>({u_camera_to_center_distance:new o.bq(w,n.u_camera_to_center_distance),u_scale_with_map:new o.b_(w,n.u_scale_with_map),u_pitch_with_map:new o.b_(w,n.u_pitch_with_map),u_extrude_scale:new o.c3(w,n.u_extrude_scale),u_device_pixel_ratio:new o.bq(w,n.u_device_pixel_ratio),u_globe_extrude_scale:new o.bq(w,n.u_globe_extrude_scale),u_translate:new o.c3(w,n.u_translate)}),collisionBox:(w,n)=>({u_pixel_extrude_scale:new o.c3(w,n.u_pixel_extrude_scale)}),collisionCircle:(w,n)=>({u_viewport_size:new o.c3(w,n.u_viewport_size)}),debug:(w,n)=>({u_color:new o.b$(w,n.u_color),u_overlay:new o.b_(w,n.u_overlay),u_overlay_scale:new o.bq(w,n.u_overlay_scale)}),depth:bu,clippingMask:bu,heatmap:(w,n)=>({u_extrude_scale:new o.bq(w,n.u_extrude_scale),u_intensity:new o.bq(w,n.u_intensity),u_globe_extrude_scale:new o.bq(w,n.u_globe_extrude_scale)}),heatmapTexture:(w,n)=>({u_matrix:new o.c0(w,n.u_matrix),u_world:new o.c3(w,n.u_world),u_image:new o.b_(w,n.u_image),u_color_ramp:new o.b_(w,n.u_color_ramp),u_opacity:new o.bq(w,n.u_opacity)}),hillshade:(w,n)=>({u_image:new o.b_(w,n.u_image),u_latrange:new o.c3(w,n.u_latrange),u_exaggeration:new o.bq(w,n.u_exaggeration),u_altitudes:new o.c9(w,n.u_altitudes),u_azimuths:new o.c9(w,n.u_azimuths),u_accent:new o.b$(w,n.u_accent),u_method:new o.b_(w,n.u_method),u_shadows:new o.c8(w,n.u_shadows),u_highlights:new o.c8(w,n.u_highlights)}),hillshadePrepare:(w,n)=>({u_matrix:new o.c0(w,n.u_matrix),u_image:new o.b_(w,n.u_image),u_dimension:new o.c3(w,n.u_dimension),u_zoom:new o.bq(w,n.u_zoom),u_unpack:new o.c1(w,n.u_unpack)}),colorRelief:(w,n)=>({u_image:new o.b_(w,n.u_image),u_unpack:new o.c1(w,n.u_unpack),u_dimension:new o.c3(w,n.u_dimension),u_elevation_stops:new o.b_(w,n.u_elevation_stops),u_color_stops:new o.b_(w,n.u_color_stops),u_color_ramp_size:new o.b_(w,n.u_color_ramp_size),u_opacity:new o.bq(w,n.u_opacity)}),line:(w,n)=>({u_translation:new o.c3(w,n.u_translation),u_ratio:new o.bq(w,n.u_ratio),u_device_pixel_ratio:new o.bq(w,n.u_device_pixel_ratio),u_units_to_pixels:new o.c3(w,n.u_units_to_pixels)}),lineGradient:(w,n)=>({u_translation:new o.c3(w,n.u_translation),u_ratio:new o.bq(w,n.u_ratio),u_device_pixel_ratio:new o.bq(w,n.u_device_pixel_ratio),u_units_to_pixels:new o.c3(w,n.u_units_to_pixels),u_image:new o.b_(w,n.u_image),u_image_height:new o.bq(w,n.u_image_height)}),linePattern:(w,n)=>({u_translation:new o.c3(w,n.u_translation),u_texsize:new o.c3(w,n.u_texsize),u_ratio:new o.bq(w,n.u_ratio),u_device_pixel_ratio:new o.bq(w,n.u_device_pixel_ratio),u_image:new o.b_(w,n.u_image),u_units_to_pixels:new o.c3(w,n.u_units_to_pixels),u_scale:new o.c2(w,n.u_scale),u_fade:new o.bq(w,n.u_fade)}),lineSDF:(w,n)=>({u_translation:new o.c3(w,n.u_translation),u_ratio:new o.bq(w,n.u_ratio),u_device_pixel_ratio:new o.bq(w,n.u_device_pixel_ratio),u_units_to_pixels:new o.c3(w,n.u_units_to_pixels),u_image:new o.b_(w,n.u_image),u_mix:new o.bq(w,n.u_mix),u_tileratio:new o.bq(w,n.u_tileratio),u_crossfade_from:new o.bq(w,n.u_crossfade_from),u_crossfade_to:new o.bq(w,n.u_crossfade_to),u_lineatlas_width:new o.bq(w,n.u_lineatlas_width),u_lineatlas_height:new o.bq(w,n.u_lineatlas_height)}),lineGradientSDF:(w,n)=>({u_translation:new o.c3(w,n.u_translation),u_ratio:new o.bq(w,n.u_ratio),u_device_pixel_ratio:new o.bq(w,n.u_device_pixel_ratio),u_units_to_pixels:new o.c3(w,n.u_units_to_pixels),u_image:new o.b_(w,n.u_image),u_image_height:new o.bq(w,n.u_image_height),u_tileratio:new o.bq(w,n.u_tileratio),u_crossfade_from:new o.bq(w,n.u_crossfade_from),u_crossfade_to:new o.bq(w,n.u_crossfade_to),u_image_dash:new o.b_(w,n.u_image_dash),u_mix:new o.bq(w,n.u_mix),u_lineatlas_width:new o.bq(w,n.u_lineatlas_width),u_lineatlas_height:new o.bq(w,n.u_lineatlas_height)}),raster:(w,n)=>({u_tl_parent:new o.c3(w,n.u_tl_parent),u_scale_parent:new o.bq(w,n.u_scale_parent),u_buffer_scale:new o.bq(w,n.u_buffer_scale),u_fade_t:new o.bq(w,n.u_fade_t),u_opacity:new o.bq(w,n.u_opacity),u_image0:new o.b_(w,n.u_image0),u_image1:new o.b_(w,n.u_image1),u_brightness_low:new o.bq(w,n.u_brightness_low),u_brightness_high:new o.bq(w,n.u_brightness_high),u_saturation_factor:new o.bq(w,n.u_saturation_factor),u_contrast_factor:new o.bq(w,n.u_contrast_factor),u_spin_weights:new o.c2(w,n.u_spin_weights),u_coords_top:new o.c1(w,n.u_coords_top),u_coords_bottom:new o.c1(w,n.u_coords_bottom)}),symbolIcon:(w,n)=>({u_is_size_zoom_constant:new o.b_(w,n.u_is_size_zoom_constant),u_is_size_feature_constant:new o.b_(w,n.u_is_size_feature_constant),u_size_t:new o.bq(w,n.u_size_t),u_size:new o.bq(w,n.u_size),u_camera_to_center_distance:new o.bq(w,n.u_camera_to_center_distance),u_pitch:new o.bq(w,n.u_pitch),u_rotate_symbol:new o.b_(w,n.u_rotate_symbol),u_aspect_ratio:new o.bq(w,n.u_aspect_ratio),u_fade_change:new o.bq(w,n.u_fade_change),u_label_plane_matrix:new o.c0(w,n.u_label_plane_matrix),u_coord_matrix:new o.c0(w,n.u_coord_matrix),u_is_text:new o.b_(w,n.u_is_text),u_pitch_with_map:new o.b_(w,n.u_pitch_with_map),u_is_along_line:new o.b_(w,n.u_is_along_line),u_is_variable_anchor:new o.b_(w,n.u_is_variable_anchor),u_texsize:new o.c3(w,n.u_texsize),u_texture:new o.b_(w,n.u_texture),u_translation:new o.c3(w,n.u_translation),u_pitched_scale:new o.bq(w,n.u_pitched_scale)}),symbolSDF:(w,n)=>({u_is_size_zoom_constant:new o.b_(w,n.u_is_size_zoom_constant),u_is_size_feature_constant:new o.b_(w,n.u_is_size_feature_constant),u_size_t:new o.bq(w,n.u_size_t),u_size:new o.bq(w,n.u_size),u_camera_to_center_distance:new o.bq(w,n.u_camera_to_center_distance),u_pitch:new o.bq(w,n.u_pitch),u_rotate_symbol:new o.b_(w,n.u_rotate_symbol),u_aspect_ratio:new o.bq(w,n.u_aspect_ratio),u_fade_change:new o.bq(w,n.u_fade_change),u_label_plane_matrix:new o.c0(w,n.u_label_plane_matrix),u_coord_matrix:new o.c0(w,n.u_coord_matrix),u_is_text:new o.b_(w,n.u_is_text),u_pitch_with_map:new o.b_(w,n.u_pitch_with_map),u_is_along_line:new o.b_(w,n.u_is_along_line),u_is_variable_anchor:new o.b_(w,n.u_is_variable_anchor),u_texsize:new o.c3(w,n.u_texsize),u_texture:new o.b_(w,n.u_texture),u_gamma_scale:new o.bq(w,n.u_gamma_scale),u_device_pixel_ratio:new o.bq(w,n.u_device_pixel_ratio),u_is_halo:new o.b_(w,n.u_is_halo),u_translation:new o.c3(w,n.u_translation),u_pitched_scale:new o.bq(w,n.u_pitched_scale)}),symbolTextAndIcon:(w,n)=>({u_is_size_zoom_constant:new o.b_(w,n.u_is_size_zoom_constant),u_is_size_feature_constant:new o.b_(w,n.u_is_size_feature_constant),u_size_t:new o.bq(w,n.u_size_t),u_size:new o.bq(w,n.u_size),u_camera_to_center_distance:new o.bq(w,n.u_camera_to_center_distance),u_pitch:new o.bq(w,n.u_pitch),u_rotate_symbol:new o.b_(w,n.u_rotate_symbol),u_aspect_ratio:new o.bq(w,n.u_aspect_ratio),u_fade_change:new o.bq(w,n.u_fade_change),u_label_plane_matrix:new o.c0(w,n.u_label_plane_matrix),u_coord_matrix:new o.c0(w,n.u_coord_matrix),u_is_text:new o.b_(w,n.u_is_text),u_pitch_with_map:new o.b_(w,n.u_pitch_with_map),u_is_along_line:new o.b_(w,n.u_is_along_line),u_is_variable_anchor:new o.b_(w,n.u_is_variable_anchor),u_texsize:new o.c3(w,n.u_texsize),u_texsize_icon:new o.c3(w,n.u_texsize_icon),u_texture:new o.b_(w,n.u_texture),u_texture_icon:new o.b_(w,n.u_texture_icon),u_gamma_scale:new o.bq(w,n.u_gamma_scale),u_device_pixel_ratio:new o.bq(w,n.u_device_pixel_ratio),u_is_halo:new o.b_(w,n.u_is_halo),u_translation:new o.c3(w,n.u_translation),u_pitched_scale:new o.bq(w,n.u_pitched_scale)}),background:(w,n)=>({u_opacity:new o.bq(w,n.u_opacity),u_color:new o.b$(w,n.u_color)}),backgroundPattern:(w,n)=>({u_opacity:new o.bq(w,n.u_opacity),u_image:new o.b_(w,n.u_image),u_pattern_tl_a:new o.c3(w,n.u_pattern_tl_a),u_pattern_br_a:new o.c3(w,n.u_pattern_br_a),u_pattern_tl_b:new o.c3(w,n.u_pattern_tl_b),u_pattern_br_b:new o.c3(w,n.u_pattern_br_b),u_texsize:new o.c3(w,n.u_texsize),u_mix:new o.bq(w,n.u_mix),u_pattern_size_a:new o.c3(w,n.u_pattern_size_a),u_pattern_size_b:new o.c3(w,n.u_pattern_size_b),u_scale_a:new o.bq(w,n.u_scale_a),u_scale_b:new o.bq(w,n.u_scale_b),u_pixel_coord_upper:new o.c3(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new o.c3(w,n.u_pixel_coord_lower),u_tile_units_to_pixels:new o.bq(w,n.u_tile_units_to_pixels)}),terrain:(w,n)=>({u_texture:new o.b_(w,n.u_texture),u_ele_delta:new o.bq(w,n.u_ele_delta),u_fog_matrix:new o.c0(w,n.u_fog_matrix),u_fog_color:new o.b$(w,n.u_fog_color),u_fog_ground_blend:new o.bq(w,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.bq(w,n.u_fog_ground_blend_opacity),u_horizon_color:new o.b$(w,n.u_horizon_color),u_horizon_fog_blend:new o.bq(w,n.u_horizon_fog_blend),u_is_globe_mode:new o.bq(w,n.u_is_globe_mode)}),terrainDepth:(w,n)=>({u_ele_delta:new o.bq(w,n.u_ele_delta)}),terrainCoords:(w,n)=>({u_texture:new o.b_(w,n.u_texture),u_terrain_coords_id:new o.bq(w,n.u_terrain_coords_id),u_ele_delta:new o.bq(w,n.u_ele_delta)}),projectionErrorMeasurement:(w,n)=>({u_input:new o.bq(w,n.u_input),u_output_expected:new o.bq(w,n.u_output_expected)}),atmosphere:(w,n)=>({u_sun_pos:new o.c2(w,n.u_sun_pos),u_atmosphere_blend:new o.bq(w,n.u_atmosphere_blend),u_globe_position:new o.c2(w,n.u_globe_position),u_globe_radius:new o.bq(w,n.u_globe_radius),u_inv_proj_matrix:new o.c0(w,n.u_inv_proj_matrix)}),sky:(w,n)=>({u_sky_color:new o.b$(w,n.u_sky_color),u_horizon_color:new o.b$(w,n.u_horizon_color),u_horizon:new o.c3(w,n.u_horizon),u_horizon_normal:new o.c3(w,n.u_horizon_normal),u_sky_horizon_blend:new o.bq(w,n.u_sky_horizon_blend),u_sky_blend:new o.bq(w,n.u_sky_blend)})};class bm{constructor(n,u,m){this.context=n;const v=n.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ep={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class wm{constructor(n,u,m,v){this.length=u.length,this.attributes=m,this.itemSize=u.bytesPerElement,this.dynamicDraw=v,this.context=n;const S=n.gl;this.buffer=S.createBuffer(),n.bindVertexBuffer.set(this.buffer),S.bufferData(S.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,u){for(let m=0;m<this.attributes.length;m++){const v=u.attributes[this.attributes[m].name];v!==void 0&&n.enableVertexAttribArray(v)}}setVertexAttribPointers(n,u,m){for(let v=0;v<this.attributes.length;v++){const S=this.attributes[v],M=u.attributes[S.name];M!==void 0&&n.vertexAttribPointer(M,S.components,n[ep[S.type]],!1,this.itemSize,S.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class un{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Cd extends un{getDefault(){return o.bp.transparent}set(n){const u=this.current;(n.r!==u.r||n.g!==u.g||n.b!==u.b||n.a!==u.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Td extends un{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class ja extends un{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class Ph extends un{getDefault(){return[!0,!0,!0,!0]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||n[3]!==u[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class js extends un{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class _c extends un{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class xc extends un{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const u=this.current;(n.func!==u.func||n.ref!==u.ref||n.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class Ro extends un{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class bc extends un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=n,this.dirty=!1}}class Md extends un{getDefault(){return[0,1]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class Pd extends un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=n,this.dirty=!1}}class aa extends un{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class Eh extends un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.BLEND):u.disable(u.BLEND),this.current=n,this.dirty=!1}}class Ih extends un{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class wu extends un{getDefault(){return o.bp.transparent}set(n){const u=this.current;(n.r!==u.r||n.g!==u.g||n.b!==u.b||n.a!==u.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class kh extends un{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class tp extends un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=n,this.dirty=!1}}class wc extends un{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class ss extends un{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class Ed extends un{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class Ah extends un{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class Kr extends un{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||n[3]!==u[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Id extends un{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class Rh extends un{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Sm extends un{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class Su extends un{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Cm extends un{getDefault(){return null}set(n){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class ei extends un{getDefault(){return null}set(n){var u;if(n===this.current&&!this.dirty)return;const m=this.gl;si(m)?m.bindVertexArray(n):(u=m.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class kd extends un{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class Ad extends un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class Sc extends un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class Cc extends un{constructor(n,u){super(n),this.context=n,this.parent=u}getDefault(){return null}}class Tc extends Cc{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Pl extends Cc{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Cu extends Cc{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}const El="Framebuffer is not complete";class Dh{constructor(n,u,m,v,S){this.context=n,this.width=u,this.height=m;const M=n.gl,k=this.framebuffer=M.createFramebuffer();if(this.colorAttachment=new Tc(n,k),v)this.depthAttachment=S?new Cu(n,k):new Pl(n,k);else if(S)throw new Error("Stencil cannot be set without depth");if(M.checkFramebufferStatus(M.FRAMEBUFFER)!==M.FRAMEBUFFER_COMPLETE)throw new Error(El)}destroy(){const n=this.context.gl,u=this.colorAttachment.get();if(u&&n.deleteTexture(u),this.depthAttachment){const m=this.depthAttachment.get();m&&n.deleteRenderbuffer(m)}n.deleteFramebuffer(this.framebuffer)}}class Rd{constructor(n){var u,m;if(this.gl=n,this.clearColor=new Cd(this),this.clearDepth=new Td(this),this.clearStencil=new ja(this),this.colorMask=new Ph(this),this.depthMask=new js(this),this.stencilMask=new _c(this),this.stencilFunc=new xc(this),this.stencilOp=new Ro(this),this.stencilTest=new bc(this),this.depthRange=new Md(this),this.depthTest=new Pd(this),this.depthFunc=new aa(this),this.blend=new Eh(this),this.blendFunc=new Ih(this),this.blendColor=new wu(this),this.blendEquation=new kh(this),this.cullFace=new tp(this),this.cullFaceSide=new wc(this),this.frontFace=new ss(this),this.program=new Ed(this),this.activeTexture=new Ah(this),this.viewport=new Kr(this),this.bindFramebuffer=new Id(this),this.bindRenderbuffer=new Rh(this),this.bindTexture=new Sm(this),this.bindVertexBuffer=new Su(this),this.bindElementBuffer=new Cm(this),this.bindVertexArray=new ei(this),this.pixelStoreUnpack=new kd(this),this.pixelStoreUnpackPremultiplyAlpha=new Ad(this),this.pixelStoreUnpackFlipY=new Sc(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),si(n)){this.HALF_FLOAT=n.HALF_FLOAT;const v=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=n.RGBA16F)!==null&&u!==void 0?u:v?.RGBA16F_EXT,this.RGB16F=(m=n.RGB16F)!==null&&m!==void 0?m:v?.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const v=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=v?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,u){return new bm(this,n,u)}createVertexBuffer(n,u,m){return new wm(this,n,u,m)}createRenderbuffer(n,u,m){const v=this.gl,S=v.createRenderbuffer();return this.bindRenderbuffer.set(S),v.renderbufferStorage(v.RENDERBUFFER,n,u,m),this.bindRenderbuffer.set(null),S}createFramebuffer(n,u,m,v){return new Dh(this,n,u,m,v)}clear({color:n,depth:u,stencil:m}){const v=this.gl;let S=0;n&&(S|=v.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(S|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),m!==void 0&&(S|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),v.clear(S)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){o.bR(n.blendFunction,cn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return si(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var u;return si(this.gl)?this.gl.deleteVertexArray(n):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}let Il;function kl(w,n,u,m,v){const S=w.context,M=w.transform,k=S.gl,O=w.useProgram("collisionBox"),N=[];let H=0,J=0;for(let _e=0;_e<m.length;_e++){const Me=m[_e],Oe=n.getTile(Me).getBucket(u);if(!Oe)continue;const Pe=v?Oe.textCollisionBox:Oe.iconCollisionBox,ze=Oe.collisionCircleArray;ze.length>0&&(N.push({circleArray:ze,circleOffset:J,coord:Me}),H+=ze.length/4,J=H),Pe&&O.draw(S,k.LINES,jr.disabled,Qr.disabled,w.colorModeForRenderPass(),Jr.disabled,gs(w.transform),w.style.map.terrain&&w.style.map.terrain.getTerrainData(Me),M.getProjectionData({overscaledTileID:Me,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),u.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,null,w.transform.zoom,null,null,Pe.collisionVertexBuffer)}if(!v||!N.length)return;const K=w.useProgram("collisionCircle"),ne=new o.ca;ne.resize(4*H),ne._trim();let he=0;for(const _e of N)for(let Me=0;Me<_e.circleArray.length/4;Me++){const Oe=4*Me,Pe=_e.circleArray[Oe+0],ze=_e.circleArray[Oe+1],$e=_e.circleArray[Oe+2],Re=_e.circleArray[Oe+3];ne.emplace(he++,Pe,ze,$e,Re,0),ne.emplace(he++,Pe,ze,$e,Re,1),ne.emplace(he++,Pe,ze,$e,Re,2),ne.emplace(he++,Pe,ze,$e,Re,3)}(!Il||Il.length<2*H)&&(Il=function(_e){const Me=2*_e,Oe=new o.cc;Oe.resize(Me),Oe._trim();for(let Pe=0;Pe<Me;Pe++){const ze=6*Pe;Oe.uint16[ze+0]=4*Pe+0,Oe.uint16[ze+1]=4*Pe+1,Oe.uint16[ze+2]=4*Pe+2,Oe.uint16[ze+3]=4*Pe+2,Oe.uint16[ze+4]=4*Pe+3,Oe.uint16[ze+5]=4*Pe+0}return Oe}(H));const ge=S.createIndexBuffer(Il,!0),xe=S.createVertexBuffer(ne,o.cb.members,!0);for(const _e of N){const Me=ym(w.transform);K.draw(S,k.TRIANGLES,jr.disabled,Qr.disabled,w.colorModeForRenderPass(),Jr.disabled,Me,w.style.map.terrain&&w.style.map.terrain.getTerrainData(_e.coord),null,u.id,xe,ge,o.aX.simpleSegment(0,2*_e.circleOffset,_e.circleArray.length,_e.circleArray.length/2),null,w.transform.zoom,null,null,null)}xe.destroy(),ge.destroy()}const Tu=o.ar(new Float32Array(16));function Dd(w,n,u,m,v,S){const{horizontalAlign:M,verticalAlign:k}=o.aS(w);return new o.P((-(M-.5)*n/v+m[0])*S,(-(k-.5)*u/v+m[1])*S)}function Mc(w,n,u,m,v,S){const M=n.tileAnchorPoint.add(new o.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let k=m.mult(S);u||(k=k.rotate(-v));const O=M.add(k);return sr(O.x,O.y,n.pitchedLabelPlaneMatrix,n.getElevation).point}if(u){const k=an(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(w),O=Math.atan(k.y/k.x)+(k.x<0?Math.PI:0);return w.add(m.rotate(O))}return w.add(m)}function rp(w,n,u,m,v,S,M,k,O,N,H,J){const K=w.text.placedSymbolArray,ne=w.text.dynamicLayoutVertexArray,he=w.icon.dynamicLayoutVertexArray,ge={};ne.clear();for(let xe=0;xe<K.length;xe++){const _e=K.get(xe),Me=_e.hidden||!_e.crossTileID||w.allowVerticalPlacement&&!_e.placedOrientation?null:m[_e.crossTileID];if(Me){const Oe=new o.P(_e.anchorX,_e.anchorY),Pe={getElevation:J,width:v.width,height:v.height,pitchedLabelPlaneMatrix:S,pitchWithMap:u,transform:v,tileAnchorPoint:Oe,translation:N,unwrappedTileID:H},ze=u?Pr(Oe.x,Oe.y,Pe):an(Oe.x,Oe.y,Pe),$e=An(v.cameraToCenterDistance,ze.signedDistanceFromCamera);let Re=o.aA(w.textSizeData,k,_e)*$e/o.aM;u&&(Re*=w.tilePixelRatio/M);const{width:We,height:dt,anchor:at,textOffset:lt,textBoxScale:ct}=Me,Dt=Dd(at,We,dt,lt,ct,Re),zt=v.getPitchedTextCorrection(Oe.x+N[0],Oe.y+N[1],H),Pt=Mc(ze.point,Pe,n,Dt,-v.bearingInRadians,zt),Nt=w.allowVerticalPlacement&&_e.placedOrientation===o.az.vertical?Math.PI/2:0;for(let zr=0;zr<_e.numGlyphs;zr++)o.aG(ne,Pt,Nt);O&&_e.associatedIconIndex>=0&&(ge[_e.associatedIconIndex]={shiftedAnchor:Pt,angle:Nt})}else zs(_e.numGlyphs,ne)}if(O){he.clear();const xe=w.icon.placedSymbolArray;for(let _e=0;_e<xe.length;_e++){const Me=xe.get(_e);if(Me.hidden)zs(Me.numGlyphs,he);else{const Oe=ge[_e];if(Oe)for(let Pe=0;Pe<Me.numGlyphs;Pe++)o.aG(he,Oe.shiftedAnchor,Oe.angle);else zs(Me.numGlyphs,he)}}w.icon.dynamicLayoutVertexBuffer.updateData(he)}w.text.dynamicLayoutVertexBuffer.updateData(ne)}function zd(w,n,u){return u.iconsInText&&n?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function Pc(w,n,u,m,v,S,M,k,O,N,H,J,K){const ne=w.context,he=ne.gl,ge=w.transform,xe=k==="map",_e=O==="map",Me=k!=="viewport"&&u.layout.get("symbol-placement")!=="point",Oe=xe&&!_e&&!Me,Pe=!u.layout.get("symbol-sort-key").isConstant();let ze=!1;const $e=w.getDepthModeForSublayer(0,jr.ReadOnly),Re=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),We=[],dt=ge.getCircleRadiusCorrection();for(const at of m){const lt=n.getTile(at),ct=lt.getBucket(u);if(!ct)continue;const Dt=v?ct.text:ct.icon;if(!Dt||!Dt.segments.get().length||!Dt.hasVisibleVertices)continue;const zt=Dt.programConfigurations.get(u.id),Pt=v||ct.sdfIcons,Nt=v?ct.textSizeData:ct.iconSizeData,zr=_e||ge.pitch!==0,xn=w.useProgram(zd(Pt,v,ct),zt),Wn=o.ay(Nt,ge.zoom),Pn=w.style.map.terrain&&w.style.map.terrain.getTerrainData(at);let Zn,En,Xn,ri,eo=[0,0],Ei=null;if(v)En=lt.glyphAtlasTexture,Xn=he.LINEAR,Zn=lt.glyphAtlasTexture.size,ct.iconsInText&&(eo=lt.imageAtlasTexture.size,Ei=lt.imageAtlasTexture,ri=zr||w.options.rotating||w.options.zooming||Nt.kind==="composite"||Nt.kind==="camera"?he.LINEAR:he.NEAREST);else{const Rn=u.layout.get("icon-size").constantOr(0)!==1||ct.iconsNeedLinear;En=lt.imageAtlasTexture,Xn=Pt||w.options.rotating||w.options.zooming||Rn||zr?he.LINEAR:he.NEAREST,Zn=lt.imageAtlasTexture.size}const yn=o.aN(lt,1,w.transform.zoom),Gi=Ht(xe,w.transform,yn),Hs=o.N();o.aB(Hs,Gi);const ma=Mr(_e,xe,w.transform,yn),Ws=o.aO(ge,lt,S,M),zo=ge.getProjectionData({overscaledTileID:at,applyGlobeMatrix:!K,applyTerrainMatrix:!0}),Wa=Re&&ct.hasTextData(),ga=u.layout.get("icon-text-fit")!=="none"&&Wa&&ct.hasIconData();if(Me){const Rn=w.style.map.terrain?(Bi,qi)=>w.style.map.terrain.getElevation(at,Bi,qi):null,In=u.layout.get("text-rotation-alignment")==="map";La(ct,w,v,Gi,Hs,_e,N,In,at.toUnwrapped(),ge.width,ge.height,Ws,Rn)}const Za=v&&Re||ga,Zo=Me||Za?Tu:_e?Gi:w.transform.clipSpaceToPixelsMatrix,ya=Pt&&u.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ts;Ts=Pt?ct.iconsInText?vc(Nt.kind,Wn,Oe,_e,Me,Za,w,Zo,ma,Ws,Zn,eo,dt):Sd(Nt.kind,Wn,Oe,_e,Me,Za,w,Zo,ma,Ws,v,Zn,0,dt):Jf(Nt.kind,Wn,Oe,_e,Me,Za,w,Zo,ma,Ws,v,Zn,dt);const Ms={program:xn,buffers:Dt,uniformValues:Ts,projectionData:zo,atlasTexture:En,atlasTextureIcon:Ei,atlasInterpolation:Xn,atlasInterpolationIcon:ri,isSDF:Pt,hasHalo:ya};if(Pe&&ct.canOverlap){ze=!0;const Rn=Dt.segments.get();for(const In of Rn)We.push({segments:new o.aX([In]),sortKey:In.sortKey,state:Ms,terrainData:Pn})}else We.push({segments:Dt.segments,sortKey:0,state:Ms,terrainData:Pn})}ze&&We.sort((at,lt)=>at.sortKey-lt.sortKey);for(const at of We){const lt=at.state;if(ne.activeTexture.set(he.TEXTURE0),lt.atlasTexture.bind(lt.atlasInterpolation,he.CLAMP_TO_EDGE),lt.atlasTextureIcon&&(ne.activeTexture.set(he.TEXTURE1),lt.atlasTextureIcon&&lt.atlasTextureIcon.bind(lt.atlasInterpolationIcon,he.CLAMP_TO_EDGE)),lt.isSDF){const ct=lt.uniformValues;lt.hasHalo&&(ct.u_is_halo=1,Od(lt.buffers,at.segments,u,w,lt.program,$e,H,J,ct,lt.projectionData,at.terrainData)),ct.u_is_halo=0}Od(lt.buffers,at.segments,u,w,lt.program,$e,H,J,lt.uniformValues,lt.projectionData,at.terrainData)}}function Od(w,n,u,m,v,S,M,k,O,N,H){const J=m.context;v.draw(J,J.gl.TRIANGLES,S,M,k,Jr.backCCW,O,H,N,u.id,w.layoutVertexBuffer,w.indexBuffer,n,u.paint,m.transform.zoom,w.programConfigurations.get(u.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function np(w,n,u,m,v){const S=w.context,M=S.gl,k=Qr.disabled,O=new cn([M.ONE,M.ONE],o.bp.transparent,[!0,!0,!0,!0]),N=n.getBucket(u);if(!N)return;const H=m.key;let J=u.heatmapFbos.get(H);J||(J=zh(S,n.tileSize,n.tileSize),u.heatmapFbos.set(H,J)),S.bindFramebuffer.set(J.framebuffer),S.viewport.set([0,0,n.tileSize,n.tileSize]),S.clear({color:o.bp.transparent});const K=N.programConfigurations.get(u.id),ne=w.useProgram("heatmap",K,!v),he=w.transform.getProjectionData({overscaledTileID:n.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ge=w.style.map.terrain.getTerrainData(m);ne.draw(S,M.TRIANGLES,jr.disabled,k,O,Jr.disabled,_u(n,w.transform.zoom,u.paint.get("heatmap-intensity"),1),ge,he,u.id,N.layoutVertexBuffer,N.indexBuffer,N.segments,u.paint,w.transform.zoom,K)}function Tm(w,n,u,m,v){const S=w.context,M=S.gl,k=w.transform;S.setColorMode(w.colorModeForRenderPass());const O=Mu(S,n),N=u.key,H=n.heatmapFbos.get(N);if(!H)return;S.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,H.colorAttachment.get()),S.activeTexture.set(M.TEXTURE1),O.bind(M.LINEAR,M.CLAMP_TO_EDGE);const J=k.getProjectionData({overscaledTileID:u,applyTerrainMatrix:v,applyGlobeMatrix:!m});w.useProgram("heatmapTexture").draw(S,M.TRIANGLES,jr.disabled,Qr.disabled,w.colorModeForRenderPass(),Jr.disabled,Kf(w,n,0,1),null,J,n.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,n.paint,k.zoom),H.destroy(),n.heatmapFbos.delete(N)}function zh(w,n,u){var m,v;const S=w.gl,M=S.createTexture();S.bindTexture(S.TEXTURE_2D,M),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,S.LINEAR);const k=(m=w.HALF_FLOAT)!==null&&m!==void 0?m:S.UNSIGNED_BYTE,O=(v=w.RGBA16F)!==null&&v!==void 0?v:S.RGBA;S.texImage2D(S.TEXTURE_2D,0,O,n,u,0,S.RGBA,k,null);const N=w.createFramebuffer(n,u,!1,!1);return N.colorAttachment.set(M),N}function Mu(w,n){return n.colorRampTexture||(n.colorRampTexture=new o.T(w,n.colorRamp,w.gl.RGBA)),n.colorRampTexture}function Na(w,n,u,m,v,S,M,k){let O=256;if(v.stepInterpolant){const N=n.getSource().maxzoom,H=M.canonical.z===N?Math.ceil(1<<w.transform.maxZoom-M.canonical.z):1;O=o.an(o.ce(S.maxLineLength/o.a5*1024*H),256,u.maxTextureSize)}return k.gradient=o.cf({expression:v.gradientExpression(),evaluationKey:"lineProgress",resolution:O,image:k.gradient||void 0,clips:S.lineClipsArray}),k.texture?k.texture.update(k.gradient):k.texture=new o.T(u,k.gradient,m.RGBA),k.version=v.gradientVersion,k.texture}function ip(w,n,u,m,v){w.activeTexture.set(n.TEXTURE0),u.imageAtlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE),m.updatePaintBuffers(v)}function Ln(w,n,u,m,v,S){(v||w.lineAtlas.dirty)&&(n.activeTexture.set(u.TEXTURE0),w.lineAtlas.bind(n)),m.updatePaintBuffers(S)}function _o(w,n,u,m,v,S,M){const k=S.gradients[v.id];let O=k.texture;v.gradientVersion!==k.version&&(O=Na(w,n,u,m,v,S,M,k)),u.activeTexture.set(m.TEXTURE0),O.bind(v.stepInterpolant?m.NEAREST:m.LINEAR,m.CLAMP_TO_EDGE)}function uo(w,n,u,m,v,S,M,k,O){const N=S.gradients[v.id];let H=N.texture;v.gradientVersion!==N.version&&(H=Na(w,n,u,m,v,S,M,N)),u.activeTexture.set(m.TEXTURE0),H.bind(v.stepInterpolant?m.NEAREST:m.LINEAR,m.CLAMP_TO_EDGE),u.activeTexture.set(m.TEXTURE1),w.lineAtlas.bind(u),k.updatePaintBuffers(O)}function vs(w,n,u,m,v){if(!u||!m||!m.imageAtlas)return;const S=m.imageAtlas.patternPositions;let M=S[u.to.toString()],k=S[u.from.toString()];if(!M&&k&&(M=k),!k&&M&&(k=M),!M||!k){const O=v.getPaintProperty(n);M=S[O],k=S[O]}M&&k&&w.setConstantPatternPositions(M,k)}function Ec(w,n,u,m,v,S,M,k){const O=w.context.gl,N="fill-pattern",H=u.paint.get(N),J=H&&H.constantOr(1),K=u.getCrossfadeParameters();let ne,he,ge,xe,_e;const Me=w.transform,Oe=u.paint.get("fill-translate"),Pe=u.paint.get("fill-translate-anchor");M?(he=J&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ne=O.LINES):(he=J?"fillPattern":"fill",ne=O.TRIANGLES);const ze=H.constantOr(null);for(const $e of m){const Re=n.getTile($e);if(J&&!Re.patternsLoaded())continue;const We=Re.getBucket(u);if(!We)continue;const dt=We.programConfigurations.get(u.id),at=w.useProgram(he,dt),lt=w.style.map.terrain&&w.style.map.terrain.getTerrainData($e);J&&(w.context.activeTexture.set(O.TEXTURE0),Re.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),dt.updatePaintBuffers(K)),vs(dt,N,ze,Re,u);const ct=Me.getProjectionData({overscaledTileID:$e,applyGlobeMatrix:!k,applyTerrainMatrix:!0}),Dt=o.aO(Me,Re,Oe,Pe);if(M){xe=We.indexBuffer2,_e=We.segments2;const Pt=[O.drawingBufferWidth,O.drawingBufferHeight];ge=he==="fillOutlinePattern"&&J?Wf(w,K,Re,Pt,Dt):Hf(Pt,Dt)}else xe=We.indexBuffer,_e=We.segments,ge=J?_d(w,K,Re,Dt):{u_fill_translate:Dt};const zt=w.stencilModeForClipping($e);at.draw(w.context,ne,v,zt,S,Jr.backCCW,ge,lt,ct,u.id,We.layoutVertexBuffer,xe,_e,u.paint,w.transform.zoom,dt)}}function Ld(w,n,u,m,v,S,M,k){const O=w.context,N=O.gl,H="fill-extrusion-pattern",J=u.paint.get(H),K=J.constantOr(1),ne=u.getCrossfadeParameters(),he=u.paint.get("fill-extrusion-opacity"),ge=J.constantOr(null),xe=w.transform;for(const _e of m){const Me=n.getTile(_e),Oe=Me.getBucket(u);if(!Oe)continue;const Pe=w.style.map.terrain&&w.style.map.terrain.getTerrainData(_e),ze=Oe.programConfigurations.get(u.id),$e=w.useProgram(K?"fillExtrusionPattern":"fillExtrusion",ze);K&&(w.context.activeTexture.set(N.TEXTURE0),Me.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),ze.updatePaintBuffers(ne));const Re=xe.getProjectionData({overscaledTileID:_e,applyGlobeMatrix:!k,applyTerrainMatrix:!0});vs(ze,H,ge,Me,u);const We=o.aO(xe,Me,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),dt=u.paint.get("fill-extrusion-vertical-gradient"),at=K?vd(w,dt,he,We,_e,ne,Me):qf(w,dt,he,We);$e.draw(O,O.gl.TRIANGLES,v,S,M,Jr.backCCW,at,Pe,Re,u.id,Oe.layoutVertexBuffer,Oe.indexBuffer,Oe.segments,u.paint,w.transform.zoom,ze,w.style.map.terrain&&Oe.centroidVertexBuffer)}}function Al(w,n,u,m,v,S,M,k,O){var N;const H=w.style.projection,J=w.context,K=w.transform,ne=J.gl,he=[`#define NUM_ILLUMINATION_SOURCES ${u.paint.get("hillshade-highlight-color").values.length}`],ge=w.useProgram("hillshade",null,!1,he),xe=!w.options.moving;for(const _e of m){const Me=n.getTile(_e),Oe=Me.fbo;if(!Oe)continue;const Pe=H.getMeshFromTileID(J,_e.canonical,k,!0,"raster"),ze=(N=w.style.map.terrain)===null||N===void 0?void 0:N.getTerrainData(_e);J.activeTexture.set(ne.TEXTURE0),ne.bindTexture(ne.TEXTURE_2D,Oe.colorAttachment.get());const $e=K.getProjectionData({overscaledTileID:_e,aligned:xe,applyGlobeMatrix:!O,applyTerrainMatrix:!0});ge.draw(J,ne.TRIANGLES,S,v[_e.overscaledZ],M,Jr.backCCW,Sh(w,Me,u),ze,$e,u.id,Pe.vertexBuffer,Pe.indexBuffer,Pe.segments)}}function Ns(w,n,u,m,v,S,M,k,O){var N;const H=w.style.projection,J=w.context,K=w.transform,ne=J.gl,he=w.useProgram("colorRelief"),ge=!w.options.moving;let xe=!0,_e=0;for(const Me of m){const Oe=n.getTile(Me),Pe=Oe.dem;if(xe){const at=ne.getParameter(ne.MAX_TEXTURE_SIZE),{elevationTexture:lt,colorTexture:ct}=u.getColorRampTextures(J,at,Pe.getUnpackVector());J.activeTexture.set(ne.TEXTURE1),lt.bind(ne.NEAREST,ne.CLAMP_TO_EDGE),J.activeTexture.set(ne.TEXTURE4),ct.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),xe=!1,_e=lt.size[0]}if(!Pe||!Pe.data)continue;const ze=Pe.stride,$e=Pe.getPixels();if(J.activeTexture.set(ne.TEXTURE0),J.pixelStoreUnpackPremultiplyAlpha.set(!1),Oe.demTexture=Oe.demTexture||w.getTileTexture(ze),Oe.demTexture){const at=Oe.demTexture;at.update($e,{premultiply:!1}),at.bind(ne.LINEAR,ne.CLAMP_TO_EDGE)}else Oe.demTexture=new o.T(J,$e,ne.RGBA,{premultiply:!1}),Oe.demTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE);const Re=H.getMeshFromTileID(J,Me.canonical,k,!0,"raster"),We=(N=w.style.map.terrain)===null||N===void 0?void 0:N.getTerrainData(Me),dt=K.getProjectionData({overscaledTileID:Me,aligned:ge,applyGlobeMatrix:!O,applyTerrainMatrix:!0});he.draw(J,ne.TRIANGLES,S,v[Me.overscaledZ],M,Jr.backCCW,vm(u,Oe.dem,_e),We,dt,u.id,Re.vertexBuffer,Re.indexBuffer,Re.segments)}}const Vs=[new o.P(0,0),new o.P(o.a5,0),new o.P(o.a5,o.a5),new o.P(0,o.a5)];function Us(w,n,u,m,v,S,M,k,O=!1,N=!1){const H=m[m.length-1].overscaledZ,J=w.context,K=J.gl,ne=w.useProgram("raster"),he=w.transform,ge=w.style.projection,xe=w.colorModeForRenderPass(),_e=!w.options.moving,Me=u.paint.get("raster-opacity"),Oe=u.paint.get("raster-resampling"),Pe=u.paint.get("raster-fade-duration"),ze=!!w.style.map.terrain;for(const $e of m){const Re=w.getDepthModeForSublayer($e.overscaledZ-H,Me===1?jr.ReadWrite:jr.ReadOnly,K.LESS),We=n.getTile($e),dt=Oe==="nearest"?K.NEAREST:K.LINEAR;J.activeTexture.set(K.TEXTURE0),We.texture.bind(dt,K.CLAMP_TO_EDGE,K.LINEAR_MIPMAP_NEAREST),J.activeTexture.set(K.TEXTURE1);const{parentTile:at,parentScaleBy:lt,parentTopLeft:ct,fadeValues:Dt}=Oh(We,n,Pe,ze);We.fadeOpacity=Dt.tileOpacity,at?(at.fadeOpacity=Dt.parentTileOpacity,at.texture.bind(dt,K.CLAMP_TO_EDGE,K.LINEAR_MIPMAP_NEAREST)):We.texture.bind(dt,K.CLAMP_TO_EDGE,K.LINEAR_MIPMAP_NEAREST),We.texture.useMipmap&&J.extTextureFilterAnisotropic&&w.transform.pitch>20&&K.texParameterf(K.TEXTURE_2D,J.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,J.extTextureFilterAnisotropicMax);const zt=w.style.map.terrain&&w.style.map.terrain.getTerrainData($e),Pt=he.getProjectionData({overscaledTileID:$e,aligned:_e,applyGlobeMatrix:!N,applyTerrainMatrix:!0}),Nt=wd(ct,lt,Dt.fadeMix,u,k),zr=ge.getMeshFromTileID(J,$e.canonical,S,M,"raster");ne.draw(J,K.TRIANGLES,Re,v?v[$e.overscaledZ]:Qr.disabled,xe,O?Jr.frontCCW:Jr.backCCW,Nt,zt,Pt,u.id,zr.vertexBuffer,zr.indexBuffer,zr.segments)}}function Oh(w,n,u,m){const v={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(u===0||m)return v;if(w.fadingParentID){const S=n.getLoadedTile(w.fadingParentID);if(!S)return v;const M=Math.pow(2,S.tileID.overscaledZ-w.tileID.overscaledZ),k=[w.tileID.canonical.x*M%1,w.tileID.canonical.y*M%1],O=function(N,H,J){const K=j(),ne=(K-H.timeAdded)/J,he=N.fadingDirection===Ce.Incoming,ge=o.an((K-N.timeAdded)/J,0,1),xe=o.an(1-ne,0,1),_e=he?ge:xe;return{tileOpacity:_e,parentTileOpacity:he?xe:ge,fadeMix:{opacity:1,mix:1-_e}}}(w,S,u);return{parentTile:S,parentScaleBy:M,parentTopLeft:k,fadeValues:O}}if(w.selfFading){const S=function(M,k){const O=(j()-M.timeAdded)/k,N=o.an(O,0,1);return{tileOpacity:N,fadeMix:{opacity:N,mix:0}}}(w,u);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:S}}return v}const Fd=new o.bp(1,0,0,1),Ic=new o.bp(0,1,0,1),Va=new o.bp(0,0,1,1),qn=new o.bp(1,0,1,1),mn=new o.bp(0,1,1,1);function la(w,n,u,m){Qi(w,0,n+u/2,w.transform.width,u,m)}function Ji(w,n,u,m){Qi(w,n-u/2,0,u,w.transform.height,m)}function Qi(w,n,u,m,v,S){const M=w.context,k=M.gl;k.enable(k.SCISSOR_TEST),k.scissor(n*w.pixelRatio,u*w.pixelRatio,m*w.pixelRatio,v*w.pixelRatio),M.clear({color:S}),k.disable(k.SCISSOR_TEST)}function Rl(w,n,u){const m=w.context,v=m.gl,S=w.useProgram("debug"),M=jr.disabled,k=Qr.disabled,O=w.colorModeForRenderPass(),N="$debug",H=w.style.map.terrain&&w.style.map.terrain.getTerrainData(u);m.activeTexture.set(v.TEXTURE0);const J=n.getTileByID(u.key).latestRawTileData,K=Math.floor((J&&J.byteLength||0)/1024),ne=n.getTile(u).tileSize,he=512/Math.min(ne,512)*(u.overscaledZ/w.transform.zoom)*.5;let ge=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ge+=` => ${u.overscaledZ}`),function(_e,Me){_e.initDebugOverlayCanvas();const Oe=_e.debugOverlayCanvas,Pe=_e.context.gl,ze=_e.debugOverlayCanvas.getContext("2d");ze.clearRect(0,0,Oe.width,Oe.height),ze.shadowColor="white",ze.shadowBlur=2,ze.lineWidth=1.5,ze.strokeStyle="white",ze.textBaseline="top",ze.font="bold 36px Open Sans, sans-serif",ze.fillText(Me,5,5),ze.strokeText(Me,5,5),_e.debugOverlayTexture.update(Oe),_e.debugOverlayTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE)}(w,`${ge} ${K}kB`);const xe=w.transform.getProjectionData({overscaledTileID:u,applyGlobeMatrix:!0,applyTerrainMatrix:!0});S.draw(m,v.TRIANGLES,M,k,cn.alphaBlended,Jr.disabled,Xf(o.bp.transparent,he),null,xe,N,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),S.draw(m,v.LINE_STRIP,M,k,O,Jr.disabled,Xf(o.bp.red),H,xe,N,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function Dl(w,n,u,m){const{isRenderingGlobe:v}=m,S=w.context,M=S.gl,k=w.transform,O=w.colorModeForRenderPass(),N=w.getDepthModeFor3D(),H=w.useProgram("terrain");S.bindFramebuffer.set(null),S.viewport.set([0,0,w.width,w.height]);for(const J of u){const K=n.getTerrainMesh(J.tileID),ne=w.renderToTexture.getTexture(J),he=n.getTerrainData(J.tileID);S.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,ne.texture);const ge=n.getMeshFrameDelta(k.zoom),xe=k.calculateFogMatrix(J.tileID.toUnwrapped()),_e=ay(ge,xe,w.style.sky,k.pitch,v),Me=k.getProjectionData({overscaledTileID:J.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});H.draw(S,M.TRIANGLES,N,Qr.disabled,O,Jr.backCCW,_e,he,Me,"terrain",K.vertexBuffer,K.indexBuffer,K.segments)}}function xo(w,n){if(!n.mesh){const u=new o.aW;u.emplaceBack(-1,-1),u.emplaceBack(1,-1),u.emplaceBack(1,1),u.emplaceBack(-1,1);const m=new o.aY;m.emplaceBack(0,1,2),m.emplaceBack(0,2,3),n.mesh=new Mn(w.createVertexBuffer(u,ms.members),w.createIndexBuffer(m),o.aX.simpleSegment(0,0,u.length,m.length))}return n.mesh}class Lh{constructor(n,u){this.context=new Rd(n),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ti.maxOverzooming+Ti.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Xi}resize(n,u,m){if(this.width=Math.floor(n*m),this.height=Math.floor(u*m),this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style._order)this.style._layers[v].resize()}setup(){const n=this.context,u=new o.aW;u.emplaceBack(0,0),u.emplaceBack(o.a5,0),u.emplaceBack(0,o.a5),u.emplaceBack(o.a5,o.a5),this.tileExtentBuffer=n.createVertexBuffer(u,ms.members),this.tileExtentSegments=o.aX.simpleSegment(0,0,4,2);const m=new o.aW;m.emplaceBack(0,0),m.emplaceBack(o.a5,0),m.emplaceBack(0,o.a5),m.emplaceBack(o.a5,o.a5),this.debugBuffer=n.createVertexBuffer(m,ms.members),this.debugSegments=o.aX.simpleSegment(0,0,4,5);const v=new o.ch;v.emplaceBack(0,0,0,0),v.emplaceBack(o.a5,0,o.a5,0),v.emplaceBack(0,o.a5,0,o.a5),v.emplaceBack(o.a5,o.a5,o.a5,o.a5),this.rasterBoundsBuffer=n.createVertexBuffer(v,sy.members),this.rasterBoundsSegments=o.aX.simpleSegment(0,0,4,2);const S=new o.aW;S.emplaceBack(0,0),S.emplaceBack(o.a5,0),S.emplaceBack(0,o.a5),S.emplaceBack(o.a5,o.a5),this.rasterBoundsBufferPosOnly=n.createVertexBuffer(S,ms.members),this.rasterBoundsSegmentsPosOnly=o.aX.simpleSegment(0,0,4,5);const M=new o.aW;M.emplaceBack(0,0),M.emplaceBack(1,0),M.emplaceBack(0,1),M.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(M,ms.members),this.viewportSegments=o.aX.simpleSegment(0,0,4,2);const k=new o.ci;k.emplaceBack(0),k.emplaceBack(1),k.emplaceBack(3),k.emplaceBack(2),k.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(k);const O=new o.aY;O.emplaceBack(1,0,2),O.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(O);const N=this.context.gl;this.stencilClearMode=new Qr({func:N.ALWAYS,mask:0},0,255,N.ZERO,N.ZERO,N.ZERO),this.tileExtentMesh=new Mn(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const n=this.context,u=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=o.N();o.c7(m,0,this.width,this.height,0,0,1),o.Q(m,m,[u.drawingBufferWidth,u.drawingBufferHeight,0]);const v={mainMatrix:m,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:m};this.useProgram("clippingMask",null,!0).draw(n,u.TRIANGLES,jr.disabled,this.stencilClearMode,cn.disabled,Jr.disabled,null,null,v,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,u,m){if(this.currentStencilSource===n.source||!n.isTileClipped()||!u||!u.length)return;this.currentStencilSource=n.source,this.nextStencilID+u.length>256&&this.clearStencil();const v=this.context;v.setColorMode(cn.disabled),v.setDepthMode(jr.disabled);const S={};for(const M of u)S[M.key]=this.nextStencilID++;this._renderTileMasks(S,u,m,!0),this._renderTileMasks(S,u,m,!1),this._tileClippingMaskIDs=S}_renderTileMasks(n,u,m,v){const S=this.context,M=S.gl,k=this.style.projection,O=this.transform,N=this.useProgram("clippingMask");for(const H of u){const J=n[H.key],K=this.style.map.terrain&&this.style.map.terrain.getTerrainData(H),ne=k.getMeshFromTileID(this.context,H.canonical,v,!0,"stencil"),he=O.getProjectionData({overscaledTileID:H,applyGlobeMatrix:!m,applyTerrainMatrix:!0});N.draw(S,M.TRIANGLES,jr.disabled,new Qr({func:M.ALWAYS,mask:0},J,255,M.KEEP,M.KEEP,M.REPLACE),cn.disabled,m?Jr.disabled:Jr.backCCW,null,K,he,"$clipping",ne.vertexBuffer,ne.indexBuffer,ne.segments)}}_renderTilesDepthBuffer(){const n=this.context,u=n.gl,m=this.style.projection,v=this.transform,S=this.useProgram("depth"),M=this.getDepthModeFor3D(),k=kr(v,{tileSize:v.tileSize});for(const O of k){const N=this.style.map.terrain&&this.style.map.terrain.getTerrainData(O),H=m.getMeshFromTileID(this.context,O.canonical,!0,!0,"raster"),J=v.getProjectionData({overscaledTileID:O,applyGlobeMatrix:!0,applyTerrainMatrix:!0});S.draw(n,u.TRIANGLES,M,Qr.disabled,cn.disabled,Jr.backCCW,null,N,J,"$clipping",H.vertexBuffer,H.indexBuffer,H.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,u=this.context.gl;return new Qr({func:u.NOTEQUAL,mask:255},n,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(n){const u=this.context.gl;return new Qr({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,u.KEEP,u.KEEP,u.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(n){const u=this.context.gl,m=n.sort((M,k)=>k.overscaledZ-M.overscaledZ),v=m[m.length-1].overscaledZ,S=m[0].overscaledZ-v+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const M={};for(let k=0;k<S;k++)M[k+v]=new Qr({func:u.GEQUAL,mask:255},k+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=S,[M,m]}return[{[v]:Qr.disabled},m]}stencilConfigForOverlapTwoPass(n){const u=this.context.gl,m=n.sort((M,k)=>k.overscaledZ-M.overscaledZ),v=m[m.length-1].overscaledZ,S=m[0].overscaledZ-v+1;if(this.clearStencil(),S>1){const M={},k={};for(let O=0;O<S;O++)M[O+v]=new Qr({func:u.GREATER,mask:255},S+1+O,255,u.KEEP,u.KEEP,u.REPLACE),k[O+v]=new Qr({func:u.GREATER,mask:255},1+O,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID=2*S+1,[M,k,m]}return this.nextStencilID=3,[{[v]:new Qr({func:u.GREATER,mask:255},2,255,u.KEEP,u.KEEP,u.REPLACE)},{[v]:new Qr({func:u.GREATER,mask:255},1,255,u.KEEP,u.KEEP,u.REPLACE)},m]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new cn([n.CONSTANT_COLOR,n.ONE],new o.bp(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?cn.unblended:cn.alphaBlended}getDepthModeForSublayer(n,u,m){if(!this.opaquePassEnabledForLayer())return jr.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new jr(m||this.context.gl.LEQUAL,u,[v,v])}getDepthModeFor3D(){return new jr(this.context.gl.LEQUAL,jr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,u){var m,v;this.style=n,this.options=u,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(j()),this.imageManager.beginFrame();const S=this.style._order,M=this.style.tileManagers,k={},O={},N={},H={isRenderingToTexture:!1,isRenderingGlobe:((m=n.projection)===null||m===void 0?void 0:m.transitionState)>0};for(const K in M){const ne=M[K];ne.used&&ne.prepare(this.context),k[K]=ne.getVisibleCoordinates(!1),O[K]=k[K].slice().reverse(),N[K]=ne.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let K=0;K<S.length;K++)if(this.style._layers[S[K]].is3D()){this.opaquePassCutoff=K;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const K of S){const ne=this.style._layers[K];if(!ne.hasOffscreenPass()||ne.isHidden(this.transform.zoom))continue;const he=O[ne.source];(ne.type==="custom"||he.length)&&this.renderLayer(this,M[ne.source],ne,he,H)}if((v=this.style.projection)===null||v===void 0||v.updateGPUdependent({context:this.context,useProgram:K=>this.useProgram(K)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?o.bp.black:o.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(K,ne){const he=K.context,ge=he.gl,xe=(($e,Re,We)=>{const dt=Math.cos(Re.rollInRadians),at=Math.sin(Re.rollInRadians),lt=gt(Re),ct=Re.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:$e.properties.get("sky-color"),u_horizon_color:$e.properties.get("horizon-color"),u_horizon:[(Re.width/2-lt*at)*We,(Re.height/2+lt*dt)*We],u_horizon_normal:[-at,dt],u_sky_horizon_blend:$e.properties.get("sky-horizon-blend")*Re.height/2*We,u_sky_blend:ct}})(ne,K.style.map.transform,K.pixelRatio),_e=new jr(ge.LEQUAL,jr.ReadWrite,[0,1]),Me=Qr.disabled,Oe=K.colorModeForRenderPass(),Pe=K.useProgram("sky"),ze=xo(he,ne);Pe.draw(he,ge.TRIANGLES,_e,Me,Oe,Jr.disabled,xe,null,void 0,"sky",ze.vertexBuffer,ze.indexBuffer,ze.segments)}(this,this.style.sky),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=S.length-1;this.currentLayer>=0;this.currentLayer--){const K=this.style._layers[S[this.currentLayer]],ne=M[K.source],he=k[K.source];this._renderTileClippingMasks(K,he,!1),this.renderLayer(this,ne,K,he,H)}this.renderPass="translucent";let J=!1;for(this.currentLayer=0;this.currentLayer<S.length;this.currentLayer++){const K=this.style._layers[S[this.currentLayer]],ne=M[K.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(K,H))continue;this.opaquePassEnabledForLayer()||J||(J=!0,H.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const he=(K.type==="symbol"?N:O)[K.source];this._renderTileClippingMasks(K,k[K.source],!!this.renderToTexture),this.renderLayer(this,ne,K,he,H)}if(H.isRenderingGlobe&&function(K,ne,he){const ge=K.context,xe=ge.gl,_e=K.useProgram("atmosphere"),Me=new jr(xe.LEQUAL,jr.ReadOnly,[0,1]),Oe=K.transform,Pe=function(ct,Dt){const zt=ct.properties.get("position"),Pt=[-zt.x,-zt.y,-zt.z],Nt=o.ar(new Float64Array(16));return ct.properties.get("anchor")==="map"&&(o.bg(Nt,Nt,Dt.rollInRadians),o.bh(Nt,Nt,-Dt.pitchInRadians),o.bg(Nt,Nt,Dt.bearingInRadians),o.bh(Nt,Nt,Dt.center.lat*Math.PI/180),o.bJ(Nt,Nt,-Dt.center.lng*Math.PI/180)),o.cg(Pt,Pt,Nt),Pt}(he,K.transform),ze=Oe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),$e=ne.properties.get("atmosphere-blend")*ze.projectionTransition;if($e===0)return;const Re=fc(Oe.worldSize,Oe.center.lat),We=Oe.inverseProjectionMatrix,dt=new Float64Array(4);dt[3]=1,o.aH(dt,dt,Oe.modelViewProjectionMatrix),dt[0]/=dt[3],dt[1]/=dt[3],dt[2]/=dt[3],dt[3]=1,o.aH(dt,dt,We),dt[0]/=dt[3],dt[1]/=dt[3],dt[2]/=dt[3],dt[3]=1;const at=((ct,Dt,zt,Pt,Nt)=>({u_sun_pos:ct,u_atmosphere_blend:Dt,u_globe_position:zt,u_globe_radius:Pt,u_inv_proj_matrix:Nt}))(Pe,$e,[dt[0],dt[1],dt[2]],Re,We),lt=xo(ge,ne);_e.draw(ge,xe.TRIANGLES,Me,Qr.disabled,cn.alphaBlended,Jr.disabled,at,null,null,"atmosphere",lt.vertexBuffer,lt.indexBuffer,lt.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const K=function(ne,he){let ge=null;const xe=Object.values(ne._layers).flatMap(Pe=>Pe.source&&!Pe.isHidden(he)?[ne.tileManagers[Pe.source]]:[]),_e=xe.filter(Pe=>Pe.getSource().type==="vector"),Me=xe.filter(Pe=>Pe.getSource().type!=="vector"),Oe=Pe=>{(!ge||ge.getSource().maxzoom<Pe.getSource().maxzoom)&&(ge=Pe)};return _e.forEach(Pe=>Oe(Pe)),ge||Me.forEach(Pe=>Oe(Pe)),ge}(this.style,this.transform.zoom);K&&function(ne,he,ge){for(let xe=0;xe<ge.length;xe++)Rl(ne,he,ge[xe])}(this,K,K.getVisibleCoordinates())}this.options.showPadding&&function(K){const ne=K.transform.padding;la(K,K.transform.height-(ne.top||0),3,Fd),la(K,ne.bottom||0,3,Ic),Ji(K,ne.left||0,3,Va),Ji(K,K.transform.width-(ne.right||0),3,qn);const he=K.transform.centerPoint;(function(ge,xe,_e,Me){Qi(ge,xe-1,_e-10,2,20,Me),Qi(ge,xe-10,_e-1,20,2,Me)})(K,he.x,K.transform.height-he.y,mn)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(n){if(!this.style||!this.style.map||!this.style.map.terrain)return;const u=this.terrainFacilitator.matrix,m=this.transform.modelViewProjectionMatrix;let v=this.terrainFacilitator.dirty;v||(v=n?!o.cj(u,m):!o.ck(u,m)),v||(v=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),v&&(o.cl(u,m),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(S,M){const k=S.context,O=k.gl,N=S.transform,H=cn.unblended,J=new jr(O.LEQUAL,jr.ReadWrite,[0,1]),K=M.tileManager.getRenderableTiles(),ne=S.useProgram("terrainDepth");k.bindFramebuffer.set(M.getFramebuffer("depth").framebuffer),k.viewport.set([0,0,S.width/devicePixelRatio,S.height/devicePixelRatio]),k.clear({color:o.bp.transparent,depth:1});for(const he of K){const ge=M.getTerrainMesh(he.tileID),xe=M.getTerrainData(he.tileID),_e=N.getProjectionData({overscaledTileID:he.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Me={u_ele_delta:M.getMeshFrameDelta(N.zoom)};ne.draw(k,O.TRIANGLES,J,Qr.disabled,H,Jr.backCCW,Me,xe,_e,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments)}k.bindFramebuffer.set(null),k.viewport.set([0,0,S.width,S.height])}(this,this.style.map.terrain),function(S,M){const k=S.context,O=k.gl,N=S.transform,H=cn.unblended,J=new jr(O.LEQUAL,jr.ReadWrite,[0,1]),K=M.getCoordsTexture(),ne=M.tileManager.getRenderableTiles(),he=S.useProgram("terrainCoords");k.bindFramebuffer.set(M.getFramebuffer("coords").framebuffer),k.viewport.set([0,0,S.width/devicePixelRatio,S.height/devicePixelRatio]),k.clear({color:o.bp.transparent,depth:1}),M.coordsIndex=[];for(const ge of ne){const xe=M.getTerrainMesh(ge.tileID),_e=M.getTerrainData(ge.tileID);k.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,K.texture);const Me={u_terrain_coords_id:(255-M.coordsIndex.length)/255,u_texture:0,u_ele_delta:M.getMeshFrameDelta(N.zoom)},Oe=N.getProjectionData({overscaledTileID:ge.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});he.draw(k,O.TRIANGLES,J,Qr.disabled,H,Jr.backCCW,Me,_e,Oe,"terrain",xe.vertexBuffer,xe.indexBuffer,xe.segments),M.coordsIndex.push(ge.tileID.key)}k.bindFramebuffer.set(null),k.viewport.set([0,0,S.width,S.height])}(this,this.style.map.terrain))}renderLayer(n,u,m,v,S){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="custom"||(v||[]).length)&&(this.id=m.id,o.cm(m)?function(M,k,O,N,H,J){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:K}=J,ne=Qr.disabled,he=M.colorModeForRenderPass();(O._unevaluatedLayout.hasValue("text-variable-anchor")||O._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ge,xe,_e,Me,Oe,Pe,ze,$e,Re){const We=xe.transform,dt=xe.style.map.terrain,at=Oe==="map",lt=Pe==="map";for(const ct of ge){const Dt=Me.getTile(ct),zt=Dt.getBucket(_e);if(!zt||!zt.text||!zt.text.segments.get().length)continue;const Pt=o.ay(zt.textSizeData,We.zoom),Nt=o.aN(Dt,1,xe.transform.zoom),zr=Ht(at,xe.transform,Nt),xn=_e.layout.get("icon-text-fit")!=="none"&&zt.hasIconData();if(Pt){const Wn=Math.pow(2,We.zoom-Dt.tileID.overscaledZ),Pn=dt?(Zn,En)=>dt.getElevation(ct,Zn,En):null;rp(zt,at,lt,Re,We,zr,Wn,Pt,xn,o.aO(We,Dt,ze,$e),ct.toUnwrapped(),Pn)}}}(N,M,O,k,O.layout.get("text-rotation-alignment"),O.layout.get("text-pitch-alignment"),O.paint.get("text-translate"),O.paint.get("text-translate-anchor"),H),O.paint.get("icon-opacity").constantOr(1)!==0&&Pc(M,k,O,N,!1,O.paint.get("icon-translate"),O.paint.get("icon-translate-anchor"),O.layout.get("icon-rotation-alignment"),O.layout.get("icon-pitch-alignment"),O.layout.get("icon-keep-upright"),ne,he,K),O.paint.get("text-opacity").constantOr(1)!==0&&Pc(M,k,O,N,!0,O.paint.get("text-translate"),O.paint.get("text-translate-anchor"),O.layout.get("text-rotation-alignment"),O.layout.get("text-pitch-alignment"),O.layout.get("text-keep-upright"),ne,he,K),k.map.showCollisionBoxes&&(kl(M,k,O,N,!0),kl(M,k,O,N,!1))}(n,u,m,v,this.style.placement.variableOffsets,S):o.cn(m)?function(M,k,O,N,H){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:J}=H,K=O.paint.get("circle-opacity"),ne=O.paint.get("circle-stroke-width"),he=O.paint.get("circle-stroke-opacity"),ge=!O.layout.get("circle-sort-key").isConstant();if(K.constantOr(1)===0&&(ne.constantOr(1)===0||he.constantOr(1)===0))return;const xe=M.context,_e=xe.gl,Me=M.transform,Oe=M.getDepthModeForSublayer(0,jr.ReadOnly),Pe=Qr.disabled,ze=M.colorModeForRenderPass(),$e=[],Re=Me.getCircleRadiusCorrection();for(let We=0;We<N.length;We++){const dt=N[We],at=k.getTile(dt),lt=at.getBucket(O);if(!lt)continue;const ct=O.paint.get("circle-translate"),Dt=O.paint.get("circle-translate-anchor"),zt=o.aO(Me,at,ct,Dt),Pt=lt.programConfigurations.get(O.id),Nt=M.useProgram("circle",Pt),zr=lt.layoutVertexBuffer,xn=lt.indexBuffer,Wn=M.style.map.terrain&&M.style.map.terrain.getTerrainData(dt),Pn={programConfiguration:Pt,program:Nt,layoutVertexBuffer:zr,indexBuffer:xn,uniformValues:Zf(M,at,O,zt,Re),terrainData:Wn,projectionData:Me.getProjectionData({overscaledTileID:dt,applyGlobeMatrix:!J,applyTerrainMatrix:!0})};if(ge){const Zn=lt.segments.get();for(const En of Zn)$e.push({segments:new o.aX([En]),sortKey:En.sortKey,state:Pn})}else $e.push({segments:lt.segments,sortKey:0,state:Pn})}ge&&$e.sort((We,dt)=>We.sortKey-dt.sortKey);for(const We of $e){const{programConfiguration:dt,program:at,layoutVertexBuffer:lt,indexBuffer:ct,uniformValues:Dt,terrainData:zt,projectionData:Pt}=We.state;at.draw(xe,_e.TRIANGLES,Oe,Pe,ze,Jr.backCCW,Dt,zt,Pt,O.id,lt,ct,We.segments,O.paint,M.transform.zoom,dt)}}(n,u,m,v,S):o.co(m)?function(M,k,O,N,H){if(O.paint.get("heatmap-opacity")===0)return;const J=M.context,{isRenderingToTexture:K,isRenderingGlobe:ne}=H;if(M.style.map.terrain){for(const he of N){const ge=k.getTile(he);k.hasRenderableParent(he)||(M.renderPass==="offscreen"?np(M,ge,O,he,ne):M.renderPass==="translucent"&&Tm(M,O,he,K,ne))}J.viewport.set([0,0,M.width,M.height])}else M.renderPass==="offscreen"?function(he,ge,xe,_e){const Me=he.context,Oe=Me.gl,Pe=he.transform,ze=Qr.disabled,$e=new cn([Oe.ONE,Oe.ONE],o.bp.transparent,[!0,!0,!0,!0]);(function(Re,We,dt){const at=Re.gl;Re.activeTexture.set(at.TEXTURE1),Re.viewport.set([0,0,We.width/4,We.height/4]);let lt=dt.heatmapFbos.get(o.cd);lt?(at.bindTexture(at.TEXTURE_2D,lt.colorAttachment.get()),Re.bindFramebuffer.set(lt.framebuffer)):(lt=zh(Re,We.width/4,We.height/4),dt.heatmapFbos.set(o.cd,lt))})(Me,he,xe),Me.clear({color:o.bp.transparent});for(let Re=0;Re<_e.length;Re++){const We=_e[Re];if(ge.hasRenderableParent(We))continue;const dt=ge.getTile(We),at=dt.getBucket(xe);if(!at)continue;const lt=at.programConfigurations.get(xe.id),ct=he.useProgram("heatmap",lt),Dt=Pe.getProjectionData({overscaledTileID:We,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),zt=Pe.getCircleRadiusCorrection();ct.draw(Me,Oe.TRIANGLES,jr.disabled,ze,$e,Jr.backCCW,_u(dt,Pe.zoom,xe.paint.get("heatmap-intensity"),zt),null,Dt,xe.id,at.layoutVertexBuffer,at.indexBuffer,at.segments,xe.paint,Pe.zoom,lt)}Me.viewport.set([0,0,he.width,he.height])}(M,k,O,N):M.renderPass==="translucent"&&function(he,ge){const xe=he.context,_e=xe.gl;xe.setColorMode(he.colorModeForRenderPass());const Me=ge.heatmapFbos.get(o.cd);Me&&(xe.activeTexture.set(_e.TEXTURE0),_e.bindTexture(_e.TEXTURE_2D,Me.colorAttachment.get()),xe.activeTexture.set(_e.TEXTURE1),Mu(xe,ge).bind(_e.LINEAR,_e.CLAMP_TO_EDGE),he.useProgram("heatmapTexture").draw(xe,_e.TRIANGLES,jr.disabled,Qr.disabled,he.colorModeForRenderPass(),Jr.disabled,Kf(he,ge,0,1),null,null,ge.id,he.viewportBuffer,he.quadTriangleIndexBuffer,he.viewportSegments,ge.paint,he.transform.zoom))}(M,O)}(n,u,m,v,S):o.cp(m)?function(M,k,O,N,H){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:J}=H,K=O.paint.get("line-opacity"),ne=O.paint.get("line-width");if(K.constantOr(1)===0||ne.constantOr(1)===0)return;const he=M.getDepthModeForSublayer(0,jr.ReadOnly),ge=M.colorModeForRenderPass(),xe=O.paint.get("line-dasharray"),_e=xe.constantOr(1),Me=O.paint.get("line-pattern"),Oe=Me.constantOr(1),Pe=O.paint.get("line-gradient"),ze=O.getCrossfadeParameters();let $e;$e=Oe?"linePattern":_e&&Pe?"lineGradientSDF":_e?"lineSDF":Pe?"lineGradient":"line";const Re=M.context,We=Re.gl,dt=M.transform;let at=!0;for(const lt of N){const ct=k.getTile(lt);if(Oe&&!ct.patternsLoaded())continue;const Dt=ct.getBucket(O);if(!Dt)continue;const zt=Dt.programConfigurations.get(O.id),Pt=M.context.program.get(),Nt=M.useProgram($e,zt),zr=at||Nt.program!==Pt,xn=M.style.map.terrain&&M.style.map.terrain.getTerrainData(lt),Wn=Me.constantOr(null),Pn=xe&&xe.constantOr(null);if(Wn&&ct.imageAtlas){const eo=ct.imageAtlas,Ei=eo.patternPositions[Wn.to.toString()],yn=eo.patternPositions[Wn.from.toString()];Ei&&yn&&zt.setConstantPatternPositions(Ei,yn)}else if(Pn){const eo=O.layout.get("line-cap")==="round",Ei=M.lineAtlas.getDash(Pn.to,eo),yn=M.lineAtlas.getDash(Pn.from,eo);zt.setConstantDashPositions(Ei,yn)}const Zn=dt.getProjectionData({overscaledTileID:lt,applyGlobeMatrix:!J,applyTerrainMatrix:!0}),En=dt.getPixelScale();let Xn;Oe?(Xn=xd(M,ct,O,En,ze),ip(Re,We,ct,zt,ze)):_e&&Pe?(Xn=xu(M,ct,O,En,ze,Dt.lineClipsArray.length),uo(M,k,Re,We,O,Dt,lt,zt,ze)):_e?(Xn=bd(M,ct,O,En,ze),Ln(M,Re,We,zt,zr,ze)):Pe?(Xn=_m(M,ct,O,En,Dt.lineClipsArray.length),_o(M,k,Re,We,O,Dt,lt)):Xn=Ml(M,ct,O,En);const ri=M.stencilModeForClipping(lt);Nt.draw(Re,We.TRIANGLES,he,ri,ge,Jr.disabled,Xn,xn,Zn,O.id,Dt.layoutVertexBuffer,Dt.indexBuffer,Dt.segments,O.paint,M.transform.zoom,zt,Dt.layoutVertexBuffer2),at=!1}}(n,u,m,v,S):o.cq(m)?function(M,k,O,N,H){const J=O.paint.get("fill-color"),K=O.paint.get("fill-opacity");if(K.constantOr(1)===0)return;const{isRenderingToTexture:ne}=H,he=M.colorModeForRenderPass(),ge=O.paint.get("fill-pattern"),xe=M.opaquePassEnabledForLayer()&&!ge.constantOr(1)&&J.constantOr(o.bp.transparent).a===1&&K.constantOr(0)===1?"opaque":"translucent";if(M.renderPass===xe){const _e=M.getDepthModeForSublayer(1,M.renderPass==="opaque"?jr.ReadWrite:jr.ReadOnly);Ec(M,k,O,N,_e,he,!1,ne)}if(M.renderPass==="translucent"&&O.paint.get("fill-antialias")){const _e=M.getDepthModeForSublayer(O.getPaintProperty("fill-outline-color")?2:0,jr.ReadOnly);Ec(M,k,O,N,_e,he,!0,ne)}}(n,u,m,v,S):o.cr(m)?function(M,k,O,N,H){const J=O.paint.get("fill-extrusion-opacity");if(J===0)return;const{isRenderingToTexture:K}=H;if(M.renderPass==="translucent"){const ne=new jr(M.context.gl.LEQUAL,jr.ReadWrite,M.depthRangeFor3D);if(J!==1||O.paint.get("fill-extrusion-pattern").constantOr(1))Ld(M,k,O,N,ne,Qr.disabled,cn.disabled,K),Ld(M,k,O,N,ne,M.stencilModeFor3D(),M.colorModeForRenderPass(),K);else{const he=M.colorModeForRenderPass();Ld(M,k,O,N,ne,Qr.disabled,he,K)}}}(n,u,m,v,S):o.cs(m)?function(M,k,O,N,H){if(M.renderPass!=="offscreen"&&M.renderPass!=="translucent")return;const{isRenderingToTexture:J}=H,K=M.context,ne=M.style.projection.useSubdivision,he=M.getDepthModeForSublayer(0,jr.ReadOnly),ge=M.colorModeForRenderPass();if(M.renderPass==="offscreen")(function(xe,_e,Me,Oe,Pe,ze,$e){const Re=xe.context,We=Re.gl;for(const dt of Me){const at=_e.getTile(dt),lt=at.dem;if(!lt||!lt.data||!at.needsHillshadePrepare)continue;const ct=lt.dim,Dt=lt.stride,zt=lt.getPixels();if(Re.activeTexture.set(We.TEXTURE1),Re.pixelStoreUnpackPremultiplyAlpha.set(!1),at.demTexture=at.demTexture||xe.getTileTexture(Dt),at.demTexture){const Nt=at.demTexture;Nt.update(zt,{premultiply:!1}),Nt.bind(We.NEAREST,We.CLAMP_TO_EDGE)}else at.demTexture=new o.T(Re,zt,We.RGBA,{premultiply:!1}),at.demTexture.bind(We.NEAREST,We.CLAMP_TO_EDGE);Re.activeTexture.set(We.TEXTURE0);let Pt=at.fbo;if(!Pt){const Nt=new o.T(Re,{width:ct,height:ct,data:null},We.RGBA);Nt.bind(We.LINEAR,We.CLAMP_TO_EDGE),Pt=at.fbo=Re.createFramebuffer(ct,ct,!0,!1),Pt.colorAttachment.set(Nt.texture)}Re.bindFramebuffer.set(Pt.framebuffer),Re.viewport.set([0,0,ct,ct]),xe.useProgram("hillshadePrepare").draw(Re,We.TRIANGLES,Pe,ze,$e,Jr.disabled,Ch(at.tileID,lt),null,null,Oe.id,xe.rasterBoundsBuffer,xe.quadTriangleIndexBuffer,xe.rasterBoundsSegments),at.needsHillshadePrepare=!1}})(M,k,N,O,he,Qr.disabled,ge),K.viewport.set([0,0,M.width,M.height]);else if(M.renderPass==="translucent")if(ne){const[xe,_e,Me]=M.stencilConfigForOverlapTwoPass(N);Al(M,k,O,Me,xe,he,ge,!1,J),Al(M,k,O,Me,_e,he,ge,!0,J)}else{const[xe,_e]=M.getStencilConfigForOverlapAndUpdateStencilID(N);Al(M,k,O,_e,xe,he,ge,!1,J)}}(n,u,m,v,S):o.ct(m)?function(M,k,O,N,H){if(M.renderPass!=="translucent"||!N.length)return;const{isRenderingToTexture:J}=H,K=M.style.projection.useSubdivision,ne=M.getDepthModeForSublayer(0,jr.ReadOnly),he=M.colorModeForRenderPass();if(K){const[ge,xe,_e]=M.stencilConfigForOverlapTwoPass(N);Ns(M,k,O,_e,ge,ne,he,!1,J),Ns(M,k,O,_e,xe,ne,he,!0,J)}else{const[ge,xe]=M.getStencilConfigForOverlapAndUpdateStencilID(N);Ns(M,k,O,xe,ge,ne,he,!1,J)}}(n,u,m,v,S):o.bU(m)?function(M,k,O,N,H){if(M.renderPass!=="translucent"||O.paint.get("raster-opacity")===0||!N.length)return;const{isRenderingToTexture:J}=H,K=k.getSource(),ne=M.style.projection.useSubdivision;if(K instanceof Tn)Us(M,k,O,N,null,!1,!1,K.tileCoords,K.flippedWindingOrder,J);else if(ne){const[he,ge,xe]=M.stencilConfigForOverlapTwoPass(N);Us(M,k,O,xe,he,!1,!0,Vs,!1,J),Us(M,k,O,xe,ge,!0,!0,Vs,!1,J)}else{const[he,ge]=M.getStencilConfigForOverlapAndUpdateStencilID(N);Us(M,k,O,ge,he,!1,!0,Vs,!1,J)}}(n,u,m,v,S):o.cu(m)?function(M,k,O,N,H){const J=O.paint.get("background-color"),K=O.paint.get("background-opacity");if(K===0)return;const{isRenderingToTexture:ne}=H,he=M.context,ge=he.gl,xe=M.style.projection,_e=M.transform,Me=_e.tileSize,Oe=O.paint.get("background-pattern");if(M.isPatternMissing(Oe))return;const Pe=!Oe&&J.a===1&&K===1&&M.opaquePassEnabledForLayer()?"opaque":"translucent";if(M.renderPass!==Pe)return;const ze=Qr.disabled,$e=M.getDepthModeForSublayer(0,Pe==="opaque"?jr.ReadWrite:jr.ReadOnly),Re=M.colorModeForRenderPass(),We=M.useProgram(Oe?"backgroundPattern":"background"),dt=N||kr(_e,{tileSize:Me,terrain:M.style.map.terrain});Oe&&(he.activeTexture.set(ge.TEXTURE0),M.imageManager.bind(M.context));const at=O.getCrossfadeParameters();for(const lt of dt){const ct=_e.getProjectionData({overscaledTileID:lt,applyGlobeMatrix:!ne,applyTerrainMatrix:!0}),Dt=Oe?$s(K,M,Oe,{tileID:lt,tileSize:Me},at):Qf(K,J),zt=M.style.map.terrain&&M.style.map.terrain.getTerrainData(lt),Pt=xe.getMeshFromTileID(he,lt.canonical,!1,!0,"raster");We.draw(he,ge.TRIANGLES,$e,ze,Re,Jr.backCCW,Dt,zt,ct,O.id,Pt.vertexBuffer,Pt.indexBuffer,Pt.segments)}}(n,0,m,v,S):o.cv(m)&&function(M,k,O,N){const{isRenderingGlobe:H}=N,J=M.context,K=O.implementation,ne=M.style.projection,he=M.transform,ge=he.getProjectionDataForCustomLayer(H),xe={farZ:he.farZ,nearZ:he.nearZ,fov:he.fov*Math.PI/180,modelViewProjectionMatrix:he.modelViewProjectionMatrix,projectionMatrix:he.projectionMatrix,shaderData:{variantName:ne.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${ne.shaderPreludeCode.vertexSource}`,define:ne.shaderDefine},defaultProjectionData:ge},_e=K.renderingMode?K.renderingMode:"2d";if(M.renderPass==="offscreen"){const Me=K.prerender;Me&&(M.setCustomLayerDefaults(),J.setColorMode(M.colorModeForRenderPass()),Me.call(K,J.gl,xe),J.setDirty(),M.setBaseState())}else if(M.renderPass==="translucent"){M.setCustomLayerDefaults(),J.setColorMode(M.colorModeForRenderPass()),J.setStencilMode(Qr.disabled);const Me=_e==="3d"?M.getDepthModeFor3D():M.getDepthModeForSublayer(0,jr.ReadOnly);J.setDepthMode(Me),K.render(J.gl,xe),J.setDirty(),M.setBaseState(),J.bindFramebuffer.set(null)}}(n,0,m,S))}saveTileTexture(n){const u=this._tileTextures[n.size[0]];u?u.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const u=this._tileTextures[n];return u&&u.length>0?u.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const u=this.imageManager.getPattern(n.from.toString()),m=this.imageManager.getPattern(n.to.toString());return!u||!m}useProgram(n,u,m=!1,v=[]){this.cache=this.cache||{};const S=!!this.style.map.terrain,M=this.style.projection,k=m?_n.projectionMercator:M.shaderPreludeCode,O=m?ko:M.shaderDefine,N=n+(u?u.cacheKey:"")+`/${m?Vo:M.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(S?"/terrain":"")+(v?`/${v.join("/")}`:"");return this.cache[N]||(this.cache[N]=new yd(this.context,_n[n],u,xm[n],this._showOverdrawInspector,S,k,O,v)),this.cache[N]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var n,u;if(this._tileTextures){for(const m in this._tileTextures){const v=this._tileTextures[m];if(v)for(const S of v)S.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((n=this.tileExtentMesh.vertexBuffer)===null||n===void 0||n.destroy()),this.tileExtentMesh&&((u=this.tileExtentMesh.indexBuffer)===null||u===void 0||u.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const m in this.cache){const v=this.cache[m];v&&v.program&&this.context.gl.deleteProgram(v.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:u}=this.context.gl;return this.width!==n||this.height!==u}}function Bd(w,n){let u,m=!1,v=null,S=null;const M=()=>{v=null,m&&(w.apply(S,u),v=setTimeout(M,n),m=!1)};return(...k)=>(m=!0,S=this,u=k,v||M(),v)}class $d{constructor(n){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let m;return u.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(m=v)}),(m&&m[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(!this._isValidHash(u))return!1;const m=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:m,pitch:+(u[4]||0)}),!0},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,u)},this._removeHash=()=>{const u=this._getCurrentHash();if(u.length===0)return;const m=u.join("/");let v=m;v.split("&").length>0&&(v=v.split("&")[0]),this._hashName&&(v=`${this._hashName}=${m}`);let S=window.location.hash.replace(v,"");S.startsWith("#&")?S=S.slice(0,1)+S.slice(2):S==="#"&&(S="");let M=window.location.href.replace(/(#.+)?$/,S);M=M.replace("&&","&"),window.history.replaceState(window.history.state,null,M)},this._updateHash=Bd(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(n){const u=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,v=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,v),M=Math.round(u.lng*S)/S,k=Math.round(u.lat*S)/S,O=this._map.getBearing(),N=this._map.getPitch();let H="";if(H+=n?`/${M}/${k}/${m}`:`${m}/${k}/${M}`,(O||N)&&(H+="/"+Math.round(10*O)/10),N&&(H+=`/${Math.round(N)}`),this._hashName){const J=this._hashName;let K=!1;const ne=window.location.hash.slice(1).split("&").map(he=>{const ge=he.split("=")[0];return ge===J?(K=!0,`${ge}=${H}`):he}).filter(he=>he);return K||ne.push(`${J}=${H}`),`#${ne.join("&")}`}return`#${H}`}_isValidHash(n){if(n.length<3||n.some(isNaN))return!1;try{new o.V(+n[2],+n[1])}catch{return!1}const u=+n[0],m=+(n[3]||0),v=+(n[4]||0);return u>=this._map.getMinZoom()&&u<=this._map.getMaxZoom()&&m>=-180&&m<=180&&v>=this._map.getMinPitch()&&v<=this._map.getMaxPitch()}}const Gs={linearity:.3,easing:o.cw(0,0,.3,1)},op=o.e({deceleration:2500,maxSpeed:1400},Gs),Li=o.e({deceleration:20,maxSpeed:1400},Gs),Go=o.e({deceleration:1e3,maxSpeed:360},Gs),jd=o.e({deceleration:1e3,maxSpeed:90},Gs),_s=o.e({deceleration:1e3,maxSpeed:360},Gs);class ly{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:j(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,u=j();for(;n.length>0&&u-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)u.zoom+=S.zoomDelta||0,u.bearing+=S.bearingDelta||0,u.pitch+=S.pitchDelta||0,u.roll+=S.rollDelta||0,S.panDelta&&u.pan._add(S.panDelta),S.around&&(u.around=S.around),S.pinchAround&&(u.pinchAround=S.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(u.pan.mag()){const S=ca(u.pan.mag(),m,o.e({},op,n||{})),M=u.pan.mult(S.amount/u.pan.mag()),k=this._map.cameraHelper.handlePanInertia(M,this._map.transform);v.center=k.easingCenter,v.offset=k.easingOffset,xs(v,S)}if(u.zoom){const S=ca(u.zoom,m,Li),M=o.cx(this._map.transform.zoom+S.amount,this._map.getZoomSnap(),S.amount);v.zoom=M,xs(v,S)}if(u.bearing){const S=ca(u.bearing,m,Go);v.bearing=this._map.transform.bearing+o.an(S.amount,-179,179),xs(v,S)}if(u.pitch){const S=ca(u.pitch,m,jd);v.pitch=this._map.transform.pitch+S.amount,xs(v,S)}if(u.roll){const S=ca(u.roll,m,_s);v.roll=this._map.transform.roll+o.an(S.amount,-179,179),xs(v,S)}if(v.zoom||v.bearing){const S=u.pinchAround===void 0?u.around:u.pinchAround;v.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),o.e(v,{noMoveStart:!0})}}function xs(w,n){(!w.duration||w.duration<n.duration)&&(w.duration=n.duration,w.easing=n.easing)}function ca(w,n,u){const{maxSpeed:m,linearity:v,deceleration:S}=u,M=o.an(w*v/(n/1e3),-m,m),k=Math.abs(M)/(S*v);return{easing:u.easing,duration:1e3*k,amount:M*(k/2)}}class fi extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,u,m,v={}){m=m instanceof MouseEvent?m:new MouseEvent(n,m);const S=V.mousePos(u.getCanvas(),m),M=u.unproject(S);super(n,o.e({point:S,lngLat:M,originalEvent:m},v)),this._defaultPrevented=!1,this.target=u}}class zl extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,u,m){const v=n==="touchend"?m.changedTouches:m.touches,S=V.touchPos(u.getCanvasContainer(),v),M=S.map(O=>u.unproject(O)),k=S.reduce((O,N,H,J)=>O.add(N.div(J.length)),new o.P(0,0));super(n,{points:S,point:k,lngLats:M,lngLat:u.unproject(k),originalEvent:m}),this._defaultPrevented=!1}}class Fh extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,u,m){super(n,{originalEvent:m}),this._defaultPrevented=!1}}class bs{constructor(n,u){this._map=n,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new Fh(n.type,this._map,n))}mousedown(n,u){return this._mousedownPos=u,this._firePreventable(new fi(n.type,this._map,n))}mouseup(n){this._map.fire(new fi(n.type,this._map,n))}click(n,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new fi(n.type,this._map,n))}dblclick(n){return this._firePreventable(new fi(n.type,this._map,n))}mouseover(n){this._map.fire(new fi(n.type,this._map,n))}mouseout(n){this._map.fire(new fi(n.type,this._map,n))}touchstart(n){return this._firePreventable(new zl(n.type,this._map,n))}touchmove(n){this._map.fire(new zl(n.type,this._map,n))}touchend(n){this._map.fire(new zl(n.type,this._map,n))}touchcancel(n){this._map.fire(new zl(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ws{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new fi(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new fi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new fi(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ss{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.screenPointToLocation(o.P.convert(n),this._map.terrain)}}class qo{constructor(n,u){this._map=n,this._tr=new Ss(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,u){this.isEnabled()&&n.shiftKey&&n.button===0&&(V.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(n,u){if(!this._active)return;const m=u;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=m,this._box||(this._box=V.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const S=Math.min(v.x,m.x),M=Math.max(v.x,m.x),k=Math.min(v.y,m.y),O=Math.max(v.y,m.y);V.setTransform(this._box,`translate(${S}px,${k}px)`),this._box.style.width=M-S+"px",this._box.style.height=O-k+"px"}mouseupWindow(n,u){if(!this._active||n.button!==0)return;const m=this._startPos,v=u;if(this.reset(),V.suppressClick(),m.x!==v.x||m.y!==v.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:n})),{cameraAnimation:S=>S.fitScreenCoordinates(m,v,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(V.remove(this._box),this._box=null),V.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,u){return this._map.fire(new o.l(n,{originalEvent:u}))}}function Ui(w,n){if(w.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${n.length}`);const u={};for(let m=0;m<w.length;m++)u[w[m].identifier]=n[m];return u}class Gt{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,u,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),m.length===this.numTouches&&(this.centroid=function(v){const S=new o.P(0,0);for(const M of v)S._add(M);return S.div(v.length)}(u),this.touches=Ui(m,u)))}touchmove(n,u,m){if(this.aborted||!this.centroid)return;const v=Ui(m,u);for(const S in this.touches){const M=v[S];(!M||M.dist(this.touches[S])>30)&&(this.aborted=!0)}}touchend(n,u,m){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class Bh{constructor(n){this.singleTap=new Gt(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,u,m){this.singleTap.touchstart(n,u,m)}touchmove(n,u,m){this.singleTap.touchmove(n,u,m)}touchend(n,u,m){const v=this.singleTap.touchend(n,u,m);if(v){const S=n.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(v)<30;if(S&&M||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class $h{constructor(n){this._tr=new Ss(n),this._zoomIn=new Bh({numTouches:1,numTaps:2}),this._zoomOut=new Bh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,u,m){this._zoomIn.touchstart(n,u,m),this._zoomOut.touchstart(n,u,m)}touchmove(n,u,m){this._zoomIn.touchmove(n,u,m),this._zoomOut.touchmove(n,u,m)}touchend(n,u,m){const v=this._zoomIn.touchend(n,u,m),S=this._zoomOut.touchend(n,u,m),M=this._tr;return v?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:o.cx(M.zoom+1,k.getZoomSnap()),around:M.unproject(v)},{originalEvent:n})}):S?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:o.cx(M.zoom-1,k.getZoomSnap()),around:M.unproject(S)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ol{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const u=this._moveFunction(...n);if(u.bearingDelta||u.pitchDelta||u.rollDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(n,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=Array.isArray(u)?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,u){if(!this.isEnabled())return;const m=this._lastPoint;if(!m)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const v=Array.isArray(u)?u[0]:u;return!this._moved&&v.dist(m)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=v,this._move(m,v))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&V.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const ho=0,fo=2,Hn={[ho]:1,[fo]:2};class Do{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const u=V.mouseButton(n);this._eventButton=u}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!function(u,m){const v=Hn[m];return u.buttons===void 0||(u.buttons&v)!==v}(n,this._eventButton)}isValidEndEvent(n){return V.mouseButton(n)===this._eventButton}}class Nd{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}class sp{constructor(n=new Do({checkCorrectEvent:()=>!0}),u=new Nd){this.mouseMoveStateManager=n,this.oneFingerTouchMoveStateManager=u}_executeRelevantHandler(n,u,m){return n instanceof MouseEvent?u(n):typeof TouchEvent<"u"&&n instanceof TouchEvent?m(n):void 0}startMove(n){this._executeRelevantHandler(n,u=>this.mouseMoveStateManager.startMove(u),u=>this.oneFingerTouchMoveStateManager.startMove(u))}endMove(n){this._executeRelevantHandler(n,u=>this.mouseMoveStateManager.endMove(u),u=>this.oneFingerTouchMoveStateManager.endMove(u))}isValidStartEvent(n){return this._executeRelevantHandler(n,u=>this.mouseMoveStateManager.isValidStartEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidStartEvent(u))}isValidMoveEvent(n){return this._executeRelevantHandler(n,u=>this.mouseMoveStateManager.isValidMoveEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(u))}isValidEndEvent(n){return this._executeRelevantHandler(n,u=>this.mouseMoveStateManager.isValidEndEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidEndEvent(u))}}const Ll=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=n=>{n.preventDefault()}};class ap{constructor(n,u){this._clickTolerance=n.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(n){return n<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(n,u,m){return this._calculateTransform(n,u,m)}touchmove(n,u,m){if(this._active){if(!this._shouldBePrevented(m.length))return n.preventDefault(),this._calculateTransform(n,u,m);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",n)}}touchend(n,u,m){this._calculateTransform(n,u,m),this._active&&this._shouldBePrevented(m.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,u,m){m.length>0&&(this._active=!0);const v=Ui(m,u),S=new o.P(0,0),M=new o.P(0,0);let k=0;for(const N in v){const H=v[N],J=this._touches[N];J&&(S._add(H),M._add(H.sub(J)),k++,v[N]=H)}if(this._touches=v,this._shouldBePrevented(k)||!M.mag())return;const O=M.div(k);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(k),panDelta:O}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class jh{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,u,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([u[0],u[1]]))}touchmove(n,u,m){if(!this._firstTwoTouches)return;n.preventDefault();const[v,S]=this._firstTwoTouches,M=kc(m,u,v),k=kc(m,u,S);if(!M||!k)return;const O=this._aroundCenter?null:M.add(k).div(2);return this._move([M,k],O,n)}touchend(n,u,m){if(!this._firstTwoTouches)return;const[v,S]=this._firstTwoTouches,M=kc(m,u,v),k=kc(m,u,S);M&&k||(this._active&&V.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function kc(w,n,u){for(let m=0;m<w.length;m++)if(w[m].identifier===u)return n[m]}function lp(w,n){return Math.log(w/n)/Math.LN2}class Fl extends jh{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,u){const m=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(lp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:lp(this._distance,m),pinchAround:u}}}function Vd(w,n){return 180*w.angleWith(n)/Math.PI}class cp extends jh{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,u,m){const v=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Vd(this._vector,v),pinchAround:u}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const u=25/(Math.PI*this._minDiameter)*360,m=Vd(n,this._startVector);return Math.abs(m)<u}}function Ac(w){return Math.abs(w.y)>Math.abs(w.x)}class Nh extends jh{constructor(n){super(),this._currentTouchCount=0,this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,u,m){super.touchstart(n,u,m),this._currentTouchCount=m.length}_start(n){this._lastPoints=n,Ac(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,u,m){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const v=n[0].sub(this._lastPoints[0]),S=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,S,m.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(v.y+S.y)/2*-.5}):void 0}gestureBeginsVertically(n,u,m){if(this._valid!==void 0)return this._valid;const v=n.mag()>=2,S=u.mag()>=2;if(!v&&!S)return;if(!v||!S)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;const M=n.y>0==u.y>0;return Ac(n)&&Ac(u)&&M}}const Ua={panStep:100,bearingStep:15,pitchStep:10};class Sn{constructor(n){this._tr=new Ss(n);const u=Ua;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let u=0,m=0,v=0,S=0,M=0;switch(n.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:n.shiftKey?m=-1:(n.preventDefault(),S=-1);break;case 39:n.shiftKey?m=1:(n.preventDefault(),S=1);break;case 38:n.shiftKey?v=1:(n.preventDefault(),M=-1);break;case 40:n.shiftKey?v=-1:(n.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(m=0,v=0),{cameraAnimation:k=>{const O=this._tr;k.easeTo({duration:300,easeId:"keyboardHandler",easing:Pu,zoom:u?o.cx(O.zoom+u*(n.shiftKey?2:1),k.getZoomSnap()):O.zoom,bearing:O.bearing+m*this._bearingStep,pitch:O.pitch+v*this._pitchStep,offset:[-S*this._panStep,-M*this._panStep],center:O.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Pu(w){return w*(2-w)}const Eu=4.000244140625,Rc=1/450;class Dc{constructor(n,u){this._onTimeout=m=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},this._map=n,this._tr=new Ss(n),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Rc}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(n){return!!this._map.cooperativeGestures.isEnabled()&&!(n.ctrlKey||this._map.cooperativeGestures.isBypassed(n))}wheel(n){if(!this.isEnabled())return;if(this._shouldBePrevented(n))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",n);let u=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const m=j(),v=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,u!==0&&u%Eu==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(v*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),n.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=n,this._delta-=u,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=V.mousePos(this._map.getCanvas(),n),m=this._tr;this._aroundPoint=this._aroundCenter?m.transform.locationToScreenPoint(o.V.convert(m.center)):u,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const k=n.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=k),typeof this._targetZoom=="number"&&(this._targetZoom+=k)}if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>Eu?this._wheelZoomRate:this._defaultZoomRate;let O=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&O!==0&&(O=1/O);const N=typeof this._targetZoom!="number"?n.scale:o.aq(this._targetZoom),H=n.applyConstrain(n.getCameraLngLat(),o.at(N*O)).zoom,J=this._map.getZoomSnap();if(this._type==="wheel"&&J>0){const K=o.cx(n.zoom,J);this._targetZoom=o.cx(H,J,H-K)}else this._targetZoom=H;this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom!="number"?n.zoom:this._targetZoom,m=this._startZoom,v=this._easing;let S,M=!1;if(this._type==="wheel"&&m&&v){const k=j()-this._lastWheelEventTime,O=Math.min((k+5)/200,1),N=v(O);S=o.G.number(m,u,N),O<1?this._frameId||(this._frameId=!0):M=!0}else S=u,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=S,{noInertia:!0,needsRenderFrame:!M,zoomDelta:S-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let u=o.cz;if(this._prevEase){const m=this._prevEase,v=(j()-m.start)/m.duration,S=m.easing(v+.01)-m.easing(v),M=.27/Math.sqrt(S*S+1e-4)*.01,k=Math.sqrt(.0729-M*M);u=o.cw(M,k,.25,1)}return this._prevEase={start:j(),duration:n,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Bl{constructor(n,u){this._clickZoom=n,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ud{constructor(n){this._tr=new Ss(n),this.reset()}reset(){this._active=!1}dblclick(n,u){return n.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:o.cx(this._tr.zoom+(n.shiftKey?-1:1),m.getZoomSnap()),around:this._tr.unproject(u)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gd{constructor(){this._tap=new Bh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,u,m){if(!this._swipePoint)if(this._tapTime){const v=u[0],S=n.timeStamp-this._tapTime<500,M=this._tapPoint.dist(v)<30;S&&M?m.length>0&&(this._swipePoint=v,this._swipeTouch=m[0].identifier):this.reset()}else this._tap.touchstart(n,u,m)}touchmove(n,u,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const v=u[0],S=v.y-this._swipePoint.y;return this._swipePoint=v,n.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(n,u,m)}touchend(n,u,m){if(this._tapTime)this._swipePoint&&m.length===0&&this.reset();else{const v=this._tap.touchend(n,u,m);v&&(this._tapTime=n.timeStamp,this._tapPoint=v)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qd{constructor(n,u,m){this._el=n,this._mousePan=u,this._touchPan=m}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class as{constructor(n,u,m,v){this._pitchWithRotate=n.pitchWithRotate,this._rollEnabled=n.rollEnabled,this._mouseRotate=u,this._mousePitch=m,this._mouseRoll=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class ua{constructor(n,u,m,v){this._el=n,this._touchZoom=u,this._touchRotate=m,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Wt{constructor(n,u){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=n,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const n=this._map.getCanvasContainer();n.classList.add("maplibregl-cooperative-gestures"),this._container=V.create("div","maplibregl-cooperative-gesture-screen",n);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const m=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),v=document.createElement("div");v.className="maplibregl-desktop-message",v.textContent=u,this._container.appendChild(v);const S=document.createElement("div");S.className="maplibregl-mobile-message",S.textContent=m,this._container.appendChild(S),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(V.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(n){return n[this._bypassKey]}notifyGestureBlocked(n,u){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:n,originalEvent:u})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const cr=w=>w.zoom||w.drag||w.roll||w.pitch||w.rotate;class zc extends o.l{}function Vh(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta||w.rollDelta}class Cs{get _ownerDocument(){var n;return((n=this._el)===null||n===void 0?void 0:n.ownerDocument)||document}get _ownerWindow(){var n,u;return((u=(n=this._el)===null||n===void 0?void 0:n.ownerDocument)===null||u===void 0?void 0:u.defaultView)||window}constructor(n,u){this.handleWindowEvent=v=>{this.handleEvent(v,`${v.type}Window`)},this.handleEvent=(v,S)=>{if(v.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const M=v.type==="renderFrame"?void 0:v,k={needsRenderFrame:!1},O={},N={};for(const{handlerName:K,handler:ne,allowed:he}of this._handlers){if(!ne.isEnabled())continue;let ge;if(this._blockedByActive(N,he,K))ne.reset();else if(ne[S||v.type]){if(o.cA(v,S||v.type)){const xe=V.mousePos(this._map.getCanvas(),v);ge=ne[S||v.type](v,xe)}else if(o.cB(v,S||v.type)){const xe=this._getMapTouches(v.touches),_e=V.touchPos(this._map.getCanvas(),xe);ge=ne[S||v.type](v,_e,xe)}else o.cC(S||v.type)||(ge=ne[S||v.type](v));this.mergeHandlerResult(k,O,ge,K,M),ge&&ge.needsRenderFrame&&this._triggerRenderFrame()}(ge||ne.isActive())&&(N[K]=ne)}const H={};for(const K in this._previousActiveHandlers)N[K]||(H[K]=M);this._previousActiveHandlers=N,(Object.keys(H).length||Vh(k))&&(this._changes.push([k,O,H]),this._triggerRenderFrame()),(Object.keys(N).length||Vh(k))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:J}=k;J&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],J(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ly(n),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[this._ownerDocument,"mousemove",{capture:!0}],[this._ownerDocument,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[this._ownerWindow,"blur",void 0]];for(const[v,S,M]of this._listeners)V.addEventListener(v,S,v===this._ownerDocument?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(const[n,u,m]of this._listeners)V.removeEventListener(n,u,n===this._ownerDocument?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(n){const u=this._map,m=u.getCanvasContainer();this._add("mapEvent",new bs(u,n));const v=u.boxZoom=new qo(u,n);this._add("boxZoom",v),n.interactive&&n.boxZoom&&v.enable();const S=u.cooperativeGestures=new Wt(u,n.cooperativeGestures);this._add("cooperativeGestures",S),n.cooperativeGestures&&S.enable();const M=new $h(u),k=new Ud(u);u.doubleClickZoom=new Bl(k,M),this._add("tapZoom",M),this._add("clickZoom",k),n.interactive&&n.doubleClickZoom&&u.doubleClickZoom.enable();const O=new Gd;this._add("tapDragZoom",O);const N=u.touchPitch=new Nh(u);this._add("touchPitch",N),n.interactive&&n.touchPitch&&u.touchPitch.enable(n.touchPitch);const H=()=>u.project(u.getCenter()),J=function({enable:Pe,clickTolerance:ze,aroundCenter:$e=!0,minPixelCenterThreshold:Re=100,rotateDegreesPerPixelMoved:We=.8},dt){const at=new Do({checkCorrectEvent:lt=>V.mouseButton(lt)===0&&lt.ctrlKey||V.mouseButton(lt)===2&&!lt.ctrlKey});return new Ol({clickTolerance:ze,move:(lt,ct)=>{const Dt=dt();if($e&&Math.abs(Dt.y-lt.y)>Re)return{bearingDelta:o.cy(new o.P(lt.x,ct.y),ct,Dt)};let zt=(ct.x-lt.x)*We;return $e&&ct.y<Dt.y&&(zt=-zt),{bearingDelta:zt}},moveStateManager:at,enable:Pe,assignEvents:Ll})}(n,H),K=function({enable:Pe,clickTolerance:ze,pitchDegreesPerPixelMoved:$e=-.5}){const Re=new Do({checkCorrectEvent:We=>V.mouseButton(We)===0&&We.ctrlKey||V.mouseButton(We)===2});return new Ol({clickTolerance:ze,move:(We,dt)=>({pitchDelta:(dt.y-We.y)*$e}),moveStateManager:Re,enable:Pe,assignEvents:Ll})}(n),ne=function({enable:Pe,clickTolerance:ze,rollDegreesPerPixelMoved:$e=.3},Re){const We=new Do({checkCorrectEvent:dt=>V.mouseButton(dt)===2&&dt.ctrlKey});return new Ol({clickTolerance:ze,move:(dt,at)=>{const lt=Re();let ct=(at.x-dt.x)*$e;return at.y<lt.y&&(ct=-ct),{rollDelta:ct}},moveStateManager:We,enable:Pe,assignEvents:Ll})}(n,H);u.dragRotate=new as(n,J,K,ne),this._add("mouseRotate",J,["mousePitch"]),this._add("mousePitch",K,["mouseRotate","mouseRoll"]),this._add("mouseRoll",ne,["mousePitch"]),n.interactive&&n.dragRotate&&u.dragRotate.enable();const he=function({enable:Pe,clickTolerance:ze}){const $e=new Do({checkCorrectEvent:Re=>V.mouseButton(Re)===0&&!Re.ctrlKey});return new Ol({clickTolerance:ze,move:(Re,We)=>({around:We,panDelta:We.sub(Re)}),activateOnStart:!0,moveStateManager:$e,enable:Pe,assignEvents:Ll})}(n),ge=new ap(n,u);u.dragPan=new qd(m,he,ge),this._add("mousePan",he),this._add("touchPan",ge,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&u.dragPan.enable(n.dragPan);const xe=new cp,_e=new Fl;u.touchZoomRotate=new ua(m,_e,xe,O),this._add("touchRotate",xe,["touchPan","touchZoom"]),this._add("touchZoom",_e,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&u.touchZoomRotate.enable(n.touchZoomRotate),this._add("blockableMapEvent",new ws(u));const Me=u.scrollZoom=new Dc(u,()=>this._triggerRenderFrame());this._add("scrollZoom",Me,["mousePan"]),n.interactive&&n.scrollZoom&&u.scrollZoom.enable(n.scrollZoom);const Oe=u.keyboard=new Sn(u);this._add("keyboard",Oe),n.interactive&&n.keyboard&&u.keyboard.enable()}_add(n,u,m){this._handlers.push({handlerName:n,handler:u,allowed:m}),this._handlersById[n]=u}stop(n){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!cr(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,u,m){for(const v in n)if(v!==m&&(!u||u.indexOf(v)<0))return!0;return!1}_getMapTouches(n){const u=[];for(const m of n)this._el.contains(m.target)&&u.push(m);return u}mergeHandlerResult(n,u,m,v,S){if(!m)return;o.e(n,m);const M={handlerName:v,originalEvent:m.originalEvent||S};m.zoomDelta!==void 0&&(u.zoom=M),m.panDelta!==void 0&&(u.drag=M),m.rollDelta!==void 0&&(u.roll=M),m.pitchDelta!==void 0&&(u.pitch=M),m.bearingDelta!==void 0&&(u.rotate=M)}_applyChanges(){const n={},u={},m={};for(const[v,S,M]of this._changes)v.panDelta&&(n.panDelta=(n.panDelta||new o.P(0,0))._add(v.panDelta)),v.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+v.pitchDelta),v.rollDelta&&(n.rollDelta=(n.rollDelta||0)+v.rollDelta),v.around!==void 0&&(n.around=v.around),v.pinchAround!==void 0&&(n.pinchAround=v.pinchAround),v.noInertia&&(n.noInertia=v.noInertia),o.e(u,S),o.e(m,M);this._updateMapTransform(n,u,m),this._changes=[]}_updateMapTransform(n,u,m){const v=this._map,S=v._getTransformForUpdate(),M=v.terrain;if(!(Vh(n)||M&&this._terrainMovement))return this._fireEvents(u,m,!0);v._stop(!0);let{panDelta:k,zoomDelta:O,bearingDelta:N,pitchDelta:H,rollDelta:J,around:K,pinchAround:ne}=n;ne!==void 0&&(K=ne),K=K||v.transform.centerPoint,M&&!S.isPointOnMapSurface(K)&&(K=S.centerPoint);const he={panDelta:k,zoomDelta:O,rollDelta:J,pitchDelta:H,bearingDelta:N,around:K};this._map.cameraHelper.useGlobeControls&&!S.isPointOnMapSurface(K)&&(K=S.centerPoint);const ge=K.distSqr(S.centerPoint)<.01?S.center:S.screenPointToLocation(k?K.sub(k):K);this._handleMapControls({terrain:M,tr:S,deltasForHelper:he,preZoomAroundLoc:ge,combinedEventsInProgress:u,panDelta:k}),v._applyUpdatedTransform(S),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(u,m,!0)}_handleMapControls({terrain:n,tr:u,deltasForHelper:m,preZoomAroundLoc:v,combinedEventsInProgress:S,panDelta:M}){const k=this._map.cameraHelper;if(k.handleMapControlsRollPitchBearingZoom(m,u),n)return k.useGlobeControls?(this._terrainMovement||!S.drag&&!S.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void k.handleMapControlsPan(m,u,v)):this._terrainMovement||!S.drag&&!S.zoom?void(S.drag&&this._terrainMovement&&M?u.setCenter(u.screenPointToLocation(u.centerPoint.sub(M))):k.handleMapControlsPan(m,u,v)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void k.handleMapControlsPan(m,u,v));k.handleMapControlsPan(m,u,v)}_fireEvents(n,u,m){const v=cr(this._eventsInProgress),S=cr(n),M={};for(const J in n){const{originalEvent:K}=n[J];this._eventsInProgress[J]||(M[`${J}start`]=K),this._eventsInProgress[J]=n[J]}!v&&S&&this._fireEvent("movestart",S.originalEvent);for(const J in M)this._fireEvent(J,M[J]);S&&this._fireEvent("move",S.originalEvent);for(const J in n){const{originalEvent:K}=n[J];this._fireEvent(J,K)}const k={};let O;for(const J in this._eventsInProgress){const{handlerName:K,originalEvent:ne}=this._eventsInProgress[J];this._handlersById[K].isActive()||(delete this._eventsInProgress[J],O=u[K]||ne,k[`${J}end`]=O)}for(const J in k)this._fireEvent(J,k[J]);const N=cr(this._eventsInProgress),H=(v||S)&&!N;if(H&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const J=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&J.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(J)}if(m&&H){this._updatingCamera=!0;const J=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),K=ne=>ne!==0&&-this._bearingSnap<ne&&ne<this._bearingSnap;!J||!J.essential&&$.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:O})),K(this._map.getBearing())&&this._map.resetNorth()):(K(J.bearing||this._map.getBearing())&&(J.bearing=0),J.freezeElevation=!0,this._map.easeTo(J,{originalEvent:O})),this._updatingCamera=!1}}_fireEvent(n,u){this._map.fire(new o.l(n,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new zc("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class wi extends o.E{constructor(n,u,m){super(),this._renderFrameCallback=()=>{const v=Math.min((j()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=m.bearingSnap,this._zoomSnap=m.zoomSnap,this.cameraHelper=u,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(n,u){n.apply(this.transform,!0),this.transform=n,this.cameraHelper=u}getCenter(){return new o.V(this.transform.center.lng,this.transform.center.lat)}setCenter(n,u){return this.jumpTo({center:n},u)}getCenterElevation(){return this.transform.elevation}setCenterElevation(n,u){return this.jumpTo({elevation:n},u),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(n){this._centerClampedToGround=n}panBy(n,u,m){return n=o.P.convert(n).mult(-1),this.panTo(this.transform.center,o.e({offset:n},u),m)}panTo(n,u,m){return this.easeTo(o.e({center:n},u),m)}getZoom(){return this.transform.zoom}setZoom(n,u){return this.jumpTo({zoom:n},u),this}zoomTo(n,u,m){return this.easeTo(o.e({zoom:n},u),m)}zoomIn(n,u){return this.zoomTo(o.cx(this.getZoom()+1,this._zoomSnap),n,u),this}zoomOut(n,u){return this.zoomTo(o.cx(this.getZoom()-1,this._zoomSnap),n,u),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(n,u){return n!=this.transform.fov&&(this.transform.setFov(n),this.fire(new o.l("movestart",u)).fire(new o.l("move",u)).fire(new o.l("moveend",u))),this}getBearing(){return this.transform.bearing}setZoomSnap(n){return this._zoomSnap=n,this}getZoomSnap(){return this._zoomSnap}setBearing(n,u){return this.jumpTo({bearing:n},u),this}getPadding(){return this.transform.padding}setPadding(n,u){return this.jumpTo({padding:n},u),this}rotateTo(n,u,m){return this.easeTo(o.e({bearing:n},u),m)}resetNorth(n,u){return this.rotateTo(0,o.e({duration:1e3},n),u),this}resetNorthPitch(n,u){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},n),u),this}snapToNorth(n,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,u):this}getPitch(){return this.transform.pitch}setPitch(n,u){return this.jumpTo({pitch:n},u),this}getRoll(){return this.transform.roll}setRoll(n,u){return this.jumpTo({roll:n},u),this}cameraForBounds(n,u){n=pr.convert(n).adjustAntiMeridian();const m=u&&u.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),m,u)}_cameraForBoxAndBearing(n,u,m,v){const S={top:0,bottom:0,right:0,left:0};if(typeof(v=o.e({padding:S,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){const N=v.padding;v.padding={top:N,bottom:N,right:N,left:N}}const M=o.e(S,v.padding);v.padding=M;const k=this.transform,O=new pr(n,u);return this.cameraHelper.cameraForBoxAndBearing(v,M,O,m,k)}fitBounds(n,u,m){return this._fitInternal(this.cameraForBounds(n,u),u,m)}fitScreenCoordinates(n,u,m,v,S){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(n)),this.transform.screenPointToLocation(o.P.convert(u)),m,v),v,S)}_fitInternal(n,u,m){return n?(delete(u=o.e(n,u)).padding,u.linear?this.easeTo(u,m):this.flyTo(u,m)):this}jumpTo(n,u){this.stop();const m=this._getTransformForUpdate();let v=!1,S=!1,M=!1;const k=m.zoom;this.cameraHelper.handleJumpToCenterZoom(m,n);const O=m.zoom!==k;return"elevation"in n&&m.elevation!==+n.elevation&&m.setElevation(+n.elevation),"bearing"in n&&m.bearing!==+n.bearing&&(v=!0,m.setBearing(+n.bearing)),"pitch"in n&&m.pitch!==+n.pitch&&(S=!0,m.setPitch(+n.pitch)),"roll"in n&&m.roll!==+n.roll&&(M=!0,m.setRoll(+n.roll)),n.padding==null||m.isPaddingEqual(n.padding)||m.setPadding(n.padding),this._applyUpdatedTransform(m),this.fire(new o.l("movestart",u)).fire(new o.l("move",u)),O&&this.fire(new o.l("zoomstart",u)).fire(new o.l("zoom",u)).fire(new o.l("zoomend",u)),v&&this.fire(new o.l("rotatestart",u)).fire(new o.l("rotate",u)).fire(new o.l("rotateend",u)),S&&this.fire(new o.l("pitchstart",u)).fire(new o.l("pitch",u)).fire(new o.l("pitchend",u)),M&&this.fire(new o.l("rollstart",u)).fire(new o.l("roll",u)).fire(new o.l("rollend",u)),this.fire(new o.l("moveend",u))}calculateCameraOptionsFromTo(n,u,m,v=0){const S=o.a9.fromLngLat(n,u),M=o.a9.fromLngLat(m,v),k=M.x-S.x,O=M.y-S.y,N=M.z-S.z,H=Math.hypot(k,O,N);if(H===0)throw new Error("Can't calculate camera options with same From and To");const J=Math.hypot(k,O),K=o.at(this.transform.cameraToCenterDistance/H/this.transform.tileSize),ne=180*Math.atan2(k,-O)/Math.PI;let he=180*Math.acos(J/H)/Math.PI;return he=N<0?90-he:90+he,{center:M.toLngLat(),elevation:v,zoom:K,pitch:he,bearing:ne}}calculateCameraOptionsFromCameraLngLatAltRotation(n,u,m,v,S){const M=this.transform.calculateCenterFromCameraLngLatAlt(n,u,m,v);return{center:M.center,elevation:M.elevation,zoom:M.zoom,bearing:m,pitch:v,roll:S}}easeTo(n,u){this._stop(!1,n.easeId),((n=o.e({offset:[0,0],duration:500,easing:o.cz},n)).animate===!1||!n.essential&&$.prefersReducedMotion)&&(n.duration=0);const m=this._getTransformForUpdate(),v=this.getBearing(),S=m.pitch,M=m.roll,k="bearing"in n?this._normalizeBearing(n.bearing,v):v,O="pitch"in n?+n.pitch:S,N="roll"in n?this._normalizeBearing(n.roll,M):M,H="padding"in n?n.padding:m.padding,J=o.P.convert(n.offset);let K,ne;n.around&&(K=o.V.convert(n.around),ne=m.locationToScreenPoint(K));const he={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ge=this.cameraHelper.handleEaseTo(m,{bearing:k,pitch:O,roll:N,padding:H,around:K,aroundPoint:ne,offsetAsPoint:J,offset:n.offset,zoom:n.zoom,center:n.center});return this._rotating=this._rotating||v!==k,this._pitching=this._pitching||O!==S,this._rolling=this._rolling||N!==M,this._padding=!m.isPaddingEqual(H),this._zooming=this._zooming||ge.isZooming,this._easeId=n.easeId,this._prepareEase(u,n.noMoveStart,he),this.terrain&&this._prepareElevation(ge.elevationCenter),this._ease(xe=>{ge.easeFunc(xe),this.terrain&&!n.freezeElevation&&this._updateElevation(xe),this._applyUpdatedTransform(m),this._fireMoveEvents(u)},xe=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(u,xe)},n),this}_prepareEase(n,u,m={}){this._moving=!0,u||m.moving||this.fire(new o.l("movestart",n)),this._zooming&&!m.zooming&&this.fire(new o.l("zoomstart",n)),this._rotating&&!m.rotating&&this.fire(new o.l("rotatestart",n)),this._pitching&&!m.pitching&&this.fire(new o.l("pitchstart",n)),this._rolling&&!m.rolling&&this.fire(new o.l("rollstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&u!==this._elevationTarget){const m=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(m-(u-(m*n+this._elevationStart))/(1-n)),this._elevationTarget=u}this.transform.setElevation(o.G.number(this._elevationStart,this._elevationTarget,n))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(n){if(!this.terrain&&n.elevation>=0&&n.pitch<=90)return{};const u=n.getCameraLngLat(),m=n.getCameraAltitude(),v=this.terrain?this.terrain.getElevationForLngLatZoom(u,n.zoom):0;if(m<v){const S=this.calculateCameraOptionsFromTo(u,v,n.center,n.elevation);return{pitch:S.pitch,zoom:S.zoom}}return{}}_applyUpdatedTransform(n){const u=[];if(u.push(v=>this._elevateCameraIfInsideTerrain(v)),this.transformCameraUpdate&&u.push(v=>this.transformCameraUpdate(v)),!u.length)return;const m=n.clone();for(const v of u){const S=m.clone(),{center:M,zoom:k,roll:O,pitch:N,bearing:H,elevation:J}=v(S);M&&S.setCenter(M),J!==void 0&&S.setElevation(J),k!==void 0&&S.setZoom(k),O!==void 0&&S.setRoll(O),N!==void 0&&S.setPitch(N),H!==void 0&&S.setBearing(H),m.apply(S,!1)}this.transform.apply(m,!1)}_fireMoveEvents(n){this.fire(new o.l("move",n)),this._zooming&&this.fire(new o.l("zoom",n)),this._rotating&&this.fire(new o.l("rotate",n)),this._pitching&&this.fire(new o.l("pitch",n)),this._rolling&&this.fire(new o.l("roll",n))}_afterEase(n,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const m=this._zooming,v=this._rotating,S=this._pitching,M=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,m&&this.fire(new o.l("zoomend",n)),v&&this.fire(new o.l("rotateend",n)),S&&this.fire(new o.l("pitchend",n)),M&&this.fire(new o.l("rollend",n)),this.fire(new o.l("moveend",n))}flyTo(n,u){if(!n.essential&&$.prefersReducedMotion){const ct=o.U(n,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(ct,u)}this.stop(),n=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.cz},n);const m=this._getTransformForUpdate(),v=m.bearing,S=m.pitch,M=m.roll,k=m.padding,O="bearing"in n?this._normalizeBearing(n.bearing,v):v,N="pitch"in n?+n.pitch:S,H="roll"in n?this._normalizeBearing(n.roll,M):M,J="padding"in n?n.padding:m.padding,K=o.P.convert(n.offset);let ne=m.centerPoint.add(K);const he=m.screenPointToLocation(ne),ge=this.cameraHelper.handleFlyTo(m,{bearing:O,pitch:N,roll:H,padding:J,locationAtOffset:he,offsetAsPoint:K,center:n.center,minZoom:n.minZoom,zoom:n.zoom});let xe=n.curve;const _e=Math.max(m.width,m.height),Me=_e/ge.scaleOfZoom,Oe=ge.pixelPathLength;typeof ge.scaleOfMinZoom=="number"&&(xe=Math.sqrt(_e/ge.scaleOfMinZoom/Oe*2));const Pe=xe*xe;function ze(ct){const Dt=(Me*Me-_e*_e+(ct?-1:1)*Pe*Pe*Oe*Oe)/(2*(ct?Me:_e)*Pe*Oe);return Math.log(Math.sqrt(Dt*Dt+1)-Dt)}function $e(ct){return(Math.exp(ct)-Math.exp(-ct))/2}function Re(ct){return(Math.exp(ct)+Math.exp(-ct))/2}const We=ze(!1);let dt=function(ct){return Re(We)/Re(We+xe*ct)},at=function(ct){return _e*((Re(We)*($e(Dt=We+xe*ct)/Re(Dt))-$e(We))/Pe)/Oe;var Dt},lt=(ze(!0)-We)/xe;if(Math.abs(Oe)<2e-6||!isFinite(lt)){if(Math.abs(_e-Me)<1e-6)return this.easeTo(n,u);const ct=Me<_e?-1:1;lt=Math.abs(Math.log(Me/_e))/xe,at=()=>0,dt=Dt=>Math.exp(ct*xe*Dt)}return n.duration="duration"in n?+n.duration:1e3*lt/("screenSpeed"in n?+n.screenSpeed/xe:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=v!==O,this._pitching=N!==S,this._rolling=H!==M,this._padding=!m.isPaddingEqual(J),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(ge.targetCenter),this._ease(ct=>{const Dt=ct*lt,zt=1/dt(Dt),Pt=at(Dt);this._rotating&&m.setBearing(o.G.number(v,O,ct)),this._pitching&&m.setPitch(o.G.number(S,N,ct)),this._rolling&&m.setRoll(o.G.number(M,H,ct)),this._padding&&(m.interpolatePadding(k,J,ct),ne=m.centerPoint.add(K)),ge.easeFunc(ct,zt,Pt,ne),this.terrain&&!n.freezeElevation&&this._updateElevation(ct),this._applyUpdatedTransform(m),this._fireMoveEvents(u)},()=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(u)},n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,u){var m;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,u)}return n||(m=this.handlers)===null||m===void 0||m.stop(!1),this}_ease(n,u,m){m.animate===!1||m.duration===0?(n(1),u()):(this._easeStart=j(),this._easeOptions=m,this._onEaseFrame=n,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,u){n=o.W(n,-180,180);const m=Math.abs(n-u);return Math.abs(n-360-u)<m&&(n-=360),Math.abs(n+360-u)<m&&(n+=360),n}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLat(o.V.convert(n),this.transform):null}}const Ho={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Hd{constructor(n=Ho){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options.compact,this._container=V.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=V.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=V.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){V.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,u){const m=this._map._getUIString(`AttributionControl.${u}`);n.title=m,n.setAttribute("aria-label",m)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(v=>typeof v!="string"?"":v)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const u=this._map.style.tileManagers;for(const v in u){const S=u[v];if(S.used||S.usedForTerrain){const M=S.getSource();M.attribution&&n.indexOf(M.attribution)<0&&n.push(M.attribution)}}n=n.filter(v=>String(v).trim()),n.sort((v,S)=>v.length-S.length),n=n.filter((v,S)=>{for(let M=S+1;M<n.length;M++)if(n[M].indexOf(v)>=0)return!1;return!0});const m=n.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,n.length?(this._innerContainer.innerHTML=V.sanitize(m),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ha{constructor(n={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const m=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&m.classList.add("maplibregl-compact"):m.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=V.create("div","maplibregl-ctrl");const u=V.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){V.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class $l{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const u=++this._id;return this._queue.push({callback:n,id:u,cancelled:!1}),u}remove(n){const u=this._currentlyRunning,m=u?this._queue.concat(u):this._queue;for(const v of m)if(v.id===n)return void(v.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const m of u)if(!m.cancelled&&(m.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Wd=o.aU([{name:"a_pos3d",type:"Int16",components:3}]);class Iu extends o.E{constructor(n){super(),this._lastTilesetChange=j(),this.tileManager=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=n._source.tileSize*2**this.deltaZoom,n.usedForTerrain=!0,n.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(n,u){this.tileManager.update(n,u),this._renderableTilesKeys=[];const m={};for(const v of kr(n,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u,calculateTileZoom:this.tileManager._source.calculateTileZoom}))m[v.key]=!0,this._renderableTilesKeys.push(v.key),this._tiles[v.key]||(v.terrainRttPosMatrix32f=new Float64Array(16),o.c7(v.terrainRttPosMatrix32f,0,o.a5,o.a5,0,0,1),this._tiles[v.key]=new Be(v,this.tileSize),this._lastTilesetChange=j());for(const v in this._tiles)m[v]||delete this._tiles[v]}freeRtt(n){for(const u in this._tiles){const m=this._tiles[u];(!n||m.tileID.equals(n)||m.tileID.isChildOf(n)||n.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n,u){return u?this._getTerrainCoordsForTileRanges(n,u):this._getTerrainCoordsForRegularTile(n)}_getTerrainCoordsForRegularTile(n){const u={};for(const m of this._renderableTilesKeys){const v=this._tiles[m].tileID,S=n.clone(),M=o.bk();if(v.canonical.equals(n.canonical))o.c7(M,0,o.a5,o.a5,0,0,1);else if(v.canonical.isChildOf(n.canonical)){const k=v.canonical.z-n.canonical.z,O=v.canonical.x-(v.canonical.x>>k<<k),N=v.canonical.y-(v.canonical.y>>k<<k),H=o.a5>>k;o.c7(M,0,H,H,0,0,1),o.O(M,M,[-O*H,-N*H,0])}else{if(!n.canonical.isChildOf(v.canonical))continue;{const k=n.canonical.z-v.canonical.z,O=n.canonical.x-(n.canonical.x>>k<<k),N=n.canonical.y-(n.canonical.y>>k<<k),H=o.a5>>k;o.c7(M,0,o.a5,o.a5,0,0,1),o.O(M,M,[O*H,N*H,0]),o.Q(M,M,[1/2**k,1/2**k,0])}}S.terrainRttPosMatrix32f=new Float32Array(M),u[m]=S}return u}_getTerrainCoordsForTileRanges(n,u){const m={};for(const v of this._renderableTilesKeys){const S=this._tiles[v].tileID;if(!this._isWithinTileRanges(S,u))continue;const M=n.clone(),k=o.bk();if(S.canonical.z===n.canonical.z){const O=n.canonical.x-S.canonical.x+n.wrap*(1<<n.canonical.z),N=n.canonical.y-S.canonical.y;o.c7(k,0,o.a5,o.a5,0,0,1),o.O(k,k,[O*o.a5,N*o.a5,0])}else if(S.canonical.z>n.canonical.z){const O=S.canonical.z-n.canonical.z,N=S.canonical.x-(S.canonical.x>>O<<O)+n.wrap*(1<<S.canonical.z),H=S.canonical.y-(S.canonical.y>>O<<O),J=n.canonical.x-(S.canonical.x>>O),K=n.canonical.y-(S.canonical.y>>O),ne=o.a5>>O;o.c7(k,0,ne,ne,0,0,1),o.O(k,k,[-N*ne+J*o.a5,-H*ne+K*o.a5,0])}else{const O=n.canonical.z-S.canonical.z,N=n.canonical.x-(n.canonical.x>>O<<O)+n.wrap*(1<<n.canonical.z),H=n.canonical.y-(n.canonical.y>>O<<O),J=(n.canonical.x>>O)-S.canonical.x,K=(n.canonical.y>>O)-S.canonical.y,ne=o.a5<<O;o.c7(k,0,ne,ne,0,0,1),o.O(k,k,[N*o.a5+J*ne,H*o.a5+K*ne,0])}M.terrainRttPosMatrix32f=new Float32Array(k),m[v]=M}return m}getSourceTile(n,u){const m=this.tileManager._source;let v=n.overscaledZ-this.deltaZoom;if(v>m.maxzoom&&(v=m.maxzoom),v<m.minzoom)return;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(v).key);let S=this.findTileInCaches(this._sourceTileCache[n.key]);if(!S?.dem&&u)for(;v>=m.minzoom&&!S?.dem;)S=this.findTileInCaches(n.scaledTo(v--).key);return S}findTileInCaches(n){let u=this.tileManager.getTileByID(n);return u||(u=this.tileManager._outOfViewCache.getByKey(n),u)}anyTilesAfterTime(n=Date.now()){return this._lastTilesetChange>=n}_isWithinTileRanges(n,u){const m=u[n.canonical.z];return!!m&&(n.wrap>m.minWrap||n.wrap<m.maxWrap||n.canonical.x>=m.minTileXWrapped&&n.canonical.x<=m.maxTileXWrapped&&n.canonical.y>=m.minTileY&&n.canonical.y<=m.maxTileY)}}class Fn{constructor(n,u,m){this._meshCache={},this.painter=n,this.tileManager=new Iu(u),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,u,m,v=o.a5){var S;const M=n.normalizeCoordinates(u,m,v);if(!M)return 0;const k=this.getTerrainData(M.tileID),O=(S=k.tile)===null||S===void 0?void 0:S.dem;if(!O)return 0;const N=o.cD([],[M.x/v*o.a5,M.y/v*o.a5],k.u_terrain_matrix),H=[N[0]*O.dim,N[1]*O.dim],J=Math.floor(H[0]),K=Math.floor(H[1]),ne=H[0]-J,he=H[1]-K;return O.get(J,K)*(1-ne)*(1-he)+O.get(J+1,K)*ne*(1-he)+O.get(J,K+1)*(1-ne)*he+O.get(J+1,K+1)*ne*he}getElevationForLngLatZoom(n,u){if(!o.cE(u,n.wrap()))return 0;const{tileID:m,mercatorX:v,mercatorY:S}=this._getOverscaledTileIDFromLngLatZoom(n,u);return this.getElevation(m,v%o.a5,S%o.a5,o.a5)}getElevationForLngLat(n,u){const m=kr(u,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let v=0;for(const S of m)S.canonical.z>v&&(v=Math.min(S.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(n,v)}getElevation(n,u,m,v=o.a5){return this.getDEMElevation(n,u,m,v)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const v=this.painter.context,S=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new o.T(v,S,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new o.T(v,new o.R({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ar([])}const u=this.tileManager.getSourceTile(n,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const v=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new o.T(v,u.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),u.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const m=u&&u.toString()+u.tileID.key+n.key;if(m&&!this._demMatrixCache[m]){const v=this.tileManager.getSource().maxzoom;let S=n.canonical.z-u.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=v?S=n.canonical.z-v:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const M=n.canonical.x-(n.canonical.x>>S<<S),k=n.canonical.y-(n.canonical.y>>S<<S),O=o.cF(new Float64Array(16),[1/(o.a5<<S),1/(o.a5<<S),0]);o.O(O,O,[M*o.a5,k*o.a5,0]),this._demMatrixCache[n.key]={matrix:O,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(n){const u=this.painter,m=u.width/devicePixelRatio,v=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new o.T(u.context,{width:m,height:v,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new o.T(u.context,{width:m,height:v,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(m,v,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,m,v))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let S=0,M=0;S<this._coordsTextureSize;S++)for(let k=0;k<this._coordsTextureSize;k++,M+=4)u[M+0]=255&k,u[M+1]=255&S,u[M+2]=k>>8<<4|S>>8,u[M+3]=0;const m=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),v=new o.T(n,m,n.gl.RGBA,{premultiply:!1});return v.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(n){this.painter.maybeDrawDepthAndCoords(!0);const u=new Uint8Array(4),m=this.painter.context,v=m.gl,S=Math.round(n.x*this.painter.pixelRatio/devicePixelRatio),M=Math.round(n.y*this.painter.pixelRatio/devicePixelRatio),k=Math.round(this.painter.height/devicePixelRatio);m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),v.readPixels(S,k-M-1,1,1,v.RGBA,v.UNSIGNED_BYTE,u),m.bindFramebuffer.set(null);const O=u[0]+(u[2]>>4<<8),N=u[1]+((15&u[2])<<8),H=this.coordsIndex[255-u[3]],J=H&&this.tileManager.getTileByID(H);if(!J)return null;const K=this._coordsTextureSize,ne=(1<<J.tileID.canonical.z)*K;return new o.a9((J.tileID.canonical.x*K+O)/ne+J.tileID.wrap,(J.tileID.canonical.y*K+N)/ne,this.getElevation(J.tileID,O,N,K))}depthAtPoint(n){const u=new Uint8Array(4),m=this.painter.context,v=m.gl;return m.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),v.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,v.RGBA,v.UNSIGNED_BYTE,u),m.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(n){var u;const m=((u=this.painter.style.projection)===null||u===void 0?void 0:u.transitionState)>0,v=m&&n.canonical.y===0,S=m&&n.canonical.y===(1<<n.canonical.z)-1,M=`m_${v?"n":""}_${S?"s":""}`;if(this._meshCache[M])return this._meshCache[M];const k=this.painter.context,O=new o.cG,N=new o.aY,H=this.meshSize,J=o.a5/H,K=H*H;for(let Re=0;Re<=H;Re++)for(let We=0;We<=H;We++)O.emplaceBack(We*J,Re*J,0);for(let Re=0;Re<K;Re+=H+1)for(let We=0;We<H;We++)N.emplaceBack(We+Re,H+We+Re+1,H+We+Re+2),N.emplaceBack(We+Re,H+We+Re+2,We+Re+1);const ne=O.length,he=ne+(H+1),ge=(H+1)*H,xe=v?o.br:0,_e=v?0:1,Me=S?o.bs:o.a5,Oe=S?0:1;for(let Re=0;Re<=H;Re++)O.emplaceBack(Re*J,xe,_e);for(let Re=0;Re<=H;Re++)O.emplaceBack(Re*J,Me,Oe);for(let Re=0;Re<H;Re++)N.emplaceBack(ge+Re,he+Re,he+Re+1),N.emplaceBack(ge+Re,he+Re+1,ge+Re+1),N.emplaceBack(0+Re,ne+Re+1,ne+Re),N.emplaceBack(0+Re,0+Re+1,ne+Re+1);const Pe=O.length,ze=Pe+2*(H+1);for(const Re of[0,1])for(let We=0;We<=H;We++)for(const dt of[0,1])O.emplaceBack(Re*o.a5,We*J,dt);for(let Re=0;Re<2*H;Re+=2)N.emplaceBack(Pe+Re,Pe+Re+1,Pe+Re+3),N.emplaceBack(Pe+Re,Pe+Re+3,Pe+Re+2),N.emplaceBack(ze+Re,ze+Re+3,ze+Re+1),N.emplaceBack(ze+Re,ze+Re+2,ze+Re+3);const $e=new Mn(k.createVertexBuffer(O,Wd.members),k.createIndexBuffer(N),o.aX.simpleSegment(0,0,O.length,N.length));return this._meshCache[M]=$e,$e}getMeshFrameDelta(n){return 2*Math.PI*o.bE/Math.pow(2,Math.max(n,0))/5}getMinTileElevationForLngLatZoom(n,u){var m;if(!o.cE(u,n.wrap()))return 0;const{tileID:v}=this._getOverscaledTileIDFromLngLatZoom(n,u);return(m=this.getMinMaxElevation(v).minElevation)!==null&&m!==void 0?m:0}getMinMaxElevation(n){const u=this.getTerrainData(n).tile,m={minElevation:null,maxElevation:null};return u&&u.dem&&(m.minElevation=u.dem.min*this.exaggeration,m.maxElevation=u.dem.max*this.exaggeration),m}_getOverscaledTileIDFromLngLatZoom(n,u){const m=o.a9.fromLngLat(n.wrap()),v=(1<<u)*o.a5,S=m.x*v,M=m.y*v,k=Math.floor(S/o.a5),O=Math.floor(M/o.a5);return{tileID:new o.a2(u,0,u,k,O),mercatorX:S,mercatorY:M}}}class pi{constructor(n,u,m){this._context=n,this._size=u,this._tileSize=m,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),m=new o.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return m.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(m.texture),{id:n,fbo:u,texture:m,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>n.id!==u),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(n=>!n.inUse)===!1}}const qs={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Wo{constructor(n,u){this.painter=n,this.terrain=u,this.pool=new pi(n.context,30,u.tileManager.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,u){var m,v;this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=n._order.filter(S=>!n._layers[S].isHidden(u)),this._coordsAscending={};for(const S in n.tileManagers){this._coordsAscending[S]={};const M=n.tileManagers[S].getVisibleCoordinates(),k=n.tileManagers[S].getSource(),O=k instanceof Tn?k.terrainTileRanges:null;for(const N of M){const H=this.terrain.tileManager.getTerrainCoords(N,O);for(const J in H)this._coordsAscending[S][J]||(this._coordsAscending[S][J]=[]),this._coordsAscending[S][J].push(H[J])}}this._rttFingerprints={};for(const S of n._order){const M=n._layers[S],k=M.source;if(qs[M.type]&&!this._rttFingerprints[k]){this._rttFingerprints[k]={};const O=(v=(m=n.tileManagers[k])===null||m===void 0?void 0:m.getState().revision)!==null&&v!==void 0?v:0;for(const N in this._coordsAscending[k])this._rttFingerprints[k][N]=`${this._coordsAscending[k][N].map(H=>H.key).sort().join()}#${O}`}}for(const S of this._renderableTiles)for(const M in this._rttFingerprints){const k=this._rttFingerprints[M][S.tileID.key];k&&k!==S.rttFingerprint[M]&&(S.rtt=[])}}renderLayer(n,u){if(n.isHidden(this.painter.transform.zoom))return!1;const m=Object.assign(Object.assign({},u),{isRenderingToTexture:!0}),v=n.type,S=this.painter,M=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(qs[v]&&(this._prevType&&qs[this._prevType]||this._stacks.push([]),this._prevType=v,this._stacks[this._stacks.length-1].push(n.id),!M))return!0;if(qs[this._prevType]||qs[v]&&M){this._prevType=v;const k=this._stacks.length-1,O=this._stacks[k]||[];for(const N of this._renderableTiles){if(this.pool.isFull()&&(Dl(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(N),N.rtt[k]){const J=this.pool.getObjectForId(N.rtt[k].id);if(J.stamp===N.rtt[k].stamp){this.pool.useObject(J);continue}}const H=this.pool.getOrCreateFreeObject();this.pool.useObject(H),this.pool.stampObject(H),N.rtt[k]={id:H.id,stamp:H.stamp},S.context.bindFramebuffer.set(H.fbo.framebuffer),S.context.clear({color:o.bp.transparent,stencil:0}),S.currentStencilSource=void 0;for(let J=0;J<O.length;J++){const K=S.style._layers[O[J]],ne=K.source?this._coordsAscending[K.source][N.tileID.key]:[N.tileID];S.context.viewport.set([0,0,H.fbo.width,H.fbo.height]),S._renderTileClippingMasks(K,ne,!0),S.renderLayer(S,S.style.tileManagers[K.source],K,ne,m),K.source&&(N.rttFingerprint[K.source]=this._rttFingerprints[K.source][N.tileID.key])}}return Dl(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects(),qs[v]}return!1}}const jl={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Drag to rotate map, click to reset north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Oc=x,da={hash:!1,interactive:!0,bearingSnap:7,zoomSnap:0,attributionControl:Ho,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},Uh={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class fa{constructor(n,u,m=!1){this.mousedown=S=>{this.startMove(S,V.mousePos(this.element,S)),V.addEventListener(window,"mousemove",this.mousemove),V.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=S=>{this.move(S,V.mousePos(this.element,S))},this.mouseup=S=>{this._rotatePitchHandler.dragEnd(S),this.offTemp()},this.touchstart=S=>{S.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=V.touchPos(this.element,S.targetTouches)[0],this.startMove(S,this._startPos),V.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),V.addEventListener(window,"touchend",this.touchend))},this.touchmove=S=>{S.targetTouches.length!==1?this.reset():(this._lastPos=V.touchPos(this.element,S.targetTouches)[0],this.move(S,this._lastPos))},this.touchend=S=>{S.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=u;const v=new sp;this._rotatePitchHandler=new Ol({clickTolerance:3,move:(S,M)=>{const k=u.getBoundingClientRect(),O=new o.P((k.bottom-k.top)/2,(k.right-k.left)/2);return{bearingDelta:o.cy(new o.P(S.x,M.y),M,O),pitchDelta:m?-.5*(M.y-S.y):void 0}},moveStateManager:v,enable:!0,assignEvents:()=>{}}),this.map=n,V.addEventListener(u,"mousedown",this.mousedown),V.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),V.addEventListener(u,"touchcancel",this.reset)}startMove(n,u){this._rotatePitchHandler.dragStart(n,u),V.disableDrag()}move(n,u){const m=this.map,{bearingDelta:v,pitchDelta:S}=this._rotatePitchHandler.dragMove(n,u)||{};v&&m.setBearing(m.getBearing()+v),S&&m.setPitch(m.getPitch()+S)}off(){const n=this.element;V.removeEventListener(n,"mousedown",this.mousedown),V.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),V.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),V.removeEventListener(window,"touchend",this.touchend),V.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){V.enableDrag(),V.removeEventListener(window,"mousemove",this.mousemove),V.removeEventListener(window,"mouseup",this.mouseup),V.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),V.removeEventListener(window,"touchend",this.touchend)}}let pa;function ku(w,n,u,m=!1){if(m||!u.getCoveringTilesDetailsProvider().allowWorldCopies())return w?.wrap();const v=new o.V(w.lng,w.lat);if(w=new o.V(w.lng,w.lat),n){const S=new o.V(w.lng-360,w.lat),M=new o.V(w.lng+360,w.lat),k=u.locationToScreenPoint(w).distSqr(n);u.locationToScreenPoint(S).distSqr(n)<k?w=S:u.locationToScreenPoint(M).distSqr(n)<k&&(w=M)}for(;Math.abs(w.lng-u.center.lng)>180;){const S=u.locationToScreenPoint(w);if(S.x>=0&&S.y>=0&&S.x<=u.width&&S.y<=u.height)break;w.lng>u.center.lng?w.lng-=360:w.lng+=360}return w.lng!==v.lng&&u.isPointOnMapSurface(u.locationToScreenPoint(w))?w:v}const Bn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Lc(w,n,u){const m=w.classList;for(const v in Bn)m.remove(`maplibregl-${u}-anchor-${v}`);m.add(`maplibregl-${u}-anchor-${n}`)}class Fc extends o.E{constructor(n){if(super(),this._onClick=u=>{this.fire(new o.l("click",{originalEvent:u}))},this._onKeyPress=u=>{const m=u.code,v=u.charCode||u.keyCode;m!=="Space"&&m!=="Enter"&&v!==32&&v!==13||this.togglePopup()},this._onMapClick=u=>{const m=u.originalEvent.target,v=this._element;this._popup&&(m===v||v.contains(m))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();(u?.type==="terrain"||u?.type==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=ku(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let S="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?S="rotateX(0deg)":this._pitchAlignment==="map"&&(S=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||u&&u.type!=="moveend"||(this._pos=this._pos.round()),V.setTransform(this._element,`${Bn[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${S} ${v}`),$.frameAsync(new AbortController,this._map._ownerWindow).then(()=>{this._updateOpacity(u&&u.type==="moveend")}).catch(()=>{})},this._onMove=u=>{if(!this._isDragging){const m=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._subpixelPositioning=n&&n.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,this.setOpacity(n?.opacity,n?.opacityWhenCovered),n&&n.element)this._element=n.element,this._offset=o.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=V.create("div");const u=V.createNS("http://www.w3.org/2000/svg","svg"),m=41,v=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${m}px`),u.setAttributeNS(null,"width",`${v}px`),u.setAttributeNS(null,"viewBox",`0 0 ${v} ${m}`);const S=V.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"stroke","none"),S.setAttributeNS(null,"stroke-width","1"),S.setAttributeNS(null,"fill","none"),S.setAttributeNS(null,"fill-rule","evenodd");const M=V.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"fill-rule","nonzero");const k=V.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");const O=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const _e of O){const Me=V.createNS("http://www.w3.org/2000/svg","ellipse");Me.setAttributeNS(null,"opacity","0.04"),Me.setAttributeNS(null,"cx","10.5"),Me.setAttributeNS(null,"cy","5.80029008"),Me.setAttributeNS(null,"rx",_e.rx),Me.setAttributeNS(null,"ry",_e.ry),k.appendChild(Me)}const N=V.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"fill",this._color);const H=V.createNS("http://www.w3.org/2000/svg","path");H.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),N.appendChild(H);const J=V.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"opacity","0.25"),J.setAttributeNS(null,"fill","#000000");const K=V.createNS("http://www.w3.org/2000/svg","path");K.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),J.appendChild(K);const ne=V.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ne.setAttributeNS(null,"fill","#FFFFFF");const he=V.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ge=V.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#000000"),ge.setAttributeNS(null,"opacity","0.25"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962");const xe=V.createNS("http://www.w3.org/2000/svg","circle");xe.setAttributeNS(null,"fill","#FFFFFF"),xe.setAttributeNS(null,"cx","5.5"),xe.setAttributeNS(null,"cy","5.5"),xe.setAttributeNS(null,"r","5.4999962"),he.appendChild(ge),he.appendChild(xe),M.appendChild(k),M.appendChild(N),M.appendChild(J),M.appendChild(ne),M.appendChild(he),u.appendChild(M),u.setAttributeNS(null,"height",m*this._scale+"px"),u.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(u),this._offset=o.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),Lc(this._element,this._anchor,"marker"),this._element.addEventListener("click",this._onClick),n&&n.className)for(const u of n.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(n){return this.remove(),this._map=n,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",n._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),n.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),V.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=o.V.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const v=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(n){return this._subpixelPositioning=n,this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:n?(n.isOpen()?n.remove():(n.setLngLat(this._lngLat),n.addTo(this._map)),this):this}_updateOpacity(n=!1){var u,m;const v=(u=this._map)===null||u===void 0?void 0:u.terrain,S=this._map.transform.isLocationOccluded(this._lngLat);if(!v||S){const ne=S?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ne&&(this._element.style.opacity=ne))}if(n)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const M=this._map,k=M.terrain.depthAtPoint(this._pos),O=M.terrain.getElevationForLngLat(this._lngLat,M.transform);if(M.transform.lngLatToCameraDepth(this._lngLat,O)-k<.006)return void(this._element.style.opacity=this._opacity);const N=-this._offset.y/M.transform.pixelsPerMeter,H=Math.sin(M.getPitch()*Math.PI/180)*N,J=M.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),K=M.transform.lngLatToCameraDepth(this._lngLat,O+H)-J>.006;!((m=this._popup)===null||m===void 0)&&m.isOpen()&&K&&this._popup.remove(),this._element.style.opacity=K?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(n){return this._offset=o.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(n,u){return(this._opacity===void 0||n===void 0&&u===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),n!==void 0&&(this._opacity=n),u!==void 0&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}const Gh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ga=0,qa=!1;const Ha={maxWidth:100,unit:"metric"};function $n(w,n,u){const m=u&&u.maxWidth||100,v=w._container.clientHeight/2,S=w._container.clientWidth/2,M=w.unproject([S-m/2,v]),k=w.unproject([S+m/2,v]),O=Math.round(w.project(k).x-w.project(M).x),N=Math.min(m,O,w._container.clientWidth),H=M.distanceTo(k);if(u&&u.unit==="imperial"){const J=3.2808*H;J>5280?ti(n,N,J/5280,w._getUIString("ScaleControl.Miles")):ti(n,N,J,w._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?ti(n,N,H/1852,w._getUIString("ScaleControl.NauticalMiles")):H>=1e3?ti(n,N,H/1e3,w._getUIString("ScaleControl.Kilometers")):ti(n,N,H,w._getUIString("ScaleControl.Meters"))}function ti(w,n,u,m){const v=function(S){const M=Math.pow(10,`${Math.floor(S)}`.length-1);let k=S/M;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(O){const N=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*N)/N}(k),M*k}(u);w.style.width=n*(v/u)+"px",w.innerHTML=`${v}&nbsp;${m}`}const Fi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0,padding:void 0},Bc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Nl(w){if(w){if(typeof w=="number"){const n=Math.round(Math.abs(w)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,w),"top-left":new o.P(n,n),"top-right":new o.P(-n,n),bottom:new o.P(0,-w),"bottom-left":new o.P(n,-n),"bottom-right":new o.P(-n,-n),left:new o.P(w,0),right:new o.P(-w,0)}}if(w instanceof o.P||Array.isArray(w)){const n=o.P.convert(w);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:o.P.convert(w.center||[0,0]),top:o.P.convert(w.top||[0,0]),"top-left":o.P.convert(w["top-left"]||[0,0]),"top-right":o.P.convert(w["top-right"]||[0,0]),bottom:o.P.convert(w.bottom||[0,0]),"bottom-left":o.P.convert(w["bottom-left"]||[0,0]),"bottom-right":o.P.convert(w["bottom-right"]||[0,0]),left:o.P.convert(w.left||[0,0]),right:o.P.convert(w.right||[0,0])}}return Nl(new o.P(0,0))}const $c=x;f.AJAXError=o.cJ,f.EXTENT=o.a5,f.Event=o.l,f.Evented=o.E,f.LngLat=o.V,f.MercatorCoordinate=o.a9,f.Point=o.P,f.addProtocol=o.cK,f.config=o.c,f.removeProtocol=o.cL,f.AttributionControl=Hd,f.BoxZoomHandler=qo,f.CanvasSource=Sr,f.CooperativeGesturesHandler=Wt,f.DoubleClickZoomHandler=Bl,f.DragPanHandler=qd,f.DragRotateHandler=as,f.EdgeInsets=uc,f.FullscreenControl=class extends o.E{constructor(w={}){var n;super(),this._onFullscreenChange=()=>{var u;let m=window.document.fullscreenElement||window.document.webkitFullscreenElement;for(;!((u=m?.shadowRoot)===null||u===void 0)&&u.fullscreenElement;)m=m.shadowRoot.fullscreenElement;m===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,this._pseudo=(n=w.pseudo)!==null&&n!==void 0&&n,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=V.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){V.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=V.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);V.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){this._pseudo?this._togglePseudoFullScreen():window.document.exitFullscreen?window.document.exitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._pseudo?this._togglePseudoFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},f.GeoJSONSource=On,f.GeolocateControl=class extends o.E{constructor(w){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",n)),this._finish()}},this._updateCamera=n=>{const u=new o.V(n.coords.longitude,n.coords.latitude),m=n.coords.accuracy,v=this._map.getBearing(),S=o.e({bearing:v},this.options.fitBoundsOptions),M=pr.fromLngLat(u,m);this._map.fitBounds(M,S,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const u=new o.V(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=n.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=n=>{if(this._map){if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&qa)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",n=>n.preventDefault()),this._geolocateButton=V.create("button","maplibregl-ctrl-geolocate",this._container),V.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=n=>{if(this._map){if(n===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=V.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Fc({element:this._dotElement}),this._circleElement=V.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Fc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{const m=u?.[0]instanceof ResizeObserverEntry;u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||m||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))})}},this.options=o.e({},Gh,w)}onAdd(w){return this._map=w,this._container=V.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(n=!1){if(pa!==void 0&&!n)return pa;if(window.navigator.permissions===void 0)return pa=!!window.navigator.geolocation,pa;try{pa=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{pa=!!window.navigator.geolocation}return pa})}().then(n=>this._finishSetupUI(n)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),V.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,Ga=0,qa=!1}_isOutOfMapMaxBounds(w){const n=this._map.getMaxBounds(),u=w.coords;return n&&(u.longitude<n.getWest()||u.longitude>n.getEast()||u.latitude<n.getSouth()||u.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const w=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&w))return;const n=this._map.project(w),u=this._map.unproject([n.x+100,n.y]),m=w.distanceTo(u)/100,v=2*this._accuracy/m;this._circleElement.style.width=`${v.toFixed(2)}px`,this._circleElement.style.height=`${v.toFixed(2)}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ga--,qa=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ga++,Ga>1?(w={maximumAge:6e5,timeout:0},qa=!0):(w=this.options.positionOptions,qa=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},f.GlobeControl=class{constructor(){this._toggleProjection=()=>{var w;const n=(w=this._map.getProjection())===null||w===void 0?void 0:w.type;this._map.setProjection(n!=="mercator"&&n?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var w;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((w=this._map.getProjection())===null||w===void 0?void 0:w.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(w){return this._map=w,this._container=V.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=V.create("button","maplibregl-ctrl-globe",this._container),V.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._map.on("projectiontransition",this._updateGlobeIcon),this._container}onRemove(){V.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._map.off("projectiontransition",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},f.Hash=$d,f.ImageSource=Tn,f.KeyboardHandler=Sn,f.LngLatBounds=pr,f.LogoControl=ha,f.Map=class extends wi{get _ownerWindow(){var w,n;return((n=(w=this._container)===null||w===void 0?void 0:w.ownerDocument)===null||n===void 0?void 0:n.defaultView)||window}constructor(w){var n,u;o.cH.mark(o.cI.create);const m=Object.assign(Object.assign(Object.assign({},da),w),{canvasContextAttributes:Object.assign(Object.assign({},da.canvasContextAttributes),w.canvasContextAttributes)});if(m.minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const v=new dc,S=new Sl;m.minZoom!==void 0&&v.setMinZoom(m.minZoom),m.maxZoom!==void 0&&v.setMaxZoom(m.maxZoom),m.minPitch!==void 0&&v.setMinPitch(m.minPitch),m.maxPitch!==void 0&&v.setMaxPitch(m.maxPitch),m.renderWorldCopies!==void 0&&v.setRenderWorldCopies(m.renderWorldCopies),m.transformConstrain!==null&&v.setConstrainOverride(m.transformConstrain),super(v,S,{bearingSnap:m.bearingSnap,zoomSnap:m.zoomSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new $l,this._controls=[],this._mapId=o.af(),this._lostContextStyle={style:null,images:null},this._contextLost=k=>{if(k.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy(),this._lostContextStyle=this._getStyleAndImages(),this.style){for(const O of Object.values(this.style._layers))if(O.type==="custom"&&console.warn(`Custom layer with id '${O.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),O._listeners)for(const[N]of Object.entries(O._listeners))console.warn(`Custom layer with id '${O.id}' had event listeners for event '${N}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this.style.destroy(),this.style=null,this.fire(new o.l("webglcontextlost",{originalEvent:k}))}else this.fire(new o.l("webglcontextlost",{originalEvent:k}))},this._contextRestored=k=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._lostContextStyle={style:null,images:null},this._setupPainter(),this.resize(),this._update(),this._resizeInternal(),this.fire(new o.l("webglcontextrestored",{originalEvent:k}))},this._onMapScroll=k=>{if(k.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=m.interactive,this._maxTileCacheSize=m.maxTileCacheSize,this._maxTileCacheZoomLevels=m.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},m.canvasContextAttributes),this._trackResize=m.trackResize===!0,this._bearingSnap=m.bearingSnap,this._zoomSnap=m.zoomSnap,this._centerClampedToGround=m.centerClampedToGround,this._refreshExpiredTiles=m.refreshExpiredTiles===!0,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions===!0,this._collectResourceTiming=m.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},jl),m.locale),this._clickTolerance=m.clickTolerance,this._overridePixelRatio=m.pixelRatio,this._maxCanvasSize=m.maxCanvasSize,this._zoomLevelsToOverscale=m.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=m.transformCameraUpdate,this.transformConstrain=m.transformConstrain,this.cancelPendingTileRequestsWhileZooming=m.cancelPendingTileRequestsWhileZooming===!0,m.reduceMotion!==void 0&&($.prefersReducedMotion=m.reduceMotion),this._imageQueueHandle=we.addThrottleControl(()=>this.isMoving()),this._requestManager=new Ie(m.transformRequest),this._container=this._resolveContainer(m.container),m.maxBounds&&this.setMaxBounds(m.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"&&(this._ownerWindow.addEventListener("online",this._onWindowOnline,!1),this._setupResizeObserver()),this.handlers=new Cs(this,m),this._hash=m.hash&&new $d(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,elevation:m.elevation,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,roll:m.roll}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,o.e({},m.fitBoundsOptions,{duration:0}))));const M=typeof m.style=="string"||((u=(n=m.style)===null||n===void 0?void 0:n.projection)===null||u===void 0?void 0:u.type)!=="globe";this.resize(null,M),this._localIdeographFontFamily=m.localIdeographFontFamily,this._validateStyle=m.validateStyle,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new Hd(typeof m.attributionControl=="boolean"?void 0:m.attributionControl)),m.maplibreLogo&&this.addControl(new ha,m.logoPosition),this.on("style.load",()=>{if(M||this._resizeTransform(),this.transform.unmodified){const k=o.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(k)}}),this.on("data",k=>{this._update(k.dataType==="style"),this.fire(new o.l(`${k.dataType}data`,k))}),this.on("dataloading",k=>{this.fire(new o.l(`${k.dataType}dataloading`,k))}),this.on("dataabort",k=>{this.fire(new o.l("sourcedataabort",k))})}_getMapId(){return this._mapId}setGlobalStateProperty(w,n){return this.style.setGlobalStateProperty(w,n),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(w,n){if(n===void 0&&(n=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=w.onAdd(this);this._controls.push(w);const m=this._controlPositions[n];return n.indexOf("bottom")!==-1?m.insertBefore(u,m.firstChild):m.appendChild(u),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(w);return n>-1&&this._controls.splice(n,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}coveringTiles(w){return kr(this.transform,w)}calculateCameraOptionsFromTo(w,n,u,m){return m==null&&this.terrain&&(m=this.terrain.getElevationForLngLat(u,this.transform)),super.calculateCameraOptionsFromTo(w,n,u,m)}resize(w,n=!0){if(this._lostContextStyle.style!==null)return this;this._resizeInternal(n);const u=!this._moving;return u&&(this.stop(),this.fire(new o.l("movestart",w)).fire(new o.l("move",w))),this.fire(new o.l("resize",w)),u&&this.fire(new o.l("moveend",w)),this}_resizeInternal(w=!0){const[n,u]=this._containerDimensions(),m=this._getClampedPixelRatio(n,u);if(this._resizeCanvas(n,u,m),this.painter.resize(n,u,m),this.painter.overLimit()){const v=this.painter.context.gl;this._maxCanvasSize=[v.drawingBufferWidth,v.drawingBufferHeight];const S=this._getClampedPixelRatio(n,u);this._resizeCanvas(n,u,S),this.painter.resize(n,u,S)}this._resizeTransform(w)}_resizeTransform(w=!0){var n;const[u,m]=this._containerDimensions();this.transform.resize(u,m,w),(n=this._requestedCameraState)===null||n===void 0||n.resize(u,m,w)}_getClampedPixelRatio(w,n){const{0:u,1:m}=this._maxCanvasSize,v=this.getPixelRatio(),S=w*v,M=n*v;return Math.min(S>u?u/S:1,M>m?m/M:1)*v}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(pr.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom){const n=this.transform.zoom,u=this._getTransformForUpdate();return u.setMinZoom(w),this._applyUpdatedTransform(u),this._update(),n!==this.transform.zoom&&this.fire(new o.l("zoomstart")).fire(new o.l("zoom")).fire(new o.l("zoomend")).fire(new o.l("movestart")).fire(new o.l("move")).fire(new o.l("moveend")),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom){const n=this.transform.zoom,u=this._getTransformForUpdate();return u.setMaxZoom(w),this._applyUpdatedTransform(u),this._update(),n!==this.transform.zoom&&this.fire(new o.l("zoomstart")).fire(new o.l("zoom")).fire(new o.l("zoomend")).fire(new o.l("movestart")).fire(new o.l("move")).fire(new o.l("moveend")),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch){const n=this.transform.pitch,u=this._getTransformForUpdate();return u.setMinPitch(w),this._applyUpdatedTransform(u),this._update(),n!==this.transform.pitch&&this.fire(new o.l("pitchstart")).fire(new o.l("pitch")).fire(new o.l("pitchend")).fire(new o.l("movestart")).fire(new o.l("move")).fire(new o.l("moveend")),this}throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(w>=this.transform.minPitch){const n=this.transform.pitch,u=this._getTransformForUpdate();return u.setMaxPitch(w),this._applyUpdatedTransform(u),this._update(),n!==this.transform.pitch&&this.fire(new o.l("pitchstart")).fire(new o.l("pitch")).fire(new o.l("pitchend")).fire(new o.l("movestart")).fire(new o.l("move")).fire(new o.l("moveend")),this}throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.setRenderWorldCopies(w),this._update()}setTransformConstrain(w){return this.transform.setConstrainOverride(w),this._update()}project(w){return this.transform.locationToScreenPoint(o.V.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.screenPointToLocation(o.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,n,u){if(w==="mouseenter"||w==="mouseover"){let m=!1;return{layers:n,listener:u,delegates:{mousemove:S=>{const M=n.filter(O=>this.getLayer(O)),k=M.length!==0?this.queryRenderedFeatures(S.point,{layers:M}):[];k.length?m||(m=!0,u.call(this,new fi(w,this,S.originalEvent,{features:k}))):m=!1},mouseout:()=>{m=!1}}}}if(w==="mouseleave"||w==="mouseout"){let m=!1;return{layers:n,listener:u,delegates:{mousemove:M=>{const k=n.filter(O=>this.getLayer(O));(k.length!==0?this.queryRenderedFeatures(M.point,{layers:k}):[]).length?m=!0:m&&(m=!1,u.call(this,new fi(w,this,M.originalEvent)))},mouseout:M=>{m&&(m=!1,u.call(this,new fi(w,this,M.originalEvent)))}}}}{const m=v=>{const S=n.filter(k=>this.getLayer(k)),M=S.length!==0?this.queryRenderedFeatures(v.point,{layers:S}):[];M.length&&(v.features=M,u.call(this,v),delete v.features)};return{layers:n,listener:u,delegates:{[w]:m}}}}_saveDelegatedListener(w,n){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(n)}_removeDelegatedListener(w,n,u){if(!this._delegatedListeners||!this._delegatedListeners[w])return;const m=this._delegatedListeners[w];for(let v=0;v<m.length;v++){const S=m[v];if(S.listener===u&&S.layers.length===n.length&&S.layers.every(M=>n.includes(M))){for(const M in S.delegates)this.off(M,S.delegates[M]);return void m.splice(v,1)}}}on(w,n,u){if(u===void 0)return super.on(w,n);const m=typeof n=="string"?[n]:n,v=this._createDelegatedListener(w,m,u);this._saveDelegatedListener(w,v);for(const S in v.delegates)this.on(S,v.delegates[S]);return{unsubscribe:()=>{this._removeDelegatedListener(w,m,u)}}}once(w,n,u){if(u===void 0)return super.once(w,n);const m=typeof n=="string"?[n]:n,v=this._createDelegatedListener(w,m,u);for(const S in v.delegates){const M=v.delegates[S];v.delegates[S]=(...k)=>{this._removeDelegatedListener(w,m,u),M(...k)}}this._saveDelegatedListener(w,v);for(const S in v.delegates)this.once(S,v.delegates[S]);return this}off(w,n,u){return u===void 0?super.off(w,n):(this._removeDelegatedListener(w,typeof n=="string"?[n]:n,u),this)}queryRenderedFeatures(w,n){if(!this.style)return[];let u;const m=w instanceof o.P||Array.isArray(w),v=m?w:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(m?{}:w)||{},v instanceof o.P||typeof v[0]=="number")u=[o.P.convert(v)];else{const S=o.P.convert(v[0]),M=o.P.convert(v[1]);u=[S,new o.P(M.x,S.y),M,new o.P(S.x,M.y),S]}return this.style.queryRenderedFeatures(u,n,this.transform)}querySourceFeatures(w,n){return this.style.querySourceFeatures(w,n)}setStyle(w,n){return(n=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(w,n))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const n=this._locale[w];if(n==null)throw new Error(`Missing UI string '${w}'`);return n}_updateStyle(w,n){var u,m;if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(w,n));const v=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new yc(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,n,v):this.style.loadJSON(w,n,v),this):((m=(u=this.style)===null||u===void 0?void 0:u.projection)===null||m===void 0||m.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new yc(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,n){if(typeof w=="string"){const u=this._requestManager.transformRequest(w,"Style");o.j(u,new AbortController).then(m=>{this._updateDiff(m.data,n)}).catch(m=>{m&&this.fire(new o.k(m))})}else typeof w=="object"&&this._updateDiff(w,n)}_updateDiff(w,n){try{this.style.setState(w,n)&&this._update(!0)}catch(u){o.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(w,n)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(w,n){return this._lazyInitEmptyStyle(),this.style.addSource(w,n),this._update(!0)}isSourceLoaded(w){const n=this.style&&this.style.tileManagers[w];if(n!==void 0)return n.loaded();this.fire(new o.k(new Error(`There is no tile manager with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const n=this.style.tileManagers[w.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&n.reload();for(const u in this.style._layers){const m=this.style._layers[u];m.type==="hillshade"&&m.source===w.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),m.type==="color-relief"&&m.source===w.source&&o.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Fn(this.painter,n,w),this.painter.renderToTexture=new Wo(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=u=>{var m;u.dataType==="style"?this.terrain.tileManager.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==w.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((m=u.source)===null||m===void 0?void 0:m.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:w})),this}getTerrain(){var w,n;return(n=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const w=this.style&&this.style.tileManagers;for(const n of Object.values(w))if(!n.areTilesLoaded())return!1;return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}setSourceTileLodParams(w,n,u){if(u){const m=this.getSource(u);if(!m)throw new Error(`There is no source with ID "${u}", cannot set LOD parameters`);m.calculateTileZoom=Yt(Math.max(1,w),Math.max(1,n))}else for(const m in this.style.tileManagers)this.style.tileManagers[m].getSource().calculateTileZoom=Yt(Math.max(1,w),Math.max(1,n));return this._update(!0),this}refreshTiles(w,n){const u=this.style.tileManagers[w];if(!u)throw new Error(`There is no tile manager with ID "${w}", cannot refresh tile`);n===void 0?u.reload(!0):u.refreshTiles(n.map(m=>new o.ac(m.z,m.x,m.y)))}addImage(w,n,u={}){const{pixelRatio:m=1,sdf:v=!1,stretchX:S,stretchY:M,content:k,textFitWidth:O,textFitHeight:N}=u;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||o.b(n))){if(n.width===void 0||n.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:H,height:J,data:K}=n,ne=n;return this.style.addImage(w,{data:new o.R({width:H,height:J},new Uint8Array(K)),pixelRatio:m,stretchX:S,stretchY:M,content:k,textFitWidth:O,textFitHeight:N,sdf:v,version:0,userImage:ne}),ne.onAdd&&ne.onAdd(this,w),this}}{const{width:H,height:J,data:K}=$.getImageData(n);this.style.addImage(w,{data:new o.R({width:H,height:J},K),pixelRatio:m,stretchX:S,stretchY:M,content:k,textFitWidth:O,textFitHeight:N,sdf:v,version:0})}}updateImage(w,n){const u=this.style.getImage(w);if(!u)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=n instanceof HTMLImageElement||o.b(n)?$.getImageData(n):n,{width:v,height:S,data:M}=m;if(v===void 0||S===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==u.data.width||S!==u.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const k=!(n instanceof HTMLImageElement||o.b(n));return u.data.replace(M,k),this.style.updateImage(w,u),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return we.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,n){return this._lazyInitEmptyStyle(),this.style.addLayer(w,n),this._update(!0)}moveLayer(w,n){return this.style.moveLayer(w,n),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,n,u){return this.style.setLayerZoomRange(w,n,u),this._update(!0)}setFilter(w,n,u={}){return this.style.setFilter(w,n,u),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,n,u,m={}){return this.style.setPaintProperty(w,n,u,m),this._update(!0)}getPaintProperty(w,n){return this.style.getPaintProperty(w,n)}setLayoutProperty(w,n,u,m={}){return this.style.setLayoutProperty(w,n,u,m),this._update(!0)}getLayoutProperty(w,n){return this.style.getLayoutProperty(w,n)}setGlyphs(w,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,n,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,n,u,m=>{m||this._update(!0)}),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,n,u=>{u||this._update(!0)}),this}setLight(w,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,n),this._update(!0)}getLight(){return this.style.getLight()}setSky(w,n={}){return this._lazyInitEmptyStyle(),this.style.setSky(w,n),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,n){return this.style.setFeatureState(w,n),this._update()}removeFeatureState(w,n){return this.style.removeFeatureState(w,n),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,n=0;return this._container&&(w=this._container.clientWidth||400,n=this._container.clientHeight||300),[w,n]}_setupResizeObserver(){var w;let n=!1;const u=Bd(v=>{this._trackResize&&!this._removed&&(this.resize(v),this.redraw())},50),m=(w=this._ownerWindow.ResizeObserver)!==null&&w!==void 0?w:ResizeObserver;this._resizeObserver=new m(v=>{n?u(v):n=!0}),this._resizeObserver.observe(this._container)}_resolveContainer(w){if(typeof w=="string"){const n=document.getElementById(w);if(!n)throw new Error(`Container '${w}' not found.`);return n}if(w instanceof HTMLElement||w&&typeof w=="object"&&w.nodeType===1)return w;throw new Error("Invalid type: 'container' must be a String or HTMLElement.")}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const n=this._canvasContainer=V.create("div","maplibregl-canvas-container",w);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=V.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),m=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],m);const v=this._controlContainer=V.create("div","maplibregl-control-container",w),S=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(M=>{S[M]=V.create("div",`maplibregl-ctrl-${M} `,v)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,n,u){this._canvas.width=Math.floor(u*w),this._canvas.height=Math.floor(u*n),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const w=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let n=null;this._canvas.addEventListener("webglcontextcreationerror",m=>{n={requestedAttributes:w},m&&(n.statusMessage=m.statusMessage,n.type=m.type)},{once:!0});let u=null;if(u=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,w):this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w),!u){const m="Failed to initialize WebGL";throw n?(n.message=m,new Error(JSON.stringify(n))):new Error(m)}this.painter=new Lh(u,this.transform),se.testSupport(u)}migrateProjection(w,n){super.migrateProjection(w,n),this.painter.transform=w,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){var n,u,m,v,S;const M=this._idleTriggered?this._fadeDuration:0,k=((n=this.style.projection)===null||n===void 0?void 0:n.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let O=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const J=this.transform.zoom,K=j();this.style.zoomHistory.update(J,K);const ne=new o.H(J,{now:K,fadeDuration:M,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),he=ne.crossFadingFactor();he===1&&he===this._crossFadingFactor||(O=!0,this._crossFadingFactor=he),this.style.update(ne)}const N=((u=this.style.projection)===null||u===void 0?void 0:u.transitionState)>0!==k;(m=this.style.projection)===null||m===void 0||m.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((v=this.style.projection)===null||v===void 0?void 0:v.transitionState,(S=this.style.projection)===null||S===void 0?void 0:S.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||N)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,M,this._crossSourceCollisions,N),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:M,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cH.mark(o.cI.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||O)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const H=this._sourcesDirty||this._styleDirty||this._placementDirty;return H||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||H||(this._fullyLoaded=!0,o.cH.mark(o.cI.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&this._ownerWindow.removeEventListener("online",this._onWindowOnline,!1),we.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n?.loseContext&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),V.remove(this._canvasContainer),V.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cH.remove(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,$.frame(this._frameRequest,w=>{o.cH.recordStartOfFrameAt(w),this._frameRequest=null;try{this._render(w)}catch(n){if(!o.Z(n)&&!function(u){return u.message===El}(n))throw n}},()=>{},this._ownerWindow))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return Oc}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(w){return this._lazyInitEmptyStyle(),this.style.setProjection(w),this._update(!0)}},f.MapMouseEvent=fi,f.MapTouchEvent=zl,f.MapWheelEvent=Fh,f.Marker=Fc,f.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const n=this._map.getZoom(),u=n===this._map.getMaxZoom(),m=n===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(n,u)=>{const m=this._map._getUIString(`NavigationControl.${u}`);n.title=m,n.setAttribute("aria-label",m)},this.options=o.e({},Uh,w),this._container=V.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),V.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),V.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=V.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new fa(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){V.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,n){const u=V.create("button",w,this._container);return u.type="button",u.addEventListener("click",n),u}},f.Popup=class extends o.E{constructor(w){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&V.remove(this._content),this._container&&(V.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=V.create("div","maplibregl-popup",this._map.getContainer()),this._tip=V.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const M of this.options.className.split(" "))this._container.classList.add(M);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=ku(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!n)return;const u=this._flatPos=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&n?n:this._map.transform.locationToScreenPoint(this._lngLat));let m=this.options.anchor;const v=Nl(this.options.offset);if(!m){const M=this._container.offsetWidth,k=this._container.offsetHeight,O=function(H){var J,K,ne,he;return H?{top:(J=H.top)!==null&&J!==void 0?J:0,right:(K=H.right)!==null&&K!==void 0?K:0,bottom:(ne=H.bottom)!==null&&ne!==void 0?ne:0,left:(he=H.left)!==null&&he!==void 0?he:0}:{top:0,right:0,bottom:0,left:0}}(this.options.padding);let N;N=u.y+v.bottom.y<k+O.top?["top"]:u.y>this._map.transform.height-k-O.bottom?["bottom"]:[],u.x<M/2+O.left?N.push("left"):u.x>this._map.transform.width-M/2-O.right&&N.push("right"),m=N.length===0?"bottom":N.join("-")}let S=u.add(v[m]);this.options.subpixelPositioning||(S=S.round()),V.setTransform(this._container,`${Bn[m]} translate(${S.x}px,${S.y}px)`),Lc(this._container,m,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Fi),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=o.V.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const n=document.createDocumentFragment(),u=document.createElement("body");let m;for(u.innerHTML=w;m=u.firstChild,m;)n.appendChild(m);return this.setDOMContent(n)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=V.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}setPadding(w){this.options.padding=w,this._update()}_createCloseButton(){this.options.closeButton&&(this._closeButton=V.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(Bc);w&&w.focus()}},f.RasterDEMTileSource=Br,f.RasterTileSource=Rr,f.ScaleControl=class{constructor(w){this._onMove=()=>{$n(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,$n(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ha),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=V.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){V.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},f.ScrollZoomHandler=Dc,f.Style=yc,f.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=V.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=V.create("button","maplibregl-ctrl-terrain",this._container),V.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){V.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},f.TwoFingersTouchPitchHandler=Nh,f.TwoFingersTouchRotateHandler=cp,f.TwoFingersTouchZoomHandler=Fl,f.TwoFingersTouchZoomRotateHandler=ua,f.VectorTileSource=Ir,f.VideoSource=vn,f.addSourceType=(w,n)=>o._(void 0,void 0,void 0,function*(){if(ur(w))throw new Error(`A source type called "${w}" already exists.`);((u,m)=>{Dr[u]=m})(w,n)}),f.clearPrewarmedResources=function(){const w=bt;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(Tt),bt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},f.createTileMesh=fu,f.getMaxParallelImageRequests=function(){return o.c.MAX_PARALLEL_IMAGE_REQUESTS},f.getRTLTextPluginStatus=function(){return ie().getRTLTextPluginStatus()},f.getVersion=function(){return $c},f.getWorkerCount=function(){return Ct.workerCount},f.getWorkerUrl=function(){return o.c.WORKER_URL},f.importScriptInWorkers=function(w){return dr().broadcast("IS",w)},f.isTimeFrozen=function(){return G.isFrozen()},f.now=j,f.prewarm=function(){kt().acquire(Tt)},f.restoreNow=function(){G.restoreNow()},f.setMaxParallelImageRequests=function(w){o.c.MAX_PARALLEL_IMAGE_REQUESTS=w},f.setNow=function(w){G.setNow(w)},f.setRTLTextPlugin=function(w,n){return ie().setRTLTextPlugin(w,n)},f.setWorkerCount=function(w){Ct.workerCount=w},f.setWorkerUrl=function(w){o.c.WORKER_URL=w}});var h=i;return h})}(B_)),B_.exports}var fS=uG();const ZA=Lv(fS),hG=bE({__proto__:null,default:ZA},[fS]);var ul=Uint8Array,yg=Uint16Array,dG=Int32Array,XA=new ul([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),KA=new ul([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fG=new ul([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),YA=function(e,t){for(var i=new yg(31),a=0;a<31;++a)i[a]=t+=1<<e[a-1];for(var c=new dG(i[30]),a=1;a<30;++a)for(var h=i[a];h<i[a+1];++h)c[h]=h-i[a]<<5|a;return{b:i,r:c}},JA=YA(XA,2),QA=JA.b,pG=JA.r;QA[28]=258,pG[258]=28;var mG=YA(KA,0),gG=mG.b,Hw=new yg(32768);for(var Di=0;Di<32768;++Di){var gf=(Di&43690)>>1|(Di&21845)<<1;gf=(gf&52428)>>2|(gf&13107)<<2,gf=(gf&61680)>>4|(gf&3855)<<4,Hw[Di]=((gf&65280)>>8|(gf&255)<<8)>>1}var av=function(e,t,i){for(var a=e.length,c=0,h=new yg(t);c<a;++c)e[c]&&++h[e[c]-1];var f=new yg(t);for(c=1;c<t;++c)f[c]=f[c-1]+h[c-1]<<1;var o;if(i){o=new yg(1<<t);var x=15-t;for(c=0;c<a;++c)if(e[c])for(var P=c<<4|e[c],I=t-e[c],R=f[e[c]-1]++<<I,D=R|(1<<I)-1;R<=D;++R)o[Hw[R]>>x]=P}else for(o=new yg(a),c=0;c<a;++c)e[c]&&(o[c]=Hw[f[e[c]-1]++]>>15-e[c]);return o},a0=new ul(288);for(var Di=0;Di<144;++Di)a0[Di]=8;for(var Di=144;Di<256;++Di)a0[Di]=9;for(var Di=256;Di<280;++Di)a0[Di]=7;for(var Di=280;Di<288;++Di)a0[Di]=8;var eR=new ul(32);for(var Di=0;Di<32;++Di)eR[Di]=5;var yG=av(a0,9,1),vG=av(eR,5,1),Yb=function(e){for(var t=e[0],i=1;i<e.length;++i)e[i]>t&&(t=e[i]);return t},Yc=function(e,t,i){var a=t/8|0;return(e[a]|e[a+1]<<8)>>(t&7)&i},Jb=function(e,t){var i=t/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(t&7)},_G=function(e){return(e+7)/8|0},xG=function(e,t,i){return(i==null||i>e.length)&&(i=e.length),new ul(e.subarray(t,i))},bG=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ol=function(e,t,i){var a=new Error(t||bG[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,ol),!i)throw a;return a},pS=function(e,t,i,a){var c=e.length,h=0;if(!c||t.f&&!t.l)return i||new ul(0);var f=!i,o=f||t.i!=2,x=t.i;f&&(i=new ul(c*3));var P=function(dr){var ir=i.length;if(dr>ir){var Gr=new ul(Math.max(ir*2,dr));Gr.set(i),i=Gr}},I=t.f||0,R=t.p||0,D=t.b||0,$=t.l,G=t.d,j=t.m,V=t.n,se=c*8;do{if(!$){I=Yc(e,R,1);var ue=Yc(e,R+1,3);if(R+=3,ue)if(ue==1)$=yG,G=vG,j=9,V=5;else if(ue==2){var be=Yc(e,R,31)+257,we=Yc(e,R+10,15)+4,Ie=be+Yc(e,R+5,31)+1;R+=14;for(var ke=new ul(Ie),ae=new ul(19),Ee=0;Ee<we;++Ee)ae[fG[Ee]]=Yc(e,R+Ee*3,7);R+=we*3;for(var Ze=Yb(ae),Qe=(1<<Ze)-1,vt=av(ae,Ze,1),Ee=0;Ee<Ie;){var st=vt[Yc(e,R,Qe)];R+=st&15;var Q=st>>4;if(Q<16)ke[Ee++]=Q;else{var He=0,rt=0;for(Q==16?(rt=3+Yc(e,R,3),R+=2,He=ke[Ee-1]):Q==17?(rt=3+Yc(e,R,7),R+=3):Q==18&&(rt=11+Yc(e,R,127),R+=7);rt--;)ke[Ee++]=He}}var Ge=ke.subarray(0,be),Ve=ke.subarray(be);j=Yb(Ge),V=Yb(Ve),$=av(Ge,j,1),G=av(Ve,V,1)}else ol(1);else{var Q=_G(R)+4,de=e[Q-4]|e[Q-3]<<8,oe=Q+de;if(oe>c){x&&ol(0);break}o&&P(D+de),i.set(e.subarray(Q,oe),D),t.b=D+=de,t.p=R=oe*8,t.f=I;continue}if(R>se){x&&ol(0);break}}o&&P(D+131072);for(var ut=(1<<j)-1,ve=(1<<V)-1,Fe=R;;Fe=R){var He=$[Jb(e,R)&ut],pt=He>>4;if(R+=He&15,R>se){x&&ol(0);break}if(He||ol(2),pt<256)i[D++]=pt;else if(pt==256){Fe=R,$=null;break}else{var Tt=pt-254;if(pt>264){var Ee=pt-257,Ct=XA[Ee];Tt=Yc(e,R,(1<<Ct)-1)+QA[Ee],R+=Ct}var _t=G[Jb(e,R)&ve],bt=_t>>4;_t||ol(3),R+=_t&15;var Ve=gG[bt];if(bt>3){var Ct=KA[bt];Ve+=Jb(e,R)&(1<<Ct)-1,R+=Ct}if(R>se){x&&ol(0);break}o&&P(D+131072);var nt=D+Tt;if(D<Ve){var kt=h-Ve,At=Math.min(Ve,nt);for(kt+D<0&&ol(3);D<At;++D)i[D]=a[kt+D]}for(;D<nt;++D)i[D]=i[D-Ve]}}t.l=$,t.p=Fe,t.b=D,t.f=I,$&&(I=1,t.m=j,t.d=G,t.n=V)}while(!I);return D!=i.length&&f?xG(i,0,D):i.subarray(0,D)},wG=new ul(0),SG=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&ol(6,"invalid gzip data");var t=e[3],i=10;t&4&&(i+=(e[10]|e[11]<<8)+2);for(var a=(t>>3&1)+(t>>4&1);a>0;a-=!e[i++]);return i+(t&2)},CG=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},TG=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&ol(6,"invalid zlib data"),(e[1]>>5&1)==1&&ol(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function MG(e,t){return pS(e,{i:2},t,t)}function PG(e,t){var i=SG(e);return i+8>e.length&&ol(6,"invalid gzip data"),pS(e.subarray(i,-8),{i:2},new ul(CG(e)),t)}function EG(e,t){return pS(e.subarray(TG(e),-4),{i:2},t,t)}function IG(e,t){return e[0]==31&&e[1]==139&&e[2]==8?PG(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?MG(e,t):EG(e,t)}var kG=typeof TextDecoder<"u"&&new TextDecoder,AG=0;try{kG.decode(wG,{stream:!0}),AG=1}catch{}var RG=Object.defineProperty,DG=Math.pow,li=(e,t)=>RG(e,"name",{value:t,configurable:!0}),is=(e,t,i)=>new Promise((a,c)=>{var h=x=>{try{o(i.next(x))}catch(P){c(P)}},f=x=>{try{o(i.throw(x))}catch(P){c(P)}},o=x=>x.done?a(x.value):Promise.resolve(x.value).then(h,f);o((i=i.apply(e,t)).next())});li((e,t)=>{let i=!1,a="",c=L.GridLayer.extend({createTile:li((h,f)=>{let o=document.createElement("img"),x=new AbortController,P=x.signal;return o.cancel=()=>{x.abort()},i||(e.getHeader().then(I=>{I.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):I.tileType===2?a="image/png":I.tileType===3?a="image/jpeg":I.tileType===4?a="image/webp":I.tileType===5&&(a="image/avif")}),i=!0),e.getZxy(h.z,h.x,h.y,P).then(I=>{if(I){let R=new Blob([I.data],{type:a}),D=window.URL.createObjectURL(R);o.src=D}else o.style.display="none";o.cancel=void 0,f(void 0,o)}).catch(I=>{if(I.name!=="AbortError")throw I}),o},"createTile"),_removeTile:li(function(h){let f=this._tiles[h];f&&(f.el.cancel&&f.el.cancel(),f.el.width=0,f.el.height=0,f.el.deleted=!0,L.DomUtil.remove(f.el),delete this._tiles[h],this.fire("tileunload",{tile:f.el,coords:this._keyToTileCoords(h)}))},"_removeTile")});return new c(t)},"leafletRasterLayer");var zG=li(e=>(t,i)=>{if(i instanceof AbortController)return e(t,i);let a=new AbortController;return e(t,a).then(c=>i(void 0,c.data,c.cacheControl||"",c.expires||""),c=>i(c)).catch(c=>i(c)),{cancel:li(()=>a.abort(),"cancel")}},"v3compat"),tR=class{constructor(t){this.tilev4=li((i,a)=>is(this,null,function*(){if(i.type==="json"){let $=i.url.substr(10),G=this.tiles.get($);if(G||(G=new TP($),this.tiles.set($,G)),this.metadata){let V=yield G.getTileJson(i.url);return a.signal.throwIfAborted(),{data:V}}let j=yield G.getHeader();return a.signal.throwIfAborted(),(j.minLon>=j.maxLon||j.minLat>=j.maxLat)&&console.error(`Bounds of PMTiles archive ${j.minLon},${j.minLat},${j.maxLon},${j.maxLat} are not valid.`),{data:{tiles:[`${i.url}/{z}/{x}/{y}`],minzoom:j.minZoom,maxzoom:j.maxZoom,bounds:[j.minLon,j.minLat,j.maxLon,j.maxLat]}}}let c=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),h=i.url.match(c);if(!h)throw new Error("Invalid PMTiles protocol URL");let f=h[1],o=this.tiles.get(f);o||(o=new TP(f),this.tiles.set(f,o));let x=h[2],P=h[3],I=h[4],R=yield o.getHeader(),D=yield o?.getZxy(+x,+P,+I,a.signal);if(a.signal.throwIfAborted(),D)return{data:new Uint8Array(D.data),cacheControl:D.cacheControl,expires:D.expires};if(R.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=zG(this.tilev4),this.tiles=new Map,this.metadata=t?.metadata||!1,this.errorOnMissingTile=t?.errorOnMissingTile||!1}add(t){this.tiles.set(t.source.getKey(),t)}get(t){return this.tiles.get(t)}};li(tR,"Protocol");var OG=tR;function rR(e,t){return(t>>>0)*4294967296+(e>>>0)}li(rR,"toNum");function nR(e,t){let i=t.buf,a=i[t.pos++],c=(a&112)>>4;if(a<128||(a=i[t.pos++],c|=(a&127)<<3,a<128)||(a=i[t.pos++],c|=(a&127)<<10,a<128)||(a=i[t.pos++],c|=(a&127)<<17,a<128)||(a=i[t.pos++],c|=(a&127)<<24,a<128)||(a=i[t.pos++],c|=(a&1)<<31,a<128))return rR(e,c);throw new Error("Expected varint not more than 10 bytes")}li(nR,"readVarintRemainder");function dg(e){let t=e.buf,i=t[e.pos++],a=i&127;return i<128||(i=t[e.pos++],a|=(i&127)<<7,i<128)||(i=t[e.pos++],a|=(i&127)<<14,i<128)||(i=t[e.pos++],a|=(i&127)<<21,i<128)?a:(i=t[e.pos],a|=(i&15)<<28,nR(a,e))}li(dg,"readVarint");function mS(e,t,i,a,c){return c===0?a!==0?[e-1-i,e-1-t]:[i,t]:[t,i]}li(mS,"rotate");function iR(e,t,i){if(e>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(t>=1<<e||i>=1<<e)throw new Error("tile x/y outside zoom level bounds");let a=((1<<e)*(1<<e)-1)/3,c=e-1,[h,f]=[t,i];for(let o=1<<c;o>0;o>>=1){let x=h&o,P=f&o;a+=(3*x^P)*(1<<c),[h,f]=mS(o,h,f,x,P),c--}return a}li(iR,"zxyToTileId");function oR(e){let t=3*e+1;return t<4294967296?31-Math.clz32(t):63-Math.clz32(t/4294967296)}li(oR,"tileIdToZ");function LG(e){let t=oR(e)>>1;if(t>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");let i=((1<<t)*(1<<t)-1)/3,a=e-i,c=0,h=0,f=1<<t;for(let o=1;o<f;o<<=1){let x=o&a/2,P=o&(a^x);[c,h]=mS(o,c,h,x,P),a=a/2,c+=x,h+=P}return[t,c,h]}li(LG,"tileIdToZxy");var FG=(e=>(e[e.Unknown=0]="Unknown",e[e.None=1]="None",e[e.Gzip=2]="Gzip",e[e.Brotli=3]="Brotli",e[e.Zstd=4]="Zstd",e))(FG||{});function m1(e,t){return is(this,null,function*(){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream>"u")return IG(new Uint8Array(e));let i=new Response(e).body;if(!i)throw new Error("Failed to read response stream");let a=i.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(a).arrayBuffer()}throw new Error("Compression method not supported")})}li(m1,"defaultDecompress");var BG=(e=>(e[e.Unknown=0]="Unknown",e[e.Mvt=1]="Mvt",e[e.Png=2]="Png",e[e.Jpeg=3]="Jpeg",e[e.Webp=4]="Webp",e[e.Avif=5]="Avif",e[e.Mlt=6]="Mlt",e))(BG||{});function sR(e){return e===1?".mvt":e===2?".png":e===3?".jpg":e===4?".webp":e===5?".avif":e===6?".mlt":""}li(sR,"tileTypeExt");var $G=127;function aR(e,t){let i=0,a=e.length-1;for(;i<=a;){let c=a+i>>1,h=t-e[c].tileId;if(h>0)i=c+1;else if(h<0)a=c-1;else return e[c]}return a>=0&&(e[a].runLength===0||t-e[a].tileId<e[a].runLength)?e[a]:null}li(aR,"findTile");var jG=class{constructor(t){this.file=t}getKey(){return this.file.name}getBytes(t,i){return is(this,null,function*(){return{data:yield this.file.slice(t,t+i).arrayBuffer()}})}};li(jG,"FileSource");var lR=class{constructor(t,i=new Headers){var a,c;this.url=t,this.customHeaders=i,this.mustReload=!1;let h="";"navigator"in globalThis&&(h=(c=(a=globalThis.navigator)==null?void 0:a.userAgent)!=null?c:"");let f=h.indexOf("Windows")>-1,o=/Chrome|Chromium|Edg|OPR|Brave/.test(h);this.chromeWindowsNoCache=!1,f&&o&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(t){this.customHeaders=t}getBytes(t,i,a,c){return is(this,null,function*(){let h,f;a?f=a:(h=new AbortController,f=h.signal);let o=new Headers(this.customHeaders);o.set("range",`bytes=${t}-${t+i-1}`);let x;this.mustReload?x="reload":this.chromeWindowsNoCache&&(x="no-store");let P=yield fetch(this.url,{signal:f,cache:x,headers:o});if(t===0&&P.status===416){let D=P.headers.get("Content-Range");if(!D||!D.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let $=+D.substr(8);P=yield fetch(this.url,{signal:f,cache:"reload",headers:{range:`bytes=0-${$-1}`}})}let I=P.headers.get("Etag");if(I!=null&&I.startsWith("W/")&&(I=null),P.status===416||c&&I&&I!==c)throw this.mustReload=!0,new Ww(`Server returned non-matching ETag ${c} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(P.status>=300)throw new Error(`Bad response code: ${P.status}`);let R=P.headers.get("Content-Length");if(P.status===200&&(!R||+R>i))throw h&&h.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield P.arrayBuffer(),etag:I||void 0,cacheControl:P.headers.get("Cache-Control")||void 0,expires:P.headers.get("Expires")||void 0}})}};li(lR,"FetchSource");var NG=lR;function Wl(e,t){let i=e.getUint32(t+4,!0),a=e.getUint32(t+0,!0);return i*DG(2,32)+a}li(Wl,"getUint64");function cR(e,t){let i=new DataView(e),a=i.getUint8(7);if(a>3)throw new Error(`Archive is spec version ${a} but this library supports up to spec version 3`);return{specVersion:a,rootDirectoryOffset:Wl(i,8),rootDirectoryLength:Wl(i,16),jsonMetadataOffset:Wl(i,24),jsonMetadataLength:Wl(i,32),leafDirectoryOffset:Wl(i,40),leafDirectoryLength:Wl(i,48),tileDataOffset:Wl(i,56),tileDataLength:Wl(i,64),numAddressedTiles:Wl(i,72),numTileEntries:Wl(i,80),numTileContents:Wl(i,88),clustered:i.getUint8(96)===1,internalCompression:i.getUint8(97),tileCompression:i.getUint8(98),tileType:i.getUint8(99),minZoom:i.getUint8(100),maxZoom:i.getUint8(101),minLon:i.getInt32(102,!0)/1e7,minLat:i.getInt32(106,!0)/1e7,maxLon:i.getInt32(110,!0)/1e7,maxLat:i.getInt32(114,!0)/1e7,centerZoom:i.getUint8(118),centerLon:i.getInt32(119,!0)/1e7,centerLat:i.getInt32(123,!0)/1e7,etag:t}}li(cR,"bytesToHeader");function gS(e){let t={buf:new Uint8Array(e),pos:0},i=dg(t),a=[],c=0;for(let h=0;h<i;h++){let f=dg(t);a.push({tileId:c+f,offset:0,length:0,runLength:1}),c+=f}for(let h=0;h<i;h++)a[h].runLength=dg(t);for(let h=0;h<i;h++)a[h].length=dg(t);for(let h=0;h<i;h++){let f=dg(t);f===0&&h>0?a[h].offset=a[h-1].offset+a[h-1].length:a[h].offset=f-1}return a}li(gS,"deserializeIndex");var uR=class extends Error{};li(uR,"EtagMismatch");var Ww=uR;function yS(e,t){return is(this,null,function*(){let i=yield e.getBytes(0,16384);if(new DataView(i.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let a=i.data.slice(0,$G),c=cR(a,i.etag),h=i.data.slice(c.rootDirectoryOffset,c.rootDirectoryOffset+c.rootDirectoryLength),f=`${e.getKey()}|${c.etag||""}|${c.rootDirectoryOffset}|${c.rootDirectoryLength}`,o=gS(yield t(h,c.internalCompression));return[c,[f,o.length,o]]})}li(yS,"getHeaderAndRoot");function vS(e,t,i,a,c){return is(this,null,function*(){let h=yield e.getBytes(i,a,void 0,c.etag),f=yield t(h.data,c.internalCompression),o=gS(f);if(o.length===0)throw new Error("Empty directory is invalid");return o})}li(vS,"getDirectory");var VG=class{constructor(t=100,i=!0,a=m1){this.cache=new Map,this.maxCacheEntries=t,this.counter=1,this.decompress=a}getHeader(t){return is(this,null,function*(){let i=t.getKey(),a=this.cache.get(i);if(a)return a.lastUsed=this.counter++,a.data;let c=yield yS(t,this.decompress);return c[1]&&this.cache.set(c[1][0],{lastUsed:this.counter++,data:c[1][2]}),this.cache.set(i,{lastUsed:this.counter++,data:c[0]}),this.prune(),c[0]})}getDirectory(t,i,a,c){return is(this,null,function*(){let h=`${t.getKey()}|${c.etag||""}|${i}|${a}`,f=this.cache.get(h);if(f)return f.lastUsed=this.counter++,f.data;let o=yield vS(t,this.decompress,i,a,c);return this.cache.set(h,{lastUsed:this.counter++,data:o}),this.prune(),o})}prune(){if(this.cache.size>this.maxCacheEntries){let t=1/0,i;this.cache.forEach((a,c)=>{a.lastUsed<t&&(t=a.lastUsed,i=c)}),i&&this.cache.delete(i)}}invalidate(t){return is(this,null,function*(){this.cache.delete(t.getKey())})}};li(VG,"ResolvedValueCache");var hR=class{constructor(t=100,i=!0,a=m1){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=t,this.counter=1,this.decompress=a}getHeader(t){return is(this,null,function*(){let i=t.getKey(),a=this.cache.get(i);if(a)return a.lastUsed=this.counter++,yield a.data;let c=new Promise((h,f)=>{yS(t,this.decompress).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),h(o[0]),this.prune()}).catch(o=>{f(o)})});return this.cache.set(i,{lastUsed:this.counter++,data:c}),c})}getDirectory(t,i,a,c){return is(this,null,function*(){let h=`${t.getKey()}|${c.etag||""}|${i}|${a}`,f=this.cache.get(h);if(f)return f.lastUsed=this.counter++,yield f.data;let o=new Promise((x,P)=>{vS(t,this.decompress,i,a,c).then(I=>{x(I),this.prune()}).catch(I=>{P(I)})});return this.cache.set(h,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let t=1/0,i;this.cache.forEach((a,c)=>{a.lastUsed<t&&(t=a.lastUsed,i=c)}),i&&this.cache.delete(i)}}invalidate(t){return is(this,null,function*(){let i=t.getKey();if(this.invalidations.get(i))return yield this.invalidations.get(i);this.cache.delete(t.getKey());let a=new Promise((c,h)=>{this.getHeader(t).then(f=>{c(),this.invalidations.delete(i)}).catch(f=>{h(f)})});this.invalidations.set(i,a)})}};li(hR,"SharedPromiseCache");var UG=hR,dR=class{constructor(t,i,a){typeof t=="string"?this.source=new NG(t):this.source=t,a?this.decompress=a:this.decompress=m1,i?this.cache=i:this.cache=new UG}getHeader(){return is(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(t,i,a,c){return is(this,null,function*(){let h=iR(t,i,a),f=yield this.cache.getHeader(this.source);if(t<f.minZoom||t>f.maxZoom)return;let o=f.rootDirectoryOffset,x=f.rootDirectoryLength;for(let P=0;P<=3;P++){let I=yield this.cache.getDirectory(this.source,o,x,f),R=aR(I,h);if(R){if(R.runLength>0){let D=yield this.source.getBytes(f.tileDataOffset+R.offset,R.length,c,f.etag);return{data:yield this.decompress(D.data,f.tileCompression),cacheControl:D.cacheControl,expires:D.expires}}o=f.leafDirectoryOffset+R.offset,x=R.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(t,i,a,c){return is(this,null,function*(){try{return yield this.getZxyAttempt(t,i,a,c)}catch(h){if(h instanceof Ww)return this.cache.invalidate(this.source),yield this.getZxyAttempt(t,i,a,c);throw h}})}getMetadataAttempt(){return is(this,null,function*(){let t=yield this.cache.getHeader(this.source),i=yield this.source.getBytes(t.jsonMetadataOffset,t.jsonMetadataLength,void 0,t.etag),a=yield this.decompress(i.data,t.internalCompression),c=new TextDecoder("utf-8");return JSON.parse(c.decode(a))})}getMetadata(){return is(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(t){if(t instanceof Ww)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw t}})}getTileJson(t){return is(this,null,function*(){let i=yield this.getHeader(),a=yield this.getMetadata(),c=sR(i.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${t}/{z}/{x}/{y}${c}`],vector_layers:a.vector_layers,attribution:a.attribution,description:a.description,name:a.name,version:a.version,bounds:[i.minLon,i.minLat,i.maxLon,i.maxLat],center:[i.centerLon,i.centerLat,i.centerZoom],minzoom:i.minZoom,maxzoom:i.maxZoom}})}};li(dR,"PMTiles");var TP=dR;let MP=!1;function fR(){if(MP)return;const e=new OG;ZA.addProtocol("pmtiles",e.tile),MP=!0}const GG=e=>{fR();const{mode:t="light",children:i,tileRootUrl:a}=e,c=dS[t];return q.jsxs(q.Fragment,{children:[q.jsx(tn,{id:"background",type:"background",paint:{"background-color":c.land}}),q.jsxs(wf,{id:"world",type:"vector",url:`pmtiles://${a}/world.pmtiles`,children:[q.jsx(tn,{"source-layer":"water",type:"fill",paint:{"fill-color":c.water}}),i,q.jsx(tn,{"source-layer":"states",type:"line",paint:{"line-color":c.stateBorder,"line-width":1,"line-opacity":1,"line-dasharray":[2,2]}}),q.jsx(tn,{"source-layer":"countries",type:"line",filter:["!=",["get","name"],"Serbia-Kosovo"],paint:{"line-color":c.countryBorder,"line-width":2,"line-opacity":1}}),q.jsx(tn,{"source-layer":"countries",type:"line",filter:["==",["get","name"],"Serbia-Kosovo"],paint:{"line-color":c.countryBorder,"line-width":2,"line-opacity":1,"line-dasharray":[3,2]}})]})]})},qG=new Set([10,0,11,13,16,15,3,2,17,8,14,12,5,9,1,7,4,6]),pR={0:new Set,1:new Set([10]),2:new Set([0]),3:new Set([11]),4:new Set([13]),5:new Set([16]),6:new Set([16,13]),7:new Set([15]),8:new Set([15,11]),9:new Set([3]),10:new Set([3,13]),11:new Set([3,15]),12:new Set([3,16]),13:new Set([2]),14:new Set([2,11]),15:new Set([2,15]),16:new Set([17]),17:new Set([17,2]),18:new Set([17,3]),19:new Set([17,15]),20:new Set([14]),21:new Set([14,11]),22:new Set([8]),23:new Set([8,3]),24:new Set([8,17]),25:new Set([12]),26:new Set([12,2]),27:new Set([12,11]),28:new Set([12,14]),29:new Set([5]),30:new Set([5,2]),31:new Set([5,12]),32:new Set([9]),33:new Set([9,2]),34:new Set([9,5]),35:new Set([9,17]),36:new Set([1]),37:new Set([1,12]),38:new Set([1,14]),39:new Set([7]),40:new Set([7,1]),41:new Set([7,5]),42:new Set([7,9]),43:new Set([7,12]),44:new Set([4]),45:new Set([4,7]),46:new Set([4,9]),47:new Set([6]),48:new Set([6,1]),49:new Set([6,14])},HG={1:0,2:1,3:2,7:13,13:9,31:3,37:4,43:20,44:7,47:5,17:29,27:22,36:25,50:16,18:32,19:36,26:39,21:44,22:47};for(const e of Object.values(HG))e!==0&&Np(pR[e].size===1);function WG(e){const t=new Set;for(const[i,a]of Object.entries(pR))[...a].every(c=>e.has(c))&&t.add(Number(i));return t}const ZG=new Set([0,1,2,3,4,5,6,7,11,12,9,10]),XG={0:new Set,1:new Set([0]),2:new Set([1]),3:new Set([2]),4:new Set([3]),5:new Set([3,2]),6:new Set([4]),7:new Set([4,0]),8:new Set([4,1]),9:new Set([5]),10:new Set([5,0]),11:new Set([6]),12:new Set([6,2]),15:new Set([9]),16:new Set([7]),17:new Set([7,0]),18:new Set([7,4]),19:new Set([10]),20:new Set([11]),21:new Set([11,0]),22:new Set([11,7]),23:new Set([12]),24:new Set([12,4]),25:new Set([12,1])};function KG(e){const t=new Set;for(const[i,a]of Object.entries(XG))[...a].every(c=>e.has(c))&&t.add(Number(i));return t}var mR=(e=>(e[e.Road=0]="Road",e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.Green=3]="Green",e[e.NavRed=4]="NavRed",e[e.NavGreen=5]="NavGreen",e[e.NavBlue=6]="NavBlue",e[e.NavYellow=7]="NavYellow",e[e.NavPurple=8]="NavPurple",e))(mR||{});const YG=new Set([10,17]),JG=new Set([7,11]),gR=new Set(Array.from({length:20},(e,t)=>t)),QG=new Set(gR.difference(JG)),eq=new Set(gR.difference(YG)),tq=e=>{const{game:t,tileRootUrl:i,visibleIcons:a=t==="ats"?QG:eq,enableIconAutoHide:c=!0,showSecrets:h="showAsNormal",mode:f="light",specialEvent:o}=e,x=o?!0:t==="ats"?IP(t,e.dlcs??qG):IP(t,e.dlcs??ZG),P=h!=="hide"?!0:["==",["get","secret"],!1],I=dS[f];fR();const R=D9();return Y.useEffect(()=>{if(!R.current)return;const D=R.current;D.on("styleimagemissing",$=>{if($.id!=="exit-sign"||D.hasImage("exit-sign"))return;const G=64,j=4,V=new Uint8Array(G*G*j);for(let ue=0;ue<G;ue++)for(let Q=0;Q<G;Q++){const de=(Q*G+ue)*j;Q===0||Q===G-1||ue===0||ue===G-1?(V[de+0]=136,V[de+1]=136,V[de+2]=136,V[de+3]=255):ue===1||ue===2||ue===G-2||ue===G-3||Q===1||Q===2||Q===G-2||Q===G-3?(V[de+0]=255,V[de+1]=255,V[de+2]=255,V[de+3]=255):(V[de+0]=82,V[de+1]=177,V[de+2]=129,V[de+3]=255)}const se=8;D.addImage("exit-sign",{width:G,height:G,data:V},{stretchX:[[se,G-se]],stretchY:[[se,G-se]],content:[se,se,G-se,G-se],pixelRatio:2})})},[R.current]),q.jsxs(wf,{id:t,type:"vector",url:`pmtiles://${i}/${o??t}.pmtiles`,children:[q.jsx(tn,{id:t+"mapAreas","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"mapArea"],x,P],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":rw(f),"fill-outline-color":["case",["==",["get","color"],mR.Road],I.mapAreaOutline,rw(f)]}}),q.jsx(tn,{id:t+"prefabs","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"prefab"],x,P],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":rw(f)}}),q.jsx(rq,{game:t,specialEvent:o,tileRootUrl:i,mode:f,color:I.footprint}),q.jsx(tn,{id:t+"hidden-roads","source-layer":t,type:"line",minzoom:9,filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","hidden"],!0],x],paint:{"line-color":I.hiddenRoad,"line-width":1,"line-opacity":.7}}),q.jsx(tn,{id:t+"secret-roads-case","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],["==",["get","secret"],h!=="hide"],x],layout:ew,paint:{"line-color":kP(f,h==="showAsDashed"?f==="light"?"darken":"lighten":"none"),"line-gap-width":tw,"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,14,2,16,3],...h==="showAsDashed"?{"line-dasharray":[2,2]}:{}}}),q.jsx(tn,{id:t+"visible-roads-case","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],["==",["get","secret"],!1],x],layout:ew,paint:{"line-color":kP(f),"line-gap-width":tw,"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,14,2,16,3]}}),q.jsx(tn,{id:t+"visible-roads","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],x,P],layout:ew,paint:{"line-color":lq(f),"line-width":tw}}),q.jsx(tn,{id:t+"ferries","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],paint:{"line-color":I.ferryLine,"line-width":1,"line-opacity":.8,"line-dasharray":[2,2]}}),q.jsx(tn,{id:t+"trains-a","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":I.trainLine,"line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,-6]}}),q.jsx(tn,{id:t+"trains-b","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":I.trainLine,"line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,6]}}),q.jsx(tn,{id:t+"train-hatch","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":I.trainLine,"line-width":10,"line-opacity":.8,"line-dasharray":[.1,1]}}),e.children,q.jsx(tn,{id:t+"ferry-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],layout:{...Wu,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":I.ferryHalo,"text-color":I.ferryLabel}}),q.jsx(tn,{id:t+"train-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],layout:{...Wu,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":I.trainHalo,"text-color":I.trainLabel}}),a.has(15)&&q.jsx(tn,{id:t+"company-icons","source-layer":t,type:"symbol",minzoom:c?8:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"company"],x,P],layout:td(c,1,1.25,3.5)}),t==="ets2"&&a.has(16)&&q.jsx(tn,{id:"euro-road-overlays","source-layer":t,minzoom:c?4.5:0,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["!",["in",["get","sprite"],["literal",PP]]],P],layout:td(c,.4*1.25,.75*1.25,1.25*1.25)}),t==="ats"&&a.has(16)&&q.jsx(tn,{id:t+"road-interstate-overlays","source-layer":t,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","is",["get","sprite"]],0],x,P],layout:td(c,.4,.75,1.25)}),t==="ats"&&a.has(16)&&q.jsx(tn,{id:t+"road-us-route-overlays","source-layer":t,type:"symbol",minzoom:c?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","us",["get","sprite"]],0],x,P],layout:td(c,.4,.75,1.25)}),t==="ats"&&a.has(16)&&q.jsx(tn,{id:t+"road-state-route-overlays","source-layer":t,type:"symbol",minzoom:c?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],x,P,["!",["any",["==",["index-of","is",["get","sprite"]],0],["==",["index-of","us",["get","sprite"]],0],["in",["get","sprite"],["literal",PP]]]]],layout:td(c,.4,.75,1.25)}),a.has(17)&&q.jsx(tn,{id:t+"exit-points","source-layer":t,type:"symbol",paint:{"text-color":"#fff"},minzoom:c?10:0,layout:{...td(c,.4,.75,1.25),...Wu,"text-field":"{name}","text-size":["interpolate",["linear"],["zoom"],4,4,10,10],"icon-text-fit":"both","icon-text-fit-padding":[0,2,0,2],"icon-image":"exit-sign"},filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"exit"],x]}),a.has(14)&&q.jsx(tn,{id:t+"city-labels-small","source-layer":t,type:"symbol",minzoom:c?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],[">",["get","scaleRank"],6],x],layout:{...Wu,"text-field":"{name}","text-allow-overlap":!c,"text-variable-anchor":fg,"text-size":12,"icon-image":Qb,"icon-allow-overlap":!c,"icon-size":.6},paint:I.primaryTextPaint}),a.has(14)&&q.jsx(tn,{id:t+"city-labels-medium","source-layer":t,type:"symbol",minzoom:c?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],6],[">",["get","scaleRank"],3],x],layout:{...Wu,"text-field":"{name}","text-allow-overlap":!c,"text-variable-anchor":fg,"text-size":13,"icon-image":Qb,"icon-allow-overlap":!c,"icon-size":.6},paint:I.primaryTextPaint}),a.has(14)&&q.jsx(tn,{id:t+"city-labels-big","source-layer":t,type:"symbol",minzoom:c?4:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],3],x],layout:{...Wu,"text-field":"{name}","text-allow-overlap":!c,"text-variable-anchor":fg,"text-size":14,"icon-image":Qb,"icon-allow-overlap":!c,"icon-size":.8},paint:I.primaryTextPaint}),t==="ets2"&&a.has(14)&&q.jsx(tn,{id:t+"country-labels","source-layer":t,type:"symbol",minzoom:4,maxzoom:6.5,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"country"]],layout:{...Wu,"text-font":["Klokantech Noto Sans Bold"],"text-field":"{name}","text-variable-anchor":fg,"text-size":14},paint:I.primaryTextPaint}),t==="ats"&&a.has(14)&&q.jsx(tn,{id:t+"country-labels","source-layer":t,type:"symbol",minzoom:4,maxzoom:6.5,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"country"]],layout:{...Wu,"text-font":["Open Sans Light"],"text-field":"{name}","text-transform":"uppercase","text-variable-anchor":fg,"text-size":["step",["zoom"],10,5,13]},paint:I.secondaryTextPaint}),Zw(a)&&q.jsx(tn,{id:t+"poi-icons","source-layer":t,type:"symbol",minzoom:c?7:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],EP(a),x,P],layout:td(c,.6,1.25,2.5,{vertical:2,horizontal:2})}),Zw(a)&&(a.has(8)||a.has(9)||a.has(5))&&q.jsx(tn,{id:t+"poi-icon-labels","source-layer":t,type:"symbol",minzoom:c?9.5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["any",["in",["get","poiType"],["literal",["viewpoint","landmark"]]],["all",["==",["get","poiType"],"facility"],["==",["get","sprite"],"dealer_ico"]]],EP(a),x,P],layout:{...td(c,.6,1.25,2.5,{vertical:2,horizontal:2}),...Wu,"text-field":"{poiName}","text-allow-overlap":!c,"text-variable-anchor":["left","right","top","bottom"],"text-radial-offset":1.5,"text-size":10},paint:I.primaryTextPaint}),(a.has(18)||a.has(19))&&q.jsx(tn,{id:t+"traffic-icons","source-layer":t,type:"symbol",minzoom:c?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"traffic"],sq(a),x,P],layout:td(c,.6*.5,1.25*.5,2.5*.5,{vertical:2,horizontal:2})})]})},rq=({game:e,tileRootUrl:t,color:i,mode:a,specialEvent:c})=>q.jsxs(wf,{id:e+"footprints",type:"vector",url:`pmtiles://${t}/${c??e}-footprints.pmtiles`,children:[q.jsx(tn,{id:e+"footprints","source-layer":"footprints",type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-color":i,"fill-opacity":["step",["zoom"],1,9,.8]}}),q.jsx(tn,{id:e+"extrusions",minzoom:9,"source-layer":"footprints",type:"fill-extrusion",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-extrusion-color":i,"fill-extrusion-height":["interpolate",["exponential",1.5],["zoom"],9,["*",10,["get","height"]],13,["*",20,["get","height"]]],"fill-extrusion-opacity":a==="light"?.33:.67}})]});function td(e,t,i,a,c={vertical:10,horizontal:30}){const h=["literal",[c.vertical,c.horizontal]];return{"icon-image":"{sprite}","icon-allow-overlap":!e,"icon-padding":h,"icon-size":["interpolate",["exponential",1.5],["zoom"],4,t,9,i,13,a]}}const Qb=["step",["zoom"],["case",["==",["get","capital"],2],"dotdot","dot"],8,""],nq=[9,8,6,7,2,0,4,5,12,3,13,1,10,11],iq=[18,19],PP=["weigh_ico","toll_ico","agri_check","border_ico"];function Zw(e){return nq.some(t=>e.has(t))}function oq(e){return iq.some(t=>e.has(t))}function sq(e){Qs.checkArgument(oq(e));const t=[];return e.has(18)&&t.push("roadwork"),e.has(19)&&t.push("railcrossing"),["any",t.length>0?["in",["get","sprite"],["literal",t]]:!1]}function EP(e){Qs.checkArgument(Zw(e));const t=[];e.has(9)&&t.push("landmark"),e.has(8)&&t.push("viewpoint"),e.has(6)&&t.push("ferry"),e.has(7)&&t.push("train");const i=[];e.has(0)&&i.push("gas_ico"),e.has(4)&&i.push("service_ico"),e.has(13)&&i.push("weigh_station_ico"),e.has(5)&&i.push("dealer_ico"),e.has(12)&&i.push("garage_large_ico"),e.has(3)&&i.push("recruitment_ico"),e.has(2)&&i.push("parking_ico");const a=[];e.has(13)&&a.push("weigh_ico"),e.has(1)&&a.push("toll_ico"),e.has(10)&&a.push("agri_check"),e.has(11)&&a.push("border_ico");const c=t.length>0?["in",["get","poiType"],["literal",t]]:!1,h=i.length>0?["all",["==",["get","poiType"],"facility"],["in",["get","sprite"],["literal",i]]]:!1,f=a.length>0?["all",["==",["get","poiType"],"road"],["in",["get","sprite"],["literal",a]]]:!1;return["any",c,h,f]}function IP(e,t){let i;return e==="ats"?i=WG(t):(i=KG(t),i.add(null)),["in",["get","dlcGuard"],["literal",[...i]]]}const fg=["step",["zoom"],["literal",["top","bottom","right","left"]],7,["literal",["center"]]],Wu={"text-radial-offset":.5,"text-justify":"auto","text-font":["Klokantech Noto Sans Regular"]},ew={"line-cap":"round","line-join":"bevel"},tw=["interpolate",["exponential",1.5],["zoom"],3,.8,14,30,16,150],yR={light:{freeway:["#fde293","#f8c248"],divided:["#ffffff","#dddddd"],no_vehicles:["#aaaaaa","#888888"],local:["#f1f3f4","#dddddd"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]},dark:{freeway:["#95813e","#372f21"],divided:["#3c4043","#4c5043"],no_vehicles:["#606166","#888888"],local:["#606166","#333"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]}},aq={light:{0:"hsl(200, 8%, 92%)",1:"hsl(38, 59%, 76%)",2:"hsl(38, 64%, 58%)",3:"hsl(92, 31%, 70%)",4:"hsl(0, 100%, 30%)",5:"hsl(107, 51%, 43%)",6:"hsl(201, 53%, 39%)",7:"hsl(53, 84%, 53%)",8:"hsl(267,46% ,45%)"},dark:{0:"hsl(200, 2%, 36%)",1:"hsl(38, 25%, 35%)",2:"hsl(38, 25%, 25%)",3:"hsl(143, 20%, 25%)",4:"hsl(0, 100%, 25%)",5:"hsl(107, 51%, 25%)",6:"hsl(201, 53%, 25%)",7:"hsl(53, 84%, 25%)",8:"hsl(267, 46%, 25%)"}},lq=e=>["match",["get","roadType"],...Object.entries(yR[e]).flatMap(([t,[i]])=>[t,i]),"#f0f"],kP=(e,t="none")=>["match",["get","roadType"],...Object.entries(yR[e]).flatMap(([i,[,a]])=>[i,t==="darken"?cS(a).darken(.2).string():t==="lighten"?"#ccc":a]),"#b0b"],rw=e=>["match",["get","color"],...Object.entries(aq[e]).flatMap(([t,i])=>[Number(t),i]),"#b0b"],cq="/extra-labels.geojson",uq="/ets2-villages.geojson",hq={AR:void 0,AZ:void 0,CA:void 0,CO:void 0,IA:void 0,ID:void 0,KS:void 0,LA:void 0,MO:void 0,MT:void 0,NE:void 0,NM:void 0,NV:void 0,OK:void 0,OR:void 0,TX:void 0,UT:void 0,WA:void 0,WY:void 0},dq=new Set(Object.keys(hq)),fq=e=>{const{game:t,enableAutoHide:i=!0,mode:a="light"}=e,c=t==="ats"?cq:uq,h=t==="ats"?["all",["boolean",["get","show"],!0],["in",["slice",["get","country"],-2],["literal",[...e.enabledStates??dq]]]]:["boolean",!0],f=dS[a];return q.jsx(wf,{id:`${t}-scenery-towns`,type:"geojson",data:c,children:q.jsx(tn,{id:`${t}-scenery-towns`,type:"symbol",minzoom:i?7:0,filter:h,layout:{...Wu,"text-field":t==="ats"?"{text}":"{name}","text-allow-overlap":!i,"text-variable-anchor":fg,"text-size":10.5},paint:f.primaryTextPaint})})},_S={version:8,glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",sources:{},layers:[]},xS={get(e,t,i){return t==="sprite"&&typeof e.sprite=="string"&&/^\/\w/.exec(e.sprite.toString())?window.location.origin+e.sprite:Reflect.get(e,t,i)}},pq=new Proxy({..._S,sprite:"/sprites"},xS);new Proxy({..._S,sprite:"/halloween-sprites"},xS);new Proxy({..._S,sprite:"/christmas-sprites"},xS);const AP="https://maps.truckermudgeon.com",mq={ats:[[-124.477162,25.767968].map(e=>Math.floor(e)),[-88.928336,49.122384].map(e=>Math.ceil(e))].flat()},gq=e=>{console.log("render slippy map");const{Destinations:t,TrailerOrWaypointMarkers:i,PlayerMarker:a,center:c=tG(mq.ats),mode:h="light"}=e,f=Y.useRef(null),o=Y.useRef(null);return q.jsxs(G9,{ref:f,initialViewState:{longitude:c[0],latitude:c[1]},onLoad:()=>{e.onLoad(ea(f.current),ea(o?.current))},onDragStart:()=>e.onDragStart(),onZoomStart:x=>{x.originalEvent&&e.onDragStart()},style:{position:"absolute",top:0,left:0,width:"100vw",height:"100vh"},minZoom:4,maxZoom:15,mapStyle:pq,attributionControl:!1,children:[q.jsx(GG,{tileRootUrl:AP,mode:h}),q.jsx(tq,{tileRootUrl:AP,mode:h,game:"ats",children:q.jsxs(q.Fragment,{children:[q.jsx(fq,{mode:h,game:"ats"}),q.jsxs(wf,{id:"activeRoute",type:"geojson",data:{type:"FeatureCollection",features:[]},children:[q.jsx(tn,{id:"activeRouteLayer-case",type:"line",paint:{"line-color":"hsl(204,100%,40%)","line-gap-width":8,"line-width":4,"line-opacity":1}}),q.jsx(tn,{id:"activeRouteLayer",type:"line",paint:{"line-color":"hsl(204,100%,50%)","line-width":10,"line-opacity":1}})]}),Array.from({length:iG.size},(x,P)=>q.jsxs(wf,{id:`previewRoute-${P}`,type:"geojson",data:{type:"FeatureCollection",features:[]},children:[q.jsx(tn,{id:`previewRouteLayer-${P}-case`,type:"line",paint:{"line-color":"hsl(204,100%,40%)","line-gap-width":8,"line-width":4,"line-opacity":1}}),q.jsx(tn,{id:`previewRouteLayer-${P}`,type:"line",paint:{"line-color":"hsl(204,100%,50%)","line-width":10,"line-opacity":1}})]},`previewRoute-${P}`)),q.jsxs(wf,{id:"previewStepArrow",type:"geojson",data:{type:"FeatureCollection",features:[]},children:[q.jsx(tn,{id:"previewStepArrowCase",type:"line",layout:{"line-cap":"round"},paint:{"line-color":"#444","line-gap-width":11,"line-width":2,"line-opacity":1},filter:["in","$type","LineString"]}),q.jsx(tn,{id:"previewStepArrowArrow",type:"symbol",layout:{"icon-image":"triangle","icon-allow-overlap":!0,"icon-pitch-alignment":"map","icon-rotation-alignment":"map","icon-rotate":["get","bearing"]},filter:["in","$type","Point"]}),q.jsx(tn,{id:"previewStepArrowLine",type:"line",layout:{"line-cap":"round"},paint:{"line-color":"#fff","line-width":11,"line-opacity":1},filter:["in","$type","LineString"]})]},"previewStepArrow"),q.jsx(wf,{id:"activeRouteIcons",type:"geojson",data:{type:"FeatureCollection",features:[]},children:q.jsx(tn,{id:"activeRouteIconsLayer",type:"symbol",layout:{"icon-image":"{sprite}","icon-allow-overlap":!0},minzoom:10,filter:["in","$type","Point"]})})]})}),q.jsx(t,{}),q.jsx(i,{}),q.jsx(a,{mode:e.mode,ref:o}),q.jsx("div",{style:{fontSize:"0.9em",opacity:.25,background:"transparent",position:"absolute",right:"1em",bottom:2},children:q.jsx("a",{style:{color:"inherit",textDecoration:"none"},href:"https://github.com/truckermudgeon/maps",children:"TruckSim Maps"})})]})},vR=Y.createContext(null),yq=({children:e})=>{const[t,i]=Y.useState(null);return Y.useEffect(()=>{fetch("/sprites@2x.json").then(a=>a.json()).then(i).catch(console.error)},[]),q.jsx(vR.Provider,{value:t,children:e})},vq=()=>Y.useContext(vR),_q=e=>{if(console.log("render trailer or waypoints"),e.trailerPoint)return q.jsx(dx,{color:"#0c0",longitude:e.trailerPoint[0],latitude:e.trailerPoint[1]});if(!e.activeRoute)return null;const t=[],i=e.activeRoute.segments.length;for(let a=0;a<i;a++){const c=e.activeRoute.segments[a],h=Gg.decode(c.steps.at(-1).geometry),f=ea(h.at(-1)),o=a===i-1;t.push(q.jsx(dx,{color:o?"red":"blue",longitude:f[0],latitude:f[1],children:o?null:q.jsx(ii,{sx:{display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bolder",borderRadius:"50%",width:"1.6em",height:"1.6em",border:"0.15em solid",backgroundColor:"background.surface"},children:a+1})},f.join()+a))}return t},xq=()=>q.jsx(fn,{justifyContent:"center",alignItems:"center",sx:{position:"absolute",top:0,left:0,width:"100%",height:"100vh",zIndex:9999},bgcolor:"#0005",children:q.jsxs(Hv,{size:"lg",sx:{boxShadow:"lg",overflow:"hidden",maxWidth:"40ch"},children:[q.jsxs(Yr,{fontSize:"lg",display:"flex",justifyContent:"center",alignItems:"center",gap:1,children:[q.jsx(im,{variant:"solid",size:"sm",color:"neutral",sx:{mr:1}}),"Waiting for game telemetry..."]}),q.jsx(Yg,{}),q.jsxs(Yr,{fontSize:"sm",color:"neutral",children:["Please make sure:",q.jsxs("ul",{style:{paddingLeft:"1.5em",margin:"1ex 0 0 0"},children:[q.jsx("li",{children:"ATS and the Navigator client are running"}),q.jsx("li",{children:"your truck is on the road"})]})]})]})});function bq(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var t=1;t<=60;++t)e("EPSG:"+(32600+t),"+proj=utm +zone="+t+" +datum=WGS84 +units=m"),e("EPSG:"+(32700+t),"+proj=utm +zone="+t+" +south +datum=WGS84 +units=m");e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var Qp=1,em=2,Eg=3,wq=4,Xw=5,RP=6378137,Sq=6356752314e-3,DP=.0066943799901413165,lv=484813681109536e-20,jt=Math.PI/2,Cq=.16666666666666666,Tq=.04722222222222222,Mq=.022156084656084655,tr=1e-10,fs=.017453292519943295,th=57.29577951308232,Yn=Math.PI/4,kv=Math.PI*2,mo=3.14159265359,Oa={};Oa.greenwich=0;Oa.lisbon=-9.131906111111;Oa.paris=2.337229166667;Oa.bogota=-74.080916666667;Oa.madrid=-3.687938888889;Oa.rome=12.452333333333;Oa.bern=7.439583333333;Oa.jakarta=106.807719444444;Oa.ferro=-17.666666666667;Oa.brussels=4.367975;Oa.stockholm=18.058277777778;Oa.athens=23.7163375;Oa.oslo=10.722916666667;const Pq={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var zP=/[\s_\-\/\(\)]/g;function Af(e,t){if(e[t])return e[t];for(var i=Object.keys(e),a=t.toLowerCase().replace(zP,""),c=-1,h,f;++c<i.length;)if(h=i[c],f=h.toLowerCase().replace(zP,""),f===a)return e[h]}function Kw(e){var t={},i=e.split("+").map(function(o){return o.trim()}).filter(function(o){return o}).reduce(function(o,x){var P=x.split("=");return P.push(!0),o[P[0].toLowerCase()]=P[1],o},{}),a,c,h,f={proj:"projName",datum:"datumCode",rf:function(o){t.rf=parseFloat(o)},lat_0:function(o){t.lat0=o*fs},lat_1:function(o){t.lat1=o*fs},lat_2:function(o){t.lat2=o*fs},lat_ts:function(o){t.lat_ts=o*fs},lon_0:function(o){t.long0=o*fs},lon_1:function(o){t.long1=o*fs},lon_2:function(o){t.long2=o*fs},alpha:function(o){t.alpha=parseFloat(o)*fs},gamma:function(o){t.rectified_grid_angle=parseFloat(o)},lonc:function(o){t.longc=o*fs},x_0:function(o){t.x0=parseFloat(o)},y_0:function(o){t.y0=parseFloat(o)},k_0:function(o){t.k0=parseFloat(o)},k:function(o){t.k0=parseFloat(o)},a:function(o){t.a=parseFloat(o)},b:function(o){t.b=parseFloat(o)},r:function(o){t.a=t.b=parseFloat(o)},r_a:function(){t.R_A=!0},zone:function(o){t.zone=parseInt(o,10)},south:function(){t.utmSouth=!0},towgs84:function(o){t.datum_params=o.split(",").map(function(x){return parseFloat(x)})},to_meter:function(o){t.to_meter=parseFloat(o)},units:function(o){t.units=o;var x=Af(Pq,o);x&&(t.to_meter=x.to_meter)},from_greenwich:function(o){t.from_greenwich=o*fs},pm:function(o){var x=Af(Oa,o);t.from_greenwich=(x||parseFloat(o))*fs},nadgrids:function(o){o==="@null"?t.datumCode="none":t.nadgrids=o},axis:function(o){var x="ewnsud";o.length===3&&x.indexOf(o.substr(0,1))!==-1&&x.indexOf(o.substr(1,1))!==-1&&x.indexOf(o.substr(2,1))!==-1&&(t.axis=o)},approx:function(){t.approx=!0}};for(a in i)c=i[a],a in f?(h=f[a],typeof h=="function"?h(c):t[h]=c):t[a]=c;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var Av=1,_R=2,xR=3,mx=4,bR=5,bS=-1,Eq=/\s/,Iq=/[A-Za-z]/,kq=/[A-Za-z84_]/,g1=/[,\]]/,wR=/[\d\.E\-\+]/;function hd(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Av}hd.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==mx)for(;Eq.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case Av:return this.neutral(e);case _R:return this.keyword(e);case mx:return this.quoted(e);case bR:return this.afterquote(e);case xR:return this.number(e);case bS:return}};hd.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=mx;return}if(g1.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};hd.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Av;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Av,this.currentObject=this.stack.pop(),this.currentObject||(this.state=bS);return}};hd.prototype.number=function(e){if(wR.test(e)){this.word+=e;return}if(g1.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};hd.prototype.quoted=function(e){if(e==='"'){this.state=bR;return}this.word+=e};hd.prototype.keyword=function(e){if(kq.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=Av;return}if(g1.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};hd.prototype.neutral=function(e){if(Iq.test(e)){this.word=e,this.state=_R;return}if(e==='"'){this.word="",this.state=mx;return}if(wR.test(e)){this.word=e,this.state=xR;return}if(g1.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};hd.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===bS)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Aq(e){var t=new hd(e);return t.output()}function nw(e,t,i){Array.isArray(t)&&(i.unshift(t),t=null);var a=t?{}:e,c=i.reduce(function(h,f){return vg(f,h),h},a);t&&(e[t]=c)}function vg(e,t){if(!Array.isArray(e)){t[e]=!0;return}var i=e.shift();if(i==="PARAMETER"&&(i=e.shift()),e.length===1){if(Array.isArray(e[0])){t[i]={},vg(e[0],t[i]);return}t[i]=e[0];return}if(!e.length){t[i]=!0;return}if(i==="TOWGS84"){t[i]=e;return}if(i==="AXIS"){i in t||(t[i]=[]),t[i].push(e);return}Array.isArray(i)||(t[i]={});var a;switch(i){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[i]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&vg(e[2],t[i]);return;case"SPHEROID":case"ELLIPSOID":t[i]={name:e[0],a:e[1],rf:e[2]},e.length===4&&vg(e[3],t[i]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":e[0]=["name",e[0]],nw(t,i,e);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":e[0]=["name",e[0]],nw(t,i,e),t[i].type=i;return;default:for(a=-1;++a<e.length;)if(!Array.isArray(e[a]))return vg(e,t[i]);return nw(t,i,e)}}var Rq=.017453292519943295,Dq=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function zq(e,t){var i=t[0],a=t[1];!(i in e)&&a in e&&(e[i]=e[a],t.length===3&&(e[i]=t[2](e[i])))}function Hu(e){return e*Rq}function SR(e){for(var t=Object.keys(e),i=0,a=t.length;i<a;++i){var c=t[i];Dq.indexOf(c)!==-1&&Oq(e[c]),typeof e[c]=="object"&&SR(e[c])}}function Oq(e){if(e.AUTHORITY){var t=Object.keys(e.AUTHORITY)[0];t&&t in e.AUTHORITY&&(e.title=t+":"+e.AUTHORITY[t])}if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var i="",a=0,c=e.AXIS.length;a<c;++a){var h=[e.AXIS[a][0].toLowerCase(),e.AXIS[a][1].toLowerCase()];h[0].indexOf("north")!==-1||(h[0]==="y"||h[0]==="lat")&&h[1]==="north"?i+="n":h[0].indexOf("south")!==-1||(h[0]==="y"||h[0]==="lat")&&h[1]==="south"?i+="s":h[0].indexOf("east")!==-1||(h[0]==="x"||h[0]==="lon")&&h[1]==="east"?i+="e":(h[0].indexOf("west")!==-1||(h[0]==="x"||h[0]==="lon")&&h[1]==="west")&&(i+="w")}i.length===2&&(i+="u"),i.length===3&&(e.axis=i)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var f=e.GEOGCS;e.type==="GEOGCS"&&(f=e),f&&(f.DATUM?e.datumCode=f.DATUM.name.toLowerCase():e.datumCode=f.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),e.datumCode==="new_zealand_1949"&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode==="belge_1972"&&(e.datumCode="rnb72"),f.DATUM&&f.DATUM.SPHEROID&&(e.ellps=f.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=f.DATUM.SPHEROID.a,e.rf=parseFloat(f.DATUM.SPHEROID.rf,10)),f.DATUM&&f.DATUM.TOWGS84&&(e.datum_params=f.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function o(I){var R=e.to_meter||1;return I*R}var x=function(I){return zq(e,I)},P=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Hu],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Hu],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Hu],["lat0","latitude_of_origin",Hu],["lat0","standard_parallel_1",Hu],["lat1","standard_parallel_1",Hu],["lat2","standard_parallel_2",Hu],["azimuth","Azimuth"],["alpha","azimuth",Hu],["srsCode","name"]];P.forEach(x),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")?(e.lat0=Hu(e.lat1>0?90:-90),e.lat_ts=e.lat1):!e.lat_ts&&e.lat0&&e.projName==="Polar_Stereographic"&&(e.lat_ts=e.lat0,e.lat0=Hu(e.lat0>0?90:-90))}function CR(e){var t=Aq(e),i=t[0],a={};return vg(t,a),SR(a),a[i]}function Js(e){var t=this;if(arguments.length===2){var i=arguments[1];typeof i=="string"?i.charAt(0)==="+"?Js[e]=Kw(arguments[1]):Js[e]=CR(arguments[1]):Js[e]=i}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(a){Array.isArray(a)?Js.apply(t,a):Js(a)});if(typeof e=="string"){if(e in Js)return Js[e]}else"EPSG"in e?Js["EPSG:"+e.EPSG]=e:"ESRI"in e?Js["ESRI:"+e.ESRI]=e:"IAU2000"in e?Js["IAU2000:"+e.IAU2000]=e:console.log(e);return}}bq(Js);function Lq(e){return typeof e=="string"}function Fq(e){return e in Js}var Bq=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function $q(e){return Bq.some(function(t){return e.indexOf(t)>-1})}var jq=["3857","900913","3785","102113"];function Nq(e){var t=Af(e,"authority");if(t){var i=Af(t,"epsg");return i&&jq.indexOf(i)>-1}}function Vq(e){var t=Af(e,"extension");if(t)return Af(t,"proj4")}function Uq(e){return e[0]==="+"}function Gq(e){if(Lq(e)){if(Fq(e))return Js[e];if($q(e)){var t=CR(e);if(Nq(t))return Js["EPSG:3857"];var i=Vq(t);return i?Kw(i):t}if(Uq(e))return Kw(e)}else return e}function OP(e,t){e=e||{};var i,a;if(!t)return e;for(a in t)i=t[a],i!==void 0&&(e[a]=i);return e}function uh(e,t,i){var a=e*t;return i/Math.sqrt(1-a*a)}function l0(e){return e<0?-1:1}function ar(e){return Math.abs(e)<=mo?e:e-l0(e)*kv}function tu(e,t,i){var a=e*i,c=.5*e;return a=Math.pow((1-a)/(1+a),c),Math.tan(.5*(jt-t))/a}function Rv(e,t){for(var i=.5*e,a,c,h=jt-2*Math.atan(t),f=0;f<=15;f++)if(a=e*Math.sin(h),c=jt-2*Math.atan(t*Math.pow((1-a)/(1+a),i))-h,h+=c,Math.abs(c)<=1e-10)return h;return-9999}function qq(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=uh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Hq(e){var t=e.x,i=e.y;if(i*th>90&&i*th<-90&&t*th>180&&t*th<-180)return null;var a,c;if(Math.abs(Math.abs(i)-jt)<=tr)return null;if(this.sphere)a=this.x0+this.a*this.k0*ar(t-this.long0),c=this.y0+this.a*this.k0*Math.log(Math.tan(Yn+.5*i));else{var h=Math.sin(i),f=tu(this.e,i,h);a=this.x0+this.a*this.k0*ar(t-this.long0),c=this.y0-this.a*this.k0*Math.log(f)}return e.x=a,e.y=c,e}function Wq(e){var t=e.x-this.x0,i=e.y-this.y0,a,c;if(this.sphere)c=jt-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var h=Math.exp(-i/(this.a*this.k0));if(c=Rv(this.e,h),c===-9999)return null}return a=ar(this.long0+t/(this.a*this.k0)),e.x=a,e.y=c,e}var Zq=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const Xq={init:qq,forward:Hq,inverse:Wq,names:Zq};function Kq(){}function LP(e){return e}var Yq=["longlat","identity"];const Jq={init:Kq,forward:LP,inverse:LP,names:Yq};var Qq=[Xq,Jq],$_={},gx=[];function TR(e,t){var i=gx.length;return e.names?(gx[i]=e,e.names.forEach(function(a){$_[a.toLowerCase()]=i}),this):(console.log(t),!0)}function eH(e){if(!e)return!1;var t=e.toLowerCase();if(typeof $_[t]<"u"&&gx[$_[t]])return gx[$_[t]]}function tH(){Qq.forEach(TR)}const rH={start:tH,add:TR,get:eH};var Hr={};Hr.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Hr.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Hr.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Hr.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Hr.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Hr.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Hr.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Hr.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Hr.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Hr.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Hr.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Hr.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Hr.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Hr.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Hr.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Hr.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};Hr.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Hr.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Hr.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Hr.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Hr.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Hr.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Hr.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Hr.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Hr.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Hr.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Hr.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Hr.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Hr.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Hr.hough={a:6378270,rf:297,ellipseName:"Hough"};Hr.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Hr.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Hr.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Hr.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Hr.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Hr.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Hr.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Hr.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Hr.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Hr.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Hr.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Hr.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var nH=Hr.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Hr.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function iH(e,t,i,a){var c=e*e,h=t*t,f=(c-h)/c,o=0;a?(e*=1-f*(Cq+f*(Tq+f*Mq)),c=e*e,f=0):o=Math.sqrt(f);var x=(c-h)/h;return{es:f,e:o,ep2:x}}function oH(e,t,i,a,c){if(!e){var h=Af(Hr,a);h||(h=nH),e=h.a,t=h.b,i=h.rf}return i&&!t&&(t=(1-1/i)*e),(i===0||Math.abs(e-t)<tr)&&(c=!0,t=e),{a:e,b:t,rf:i,sphere:c}}var j_={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var sH in j_){var FP=j_[sH];j_[FP.datumName]=FP}function aH(e,t,i,a,c,h,f){var o={};return e===void 0||e==="none"?o.datum_type=Xw:o.datum_type=wq,t&&(o.datum_params=t.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=Qp),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=em,o.datum_params[3]*=lv,o.datum_params[4]*=lv,o.datum_params[5]*=lv,o.datum_params[6]=o.datum_params[6]/1e6+1)),f&&(o.datum_type=Eg,o.grids=f),o.a=i,o.b=a,o.es=c,o.ep2=h,o}var MR={};function lH(e,t){var i=new DataView(t),a=hH(i),c=dH(i,a),h=fH(i,c,a),f={header:c,subgrids:h};return MR[e]=f,f}function cH(e){if(e===void 0)return null;var t=e.split(",");return t.map(uH)}function uH(e){if(e.length===0)return null;var t=e[0]==="@";return t&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:MR[e]||null,isNull:!1}}function _g(e){return e/3600*Math.PI/180}function hH(e){var t=e.getInt32(8,!1);return t===11?!1:(t=e.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function dH(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:Yw(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}function Yw(e,t,i){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,i)))}function fH(e,t,i){for(var a=176,c=[],h=0;h<t.nSubgrids;h++){var f=mH(e,a,i),o=gH(e,a,f,i),x=Math.round(1+(f.upperLongitude-f.lowerLongitude)/f.longitudeInterval),P=Math.round(1+(f.upperLatitude-f.lowerLatitude)/f.latitudeInterval);c.push({ll:[_g(f.lowerLongitude),_g(f.lowerLatitude)],del:[_g(f.longitudeInterval),_g(f.latitudeInterval)],lim:[x,P],count:f.gridNodeCount,cvs:pH(o)}),a+=176+f.gridNodeCount*16}return c}function pH(e){return e.map(function(t){return[_g(t.longitudeShift),_g(t.latitudeShift)]})}function mH(e,t,i){return{name:Yw(e,t+8,t+16).trim(),parent:Yw(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,i),upperLatitude:e.getFloat64(t+88,i),lowerLongitude:e.getFloat64(t+104,i),upperLongitude:e.getFloat64(t+120,i),latitudeInterval:e.getFloat64(t+136,i),longitudeInterval:e.getFloat64(t+152,i),gridNodeCount:e.getInt32(t+168,i)}}function gH(e,t,i,a){for(var c=t+176,h=16,f=[],o=0;o<i.gridNodeCount;o++){var x={latitudeShift:e.getFloat32(c+o*h,a),longitudeShift:e.getFloat32(c+o*h+4,a),latitudeAccuracy:e.getFloat32(c+o*h+8,a),longitudeAccuracy:e.getFloat32(c+o*h+12,a)};f.push(x)}return f}function ah(e,t){if(!(this instanceof ah))return new ah(e);t=t||function(P){if(P)throw P};var i=Gq(e);if(typeof i!="object"){t("Could not parse to valid json: "+e);return}var a=ah.projections.get(i.projName);if(!a){t("Could not get projection name from: "+e);return}if(i.datumCode&&i.datumCode!=="none"){var c=Af(j_,i.datumCode);c&&(i.datum_params=i.datum_params||(c.towgs84?c.towgs84.split(","):null),i.ellps=c.ellipse,i.datumName=c.datumName?c.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var h=oH(i.a,i.b,i.rf,i.ellps,i.sphere),f=iH(h.a,h.b,h.rf,i.R_A),o=cH(i.nadgrids),x=i.datum||aH(i.datumCode,i.datum_params,h.a,h.b,f.es,f.ep2,o);OP(this,i),OP(this,a),this.a=h.a,this.b=h.b,this.rf=h.rf,this.sphere=h.sphere,this.es=f.es,this.e=f.e,this.ep2=f.ep2,this.datum=x,this.init(),t(null,this)}ah.projections=rH;ah.projections.start();function yH(e,t){return e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11?!1:e.datum_type===Qp?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type===em?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]:!0}function PR(e,t,i){var a=e.x,c=e.y,h=e.z?e.z:0,f,o,x,P;if(c<-jt&&c>-1.001*jt)c=-jt;else if(c>jt&&c<1.001*jt)c=jt;else{if(c<-jt)return{x:-1/0,y:-1/0,z:e.z};if(c>jt)return{x:1/0,y:1/0,z:e.z}}return a>Math.PI&&(a-=2*Math.PI),o=Math.sin(c),P=Math.cos(c),x=o*o,f=i/Math.sqrt(1-t*x),{x:(f+h)*P*Math.cos(a),y:(f+h)*P*Math.sin(a),z:(f*(1-t)+h)*o}}function ER(e,t,i,a){var c=1e-12,h=c*c,f=30,o,x,P,I,R,D,$,G,j,V,se,ue,Q,de=e.x,oe=e.y,be=e.z?e.z:0,we,Ie,ke;if(o=Math.sqrt(de*de+oe*oe),x=Math.sqrt(de*de+oe*oe+be*be),o/i<c){if(we=0,x/i<c)return Ie=jt,ke=-a,{x:e.x,y:e.y,z:e.z}}else we=Math.atan2(oe,de);P=be/x,I=o/x,R=1/Math.sqrt(1-t*(2-t)*I*I),G=I*(1-t)*R,j=P*R,Q=0;do Q++,$=i/Math.sqrt(1-t*j*j),ke=o*G+be*j-$*(1-t*j*j),D=t*$/($+ke),R=1/Math.sqrt(1-D*(2-D)*I*I),V=I*(1-D)*R,se=P*R,ue=se*G-V*j,G=V,j=se;while(ue*ue>h&&Q<f);return Ie=Math.atan(se/Math.abs(V)),{x:we,y:Ie,z:ke}}function vH(e,t,i){if(t===Qp)return{x:e.x+i[0],y:e.y+i[1],z:e.z+i[2]};if(t===em){var a=i[0],c=i[1],h=i[2],f=i[3],o=i[4],x=i[5],P=i[6];return{x:P*(e.x-x*e.y+o*e.z)+a,y:P*(x*e.x+e.y-f*e.z)+c,z:P*(-o*e.x+f*e.y+e.z)+h}}}function _H(e,t,i){if(t===Qp)return{x:e.x-i[0],y:e.y-i[1],z:e.z-i[2]};if(t===em){var a=i[0],c=i[1],h=i[2],f=i[3],o=i[4],x=i[5],P=i[6],I=(e.x-a)/P,R=(e.y-c)/P,D=(e.z-h)/P;return{x:I+x*R-o*D,y:-x*I+R+f*D,z:o*I-f*R+D}}}function x_(e){return e===Qp||e===em}function xH(e,t,i){if(yH(e,t)||e.datum_type===Xw||t.datum_type===Xw)return i;var a=e.a,c=e.es;if(e.datum_type===Eg){var h=BP(e,!1,i);if(h!==0)return;a=RP,c=DP}var f=t.a,o=t.b,x=t.es;if(t.datum_type===Eg&&(f=RP,o=Sq,x=DP),c===x&&a===f&&!x_(e.datum_type)&&!x_(t.datum_type))return i;if(i=PR(i,c,a),x_(e.datum_type)&&(i=vH(i,e.datum_type,e.datum_params)),x_(t.datum_type)&&(i=_H(i,t.datum_type,t.datum_params)),i=ER(i,x,f,o),t.datum_type===Eg){var P=BP(t,!0,i);if(P!==0)return}return i}function BP(e,t,i){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;var a={x:-i.x,y:i.y},c={x:Number.NaN,y:Number.NaN},h=[];e:for(var f=0;f<e.grids.length;f++){var o=e.grids[f];if(h.push(o.name),o.isNull){c=a;break}if(o.mandatory,o.grid===null){if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1;continue}for(var x=o.grid.subgrids,P=0,I=x.length;P<I;P++){var R=x[P],D=(Math.abs(R.del[1])+Math.abs(R.del[0]))/1e4,$=R.ll[0]-D,G=R.ll[1]-D,j=R.ll[0]+(R.lim[0]-1)*R.del[0]+D,V=R.ll[1]+(R.lim[1]-1)*R.del[1]+D;if(!(G>a.y||$>a.x||V<a.y||j<a.x)&&(c=bH(a,t,R),!isNaN(c.x)))break e}}return isNaN(c.x)?(console.log("Failed to find a grid shift table for location '"+-a.x*th+" "+a.y*th+" tried: '"+h+"'"),-1):(i.x=-c.x,i.y=c.y,0)}function bH(e,t,i){var a={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return a;var c={x:e.x,y:e.y};c.x-=i.ll[0],c.y-=i.ll[1],c.x=ar(c.x-Math.PI)+Math.PI;var h=$P(c,i);if(t){if(isNaN(h.x))return a;h.x=c.x-h.x,h.y=c.y-h.y;var f=9,o=1e-12,x,P;do{if(P=$P(h,i),isNaN(P.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}x={x:c.x-(P.x+h.x),y:c.y-(P.y+h.y)},h.x+=x.x,h.y+=x.y}while(f--&&Math.abs(x.x)>o&&Math.abs(x.y)>o);if(f<0)return console.log("Inverse grid shift iterator failed to converge."),a;a.x=ar(h.x+i.ll[0]),a.y=h.y+i.ll[1]}else isNaN(h.x)||(a.x=e.x+h.x,a.y=e.y+h.y);return a}function $P(e,t){var i={x:e.x/t.del[0],y:e.y/t.del[1]},a={x:Math.floor(i.x),y:Math.floor(i.y)},c={x:i.x-1*a.x,y:i.y-1*a.y},h={x:Number.NaN,y:Number.NaN},f;if(a.x<0||a.x>=t.lim[0]||a.y<0||a.y>=t.lim[1])return h;f=a.y*t.lim[0]+a.x;var o={x:t.cvs[f][0],y:t.cvs[f][1]};f++;var x={x:t.cvs[f][0],y:t.cvs[f][1]};f+=t.lim[0];var P={x:t.cvs[f][0],y:t.cvs[f][1]};f--;var I={x:t.cvs[f][0],y:t.cvs[f][1]},R=c.x*c.y,D=c.x*(1-c.y),$=(1-c.x)*(1-c.y),G=(1-c.x)*c.y;return h.x=$*o.x+D*x.x+G*I.x+R*P.x,h.y=$*o.y+D*x.y+G*I.y+R*P.y,h}function jP(e,t,i){var a=i.x,c=i.y,h=i.z||0,f,o,x,P={};for(x=0;x<3;x++)if(!(t&&x===2&&i.z===void 0))switch(x===0?(f=a,"ew".indexOf(e.axis[x])!==-1?o="x":o="y"):x===1?(f=c,"ns".indexOf(e.axis[x])!==-1?o="y":o="x"):(f=h,o="z"),e.axis[x]){case"e":P[o]=f;break;case"w":P[o]=-f;break;case"n":P[o]=f;break;case"s":P[o]=-f;break;case"u":i[o]!==void 0&&(P.z=f);break;case"d":i[o]!==void 0&&(P.z=-f);break;default:return null}return P}function IR(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function wH(e){NP(e.x),NP(e.y)}function NP(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function SH(e,t){return(e.datum.datum_type===Qp||e.datum.datum_type===em||e.datum.datum_type===Eg)&&t.datumCode!=="WGS84"||(t.datum.datum_type===Qp||t.datum.datum_type===em||t.datum.datum_type===Eg)&&e.datumCode!=="WGS84"}function yx(e,t,i,a){var c;Array.isArray(i)?i=IR(i):i={x:i.x,y:i.y,z:i.z,m:i.m};var h=i.z!==void 0;if(wH(i),e.datum&&t.datum&&SH(e,t)&&(c=new ah("WGS84"),i=yx(e,c,i,a),e=c),a&&e.axis!=="enu"&&(i=jP(e,!1,i)),e.projName==="longlat")i={x:i.x*fs,y:i.y*fs,z:i.z||0};else if(e.to_meter&&(i={x:i.x*e.to_meter,y:i.y*e.to_meter,z:i.z||0}),i=e.inverse(i),!i)return;if(e.from_greenwich&&(i.x+=e.from_greenwich),i=xH(e.datum,t.datum,i),!!i)return t.from_greenwich&&(i={x:i.x-t.from_greenwich,y:i.y,z:i.z||0}),t.projName==="longlat"?i={x:i.x*th,y:i.y*th,z:i.z||0}:(i=t.forward(i),t.to_meter&&(i={x:i.x/t.to_meter,y:i.y/t.to_meter,z:i.z||0})),a&&t.axis!=="enu"?jP(t,!0,i):(i&&!h&&delete i.z,i)}var VP=ah("WGS84");function iw(e,t,i,a){var c,h,f;return Array.isArray(i)?(c=yx(e,t,i,a)||{x:NaN,y:NaN},i.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof c.z=="number"?[c.x,c.y,c.z].concat(i.slice(3)):[c.x,c.y,i[2]].concat(i.slice(3)):[c.x,c.y].concat(i.slice(2)):[c.x,c.y]):(h=yx(e,t,i,a),f=Object.keys(i),f.length===2||f.forEach(function(o){if(typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(o==="x"||o==="y"||o==="z")return}else if(o==="x"||o==="y")return;h[o]=i[o]}),h)}function UP(e){return e instanceof ah?e:e.oProj?e.oProj:ah(e)}function za(e,t,i){e=UP(e);var a=!1,c;return typeof t>"u"?(t=e,e=VP,a=!0):(typeof t.x<"u"||Array.isArray(t))&&(i=t,t=e,e=VP,a=!0),t=UP(t),i?iw(e,t,i):(c={forward:function(h,f){return iw(e,t,h,f)},inverse:function(h,f){return iw(t,e,h,f)}},a&&(c.oProj=t),c)}var GP=6,kR="AJSAJS",AR="AFAFAF",xg=65,Ma=73,Zl=79,Xy=86,Ky=90;const CH={forward:RR,inverse:TH,toPoint:DR};function RR(e,t){return t=t||5,EH(MH({lat:e[1],lon:e[0]}),t)}function TH(e){var t=wS(OR(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function DR(e){var t=wS(OR(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function ow(e){return e*(Math.PI/180)}function qP(e){return 180*(e/Math.PI)}function MH(e){var t=e.lat,i=e.lon,a=6378137,c=.00669438,h=.9996,f,o,x,P,I,R,D,$=ow(t),G=ow(i),j,V;V=Math.floor((i+180)/6)+1,i===180&&(V=60),t>=56&&t<64&&i>=3&&i<12&&(V=32),t>=72&&t<84&&(i>=0&&i<9?V=31:i>=9&&i<21?V=33:i>=21&&i<33?V=35:i>=33&&i<42&&(V=37)),f=(V-1)*6-180+3,j=ow(f),o=c/(1-c),x=a/Math.sqrt(1-c*Math.sin($)*Math.sin($)),P=Math.tan($)*Math.tan($),I=o*Math.cos($)*Math.cos($),R=Math.cos($)*(G-j),D=a*((1-c/4-3*c*c/64-5*c*c*c/256)*$-(3*c/8+3*c*c/32+45*c*c*c/1024)*Math.sin(2*$)+(15*c*c/256+45*c*c*c/1024)*Math.sin(4*$)-35*c*c*c/3072*Math.sin(6*$));var se=h*x*(R+(1-P+I)*R*R*R/6+(5-18*P+P*P+72*I-58*o)*R*R*R*R*R/120)+5e5,ue=h*(D+x*Math.tan($)*(R*R/2+(5-P+9*I+4*I*I)*R*R*R*R/24+(61-58*P+P*P+600*I-330*o)*R*R*R*R*R*R/720));return t<0&&(ue+=1e7),{northing:Math.round(ue),easting:Math.round(se),zoneNumber:V,zoneLetter:PH(t)}}function wS(e){var t=e.northing,i=e.easting,a=e.zoneLetter,c=e.zoneNumber;if(c<0||c>60)return null;var h=.9996,f=6378137,o=.00669438,x,P=(1-Math.sqrt(1-o))/(1+Math.sqrt(1-o)),I,R,D,$,G,j,V,se,ue,Q=i-5e5,de=t;a<"N"&&(de-=1e7),V=(c-1)*6-180+3,x=o/(1-o),j=de/h,se=j/(f*(1-o/4-3*o*o/64-5*o*o*o/256)),ue=se+(3*P/2-27*P*P*P/32)*Math.sin(2*se)+(21*P*P/16-55*P*P*P*P/32)*Math.sin(4*se)+151*P*P*P/96*Math.sin(6*se),I=f/Math.sqrt(1-o*Math.sin(ue)*Math.sin(ue)),R=Math.tan(ue)*Math.tan(ue),D=x*Math.cos(ue)*Math.cos(ue),$=f*(1-o)/Math.pow(1-o*Math.sin(ue)*Math.sin(ue),1.5),G=Q/(I*h);var oe=ue-I*Math.tan(ue)/$*(G*G/2-(5+3*R+10*D-4*D*D-9*x)*G*G*G*G/24+(61+90*R+298*D+45*R*R-252*x-3*D*D)*G*G*G*G*G*G/720);oe=qP(oe);var be=(G-(1+2*R+D)*G*G*G/6+(5-2*D+28*R-3*D*D+8*x+24*R*R)*G*G*G*G*G/120)/Math.cos(ue);be=V+qP(be);var we;if(e.accuracy){var Ie=wS({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});we={top:Ie.lat,right:Ie.lon,bottom:oe,left:be}}else we={lat:oe,lon:be};return we}function PH(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function EH(e,t){var i="00000"+e.easting,a="00000"+e.northing;return e.zoneNumber+e.zoneLetter+IH(e.easting,e.northing,e.zoneNumber)+i.substr(i.length-5,t)+a.substr(a.length-5,t)}function IH(e,t,i){var a=zR(i),c=Math.floor(e/1e5),h=Math.floor(t/1e5)%20;return kH(c,h,a)}function zR(e){var t=e%GP;return t===0&&(t=GP),t}function kH(e,t,i){var a=i-1,c=kR.charCodeAt(a),h=AR.charCodeAt(a),f=c+e-1,o=h+t,x=!1;f>Ky&&(f=f-Ky+xg-1,x=!0),(f===Ma||c<Ma&&f>Ma||(f>Ma||c<Ma)&&x)&&f++,(f===Zl||c<Zl&&f>Zl||(f>Zl||c<Zl)&&x)&&(f++,f===Ma&&f++),f>Ky&&(f=f-Ky+xg-1),o>Xy?(o=o-Xy+xg-1,x=!0):x=!1,(o===Ma||h<Ma&&o>Ma||(o>Ma||h<Ma)&&x)&&o++,(o===Zl||h<Zl&&o>Zl||(o>Zl||h<Zl)&&x)&&(o++,o===Ma&&o++),o>Xy&&(o=o-Xy+xg-1);var P=String.fromCharCode(f)+String.fromCharCode(o);return P}function OR(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var t=e.length,i=null,a="",c,h=0;!/[A-Z]/.test(c=e.charAt(h));){if(h>=2)throw"MGRSPoint bad conversion from: "+e;a+=c,h++}var f=parseInt(a,10);if(h===0||h+3>t)throw"MGRSPoint bad conversion from: "+e;var o=e.charAt(h++);if(o<="A"||o==="B"||o==="Y"||o>="Z"||o==="I"||o==="O")throw"MGRSPoint zone letter "+o+" not handled: "+e;i=e.substring(h,h+=2);for(var x=zR(f),P=AH(i.charAt(0),x),I=RH(i.charAt(1),x);I<DH(o);)I+=2e6;var R=t-h;if(R%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var D=R/2,$=0,G=0,j,V,se,ue,Q;return D>0&&(j=1e5/Math.pow(10,D),V=e.substring(h,h+D),$=parseFloat(V)*j,se=e.substring(h+D),G=parseFloat(se)*j),ue=$+P,Q=G+I,{easting:ue,northing:Q,zoneLetter:o,zoneNumber:f,accuracy:j}}function AH(e,t){for(var i=kR.charCodeAt(t-1),a=1e5,c=!1;i!==e.charCodeAt(0);){if(i++,i===Ma&&i++,i===Zl&&i++,i>Ky){if(c)throw"Bad character: "+e;i=xg,c=!0}a+=1e5}return a}function RH(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var i=AR.charCodeAt(t-1),a=0,c=!1;i!==e.charCodeAt(0);){if(i++,i===Ma&&i++,i===Zl&&i++,i>Xy){if(c)throw"Bad character: "+e;i=xg,c=!0}a+=1e5}return a}function DH(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function Wg(e,t,i){if(!(this instanceof Wg))return new Wg(e,t,i);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof t>"u"){var a=e.split(",");this.x=parseFloat(a[0],10),this.y=parseFloat(a[1],10),this.z=parseFloat(a[2],10)||0}else this.x=e,this.y=t,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Wg.fromMGRS=function(e){return new Wg(DR(e))};Wg.prototype.toMGRS=function(e){return RR([this.x,this.y],e)};var zH=1,OH=.25,HP=.046875,WP=.01953125,ZP=.01068115234375,LH=.75,FH=.46875,BH=.013020833333333334,$H=.007120768229166667,jH=.3645833333333333,NH=.005696614583333333,VH=.3076171875;function SS(e){var t=[];t[0]=zH-e*(OH+e*(HP+e*(WP+e*ZP))),t[1]=e*(LH-e*(HP+e*(WP+e*ZP)));var i=e*e;return t[2]=i*(FH-e*(BH+e*$H)),i*=e,t[3]=i*(jH-e*NH),t[4]=i*e*VH,t}function ty(e,t,i,a){return i*=t,t*=t,a[0]*e-i*(a[1]+t*(a[2]+t*(a[3]+t*a[4])))}var UH=20;function CS(e,t,i){for(var a=1/(1-t),c=e,h=UH;h;--h){var f=Math.sin(c),o=1-t*f*f;if(o=(ty(c,f,Math.cos(c),i)-e)*(o*Math.sqrt(o))*a,c-=o,Math.abs(o)<tr)return c}return c}function GH(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=SS(this.es),this.ml0=ty(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function qH(e){var t=e.x,i=e.y,a=ar(t-this.long0),c,h,f,o=Math.sin(i),x=Math.cos(i);if(this.es){var I=x*a,R=Math.pow(I,2),D=this.ep2*Math.pow(x,2),$=Math.pow(D,2),G=Math.abs(x)>tr?Math.tan(i):0,j=Math.pow(G,2),V=Math.pow(j,2);c=1-this.es*Math.pow(o,2),I=I/Math.sqrt(c);var se=ty(i,o,x,this.en);h=this.a*(this.k0*I*(1+R/6*(1-j+D+R/20*(5-18*j+V+14*D-58*j*D+R/42*(61+179*V-V*j-479*j)))))+this.x0,f=this.a*(this.k0*(se-this.ml0+o*a*I/2*(1+R/12*(5-j+9*D+4*$+R/30*(61+V-58*j+270*D-330*j*D+R/56*(1385+543*V-V*j-3111*j))))))+this.y0}else{var P=x*Math.sin(a);if(Math.abs(Math.abs(P)-1)<tr)return 93;if(h=.5*this.a*this.k0*Math.log((1+P)/(1-P))+this.x0,f=x*Math.cos(a)/Math.sqrt(1-Math.pow(P,2)),P=Math.abs(f),P>=1){if(P-1>tr)return 93;f=0}else f=Math.acos(f);i<0&&(f=-f),f=this.a*this.k0*(f-this.lat0)+this.y0}return e.x=h,e.y=f,e}function HH(e){var t,i,a,c,h=(e.x-this.x0)*(1/this.a),f=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+f/this.k0,i=CS(t,this.es,this.en),Math.abs(i)<jt){var R=Math.sin(i),D=Math.cos(i),$=Math.abs(D)>tr?Math.tan(i):0,G=this.ep2*Math.pow(D,2),j=Math.pow(G,2),V=Math.pow($,2),se=Math.pow(V,2);t=1-this.es*Math.pow(R,2);var ue=h*Math.sqrt(t)/this.k0,Q=Math.pow(ue,2);t=t*$,a=i-t*Q/(1-this.es)*.5*(1-Q/12*(5+3*V-9*G*V+G-4*j-Q/30*(61+90*V-252*G*V+45*se+46*G-Q/56*(1385+3633*V+4095*se+1574*se*V)))),c=ar(this.long0+ue*(1-Q/6*(1+2*V+G-Q/20*(5+28*V+24*se+8*G*V+6*G-Q/42*(61+662*V+1320*se+720*se*V))))/D)}else a=jt*l0(f),c=0;else{var o=Math.exp(h/this.k0),x=.5*(o-1/o),P=this.lat0+f/this.k0,I=Math.cos(P);t=Math.sqrt((1-Math.pow(I,2))/(1+Math.pow(x,2))),a=Math.asin(t),f<0&&(a=-a),x===0&&I===0?c=0:c=ar(Math.atan2(x,I)+this.long0)}return e.x=c,e.y=a,e}var WH=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const N_={init:GH,forward:qH,inverse:HH,names:WH};function LR(e){var t=Math.exp(e);return t=(t-1/t)/2,t}function Ea(e,t){e=Math.abs(e),t=Math.abs(t);var i=Math.max(e,t),a=Math.min(e,t)/(i||1);return i*Math.sqrt(1+Math.pow(a,2))}function ZH(e){var t=1+e,i=t-1;return i===0?e:e*Math.log(t)/i}function XH(e){var t=Math.abs(e);return t=ZH(t*(1+t/(Ea(1,t)+1))),e<0?-t:t}function TS(e,t){for(var i=2*Math.cos(2*t),a=e.length-1,c=e[a],h=0,f;--a>=0;)f=-h+i*c+e[a],h=c,c=f;return t+f*Math.sin(2*t)}function KH(e,t){for(var i=2*Math.cos(t),a=e.length-1,c=e[a],h=0,f;--a>=0;)f=-h+i*c+e[a],h=c,c=f;return Math.sin(t)*f}function YH(e){var t=Math.exp(e);return t=(t+1/t)/2,t}function FR(e,t,i){for(var a=Math.sin(t),c=Math.cos(t),h=LR(i),f=YH(i),o=2*c*f,x=-2*a*h,P=e.length-1,I=e[P],R=0,D=0,$=0,G,j;--P>=0;)G=D,j=R,D=I,R=$,I=-G+o*D-x*R+e[P],$=-j+x*D+o*R;return o=a*f,x=c*h,[o*I-x*$,o*$+x*I]}function JH(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(N_.init.apply(this),this.forward=N_.forward,this.inverse=N_.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),i=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),i=i*t,this.cgb[1]=i*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=i*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),i=i*t,this.cgb[2]=i*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=i*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),i=i*t,this.cgb[3]=i*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=i*(1237/630+t*(-12/5+t*(-24832/14175))),i=i*t,this.cgb[4]=i*(4174/315+t*(-144838/6237)),this.cbg[4]=i*(-734/315+t*(109598/31185)),i=i*t,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=i*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=i*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),i=i*t,this.utg[2]=i*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=i*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),i=i*t,this.utg[3]=i*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=i*(49561/161280+t*(-179/168+t*(6601661/7257600))),i=i*t,this.utg[4]=i*(-4583/161280+t*(108847/3991680)),this.gtu[4]=i*(34729/80640+t*(-3418889/1995840)),i=i*t,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=i*(212378941/319334400);var a=TS(this.cbg,this.lat0);this.Zb=-this.Qn*(a+KH(this.gtu,2*a))}function QH(e){var t=ar(e.x-this.long0),i=e.y;i=TS(this.cbg,i);var a=Math.sin(i),c=Math.cos(i),h=Math.sin(t),f=Math.cos(t);i=Math.atan2(a,f*c),t=Math.atan2(h*c,Ea(a,c*f)),t=XH(Math.tan(t));var o=FR(this.gtu,2*i,2*t);i=i+o[0],t=t+o[1];var x,P;return Math.abs(t)<=2.623395162778?(x=this.a*(this.Qn*t)+this.x0,P=this.a*(this.Qn*i+this.Zb)+this.y0):(x=1/0,P=1/0),e.x=x,e.y=P,e}function eW(e){var t=(e.x-this.x0)*(1/this.a),i=(e.y-this.y0)*(1/this.a);i=(i-this.Zb)/this.Qn,t=t/this.Qn;var a,c;if(Math.abs(t)<=2.623395162778){var h=FR(this.utg,2*i,2*t);i=i+h[0],t=t+h[1],t=Math.atan(LR(t));var f=Math.sin(i),o=Math.cos(i),x=Math.sin(t),P=Math.cos(t);i=Math.atan2(f*P,Ea(x,P*o)),t=Math.atan2(x,P*o),a=ar(t+this.long0),c=TS(this.cgb,i)}else a=1/0,c=1/0;return e.x=a,e.y=c,e}var tW=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const V_={init:JH,forward:QH,inverse:eW,names:tW};function rW(e,t){if(e===void 0){if(e=Math.floor((ar(t)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var nW="etmerc";function iW(){var e=rW(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*fs,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,V_.init.apply(this),this.forward=V_.forward,this.inverse=V_.inverse}var oW=["Universal Transverse Mercator System","utm"];const sW={init:iW,names:oW,dependsOn:nW};function MS(e,t){return Math.pow((1-e)/(1+e),t)}var aW=20;function lW(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Yn)/(Math.pow(Math.tan(.5*this.lat0+Yn),this.C)*MS(this.e*e,this.ratexp))}function cW(e){var t=e.x,i=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+Yn),this.C)*MS(this.e*Math.sin(i),this.ratexp))-jt,e.x=this.C*t,e}function uW(e){for(var t=1e-14,i=e.x/this.C,a=e.y,c=Math.pow(Math.tan(.5*a+Yn)/this.K,1/this.C),h=aW;h>0&&(a=2*Math.atan(c*MS(this.e*Math.sin(e.y),-.5*this.e))-jt,!(Math.abs(a-e.y)<t));--h)e.y=a;return h?(e.x=i,e.y=a,e):null}const PS={init:lW,forward:cW,inverse:uW};function hW(){PS.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function dW(e){var t,i,a,c;return e.x=ar(e.x-this.long0),PS.forward.apply(this,[e]),t=Math.sin(e.y),i=Math.cos(e.y),a=Math.cos(e.x),c=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*i*a),e.x=c*i*Math.sin(e.x),e.y=c*(this.cosc0*t-this.sinc0*i*a),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function fW(e){var t,i,a,c,h;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,h=Ea(e.x,e.y)){var f=2*Math.atan2(h,this.R2);t=Math.sin(f),i=Math.cos(f),c=Math.asin(i*this.sinc0+e.y*t*this.cosc0/h),a=Math.atan2(e.x*t,h*this.cosc0*i-e.y*this.sinc0*t)}else c=this.phic0,a=0;return e.x=a,e.y=c,PS.inverse.apply(this,[e]),e.x=ar(e.x+this.long0),e}var pW=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const mW={init:hW,forward:dW,inverse:fW,names:pW};function gW(e,t,i){return t*=i,Math.tan(.5*(jt+e))*Math.pow((1-t)/(1+t),.5*i)}function yW(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=tr&&(this.k0=.5*(1+l0(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=tr&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=tr&&Math.abs(Math.cos(this.lat_ts))>tr&&(this.k0=.5*this.cons*uh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/tu(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=uh(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-jt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function vW(e){var t=e.x,i=e.y,a=Math.sin(i),c=Math.cos(i),h,f,o,x,P,I,R=ar(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=tr&&Math.abs(i+this.lat0)<=tr?(e.x=NaN,e.y=NaN,e):this.sphere?(h=2*this.k0/(1+this.sinlat0*a+this.coslat0*c*Math.cos(R)),e.x=this.a*h*c*Math.sin(R)+this.x0,e.y=this.a*h*(this.coslat0*a-this.sinlat0*c*Math.cos(R))+this.y0,e):(f=2*Math.atan(this.ssfn_(i,a,this.e))-jt,x=Math.cos(f),o=Math.sin(f),Math.abs(this.coslat0)<=tr?(P=tu(this.e,i*this.con,this.con*a),I=2*this.a*this.k0*P/this.cons,e.x=this.x0+I*Math.sin(t-this.long0),e.y=this.y0-this.con*I*Math.cos(t-this.long0),e):(Math.abs(this.sinlat0)<tr?(h=2*this.a*this.k0/(1+x*Math.cos(R)),e.y=h*o):(h=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*x*Math.cos(R))),e.y=h*(this.cosX0*o-this.sinX0*x*Math.cos(R))+this.y0),e.x=h*x*Math.sin(R)+this.x0,e))}function _W(e){e.x-=this.x0,e.y-=this.y0;var t,i,a,c,h,f=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var o=2*Math.atan(f/(2*this.a*this.k0));return t=this.long0,i=this.lat0,f<=tr?(e.x=t,e.y=i,e):(i=Math.asin(Math.cos(o)*this.sinlat0+e.y*Math.sin(o)*this.coslat0/f),Math.abs(this.coslat0)<tr?this.lat0>0?t=ar(this.long0+Math.atan2(e.x,-1*e.y)):t=ar(this.long0+Math.atan2(e.x,e.y)):t=ar(this.long0+Math.atan2(e.x*Math.sin(o),f*this.coslat0*Math.cos(o)-e.y*this.sinlat0*Math.sin(o))),e.x=t,e.y=i,e)}else if(Math.abs(this.coslat0)<=tr){if(f<=tr)return i=this.lat0,t=this.long0,e.x=t,e.y=i,e;e.x*=this.con,e.y*=this.con,a=f*this.cons/(2*this.a*this.k0),i=this.con*Rv(this.e,a),t=this.con*ar(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else c=2*Math.atan(f*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,f<=tr?h=this.X0:(h=Math.asin(Math.cos(c)*this.sinX0+e.y*Math.sin(c)*this.cosX0/f),t=ar(this.long0+Math.atan2(e.x*Math.sin(c),f*this.cosX0*Math.cos(c)-e.y*this.sinX0*Math.sin(c)))),i=-1*Rv(this.e,Math.tan(.5*(jt+h)));return e.x=t,e.y=i,e}var xW=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const bW={init:yW,forward:vW,inverse:_W,names:xW,ssfn_:gW};function wW(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),i=this.a,a=this.rf,c=1/a,h=2*c-Math.pow(c,2),f=this.e=Math.sqrt(h);this.R=this.k0*i*Math.sqrt(1-h)/(1-h*Math.pow(t,2)),this.alpha=Math.sqrt(1+h/(1-h)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),x=Math.log(Math.tan(Math.PI/4+e/2)),P=Math.log((1+f*t)/(1-f*t));this.K=o-this.alpha*x+this.alpha*f/2*P}function SW(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),a=-this.alpha*(t+i)+this.K,c=2*(Math.atan(Math.exp(a))-Math.PI/4),h=this.alpha*(e.x-this.lambda0),f=Math.atan(Math.sin(h)/(Math.sin(this.b0)*Math.tan(c)+Math.cos(this.b0)*Math.cos(h))),o=Math.asin(Math.cos(this.b0)*Math.sin(c)-Math.sin(this.b0)*Math.cos(c)*Math.cos(h));return e.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,e.x=this.R*f+this.x0,e}function CW(e){for(var t=e.x-this.x0,i=e.y-this.y0,a=t/this.R,c=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),h=Math.asin(Math.cos(this.b0)*Math.sin(c)+Math.sin(this.b0)*Math.cos(c)*Math.cos(a)),f=Math.atan(Math.sin(a)/(Math.cos(this.b0)*Math.cos(a)-Math.sin(this.b0)*Math.tan(c))),o=this.lambda0+f/this.alpha,x=0,P=h,I=-1e3,R=0;Math.abs(P-I)>1e-7;){if(++R>20)return;x=1/this.alpha*(Math.log(Math.tan(Math.PI/4+h/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(P))/2)),I=P,P=2*Math.atan(Math.exp(x))-Math.PI/2}return e.x=o,e.y=P,e}var TW=["somerc"];const MW={init:wW,forward:SW,inverse:CW,names:TW};var pg=1e-7;function PW(e){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],i=typeof e.PROJECTION=="object"?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||t.indexOf(i)!==-1}function EW(){var e,t,i,a,c,h,f,o,x,P,I=0,R,D=0,$=0,G=0,j=0,V=0,se=0;this.no_off=PW(this),this.no_rot="no_rot"in this;var ue=!1;"alpha"in this&&(ue=!0);var Q=!1;if("rectified_grid_angle"in this&&(Q=!0),ue&&(se=this.alpha),Q&&(I=this.rectified_grid_angle*fs),ue||Q)D=this.longc;else if($=this.long1,j=this.lat1,G=this.long2,V=this.lat2,Math.abs(j-V)<=pg||(e=Math.abs(j))<=pg||Math.abs(e-jt)<=pg||Math.abs(Math.abs(this.lat0)-jt)<=pg||Math.abs(Math.abs(V)-jt)<=pg)throw new Error;var de=1-this.es;t=Math.sqrt(de),Math.abs(this.lat0)>tr?(o=Math.sin(this.lat0),i=Math.cos(this.lat0),e=1-this.es*o*o,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/de),this.A=this.B*this.k0*t/e,a=this.B*t/(i*Math.sqrt(e)),c=a*a-1,c<=0?c=0:(c=Math.sqrt(c),this.lat0<0&&(c=-c)),this.E=c+=a,this.E*=Math.pow(tu(this.e,this.lat0,o),this.B)):(this.B=1/t,this.A=this.k0,this.E=a=c=1),ue||Q?(ue?(R=Math.asin(Math.sin(se)/a),Q||(I=se)):(R=I,se=Math.asin(a*Math.sin(R))),this.lam0=D-Math.asin(.5*(c-1/c)*Math.tan(R))/this.B):(h=Math.pow(tu(this.e,j,Math.sin(j)),this.B),f=Math.pow(tu(this.e,V,Math.sin(V)),this.B),c=this.E/h,x=(f-h)/(f+h),P=this.E*this.E,P=(P-f*h)/(P+f*h),e=$-G,e<-Math.pi?G-=kv:e>Math.pi&&(G+=kv),this.lam0=ar(.5*($+G)-Math.atan(P*Math.tan(.5*this.B*($-G))/x)/this.B),R=Math.atan(2*Math.sin(this.B*ar($-this.lam0))/(c-1/c)),I=se=Math.asin(a*Math.sin(R))),this.singam=Math.sin(R),this.cosgam=Math.cos(R),this.sinrot=Math.sin(I),this.cosrot=Math.cos(I),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(a*a-1)/Math.cos(se))),this.lat0<0&&(this.u_0=-this.u_0)),c=.5*R,this.v_pole_n=this.ArB*Math.log(Math.tan(Yn-c)),this.v_pole_s=this.ArB*Math.log(Math.tan(Yn+c))}function IW(e){var t={},i,a,c,h,f,o,x,P;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-jt)>tr){if(f=this.E/Math.pow(tu(this.e,e.y,Math.sin(e.y)),this.B),o=1/f,i=.5*(f-o),a=.5*(f+o),h=Math.sin(this.B*e.x),c=(i*this.singam-h*this.cosgam)/a,Math.abs(Math.abs(c)-1)<tr)throw new Error;P=.5*this.ArB*Math.log((1-c)/(1+c)),o=Math.cos(this.B*e.x),Math.abs(o)<pg?x=this.A*e.x:x=this.ArB*Math.atan2(i*this.cosgam+h*this.singam,o)}else P=e.y>0?this.v_pole_n:this.v_pole_s,x=this.ArB*e.y;return this.no_rot?(t.x=x,t.y=P):(x-=this.u_0,t.x=P*this.cosrot+x*this.sinrot,t.y=x*this.cosrot-P*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function kW(e){var t,i,a,c,h,f,o,x={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(i=e.y,t=e.x):(i=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),a=Math.exp(-this.BrA*i),c=.5*(a-1/a),h=.5*(a+1/a),f=Math.sin(this.BrA*t),o=(f*this.cosgam+c*this.singam)/h,Math.abs(Math.abs(o)-1)<tr)x.x=0,x.y=o<0?-jt:jt;else{if(x.y=this.E/Math.sqrt((1+o)/(1-o)),x.y=Rv(this.e,Math.pow(x.y,1/this.B)),x.y===1/0)throw new Error;x.x=-this.rB*Math.atan2(c*this.cosgam-f*this.singam,Math.cos(this.BrA*t))}return x.x+=this.lam0,x}var AW=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const RW={init:EW,forward:IW,inverse:kW,names:AW};function DW(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<tr)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),i=Math.cos(this.lat1),a=uh(this.e,t,i),c=tu(this.e,this.lat1,t),h=Math.sin(this.lat2),f=Math.cos(this.lat2),o=uh(this.e,h,f),x=tu(this.e,this.lat2,h),P=tu(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>tr?this.ns=Math.log(a/o)/Math.log(c/x):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=a/(this.ns*Math.pow(c,this.ns)),this.rh=this.a*this.f0*Math.pow(P,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function zW(e){var t=e.x,i=e.y;Math.abs(2*Math.abs(i)-Math.PI)<=tr&&(i=l0(i)*(jt-2*tr));var a=Math.abs(Math.abs(i)-jt),c,h;if(a>tr)c=tu(this.e,i,Math.sin(i)),h=this.a*this.f0*Math.pow(c,this.ns);else{if(a=i*this.ns,a<=0)return null;h=0}var f=this.ns*ar(t-this.long0);return e.x=this.k0*(h*Math.sin(f))+this.x0,e.y=this.k0*(this.rh-h*Math.cos(f))+this.y0,e}function OW(e){var t,i,a,c,h,f=(e.x-this.x0)/this.k0,o=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(f*f+o*o),i=1):(t=-Math.sqrt(f*f+o*o),i=-1);var x=0;if(t!==0&&(x=Math.atan2(i*f,i*o)),t!==0||this.ns>0){if(i=1/this.ns,a=Math.pow(t/(this.a*this.f0),i),c=Rv(this.e,a),c===-9999)return null}else c=-jt;return h=ar(x/this.ns+this.long0),e.x=h,e.y=c,e}var LW=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const FW={init:DW,forward:zW,inverse:OW,names:LW};function BW(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function $W(e){var t,i,a,c,h,f,o,x=e.x,P=e.y,I=ar(x-this.long0);return t=Math.pow((1+this.e*Math.sin(P))/(1-this.e*Math.sin(P)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(P/2+this.s45),this.alfa)/t)-this.s45),a=-I*this.alfa,c=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(a)),h=Math.asin(Math.cos(i)*Math.sin(a)/Math.cos(c)),f=this.n*h,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(c/2+this.s45),this.n),e.y=o*Math.cos(f)/1,e.x=o*Math.sin(f)/1,this.czech||(e.y*=-1,e.x*=-1),e}function jW(e){var t,i,a,c,h,f,o,x,P=e.x;e.x=e.y,e.y=P,this.czech||(e.y*=-1,e.x*=-1),f=Math.sqrt(e.x*e.x+e.y*e.y),h=Math.atan2(e.y,e.x),c=h/Math.sin(this.s0),a=2*(Math.atan(Math.pow(this.ro0/f,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(a)-Math.sin(this.ad)*Math.cos(a)*Math.cos(c)),i=Math.asin(Math.cos(a)*Math.sin(c)/Math.cos(t)),e.x=this.long0-i/this.alfa,o=t,x=0;var I=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-e.y)<1e-10&&(x=1),o=e.y,I+=1;while(x===0&&I<15);return I>=15?null:e}var NW=["Krovak","krovak"];const VW={init:BW,forward:$W,inverse:jW,names:NW};function ta(e,t,i,a,c){return e*c-t*Math.sin(2*c)+i*Math.sin(4*c)-a*Math.sin(6*c)}function c0(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function u0(e){return .375*e*(1+.25*e*(1+.46875*e))}function h0(e){return .05859375*e*e*(1+.75*e)}function d0(e){return e*e*e*(35/3072)}function Zg(e,t,i){var a=t*i;return e/Math.sqrt(1-a*a)}function Ff(e){return Math.abs(e)<jt?e:e-l0(e)*Math.PI}function vx(e,t,i,a,c){var h,f;h=e/t;for(var o=0;o<15;o++)if(f=(e-(t*h-i*Math.sin(2*h)+a*Math.sin(4*h)-c*Math.sin(6*h)))/(t-2*i*Math.cos(2*h)+4*a*Math.cos(4*h)-6*c*Math.cos(6*h)),h+=f,Math.abs(f)<=1e-10)return h;return NaN}function UW(){this.sphere||(this.e0=c0(this.es),this.e1=u0(this.es),this.e2=h0(this.es),this.e3=d0(this.es),this.ml0=this.a*ta(this.e0,this.e1,this.e2,this.e3,this.lat0))}function GW(e){var t,i,a=e.x,c=e.y;if(a=ar(a-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(c)*Math.sin(a)),i=this.a*(Math.atan2(Math.tan(c),Math.cos(a))-this.lat0);else{var h=Math.sin(c),f=Math.cos(c),o=Zg(this.a,this.e,h),x=Math.tan(c)*Math.tan(c),P=a*Math.cos(c),I=P*P,R=this.es*f*f/(1-this.es),D=this.a*ta(this.e0,this.e1,this.e2,this.e3,c);t=o*P*(1-I*x*(1/6-(8-x+8*R)*I/120)),i=D-this.ml0+o*h/f*I*(.5+(5-x+6*R)*I/24)}return e.x=t+this.x0,e.y=i+this.y0,e}function qW(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,i=e.y/this.a,a,c;if(this.sphere){var h=i+this.lat0;a=Math.asin(Math.sin(h)*Math.cos(t)),c=Math.atan2(Math.tan(t),Math.cos(h))}else{var f=this.ml0/this.a+i,o=vx(f,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-jt)<=tr)return e.x=this.long0,e.y=jt,i<0&&(e.y*=-1),e;var x=Zg(this.a,this.e,Math.sin(o)),P=x*x*x/this.a/this.a*(1-this.es),I=Math.pow(Math.tan(o),2),R=t*this.a/x,D=R*R;a=o-x*Math.tan(o)/P*R*R*(.5-(1+3*I)*R*R/24),c=R*(1-D*(I/3+(1+3*I)*I*D/15))/Math.cos(o)}return e.x=ar(c+this.long0),e.y=Ff(a),e}var HW=["Cassini","Cassini_Soldner","cass"];const WW={init:UW,forward:GW,inverse:qW,names:HW};function Mf(e,t){var i;return e>1e-7?(i=e*t,(1-e*e)*(t/(1-i*i)-.5/e*Math.log((1-i)/(1+i)))):2*t}var ZW=1,XW=2,KW=3,YW=4;function JW(){var e=Math.abs(this.lat0);if(Math.abs(e-jt)<tr?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<tr?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=Mf(this.e,1),this.mmf=.5/(1-this.es),this.apa=aZ(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Mf(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function QW(e){var t,i,a,c,h,f,o,x,P,I,R=e.x,D=e.y;if(R=ar(R-this.long0),this.sphere){if(h=Math.sin(D),I=Math.cos(D),a=Math.cos(R),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i=this.mode===this.EQUIT?1+I*a:1+this.sinph0*h+this.cosph0*I*a,i<=tr)return null;i=Math.sqrt(2/i),t=i*I*Math.sin(R),i*=this.mode===this.EQUIT?h:this.cosph0*h-this.sinph0*I*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(D+this.lat0)<tr)return null;i=Yn-D*.5,i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)),t=i*Math.sin(R),i*=a}}else{switch(o=0,x=0,P=0,a=Math.cos(R),c=Math.sin(R),h=Math.sin(D),f=Mf(this.e,h),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(o=f/this.qp,x=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:P=1+this.sinb1*o+this.cosb1*x*a;break;case this.EQUIT:P=1+x*a;break;case this.N_POLE:P=jt+D,f=this.qp-f;break;case this.S_POLE:P=D-jt,f=this.qp+f;break}if(Math.abs(P)<tr)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:P=Math.sqrt(2/P),this.mode===this.OBLIQ?i=this.ymf*P*(this.cosb1*o-this.sinb1*x*a):i=(P=Math.sqrt(2/(1+x*a)))*o*this.ymf,t=this.xmf*P*x*c;break;case this.N_POLE:case this.S_POLE:f>=0?(t=(P=Math.sqrt(f))*c,i=a*(this.mode===this.S_POLE?P:-P)):t=i=0;break}}return e.x=this.a*t+this.x0,e.y=this.a*i+this.y0,e}function eZ(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,i=e.y/this.a,a,c,h,f,o,x,P;if(this.sphere){var I=0,R,D=0;if(R=Math.sqrt(t*t+i*i),c=R*.5,c>1)return null;switch(c=2*Math.asin(c),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(D=Math.sin(c),I=Math.cos(c)),this.mode){case this.EQUIT:c=Math.abs(R)<=tr?0:Math.asin(i*D/R),t*=D,i=I*R;break;case this.OBLIQ:c=Math.abs(R)<=tr?this.lat0:Math.asin(I*this.sinph0+i*D*this.cosph0/R),t*=D*this.cosph0,i=(I-Math.sin(c)*this.sinph0)*R;break;case this.N_POLE:i=-i,c=jt-c;break;case this.S_POLE:c-=jt;break}a=i===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,i)}else{if(P=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,i*=this.dd,x=Math.sqrt(t*t+i*i),x<tr)return e.x=this.long0,e.y=this.lat0,e;f=2*Math.asin(.5*x/this.rq),h=Math.cos(f),t*=f=Math.sin(f),this.mode===this.OBLIQ?(P=h*this.sinb1+i*f*this.cosb1/x,o=this.qp*P,i=x*this.cosb1*h-i*this.sinb1*f):(P=i*f/x,o=this.qp*P,i=x*h)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),o=t*t+i*i,!o)return e.x=this.long0,e.y=this.lat0,e;P=1-o/this.qp,this.mode===this.S_POLE&&(P=-P)}a=Math.atan2(t,i),c=lZ(Math.asin(P),this.apa)}return e.x=ar(this.long0+a),e.y=c,e}var tZ=.3333333333333333,rZ=.17222222222222222,nZ=.10257936507936508,iZ=.06388888888888888,oZ=.0664021164021164,sZ=.016415012942191543;function aZ(e){var t,i=[];return i[0]=e*tZ,t=e*e,i[0]+=t*rZ,i[1]=t*iZ,t*=e,i[0]+=t*nZ,i[1]+=t*oZ,i[2]=t*sZ,i}function lZ(e,t){var i=e+e;return e+t[0]*Math.sin(i)+t[1]*Math.sin(i+i)+t[2]*Math.sin(i+i+i)}var cZ=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const uZ={init:JW,forward:QW,inverse:eZ,names:cZ,S_POLE:ZW,N_POLE:XW,EQUIT:KW,OBLIQ:YW};function Rf(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function hZ(){Math.abs(this.lat1+this.lat2)<tr||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=uh(this.e3,this.sin_po,this.cos_po),this.qs1=Mf(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=uh(this.e3,this.sin_po,this.cos_po),this.qs2=Mf(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Mf(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>tr?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function dZ(e){var t=e.x,i=e.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var a=Mf(this.e3,this.sin_phi),c=this.a*Math.sqrt(this.c-this.ns0*a)/this.ns0,h=this.ns0*ar(t-this.long0),f=c*Math.sin(h)+this.x0,o=this.rh-c*Math.cos(h)+this.y0;return e.x=f,e.y=o,e}function fZ(e){var t,i,a,c,h,f;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),a=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),a=-1),c=0,t!==0&&(c=Math.atan2(a*e.x,a*e.y)),a=t*this.ns0/this.a,this.sphere?f=Math.asin((this.c-a*a)/(2*this.ns0)):(i=(this.c-a*a)/this.ns0,f=this.phi1z(this.e3,i)),h=ar(c/this.ns0+this.long0),e.x=h,e.y=f,e}function pZ(e,t){var i,a,c,h,f,o=Rf(.5*t);if(e<tr)return o;for(var x=e*e,P=1;P<=25;P++)if(i=Math.sin(o),a=Math.cos(o),c=e*i,h=1-c*c,f=.5*h*h/a*(t/(1-x)-i/h+.5/e*Math.log((1-c)/(1+c))),o=o+f,Math.abs(f)<=1e-7)return o;return null}var mZ=["Albers_Conic_Equal_Area","Albers","aea"];const gZ={init:hZ,forward:dZ,inverse:fZ,names:mZ,phi1z:pZ};function yZ(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function vZ(e){var t,i,a,c,h,f,o,x,P=e.x,I=e.y;return a=ar(P-this.long0),t=Math.sin(I),i=Math.cos(I),c=Math.cos(a),f=this.sin_p14*t+this.cos_p14*i*c,h=1,f>0||Math.abs(f)<=tr?(o=this.x0+this.a*h*i*Math.sin(a)/f,x=this.y0+this.a*h*(this.cos_p14*t-this.sin_p14*i*c)/f):(o=this.x0+this.infinity_dist*i*Math.sin(a),x=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*i*c)),e.x=o,e.y=x,e}function _Z(e){var t,i,a,c,h,f;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(c=Math.atan2(t,this.rc),i=Math.sin(c),a=Math.cos(c),f=Rf(a*this.sin_p14+e.y*i*this.cos_p14/t),h=Math.atan2(e.x*i,t*this.cos_p14*a-e.y*this.sin_p14*i),h=ar(this.long0+h)):(f=this.phic0,h=0),e.x=h,e.y=f,e}var xZ=["gnom"];const bZ={init:yZ,forward:vZ,inverse:_Z,names:xZ};function wZ(e,t){var i=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-i)<1e-6)return t<0?-1*jt:jt;for(var a=Math.asin(.5*t),c,h,f,o,x=0;x<30;x++)if(h=Math.sin(a),f=Math.cos(a),o=e*h,c=Math.pow(1-o*o,2)/(2*f)*(t/(1-e*e)-h/(1-o*o)+.5/e*Math.log((1-o)/(1+o))),a+=c,Math.abs(c)<=1e-10)return a;return NaN}function SZ(){this.sphere||(this.k0=uh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function CZ(e){var t=e.x,i=e.y,a,c,h=ar(t-this.long0);if(this.sphere)a=this.x0+this.a*h*Math.cos(this.lat_ts),c=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var f=Mf(this.e,Math.sin(i));a=this.x0+this.a*this.k0*h,c=this.y0+this.a*f*.5/this.k0}return e.x=a,e.y=c,e}function TZ(e){e.x-=this.x0,e.y-=this.y0;var t,i;return this.sphere?(t=ar(this.long0+e.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(i=wZ(this.e,2*e.y*this.k0/this.a),t=ar(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=i,e}var MZ=["cea"];const PZ={init:SZ,forward:CZ,inverse:TZ,names:MZ};function EZ(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function IZ(e){var t=e.x,i=e.y,a=ar(t-this.long0),c=Ff(i-this.lat0);return e.x=this.x0+this.a*a*this.rc,e.y=this.y0+this.a*c,e}function kZ(e){var t=e.x,i=e.y;return e.x=ar(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=Ff(this.lat0+(i-this.y0)/this.a),e}var AZ=["Equirectangular","Equidistant_Cylindrical","eqc"];const RZ={init:EZ,forward:IZ,inverse:kZ,names:AZ};var XP=20;function DZ(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=c0(this.es),this.e1=u0(this.es),this.e2=h0(this.es),this.e3=d0(this.es),this.ml0=this.a*ta(this.e0,this.e1,this.e2,this.e3,this.lat0)}function zZ(e){var t=e.x,i=e.y,a,c,h,f=ar(t-this.long0);if(h=f*Math.sin(i),this.sphere)Math.abs(i)<=tr?(a=this.a*f,c=-1*this.a*this.lat0):(a=this.a*Math.sin(h)/Math.tan(i),c=this.a*(Ff(i-this.lat0)+(1-Math.cos(h))/Math.tan(i)));else if(Math.abs(i)<=tr)a=this.a*f,c=-1*this.ml0;else{var o=Zg(this.a,this.e,Math.sin(i))/Math.tan(i);a=o*Math.sin(h),c=this.a*ta(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+o*(1-Math.cos(h))}return e.x=a+this.x0,e.y=c+this.y0,e}function OZ(e){var t,i,a,c,h,f,o,x,P;if(a=e.x-this.x0,c=e.y-this.y0,this.sphere)if(Math.abs(c+this.a*this.lat0)<=tr)t=ar(a/this.a+this.long0),i=0;else{f=this.lat0+c/this.a,o=a*a/this.a/this.a+f*f,x=f;var I;for(h=XP;h;--h)if(I=Math.tan(x),P=-1*(f*(x*I+1)-x-.5*(x*x+o)*I)/((x-f)/I-1),x+=P,Math.abs(P)<=tr){i=x;break}t=ar(this.long0+Math.asin(a*Math.tan(x)/this.a)/Math.sin(i))}else if(Math.abs(c+this.ml0)<=tr)i=0,t=ar(this.long0+a/this.a);else{f=(this.ml0+c)/this.a,o=a*a/this.a/this.a+f*f,x=f;var R,D,$,G,j;for(h=XP;h;--h)if(j=this.e*Math.sin(x),R=Math.sqrt(1-j*j)*Math.tan(x),D=this.a*ta(this.e0,this.e1,this.e2,this.e3,x),$=this.e0-2*this.e1*Math.cos(2*x)+4*this.e2*Math.cos(4*x)-6*this.e3*Math.cos(6*x),G=D/this.a,P=(f*(R*G+1)-G-.5*R*(G*G+o))/(this.es*Math.sin(2*x)*(G*G+o-2*f*G)/(4*R)+(f-G)*(R*$-2/Math.sin(2*x))-$),x-=P,Math.abs(P)<=tr){i=x;break}R=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),t=ar(this.long0+Math.asin(a*R/this.a)/Math.sin(i))}return e.x=t,e.y=i,e}var LZ=["Polyconic","poly"];const FZ={init:DZ,forward:zZ,inverse:OZ,names:LZ};function BZ(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function $Z(e){var t,i=e.x,a=e.y,c=a-this.lat0,h=i-this.long0,f=c/lv*1e-5,o=h,x=1,P=0;for(t=1;t<=10;t++)x=x*f,P=P+this.A[t]*x;var I=P,R=o,D=1,$=0,G,j,V=0,se=0;for(t=1;t<=6;t++)G=D*I-$*R,j=$*I+D*R,D=G,$=j,V=V+this.B_re[t]*D-this.B_im[t]*$,se=se+this.B_im[t]*D+this.B_re[t]*$;return e.x=se*this.a+this.x0,e.y=V*this.a+this.y0,e}function jZ(e){var t,i=e.x,a=e.y,c=i-this.x0,h=a-this.y0,f=h/this.a,o=c/this.a,x=1,P=0,I,R,D=0,$=0;for(t=1;t<=6;t++)I=x*f-P*o,R=P*f+x*o,x=I,P=R,D=D+this.C_re[t]*x-this.C_im[t]*P,$=$+this.C_im[t]*x+this.C_re[t]*P;for(var G=0;G<this.iterations;G++){var j=D,V=$,se,ue,Q=f,de=o;for(t=2;t<=6;t++)se=j*D-V*$,ue=V*D+j*$,j=se,V=ue,Q=Q+(t-1)*(this.B_re[t]*j-this.B_im[t]*V),de=de+(t-1)*(this.B_im[t]*j+this.B_re[t]*V);j=1,V=0;var oe=this.B_re[1],be=this.B_im[1];for(t=2;t<=6;t++)se=j*D-V*$,ue=V*D+j*$,j=se,V=ue,oe=oe+t*(this.B_re[t]*j-this.B_im[t]*V),be=be+t*(this.B_im[t]*j+this.B_re[t]*V);var we=oe*oe+be*be;D=(Q*oe+de*be)/we,$=(de*oe-Q*be)/we}var Ie=D,ke=$,ae=1,Ee=0;for(t=1;t<=9;t++)ae=ae*Ie,Ee=Ee+this.D[t]*ae;var Ze=this.lat0+Ee*lv*1e5,Qe=this.long0+ke;return e.x=Qe,e.y=Ze,e}var NZ=["New_Zealand_Map_Grid","nzmg"];const VZ={init:BZ,forward:$Z,inverse:jZ,names:NZ};function UZ(){}function GZ(e){var t=e.x,i=e.y,a=ar(t-this.long0),c=this.x0+this.a*a,h=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return e.x=c,e.y=h,e}function qZ(e){e.x-=this.x0,e.y-=this.y0;var t=ar(this.long0+e.x/this.a),i=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=i,e}var HZ=["Miller_Cylindrical","mill"];const WZ={init:UZ,forward:GZ,inverse:qZ,names:HZ};var ZZ=20;function XZ(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=SS(this.es)}function KZ(e){var t,i,a=e.x,c=e.y;if(a=ar(a-this.long0),this.sphere){if(!this.m)c=this.n!==1?Math.asin(this.n*Math.sin(c)):c;else for(var h=this.n*Math.sin(c),f=ZZ;f;--f){var o=(this.m*c+Math.sin(c)-h)/(this.m+Math.cos(c));if(c-=o,Math.abs(o)<tr)break}t=this.a*this.C_x*a*(this.m+Math.cos(c)),i=this.a*this.C_y*c}else{var x=Math.sin(c),P=Math.cos(c);i=this.a*ty(c,x,P,this.en),t=this.a*a*P/Math.sqrt(1-this.es*x*x)}return e.x=t,e.y=i,e}function YZ(e){var t,i,a,c;return e.x-=this.x0,a=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,a=a/(this.C_x*(this.m+Math.cos(t))),this.m?t=Rf((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=Rf(Math.sin(t)/this.n)),a=ar(a+this.long0),t=Ff(t)):(t=CS(e.y/this.a,this.es,this.en),c=Math.abs(t),c<jt?(c=Math.sin(t),i=this.long0+e.x*Math.sqrt(1-this.es*c*c)/(this.a*Math.cos(t)),a=ar(i)):c-tr<jt&&(a=this.long0)),e.x=a,e.y=t,e}var JZ=["Sinusoidal","sinu"];const QZ={init:XZ,forward:KZ,inverse:YZ,names:JZ};function eX(){}function tX(e){for(var t=e.x,i=e.y,a=ar(t-this.long0),c=i,h=Math.PI*Math.sin(i);;){var f=-(c+Math.sin(c)-h)/(1+Math.cos(c));if(c+=f,Math.abs(f)<tr)break}c/=2,Math.PI/2-Math.abs(i)<tr&&(a=0);var o=.900316316158*this.a*a*Math.cos(c)+this.x0,x=1.4142135623731*this.a*Math.sin(c)+this.y0;return e.x=o,e.y=x,e}function rX(e){var t,i;e.x-=this.x0,e.y-=this.y0,i=e.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),t=Math.asin(i);var a=ar(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));a<-Math.PI&&(a=-Math.PI),a>Math.PI&&(a=Math.PI),i=(2*t+Math.sin(2*t))/Math.PI,Math.abs(i)>1&&(i=1);var c=Math.asin(i);return e.x=a,e.y=c,e}var nX=["Mollweide","moll"];const iX={init:eX,forward:tX,inverse:rX,names:nX};function oX(){Math.abs(this.lat1+this.lat2)<tr||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=c0(this.es),this.e1=u0(this.es),this.e2=h0(this.es),this.e3=d0(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=uh(this.e,this.sinphi,this.cosphi),this.ml1=ta(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<tr?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=uh(this.e,this.sinphi,this.cosphi),this.ml2=ta(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=ta(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function sX(e){var t=e.x,i=e.y,a;if(this.sphere)a=this.a*(this.g-i);else{var c=ta(this.e0,this.e1,this.e2,this.e3,i);a=this.a*(this.g-c)}var h=this.ns*ar(t-this.long0),f=this.x0+a*Math.sin(h),o=this.y0+this.rh-a*Math.cos(h);return e.x=f,e.y=o,e}function aX(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,i,a,c;this.ns>=0?(i=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(i=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var h=0;if(i!==0&&(h=Math.atan2(t*e.x,t*e.y)),this.sphere)return c=ar(this.long0+h/this.ns),a=Ff(this.g-i/this.a),e.x=c,e.y=a,e;var f=this.g-i/this.a;return a=vx(f,this.e0,this.e1,this.e2,this.e3),c=ar(this.long0+h/this.ns),e.x=c,e.y=a,e}var lX=["Equidistant_Conic","eqdc"];const cX={init:oX,forward:sX,inverse:aX,names:lX};function uX(){this.R=this.a}function hX(e){var t=e.x,i=e.y,a=ar(t-this.long0),c,h;Math.abs(i)<=tr&&(c=this.x0+this.R*a,h=this.y0);var f=Rf(2*Math.abs(i/Math.PI));(Math.abs(a)<=tr||Math.abs(Math.abs(i)-jt)<=tr)&&(c=this.x0,i>=0?h=this.y0+Math.PI*this.R*Math.tan(.5*f):h=this.y0+Math.PI*this.R*-Math.tan(.5*f));var o=.5*Math.abs(Math.PI/a-a/Math.PI),x=o*o,P=Math.sin(f),I=Math.cos(f),R=I/(P+I-1),D=R*R,$=R*(2/P-1),G=$*$,j=Math.PI*this.R*(o*(R-G)+Math.sqrt(x*(R-G)*(R-G)-(G+x)*(D-G)))/(G+x);a<0&&(j=-j),c=this.x0+j;var V=x+R;return j=Math.PI*this.R*($*V-o*Math.sqrt((G+x)*(x+1)-V*V))/(G+x),i>=0?h=this.y0+j:h=this.y0-j,e.x=c,e.y=h,e}function dX(e){var t,i,a,c,h,f,o,x,P,I,R,D,$;return e.x-=this.x0,e.y-=this.y0,R=Math.PI*this.R,a=e.x/R,c=e.y/R,h=a*a+c*c,f=-Math.abs(c)*(1+h),o=f-2*c*c+a*a,x=-2*f+1+2*c*c+h*h,$=c*c/x+(2*o*o*o/x/x/x-9*f*o/x/x)/27,P=(f-o*o/3/x)/x,I=2*Math.sqrt(-P/3),R=3*$/P/I,Math.abs(R)>1&&(R>=0?R=1:R=-1),D=Math.acos(R)/3,e.y>=0?i=(-I*Math.cos(D+Math.PI/3)-o/3/x)*Math.PI:i=-(-I*Math.cos(D+Math.PI/3)-o/3/x)*Math.PI,Math.abs(a)<tr?t=this.long0:t=ar(this.long0+Math.PI*(h-1+Math.sqrt(1+2*(a*a-c*c)+h*h))/2/a),e.x=t,e.y=i,e}var fX=["Van_der_Grinten_I","VanDerGrinten","vandg"];const pX={init:uX,forward:hX,inverse:dX,names:fX};function mX(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function gX(e){var t=e.x,i=e.y,a=Math.sin(e.y),c=Math.cos(e.y),h=ar(t-this.long0),f,o,x,P,I,R,D,$,G,j,V,se,ue,Q,de,oe,be,we,Ie,ke,ae,Ee,Ze;return this.sphere?Math.abs(this.sin_p12-1)<=tr?(e.x=this.x0+this.a*(jt-i)*Math.sin(h),e.y=this.y0-this.a*(jt-i)*Math.cos(h),e):Math.abs(this.sin_p12+1)<=tr?(e.x=this.x0+this.a*(jt+i)*Math.sin(h),e.y=this.y0+this.a*(jt+i)*Math.cos(h),e):(we=this.sin_p12*a+this.cos_p12*c*Math.cos(h),oe=Math.acos(we),be=oe?oe/Math.sin(oe):1,e.x=this.x0+this.a*be*c*Math.sin(h),e.y=this.y0+this.a*be*(this.cos_p12*a-this.sin_p12*c*Math.cos(h)),e):(f=c0(this.es),o=u0(this.es),x=h0(this.es),P=d0(this.es),Math.abs(this.sin_p12-1)<=tr?(I=this.a*ta(f,o,x,P,jt),R=this.a*ta(f,o,x,P,i),e.x=this.x0+(I-R)*Math.sin(h),e.y=this.y0-(I-R)*Math.cos(h),e):Math.abs(this.sin_p12+1)<=tr?(I=this.a*ta(f,o,x,P,jt),R=this.a*ta(f,o,x,P,i),e.x=this.x0+(I+R)*Math.sin(h),e.y=this.y0+(I+R)*Math.cos(h),e):(D=a/c,$=Zg(this.a,this.e,this.sin_p12),G=Zg(this.a,this.e,a),j=Math.atan((1-this.es)*D+this.es*$*this.sin_p12/(G*c)),V=Math.atan2(Math.sin(h),this.cos_p12*Math.tan(j)-this.sin_p12*Math.cos(h)),V===0?Ie=Math.asin(this.cos_p12*Math.sin(j)-this.sin_p12*Math.cos(j)):Math.abs(Math.abs(V)-Math.PI)<=tr?Ie=-Math.asin(this.cos_p12*Math.sin(j)-this.sin_p12*Math.cos(j)):Ie=Math.asin(Math.sin(h)*Math.cos(j)/Math.sin(V)),se=this.e*this.sin_p12/Math.sqrt(1-this.es),ue=this.e*this.cos_p12*Math.cos(V)/Math.sqrt(1-this.es),Q=se*ue,de=ue*ue,ke=Ie*Ie,ae=ke*Ie,Ee=ae*Ie,Ze=Ee*Ie,oe=$*Ie*(1-ke*de*(1-de)/6+ae/8*Q*(1-2*de)+Ee/120*(de*(4-7*de)-3*se*se*(1-7*de))-Ze/48*Q),e.x=this.x0+oe*Math.sin(V),e.y=this.y0+oe*Math.cos(V),e))}function yX(e){e.x-=this.x0,e.y-=this.y0;var t,i,a,c,h,f,o,x,P,I,R,D,$,G,j,V,se,ue,Q,de,oe,be,we,Ie;return this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*jt*this.a?void 0:(i=t/this.a,a=Math.sin(i),c=Math.cos(i),h=this.long0,Math.abs(t)<=tr?f=this.lat0:(f=Rf(c*this.sin_p12+e.y*a*this.cos_p12/t),o=Math.abs(this.lat0)-jt,Math.abs(o)<=tr?this.lat0>=0?h=ar(this.long0+Math.atan2(e.x,-e.y)):h=ar(this.long0-Math.atan2(-e.x,e.y)):h=ar(this.long0+Math.atan2(e.x*a,t*this.cos_p12*c-e.y*this.sin_p12*a))),e.x=h,e.y=f,e)):(x=c0(this.es),P=u0(this.es),I=h0(this.es),R=d0(this.es),Math.abs(this.sin_p12-1)<=tr?(D=this.a*ta(x,P,I,R,jt),t=Math.sqrt(e.x*e.x+e.y*e.y),$=D-t,f=vx($/this.a,x,P,I,R),h=ar(this.long0+Math.atan2(e.x,-1*e.y)),e.x=h,e.y=f,e):Math.abs(this.sin_p12+1)<=tr?(D=this.a*ta(x,P,I,R,jt),t=Math.sqrt(e.x*e.x+e.y*e.y),$=t-D,f=vx($/this.a,x,P,I,R),h=ar(this.long0+Math.atan2(e.x,e.y)),e.x=h,e.y=f,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),V=Math.atan2(e.x,e.y),G=Zg(this.a,this.e,this.sin_p12),se=Math.cos(V),ue=this.e*this.cos_p12*se,Q=-ue*ue/(1-this.es),de=3*this.es*(1-Q)*this.sin_p12*this.cos_p12*se/(1-this.es),oe=t/G,be=oe-Q*(1+Q)*Math.pow(oe,3)/6-de*(1+3*Q)*Math.pow(oe,4)/24,we=1-Q*be*be/2-oe*be*be*be/6,j=Math.asin(this.sin_p12*Math.cos(be)+this.cos_p12*Math.sin(be)*se),h=ar(this.long0+Math.asin(Math.sin(V)*Math.sin(be)/Math.cos(j))),Ie=Math.sin(j),f=Math.atan2((Ie-this.es*we*this.sin_p12)*Math.tan(j),Ie*(1-this.es)),e.x=h,e.y=f,e))}var vX=["Azimuthal_Equidistant","aeqd"];const _X={init:mX,forward:gX,inverse:yX,names:vX};function xX(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function bX(e){var t,i,a,c,h,f,o,x,P=e.x,I=e.y;return a=ar(P-this.long0),t=Math.sin(I),i=Math.cos(I),c=Math.cos(a),f=this.sin_p14*t+this.cos_p14*i*c,h=1,(f>0||Math.abs(f)<=tr)&&(o=this.a*h*i*Math.sin(a),x=this.y0+this.a*h*(this.cos_p14*t-this.sin_p14*i*c)),e.x=o,e.y=x,e}function wX(e){var t,i,a,c,h,f,o;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),i=Rf(t/this.a),a=Math.sin(i),c=Math.cos(i),f=this.long0,Math.abs(t)<=tr?(o=this.lat0,e.x=f,e.y=o,e):(o=Rf(c*this.sin_p14+e.y*a*this.cos_p14/t),h=Math.abs(this.lat0)-jt,Math.abs(h)<=tr?(this.lat0>=0?f=ar(this.long0+Math.atan2(e.x,-e.y)):f=ar(this.long0-Math.atan2(-e.x,e.y)),e.x=f,e.y=o,e):(f=ar(this.long0+Math.atan2(e.x*a,t*this.cos_p14*c-e.y*this.sin_p14*a)),e.x=f,e.y=o,e))}var SX=["ortho"];const CX={init:xX,forward:bX,inverse:wX,names:SX};var Wi={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Jn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function TX(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=jt-Yn/2?this.face=Wi.TOP:this.lat0<=-(jt-Yn/2)?this.face=Wi.BOTTOM:Math.abs(this.long0)<=Yn?this.face=Wi.FRONT:Math.abs(this.long0)<=jt+Yn?this.face=this.long0>0?Wi.RIGHT:Wi.LEFT:this.face=Wi.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function MX(e){var t={x:0,y:0},i,a,c,h,f,o,x={value:0};if(e.x-=this.long0,this.es!==0?i=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):i=e.y,a=e.x,this.face===Wi.TOP)h=jt-i,a>=Yn&&a<=jt+Yn?(x.value=Jn.AREA_0,c=a-jt):a>jt+Yn||a<=-(jt+Yn)?(x.value=Jn.AREA_1,c=a>0?a-mo:a+mo):a>-(jt+Yn)&&a<=-Yn?(x.value=Jn.AREA_2,c=a+jt):(x.value=Jn.AREA_3,c=a);else if(this.face===Wi.BOTTOM)h=jt+i,a>=Yn&&a<=jt+Yn?(x.value=Jn.AREA_0,c=-a+jt):a<Yn&&a>=-Yn?(x.value=Jn.AREA_1,c=-a):a<-Yn&&a>=-(jt+Yn)?(x.value=Jn.AREA_2,c=-a-jt):(x.value=Jn.AREA_3,c=a>0?-a+mo:-a-mo);else{var P,I,R,D,$,G,j;this.face===Wi.RIGHT?a=Ig(a,+jt):this.face===Wi.BACK?a=Ig(a,+mo):this.face===Wi.LEFT&&(a=Ig(a,-jt)),D=Math.sin(i),$=Math.cos(i),G=Math.sin(a),j=Math.cos(a),P=$*j,I=$*G,R=D,this.face===Wi.FRONT?(h=Math.acos(P),c=b_(h,R,I,x)):this.face===Wi.RIGHT?(h=Math.acos(I),c=b_(h,R,-P,x)):this.face===Wi.BACK?(h=Math.acos(-P),c=b_(h,R,-I,x)):this.face===Wi.LEFT?(h=Math.acos(-I),c=b_(h,R,P,x)):(h=c=0,x.value=Jn.AREA_0)}return o=Math.atan(12/mo*(c+Math.acos(Math.sin(c)*Math.cos(Yn))-jt)),f=Math.sqrt((1-Math.cos(h))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(c))))),x.value===Jn.AREA_1?o+=jt:x.value===Jn.AREA_2?o+=mo:x.value===Jn.AREA_3&&(o+=1.5*mo),t.x=f*Math.cos(o),t.y=f*Math.sin(o),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,e.x=t.x,e.y=t.y,e}function PX(e){var t={lam:0,phi:0},i,a,c,h,f,o,x,P,I,R={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,a=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),i=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?R.value=Jn.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(R.value=Jn.AREA_1,i-=jt):e.x<0&&-e.x>=Math.abs(e.y)?(R.value=Jn.AREA_2,i=i<0?i+mo:i-mo):(R.value=Jn.AREA_3,i+=jt),I=mo/12*Math.tan(i),f=Math.sin(I)/(Math.cos(I)-1/Math.sqrt(2)),o=Math.atan(f),c=Math.cos(i),h=Math.tan(a),x=1-c*c*h*h*(1-Math.cos(Math.atan(1/Math.cos(o)))),x<-1?x=-1:x>1&&(x=1),this.face===Wi.TOP)P=Math.acos(x),t.phi=jt-P,R.value===Jn.AREA_0?t.lam=o+jt:R.value===Jn.AREA_1?t.lam=o<0?o+mo:o-mo:R.value===Jn.AREA_2?t.lam=o-jt:t.lam=o;else if(this.face===Wi.BOTTOM)P=Math.acos(x),t.phi=P-jt,R.value===Jn.AREA_0?t.lam=-o+jt:R.value===Jn.AREA_1?t.lam=-o:R.value===Jn.AREA_2?t.lam=-o-jt:t.lam=o<0?-o-mo:-o+mo;else{var D,$,G;D=x,I=D*D,I>=1?G=0:G=Math.sqrt(1-I)*Math.sin(o),I+=G*G,I>=1?$=0:$=Math.sqrt(1-I),R.value===Jn.AREA_1?(I=$,$=-G,G=I):R.value===Jn.AREA_2?($=-$,G=-G):R.value===Jn.AREA_3&&(I=$,$=G,G=-I),this.face===Wi.RIGHT?(I=D,D=-$,$=I):this.face===Wi.BACK?(D=-D,$=-$):this.face===Wi.LEFT&&(I=D,D=$,$=-I),t.phi=Math.acos(-G)-jt,t.lam=Math.atan2($,D),this.face===Wi.RIGHT?t.lam=Ig(t.lam,-jt):this.face===Wi.BACK?t.lam=Ig(t.lam,-mo):this.face===Wi.LEFT&&(t.lam=Ig(t.lam,+jt))}if(this.es!==0){var j,V,se;j=t.phi<0?1:0,V=Math.tan(t.phi),se=this.b/Math.sqrt(V*V+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-se*se)/(this.one_minus_f*se)),j&&(t.phi=-t.phi)}return t.lam+=this.long0,e.x=t.lam,e.y=t.phi,e}function b_(e,t,i,a){var c;return e<tr?(a.value=Jn.AREA_0,c=0):(c=Math.atan2(t,i),Math.abs(c)<=Yn?a.value=Jn.AREA_0:c>Yn&&c<=jt+Yn?(a.value=Jn.AREA_1,c-=jt):c>jt+Yn||c<=-(jt+Yn)?(a.value=Jn.AREA_2,c=c>=0?c-mo:c+mo):(a.value=Jn.AREA_3,c+=jt)),c}function Ig(e,t){var i=e+t;return i<-mo?i+=kv:i>+mo&&(i-=kv),i}var EX=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const IX={init:TX,forward:MX,inverse:PX,names:EX};var Jw=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Yy=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],BR=.8487,$R=1.3523,jR=th/5,kX=1/jR,bg=18,_x=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},AX=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function RX(e,t,i,a){for(var c=t;a;--a){var h=e(c);if(c-=h,Math.abs(h)<i)break}return c}function DX(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function zX(e){var t=ar(e.x-this.long0),i=Math.abs(e.y),a=Math.floor(i*jR);a<0?a=0:a>=bg&&(a=bg-1),i=th*(i-kX*a);var c={x:_x(Jw[a],i)*t,y:_x(Yy[a],i)};return e.y<0&&(c.y=-c.y),c.x=c.x*this.a*BR+this.x0,c.y=c.y*this.a*$R+this.y0,c}function OX(e){var t={x:(e.x-this.x0)/(this.a*BR),y:Math.abs(e.y-this.y0)/(this.a*$R)};if(t.y>=1)t.x/=Jw[bg][0],t.y=e.y<0?-jt:jt;else{var i=Math.floor(t.y*bg);for(i<0?i=0:i>=bg&&(i=bg-1);;)if(Yy[i][0]>t.y)--i;else if(Yy[i+1][0]<=t.y)++i;else break;var a=Yy[i],c=5*(t.y-a[0])/(Yy[i+1][0]-a[0]);c=RX(function(h){return(_x(a,h)-t.y)/AX(a,h)},c,tr,100),t.x/=_x(Jw[i],c),t.y=(5*i+c)*fs,e.y<0&&(t.y=-t.y)}return t.x=ar(t.x+this.long0),t}var LX=["Robinson","robin"];const FX={init:DX,forward:zX,inverse:OX,names:LX};function BX(){this.name="geocent"}function $X(e){var t=PR(e,this.es,this.a);return t}function jX(e){var t=ER(e,this.es,this.a,this.b);return t}var NX=["Geocentric","geocentric","geocent","Geocent"];const VX={init:BX,forward:$X,inverse:jX,names:NX};var Ds={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Uy={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function UX(){if(Object.keys(Uy).forEach((function(i){if(typeof this[i]>"u")this[i]=Uy[i].def;else{if(Uy[i].num&&isNaN(this[i]))throw new Error("Invalid parameter value, must be numeric "+i+" = "+this[i]);Uy[i].num&&(this[i]=parseFloat(this[i]))}Uy[i].degrees&&(this[i]=this[i]*fs)}).bind(this)),Math.abs(Math.abs(this.lat0)-jt)<tr?this.mode=this.lat0<0?Ds.S_POLE:Ds.N_POLE:Math.abs(this.lat0)<tr?this.mode=Ds.EQUIT:(this.mode=Ds.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)}function GX(e){e.x-=this.long0;var t=Math.sin(e.y),i=Math.cos(e.y),a=Math.cos(e.x),c,h;switch(this.mode){case Ds.OBLIQ:h=this.sinph0*t+this.cosph0*i*a;break;case Ds.EQUIT:h=i*a;break;case Ds.S_POLE:h=-t;break;case Ds.N_POLE:h=t;break}switch(h=this.pn1/(this.p-h),c=h*i*Math.sin(e.x),this.mode){case Ds.OBLIQ:h*=this.cosph0*t-this.sinph0*i*a;break;case Ds.EQUIT:h*=t;break;case Ds.N_POLE:h*=-(i*a);break;case Ds.S_POLE:h*=i*a;break}var f,o;return f=h*this.cg+c*this.sg,o=1/(f*this.sw*this.h1+this.cw),c=(c*this.cg-h*this.sg)*this.cw*o,h=f*o,e.x=c*this.a,e.y=h*this.a,e}function qX(e){e.x/=this.a,e.y/=this.a;var t={x:e.x,y:e.y},i,a,c;c=1/(this.pn1-e.y*this.sw),i=this.pn1*e.x*c,a=this.pn1*e.y*this.cw*c,e.x=i*this.cg+a*this.sg,e.y=a*this.cg-i*this.sg;var h=Ea(e.x,e.y);if(Math.abs(h)<tr)t.x=0,t.y=e.y;else{var f,o;switch(o=1-h*h*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/h+h/this.pn1),f=Math.sqrt(1-o*o),this.mode){case Ds.OBLIQ:t.y=Math.asin(f*this.sinph0+e.y*o*this.cosph0/h),e.y=(f-this.sinph0*Math.sin(t.y))*h,e.x*=o*this.cosph0;break;case Ds.EQUIT:t.y=Math.asin(e.y*o/h),e.y=f*h,e.x*=o;break;case Ds.N_POLE:t.y=Math.asin(f),e.y=-e.y;break;case Ds.S_POLE:t.y=-Math.asin(f);break}t.x=Math.atan2(e.x,e.y)}return e.x=t.x+this.long0,e.y=t.y,e}var HX=["Tilted_Perspective","tpers"];const WX={init:UX,forward:GX,inverse:qX,names:HX};function ZX(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function XX(e){var t=e.x,i=e.y,a,c,h,f;if(t=t-this.long0,this.shape==="ellipse"){i=Math.atan(this.radius_p2*Math.tan(i));var o=this.radius_p/Ea(this.radius_p*Math.cos(i),Math.sin(i));if(c=o*Math.cos(t)*Math.cos(i),h=o*Math.sin(t)*Math.cos(i),f=o*Math.sin(i),(this.radius_g-c)*c-h*h-f*f*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;a=this.radius_g-c,this.flip_axis?(e.x=this.radius_g_1*Math.atan(h/Ea(f,a)),e.y=this.radius_g_1*Math.atan(f/a)):(e.x=this.radius_g_1*Math.atan(h/a),e.y=this.radius_g_1*Math.atan(f/Ea(h,a)))}else this.shape==="sphere"&&(a=Math.cos(i),c=Math.cos(t)*a,h=Math.sin(t)*a,f=Math.sin(i),a=this.radius_g-c,this.flip_axis?(e.x=this.radius_g_1*Math.atan(h/Ea(f,a)),e.y=this.radius_g_1*Math.atan(f/a)):(e.x=this.radius_g_1*Math.atan(h/a),e.y=this.radius_g_1*Math.atan(f/Ea(h,a))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function KX(e){var t=-1,i=0,a=0,c,h,f,o;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(a=Math.tan(e.y/this.radius_g_1),i=Math.tan(e.x/this.radius_g_1)*Ea(1,a)):(i=Math.tan(e.x/this.radius_g_1),a=Math.tan(e.y/this.radius_g_1)*Ea(1,i));var x=a/this.radius_p;if(c=i*i+x*x+t*t,h=2*this.radius_g*t,f=h*h-4*c*this.C,f<0)return e.x=Number.NaN,e.y=Number.NaN,e;o=(-h-Math.sqrt(f))/(2*c),t=this.radius_g+o*t,i*=o,a*=o,e.x=Math.atan2(i,t),e.y=Math.atan(a*Math.cos(e.x)/t),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(a=Math.tan(e.y/this.radius_g_1),i=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+a*a)):(i=Math.tan(e.x/this.radius_g_1),a=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+i*i)),c=i*i+a*a+t*t,h=2*this.radius_g*t,f=h*h-4*c*this.C,f<0)return e.x=Number.NaN,e.y=Number.NaN,e;o=(-h-Math.sqrt(f))/(2*c),t=this.radius_g+o*t,i*=o,a*=o,e.x=Math.atan2(i,t),e.y=Math.atan(a*Math.cos(e.x)/t)}return e.x=e.x+this.long0,e}var YX=["Geostationary Satellite View","Geostationary_Satellite","geos"];const JX={init:ZX,forward:XX,inverse:KX,names:YX};var cv=1.340264,uv=-.081106,hv=893e-6,dv=.003796,xx=Math.sqrt(3)/2;function QX(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function eK(e){var t=ar(e.x-this.long0),i=e.y,a=Math.asin(xx*Math.sin(i)),c=a*a,h=c*c*c;return e.x=t*Math.cos(a)/(xx*(cv+3*uv*c+h*(7*hv+9*dv*c))),e.y=a*(cv+uv*c+h*(hv+dv*c)),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function tK(e){e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a;var t=1e-9,i=12,a=e.y,c,h,f,o,x,P;for(P=0;P<i&&(c=a*a,h=c*c*c,f=a*(cv+uv*c+h*(hv+dv*c))-e.y,o=cv+3*uv*c+h*(7*hv+9*dv*c),a-=x=f/o,!(Math.abs(x)<t));++P);return c=a*a,h=c*c*c,e.x=xx*e.x*(cv+3*uv*c+h*(7*hv+9*dv*c))/Math.cos(a),e.y=Math.asin(Math.sin(a)/xx),e.x=ar(e.x+this.long0),e}var rK=["eqearth","Equal Earth","Equal_Earth"];const nK={init:QX,forward:eK,inverse:tK,names:rK};var Dv=1e-10;function iK(){var e;if(this.phi1=this.lat1,Math.abs(this.phi1)<Dv)throw new Error;this.es?(this.en=SS(this.es),this.m1=ty(this.phi1,this.am1=Math.sin(this.phi1),e=Math.cos(this.phi1),this.en),this.am1=e/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=sK,this.forward=oK):(Math.abs(this.phi1)+Dv>=jt?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=lK,this.forward=aK)}function oK(e){var t=ar(e.x-(this.long0||0)),i=e.y,a,c,h;return a=this.am1+this.m1-ty(i,c=Math.sin(i),h=Math.cos(i),this.en),c=h*t/(a*Math.sqrt(1-this.es*c*c)),e.x=a*Math.sin(c),e.y=this.am1-a*Math.cos(c),e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function sK(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,i,a,c;if(i=Ea(e.x,e.y=this.am1-e.y),c=CS(this.am1+this.m1-i,this.es,this.en),(t=Math.abs(c))<jt)t=Math.sin(c),a=i*Math.atan2(e.x,e.y)*Math.sqrt(1-this.es*t*t)/Math.cos(c);else if(Math.abs(t-jt)<=Dv)a=0;else throw new Error;return e.x=ar(a+(this.long0||0)),e.y=Ff(c),e}function aK(e){var t=ar(e.x-(this.long0||0)),i=e.y,a,c;return c=this.cphi1+this.phi1-i,Math.abs(c)>Dv?(e.x=c*Math.sin(a=t*Math.cos(i)/c),e.y=this.cphi1-c*Math.cos(a)):e.x=e.y=0,e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function lK(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,i,a=Ea(e.x,e.y=this.cphi1-e.y);if(i=this.cphi1+this.phi1-a,Math.abs(i)>jt)throw new Error;return Math.abs(Math.abs(i)-jt)<=Dv?t=0:t=a*Math.atan2(e.x,e.y)/Math.cos(i),e.x=ar(t+(this.long0||0)),e.y=Ff(i),e}var cK=["bonne","Bonne (Werner lat_1=90)"];const uK={init:iK,names:cK};function hK(e){e.Proj.projections.add(N_),e.Proj.projections.add(V_),e.Proj.projections.add(sW),e.Proj.projections.add(mW),e.Proj.projections.add(bW),e.Proj.projections.add(MW),e.Proj.projections.add(RW),e.Proj.projections.add(FW),e.Proj.projections.add(VW),e.Proj.projections.add(WW),e.Proj.projections.add(uZ),e.Proj.projections.add(gZ),e.Proj.projections.add(bZ),e.Proj.projections.add(PZ),e.Proj.projections.add(RZ),e.Proj.projections.add(FZ),e.Proj.projections.add(VZ),e.Proj.projections.add(WZ),e.Proj.projections.add(QZ),e.Proj.projections.add(iX),e.Proj.projections.add(cX),e.Proj.projections.add(pX),e.Proj.projections.add(_X),e.Proj.projections.add(CX),e.Proj.projections.add(IX),e.Proj.projections.add(FX),e.Proj.projections.add(VX),e.Proj.projections.add(WX),e.Proj.projections.add(JX),e.Proj.projections.add(nK),e.Proj.projections.add(uK)}za.defaultDatum="WGS84";za.Proj=ah;za.WGS84=new za.Proj("WGS84");za.Point=Wg;za.toPoint=IR;za.defs=Js;za.nadgrid=lH;za.transform=yx;za.mgrs=CH;za.version="__VERSION__";hK(za);const ES=6370997,KP=ES*Math.PI/180,wg={standardParalel1:33,standardParalel2:45,mapOrigin:[39,-96],mapFactor:[-.00017706234,.000176689948]},dK=["+proj=lcc",`+R=${ES}`,`+lat_1=${wg.standardParalel1}`,`+lat_2=${wg.standardParalel2}`,`+lat_0=${wg.mapOrigin[0]}`,`+lon_0=${wg.mapOrigin[1]}`].join(" "),fK=za(dK),YP=([e,t])=>{const i=[e*wg.mapFactor[1]*KP,t*wg.mapFactor[0]*KP];return fK.inverse(i)},w_={standardParalel1:37,standardParalel2:65,mapOrigin:[50,15]},pK=["+proj=lcc",`+R=${ES}`,`+lat_1=${w_.standardParalel1}`,`+lat_2=${w_.standardParalel2}`,`+lat_0=${w_.mapOrigin[0]}`,`+lon_0=${w_.mapOrigin[1]}`].join(" ");za(pK);var sw={exports:{}},JP;function mK(){return JP||(JP=1,function(e,t){(function(){var i=Math.PI,a=Math.sin,c=Math.cos,h=Math.tan,f=Math.asin,o=Math.atan2,x=Math.acos,P=i/180,I=1e3*60*60*24,R=2440588,D=2451545;function $(ve){return ve.valueOf()/I-.5+R}function G(ve){return new Date((ve+.5-R)*I)}function j(ve){return $(ve)-D}var V=P*23.4397;function se(ve,Fe){return o(a(ve)*c(V)-h(Fe)*a(V),c(ve))}function ue(ve,Fe){return f(a(Fe)*c(V)+c(Fe)*a(V)*a(ve))}function Q(ve,Fe,pt){return o(a(ve),c(ve)*a(Fe)-h(pt)*c(Fe))}function de(ve,Fe,pt){return f(a(Fe)*a(pt)+c(Fe)*c(pt)*c(ve))}function oe(ve,Fe){return P*(280.16+360.9856235*ve)-Fe}function be(ve){return ve<0&&(ve=0),2967e-7/Math.tan(ve+.00312536/(ve+.08901179))}function we(ve){return P*(357.5291+.98560028*ve)}function Ie(ve){var Fe=P*(1.9148*a(ve)+.02*a(2*ve)+3e-4*a(3*ve)),pt=P*102.9372;return ve+Fe+pt+i}function ke(ve){var Fe=we(ve),pt=Ie(Fe);return{dec:ue(pt,0),ra:se(pt,0)}}var ae={};ae.getPosition=function(ve,Fe,pt){var Tt=P*-pt,Ct=P*Fe,_t=j(ve),bt=ke(_t),nt=oe(_t,Tt)-bt.ra;return{azimuth:Q(nt,Ct,bt.dec),altitude:de(nt,Ct,bt.dec)}};var Ee=ae.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];ae.addTime=function(ve,Fe,pt){Ee.push([ve,Fe,pt])};var Ze=9e-4;function Qe(ve,Fe){return Math.round(ve-Ze-Fe/(2*i))}function vt(ve,Fe,pt){return Ze+(ve+Fe)/(2*i)+pt}function st(ve,Fe,pt){return D+ve+.0053*a(Fe)-.0069*a(2*pt)}function He(ve,Fe,pt){return x((a(ve)-a(Fe)*a(pt))/(c(Fe)*c(pt)))}function rt(ve){return-2.076*Math.sqrt(ve)/60}function Ge(ve,Fe,pt,Tt,Ct,_t,bt){var nt=He(ve,pt,Tt),kt=vt(nt,Fe,Ct);return st(kt,_t,bt)}ae.getTimes=function(ve,Fe,pt,Tt){Tt=Tt||0;var Ct=P*-pt,_t=P*Fe,bt=rt(Tt),nt=j(ve),kt=Qe(nt,Ct),At=vt(0,Ct,kt),dr=we(At),ir=Ie(dr),Gr=ue(ir,0),Tr=st(At,dr,ir),or,qt,pr,Xt,Ir,Rr,Br={solarNoon:G(Tr),nadir:G(Tr-.5)};for(or=0,qt=Ee.length;or<qt;or+=1)pr=Ee[or],Xt=(pr[0]+bt)*P,Ir=Ge(Xt,Ct,_t,Gr,kt,dr,ir),Rr=Tr-(Ir-Tr),Br[pr[1]]=G(Rr),Br[pr[2]]=G(Ir);return Br};function Ve(ve){var Fe=P*(218.316+13.176396*ve),pt=P*(134.963+13.064993*ve),Tt=P*(93.272+13.22935*ve),Ct=Fe+P*6.289*a(pt),_t=P*5.128*a(Tt),bt=385001-20905*c(pt);return{ra:se(Ct,_t),dec:ue(Ct,_t),dist:bt}}ae.getMoonPosition=function(ve,Fe,pt){var Tt=P*-pt,Ct=P*Fe,_t=j(ve),bt=Ve(_t),nt=oe(_t,Tt)-bt.ra,kt=de(nt,Ct,bt.dec),At=o(a(nt),h(Ct)*c(bt.dec)-a(bt.dec)*c(nt));return kt=kt+be(kt),{azimuth:Q(nt,Ct,bt.dec),altitude:kt,distance:bt.dist,parallacticAngle:At}},ae.getMoonIllumination=function(ve){var Fe=j(ve||new Date),pt=ke(Fe),Tt=Ve(Fe),Ct=149598e3,_t=x(a(pt.dec)*a(Tt.dec)+c(pt.dec)*c(Tt.dec)*c(pt.ra-Tt.ra)),bt=o(Ct*a(_t),Tt.dist-Ct*c(_t)),nt=o(c(pt.dec)*a(pt.ra-Tt.ra),a(pt.dec)*c(Tt.dec)-c(pt.dec)*a(Tt.dec)*c(pt.ra-Tt.ra));return{fraction:(1+c(bt))/2,phase:.5+.5*bt*(nt<0?-1:1)/Math.PI,angle:nt}};function ut(ve,Fe){return new Date(ve.valueOf()+Fe*I/24)}ae.getMoonTimes=function(ve,Fe,pt,Tt){var Ct=new Date(ve);Tt?Ct.setUTCHours(0,0,0,0):Ct.setHours(0,0,0,0);for(var _t=.133*P,bt=ae.getMoonPosition(Ct,Fe,pt).altitude-_t,nt,kt,At,dr,ir,Gr,Tr,or,qt,pr,Xt,Ir,Rr,Br=1;Br<=24&&(nt=ae.getMoonPosition(ut(Ct,Br),Fe,pt).altitude-_t,kt=ae.getMoonPosition(ut(Ct,Br+1),Fe,pt).altitude-_t,ir=(bt+kt)/2-nt,Gr=(kt-bt)/2,Tr=-Gr/(2*ir),or=(ir*Tr+Gr)*Tr+nt,qt=Gr*Gr-4*ir*nt,pr=0,qt>=0&&(Rr=Math.sqrt(qt)/(Math.abs(ir)*2),Xt=Tr-Rr,Ir=Tr+Rr,Math.abs(Xt)<=1&&pr++,Math.abs(Ir)<=1&&pr++,Xt<-1&&(Xt=Ir)),pr===1?bt<0?At=Br+Xt:dr=Br+Xt:pr===2&&(At=Br+(or<0?Ir:Xt),dr=Br+(or<0?Xt:Ir)),!(At&&dr));Br+=2)bt=kt;var Wr={};return At&&(Wr.rise=ut(Ct,At)),dr&&(Wr.set=ut(Ct,dr)),!At&&!dr&&(Wr[or>0?"alwaysUp":"alwaysDown"]=!0),Wr},e.exports=ae})()}(sw)),sw.exports}mK();function NR(e){const t=YP([e.position.X,e.position.Z]),i=(.5-e.orientation.heading)*Math.PI*2+Math.PI/2,a=YP([e.position.X+1e3*Math.cos(i),e.position.Z+1e3*Math.sin(i)]);return{position:t,bearing:lS(t,a,{final:!1})}}function U_(e,t,i={}){var a=Gp(e),c=Gp(t),h=eh(c[1]-a[1]),f=eh(c[0]-a[0]),o=eh(a[1]),x=eh(c[1]),P=Math.pow(Math.sin(h/2),2)+Math.pow(Math.sin(f/2),2)*Math.cos(o)*Math.cos(x);return u9(2*Math.atan2(Math.sqrt(P),Math.sqrt(1-P)),i.units)}function aw(e,t={}){return f9(e,(i,a)=>{const c=a.geometry.coordinates;return i+U_(c[0],c[1],t)},0)}var gK=Object.defineProperty,yK=Object.defineProperties,vK=Object.getOwnPropertyDescriptors,QP=Object.getOwnPropertySymbols,_K=Object.prototype.hasOwnProperty,xK=Object.prototype.propertyIsEnumerable,eE=(e,t,i)=>t in e?gK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,bK=(e,t)=>{for(var i in t||(t={}))_K.call(t,i)&&eE(e,i,t[i]);if(QP)for(var i of QP(t))xK.call(t,i)&&eE(e,i,t[i]);return e},wK=(e,t)=>yK(e,vK(t));function SK(e,t,i={}){if(!e||!t)throw new Error("lines and inputPoint are required arguments");const a=Gp(t);let c=Zy([1/0,1/0],{lineStringIndex:-1,segmentIndex:-1,totalDistance:-1,lineDistance:-1,segmentDistance:-1,pointDistance:1/0,multiFeatureIndex:-1,index:-1,location:-1,dist:1/0}),h=0,f=0,o=-1;return FA(e,function(x,P,I){o!==I&&(o=I,f=0);const R=p9(x),D=R.length-2;for(let $=0;$<R.length-1;$++){const G=Zy(R[$]),j=Gp(G),V=Zy(R[$+1]),se=Gp(V),ue=U_(G,V,i);let Q,de;se[0]===a[0]&&se[1]===a[1]?[Q,de]=[se,!0]:j[0]===a[0]&&j[1]===a[1]?[Q,de]=[j,!1]:[Q,de]=MK(j,se,a);const oe=U_(t,Q,i);if(oe<c.properties.pointDistance){const be=U_(G,Q,i);c=Zy(Q,{lineStringIndex:I,segmentIndex:de&&$+1<=D?$+1:$,totalDistance:h+be,lineDistance:f+be,segmentDistance:be,pointDistance:oe,multiFeatureIndex:-1,index:-1,location:-1,dist:1/0}),c.properties=wK(bK({},c.properties),{multiFeatureIndex:c.properties.lineStringIndex,index:c.properties.segmentIndex,location:c.properties.totalDistance,dist:c.properties.pointDistance})}h+=ue,f+=ue}}),c}function Ap(e,t){const[i,a,c]=e,[h,f,o]=t;return i*h+a*f+c*o}function Gy(e,t){const[i,a,c]=e,[h,f,o]=t;return[a*o-c*f,c*h-i*o,i*f-a*h]}function CK(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2))}function tE(e){const t=CK(e);return[e[0]/t,e[1]/t,e[2]/t]}function lw(e){const t=eh(e[1]),i=eh(e[0]);return[Math.cos(t)*Math.cos(i),Math.cos(t)*Math.sin(i),Math.sin(t)]}function TK(e){const[t,i,a]=e,c=Math.min(Math.max(a,-1),1),h=Uw(Math.asin(c));return[Uw(Math.atan2(i,t)),h]}function MK(e,t,i){const a=lw(e),c=lw(t),h=lw(i),f=Gy(a,c);if(f[0]===0&&f[1]===0&&f[2]===0)return Ap(a,c)>0?[[...t],!0]:[[...i],!1];const o=Gy(f,h);if(o[0]===0&&o[1]===0&&o[2]===0)return[[...t],!0];const x=Gy(o,f),P=tE(x),I=[-P[0],-P[1],-P[2]],R=Ap(h,P)>Ap(h,I)?P:I,D=tE(f),$=Ap(Gy(a,R),D),G=Ap(Gy(R,c),D);return $>=0&&G>=0?[TK(R),!1]:Ap(a,h)>Ap(c,h)?[[...e],!1]:[[...t],!0]}var cw=SK,ec=(e=>(e[e.FOLLOW=0]="FOLLOW",e[e.FREE=1]="FREE",e))(ec||{}),rn=(e=>(e[e.CHOOSE_DESTINATION=0]="CHOOSE_DESTINATION",e[e.SEARCH_ALONG=1]="SEARCH_ALONG",e[e.CHOOSE_ON_MAP=2]="CHOOSE_ON_MAP",e[e.DESTINATIONS=3]="DESTINATIONS",e[e.ROUTES=4]="ROUTES",e[e.DIRECTIONS_FROM_ROUTE_CONTROLS=5]="DIRECTIONS_FROM_ROUTE_CONTROLS",e[e.DIRECTIONS_FROM_ROUTES_LIST=6]="DIRECTIONS_FROM_ROUTES_LIST",e[e.MANAGE_STOPS=7]="MANAGE_STOPS",e))(rn||{});class PK{samples=[];opts;cursorSimT=void 0;lastWallMs=void 0;smoothed;constructor(t={}){this.opts={lookbackMs:t.lookbackMs??200,maxExtrapolationMs:t.maxExtrapolationMs??250,emaAlpha:t.emaAlpha??0}}push(t){const i=this.samples.at(-1);if(i&&t.t<i.t)throw new Error("Simulation time must be monotonic");this.samples.push(t),this.evictOldSamples(t.t),this.cursorSimT??=t.t-this.opts.lookbackMs}sample(t){if(this.samples.length===0)return;const i=this.samples[this.samples.length-1];if(this.lastWallMs!=null&&!i.paused){const h=t-this.lastWallMs;this.cursorSimT+=h}this.lastWallMs=t;const a=i.t+this.opts.maxExtrapolationMs;this.cursorSimT=kK(this.cursorSimT,this.samples[0].t,a);const c=this.sampleAtSimTime(this.cursorSimT);if(c)return this.opts.emaAlpha>0?(this.smoothed=this.smoothed?AK(this.smoothed,c,this.opts.emaAlpha):c,this.smoothed):c}evictOldSamples(t){const i=t-(this.opts.lookbackMs+this.opts.maxExtrapolationMs+100);for(;this.samples.length>2&&this.samples[0].t<i;)this.samples.shift()}sampleAtSimTime(t){const i=this.samples.length;if(i===0)return;if(t<=this.samples[0].t)return this.samples[0];const a=this.samples[i-1];if(t>=a.t)return IK(a,t-a.t);let c=0,h=i-1;for(;c+1<h;){const P=c+h>>1;this.samples[P].t<=t?c=P:h=P}const f=this.samples[c],o=this.samples[h];if(f.paused||o.paused||f.t===o.t)return f;const x=(t-f.t)/(o.t-f.t);return EK(f,o,x)}}function EK(e,t,i){return console.log("interpolate",i),{t:kg(e.t,t.t,i),paused:!1,position:Jy(e.position,t.position,i),heading:VR(e.heading,t.heading,i),speed:kg(e.speed,t.speed,i),linearAccel:Jy(e.linearAccel,t.linearAccel,i),angularVelocity:Jy(e.angularVelocity,t.angularVelocity,i),angularAccel:Jy(e.angularAccel,t.angularAccel,i)}}function IK(e,t){if(e.paused)return e;const i=t/1e3;return console.log("extrapolate",t),{t:e.t+t,paused:!1,position:{x:e.position.x+Math.sin(e.heading*2*Math.PI)*e.speed*i,y:e.position.y-Math.cos(e.heading*2*Math.PI)*e.speed*i,z:e.position.z},heading:e.heading+e.angularVelocity.z*i,speed:e.speed,linearAccel:e.linearAccel,angularVelocity:e.angularVelocity,angularAccel:e.angularAccel}}function kK(e,t,i){return Math.max(t,Math.min(i,e))}function kg(e,t,i){return e+(t-e)*i}function Jy(e,t,i){return{x:kg(e.x,t.x,i),y:kg(e.y,t.y,i),z:kg(e.z,t.z,i)}}function VR(e,t,i){e=(e%1+1)%1,t=(t%1+1)%1;let a=t-e;return a>.5&&(a-=1),a<-.5&&(a+=1),(e+a*i+1)%1}function AK(e,t,i){return{...t,position:Jy(e.position,t.position,i),heading:VR(e.heading,t.heading,i),speed:kg(e.speed,t.speed,i)}}class RK{themeMode="light";cameraMode=ec.FOLLOW;activeRoute=void 0;activeRouteIndex=void 0;truckPoint=[0,0];trailerPoint;showNavSheet=!1;readyToLoad=!1;mapLoaded=!1;currentJob;segmentComplete=void 0;constructor(){Q2(this,{activeRoute:vi.ref,activeRouteIndex:vi.struct,truckPoint:vi.ref,trailerPoint:vi.ref,currentJob:vi.ref,segmentComplete:vi.ref})}get isReceivingTelemetry(){return this.truckPoint[0]!==0&&this.truckPoint[1]!==0}get activeStep(){if(!this.activeRoute||this.activeRouteIndex==null)return;const{segmentIndex:t,stepIndex:i}=this.activeRouteIndex;return ea(this.activeRoute.segments[t].steps[i])}get nextStep(){if(!(!this.activeRoute||!this.activeStep))return LK(this.activeStep,this.activeRoute)}get nextStepArrow(){if(!this.nextStep?.arrowPoints)return;const t=Gg.decode(this.nextStep.geometry).slice(0,this.nextStep.arrowPoints),i=sv(t);return{geometry:i,length:aw(i)}}get activeStepLine(){if(!this.activeStep)return;const t=Gg.decode(this.activeStep.geometry),i=sv(t);let a;if(this.activeStep.arrowPoints){const c=sv(t.slice(0,this.activeStep.arrowPoints));a={geometry:c,length:aw(c)}}return{line:i,length:aw(i),arrow:a}}get activeRouteSummary(){const t=this.activeRouteToFirstWayPointSummary;if(!t||!this.activeRoute||!this.activeRouteIndex)return;const a=this.activeRoute.segments.slice(this.activeRouteIndex.segmentIndex+1).flatMap(c=>c.steps).reduce(rE,{duration:0,distanceMeters:0,activeRouteNodeIndex:this.activeRouteIndex.nodeIndex});return{distanceMeters:t.distanceMeters+a.distanceMeters,minutes:t.minutes+Math.ceil(a.duration/60)}}get activeRouteToFirstWayPointSummary(){if(!this.activeRoute||!this.activeRouteIndex)return;const[t]=this.activeRoute.segments.slice(this.activeRouteIndex.segmentIndex),i=t.steps.slice(this.activeRouteIndex.stepIndex).reduce(rE,{duration:0,distanceMeters:0,activeRouteNodeIndex:this.activeRouteIndex.nodeIndex});return{distanceMeters:i.distanceMeters,minutes:Math.ceil(i.duration/60)}}get activeRouteDirection(){if(!this.activeStepLine)return;const{line:t}=this.activeStepLine,i=t.geometry.coordinates[0];return t.geometry.coordinates.every(c=>c[0]===i[0]&&c[1]===i[1])?void 0:cw(t,this.truckPoint).properties.location<(this.activeStepLine.arrow?.length??0)/2?this.activeStep?.maneuver:this.nextStep?.maneuver}get distanceToNextManeuver(){if(!this.activeStepLine)return 0;const{line:t,length:i}=this.activeStepLine,a=t.geometry.coordinates[0];if(t.geometry.coordinates.every(f=>f[0]===a[0]&&f[1]===a[1]))return 0;const c=cw(t,this.truckPoint).properties.location,h=(this.activeStepLine.arrow?.length??0)/2;return c<h?(h-c)*1e3/19.668:(i-c+(this.nextStepArrow?.length??0)/2)*1e3/19.668}get activeArrowStep(){if(!this.activeStepLine)return;const{line:t}=this.activeStepLine,i=t.geometry.coordinates[0];return t.geometry.coordinates.every(c=>c[0]===i[0]&&c[1]===i[1])?void 0:cw(t,this.truckPoint).properties.location<(this.activeStepLine.arrow?.length??0)/2?this.activeStep:this.nextStep}}class DK{map;playerMarker;chooseOnMapUi;wakeLock=void 0;setupWakeLock(){Qs.checkState(this.wakeLock==null);const t=async()=>{try{this.wakeLock=await navigator.wakeLock.request()}catch(a){a instanceof Error?console.error(`error requestion wakelock: ${a.name}, ${a.message}`):console.error("unknown error requesting wakelock:",a)}},i=async()=>{this.wakeLock!==null&&document.visibilityState==="visible"&&await t()};t(),document.addEventListener("visibilitychange",i)}addMapDragEndListener(t){const a=Qs.checkExists(this.map).on("dragend",c=>t(c.target.getCenter().toArray()));return()=>a.unsubscribe()}clearPitchAndBearing(t){console.log("clear pitch and bearing"),Qs.checkState(this.map!=null),this.map.panTo(this.map.getCenter(),{duration:500,pitch:0,zoom:11.5,bearing:0,padding:{left:t.showNavSheet?400:0,top:0}})}fitPoints(t,i){if(!this.map||!this.playerMarker){console.warn("tried to view points but map/marker hasn't loaded");return}const a=rG([...i]),c=[a[0],a[1]],h=[a[2],a[3]];console.log("fitting to",c,h),this.map.fitBounds([c,h],{duration:500,linear:!0,pitch:0,bearing:0,offset:[0,-100]})}flyTo(t,i,a=0){if(!this.map){console.warn("tried to fly butmap hasn't loaded");return}this.map.panTo(i,{duration:500,pitch:0,zoom:13,bearing:a,padding:50})}onMapLoad(t,i){Qs.checkState(this.map==null),Qs.checkState(this.playerMarker==null),this.map=t,this.playerMarker=i}setFree(t){t.cameraMode=ec.FREE}setFollow(t){t.cameraMode=ec.FOLLOW}hideNavSheet(t){console.log("hide nav sheet"),t.showNavSheet=!1}setDestinationNodeUid(t,i,a){a.previewRoutes.query({toNodeUid:i}).then(Lr(([c])=>{c||console.warn("could not find route to",i),this.setActiveRoute(t,c,a)}))}setActiveRoute(t,i,a){t.activeRoute=i,t.activeRouteIndex={segmentIndex:0,stepIndex:0,nodeIndex:0},this.renderActiveRoute(i),a.setActiveRoute.mutate(i?.segments.map(c=>c.key))}setActiveRouteFromNodeUids(t,i,a){a.generateRouteFromNodeUids.query(i.map(c=>c.toString(16))).then(Lr(c=>{this.setActiveRoute(t,c,a)}))}startListening(t,i){let a=[0,0],c=[0,0];const h=[0,0];let f=0,o=0,x=0;console.log("subscribing");const P=new PK({lookbackMs:250,maxExtrapolationMs:500,emaAlpha:.5});i.subscribeToDevice.subscribe(void 0,{onData:D=>{switch(D.type){case"positionUpdate":P.push(D.data);break;case"routeUpdate":Vy(()=>{t.activeRoute=D.data,t.activeRouteIndex=void 0,this.renderActiveRoute(D.data)});break;case"routeProgress":Vy(()=>t.activeRouteIndex=D.data);break;case"segmentComplete":Vy(()=>t.segmentComplete=D.data);break;case"themeModeUpdate":Vy(()=>{t.themeMode=D.data;const $=document.documentElement;$.setAttribute("data-joy-color-scheme",D.data),$.setAttribute("data-mui-color-scheme",D.data)});break;case"trailerUpdate":Vy(()=>t.trailerPoint=D.data?.position);break;case"jobUpdate":break;default:throw new No(D)}}});const I=500;setInterval(Lr(()=>{const D=P.sample(Date.now());if(D==null)return;const{speed:$,position:G,heading:j}=D,{position:V,bearing:se}=NR({position:{X:G.x,Y:G.z,Z:G.y},orientation:{heading:j}}),ue=Math.round($*2.236936);t.truckPoint=V;const{map:Q,playerMarker:de}=this;if(!Q||!de){console.log("early return onPositionUpdate");return}switch(a.every(oe=>!oe)&&(console.log("reset center",V),Q.setCenter(V),de.setLngLat(V),de.setRotation(se)),a=c,c=V,f=o,o=se,t.cameraMode){case ec.FOLLOW:Q.easeTo({...OK(V,se,ue),duration:I,padding:{left:t.showNavSheet||t.activeRoute?440:0,top:550},easing:oe=>(h[0]=a[0]+oe*(c[0]-a[0]),h[1]=a[1]+oe*(c[1]-a[1]),x=f+oe*zK(f,o),de.setLngLat(h),de.setRotation(x),oe)});break;case ec.FREE:de.setLngLat(V),de.setRotation(se);break;default:throw new No(t.cameraMode)}}),I)}synthesizeSearchResult(t,i){return Qs.checkState(this.chooseOnMapUi!=null),i.synthesizeSearchResult.query(this.chooseOnMapUi.marker.getLngLat().toArray())}toggleChooseOnMapUi(t,i){if(i){Qs.checkState(this.chooseOnMapUi==null);const a=Qs.checkExists(this.map),c=new fS.Marker().setLngLat(a.getCenter()).setDraggable(!1).addTo(a.getMap()),h=a.on("move",()=>c.setLngLat(a.getCenter()));this.chooseOnMapUi={marker:c,unsubscribeOnMove:()=>h.unsubscribe()}}else{if(!this.chooseOnMapUi)return;this.chooseOnMapUi.marker.remove(),this.chooseOnMapUi.unsubscribeOnMove(),this.chooseOnMapUi=void 0}}renderActiveRoute(t){const{map:i}=this;if(!i)return;const a=ea(i.getSource("activeRoute")),c=ea(i.getSource("activeRouteIcons"));if(!t){a.setData(uw),c.setData(uw);return}console.log("setting route data",t),a.setData(Ag(t)),c.setData(Ag(t)),i.getMap().setLayoutProperty("activeRouteLayer","visibility","visible").setLayoutProperty("activeRouteLayer-case","visibility","visible").setLayoutProperty("activeRouteIconsLayer","visibility","visible")}renderRoutePreview(t,i){const{map:a}=this;if(!a)return;console.log("rendering route preview");const c=ea(a.getSource(`previewRoute-${i.index}`));if(!t){c.setData(uw);return}c.setData(Ag(t)),a.getMap().setPaintProperty(`previewRouteLayer-${i.index}`,"line-opacity",i.highlight?1:.25).setPaintProperty(`previewRouteLayer-${i.index}-case`,"line-opacity",i.highlight?1:.25).setLayoutProperty("activeRouteLayer","visibility","none").setLayoutProperty("activeRouteLayer-case","visibility","none")}drawStepArrow(t){const{map:i}=this;if(!i)return;const a=ea(i.getSource("previewStepArrow"));if(!t?.arrowPoints||t.arrowPoints<2){a.setData(JM([]));return}const c=Gg.decode(t.geometry).slice(0,t.arrowPoints),h=sv(c),f=lS(c.at(-2),c.at(-1)),o=Zy(c.at(-1),{bearing:f});a.setData(JM([h,o]))}unpauseRouteEvents(t,i){t.segmentComplete=void 0,i.unpauseRouteEvents.mutate()}}const uw={type:"FeatureCollection",features:[]};function Ag(e){const t=e.segments.flatMap(i=>i.steps.flatMap(a=>a.trafficIcons.flatMap(c=>({type:"Feature",geometry:{type:"Point",coordinates:c.lonLat},properties:{sprite:c.type==="stop"?"stopsign":"trafficlight"}}))));return{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",coordinates:e.segments.flatMap(i=>i.steps.flatMap(a=>Gg.decode(a.geometry)))},properties:null},...t]}}function zK(e,t){const i=e%360;let c=(t>0?t:t+360)-i;return c>180&&(c-=360),c}function OK(e,t,i){let a,c;return i>60?(a=11,c=30):i>30?(a=12,c=45):(a=13,c=50),{center:e,bearing:t,zoom:a,pitch:c}}function LK(e,t){const i=t.segments.flatMap(c=>c.steps),a=i.indexOf(e);if(a!==-1)return i[a+1]}const rE=(e,t,i)=>{const a=i===0?(t.nodesTraveled-e.activeRouteNodeIndex)/t.nodesTraveled:1;let c=t.duration*a;(isNaN(c)||!isFinite(c))&&(c=0);let h=t.distanceMeters*a;return(isNaN(h)||!isFinite(h))&&(h=0),e.duration+=c,e.distanceMeters+=h,e},FK={p:2,borderRadius:"50%"},hw=e=>{const t=Y.useRef(null);return q.jsx(Yp,{in:e.show,collapsedSize:0,onExiting:()=>{t.current&&(t.current.style.boxShadow="none",t.current.style.transitionDuration="100ms",t.current.style.transitionDelay="0ms")},onEntering:()=>{t.current&&(t.current.style.boxShadow="rgba(0, 0, 0, 0.2) 0 3px 5px -1px, rgba(0, 0, 0, 0.14) 0 6px 10px 0, rgba(0, 0, 0, 0.12) 0 1px 18px 0",t.current.style.transitionDuration="500ms",t.current.style.transitionDelay="300ms")},appear:!0,children:q.jsx(a9,{in:e.show,appear:!0,children:q.jsx("div",{style:{padding:"0.5em"},children:q.jsx(ad,{ref:t,size:"lg",color:"primary",variant:e.variant??"solid",sx:{...FK,backgroundColor:e.backgroundColor??"primary.500"},style:{transition:"box-shadow",transitionDuration:"500ms",transitionDelay:"500ms"},onClick:e.onClick,children:q.jsx(e.Icon,{})})})})})},BK=e=>(console.log("render controls"),q.jsxs(fn,{direction:"column",justifyContent:"space-between",children:[q.jsxs(fn,{gap:1,alignSelf:"end",alignItems:"end",sx:{pointerEvents:"auto"},children:[q.jsx(e.Direction,{}),q.jsx(e.SpeedLimit,{})]}),q.jsxs(fn,{alignSelf:"end",alignItems:"center",sx:{pointerEvents:"auto"},children:[q.jsx(e.RecenterFab,{}),q.jsx(e.RouteFab,{}),q.jsx(e.SearchFab,{})]})]})),$K=Y.forwardRef((e,t)=>{const i=e.limitMph!=null?q.jsx(jK,{limitMph:e.limitMph,ref:t}):e.limitKph!=null?q.jsx(NK,{limitKph:e.limitKph,ref:t}):null,a=(e.limitMph??0)<5?1/0:e.limitMph??0,c=e.speedMph/a,h=c<=1?"white":c<=1.1?"orange":"red";return q.jsxs(fn,{display:"grid",gridTemplateColumns:"1fr 1fr",gap:.25,sx:{backgroundColor:"#000",p:.25},borderRadius:4,children:[i,q.jsxs(fn,{justifyContent:"center",children:[q.jsx(Yr,{textAlign:"center",level:"title-lg",fontSize:"xl2",fontWeight:"bold",sx:{color:h,WebkitTextStroke:1.25},children:Math.round(e.speedMph)||"--"}),q.jsx(Yr,{textAlign:"center",lineHeight:1,level:"body-md",sx:{color:h},children:"mph"})]})]})}),jK=Y.forwardRef((e,t)=>q.jsx(ii,{boxShadow:"0 0 2px 0 #0008",padding:.25,borderRadius:4,sx:{backgroundColor:"white"},ref:t,children:q.jsxs(ii,{border:2,borderColor:"common.black",padding:.5,paddingBottom:0,borderRadius:4,children:[q.jsxs(Yr,{textAlign:"center",lineHeight:1.2,level:"body-xs",sx:{color:"common.black"},children:["SPEED",q.jsx("br",{}),"LIMIT"]}),q.jsx(Yr,{textAlign:"center",level:"title-lg",fontSize:"xl2",fontWeight:"bold",sx:{color:"common.black",WebkitTextStroke:1.25},children:e.limitMph<5?"--":e.limitMph})]})})),NK=Y.forwardRef((e,t)=>q.jsx(ii,{boxShadow:"0 0 2px 0 #0004",padding:.2,borderRadius:"50%",border:1,borderColor:"#f22",sx:{backgroundColor:"white"},ref:t,children:q.jsx(ii,{display:"flex",alignItems:"center",border:6,borderColor:"#f22",padding:1,borderRadius:"50%",sx:{aspectRatio:1},children:q.jsx(Yr,{textAlign:"center",level:"title-lg",fontSize:"xl2",fontWeight:"bold",sx:{color:"common.black",WebkitTextStroke:1.25},children:e.limitKph})})})),VK=e=>q.jsx(HI,{variant:"solid",sx:{p:.5,px:2,borderRadius:8,fontWeight:"bold"},children:e.direction});function UR(e){const t=e>=0?e:360+e;return 337.5<=t||t<22.5?"N":22.5<=t&&t<67.5?"NE":67.5<=t&&t<112.5?"E":112.5<=t&&t<157.5?"SE":157.5<=t&&t<202.5?"S":202.5<=t&&t<247.5?"SW":247.5<=t&&t<292.5?"W":(Np(292.5<=t&&t<337.5),"NW")}class UK{constructor(t){this.appStore=t,Q2(this)}direction="N";limitMph=0;speedMph=0;get showRecenterFab(){return this.appStore.cameraMode===ec.FREE}get showRouteFab(){return!this.appStore.activeRoute&&!this.appStore.showNavSheet}get showSearchFab(){return!!this.appStore.activeRoute&&!this.appStore.showNavSheet}}class GK{startListening(t,i){i.onPositionUpdate.subscribe(void 0,{onData:Lr(a=>{const{speed:c,position:h,heading:f}=a,{bearing:o}=NR({position:{X:h.x,Y:h.z,Z:h.y},orientation:{heading:f}}),x=Math.abs(Math.round(c*2.236936));t.direction=UR(o),t.limitMph=a.speedLimit,t.speedMph=x})})}}function qK(e){const{appStore:t}=e,i=new UK(t),a=new GK,c=co(()=>q.jsx(VK,{direction:i.direction})),h=co(()=>q.jsx($K,{limitMph:i.limitMph,speedMph:i.speedMph})),f=co(P=>q.jsx(hw,{show:i.showRecenterFab,variant:"plain",backgroundColor:"background.body",Icon:()=>q.jsx(IU,{sx:{transform:"scale(1.25) rotate(30deg)"}}),onClick:P.onClick})),o=co(P=>q.jsx(hw,{show:i.showRouteFab,Icon:()=>q.jsx(mU,{sx:{transform:"scale(1.25)"}}),onClick:P.onClick})),x=co(P=>q.jsx(hw,{show:i.showSearchFab,Icon:()=>q.jsx(uS,{sx:{transform:"scale(1.25)"}}),onClick:P.onClick}));return{Controls:P=>q.jsx(BK,{Direction:c,SpeedLimit:h,RecenterFab:()=>q.jsx(f,{onClick:P.onRecenterFabClick}),RouteFab:()=>q.jsx(o,{onClick:P.onRouteFabClick}),SearchFab:()=>q.jsx(x,{onClick:P.onSearchFabClick})}),store:i,controller:a}}function HK(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Y.useMemo(()=>a=>{t.forEach(c=>c(a))},t)}const y1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ry(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function IS(e){return"nodeType"in e}function ra(e){var t,i;return e?ry(e)?e:IS(e)&&(t=(i=e.ownerDocument)==null?void 0:i.defaultView)!=null?t:window:window}function kS(e){const{Document:t}=ra(e);return e instanceof t}function f0(e){return ry(e)?!1:e instanceof ra(e).HTMLElement}function GR(e){return e instanceof ra(e).SVGElement}function ny(e){return e?ry(e)?e.document:IS(e)?kS(e)?e:f0(e)||GR(e)?e.ownerDocument:document:document:document}const ou=y1?Y.useLayoutEffect:Y.useEffect;function v1(e){const t=Y.useRef(e);return ou(()=>{t.current=e}),Y.useCallback(function(){for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return t.current==null?void 0:t.current(...a)},[])}function WK(){const e=Y.useRef(null),t=Y.useCallback((a,c)=>{e.current=setInterval(a,c)},[]),i=Y.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,i]}function zv(e,t){t===void 0&&(t=[e]);const i=Y.useRef(e);return ou(()=>{i.current!==e&&(i.current=e)},t),i}function p0(e,t){const i=Y.useRef();return Y.useMemo(()=>{const a=e(i.current);return i.current=a,a},[...t])}function bx(e){const t=v1(e),i=Y.useRef(null),a=Y.useCallback(c=>{c!==i.current&&t?.(c,i.current),i.current=c},[]);return[i,a]}function wx(e){const t=Y.useRef();return Y.useEffect(()=>{t.current=e},[e]),t.current}let dw={};function m0(e,t){return Y.useMemo(()=>{if(t)return t;const i=dw[e]==null?0:dw[e]+1;return dw[e]=i,e+"-"+i},[e,t])}function qR(e){return function(t){for(var i=arguments.length,a=new Array(i>1?i-1:0),c=1;c<i;c++)a[c-1]=arguments[c];return a.reduce((h,f)=>{const o=Object.entries(f);for(const[x,P]of o){const I=h[x];I!=null&&(h[x]=I+e*P)}return h},{...t})}}const Rg=qR(1),Sx=qR(-1);function ZK(e){return"clientX"in e&&"clientY"in e}function _1(e){if(!e)return!1;const{KeyboardEvent:t}=ra(e.target);return t&&e instanceof t}function XK(e){if(!e)return!1;const{TouchEvent:t}=ra(e.target);return t&&e instanceof t}function Cx(e){if(XK(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:i}=e.touches[0];return{x:t,y:i}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:i}=e.changedTouches[0];return{x:t,y:i}}}return ZK(e)?{x:e.clientX,y:e.clientY}:null}const Df=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:i}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(i?Math.round(i):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:i}=e;return"scaleX("+t+") scaleY("+i+")"}},Transform:{toString(e){if(e)return[Df.Translate.toString(e),Df.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:i,easing:a}=e;return t+" "+i+"ms "+a}}}),nE="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function KK(e){return e.matches(nE)?e:e.querySelector(nE)}const YK={display:"none"};function JK(e){let{id:t,value:i}=e;return dn.createElement("div",{id:t,style:YK},i)}function QK(e){let{id:t,announcement:i,ariaLiveType:a="assertive"}=e;const c={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return dn.createElement("div",{id:t,style:c,role:"status","aria-live":a,"aria-atomic":!0},i)}function eY(){const[e,t]=Y.useState("");return{announce:Y.useCallback(a=>{a!=null&&t(a)},[]),announcement:e}}const HR=Y.createContext(null);function tY(e){const t=Y.useContext(HR);Y.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function rY(){const[e]=Y.useState(()=>new Set),t=Y.useCallback(a=>(e.add(a),()=>e.delete(a)),[e]);return[Y.useCallback(a=>{let{type:c,event:h}=a;e.forEach(f=>{var o;return(o=f[c])==null?void 0:o.call(f,h)})},[e]),t]}const nY={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},iY={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:i}=e;return i?"Draggable item "+t.id+" was moved over droppable area "+i.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:i}=e;return i?"Draggable item "+t.id+" was dropped over droppable area "+i.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function oY(e){let{announcements:t=iY,container:i,hiddenTextDescribedById:a,screenReaderInstructions:c=nY}=e;const{announce:h,announcement:f}=eY(),o=m0("DndLiveRegion"),[x,P]=Y.useState(!1);if(Y.useEffect(()=>{P(!0)},[]),tY(Y.useMemo(()=>({onDragStart(R){let{active:D}=R;h(t.onDragStart({active:D}))},onDragMove(R){let{active:D,over:$}=R;t.onDragMove&&h(t.onDragMove({active:D,over:$}))},onDragOver(R){let{active:D,over:$}=R;h(t.onDragOver({active:D,over:$}))},onDragEnd(R){let{active:D,over:$}=R;h(t.onDragEnd({active:D,over:$}))},onDragCancel(R){let{active:D,over:$}=R;h(t.onDragCancel({active:D,over:$}))}}),[h,t])),!x)return null;const I=dn.createElement(dn.Fragment,null,dn.createElement(JK,{id:a,value:c.draggable}),dn.createElement(QK,{id:o,announcement:f}));return i?Ju.createPortal(I,i):I}var jo;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(jo||(jo={}));function Tx(){}function sY(e,t){return Y.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function aY(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Y.useMemo(()=>[...t].filter(a=>a!=null),[...t])}const su=Object.freeze({x:0,y:0});function lY(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function cY(e,t){const i=Cx(e);if(!i)return"0 0";const a={x:(i.x-t.left)/t.width*100,y:(i.y-t.top)/t.height*100};return a.x+"% "+a.y+"%"}function uY(e,t){let{data:{value:i}}=e,{data:{value:a}}=t;return i-a}function hY(e,t){let{data:{value:i}}=e,{data:{value:a}}=t;return a-i}function dY(e,t){if(!e||e.length===0)return null;const[i]=e;return i[t]}function iE(e,t,i){return t===void 0&&(t=e.left),i===void 0&&(i=e.top),{x:t+e.width*.5,y:i+e.height*.5}}const fY=e=>{let{collisionRect:t,droppableRects:i,droppableContainers:a}=e;const c=iE(t,t.left,t.top),h=[];for(const f of a){const{id:o}=f,x=i.get(o);if(x){const P=lY(iE(x),c);h.push({id:o,data:{droppableContainer:f,value:P}})}}return h.sort(uY)};function pY(e,t){const i=Math.max(t.top,e.top),a=Math.max(t.left,e.left),c=Math.min(t.left+t.width,e.left+e.width),h=Math.min(t.top+t.height,e.top+e.height),f=c-a,o=h-i;if(a<c&&i<h){const x=t.width*t.height,P=e.width*e.height,I=f*o,R=I/(x+P-I);return Number(R.toFixed(4))}return 0}const mY=e=>{let{collisionRect:t,droppableRects:i,droppableContainers:a}=e;const c=[];for(const h of a){const{id:f}=h,o=i.get(f);if(o){const x=pY(o,t);x>0&&c.push({id:f,data:{droppableContainer:h,value:x}})}}return c.sort(hY)};function gY(e,t,i){return{...e,scaleX:t&&i?t.width/i.width:1,scaleY:t&&i?t.height/i.height:1}}function WR(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:su}function yY(e){return function(i){for(var a=arguments.length,c=new Array(a>1?a-1:0),h=1;h<a;h++)c[h-1]=arguments[h];return c.reduce((f,o)=>({...f,top:f.top+e*o.y,bottom:f.bottom+e*o.y,left:f.left+e*o.x,right:f.right+e*o.x}),{...i})}}const vY=yY(1);function ZR(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function _Y(e,t,i){const a=ZR(t);if(!a)return e;const{scaleX:c,scaleY:h,x:f,y:o}=a,x=e.left-f-(1-c)*parseFloat(i),P=e.top-o-(1-h)*parseFloat(i.slice(i.indexOf(" ")+1)),I=c?e.width/c:e.width,R=h?e.height/h:e.height;return{width:I,height:R,top:P,right:x+I,bottom:P+R,left:x}}const xY={ignoreTransform:!1};function iy(e,t){t===void 0&&(t=xY);let i=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:P,transformOrigin:I}=ra(e).getComputedStyle(e);P&&(i=_Y(i,P,I))}const{top:a,left:c,width:h,height:f,bottom:o,right:x}=i;return{top:a,left:c,width:h,height:f,bottom:o,right:x}}function oE(e){return iy(e,{ignoreTransform:!0})}function bY(e){const t=e.innerWidth,i=e.innerHeight;return{top:0,left:0,right:t,bottom:i,width:t,height:i}}function wY(e,t){return t===void 0&&(t=ra(e).getComputedStyle(e)),t.position==="fixed"}function SY(e,t){t===void 0&&(t=ra(e).getComputedStyle(e));const i=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(c=>{const h=t[c];return typeof h=="string"?i.test(h):!1})}function AS(e,t){const i=[];function a(c){if(t!=null&&i.length>=t||!c)return i;if(kS(c)&&c.scrollingElement!=null&&!i.includes(c.scrollingElement))return i.push(c.scrollingElement),i;if(!f0(c)||GR(c)||i.includes(c))return i;const h=ra(e).getComputedStyle(c);return c!==e&&SY(c,h)&&i.push(c),wY(c,h)?i:a(c.parentNode)}return e?a(e):i}function XR(e){const[t]=AS(e,1);return t??null}function fw(e){return!y1||!e?null:ry(e)?e:IS(e)?kS(e)||e===ny(e).scrollingElement?window:f0(e)?e:null:null}function KR(e){return ry(e)?e.scrollX:e.scrollLeft}function YR(e){return ry(e)?e.scrollY:e.scrollTop}function Qw(e){return{x:KR(e),y:YR(e)}}var ns;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ns||(ns={}));function JR(e){return!y1||!e?!1:e===document.scrollingElement}function QR(e){const t={x:0,y:0},i=JR(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-i.width,y:e.scrollHeight-i.height},c=e.scrollTop<=t.y,h=e.scrollLeft<=t.x,f=e.scrollTop>=a.y,o=e.scrollLeft>=a.x;return{isTop:c,isLeft:h,isBottom:f,isRight:o,maxScroll:a,minScroll:t}}const CY={x:.2,y:.2};function TY(e,t,i,a,c){let{top:h,left:f,right:o,bottom:x}=i;a===void 0&&(a=10),c===void 0&&(c=CY);const{isTop:P,isBottom:I,isLeft:R,isRight:D}=QR(e),$={x:0,y:0},G={x:0,y:0},j={height:t.height*c.y,width:t.width*c.x};return!P&&h<=t.top+j.height?($.y=ns.Backward,G.y=a*Math.abs((t.top+j.height-h)/j.height)):!I&&x>=t.bottom-j.height&&($.y=ns.Forward,G.y=a*Math.abs((t.bottom-j.height-x)/j.height)),!D&&o>=t.right-j.width?($.x=ns.Forward,G.x=a*Math.abs((t.right-j.width-o)/j.width)):!R&&f<=t.left+j.width&&($.x=ns.Backward,G.x=a*Math.abs((t.left+j.width-f)/j.width)),{direction:$,speed:G}}function MY(e){if(e===document.scrollingElement){const{innerWidth:h,innerHeight:f}=window;return{top:0,left:0,right:h,bottom:f,width:h,height:f}}const{top:t,left:i,right:a,bottom:c}=e.getBoundingClientRect();return{top:t,left:i,right:a,bottom:c,width:e.clientWidth,height:e.clientHeight}}function eD(e){return e.reduce((t,i)=>Rg(t,Qw(i)),su)}function PY(e){return e.reduce((t,i)=>t+KR(i),0)}function EY(e){return e.reduce((t,i)=>t+YR(i),0)}function tD(e,t){if(t===void 0&&(t=iy),!e)return;const{top:i,left:a,bottom:c,right:h}=t(e);XR(e)&&(c<=0||h<=0||i>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const IY=[["x",["left","right"],PY],["y",["top","bottom"],EY]];class RS{constructor(t,i){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const a=AS(i),c=eD(a);this.rect={...t},this.width=t.width,this.height=t.height;for(const[h,f,o]of IY)for(const x of f)Object.defineProperty(this,x,{get:()=>{const P=o(a),I=c[h]-P;return this.rect[x]+I},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class fv{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(i=>{var a;return(a=this.target)==null?void 0:a.removeEventListener(...i)})},this.target=t}add(t,i,a){var c;(c=this.target)==null||c.addEventListener(t,i,a),this.listeners.push([t,i,a])}}function kY(e){const{EventTarget:t}=ra(e);return e instanceof t?e:ny(e)}function pw(e,t){const i=Math.abs(e.x),a=Math.abs(e.y);return typeof t=="number"?Math.sqrt(i**2+a**2)>t:"x"in t&&"y"in t?i>t.x&&a>t.y:"x"in t?i>t.x:"y"in t?a>t.y:!1}var Xl;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Xl||(Xl={}));function sE(e){e.preventDefault()}function AY(e){e.stopPropagation()}var Vn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Vn||(Vn={}));const rD={start:[Vn.Space,Vn.Enter],cancel:[Vn.Esc],end:[Vn.Space,Vn.Enter,Vn.Tab]},RY=(e,t)=>{let{currentCoordinates:i}=t;switch(e.code){case Vn.Right:return{...i,x:i.x+25};case Vn.Left:return{...i,x:i.x-25};case Vn.Down:return{...i,y:i.y+25};case Vn.Up:return{...i,y:i.y-25}}};class nD{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:i}}=t;this.props=t,this.listeners=new fv(ny(i)),this.windowListeners=new fv(ra(i)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Xl.Resize,this.handleCancel),this.windowListeners.add(Xl.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Xl.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:i}=this.props,a=t.node.current;a&&tD(a),i(su)}handleKeyDown(t){if(_1(t)){const{active:i,context:a,options:c}=this.props,{keyboardCodes:h=rD,coordinateGetter:f=RY,scrollBehavior:o="smooth"}=c,{code:x}=t;if(h.end.includes(x)){this.handleEnd(t);return}if(h.cancel.includes(x)){this.handleCancel(t);return}const{collisionRect:P}=a.current,I=P?{x:P.left,y:P.top}:su;this.referenceCoordinates||(this.referenceCoordinates=I);const R=f(t,{active:i,context:a.current,currentCoordinates:I});if(R){const D=Sx(R,I),$={x:0,y:0},{scrollableAncestors:G}=a.current;for(const j of G){const V=t.code,{isTop:se,isRight:ue,isLeft:Q,isBottom:de,maxScroll:oe,minScroll:be}=QR(j),we=MY(j),Ie={x:Math.min(V===Vn.Right?we.right-we.width/2:we.right,Math.max(V===Vn.Right?we.left:we.left+we.width/2,R.x)),y:Math.min(V===Vn.Down?we.bottom-we.height/2:we.bottom,Math.max(V===Vn.Down?we.top:we.top+we.height/2,R.y))},ke=V===Vn.Right&&!ue||V===Vn.Left&&!Q,ae=V===Vn.Down&&!de||V===Vn.Up&&!se;if(ke&&Ie.x!==R.x){const Ee=j.scrollLeft+D.x,Ze=V===Vn.Right&&Ee<=oe.x||V===Vn.Left&&Ee>=be.x;if(Ze&&!D.y){j.scrollTo({left:Ee,behavior:o});return}Ze?$.x=j.scrollLeft-Ee:$.x=V===Vn.Right?j.scrollLeft-oe.x:j.scrollLeft-be.x,$.x&&j.scrollBy({left:-$.x,behavior:o});break}else if(ae&&Ie.y!==R.y){const Ee=j.scrollTop+D.y,Ze=V===Vn.Down&&Ee<=oe.y||V===Vn.Up&&Ee>=be.y;if(Ze&&!D.x){j.scrollTo({top:Ee,behavior:o});return}Ze?$.y=j.scrollTop-Ee:$.y=V===Vn.Down?j.scrollTop-oe.y:j.scrollTop-be.y,$.y&&j.scrollBy({top:-$.y,behavior:o});break}}this.handleMove(t,Rg(Sx(R,this.referenceCoordinates),$))}}}handleMove(t,i){const{onMove:a}=this.props;t.preventDefault(),a(i)}handleEnd(t){const{onEnd:i}=this.props;t.preventDefault(),this.detach(),i()}handleCancel(t){const{onCancel:i}=this.props;t.preventDefault(),this.detach(),i()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}nD.activators=[{eventName:"onKeyDown",handler:(e,t,i)=>{let{keyboardCodes:a=rD,onActivation:c}=t,{active:h}=i;const{code:f}=e.nativeEvent;if(a.start.includes(f)){const o=h.activatorNode.current;return o&&e.target!==o?!1:(e.preventDefault(),c?.({event:e.nativeEvent}),!0)}return!1}}];function aE(e){return!!(e&&"distance"in e)}function lE(e){return!!(e&&"delay"in e)}class DS{constructor(t,i,a){var c;a===void 0&&(a=kY(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=i;const{event:h}=t,{target:f}=h;this.props=t,this.events=i,this.document=ny(f),this.documentListeners=new fv(this.document),this.listeners=new fv(a),this.windowListeners=new fv(ra(f)),this.initialCoordinates=(c=Cx(h))!=null?c:su,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:i,bypassActivationConstraint:a}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Xl.Resize,this.handleCancel),this.windowListeners.add(Xl.DragStart,sE),this.windowListeners.add(Xl.VisibilityChange,this.handleCancel),this.windowListeners.add(Xl.ContextMenu,sE),this.documentListeners.add(Xl.Keydown,this.handleKeydown),i){if(a!=null&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(lE(i)){this.timeoutId=setTimeout(this.handleStart,i.delay),this.handlePending(i);return}if(aE(i)){this.handlePending(i);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,i){const{active:a,onPending:c}=this.props;c(a,t,this.initialCoordinates,i)}handleStart(){const{initialCoordinates:t}=this,{onStart:i}=this.props;t&&(this.activated=!0,this.documentListeners.add(Xl.Click,AY,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Xl.SelectionChange,this.removeTextSelection),i(t))}handleMove(t){var i;const{activated:a,initialCoordinates:c,props:h}=this,{onMove:f,options:{activationConstraint:o}}=h;if(!c)return;const x=(i=Cx(t))!=null?i:su,P=Sx(c,x);if(!a&&o){if(aE(o)){if(o.tolerance!=null&&pw(P,o.tolerance))return this.handleCancel();if(pw(P,o.distance))return this.handleStart()}if(lE(o)&&pw(P,o.tolerance))return this.handleCancel();this.handlePending(o,P);return}t.cancelable&&t.preventDefault(),f(x)}handleEnd(){const{onAbort:t,onEnd:i}=this.props;this.detach(),this.activated||t(this.props.active),i()}handleCancel(){const{onAbort:t,onCancel:i}=this.props;this.detach(),this.activated||t(this.props.active),i()}handleKeydown(t){t.code===Vn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const DY={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class zS extends DS{constructor(t){const{event:i}=t,a=ny(i.target);super(t,DY,a)}}zS.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:i}=e,{onActivation:a}=t;return!i.isPrimary||i.button!==0?!1:(a?.({event:i}),!0)}}];const zY={move:{name:"mousemove"},end:{name:"mouseup"}};var e2;(function(e){e[e.RightClick=2]="RightClick"})(e2||(e2={}));class OY extends DS{constructor(t){super(t,zY,ny(t.event.target))}}OY.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:i}=e,{onActivation:a}=t;return i.button===e2.RightClick?!1:(a?.({event:i}),!0)}}];const mw={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class LY extends DS{constructor(t){super(t,mw)}static setup(){return window.addEventListener(mw.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(mw.move.name,t)};function t(){}}}LY.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:i}=e,{onActivation:a}=t;const{touches:c}=i;return c.length>1?!1:(a?.({event:i}),!0)}}];var pv;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(pv||(pv={}));var Mx;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Mx||(Mx={}));function FY(e){let{acceleration:t,activator:i=pv.Pointer,canScroll:a,draggingRect:c,enabled:h,interval:f=5,order:o=Mx.TreeOrder,pointerCoordinates:x,scrollableAncestors:P,scrollableAncestorRects:I,delta:R,threshold:D}=e;const $=$Y({delta:R,disabled:!h}),[G,j]=WK(),V=Y.useRef({x:0,y:0}),se=Y.useRef({x:0,y:0}),ue=Y.useMemo(()=>{switch(i){case pv.Pointer:return x?{top:x.y,bottom:x.y,left:x.x,right:x.x}:null;case pv.DraggableRect:return c}},[i,c,x]),Q=Y.useRef(null),de=Y.useCallback(()=>{const be=Q.current;if(!be)return;const we=V.current.x*se.current.x,Ie=V.current.y*se.current.y;be.scrollBy(we,Ie)},[]),oe=Y.useMemo(()=>o===Mx.TreeOrder?[...P].reverse():P,[o,P]);Y.useEffect(()=>{if(!h||!P.length||!ue){j();return}for(const be of oe){if(a?.(be)===!1)continue;const we=P.indexOf(be),Ie=I[we];if(!Ie)continue;const{direction:ke,speed:ae}=TY(be,Ie,ue,t,D);for(const Ee of["x","y"])$[Ee][ke[Ee]]||(ae[Ee]=0,ke[Ee]=0);if(ae.x>0||ae.y>0){j(),Q.current=be,G(de,f),V.current=ae,se.current=ke;return}}V.current={x:0,y:0},se.current={x:0,y:0},j()},[t,de,a,j,h,f,JSON.stringify(ue),JSON.stringify($),G,P,oe,I,JSON.stringify(D)])}const BY={x:{[ns.Backward]:!1,[ns.Forward]:!1},y:{[ns.Backward]:!1,[ns.Forward]:!1}};function $Y(e){let{delta:t,disabled:i}=e;const a=wx(t);return p0(c=>{if(i||!a||!c)return BY;const h={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[ns.Backward]:c.x[ns.Backward]||h.x===-1,[ns.Forward]:c.x[ns.Forward]||h.x===1},y:{[ns.Backward]:c.y[ns.Backward]||h.y===-1,[ns.Forward]:c.y[ns.Forward]||h.y===1}}},[i,t,a])}function jY(e,t){const i=t!=null?e.get(t):void 0,a=i?i.node.current:null;return p0(c=>{var h;return t==null?null:(h=a??c)!=null?h:null},[a,t])}function NY(e,t){return Y.useMemo(()=>e.reduce((i,a)=>{const{sensor:c}=a,h=c.activators.map(f=>({eventName:f.eventName,handler:t(f.handler,a)}));return[...i,...h]},[]),[e,t])}var Ov;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ov||(Ov={}));var t2;(function(e){e.Optimized="optimized"})(t2||(t2={}));const cE=new Map;function VY(e,t){let{dragging:i,dependencies:a,config:c}=t;const[h,f]=Y.useState(null),{frequency:o,measure:x,strategy:P}=c,I=Y.useRef(e),R=V(),D=zv(R),$=Y.useCallback(function(se){se===void 0&&(se=[]),!D.current&&f(ue=>ue===null?se:ue.concat(se.filter(Q=>!ue.includes(Q))))},[D]),G=Y.useRef(null),j=p0(se=>{if(R&&!i)return cE;if(!se||se===cE||I.current!==e||h!=null){const ue=new Map;for(let Q of e){if(!Q)continue;if(h&&h.length>0&&!h.includes(Q.id)&&Q.rect.current){ue.set(Q.id,Q.rect.current);continue}const de=Q.node.current,oe=de?new RS(x(de),de):null;Q.rect.current=oe,oe&&ue.set(Q.id,oe)}return ue}return se},[e,h,i,R,x]);return Y.useEffect(()=>{I.current=e},[e]),Y.useEffect(()=>{R||$()},[i,R]),Y.useEffect(()=>{h&&h.length>0&&f(null)},[JSON.stringify(h)]),Y.useEffect(()=>{R||typeof o!="number"||G.current!==null||(G.current=setTimeout(()=>{$(),G.current=null},o))},[o,R,$,...a]),{droppableRects:j,measureDroppableContainers:$,measuringScheduled:h!=null};function V(){switch(P){case Ov.Always:return!1;case Ov.BeforeDragging:return i;default:return!i}}}function OS(e,t){return p0(i=>e?i||(typeof t=="function"?t(e):e):null,[t,e])}function UY(e,t){return OS(e,t)}function GY(e){let{callback:t,disabled:i}=e;const a=v1(t),c=Y.useMemo(()=>{if(i||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:h}=window;return new h(a)},[a,i]);return Y.useEffect(()=>()=>c?.disconnect(),[c]),c}function x1(e){let{callback:t,disabled:i}=e;const a=v1(t),c=Y.useMemo(()=>{if(i||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:h}=window;return new h(a)},[i]);return Y.useEffect(()=>()=>c?.disconnect(),[c]),c}function qY(e){return new RS(iy(e),e)}function uE(e,t,i){t===void 0&&(t=qY);const[a,c]=Y.useState(null);function h(){c(x=>{if(!e)return null;if(e.isConnected===!1){var P;return(P=x??i)!=null?P:null}const I=t(e);return JSON.stringify(x)===JSON.stringify(I)?x:I})}const f=GY({callback(x){if(e)for(const P of x){const{type:I,target:R}=P;if(I==="childList"&&R instanceof HTMLElement&&R.contains(e)){h();break}}}}),o=x1({callback:h});return ou(()=>{h(),e?(o?.observe(e),f?.observe(document.body,{childList:!0,subtree:!0})):(o?.disconnect(),f?.disconnect())},[e]),a}function HY(e){const t=OS(e);return WR(e,t)}const hE=[];function WY(e){const t=Y.useRef(e),i=p0(a=>e?a&&a!==hE&&e&&t.current&&e.parentNode===t.current.parentNode?a:AS(e):hE,[e]);return Y.useEffect(()=>{t.current=e},[e]),i}function ZY(e){const[t,i]=Y.useState(null),a=Y.useRef(e),c=Y.useCallback(h=>{const f=fw(h.target);f&&i(o=>o?(o.set(f,Qw(f)),new Map(o)):null)},[]);return Y.useEffect(()=>{const h=a.current;if(e!==h){f(h);const o=e.map(x=>{const P=fw(x);return P?(P.addEventListener("scroll",c,{passive:!0}),[P,Qw(P)]):null}).filter(x=>x!=null);i(o.length?new Map(o):null),a.current=e}return()=>{f(e),f(h)};function f(o){o.forEach(x=>{const P=fw(x);P?.removeEventListener("scroll",c)})}},[c,e]),Y.useMemo(()=>e.length?t?Array.from(t.values()).reduce((h,f)=>Rg(h,f),su):eD(e):su,[e,t])}function dE(e,t){t===void 0&&(t=[]);const i=Y.useRef(null);return Y.useEffect(()=>{i.current=null},t),Y.useEffect(()=>{const a=e!==su;a&&!i.current&&(i.current=e),!a&&i.current&&(i.current=null)},[e]),i.current?Sx(e,i.current):su}function XY(e){Y.useEffect(()=>{if(!y1)return;const t=e.map(i=>{let{sensor:a}=i;return a.setup==null?void 0:a.setup()});return()=>{for(const i of t)i?.()}},e.map(t=>{let{sensor:i}=t;return i}))}function KY(e,t){return Y.useMemo(()=>e.reduce((i,a)=>{let{eventName:c,handler:h}=a;return i[c]=f=>{h(f,t)},i},{}),[e,t])}function iD(e){return Y.useMemo(()=>e?bY(e):null,[e])}const fE=[];function YY(e,t){t===void 0&&(t=iy);const[i]=e,a=iD(i?ra(i):null),[c,h]=Y.useState(fE);function f(){h(()=>e.length?e.map(x=>JR(x)?a:new RS(t(x),x)):fE)}const o=x1({callback:f});return ou(()=>{o?.disconnect(),f(),e.forEach(x=>o?.observe(x))},[e]),c}function oD(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return f0(t)?t:e}function JY(e){let{measure:t}=e;const[i,a]=Y.useState(null),c=Y.useCallback(P=>{for(const{target:I}of P)if(f0(I)){a(R=>{const D=t(I);return R?{...R,width:D.width,height:D.height}:D});break}},[t]),h=x1({callback:c}),f=Y.useCallback(P=>{const I=oD(P);h?.disconnect(),I&&h?.observe(I),a(I?t(I):null)},[t,h]),[o,x]=bx(f);return Y.useMemo(()=>({nodeRef:o,rect:i,setRef:x}),[i,o,x])}const QY=[{sensor:zS,options:{}},{sensor:nD,options:{}}],eJ={current:{}},G_={draggable:{measure:oE},droppable:{measure:oE,strategy:Ov.WhileDragging,frequency:t2.Optimized},dragOverlay:{measure:iy}};class mv extends Map{get(t){var i;return t!=null&&(i=super.get(t))!=null?i:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:i}=t;return!i})}getNodeFor(t){var i,a;return(i=(a=this.get(t))==null?void 0:a.node.current)!=null?i:void 0}}const tJ={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new mv,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Tx},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:G_,measureDroppableContainers:Tx,windowRect:null,measuringScheduled:!1},sD={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Tx,draggableNodes:new Map,over:null,measureDroppableContainers:Tx},g0=Y.createContext(sD),aD=Y.createContext(tJ);function rJ(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new mv}}}function nJ(e,t){switch(t.type){case jo.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case jo.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case jo.DragEnd:case jo.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case jo.RegisterDroppable:{const{element:i}=t,{id:a}=i,c=new mv(e.droppable.containers);return c.set(a,i),{...e,droppable:{...e.droppable,containers:c}}}case jo.SetDroppableDisabled:{const{id:i,key:a,disabled:c}=t,h=e.droppable.containers.get(i);if(!h||a!==h.key)return e;const f=new mv(e.droppable.containers);return f.set(i,{...h,disabled:c}),{...e,droppable:{...e.droppable,containers:f}}}case jo.UnregisterDroppable:{const{id:i,key:a}=t,c=e.droppable.containers.get(i);if(!c||a!==c.key)return e;const h=new mv(e.droppable.containers);return h.delete(i),{...e,droppable:{...e.droppable,containers:h}}}default:return e}}function iJ(e){let{disabled:t}=e;const{active:i,activatorEvent:a,draggableNodes:c}=Y.useContext(g0),h=wx(a),f=wx(i?.id);return Y.useEffect(()=>{if(!t&&!a&&h&&f!=null){if(!_1(h)||document.activeElement===h.target)return;const o=c.get(f);if(!o)return;const{activatorNode:x,node:P}=o;if(!x.current&&!P.current)return;requestAnimationFrame(()=>{for(const I of[x.current,P.current]){if(!I)continue;const R=KK(I);if(R){R.focus();break}}})}},[a,t,c,f,h]),null}function lD(e,t){let{transform:i,...a}=t;return e!=null&&e.length?e.reduce((c,h)=>h({transform:c,...a}),i):i}function oJ(e){return Y.useMemo(()=>({draggable:{...G_.draggable,...e?.draggable},droppable:{...G_.droppable,...e?.droppable},dragOverlay:{...G_.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function sJ(e){let{activeNode:t,measure:i,initialRect:a,config:c=!0}=e;const h=Y.useRef(!1),{x:f,y:o}=typeof c=="boolean"?{x:c,y:c}:c;ou(()=>{if(!f&&!o||!t){h.current=!1;return}if(h.current||!a)return;const P=t?.node.current;if(!P||P.isConnected===!1)return;const I=i(P),R=WR(I,a);if(f||(R.x=0),o||(R.y=0),h.current=!0,Math.abs(R.x)>0||Math.abs(R.y)>0){const D=XR(P);D&&D.scrollBy({top:R.y,left:R.x})}},[t,f,o,a,i])}const b1=Y.createContext({...su,scaleX:1,scaleY:1});var yf;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(yf||(yf={}));const aJ=Y.memo(function(t){var i,a,c,h;let{id:f,accessibility:o,autoScroll:x=!0,children:P,sensors:I=QY,collisionDetection:R=mY,measuring:D,modifiers:$,...G}=t;const j=Y.useReducer(nJ,void 0,rJ),[V,se]=j,[ue,Q]=rY(),[de,oe]=Y.useState(yf.Uninitialized),be=de===yf.Initialized,{draggable:{active:we,nodes:Ie,translate:ke},droppable:{containers:ae}}=V,Ee=we!=null?Ie.get(we):null,Ze=Y.useRef({initial:null,translated:null}),Qe=Y.useMemo(()=>{var et;return we!=null?{id:we,data:(et=Ee?.data)!=null?et:eJ,rect:Ze}:null},[we,Ee]),vt=Y.useRef(null),[st,He]=Y.useState(null),[rt,Ge]=Y.useState(null),Ve=zv(G,Object.values(G)),ut=m0("DndDescribedBy",f),ve=Y.useMemo(()=>ae.getEnabled(),[ae]),Fe=oJ(D),{droppableRects:pt,measureDroppableContainers:Tt,measuringScheduled:Ct}=VY(ve,{dragging:be,dependencies:[ke.x,ke.y],config:Fe.droppable}),_t=jY(Ie,we),bt=Y.useMemo(()=>rt?Cx(rt):null,[rt]),nt=gt(),kt=UY(_t,Fe.draggable.measure);sJ({activeNode:we!=null?Ie.get(we):null,config:nt.layoutShiftCompensation,initialRect:kt,measure:Fe.draggable.measure});const At=uE(_t,Fe.draggable.measure,kt),dr=uE(_t?_t.parentElement:null),ir=Y.useRef({activatorEvent:null,active:null,activeNode:_t,collisionRect:null,collisions:null,droppableRects:pt,draggableNodes:Ie,draggingNode:null,draggingNodeRect:null,droppableContainers:ae,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Gr=ae.getNodeFor((i=ir.current.over)==null?void 0:i.id),Tr=JY({measure:Fe.dragOverlay.measure}),or=(a=Tr.nodeRef.current)!=null?a:_t,qt=be?(c=Tr.rect)!=null?c:At:null,pr=!!(Tr.nodeRef.current&&Tr.rect),Xt=HY(pr?null:At),Ir=iD(or?ra(or):null),Rr=WY(be?Gr??_t:null),Br=YY(Rr),Wr=lD($,{transform:{x:ke.x-Xt.x,y:ke.y-Xt.y,scaleX:1,scaleY:1},activatorEvent:rt,active:Qe,activeNodeRect:At,containerNodeRect:dr,draggingNodeRect:qt,over:ir.current.over,overlayNodeRect:Tr.rect,scrollableAncestors:Rr,scrollableAncestorRects:Br,windowRect:Ir}),sn=bt?Rg(bt,ke):null,On=ZY(Rr),Tn=dE(On),vn=dE(On,[At]),Sr=Rg(Wr,Tn),Dr=qt?vY(qt,Wr):null,ur=Qe&&Dr?R({active:Qe,collisionRect:Dr,droppableRects:pt,droppableContainers:ve,pointerCoordinates:sn}):null,Zr=dY(ur,"id"),[Ne,ee]=Y.useState(null),ie=pr?Wr:Rg(Wr,vn),ce=gY(ie,(h=Ne?.rect)!=null?h:null,At),Ce=Y.useRef(null),Be=Y.useCallback((et,Ae)=>{let{sensor:Ut,options:mr}=Ae;if(vt.current==null)return;const Zt=Ie.get(vt.current);if(!Zt)return;const Yt=et.nativeEvent,rr=new Ut({active:vt.current,activeNode:Zt,event:Yt,options:mr,context:ir,onAbort(kr){if(!Ie.get(kr))return;const{onDragAbort:Xr}=Ve.current,wn={id:kr};Xr?.(wn),ue({type:"onDragAbort",event:wn})},onPending(kr,nn,Xr,wn){if(!Ie.get(kr))return;const{onDragPending:Mt}=Ve.current,Fr={id:kr,constraint:nn,initialCoordinates:Xr,offset:wn};Mt?.(Fr),ue({type:"onDragPending",event:Fr})},onStart(kr){const nn=vt.current;if(nn==null)return;const Xr=Ie.get(nn);if(!Xr)return;const{onDragStart:wn}=Ve.current,on={activatorEvent:Yt,active:{id:nn,data:Xr.data,rect:Ze}};Ju.unstable_batchedUpdates(()=>{wn?.(on),oe(yf.Initializing),se({type:jo.DragStart,initialCoordinates:kr,active:nn}),ue({type:"onDragStart",event:on}),He(Ce.current),Ge(Yt)})},onMove(kr){se({type:jo.DragMove,coordinates:kr})},onEnd:vr(jo.DragEnd),onCancel:vr(jo.DragCancel)});Ce.current=rr;function vr(kr){return async function(){const{active:Xr,collisions:wn,over:on,scrollAdjustedTranslate:Mt}=ir.current;let Fr=null;if(Xr&&Mt){const{cancelDrop:en}=Ve.current;Fr={activatorEvent:Yt,active:Xr,collisions:wn,delta:Mt,over:on},kr===jo.DragEnd&&typeof en=="function"&&await Promise.resolve(en(Fr))&&(kr=jo.DragCancel)}vt.current=null,Ju.unstable_batchedUpdates(()=>{se({type:kr}),oe(yf.Uninitialized),ee(null),He(null),Ge(null),Ce.current=null;const en=kr===jo.DragEnd?"onDragEnd":"onDragCancel";if(Fr){const Io=Ve.current[en];Io?.(Fr),ue({type:en,event:Fr})}})}}},[Ie]),Je=Y.useCallback((et,Ae)=>(Ut,mr)=>{const Zt=Ut.nativeEvent,Yt=Ie.get(mr);if(vt.current!==null||!Yt||Zt.dndKit||Zt.defaultPrevented)return;const rr={active:Yt};et(Ut,Ae.options,rr)===!0&&(Zt.dndKit={capturedBy:Ae.sensor},vt.current=mr,Be(Ut,Ae))},[Ie,Be]),Ye=NY(I,Je);XY(I),ou(()=>{At&&de===yf.Initializing&&oe(yf.Initialized)},[At,de]),Y.useEffect(()=>{const{onDragMove:et}=Ve.current,{active:Ae,activatorEvent:Ut,collisions:mr,over:Zt}=ir.current;if(!Ae||!Ut)return;const Yt={active:Ae,activatorEvent:Ut,collisions:mr,delta:{x:Sr.x,y:Sr.y},over:Zt};Ju.unstable_batchedUpdates(()=>{et?.(Yt),ue({type:"onDragMove",event:Yt})})},[Sr.x,Sr.y]),Y.useEffect(()=>{const{active:et,activatorEvent:Ae,collisions:Ut,droppableContainers:mr,scrollAdjustedTranslate:Zt}=ir.current;if(!et||vt.current==null||!Ae||!Zt)return;const{onDragOver:Yt}=Ve.current,rr=mr.get(Zr),vr=rr&&rr.rect.current?{id:rr.id,rect:rr.rect.current,data:rr.data,disabled:rr.disabled}:null,kr={active:et,activatorEvent:Ae,collisions:Ut,delta:{x:Zt.x,y:Zt.y},over:vr};Ju.unstable_batchedUpdates(()=>{ee(vr),Yt?.(kr),ue({type:"onDragOver",event:kr})})},[Zr]),ou(()=>{ir.current={activatorEvent:rt,active:Qe,activeNode:_t,collisionRect:Dr,collisions:ur,droppableRects:pt,draggableNodes:Ie,draggingNode:or,draggingNodeRect:qt,droppableContainers:ae,over:Ne,scrollableAncestors:Rr,scrollAdjustedTranslate:Sr},Ze.current={initial:qt,translated:Dr}},[Qe,_t,ur,Dr,Ie,or,qt,pt,ae,Ne,Rr,Sr]),FY({...nt,delta:ke,draggingRect:Dr,pointerCoordinates:sn,scrollableAncestors:Rr,scrollableAncestorRects:Br});const Ue=Y.useMemo(()=>({active:Qe,activeNode:_t,activeNodeRect:At,activatorEvent:rt,collisions:ur,containerNodeRect:dr,dragOverlay:Tr,draggableNodes:Ie,droppableContainers:ae,droppableRects:pt,over:Ne,measureDroppableContainers:Tt,scrollableAncestors:Rr,scrollableAncestorRects:Br,measuringConfiguration:Fe,measuringScheduled:Ct,windowRect:Ir}),[Qe,_t,At,rt,ur,dr,Tr,Ie,ae,pt,Ne,Tt,Rr,Br,Fe,Ct,Ir]),Ke=Y.useMemo(()=>({activatorEvent:rt,activators:Ye,active:Qe,activeNodeRect:At,ariaDescribedById:{draggable:ut},dispatch:se,draggableNodes:Ie,over:Ne,measureDroppableContainers:Tt}),[rt,Ye,Qe,At,se,ut,Ie,Ne,Tt]);return dn.createElement(HR.Provider,{value:Q},dn.createElement(g0.Provider,{value:Ke},dn.createElement(aD.Provider,{value:Ue},dn.createElement(b1.Provider,{value:ce},P)),dn.createElement(iJ,{disabled:o?.restoreFocus===!1})),dn.createElement(oY,{...o,hiddenTextDescribedById:ut}));function gt(){const et=st?.autoScrollEnabled===!1,Ae=typeof x=="object"?x.enabled===!1:x===!1,Ut=be&&!et&&!Ae;return typeof x=="object"?{...x,enabled:Ut}:{enabled:Ut}}}),lJ=Y.createContext(null),pE="button",cJ="Draggable";function uJ(e){let{id:t,data:i,disabled:a=!1,attributes:c}=e;const h=m0(cJ),{activators:f,activatorEvent:o,active:x,activeNodeRect:P,ariaDescribedById:I,draggableNodes:R,over:D}=Y.useContext(g0),{role:$=pE,roleDescription:G="draggable",tabIndex:j=0}=c??{},V=x?.id===t,se=Y.useContext(V?b1:lJ),[ue,Q]=bx(),[de,oe]=bx(),be=KY(f,t),we=zv(i);ou(()=>(R.set(t,{id:t,key:h,node:ue,activatorNode:de,data:we}),()=>{const ke=R.get(t);ke&&ke.key===h&&R.delete(t)}),[R,t]);const Ie=Y.useMemo(()=>({role:$,tabIndex:j,"aria-disabled":a,"aria-pressed":V&&$===pE?!0:void 0,"aria-roledescription":G,"aria-describedby":I.draggable}),[a,$,j,V,G,I.draggable]);return{active:x,activatorEvent:o,activeNodeRect:P,attributes:Ie,isDragging:V,listeners:a?void 0:be,node:ue,over:D,setNodeRef:Q,setActivatorNodeRef:oe,transform:se}}function cD(){return Y.useContext(aD)}const hJ="Droppable",dJ={timeout:25};function fJ(e){let{data:t,disabled:i=!1,id:a,resizeObserverConfig:c}=e;const h=m0(hJ),{active:f,dispatch:o,over:x,measureDroppableContainers:P}=Y.useContext(g0),I=Y.useRef({disabled:i}),R=Y.useRef(!1),D=Y.useRef(null),$=Y.useRef(null),{disabled:G,updateMeasurementsFor:j,timeout:V}={...dJ,...c},se=zv(j??a),ue=Y.useCallback(()=>{if(!R.current){R.current=!0;return}$.current!=null&&clearTimeout($.current),$.current=setTimeout(()=>{P(Array.isArray(se.current)?se.current:[se.current]),$.current=null},V)},[V]),Q=x1({callback:ue,disabled:G||!f}),de=Y.useCallback((Ie,ke)=>{Q&&(ke&&(Q.unobserve(ke),R.current=!1),Ie&&Q.observe(Ie))},[Q]),[oe,be]=bx(de),we=zv(t);return Y.useEffect(()=>{!Q||!oe.current||(Q.disconnect(),R.current=!1,Q.observe(oe.current))},[oe,Q]),Y.useEffect(()=>(o({type:jo.RegisterDroppable,element:{id:a,key:h,disabled:i,node:oe,rect:D,data:we}}),()=>o({type:jo.UnregisterDroppable,key:h,id:a})),[a]),Y.useEffect(()=>{i!==I.current.disabled&&(o({type:jo.SetDroppableDisabled,id:a,key:h,disabled:i}),I.current.disabled=i)},[a,h,i,o]),{active:f,rect:D,isOver:x?.id===a,node:oe,over:x,setNodeRef:be}}function pJ(e){let{animation:t,children:i}=e;const[a,c]=Y.useState(null),[h,f]=Y.useState(null),o=wx(i);return!i&&!a&&o&&c(o),ou(()=>{if(!h)return;const x=a?.key,P=a?.props.id;if(x==null||P==null){c(null);return}Promise.resolve(t(P,h)).then(()=>{c(null)})},[t,a,h]),dn.createElement(dn.Fragment,null,i,a?Y.cloneElement(a,{ref:f}):null)}const mJ={x:0,y:0,scaleX:1,scaleY:1};function gJ(e){let{children:t}=e;return dn.createElement(g0.Provider,{value:sD},dn.createElement(b1.Provider,{value:mJ},t))}const yJ={position:"fixed",touchAction:"none"},vJ=e=>_1(e)?"transform 250ms ease":void 0,_J=Y.forwardRef((e,t)=>{let{as:i,activatorEvent:a,adjustScale:c,children:h,className:f,rect:o,style:x,transform:P,transition:I=vJ}=e;if(!o)return null;const R=c?P:{...P,scaleX:1,scaleY:1},D={...yJ,width:o.width,height:o.height,top:o.top,left:o.left,transform:Df.Transform.toString(R),transformOrigin:c&&a?cY(a,o):void 0,transition:typeof I=="function"?I(a):I,...x};return dn.createElement(i,{className:f,style:D,ref:t},h)}),xJ=e=>t=>{let{active:i,dragOverlay:a}=t;const c={},{styles:h,className:f}=e;if(h!=null&&h.active)for(const[o,x]of Object.entries(h.active))x!==void 0&&(c[o]=i.node.style.getPropertyValue(o),i.node.style.setProperty(o,x));if(h!=null&&h.dragOverlay)for(const[o,x]of Object.entries(h.dragOverlay))x!==void 0&&a.node.style.setProperty(o,x);return f!=null&&f.active&&i.node.classList.add(f.active),f!=null&&f.dragOverlay&&a.node.classList.add(f.dragOverlay),function(){for(const[x,P]of Object.entries(c))i.node.style.setProperty(x,P);f!=null&&f.active&&i.node.classList.remove(f.active)}},bJ=e=>{let{transform:{initial:t,final:i}}=e;return[{transform:Df.Transform.toString(t)},{transform:Df.Transform.toString(i)}]},wJ={duration:250,easing:"ease",keyframes:bJ,sideEffects:xJ({styles:{active:{opacity:"0"}}})};function SJ(e){let{config:t,draggableNodes:i,droppableContainers:a,measuringConfiguration:c}=e;return v1((h,f)=>{if(t===null)return;const o=i.get(h);if(!o)return;const x=o.node.current;if(!x)return;const P=oD(f);if(!P)return;const{transform:I}=ra(f).getComputedStyle(f),R=ZR(I);if(!R)return;const D=typeof t=="function"?t:CJ(t);return tD(x,c.draggable.measure),D({active:{id:h,data:o.data,node:x,rect:c.draggable.measure(x)},draggableNodes:i,dragOverlay:{node:f,rect:c.dragOverlay.measure(P)},droppableContainers:a,measuringConfiguration:c,transform:R})})}function CJ(e){const{duration:t,easing:i,sideEffects:a,keyframes:c}={...wJ,...e};return h=>{let{active:f,dragOverlay:o,transform:x,...P}=h;if(!t)return;const I={x:o.rect.left-f.rect.left,y:o.rect.top-f.rect.top},R={scaleX:x.scaleX!==1?f.rect.width*x.scaleX/o.rect.width:1,scaleY:x.scaleY!==1?f.rect.height*x.scaleY/o.rect.height:1},D={x:x.x-I.x,y:x.y-I.y,...R},$=c({...P,active:f,dragOverlay:o,transform:{initial:x,final:D}}),[G]=$,j=$[$.length-1];if(JSON.stringify(G)===JSON.stringify(j))return;const V=a?.({active:f,dragOverlay:o,...P}),se=o.node.animate($,{duration:t,easing:i,fill:"forwards"});return new Promise(ue=>{se.onfinish=()=>{V?.(),ue()}})}}let mE=0;function TJ(e){return Y.useMemo(()=>{if(e!=null)return mE++,mE},[e])}const MJ=dn.memo(e=>{let{adjustScale:t=!1,children:i,dropAnimation:a,style:c,transition:h,modifiers:f,wrapperElement:o="div",className:x,zIndex:P=999}=e;const{activatorEvent:I,active:R,activeNodeRect:D,containerNodeRect:$,draggableNodes:G,droppableContainers:j,dragOverlay:V,over:se,measuringConfiguration:ue,scrollableAncestors:Q,scrollableAncestorRects:de,windowRect:oe}=cD(),be=Y.useContext(b1),we=TJ(R?.id),Ie=lD(f,{activatorEvent:I,active:R,activeNodeRect:D,containerNodeRect:$,draggingNodeRect:V.rect,over:se,overlayNodeRect:V.rect,scrollableAncestors:Q,scrollableAncestorRects:de,transform:be,windowRect:oe}),ke=OS(D),ae=SJ({config:a,draggableNodes:G,droppableContainers:j,measuringConfiguration:ue}),Ee=ke?V.setRef:void 0;return dn.createElement(gJ,null,dn.createElement(pJ,{animation:ae},R&&we?dn.createElement(_J,{key:we,id:R.id,ref:Ee,as:o,activatorEvent:I,adjustScale:t,className:x,transition:h,rect:ke,style:{zIndex:P,...c},transform:Ie},i):null))});function LS(e,t,i){const a=e.slice();return a.splice(i<0?a.length+i:i,0,a.splice(t,1)[0]),a}function PJ(e,t){return e.reduce((i,a,c)=>{const h=t.get(a);return h&&(i[c]=h),i},Array(e.length))}function S_(e){return e!==null&&e>=0}function EJ(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function IJ(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const uD=e=>{let{rects:t,activeIndex:i,overIndex:a,index:c}=e;const h=LS(t,a,i),f=t[c],o=h[c];return!o||!f?null:{x:o.left-f.left,y:o.top-f.top,scaleX:o.width/f.width,scaleY:o.height/f.height}},C_={scaleX:1,scaleY:1},kJ=e=>{var t;let{activeIndex:i,activeNodeRect:a,index:c,rects:h,overIndex:f}=e;const o=(t=h[i])!=null?t:a;if(!o)return null;if(c===i){const P=h[f];return P?{x:0,y:i<f?P.top+P.height-(o.top+o.height):P.top-o.top,...C_}:null}const x=AJ(h,c,i);return c>i&&c<=f?{x:0,y:-o.height-x,...C_}:c<i&&c>=f?{x:0,y:o.height+x,...C_}:{x:0,y:0,...C_}};function AJ(e,t,i){const a=e[t],c=e[t-1],h=e[t+1];return a?i<t?c?a.top-(c.top+c.height):h?h.top-(a.top+a.height):0:h?h.top-(a.top+a.height):c?a.top-(c.top+c.height):0:0}const hD="Sortable",dD=dn.createContext({activeIndex:-1,containerId:hD,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:uD,disabled:{draggable:!1,droppable:!1}});function RJ(e){let{children:t,id:i,items:a,strategy:c=uD,disabled:h=!1}=e;const{active:f,dragOverlay:o,droppableRects:x,over:P,measureDroppableContainers:I}=cD(),R=m0(hD,i),D=o.rect!==null,$=Y.useMemo(()=>a.map(be=>typeof be=="object"&&"id"in be?be.id:be),[a]),G=f!=null,j=f?$.indexOf(f.id):-1,V=P?$.indexOf(P.id):-1,se=Y.useRef($),ue=!EJ($,se.current),Q=V!==-1&&j===-1||ue,de=IJ(h);ou(()=>{ue&&G&&I($)},[ue,$,G,I]),Y.useEffect(()=>{se.current=$},[$]);const oe=Y.useMemo(()=>({activeIndex:j,containerId:R,disabled:de,disableTransforms:Q,items:$,overIndex:V,useDragOverlay:D,sortedRects:PJ($,x),strategy:c}),[j,R,de.draggable,de.droppable,Q,$,V,x,D,c]);return dn.createElement(dD.Provider,{value:oe},t)}const DJ=e=>{let{id:t,items:i,activeIndex:a,overIndex:c}=e;return LS(i,a,c).indexOf(t)},zJ=e=>{let{containerId:t,isSorting:i,wasDragging:a,index:c,items:h,newIndex:f,previousItems:o,previousContainerId:x,transition:P}=e;return!P||!a||o!==h&&c===f?!1:i?!0:f!==c&&t===x},OJ={duration:200,easing:"ease"},fD="transform",LJ=Df.Transition.toString({property:fD,duration:0,easing:"linear"}),FJ={roleDescription:"sortable"};function BJ(e){let{disabled:t,index:i,node:a,rect:c}=e;const[h,f]=Y.useState(null),o=Y.useRef(i);return ou(()=>{if(!t&&i!==o.current&&a.current){const x=c.current;if(x){const P=iy(a.current,{ignoreTransform:!0}),I={x:x.left-P.left,y:x.top-P.top,scaleX:x.width/P.width,scaleY:x.height/P.height};(I.x||I.y)&&f(I)}}i!==o.current&&(o.current=i)},[t,i,a,c]),Y.useEffect(()=>{h&&f(null)},[h]),h}function $J(e){let{animateLayoutChanges:t=zJ,attributes:i,disabled:a,data:c,getNewIndex:h=DJ,id:f,strategy:o,resizeObserverConfig:x,transition:P=OJ}=e;const{items:I,containerId:R,activeIndex:D,disabled:$,disableTransforms:G,sortedRects:j,overIndex:V,useDragOverlay:se,strategy:ue}=Y.useContext(dD),Q=jJ(a,$),de=I.indexOf(f),oe=Y.useMemo(()=>({sortable:{containerId:R,index:de,items:I},...c}),[R,c,de,I]),be=Y.useMemo(()=>I.slice(I.indexOf(f)),[I,f]),{rect:we,node:Ie,isOver:ke,setNodeRef:ae}=fJ({id:f,data:oe,disabled:Q.droppable,resizeObserverConfig:{updateMeasurementsFor:be,...x}}),{active:Ee,activatorEvent:Ze,activeNodeRect:Qe,attributes:vt,setNodeRef:st,listeners:He,isDragging:rt,over:Ge,setActivatorNodeRef:Ve,transform:ut}=uJ({id:f,data:oe,attributes:{...FJ,...i},disabled:Q.draggable}),ve=HK(ae,st),Fe=!!Ee,pt=Fe&&!G&&S_(D)&&S_(V),Tt=!se&&rt,Ct=Tt&&pt?ut:null,bt=pt?Ct??(o??ue)({rects:j,activeNodeRect:Qe,activeIndex:D,overIndex:V,index:de}):null,nt=S_(D)&&S_(V)?h({id:f,items:I,activeIndex:D,overIndex:V}):de,kt=Ee?.id,At=Y.useRef({activeId:kt,items:I,newIndex:nt,containerId:R}),dr=I!==At.current.items,ir=t({active:Ee,containerId:R,isDragging:rt,isSorting:Fe,id:f,index:de,items:I,newIndex:At.current.newIndex,previousItems:At.current.items,previousContainerId:At.current.containerId,transition:P,wasDragging:At.current.activeId!=null}),Gr=BJ({disabled:!ir,index:de,node:Ie,rect:we});return Y.useEffect(()=>{Fe&&At.current.newIndex!==nt&&(At.current.newIndex=nt),R!==At.current.containerId&&(At.current.containerId=R),I!==At.current.items&&(At.current.items=I)},[Fe,nt,R,I]),Y.useEffect(()=>{if(kt===At.current.activeId)return;if(kt!=null&&At.current.activeId==null){At.current.activeId=kt;return}const or=setTimeout(()=>{At.current.activeId=kt},50);return()=>clearTimeout(or)},[kt]),{active:Ee,activeIndex:D,attributes:vt,data:oe,rect:we,index:de,newIndex:nt,items:I,isOver:ke,isSorting:Fe,isDragging:rt,listeners:He,node:Ie,overIndex:V,over:Ge,setNodeRef:ve,setActivatorNodeRef:Ve,setDroppableNodeRef:ae,setDraggableNodeRef:st,transform:Gr??bt,transition:Tr()};function Tr(){if(Gr||dr&&At.current.newIndex===de)return LJ;if(!(Tt&&!_1(Ze)||!P)&&(Fe||ir))return Df.Transition.toString({...P,property:fD})}}function jJ(e,t){var i,a;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(i=e?.draggable)!=null?i:t.draggable,droppable:(a=e?.droppable)!=null?a:t.droppable}}Vn.Down,Vn.Right,Vn.Up,Vn.Left;const gE=(e,t)=>{let i;return(...a)=>{clearTimeout(i),i=setTimeout(()=>{e(...a)},t)}},r2={[Lp.COMPANY]:{Icon:OU,label:"Companies",color:"orange"},[Lp.FUEL]:{Icon:MU,label:"Fuel Stations",color:"#008234"},[Lp.REST]:{Icon:wU,label:"Rest Stops",color:"#1f6eb7"},[Lp.SERVICE]:{Icon:pU,label:"Service Centers",color:"#8e0d0d"},[Lp.DEALER]:{Icon:HA,label:"Dealerships",color:"#7c2391"},[Lp.RECRUITING]:{Icon:AU,label:"Recruitment Agencies",color:"#918d00"}},NJ=e=>q.jsx(ii,{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:2,children:Object.entries(r2).map(([t,{Icon:i,label:a,color:c}])=>q.jsx(VJ,{Icon:i,color:c,label:a,onClick:()=>e.onClick(Number(t),a)},t))}),VJ=({Icon:e,color:t,label:i,onClick:a})=>q.jsx(q.Fragment,{children:q.jsxs(ii,{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:1,children:[q.jsx(ad,{size:"lg",variant:"solid",sx:{borderRadius:"50%",p:2.5,backgroundColor:t},onClick:a,children:q.jsx(e,{sx:{transform:"scale(1.25)"}})}),q.jsx(Yr,{children:i})]})}),Sg=e=>{const t=vq();if(!t)return null;let{spriteName:i}=e;const{includeMargin:a=!1,scale:c=.8}=e,h=/^\/?icons\/([^/]+)\.png$/.exec(i)?.[1];h&&(i=h);const f=t[i];if(!f)return null;const{width:o,height:x,x:P,y:I}=f;return q.jsx("div",{style:{display:"flex",justifyContent:"center"},children:q.jsx("img",{src:"/sprites@2x.png",style:{width:o,height:x,display:"block",objectPosition:`${-P}px ${-I}px`,objectFit:"none",marginRight:a?"1em":void 0,...c===1?{}:{transformOrigin:"center",transform:"scale(0.8)"}}})})},UJ={chooseDestination:{categoriesTitle:"Show nearby"},searchAlong:{categoriesTitle:"Search along the way"}},yE=e=>q.jsxs(fn,{direction:"column",gap:2,flexGrow:1,children:[q.jsxs(Hv,{size:"lg",variant:"soft",children:[q.jsx(GJ,{loading:e.showSearchLoading,onSelect:e.onSelect,onInputChange:e.onInputChange,placeholderText:"Search companies, facilities, points of interest...",options:e.options}),q.jsx(Da,{size:"lg",sx:{justifyContent:"start",px:2},startDecorator:q.jsx(RU,{}),variant:"plain",color:"neutral",onClick:()=>e.onChooseOnMapClick(),children:"Choose on map"})]}),q.jsx(Yg,{}),q.jsx(Yr,{level:"title-lg",children:UJ[e.mode].categoriesTitle}),q.jsx(NJ,{onClick:e.onDestinationTypeClick})]}),GJ=e=>q.jsx(w6,{size:"lg",placeholder:e.placeholderText,options:e.options,onChange:(t,i,a)=>i!=null&&(a=="selectOption"||a==="createOption")&&e.onSelect(i),onInputChange:(t,i,a)=>e.onInputChange(i,a),filterOptions:t=>t,getOptionLabel:ZJ,blurOnSelect:!0,handleHomeEndKeys:!0,freeSolo:!0,startDecorator:q.jsx(uS,{}),endDecorator:e.loading?q.jsx(im,{size:"sm",sx:{bgcolor:"background.surface"}}):null,renderOption:(t,i)=>Y.createElement(QF,{...t,key:i.nodeUid+i.type},q.jsx(qJ,{option:i}))}),qJ=Y.memo(({option:e})=>q.jsxs(q.Fragment,{children:[q.jsx(Jc,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mx:0},children:q.jsx(vE,{option:e})}),q.jsx(WJ,{option:e}),q.jsx(Jc,{children:q.jsx(vE,{option:e,position:"end"})})]})),vE=({option:e,position:t})=>{if(t==="end")return e.type==="company"?q.jsx(Sg,{spriteName:e.sprite,includeMargin:!0}):e.type==="serviceArea"&&XJ(e.sprite)?q.jsxs(fn,{direction:"row",alignItems:"center",children:[e.facilityUrls.map(a=>q.jsx(Sg,{spriteName:a},a)),q.jsx(Sg,{spriteName:e.sprite,includeMargin:!0})]}):null;let i;switch(e.type){case"city":return q.jsx(PU,{});case"scenery":return q.jsx(bU,{});case"company":return q.jsx(kU,{});case"landmark":case"viewpoint":case"dealer":case"ferry":case"train":i=e.sprite;break;case"serviceArea":{switch(e.label){case"Gallon Oil":case"Phoenix":case"Aron":case"Vortex":case"WP":case"GreenPetrol":case"Fusion":case"Driverse":case"Haulett":i="gas_ico";break;case"Western Star":case"Kenworth":case"Peterbilt":case"Volvo":case"Freightliner":case"International":case"Mack":i="dealer_ico";break;case"Garage":i="garage_large_ico";break;case"Gas Station":i="gas_ico";break;case"Rest Area":i="parking_ico";break;default:i=e.sprite??e.facilityUrls[0]??"unknown";break}break}default:throw new No(e)}return q.jsx(Sg,{spriteName:i})};function HJ(e,t){return t.distance<=250||e.startsWith(t.name)||e.endsWith(t.name)?0:t.distance<=1e3?1:2}const WJ=({option:e})=>{switch(e.type){case"city":case"scenery":return q.jsxs(Q_,{children:[e.label,", ",e.stateCode]});case"company":case"landmark":case"viewpoint":case"dealer":case"ferry":case"train":case"serviceArea":{let t;const i=HJ(e.label,e.city);switch(i){case 0:t=`${e.city.name}, ${e.stateCode}`;break;case 1:t=`near ${e.city.name}, ${e.stateCode}`;break;case 2:t=`${e.stateName}`;break;default:throw new No(i)}return q.jsxs(Q_,{children:[q.jsx(Yr,{children:e.label}),q.jsx(Yr,{level:"body-sm",children:t})]})}default:throw new No(e)}};function ZJ(e){if(typeof e=="string")return e;const t=qw(e);return e.type==="city"||e.type==="scenery"?t:[e.label,qw(e)].join(" ")}function XJ(e){return e.endsWith("_oil_gst")||e.endsWith("_dlr")}const KJ=e=>q.jsx(fn,{direction:"column",gap:2,flexGrow:1,children:q.jsxs(Hv,{size:"lg",variant:"soft",children:[q.jsx(Yr,{level:"body-md",fontSize:"lg",children:"Pan and zoom to adjust"}),q.jsx(Da,{size:"lg",onClick:e.onUseThisPointClick,children:"Done"})]})}),YJ=e=>(console.log("render collapsible button bar"),q.jsx(Yp,{in:e.visible,children:q.jsxs(G6,{variant:"outlined",size:"lg",buttonFlex:"1 0 50%",sx:{mt:2,mb:1},children:[q.jsx(Da,{startDecorator:q.jsx(GA,{}),onClick:t=>{e.onDestinationRoutesClick(),t.stopPropagation()},children:"Routes"}),q.jsx(Da,{variant:"solid",color:"success",onClick:t=>{e.onDestinationGoClick(),t.stopPropagation()},children:"Go!"})]})})),JJ=e=>q.jsxs(q.Fragment,{children:[q.jsx(hl,{children:q.jsxs($p,{onClick:e.onDestinationHighlight,sx:{display:"flex",flexDirection:"column",gap:0,alignItems:"normal"},children:[q.jsxs(fn,{direction:"row",gap:1,children:[e.index!=null&&q.jsx(ii,{width:"1em",mr:1,children:q.jsxs(Yr,{fontSize:"lg",textAlign:"right",children:[e.index+1,"."]})}),q.jsx(ii,{sx:{width:"calc(0.8 * 128px)"},children:q.jsx(Sg,{spriteName:QJ(e.destination)})}),q.jsxs(fn,{flexDirection:"column",flexGrow:1,children:[q.jsxs(fn,{flexDirection:"row",gap:1,justifyContent:"space-between",children:[q.jsx(Yr,{fontSize:"lg",children:e.destination.label}),q.jsx(fn,{direction:"row",alignItems:"center",children:e.destination.facilityUrls.map(t=>q.jsx(Sg,{spriteName:t},t))})]}),q.jsxs(fn,{flexDirection:"row",gap:1,alignItems:"baseline",children:[q.jsx(Yr,{noWrap:!0,color:"neutral",fontSize:"sm",flexGrow:1,width:100,children:qw(e.destination)}),q.jsxs(Yr,{color:"neutral",fontSize:"md",flexGrow:0,children:[Jp(e.destination.distance).length,q.jsx(Yr,{fontSize:"xs",children:Jp(e.destination.distance).unit})]}),q.jsx(Yr,{color:"neutral",fontSize:"md",fontWeight:"bold",flex:"0 1 2em",textAlign:"center",children:UR(e.destination.bearing)})]})]})]}),q.jsx(e.CollapsibleButtonBar,{})]})}),q.jsx(xf,{})]});function QJ(e){switch(e.type){case"city":case"scenery":return"/icons/city_names_ico.png";case"company":case"landmark":case"viewpoint":case"ferry":case"train":case"dealer":case"serviceArea":return`/icons/${e.sprite}.png`;default:throw new No(e)}}const eQ=e=>(console.log("render dest list"),q.jsx(nm,{size:"lg",children:e.destinations.map((t,i)=>q.jsx(JJ,{destination:t,index:i,onDestinationHighlight:()=>e.onDestinationHighlight(t),CollapsibleButtonBar:()=>q.jsx(e.CollapsibleButtonBar,{destination:t})},t.nodeUid))}));function tQ(e,t,i){const a={...e};return t.top+e.y<=i.top?a.y=i.top-t.top:t.bottom+e.y>=i.top+i.height&&(a.y=i.top+i.height-t.bottom),t.left+e.x<=i.left?a.x=i.left-t.left:t.right+e.x>=i.left+i.width&&(a.x=i.left+i.width-t.right),a}const rQ=e=>{let{containerNodeRect:t,draggingNodeRect:i,transform:a}=e;return!i||!t?a:tQ(a,i,t)},nQ=e=>{let{transform:t}=e;return{...t,x:0}},_E={backgroundColor:"background.body",border:"1px solid",borderColor:"neutral.outlinedBorder",borderRadius:"var(--joy-radius-sm)",padding:1},iQ=e=>{const[t,i]=Y.useState(null),a=aY(sY(zS,{activationConstraint:{delay:50,tolerance:5}})),c=hS(e.summary.minutes*60);function h(x){const{active:P}=x;i(P.id)}function f(x){const{active:P,over:I}=x;P.id!==I?.id&&e.onWaypointReorder({oldIndex:e.waypoints.findIndex(R=>R.id===P.id),newIndex:e.waypoints.findIndex(R=>R.id===I?.id)}),i(null)}const o=e.waypoints.find(x=>x.id===t);return q.jsxs(fn,{direction:"column",gap:2,flexGrow:1,children:[q.jsxs(nm,{size:"lg",children:[q.jsxs(hl,{children:[q.jsx(mD,{hide:t!=null,index:-1,totalItems:e.waypoints.length}),q.jsx(Q_,{sx:{border:"1px solid transparent",padding:1},children:q.jsx(Yr,{children:"Your location"})})]}),q.jsxs(aJ,{collisionDetection:fY,modifiers:[nQ,rQ],onDragStart:h,onDragEnd:f,sensors:a,children:[q.jsx(RJ,{items:e.waypoints,strategy:kJ,children:e.waypoints.map((x,P)=>q.jsx(oQ,{onDeleteClick:()=>e.onWaypointDelete(P),invisible:x.id===t,isDragOpActive:t!=null,index:P,totalItems:e.waypoints.length,waypoint:x},x.id))}),q.jsx(MJ,{children:o?q.jsx(pD,{index:e.waypoints.indexOf(o),waypoint:o,totalItems:e.waypoints.length,shadow:!0,hideDecorators:!0}):null})]})]}),q.jsxs(fn,{direction:"row",gap:2,px:2,justifyContent:"space-between",alignItems:"center",children:[q.jsxs(Yr,{level:"title-lg",children:["Total trip: ",c.string]}),q.jsx(Da,{size:"lg",onClick:e.onDoneClick,children:"Done"})]})]})},oQ=e=>{const{invisible:t,isDragOpActive:i,index:a,totalItems:c,waypoint:h,onDeleteClick:f}=e,{setNodeRef:o,setActivatorNodeRef:x,attributes:P,listeners:I,transform:R,transition:D}=$J({id:h.id}),$={transform:Df.Transform.toString(R),transition:D,opacity:t?0:void 0};return q.jsx(pD,{ref:o,hideDecorators:i,style:$,attributes:P,listeners:I,index:a,totalItems:c,waypoint:h,onDeleteClick:f,setActivatorNodeRef:x})},pD=Y.forwardRef((e,t)=>{const{index:i,totalItems:a,waypoint:c,hideDecorators:h=!1,style:f,attributes:o,listeners:x}=e,P=a>1?_E.border:void 0;return q.jsxs(hl,{ref:t,style:f,...o,children:[q.jsx(mD,{hide:h,index:i,totalItems:a}),q.jsx(Q_,{sx:{..._E,border:P,boxShadow:e.shadow?"0px 0px 10px 3px rgba(0.5,0.5,0.5,0.15)":void 0},children:q.jsxs(fn,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[q.jsx(Yr,{children:c.description}),a>1&&q.jsx(ii,{ref:e.setActivatorNodeRef,...x,sx:{display:"flex",cursor:"grab",justifyContent:"center",alignItems:"center",width:"2em",height:"2em"},children:q.jsx(yU,{})})]})}),a>1&&q.jsx(Jc,{children:q.jsx(ad,{onClick:e.onDeleteClick,sx:{opacity:1,transition:"opacity 200ms"},style:{opacity:h?0:void 0},children:q.jsx(qA,{})})})]})}),mD=e=>{const{index:t,totalItems:i,hide:a}=e;return t===-1?q.jsx(Jc,{children:q.jsx(ii,{sx:{border:"0.15em solid",borderColor:"white",boxShadow:"0px 0px 1px 1px rgba(0,0,0,0.25)",borderRadius:"50%",width:"1em",height:"1em",backgroundColor:"hsl(204,100%,50%)",opacity:1,transition:"opacity 200ms"},style:{opacity:a?0:void 0}})}):t===i-1?q.jsx(Jc,{children:q.jsx(_U,{sx:{marginLeft:"-0.1em",stroke:"rgba(0.5,0.5,0.5,.25)",fill:"red",opacity:1,transition:"opacity 200ms"},style:{opacity:a?0:void 0}})}):q.jsx(Jc,{children:q.jsx(ii,{sx:{fontSize:"0.625em",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bolder",borderRadius:"50%",width:"1.6em",height:"1.6em",border:"0.15em solid",backgroundColor:"background.surface",opacity:1,transition:"opacity 200ms"},style:{opacity:a?0:void 0},children:t+1})})},sQ=e=>q.jsx(HI,{variant:"outlined",sx:{p:2,borderRadius:12,height:"100%"},children:q.jsxs(fn,{gap:2,height:"100%",overflow:"hidden",children:[q.jsx(e.TitleControls,{}),q.jsx(Yg,{}),q.jsx(ii,{overflow:"auto",display:"flex",justifyContent:"center",children:q.jsx(e.CurrentPage,{})})]})}),aQ=e=>{const t=e.route.detour?.distanceMeters??e.route.distanceMeters,i=e.route.detour?.duration??e.route.duration;let a=Jp(t,{abbreviateUnits:!1,units:"imperial",forceSingular:e.route.detour!=null}).string,c=hS(i,{abbreviateUnits:!1,forceSingular:e.route.detour!=null}).string;return e.route.detour&&(a=t<=0?"Along the way":`+${a} detour`,c=i<=0?"Quick detour":`+${c} detour`),q.jsxs(q.Fragment,{children:[q.jsx(hl,{children:q.jsxs($p,{onClick:e.onRouteHighlight,sx:{gap:1,alignItems:"start"},children:[q.jsxs(fn,{direction:"column",flexGrow:1,gap:1,children:[q.jsxs(ii,{children:[q.jsx(Yr,{fontSize:"x-large",children:c}),q.jsxs(Yr,{color:"neutral",fontSize:"md",children:[a," "," ",hQ(e.route.segments[0].strategy)]})]}),q.jsx(lQ,{summary:e.route.summary})]}),q.jsx(Da,{size:"lg",variant:"outlined",color:"neutral",onClick:h=>{e.onRouteDetailsClick(),h.stopPropagation()},children:"Details"}),q.jsx(Da,{size:"lg",variant:"solid",color:"success",onClick:h=>{e.onRouteGoClick(),h.stopPropagation()},children:"Go!"})]})}),q.jsx(xf,{})]})},lQ=({summary:e})=>{const t=[];for(const i of e.grades)t.push(q.jsx(cQ,{grade:i}));for(const i of e.roads)t.push(q.jsxs(fn,{direction:"row",gap:1,children:[q.jsx("img",{style:{width:"24px",maxHeight:"24px",display:"block",filter:uQ(i)?["drop-shadow(1px 0 0 black)","drop-shadow(-1px 0 0 black)","drop-shadow(0 1px 0 black)","drop-shadow(0-1px 0 black)"].join(" "):void 0},src:`/icons/${i}.png`,alt:i}),q.jsx(Yr,{children:dQ(i)})]}));return e.hasTolls&&t.push(q.jsxs(fn,{direction:"row",gap:1,children:[q.jsx(zU,{}),q.jsx(Yr,{children:"This route has tolls"})]})),q.jsx(q.Fragment,{children:t})},cQ=({grade:e})=>{const{string:t}=Jp(e.distance,{abbreviateUnits:!1,units:"imperial",forceSingular:!1});return q.jsxs(fn,{direction:"row",alignItems:"center",gap:1,children:[q.jsxs(ii,{sx:{display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},children:[q.jsx(HA,{sx:{transform:`translateX(${e.percentage>0?"":"-"}0.1em) scale(0.8) scaleX(-1) translateY(-0.125em) rotate(${e.percentage>0?"-":""}20deg)`}}),q.jsx("svg",{viewBox:"0 0 24 24",style:{position:"absolute",transform:e.percentage>0?void 0:"scaleX(-1)"},children:q.jsx("polygon",{points:"24,24 0,24, 0,11.5, 24,20.5 24,24"})})]}),q.jsxs(Yr,{children:[Math.abs(e.percentage),"%"," ",e.percentage>0?"Uphill":"Descent"," ",q.jsxs(Yr,{fontSize:"sm",color:"neutral",children:["for ",t]})]})]})};function uQ(e){return/^(us|tx)/.test(e)}function hQ(e){switch(e){case"fastest":return"Fastest";case"shortest":return"Shortest";case"smallRoads":return"Prefer small roads";default:throw new No(e)}}function dQ(e){let[t,i,a]=e.split(/(\d+)/).map(c=>c.toUpperCase());return t==="IS"?t="I":t==="CA_R"?t="CA":t==="TXL"&&(t="TX LOOP"),Qs.checkArgument(/^[a-z ]+$/i.test(t),t),Qs.checkArgument(/^\d+$/.test(i),i),`${t}-${i}${a?" "+a:""}`}const fQ=e=>{console.log("render route list");const{onRouteHighlight:t,onRouteDetailsClick:i,onRouteGoClick:a}=e,c=h=>q.jsx(aQ,{route:h.route,onRouteHighlight:()=>t(h.route),onRouteDetailsClick:()=>i(h.route),onRouteGoClick:()=>a(h.route)});return q.jsx(nm,{size:"lg",children:e.routes.map(h=>q.jsx(c,{route:h},h.id))})},xE=e=>{console.log("render route steps list");const{mode:t,systemMode:i}=zO(),a=(t==="system"?i:t)??"light",c=({direction:f})=>q.jsx(gQ,{direction:f,mode:a}),h=({step:f})=>q.jsx(mQ,{step:f,onStepClick:e.onStepClick,StepIcon:c});return q.jsx(nm,{size:"md",children:e.route.segments.map(f=>q.jsx(pQ,{segment:f,RouteStep:h},f.key))})},pQ=e=>q.jsx(nm,{children:e.segment.steps.map((t,i)=>q.jsx(e.RouteStep,{step:t},i))}),mQ=e=>{const{step:t,step:{maneuver:i},onStepClick:a,StepIcon:c}=e,h=Jp(t.distanceMeters,{abbreviateUnits:!1,units:"imperial",forceSingular:!1}).string,f=({children:o})=>a?q.jsx($p,{sx:{py:.125},onClick:()=>a(t),children:o}):q.jsx(q.Fragment,{children:o});return q.jsxs(q.Fragment,{children:[q.jsx(hl,{children:q.jsxs(f,{children:[q.jsx(Jc,{sx:{m:0,justifyContent:"center"},children:q.jsx(ad,{size:"md",children:q.jsx(c,{direction:i.direction})})}),WU(i)]})}),t.distanceMeters>0&&q.jsx(xf,{inset:"startContent",sx:{"--Divider-childPosition":"0%",marginInlineStart:8},children:h})]})},gQ=e=>q.jsx(p1,{branches:[e.direction],dimColor:e.mode==="light"?"#333":"#ddd"}),yQ=e=>q.jsxs(fn,{gap:1,direction:"row",alignItems:"center",children:[q.jsx(Yp,{in:e.showBackButton,orientation:"horizontal",children:q.jsx(ad,{onClick:e.onBackClick,children:q.jsx(fU,{})})}),q.jsx(Yr,{flexGrow:1,level:"title-lg",fontSize:"xl",children:e.title}),q.jsx(ad,{onClick:e.onCloseClick,children:q.jsx(qA,{})})]});function gw(e){return function(t){return t.isLoading?q.jsx(im,{size:"lg"}):q.jsx(e,{...t})}}class vQ{pageStack=[rn.CHOOSE_DESTINATION];isLoading=!1;disableFitToBounds=!1;searchQuery="";destinations=[];selectedDestination=void 0;routes=[];selectedRoute=void 0;constructor(){Q2(this,{destinations:vi.ref,selectedDestination:vi.ref,routes:vi.ref,selectedRoute:vi.ref})}get currentPageKey(){return ea(this.pageStack.at(-1))}get title(){switch(this.currentPageKey){case rn.CHOOSE_DESTINATION:return"Choose destination";case rn.SEARCH_ALONG:return"Search along route";case rn.CHOOSE_ON_MAP:return"Choose destination";case rn.DESTINATIONS:return this.searchQuery||"Search results";case rn.ROUTES:return`Routes to ${ea(this.selectedDestination).label}`;case rn.DIRECTIONS_FROM_ROUTE_CONTROLS:return"Directions";case rn.DIRECTIONS_FROM_ROUTES_LIST:return"Details";case rn.MANAGE_STOPS:return"Manage stops";default:throw new No(this.currentPageKey)}}get showBackButton(){return this.pageStack.length>1}}class _Q{constructor(t){this.appClient=t}startChooseDestinationFlow(t){this.reset(t),t.pageStack[0]=rn.CHOOSE_DESTINATION}startSearchAlongFlow(t){this.reset(t),t.pageStack[0]=rn.SEARCH_ALONG}startShowActiveRouteDirectionsFlow(t){this.reset(t),t.pageStack[0]=rn.DIRECTIONS_FROM_ROUTE_CONTROLS}startManageStopsFlow(t){this.reset(t),t.pageStack[0]=rn.MANAGE_STOPS}search(t,i){return this.appClient.getAutocompleteOptions.query(i)}onSearchSelect(t,i){typeof i=="string"?(t.pageStack.push(rn.DESTINATIONS),t.isLoading=!0,this.search(t,i).then(Lr(a=>{t.searchQuery=i,t.destinations=a,t.selectedDestination=void 0})).finally(Lr(()=>t.isLoading=!1))):this.onDestinationRoutesClick(t,i)}onBackClick(t){switch(Qs.checkState(t.pageStack.length>0),t.currentPageKey){case rn.CHOOSE_DESTINATION:case rn.SEARCH_ALONG:case rn.DIRECTIONS_FROM_ROUTE_CONTROLS:case rn.DIRECTIONS_FROM_ROUTES_LIST:case rn.CHOOSE_ON_MAP:case rn.MANAGE_STOPS:t.pageStack.pop();break;case rn.DESTINATIONS:this.reset(t);break;case rn.ROUTES:t.selectedDestination=void 0,t.routes=[],t.selectedRoute=void 0,t.pageStack.pop();break;default:throw new No(t.currentPageKey)}}onChooseOnMapClick(t){t.pageStack.push(rn.CHOOSE_ON_MAP)}onDestinationTypeClick(t,i,a,c){const h=t.currentPageKey;console.log("currentPage",h);const f=h===rn.CHOOSE_DESTINATION?F_.NEARBY:F_.ROUTE;if(t.pageStack.push(rn.DESTINATIONS),t.isLoading=!0,this.appClient.search.query({type:i,scope:f}).then(Lr(o=>{t.searchQuery=r2[i].label,t.destinations=o,t.selectedDestination=void 0})).finally(Lr(()=>t.isLoading=!1)),f===F_.NEARBY){const o=c.addMapDragEndListener(x=>{this.appClient.search.query({type:i,scope:f,center:x}).then(Lr(P=>{t.searchQuery=r2[i].label,t.destinations=P,t.selectedDestination=void 0,t.disableFitToBounds=!0}))});wA(()=>t.currentPageKey!==rn.DESTINATIONS,()=>{console.log("clearing map drag listener!"),o(),t.disableFitToBounds=!1})}}onDestinationHighlight(t,i){t.selectedDestination=i===t.selectedDestination?void 0:i}onDestinationGoClick(t,i){console.log("go",i),t.selectedDestination=i}onDestinationRoutesClick(t,i){console.log("routes",i),t.selectedDestination=i,t.pageStack.push(rn.ROUTES),t.isLoading=!0,this.appClient.previewRoutes.query({toNodeUid:i.nodeUid}).then(Lr(a=>{t.isLoading=!1,t.routes=a,t.selectedRoute=t.routes[0]}))}onRouteHighlight(t,i){console.log("highlight route",i),t.selectedRoute=i}onRouteDetailsClick(t,i){console.log("route details",i),t.selectedRoute=i,t.pageStack.push(rn.DIRECTIONS_FROM_ROUTES_LIST)}onRouteGoClick(t,i){console.log("go route",i),t.selectedRoute=i}reset(t){console.log("nav sheet reset"),t.pageStack.length=1,t.isLoading=!1,t.destinations=[],t.selectedDestination=void 0,t.routes=[],t.selectedRoute=void 0}}function xQ({appClient:e,appStore:t,appController:i}){const a=new vQ,c=new _Q(e),{CurrentNavPage:h}=bQ({store:a,controller:c,appStore:t,appController:i}),f=co(x=>q.jsx(yQ,{showBackButton:a.showBackButton,title:a.title,onBackClick:Lr(()=>c.onBackClick(a)),onCloseClick:x.onCloseClick}));return{NavSheet:x=>q.jsx(sQ,{TitleControls:()=>q.jsx(f,{onCloseClick:x.onCloseClick}),CurrentPage:()=>q.jsx(h,{onDestinationGoClick:x.onDestinationGoClick,onRouteGoClick:x.onRouteGoClick,onRouteStepClick:x.onRouteStepClick,onRouteToPointClick:x.onRouteToPointClick,onManageStopsDoneClick:x.onCloseClick,onWaypointsChange:x.onWaypointsChange})}),store:a,controller:c}}function bQ(e){const{store:t,controller:i,appStore:a,appController:c}=e,h=()=>{const[G,j]=Y.useState([]),[V,se]=Y.useState(!1),ue=Y.useCallback(de=>{if(de.trim().length===0){j([]);return}V||(se(!0),i.search(t,de).then(oe=>j(oe),oe=>console.log("search failed:",oe)).finally(()=>se(!1)))},[V]),Q=gE(ue,250);return q.jsx(yE,{showSearchLoading:V,mode:"chooseDestination",onSelect:Lr(de=>i.onSearchSelect(t,de)),onInputChange:Q,onDestinationTypeClick:Lr((de,oe)=>i.onDestinationTypeClick(t,de,oe,c)),onChooseOnMapClick:Lr(()=>i.onChooseOnMapClick(t)),options:G})},f=()=>{const[G,j]=Y.useState([]),[V,se]=Y.useState(!1),ue=Y.useCallback(de=>{if(de.trim().length===0){j([]);return}V||(se(!0),i.search(t,de).then(oe=>j(oe),oe=>console.log("search failed:",oe)).finally(()=>se(!1)))},[V]),Q=gE(ue,250);return q.jsx(yE,{mode:"searchAlong",showSearchLoading:V,onSelect:Lr(de=>i.onSearchSelect(t,de)),onInputChange:Q,onDestinationTypeClick:Lr((de,oe)=>i.onDestinationTypeClick(t,de,oe,c)),onChooseOnMapClick:Lr(()=>i.onChooseOnMapClick(t)),options:G})},o=gw(KJ),x=co(G=>q.jsx(o,{isLoading:t.isLoading,onUseThisPointClick:G.onUseThisPointClick})),P=gw(eQ),I=co(G=>{const j=co(({destination:V})=>{const se=Tf(()=>t.selectedDestination===V);return q.jsx(YJ,{visible:se.get(),onDestinationRoutesClick:Lr(()=>i.onDestinationRoutesClick(t,V)),onDestinationGoClick:Lr(()=>{i.onDestinationGoClick(t,V),G.onDestinationGoClick()})})});return q.jsx(P,{isLoading:t.isLoading,destinations:t.destinations,CollapsibleButtonBar:j,onDestinationHighlight:Lr(V=>i.onDestinationHighlight(t,V))})}),R=gw(fQ),D=co(G=>q.jsx(R,{isLoading:t.isLoading,routes:t.routes,onRouteHighlight:Lr(j=>i.onRouteHighlight(t,j)),onRouteDetailsClick:Lr(j=>i.onRouteDetailsClick(t,j)),onRouteGoClick:Lr(j=>{i.onRouteGoClick(t,j),G.onRouteGoClick()})})),$=co(G=>{const{activeRoute:j,activeRouteIndex:V,activeRouteSummary:se}=a,[ue,Q]=Y.useState(j!=null?j.segments.slice(V?.segmentIndex).map((be,we)=>{const Ie=BigInt("0x"+be.key.split("-")[1]);return{id:Ie.toString(16)+"-"+we,description:be.steps.at(-1).maneuver.banner?.text??"Waypoint",nodeUid:Ie}}):[]);if(!j)return null;const de=be=>{const we=LS(ue,be.oldIndex,be.newIndex);Q(we),G.onWaypointsChange(we.map(Ie=>Ie.nodeUid))},oe=be=>{ue.splice(be,1);const we=ue.slice(0);Q(we),G.onWaypointsChange(we.map(Ie=>Ie.nodeUid))};return q.jsx(iQ,{summary:se??{distanceMeters:0,minutes:0},waypoints:ue,onDoneClick:Lr(G.onDoneClick),onWaypointReorder:Lr(de),onWaypointDelete:Lr(oe)})});return{CurrentNavPage:co(G=>{switch(console.log("render current nav pag",t.currentPageKey),t.currentPageKey){case rn.CHOOSE_DESTINATION:return q.jsx(h,{});case rn.SEARCH_ALONG:return q.jsx(f,{});case rn.CHOOSE_ON_MAP:return q.jsx(x,{onUseThisPointClick:G.onRouteToPointClick});case rn.DESTINATIONS:return q.jsx(I,{onDestinationGoClick:G.onDestinationGoClick});case rn.ROUTES:return q.jsx(D,{onRouteGoClick:G.onRouteGoClick});case rn.DIRECTIONS_FROM_ROUTES_LIST:return q.jsx(xE,{route:ea(t.selectedRoute),onStepClick:G.onRouteStepClick});case rn.DIRECTIONS_FROM_ROUTE_CONTROLS:return q.jsx(xE,{route:ea(a.activeRoute)});case rn.MANAGE_STOPS:return q.jsx($,{onDoneClick:G.onManageStopsDoneClick,onWaypointsChange:G.onWaypointsChange});default:throw new No(t.currentPageKey)}})}}function wQ({appClient:e,transitionDurationMs:t}){const i=new RK,a=new DK;a.setupWakeLock();const{NavSheet:c,controller:h,store:f}=xQ({appClient:e,appStore:i,appController:a}),o=Lr(()=>{a.hideNavSheet(i),a.setFollow(i),PQ(t).then(Lr(()=>h.reset(f))),f.destinations=[]}),x=()=>q.jsx(c,{onCloseClick:o,onDestinationGoClick:()=>{a.setDestinationNodeUid(i,ea(f.selectedDestination).nodeUid,e),o()},onRouteGoClick:Lr(()=>{a.setActiveRoute(i,f.selectedRoute,e),o()}),onRouteToPointClick:Lr(()=>{f.isLoading=!0,a.synthesizeSearchResult(i,e).then(Lr(ke=>{h.onDestinationRoutesClick(f,ke)}),ke=>console.log("error trying to synthesize result",ke))}),onRouteStepClick:Lr(ke=>{a.flyTo(i,ke.maneuver.lonLat,EQ(ke)),a.drawStepArrow(ke)}),onWaypointsChange:Lr(ke=>{a.setActiveRouteFromNodeUids(i,ke,e)})});ag(()=>i.showNavSheet&&f.currentPageKey===rn.CHOOSE_ON_MAP,Lr(ke=>{a.toggleChooseOnMapUi(i,ke),ke&&(a.clearPitchAndBearing(i),i.cameraMode=ec.FREE)})),ag(()=>{if(!(f.destinations.length===0||f.currentPageKey!==rn.DESTINATIONS))return f.destinations.map(ke=>ke.lonLat)},Lr(ke=>{ke&&(a.setFree(i),f.disableFitToBounds||a.fitPoints(i,ke))})),ag(()=>{if(i.showNavSheet&&f.currentPageKey===rn.ROUTES&&!f.isLoading)return f.routes},ke=>{if(ke)if(ke.every(ae=>ae.detour)){const ae=[i.truckPoint,ke[0].detour.lngLat];console.log("tlbrs",ae),i.cameraMode=ec.FREE,a.fitPoints(i,ae)}else{const Ee=ke.map(Ze=>Fb(Ag(Ze))).flatMap(([Ze,Qe,vt,st])=>[[Ze,Qe],[vt,st]]);console.log("tlbrs",Ee),i.cameraMode=ec.FREE,a.fitPoints(i,Ee)}}),ag(()=>({routes:f.routes,selected:f.selectedRoute}),({routes:ke,selected:ae})=>{[0,1,2].forEach(Ee=>a.renderRoutePreview(ke[Ee],{index:Ee,highlight:ae?.id===ke[Ee]?.id})),ke.length===0&&!ae&&a.renderActiveRoute(i.activeRoute)}),ag(()=>i.showNavSheet&&f.currentPageKey===rn.MANAGE_STOPS?i.activeRoute:void 0,ke=>{if(!ke)return;const[ae,Ee,Ze,Qe]=Fb(Ag(ke)),vt=[[ae,Ee],[Ze,Qe]];i.cameraMode=ec.FREE,a.fitPoints(i,vt)}),ag(()=>i.showNavSheet?void 0:i.activeArrowStep,ke=>a.drawStepArrow(ke));const{Controls:P,controller:I,store:R}=qK({appStore:i}),D=()=>q.jsx(P,{onRecenterFabClick:Lr(()=>a.setFollow(i)),onRouteFabClick:Lr(()=>{h.startChooseDestinationFlow(f),i.showNavSheet=!0}),onSearchFabClick:Lr(()=>{h.startSearchAlongFlow(f),i.showNavSheet=!0})}),$=(ke,ae)=>{console.log("waiting for readyToLoad signal"),wA(()=>i.readyToLoad,()=>{console.log("readyToLoad signal received."),i.mapLoaded=!0,a.onMapLoad(ke,ae),a.startListening(i,e),I.startListening(R,e)})},G=co(()=>q.jsx(oU,{destinations:f.destinations,selectedDestinationNodeUid:f.selectedDestination?.nodeUid,forceDisplay:f.currentPageKey===rn.DESTINATIONS,onDestinationClick:Lr(ke=>h.onDestinationRoutesClick(f,ke))})),j=Tf(()=>i.trailerPoint?.map(ke=>Number(ke.toFixed(6))),{equals:If.structural}),V=co(()=>q.jsx(_q,{trailerPoint:j.get(),activeRoute:i.activeRoute})),se=co(()=>q.jsx(gq,{mode:i.themeMode,onLoad:$,onDragStart:Lr(()=>a.setFree(i)),Destinations:G,TrailerOrWaypointMarkers:V,PlayerMarker:HU})),ue=Tf(()=>Jp(i.distanceToNextManeuver)),Q=co(()=>i.activeRouteDirection?q.jsx(VU,{direction:i.activeRouteDirection.direction,length:ue.get().length,unit:ue.get().unit,laneHint:i.distanceToNextManeuver<=5e3?i.activeRouteDirection.laneHint:void 0,thenHint:!i.activeRouteDirection.laneHint||i.distanceToNextManeuver>5e3?i.activeRouteDirection.thenHint:void 0,banner:i.activeRouteDirection.banner}):q.jsx(q.Fragment,{})),de=co(()=>i.segmentComplete!=null?q.jsx(QU,{open:!0,place:i.segmentComplete.place,placeInfo:i.segmentComplete.placeInfo,isFinalSegment:i.segmentComplete.isFinal,onContinueClick:Lr(()=>a.unpauseRouteEvents(i,e)),onEndClick:Lr(()=>{a.unpauseRouteEvents(i,e),a.setActiveRoute(i,void 0,e)})}):q.jsx(q.Fragment,{})),oe=Tf(()=>({minutes:i.activeRouteToFirstWayPointSummary?.minutes??0,distance:Jp(i.activeRouteToFirstWayPointSummary?.distanceMeters??0)}),{equals:If.structural}),be=co(ke=>q.jsx(XU,{summary:oe.get(),onExpandedToggle:ke.onExpandedToggle,onManageStopsClick:i.activeRoute!=null&&i.activeRoute.segments.length>1?Lr(()=>{h.startManageStopsFlow(f),i.showNavSheet=!0}):void 0,onSearchAlongRouteClick:Lr(()=>{h.startSearchAlongFlow(f),i.showNavSheet=!0}),onRoutePreviewClick:Lr(()=>{if(!i.activeRoute){console.warn("no active route to preview");return}const[ae,Ee,Ze,Qe]=Fb(Ag(i.activeRoute));i.cameraMode=ec.FREE,a.fitPoints(i,[[ae,Ee],[Ze,Qe]])}),onRouteDirectionsClick:Lr(()=>{h.startShowActiveRouteDirectionsFlow(f),i.showNavSheet=!0}),onRouteEndClick:Lr(()=>a.setActiveRoute(i,void 0,e))})),we=()=>q.jsx(JU,{Guidance:Q,RouteControls:be,SegmentCompleteToast:de}),Ie=co(()=>i.readyToLoad?i.isReceivingTelemetry?q.jsx(q.Fragment,{}):q.jsx(xq,{}):q.jsx(q.Fragment,{}));return{App:()=>q.jsx(SQ,{store:i,transitionDurationMs:t,SlippyMap:se,NavSheet:x,RouteStack:we,Controls:D,WaitingForTelemetry:Ie}),store:i}}const SQ=e=>{console.log("render app");const{SlippyMap:t,NavSheet:i,RouteStack:a,Controls:c,WaitingForTelemetry:h}=e,f=Yv(),o=l9(f.breakpoints.up("sm")+" and (orientation: portrait)");return q.jsxs(yq,{children:[q.jsx(t,{}),q.jsx(hg,{columns:3,container:!0,sx:{flexGrow:1,position:"absolute",top:0,right:0,pointerEvents:"none"},padding:2,paddingBlockEnd:3,height:"100vh",children:q.jsx(CQ,{store:e.store,isLargePortrait:o,transitionDurationMs:e.transitionDurationMs,children:q.jsx(c,{})})}),q.jsx(hg,{container:!0,sx:{flexGrow:1,pointerEvents:"none"},padding:2,paddingBlockEnd:3,height:"100vh",justifyContent:"space-between",children:q.jsx(hg,{size:{xs:12,sm:o?12:5},maxWidth:o?void 0:600,sx:{zIndex:999},children:q.jsx(TQ,{store:e.store,children:q.jsx(a,{})})})}),q.jsx(hg,{container:!0,sx:{flexGrow:1,position:"absolute",top:0,left:0,right:0,pointerEvents:"none"},padding:2,paddingBlockEnd:3,height:"100vh",children:q.jsx(hg,{size:{xs:12,sm:o?12:5},maxWidth:o?void 0:600,sx:{maxHeight:"100%"},children:q.jsx(MQ,{store:e.store,children:q.jsx(i,{})})})}),q.jsx(h,{})]})},CQ=co(e=>{const t=!e.store.showNavSheet&&e.store.activeRoute!=null;return q.jsx(hg,{container:!0,alignItems:"stretch",sx:{pt:{xs:t?14:0,sm:e.isLargePortrait&&t?14:0},pb:{xs:t?13:0,sm:e.isLargePortrait&&t?13:0},zIndex:999,transition:`${e.transitionDurationMs}ms padding ease`},children:e.children})}),TQ=co(e=>q.jsx(sS,{in:!e.store.showNavSheet&&e.store.activeRoute!=null,direction:"right",children:q.jsx(ii,{height:"100%",children:e.children})})),MQ=co(e=>q.jsx(sS,{in:e.store.showNavSheet,direction:"right",children:q.jsx(ii,{height:"100%",sx:{position:"relative",top:0,left:0,zIndex:999,pointerEvents:"auto"},children:e.children})})),PQ=e=>new Promise(t=>setTimeout(t,e));function EQ(e){if(!e.arrowPoints||e.arrowPoints<2)return 0;const t=Gg.decode(e.geometry).slice(0,e.arrowPoints);return lS(t[0],t[1])}yA({enforceActions:"always",computedRequiresReaction:!0,reactionRequiresObservable:!0,observableRequiresReaction:!0,disableErrorBoundaries:!0});const gD=yk(),IQ=document.getElementById("root"),kQ=DV.createRoot(IQ),yD=L8({links:[k8({client:I8({url:"wss://api.truckermudgeon.com/navigator",connectionParams:()=>{const e=localStorage.getItem("viewerId");return e?{viewerId:e}:null},onOpen:()=>{console.log("opening...")},onError:e=>console.error("ws client error",e),onClose:e=>console.error("socket closed",e),retryDelayMs:e=>Math.min(Math.pow(2,e+1)*1e3,15e3),keepAlive:{enabled:!0,intervalMs:3e4,pongTimeoutMs:5e3}})})]}).app,{App:AQ,store:RQ}=wQ({appClient:yD,transitionDurationMs:gD.transitions.duration.standard}),DQ=Y.memo(()=>q.jsx(AQ,{}));kQ.render(q.jsx(Y.StrictMode,{children:q.jsx(VN,{theme:{[Wv]:gD},children:q.jsxs(DO,{children:[q.jsx(hB,{}),q.jsx(VV,{appClient:yD,readyToLoadStore:RQ,App:DQ})]})})}))});export default zQ();
